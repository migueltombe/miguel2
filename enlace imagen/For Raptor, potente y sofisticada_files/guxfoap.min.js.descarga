function getCurrentPathNameWithoutEndHtml(){window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:""));var e=window.location.origin+window.location.pathname;return e.endsWith(".html")?e=e.substring(0,e.lastIndexOf(".")):-1!==e.indexOf("predelivery")&&(e="https://www.ford.com.au/predelivery/"),e}function getEmailKeyUrl(e){return getCurrentPathNameWithoutEndHtml()+".edm."+e+".data"}function addClientContextData(e){CQ_Analytics.OwnerInfoStoreMgr.loadData(e)}function returnJsonTypeBaseonBrowser(){return"XDomainRequest"in window&&null!==window.XDomainRequest?"jsonp":"json"}function initErrorMessageSL(){$.ajax({type:"GET",async:!1,url:getLanguageRoot()+".serviceMessage.data",success:function(e){"object"==typeof e&&(e=JSON.stringify(e)),$("#dataErrors").attr("data-errors",e)},error:function(e){console.error("[ServiceMessageServlet] initErrorMessageSL(): Reading data config error")}})}function getErrorMessageByCode(e){var t=$("#dataErrors").attr("data-errors"),a=(t||(initErrorMessageSL(),t=$("#dataErrors").attr("data-errors")),"");if(t)try{for(var i=JSON.parse(t),a=getDefaultErrorMessageByCode(i),n=0;n<i.length;n++)if(i[n].key==e){a=i[n].value;break}}catch(e){}return a}function getDefaultErrorMessageByCode(e){for(var t=0;t<e.length;t++)if("DEFAUL_MSG"==e[t].key)return e[t].value;return"Something went wrong with the service. Please check again later"}function dynamicPriceShowError(e,t){return!(e&&""!==e&&null!==e||!$(t).length||null===$(t).val()||""===$(t).val())&&$(t).val()}function updatePriceAjax(e,t,a,d){var u;e&&"false"!=e&&(u="!\"#$%&'()*+,./:;<=>?@[]^`{|}~",$.ajax({type:"GET",url:$("#serviceLayerUrl").val()+"/fordowner/vehicle/model/price",data:{derivativeKeys:t,modelkeys:a,countryCodeISO:$("#countryCodeISO").val()},dataType:returnJsonTypeBaseonBrowser(),success:function(e){var i,n,o,r,l,s,c;e&&"200"==e.returnCode&&(e=e.vehicle,o=n=i="",r=!1,l=$("#applyCurrencyFormat").val(),s="#startingPriceErrorCode",c="#maxPriceErrorCode",e&&null!==e&&0<e.length?e.forEach(function(t){t.startingPrice&&(t.startingPrice=t.startingPrice.replace(/,/g,"")),t.maxPrice&&(t.maxPrice=t.maxPrice.replace(/,/g,"")),null!=t.startingPrice&&(i=t.startingPrice),null!=t.maxPrice&&(n=t.maxPrice),dynamicPriceShowError(i,s)&&(o=i=r=dynamicPriceShowError(i,s)),dynamicPriceShowError(n,c)&&(n=(dynamicPriceShowError(i,s)&&(i=dynamicPriceShowError(i,s)),dynamicPriceShowError(n,c)),o=r=i+" - "+n),!r&&l&&"true"===l&&(i=updatePriceFormat(i,"",!0),n=updatePriceFormat(n,"",!0),o=i+" - "+n);var a=t.key;if(null!=a&&""!==a){for(var e=0;e<u.length;e++)a=a.replace(new RegExp("\\"+u[e],"gi"),"\\"+u[e]);d.forEach(function(e){e=encodeURIComponent(e);e=$(e);t.displayPrice?1==t.displayPrice&&(replaceMacroData(e,"span#maxPrice"+a,n),replaceMacroData(e,"span#startingPrice"+a,i),replaceMacroData(e,"span#priceRange"+a,o)):(replaceMacroData(e,"span#maxPrice"+a,n),replaceMacroData(e,"span#startingPrice"+a,parseInt(i+1)),replaceMacroData(e,"span#priceRange"+a,o))})}}):(dynamicPriceShowError(i,s)&&(o=i=r=dynamicPriceShowError(i,s)),dynamicPriceShowError(n,c)&&(n=(dynamicPriceShowError(i,s)&&(i=dynamicPriceShowError(i,s)),dynamicPriceShowError(n,c)),o=r=i+" - "+n))),$.event.trigger({type:"pricesUpdatedNoLocation"})},error:function(e,t,a){}}))}function getCookie(e){e=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return e?decodeURIComponent(e[1]):void 0}function isLocalStorage(){if("undefined"==typeof Modernizr||void 0===Modernizr.localstorage)return!1;var e="__localstoragetest__";try{localStorage.setItem(e,e),localStorage.removeItem(e)}catch(e){return!1}return!0}function updateLocationPriceAjax(){var d,u={},p=window.localStorage,m=$("#isDynamicPriceBasedLocation").val(),e=$("#nameplatesInSiteTreeJson").val(),h=getCookie("common.location.LOC"),t=getCookie("common.location.type"),a="",f=$("#currencyFormatPattern").val(),g=$("#countryCodeISO").val();"true"===m&&(e=$("#namePlates").val()),"true"===m&&h&&e?((d=isLocalStorage())&&(a=p.getItem("common.location."+g+"."+h+".prices")),u.location=h,u.nameplates=_.uniq(e.split(",")),u.usageType=t,u.nameplates.length?$.ajax({type:"POST",url:$("#serviceLayerUrl").val()+"/fordowner/vehicle/buildandprice/getAUSModelPriceByPostalcode",data:JSON.stringify(u),beforeSend:function(e){e.setRequestHeader("Content-Type","application/json")},dataType:"json"}).success(function(e){var t={};if(d&&(t=JSON.parse(p.getItem("common.location."+g+"."+h+".prices"))||{}),!e.message&&e.vehicles){for(var a=e.vehicles[0].model,i=e.vehicles[0].location,n=0;n<a.length;n++){var o={},r=a[n];if(o.id=a[n].modelKey,o.startingPrice=a[n].startingPrice||"",o.maxPrice=a[n].maxPrice||"",o.modelName=a[n].modelName,o.derivatives=[],o.startingPrice&&f&&(o.startingPrice=updatePriceFormat(o.startingPrice,f,!0)),o.maxPrice&&f&&(o.maxPrice=updatePriceFormat(o.maxPrice,f,!0)),r.derivatives.length)for(var l=0;l<r.derivatives.length;l++){var s={},c=r.derivatives[l];s.id=c.key,s.maxPrice=c.maxPrice||"",s.startingPrice=c.startingPrice||"",s.name=c.name,s.startingPrice&&f&&(s.startingPrice=updatePriceFormat(s.startingPrice,f,!0)),s.maxPrice&&f&&(s.maxPrice=updatePriceFormat(s.maxPrice,f,!0)),o.derivatives.push(s)}t[o.id]=o}d&&p.setItem("common.location."+g+"."+i+".prices"+("true"===m?"."+u.nameplates:""),JSON.stringify(t))}$('span[id*="maxPrice"]').html(""),$('span[id*="startingPrice"]').html(""),$('span[id*="priceRange"]').html(""),$.event.trigger({type:"pricesUpdated",message:e.result,localData:t,setToNull:!e.result})}).fail(function(){$.event.trigger({type:"pricesUpdated",message:!1,setToNull:!0})}):$.event.trigger({type:"pricesUpdated",message:!0,localData:JSON.parse(a)})):"true"!==m||h?$.event.trigger({type:"pricesUpdated",message:!1}):($.event.trigger({type:"pricesUpdated",message:!1,setToNull:!0}),$('span[id*="maxPrice"]').html(""),$('span[id*="startingPrice"]').html(""),$('span[id*="priceRange"]').html(""))}function replaceMacroData(e,t,a){t=encodeURIComponent(t.trim()),a=encodeURIComponent(a.trim());var i,e=e.find(t),t=e.html();void 0!==t&&0<t.lastIndexOf("<span>")?(i=(i=t.substring(1)).substring(i.indexOf(">")+1,i.indexOf("<")),e.html(t.replace(i,a)),0<e.find(".gux-disclosure").length&&"function"==typeof require&&"function"==typeof require.defined&&require.defined("disclosure/component.disclosure")&&require("disclosure/component.disclosure").init()):e.html(a)}function getLanguageRoot(){var e=window.location.pathname,t=e.match("[a-zA-Z]{2,3}_[a-zA-Z]{2,3}");return null==t&&0<$("#currentLocalePath").length&&(t=(e=(e=$("#currentLocalePath").attr("value")).substring(e.indexOf("/content"))).match("[a-zA-Z]{2,3}_[a-zA-Z]{2,3}")),e=e.substring(0,e.indexOf(t[0])+t[0].length)}function currencyFormat(e,t,a,i){function n(e,t){return t=Math.pow(10,t),(Math.round(e*t)/t).toString()}var o,r,l=e;return 0==(l=isFinite(+e)?+l:0)?"0":(e=void 0===i?",":i,i=void 0===a?".":a,a=n(0<(t=isFinite(+t)?Math.abs(t):0)?l:Math.round(l),t),l=(a=1e3<=(o=n(Math.abs(l),t))?(r=(o=o.split(/\D/))[0].length%3||3,o[0]=a.slice(0,r+(l<0))+o[0].slice(r).replace(/(\d{3})/g,e+"$1"),o.join(i)):a.replace(".",i)).indexOf(i),1<=t&&-1!==l&&a.length-l-1<t?a+=new Array(t-(a.length-l-1)).join(0)+"0":1<=t&&-1===l&&(a+=i+new Array(t).join(0)+"0"),a)}function trimWhiteSpace(e){return e.replace(/^\s+|\s+$/g,"")}function getSymbolPosition(e){var t="";return e?t=e:$("#currencyFormatPattern").length&&(t=trimWhiteSpace($("#currencyFormatPattern").val())),!(""!==t&&-1<t.indexOf("#"))||t.lastIndexOf("#")+1===t.length?"before":"after"}function getSymbolByMKTconfig(e,t){var a="",i="",n="before";if(e)a=trimWhiteSpace(e);else if(!e&&$("#currencyFormatPattern").length)a=trimWhiteSpace(a=$("#currencyFormatPattern").val());else if(e||$("#currencyFormatPattern").length||!$("#currencySymbol").length||""===$("#currencySymbol").val()){if(!e&&!$("#currencySymbol").length&&!$("#currencyFormatPattern").length)return""}else a=$("#currencySymbol").val();return""!==a?-1<a.indexOf("#")?(i=a.lastIndexOf("#")+1===a.length?a.substring(0,a.indexOf("#")):a.substring(a.lastIndexOf("#")+1),n=getSymbolPosition(a)):i=a:i="",void 0!==t&&!1!==t?"before"===n?i+t:t+i:i}function indiaCurrencyFormat(e,t,a,i){t=parseFloat(t),e=""+(e=parseFloat(e));var n=[],o="",r="",l="";if(-1<e.indexOf(".")?(o=(n=e.split("."))[0],l=n[1]):o=e,0<t&&(r=1<n.length?a+l.substring(0,t):a,l.length<t))for(var s=0;s<t-l.length;s++)r+="0";for(var c=/(\d+)(\d{3})/,d=0,e=String(o).length,u=parseInt(e/2-1);c.test(o)&&(0<d?o=o.replace(c,"$1"+i+"$2"):(o=o.replace(c,"$1"+i+"$2"),c=/(\d+)(\d{2})/),d++,0!=--u););return o+r}function setRoundingMode(e,t){if(void 0===e||""===e||null===e||!1===e)return"0";if(e=parseFloat(e),isNaN(e))return"0";if(e%1!=0){var a,i="UNNECESSARY";switch(void 0===t||""===t||null===t||!1===t?$("#currencyFormatPattern").length&&(a=$("#currencyFormatPattern").attr("data-rounding-format"))&&""!==a&&(i=a):i=t,i){case"UNNECESSARY":break;case"UP":e=Math.ceil(e);break;case"DOWN":e=Math.floor(e);break;case"HALF_UP":e=!(0<=e)&&e%.5==0?Math.floor(e):Math.round(e);break;case"HALF_DOWN":e=e%.5!=0||e<0?Math.round(e):Math.floor(e);break;case"HALF_EVEN":e=e%.5==0&&Math.floor(e)%2==0?Math.floor(e):Math.round(e)}}return e}function updatePriceFormat(e,t,a){var i="";if(t&&""!==t&&null!==t?i=t:$("#currencyFormatPattern").length&&(i=$("#currencyFormatPattern").val().replace(/[^#,]/g,"")),""===e||isNaN(e)||""===i)return"";e=setRoundingMode(e);var t=(i=trimWhiteSpace(i)).substring(i.indexOf("#"),i.lastIndexOf("#")+1),n="",o=0,r="",l="",l=-1<t.indexOf(",")&&-1<t.indexOf(".")?t.lastIndexOf(".")>t.lastIndexOf(",")?(o=t.length-(t.lastIndexOf(".")+1),r=".",","):(o=t.length-(t.lastIndexOf(",")+1),r=",","."):-1<t.indexOf(".")&&t.indexOf(",")<0?".":(-1<t.indexOf(",")&&t.indexOf("."),","),n=(-1<i.indexOf("₹")?indiaCurrencyFormat:currencyFormat)(e,o,r,l);return void 0!==a&&!1!==a?getSymbolByMKTconfig(i,n):n}function doLogout(){$(".loggedin").each(function(){(1==$(this).parent().children().length?$(this).parent():$(this)).remove()}),$.removeCookie("OWNER_SESSION",{path:"/"}),$.removeCookie("OWNER_USERNAME",{path:"/"}),$.removeCookie("OWNER_USERINFO",{path:"/"})}function replaceHtml(a,i){return Object.keys(i).forEach(function(e){var t;a=1!=e.indexOf("[@")?(t=e.replace("[@","\\[\\@").replace("]","\\]"),a.replace(new RegExp("("+t+")","g"),i[e])):a.replace(e,i[e])}),a}function addPaymentCalcNameplateId(){var e;$("#paymentcalc-nameplateId").length&&(e=$("#paymentcalc-nameplateId").attr("value"))&&(document.cookie='selectedNameplate={"vehicleKey":"'+e+'","modelKey":"","category":""};path=/')}define("releaseVersion/component.releaseVersion",[],function(e){var t={init:function(){}};return t}),define("marketConfigGlobal",["jquery","configurationProvider"],function(e,t){var a={EMPTY:""};return a.GLOBAL_MARKET_CONF=t.get(e("#global-market-configuration")),a.getCurrentLanguageCode=function(){return a.GLOBAL_MARKET_CONF&&a.GLOBAL_MARKET_CONF.languageCode?a.GLOBAL_MARKET_CONF.languageCode.toLowerCase():a.EMPTY},a.getCurrentiso3MarketCode=function(){return a.GLOBAL_MARKET_CONF&&a.GLOBAL_MARKET_CONF.iso3MarketCode?a.GLOBAL_MARKET_CONF.iso3MarketCode.toLowerCase():a.EMPTY},a.getCurrentMarketCode=function(){return a.GLOBAL_MARKET_CONF&&a.GLOBAL_MARKET_CONF.marketCode?a.GLOBAL_MARKET_CONF.marketCode.toLowerCase():a.EMPTY},a.getChatDateConfigPath=function(){return a.GLOBAL_MARKET_CONF&&a.GLOBAL_MARKET_CONF.chatdatesconfigpath?a.GLOBAL_MARKET_CONF.chatdatesconfigpath.toLowerCase():a.EMPTY},a.getMapMarkerToggleValue=function(){return a.GLOBAL_MARKET_CONF&&String(a.GLOBAL_MARKET_CONF.hideMarker)?String(a.GLOBAL_MARKET_CONF.hideMarker).toLowerCase():a.EMPTY},a.getTimeStampConfigPath=function(){return a.GLOBAL_MARKET_CONF&&a.GLOBAL_MARKET_CONF.timezoneconfigpath?a.GLOBAL_MARKET_CONF.timezoneconfigpath.toLowerCase():a.EMPTY},a}),(r=>{r.fn.waitUntilExists=function(e,t,a){var i="found",n=r(this.selector),o=n.not(function(){return r(this).data(i)}).each(e).data(i,!0);return a?t&&o.length&&window.clearInterval(window.waitUntilExists_Intervals[this.selector]):(window.waitUntilExists_Intervals=window.waitUntilExists_Intervals||{})[this.selector]=window.setInterval(function(){n.waitUntilExists(e,t,!0)},500),n},r.fn.serializeObject=function(){var e={},t=this.serializeArray();return r.each(t,function(){void 0!==e[this.name]?(e[this.name].push||(e[this.name]=[e[this.name]]),e[this.name].push(this.value||"")):e[this.name]=this.value||""}),e}})(jQuery),addPaymentCalcNameplateId(),define("configurationProvider",["jquery"],function(e){var t={get:function(e){var t={},e=e.find(".configuration");return t=e?(t=e.data())||{}:t}};return t}),define("utils/convertKeyword",["jquery","ui-datepicker"],function(o,e){function n(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}function r(e,t){t=t||window.location.href,e=e.replace(/[\[\]]/g,"\\$&");e=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return e?e[2]?decodeURIComponent(e[2].replace(/\+/g," ")):"":null}o.fn.textReplace=function(a,i){var n=o.isFunction(a);return this.contents().each(function e(){var t=this.nodeName.toLowerCase();"#text"===t?n?a.call(this):this.data=this.data.replace(a,i):1===this.nodeType&&this.childNodes&&this.childNodes[0]&&"script"!==t&&"textarea"!==t&&o(this).contents().each(e)}),this};var t={toDate:function(e,t,a){var i=o("#global-market-configuration .configuration").attr("data-date-format"),t=n(void 0!==t&&0!=t?t:"[@date]"),a=void 0!==a&&0!=a?a:""!=i&&0<i.length?i:"dd/mm/yy";(a=a.indexOf("yyyy")?a.replace(/yyyy/g,"yy"):a).indexOf("yyy")&&(a=a.replace(/yyy/g,"yy")),i=o.datepicker.formatDate(a,new Date),(0<o(e).children().length?o(e).children():o(e)).textReplace(new RegExp(t,"g"),i)},replaceVariableByParamValue:function(e,i){o(e).each(function(){var e,t=o(this).childElementCount<2?o(this).text():o(this).contents()[0].textContent,a=t.replace(/[\[@\]]/g,""),a=void 0!==i&&!1!==i?r(a,i):r(a);""!==a&&null!==a?o(this).hasClass("brochure-link-path")?(e=o(this).contents()[1].textContent,o(this).html('<a href="'+encodeURIComponent(a)+'" target="blank" download>'+e+"</a>")):(o(this).textReplace(new RegExp(n(t),"g"),decodeURIComponent(a)),o(this).hasClass("enable-auto-link")&&o(this).find("span").html(o(this).find("span").html().replace(/(\b(https?|ftp):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gim,'<a class="linkify" href="$1" title="$1" style="text-decoration: none;">$1</a>').replace(/(^|[^\/])(www\.[\S]+(\b|$))/gim,'$1<a class="linkify" href="http://$2" title="$2" style="text-decoration: none;">$2</a>').replace(/(([a-zA-Z0-9\-\_\.])+@[a-zA-Z\-\_]+?(\.[a-zA-Z]{2,30})+)/gim,'<a class="linkify" href="mailto:$1" title="$1" style="text-decoration: none;">$1</a>'))):o(this).remove()}),setTimeout(function(){o("a.linkify").length&&o("a.linkify").each(function(){var e=o(this).text();e.match(/[^/]+(jpg|JPG|jpeg|JPEG|png|PNG|gif|GIF)$/)&&(o(this).attr("target","_blank"),o(this).html("<img src='"+e+"' alt='"+e+"' style='width: auto; height: auto; margin: 0 auto;'/>"))})},500)}};return t}),define("cookie",["jquery"],function(e){var t={setCookie:function(e,t,a){var i=new Date,a=(i.setTime(i.getTime()+24*a*60*60*1e3),"expires="+i.toUTCString());document.cookie=e+"="+escape(t)+"; "+a},setCookieWithPath:function(e,t,a,i){var n=new Date,a=(n.setTime(n.getTime()+24*a*60*60*1e3),"expires="+n.toUTCString());t=escape(t),document.cookie=e+"="+t+"; "+a+"; path="+i},getSessionCookie:function(){return t.getCookie("OWNER_SESSION")},getCookie:function(e){for(var t=e+"=",a=document.cookie.split(";"),i=0;i<a.length;i++){for(var n=a[i];" "==n.charAt(0);)n=n.substring(1);if(0==n.indexOf(t))return unescape(n.substring(t.length,n.length))}return""},eraseCookie:function(e){this.setCookie(e,"",-1)},eraseCookieWithPath:function(e,t){this.setCookieWithPath(e,"",-1,t)}};return t}),define("utils/utils.date",["jquery"],function(d){var e={};function u(e,t,a){(t?d(e).find(t):d(e)).text(a)}function p(e){return e.getDate()<=9?"0"+e.getDate():e.getDate()}return e.setDateFormat=function(e,t,i){var a,n,o,r;switch(e){case"zh":d.each(t,function(e,t){o=new Date(d(t).data("timestamp")),a=(e=>e.getMonth()<9?"0"+(e.getMonth()+1):e.getMonth()+1)(o),n=p(o),r=o.getFullYear()+"年 "+a+"月 "+n+"日",u(t,i,r)});break;case"es":c=["ene","feb","mar","abr","mayo","jun","jul","ago","sep","oct","nov","dic"],s=["dom","lun","mar","mié","jue","vie","sab"],d.each(t,function(e,t){o=new Date(d(t).data("timestamp")),n=p(o),r=s[o.getDay()]+", "+c[o.getMonth()]+" "+n+", "+o.getFullYear(),u(t,i,r)});break;case"pt":var l=d(".news .container-news").data("date-formatter"),s=d(".news .container-news").data("day-of-weeks-json"),c=d(".news .container-news").data("months-json");l&&s&&c?d.each(t,function(e,t){o=new Date(d(t).data("timestamp")),n=p(o);var a=l.replace("DAY_OF_WEEK",s[o.getDay()]);a=(a=(a=a.replace("DATE",n)).replace("MONTH",c[o.getMonth()])).replace("YEAR",o.getFullYear()),u(t,i,a)}):(c=["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],s=["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"],d.each(t,function(e,t){o=new Date(d(t).data("timestamp")),n=p(o),r=s[o.getDay()]+", "+n+"/"+c[o.getMonth()]+"/"+o.getFullYear(),u(t,i,r)}));break;case"ar":c=["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"],d.each(t,function(e,t){o=new Date(d(t).data("timestamp")),n=p(o),r=n+" "+c[o.getMonth()]+" "+o.getFullYear(),u(t,i,r)})}},e.setDateLang=function(e,t){var a,i,n,o,r;switch(e){case"zh":d.each(t,function(e,t){a=d(t).attr("sortmonth"),i=d(t).attr("sortyear"),u(t,o,n=(a=a<10?"0"+a:a)+" 月 - "+i)});break;case"pt":r=["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],d.each(t,function(e,t){a=parseInt(d(t).attr("sortmonth"))-1,i=d(t).attr("sortyear"),n=r[a]+" - "+i,u(t,o,n)});break;case"es":r=["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],d.each(t,function(e,t){a=parseInt(d(t).attr("sortmonth"))-1,i=d(t).attr("sortyear"),n=r[a]+" - "+i,u(t,o,n)})}},e}),define("detect-ie",["jquery"],function(e){var t={version:function(){var e=window.navigator.userAgent,t=e.indexOf("MSIE ");return 0<t?parseInt(e.substring(t+5,e.indexOf(".",t)),10):0<e.indexOf("Trident/")?(t=e.indexOf("rv:"),parseInt(e.substring(t+3,e.indexOf(".",t)),10)):0<(t=e.indexOf("Edge/"))&&parseInt(e.substring(t+5,e.indexOf(".",t)),10)}};return t}),define("equalHeights",["jquery","pubsub","mediaQuery"],function(o,e,r){var t={init:function(e){o.fn.equalHeights=function(){return this.each(function(){this.equalHeights=new a(o(this))})},e.equalHeights()}};function a(e){var t;return!!e.length&&(t=e.data("equalHeightConfig"),this.config=o.extend({},{numbers:{},elems:{$el:e},state:{heightSet:!1},events:{resize:"mediaQuery:change"}},t),this.setup(),this)}return a.prototype.setup=function(){if(this.config.numbers.colsPerRow=this.config.rowCols[r.getMediaType()],this.config.numbers.colsPerRow<2)return!1;this.initialseColumns()},a.prototype.initialseColumns=function(){for(var e=this.config,t=e.targetElemSelectors,a=t.length,i=this,n=0;n<a;n+=1)e.elems.rowCollection=this.splitIntoRows(e.elems.$el.find(t[n])),this.removeInlineStyle(),this.setColumnsHeights();o.subscribe(this.config.events.resize,function(){i.removeInlineStyle(),i.config.numbers.colsPerRow=i.config.rowCols[r.getMediaType()],1<i.config.numbers.colsPerRow&&i.setColumnsHeights()})},a.prototype.removeInlineStyle=function(){for(var e=this.config.elems.rowCollection,t=e.length,a=0;a<t;a+=1)this.checkForInlineStyle(e[a])},a.prototype.checkForInlineStyle=function(e){for(var t=e.length,a=0;a<t;a+=1)e[a].hasAttribute("style")&&e[a].removeAttribute("style")},a.prototype.setColumnsHeights=function(){for(var e=this.config.elems.rowCollection,t=e.length,a=0;a<t;a+=1){var i=this.getRowHeight(e[a]);this.setRowHeight(e[a],i)}},a.prototype.getRowHeight=function(e){for(var t,a=0,i=e.length,n=0;n<i;n+=1)a=a<(t=e[n].offsetHeight)?t:a;return a},a.prototype.setRowHeight=function(e,t){for(var a=e.length,i="string"==typeof t?t:t+"px",n=0;n<a;n+=1)e[n].style.height=i;this.config.state.heightSet=!0},a.prototype.splitIntoRows=function(e){for(var t=[],a=[],i=0;i<e.length;i+=1)a.push(e[i]),0===parseInt((i+1)%this.config.numbers.colsPerRow,10)&&(t.push(a),a=[]);return t},t}),define("getImgSlToken",["jquery"],function(e){var t={},i="/bin/oauth/token";return t.getOwnToken=async function(){return new Promise(function(t,a){e.ajax({type:"GET",url:window.location.origin+i,success:function(e){e&&(e="string"==typeof e?JSON.parse(e):e,t({token:e?.token,isError:!1,createdOn:e?.token_creation_time}))},error:function(e){a({isError:!0,message:e})}})})},t.getShopToken=async function(){return i="/bin/oauth/token.shop.data",this.getOwnToken()},t.checkTokenIsExpired=function(e){e=new Date-new Date(e);return 59<=Math.round(e%864e5%36e5/6e4)},t}),define("utils/getParamValue",["jquery"],function(n){var o={byName:function(e,t){void 0!==t&&""!==t&&null!==t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");e=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return!!e&&(e[2]?decodeURIComponent(e[2].replace(/\+/g," ")):"")},byNameInHashLAD:function(e,t){void 0!==t&&""!==t&&null!==t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");e=new RegExp("[?&]"+e+"(=([^&]*)|&|#|$)"),t=decodeURIComponent(t),e=e.exec(t);return!!e&&(e[2]?decodeURIComponent(e[2].replace(/\+/g," ")):"")},byNameInHash:function(e,t){return-1<(t=void 0!==t&&""!==t&&null!==t?t:window.location.href).indexOf("#")&&(t="?"+t.split("#")[1],o.byName(e,t))},removeParam:function(e,t){var a=(t=void 0!==t&&""!==t&&null!==t?t:window.location.href).split("?")[0],i=[],t=-1!==t.indexOf("?")?t.split("?")[1]:"";if(""!==t){for(var n=(i=t.split("&")).length-1;0<=n;--n)i[n].split("=")[0]===e&&i.splice(n,1);a=a+"?"+i.join("&")}return a},transformToAssocArray:function(e){for(var t={},a=e.split("&"),i=0;i<a.length;i++){var n=a[i].split("=");t[decodeURIComponent(n[0])]=decodeURIComponent(n[1])}return t},getParameters:function(e){return-1<(e=void 0!==e&&""!==e&&null!==e?e:window.location.href).indexOf("?")&&null!=(e=e.split("?")[1])&&""!=e&&this.transformToAssocArray(e)},getParamsObject:function(e){void 0!==e&&""!==e&&null!==e||(e=window.location.href);var t,a,i={};return-1<e.indexOf("?")&&(-1<e.indexOf("#")&&(t=e.split("#")[0],-1<(a=e.split("#")[1]).indexOf("?"))?(t=o.getParameters(t),a=o.getParameters(a),n.each(t,function(e,t){i[e]=t}),n.each(a,function(e,t){i[e]=t}),i):o.getParameters(e))}};return o}),define("isAuthor",["jquery"],function(e){var t={},a=null;return t.getAuthorStatus=function(){return a=null===a?"undefined"!=typeof CQ&&CQ.WCM&&CQ.WCM.isEditMode(!0):a},t}),define("utils/mediaTracking",["jquery","cookie"],function(o,r){var e={},l=location.protocol+"//"+location.host+location.pathname;return e.mergeSerialize=function(t){var e,a,i,n;return o("#enableMediaTracking").length&&o("#mediaTracking").length&&t.constructor===Array&&(e=o("#enableMediaTracking").val(),a=o("#mediaTracking").val(),"true"===e)&&""!==a&&(i=a.split(","),o.each(i,function(e){""!==(n=r.getCookie(i[e]))&&(t.push({name:i[e],value:n}),"utm_source"==i[e])&&t.push({name:"landing_page",value:l})})),t},e.mergeObject=function(t){var e,a,i;return o("#enableMediaTracking").length&&o("#mediaTracking").length&&(e=o("#enableMediaTracking").val(),a=o("#mediaTracking").val(),"true"===e)&&""!==a&&(i=a.split(","),o.each(i,function(e){""!==r.getCookie(i[e])&&(t[i[e]]=r.getCookie(i[e]),"utm_source"==i[e])&&(t.landing_page=l)})),t},e.mergeParam=function(t){var e,a,i;return o("#enableMediaTracking").length&&o("#mediaTracking").length&&(e=o("#enableMediaTracking").val(),a=o("#mediaTracking").val(),"true"===e)&&""!==a&&(i=a.split(","),o.each(i,function(e){""!==r.getCookie(i[e])&&(t+="&"+i[e]+"="+r.getCookie(i[e])),"utm_source"==i[e]&&(t+="&landing_page="+l)})),t},e}),define("numberFormat",["_"],function(o){var e={},r={decimalsNumber:2,decimalsDelimiter:".",thousandsDelimiter:",",forceDecimals:!1};return e.formatNumber=function(e,t){var t=o.defaults(t,r),a=t.decimalsNumber,i=t.decimalsDelimiter,n=t.thousandsDelimiter,t=t.forceDecimals;return e=(e+"").replace(/[^0-9+\-Ee.]/g,""),e=isFinite(+e)?+e:0,a=isFinite(+a)?Math.abs(a):0,3<(e=(a?((e,t)=>(t=Math.pow(10,t),""+Math.round(e*t)/t))(e,a):""+Math.round(e)).split("."))[0].length&&(e[0]=e[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,n)),(e=((e[1]||"").length>a||t)&&(e[1]=e[1]||"",e[1]+=new Array(a-e[1].length+1).join("0"),""===e[1])?[e[0]]:e).join(i)},e}),define("objectUtil",[],function(){var e={getPropertyByString:function(e,t){var a,i=null;if(e&&t)for(var n=e.split("."),i=t,o=0;o<n.length;o++){if(!(a=n[o])||!i){i=null;break}i=i[a]}return i}};return e}),define("pubsub",["jquery"],function(e){var a={};e.subscribe=function(e,t){a.hasOwnProperty(e)||(a[e]=[]);a[e].push(t);return{topic:e}},e.publish=function(e,i){if(!a.hasOwnProperty(e))return!1;a[e].forEach(function(e,t,a){e(void 0!==i?i:{})})},e.unsubscribe=function(e){if(void 0===e||!a.hasOwnProperty(e.topic))return!1;delete a[e.topic]}}),define("requestCacheManager",["jquery"],function(t){var e={get:function(e){return t.ajax(e,{cache:!0}).fail(function(){})}};return e}),define("utils/utils.search",["jquery"],function(e){var a={};return a.tripAllHtmlTags=function(e){return e?e.replace(/(<([^>]+)>)/gi,""):""},a.hasAnyHtmlTag=function(e){return/^/.test(e)},a.getRealInputSearch=function(e){var t=e,e=t=e&&a.hasAnyHtmlTag(e)?a.tripAllHtmlTags(e):t;return e?e.replace(/(\.)/gi,"${dot-char}"):""},a}),define("utils/specificValidations",["jquery"],function(e){var t={};function n(e){e=e.slice(3,5)+"/"+e.slice(0,2)+"/"+e.slice(-4);return new Date(e)}function o(){for(var e=0;e<arguments.length;e++)arguments[e].setHours(0,0,0,0)}function r(e,t){l(e),e.closest("label").append('<small class="error">'+t+"</small>")}function l(e){e.removeClass("error").parent().parent().find("small.error").remove()}function i(e,t){return e.value="",t}function s(e){var t,a=c(e.value,e.getAttribute("data-format"));e.value=c(e.value,e.getAttribute("data-format"),e.getAttribute("data-mask")),console.log("val",a),console.log("elem.value",e.value),console.log("data-format",e.getAttribute("data-format")),console.log("data-mask",e.getAttribute("data-mask")),console.log("elem.createTextRange",e.createTextRange),console.log("elem.selectionStart",e.selectionStart),e.createTextRange?((t=e.createTextRange()).move("character",a.length),t.select()):e.selectionStart&&(e.focus(),e.setSelectionRange(a.length,a.length))}function c(e,t,a,i){for(var n=e.replace(/[^0-9]/g,""),o=(n="true"==i?e.replace(/[^a-zA-Z0-9]/g,""):n).split(""),r=0,l="",s=0;s<t.length;s++){var c=t[s];o[r]?/\*/.test(c)?(l+=o[r],r++):l+=c:a&&a.split("")[s]&&(l+=a.split("")[s])}return l}function d(e){e=e.slice(5,7)+"/"+e.slice(-2)+"/"+e.slice(0,4);return new Date(e)}return t.validateFutureDate=function(i){i.on("blur",function(){var e=new Date,t=n(i.val()),a=i.data("validation").rules[0].message;o(e,t),e<t?l(i):r(i,a)})},t.validatePastDate=function(i){i.on("blur",function(){var e=new Date,t=n(i.val()),a=i.data("validation").rules[0].message;o(e,t),t<e?l(i):r(i,a)})},t.validatePresentAndFutureDate=function(i){i.on("blur",function(){var e=new Date,t=n(i.val()),a=i.data("validation").rules[0].message;o(e,t),e==t||e<=t?l(i):r(i,a)})},t.validateMaxInput=function(a){a.change(function(){var e=document.querySelector('[name="PartnerDocumentIdNumber__c"]'),t=0;switch(a.val()){case"Identity Card":t=i(e,10);break;case"Passport":t=i(e,8);break;case"Foreign Card":t=i(e,6);break;case"RUT":t=i(e,10);break;case"NIT":t=i(e,8);break;default:t=i(e,15)}e.setAttribute("maxlength",t)})},t.validateMaxInputCL=function(n,o){n.change(function(){var e=document.querySelector(o),t="",a="",i=!1;switch(n.val()){case"Identity Card":case"RUT":a=t="********-*";break;case"Passport":a=t="*********",i=!0}e.value="",e.setAttribute("maxlength",""),e.setAttribute("placeholder",t),e.setAttribute("data-mask",t),e.setAttribute("data-format",a),e.setAttribute("data-isalphanumeric",i),s(document.querySelector(o))}),e(o).keyup(function(){s(document.querySelector(o))})},t.validatePastDate2=function(i){i.on("blur",function(){var e=new Date,t=d(i.val()),a=i.data("validation").rules[0].message;o(e,t),t<e?l(i):r(i,a)})},t.validatePresentAndFutureDate2=function(i){i.on("blur",function(){var e=new Date,t=d(i.val()),a=i.data("validation").rules[0].message;o(e,t),e===t||e<=t?l(i):r(i,a)})},t}),define("utils/utils.truncateText",["jquery"],function(l){var e={};return String.prototype.trimToLength=function(e){return this.length>e?jQuery.trim(this).substring(0,e).split(" ").slice(0,-1).join(" "):this},e.truncateText=function(e,t,a){var i,n,o,r=e.text();r.length>a&&(a=l("<span>").text(r.trimToLength(a)),i=l("<span>").text(r.substring(a.text().length)).addClass("remaining-text hidden"),n=l("<span>").html("&hellip; ").addClass("ellipsis"),o=l("<a>").text(t).attr("href","#").addClass("more-link"),e.empty().append(a).append(i).append(n).append(o),o.on("click",function(e){e.preventDefault(),o.addClass("hidden"),n.addClass("hidden"),i.removeClass("hidden")}))},e}),define("utils/utils.validateDynamicModelData",["jquery"],function(e){var t={};return t.validate=function(e){return!!e&&(e.forEach(function(e){if(!((t=e).hasOwnProperty("name")&t.hasOwnProperty("featureGroups")))return!1;var t;e.featureGroups.forEach(function(e){if(!((t=e).hasOwnProperty("name")&t.hasOwnProperty("features")))return!1;var t;e.features.forEach(function(e){if(!((e=e).hasOwnProperty("type")&e.hasOwnProperty("shortDescription")))return!1})})}),!0)},t}),define("vehicleAttributeUtil",["jquery","_","objectUtil","configurationProvider","numberFormat"],function(e,n,o,t,r){var a,i,l={},s=n.template('<%= prefix %><span class="value"><%= value %></span><%= suffix %>');function c(){return a&&i||(a=t.get(e("#global-market-configuration")),i=a.vehicleAttributes),i=void 0===i?{}:i}return l.getAttribute=function(e,t){var a=c(),a=a?a[e]:null,i="";return a&&n.forEach(a.items,function(e){i+=((e,t)=>(t=o.getPropertyByString(e.backendVariable,t),e.numeric&&(t=r.formatNumber(t,e)),s({prefix:e.prefix,value:t,suffix:e.suffix})))(e,t)}),i},l.getAttributeWithoutFormatter=function(e,t){var a,i=c();return i[e]&&(i=i[e].items[0].backendVariable,a=o.getPropertyByString(i,t)),a},l.getAttributeKeyFromValue=function(a){var i,e=c();return n.forEach(e,function(t){n.forEach(t.items,function(e){e.backendVariable==a&&(i=t.name)})}),i},l.getAttributeValueFromKey=function(e){var t,a=c();return t=a[e]?a[e].items[0].backendVariable:t},l.getAttributePriceFlag=function(e){var t=!1,a=c();return t=void 0!==a&&n.has(a[e],"items")?a[e].items[0].price:t},l}),define("windowResize",["jquery","pubsub"],function(e,t){function a(){void 0!==i&&window.clearTimeout(i),i=window.setTimeout(function(){e(window).width()===o&&e(window).height()===r||(o=e(window).width(),r=e(window).height(),e.publish("window:resize"))},n)}var i,n=50,o=e(window).width(),r=e(window).height();e(window).resize(a)}),define("auth-service/component.authService",["jquery","_","utils/getParamValue","cookie","isAuthor"],function(n,e,o,r,t){var i={};function a(){var t,e,a,i=n.cookie("OWNER_SESSION");void 0!==i&&""!=i?(e=n("#serviceLayerUrl").val(),i={sessionToken:i},"true"==n("#isLightHouse").val()&&(i.make=n("#make").val(),i.isLightHouse=!0,i.countryCodeIso2=n("#countryCodeIso2").val(),i.countryCodeISO=n("#countryCodeISO").val()),n.ajax({type:"POST",url:e+"/fordowner/vehicle/users/checkUser",dataType:returnJsonTypeBaseonBrowser(),data:i,success:function(e){void 0!==e&&201==e.returnCode?(n(".not-loggedin").each(function(){(1==n(this).parent().children().length?n(this).parent():n(this)).remove()}),n(".loggedin").each(function(){n(this).show()})):s()},error:function(e,t,a){s()}})):s(),(t=n("#ownerManualLabels")).length&&n.ajax({type:"GET",url:getLanguageRoot()+".ownerManualLabels.data",success:function(e){"object"==typeof e&&(e=JSON.stringify(e)),t.attr("owner-manual-labels",e)},error:function(e){console.error("[OwnerManualLabelsServlet] initOwnerManualLabels(): Reading data config error")}}),n("#enableMediaTracking").length&&n("#mediaTracking").length&&(e=n("#enableMediaTracking").val(),i=n("#mediaTracking").val(),"true"===e)&&""!==i&&(a=i.split(","),n.each(a,function(e){!1!==o.byName(a[e])&&r.setCookieWithPath(a[e],o.byName(a[e]),1,"/")}))}function l(){var e,t,a;i.isPublishMode&&n(".authenticated-site-page").length&&(n(".authenticated-site-page").css({display:"none"}),e=n("#errorRedirectUrl").val(),a=n("#isPartnerLogin").val(),t=(e=>{for(var t=e+"=",a=document.cookie.split(";"),i=0;i<a.length;i++){for(var n=a[i];" "==n.charAt(0);)n=n.substring(1,n.length);if(0==n.indexOf(t))return n.substring(t.length,n.length)}return null})("partnerLoginToken")||"",a?""!=t?n(".authenticated-site-page").css({display:"block"}):(e.indexOf(".html")<=-1&&(e+=".html"),window.location.href=e):(a=getCurrentPathNameWithoutEndHtml()+".authenticated.data",window.location.href=a))}function s(){doLogout(),l()}return i.isPublishMode=!t.getAuthorStatus(),i.authService=[],i.init=function(){var e=new a;i.authService.push(e)},i}),define("climes-config/component.climesConfig",["jquery"],function(s){var e={init:function(){e.requestClimes()},requestClimes:function(){var a,i=s("#messageError").val(),e=document.querySelector("#termsAndConditions");function n(e){return e?e.trim():null}var t=s("#codeId").val(),o=s("#countryCode").val(),r=s("#codeLegal").val(),l=s("#languageISOCode").val();n(t),n(o),n(r),n(l),t&&o&&r&&l?s.ajax({url:(t=t,o=o,r=r,l=l,s("#serviceLayerUrl").val()+"/fordowner/vehicle/climes/getlegaltext/"+t+"/"+o+"/"+r+"/"+l),dataType:"JSON",type:"GET"}).done(function(e){var t;a="200"===(t=e=e).statusCode&&t.hasOwnProperty("legalLanguage")&&0!==t.legalLanguage[0].legalLanguageText.length?e.legalLanguage[0].legalLanguageText:n(i)}).fail(function(e){a=n(i)}).always(function(){e.innerHTML=a}):a=n(i)}};return{init:function(){e.init()}}}),define("accordion/component.accordion",["jquery","_","mediaQuery","analytics/analyticsEventLayer","utils/getParamValue"],function(s,t,n,i,o){var r={};function a(a){this.$accordion=a,this.$firstItemBody=a.find(".accordion-body").first(),this.$accordionContents=a.find(".accordion-content"),this.$detailsButton=a.find(".accordion-details-button"),this.hideOtherItems=a.data("hide-other-items"),this.disableItemsActivation=a.data("disable-items-activation"),this.resetHeight(),this.attachEvents(),this.setHeightOnResize(a);var e,t=o.getParamsObject();s.each(t,function(e,t){"param"==e&&(e=JSON.parse(decodeURIComponent(t)),a.find(".accordion-title h3").html("<strong>"+e.featureName+"</strong>"),a.siblings(".image").find("img").attr("src",e.image),a.siblings(".image").find(".image-fullscreen").removeClass("no-image"),a.parents(".common-overlay").removeClass("no-caption"),a.find(".accordion-title .accordion-handle").css("display","none"),a.find(".actionsPanel .icon-download").parent().attr("href",e.image),e.cost&&(t='<div class="costDisplay"><span><strong>'+e.costTitle+":</strong> "+e.partPricePrefix+" "+e.cost+' <span style="white-space: nowrap;">'+e.accPartPriceSuffix+"</span> </span></div>",a.find(".accordion-title").append(t)),!e.isHidePartNumber&&e.partNumber&&(t="<p><strong>"+e.partNumberTitle+":</strong> "+e.partNumber+"<br></p>",a.find(".box-content .richtext").append(t)),!e.isHideFeatureDescription&&e.featureDescription&&a.find(".box-content .richtext").append(decodeURI(e.featureDescription)),!e.isHideDisclaimer&&e.disclaimer&&(t='<hr><p><small style="font-size: 90%;">'+decodeURI(e.disclaimer)+"</small></p></div>",a.find(".box-content .richtext").append(t)),a.find(".accordion-title").click(),a.find(".accordion-title").unbind())}),this.$detailsButton.length&&this.toggleDetailsButton(),this.$accordion.find(".accordion-overlay").length&&(e=this,window.document.addEventListener("mediaQuery.change",function(){e.$detailsButton.length&&e.toggleDetailsButton()}))}return a.prototype.switchOffOnMobile=function(e){var t="mobile"===n.getMediaType(),a=e.find(".accordion-item"),i=e.find(".accordion-title");t?(i.off("click"),a.each(function(){var e=s(this),t=e.find(".accordion-body"),a=e.find(".accordion-content"),e=e.find(".accordion-handle");a.find(".richtext.section").each(function(){s(this).find(".desktop,.mobile").css("overflow","auto")}),t.css("height","auto"),i.add(e).add(t).addClass("active")})):this.attachEvents()},a.prototype.toggleDetailsButton=function(){var e=this.$accordion.find(".accordion-title"),t=this.$detailsButton.data("showtext"),a=this.$detailsButton.data("hidetext");e.hasClass("active")?(this.$detailsButton.html(a),i.getAccordionEvents().trackExpandAccordion(this.$accordion.find(".accordion-title.active").find("h2, h3, h4, h5, p").clone().find("sup.gux-disclosure").remove().end().text()),a=(e=document.querySelectorAll("[data-actions-panel]"))[e.length-1],s(".accordion-title a").off(),s(a).on("keydown",function(e){9!==e.keyCode||1===s(".overlay-container .overlay-content-inner .slide.is-active .image img").length||e.shiftKey||e.preventDefault(),13===e.keyCode&&e.target.click()})):(s(".accordion-title a").on("keydown",function(e){9!==e.keyCode||1===s(".overlay-container .overlay-content-inner .slide.is-active .image img").length||e.shiftKey||e.preventDefault(),13===e.keyCode&&e.target.click()}),this.$detailsButton.html(t))},a.prototype.resetHeight=function(){this.$accordionContents.height("auto"),this.$firstItemBody.hasClass("active")&&(this.$firstItemBody.height("auto"),this.$firstItemBody.height(this.$accordionContents.first().outerHeight(!0)))},a.prototype.setHeightOnResize=function(e){s(window).on("resize",t.throttle(function(){e.find(".accordion-item").each(function(){var e=s(this),t=e.find(".accordion-body"),e=e.find(".accordion-content");t.hasClass("active")&&t.height(e.outerHeight(!0))})}))},a.prototype.toggleAccordion=function(e,t){var t=t.parent(".accordion-item"),a=t.find(".accordion-title"),i=t.find(".accordion-handle"),n=t.find(".accordion-body"),o=t.find(".accordion-content"),r=t.find(".active"),l=!!s(".fds-bg-accessories");e.find("ul:first-child").hasClass("allow-multiple")?t.add(a).add(i).add(n).toggleClass("active"):0<r.length?(t.removeClass("active"),r.removeClass("active"),n.height(0)):(e.find(".active").removeClass("active"),e.find(".accordion-body").height(0),t.add(a).add(i).add(n).addClass("active")),n.hasClass("active")?(this.addAdditionalAccessibilityEvents("active"),o.find(".richtext.section").each(function(){s(this).find(".desktop,.mobile").css("overflow","auto")}),n.css("height","auto"),n.find(".actionsPanel").animate({marginTop:"-20px",opacity:1}),l&&(s(".icon-share").toggleClass("icon-share icon-social-share"),s(".icon-download").removeClass("icon-chevron-thin-down"),s(".icon-download").toggleClass("icon-download icon-download-generic"))):(n.height(0),this.addAdditionalAccessibilityEvents("inactive"),n.find(".actionsPanel").animate({marginTop:"0px",opacity:0})),this.toggleDetailsButton()},a.prototype.addAdditionalAccessibilityEvents=function(e){var t=document.querySelector(".accordion")&&document.querySelector(".accordion").previousElementSibling&&-1!==document.querySelector(".accordion").previousElementSibling.className.indexOf("brightcove");"active"===e&&t?(s(".accordion-content .feature-container a").attr("tabindex",0),s(".gux-variable").attr("tabindex",-1),s(".accordion-title a").off("keydown"),s(".accordion-content .feature-container a").on("keydown",function(e){13===e.keyCode&&(e.target.click(),e.stopImmediatePropagation(),e.preventDefault())}),s(".actionsPanel a").on("keydown",function(e){9!==e.keyCode||e.shiftKey||e.preventDefault()}),s(".accordion-title a").on("keydown",function(e){13===e.keyCode&&e.target.click()})):"inactive"===e&&t?(s(".accordion-title a").on("keydown",function(e){9===e.keyCode?e.shiftKey||e.preventDefault():13===e.keyCode&&(e.stopImmediatePropagation(),e.preventDefault())}),s(".feature-container a, .gux-variable").attr("tabindex",-1)):"active"!==e||t||s(".accordion-content .feature-container a").on("keydown",function(e){13===e.keyCode&&e.target.click()})},a.prototype.attachEvents=function(){var a=this,t=this.$accordion;t.find(".accordion-title > a").on("keydown",function(e){13===e.keyCode&&0<s(".overlay-container .overlay-content-inner .slide.is-active .image img").length&&e.target.click()}),this.disableItemsActivation?t.find(".accordion-title").off("click").off("keyup"):t.find(".accordion-title").off("click").off("keyup").on("click",function(e){e.preventDefault(),this.$item=s(e.currentTarget),this.$items=this.$item.parent().siblings(".accordion-item"),a.toggleAccordion(t,this.$item),0<this.$item.closest(".accordion-compare").length&&this.$items.each(function(){var e=s(this),t=e.find(".accordion-title");e.hasClass("active")&&a.toggleAccordion(t)})}.bind(this)).on("keypress",function(e){13===e.which&&(e.preventDefault(),s(this).click())}),t.find(".compare-filter").off("click").on("click",function(e){r.accordions=[],r.init(this.$accordion)}.bind(this))},r.accordions=[],r.init=function(e){e=new a(e);r.accordions.push(e),e.addAdditionalAccessibilityEvents("inactive"),s(".overlay-close").on("keydown",function(e){9===e.keyCode&&e.shiftKey&&e.preventDefault()})},r}),define("accordion/component.common.accordion",["jquery","_","mediaQuery","analytics/analyticsEventLayer"],function(l,t,o,i){var n={};function a(e){var t;this.$accordion=e,this.$firstItemBody=e.find(".accordion-body").first(),this.$accordionContents=e.find(".accordion-content"),this.$detailsButton=e.find(".accordion-details-button"),this.hideOtherItems=e.data("hide-other-items"),this.disableItemsActivation=e.data("disable-items-activation"),this.addClassToTitle(),this.resetHeight(),this.setHeightForTitle(),this.attachEvents(),this.setHeightOnResize(e),this.$detailsButton.length&&this.toggleDetailsButton(),this.$accordion.find(".accordion-overlay").length&&(t=this,window.document.addEventListener("mediaQuery.change",function(){t.$detailsButton.length&&t.toggleDetailsButton()})),l(".accordion-title .richtext .showmore").length&&l(".accordion-title .richtext .showmore").on("click",function(e){return e.preventDefault(),!1})}return a.prototype.addClassToTitle=function(){this.$accordion.find(".accordion-title").each(function(){l(this).find(".img").length&&l(this).addClass("has-icon"),l(this).find(".desc").length&&l(this).addClass("has-description"),l(this).find(".richtext").length&&l(this).addClass("has-richtext")})},a.prototype.setHeightForTitle=function(){var e,t,a,i,n=this.$accordion.find(".accordion-title");"mobile"===o.getMediaType()?void 0!==(e=l(n).attr("data-mobile-height2"))&&!1!==e&&(e=e.split(":"),e=parseInt(e[1]),t=parseInt(n.css("padding-top")),i=a=parseInt(t-e/2)+"px",n.css({"padding-top":a,"padding-bottom":i})):void 0!==(e=l(n).attr("data-desktop-height2"))&&!1!==e&&(e=e.split(":"),e=parseInt(e[1]),t=parseInt(n.css("padding-top")),parseInt(n.css("padding-bottom")),i=a=parseInt(t-e/2)+"px",n.css({"padding-top":a,"padding-bottom":i})),n.each(function(){var e,t;l(this).find(".richtext").length&&(e=parseInt(l(this).attr("data-desktop-height")),t=parseInt(l(this).attr("data-mobile-height")),"NaN"!=e&&0!=e&&l(this).find(".desktop").css({"max-height":e,overflow:"hidden","overflow-y":"auto"}),"NaN"!=t)&&0!=t&&l(this).find(".mobile").css({"max-height":t,overflow:"hidden","overflow-y":"auto"})})},a.prototype.addClassToTitle=function(){this.$accordion.find(".accordion-title").each(function(){l(this).find(".img").length&&l(this).addClass("has-icon"),l(this).find(".desc").length&&l(this).addClass("has-description"),l(this).find(".richtext").length&&l(this).addClass("has-richtext")})},a.prototype.switchOffOnMobile=function(e){var t="mobile"===o.getMediaType(),a=e.find(".accordion-item"),i=e.find(".accordion-title");t?(i.off("click"),a.each(function(){var e=l(this),t=e.find(".accordion-body"),e=(e.find(".accordion-content"),e.find(".accordion-handle"));i.add(e).add(t).addClass("active"),t.css("height","auto")})):this.attachEvents()},a.prototype.toggleDetailsButton=function(){var e=this.$accordion.find(".accordion-title"),t=this.$detailsButton.data("showtext"),a=this.$detailsButton.data("hidetext");this.$detailsButton.html(t),e.hasClass("active")&&(this.$accordion.find(".accordion-title.active .accordion-details-button").html(a),i.getAccordionEvents().trackExpandAccordion(this.$accordion.find(".accordion-title.active").find("h2, h3, h4, h5, p").first().clone().find("sup.gux-disclosure").remove().end().text()))},a.prototype.resetHeight=function(){this.$accordionContents.height("auto"),this.$firstItemBody.hasClass("active")&&(this.$firstItemBody.height(this.$accordionContents.first().outerHeight()),this.$firstItemBody.height("auto"))},a.prototype.setHeightOnResize=function(e){l(window).on("resize",t.throttle(function(){e.find(".accordion-item").each(function(){var e=l(this),t=e.find(".accordion-body"),e=e.find(".accordion-content");t.hasClass("active")&&(e.find(".richtext.section").each(function(){l(this).find(".desktop,.mobile").css("overflow","auto")}),t.css("height","auto"))})}))},a.prototype.toggleAccordion=function(e,t){var t=t.parent(".accordion-item"),a=t.find(".accordion-title"),i=t.find(".accordion-handle"),n=t.find(".accordion-body"),o=t.find(".accordion-content"),r=t.find(".active");e.find("ul:first-child").hasClass("allow-multiple")?(a.add(i).add(n).toggleClass("active"),t.toggleClass("active")):0<r.length?(t.removeClass("active"),r.removeClass("active"),n.height(0),e.find(".actionsPanel").animate({bottom:"-20px"})):(e.find(".active").removeClass("active"),e.find(".accordion-body").height(0),t.add(a).add(i).add(n).addClass("active"),e.find(".actionsPanel").animate({bottom:"20px"})),n.hasClass("active")?(o.find(".richtext.section").each(function(){l(this).find(".desktop,.mobile").css("overflow","auto")}),n.css("height","auto"),this.attachAccessibilityEvents(0)):(n.height(0),this.attachAccessibilityEvents(-1)),this.toggleDetailsButton()},a.prototype.attachAccessibilityEvents=function(t){var e=document.querySelectorAll(".accordion-body a");e.length&&[].slice.call(e).forEach(function(e){e.setAttribute("tabindex",t)})},a.prototype.attachEvents=function(){var a=this,t=this.$accordion;t.find(".accordion-title > a").on("click",function(e){e.preventDefault()}),this.attachAccessibilityEvents(-1),this.disableItemsActivation?t.find(".accordion-title").off("click").off("keyup"):(t.find(".accordion-title").off("click").off("keyup"),t.on("click",".accordion-title",function(e){e.preventDefault(),this.$item=l(e.currentTarget),this.$items=this.$item.parent().siblings(".accordion-item"),a.toggleAccordion(t,this.$item),0<this.$item.closest(".accordion-compare").length&&this.$items.each(function(){var e=l(this),t=e.find(".accordion-title");e.hasClass("active")&&a.toggleAccordion(t)})}.bind(this)),l(".accordion-title").bind("keydown",function(e){13===e.which&&(e.preventDefault(),l(this).click())})),t.find(".compare-filter").off("click").on("click",function(e){n.accordions=[],n.init(this.$accordion)}.bind(this))},n.accordions=[],n.init=function(e){e=new a(e);n.accordions.push(e),l(".fds-styles")&&l("#global-ux").addClass("fds-ux-style"),l(".fds-style-heading, .fds-style-main-heading").parents(".desktop").removeAttr("style"),l(".fds-style-heading, fds-style-main-heading").parents(".mobile").removeAttr("style"),l(".fds-style-heading").parents(".common-richtext").addClass("fds-common-richtext"),l(".fds-style-main-heading").parents(".common-richtext").addClass("fds-common-richtext"),l(".fds-styles .accordion-title, .fds-styles .accordion-body, .fds-styles .accordion-indicator").removeAttr("style"),l(".fds-styles .common-richtext .desktop, .fds-styles .common-richtext .mobile, .fds-styles .accordion-title, .fds-styles .accordion-body, .fds-styles .accordion-indicator").removeAttr("style")},n}),define("accordionModelDetails/component.accordionModelDetails",["jquery","_","mediaQuery","analytics/analyticsEventLayer"],function(g,t,n,i){var o={};function a(e){var t;this.$accordion=e,this.$firstItemBody=e.find(".accordion-body").first(),this.$accordionContents=e.find(".accordion-content"),this.$detailsButton=e.find(".accordion-details-button"),this.hideOtherItems=e.data("hide-other-items"),this.disableItemsActivation=e.data("disable-items-activation"),this.resetHeight(),this.attachEvents(),this.setHeightOnResize(e),this.$detailsButton.length&&this.toggleDetailsButton(),this.$accordion.find(".accordion-overlay").length&&(t=this,window.document.addEventListener("mediaQuery.change",function(){t.$detailsButton.length&&t.toggleDetailsButton()}))}return a.prototype.switchOffOnMobile=function(e){var t="mobile"===n.getMediaType(),a=e.find(".accordion-item"),i=e.find(".accordion-title");t?(i.off("click"),a.each(function(){var e=g(this),t=e.find(".accordion-body"),a=e.find(".accordion-content"),e=e.find(".accordion-handle");t.height(a.outerHeight()),i.add(e).add(t).addClass("active")})):this.attachEvents()},a.prototype.toggleDetailsButton=function(){var e=this.$accordion.find(".accordion-title"),t=this.$detailsButton.data("showtext"),a=this.$detailsButton.data("hidetext");e.hasClass("active")?(this.$detailsButton.html(a),i.getAccordionEvents().trackExpandAccordion(e.find("h3").text())):this.$detailsButton.html(t)},a.prototype.resetHeight=function(){this.$accordionContents.height("auto"),this.$firstItemBody.hasClass("active")&&(this.$firstItemBody.height("auto"),this.$firstItemBody.height(this.$accordionContents.first().outerHeight()))},a.prototype.setHeightOnResize=function(e){g(window).on("resize",t.throttle(function(){e.find(".accordion-item").each(function(){var e=g(this),t=e.find(".accordion-body"),e=e.find(".accordion-content");t.hasClass("active")&&t.height(e.outerHeight())})}))},a.prototype.toggleAccordion=function(e,t){var t=t.parent(".accordion-item"),a=t.find(".accordion-title"),i=t.find(".accordion-handle"),n=t.find(".accordion-body"),o=t.find(".accordion-content"),r=t.find(".active");e.find("ul:first-child").hasClass("allow-multiple")?a.add(i).add(n).toggleClass("active"):0<r.length?(t.removeClass("active"),r.removeClass("active"),n.height(0)):(e.find(".active").removeClass("active"),e.find(".accordion-body").height(0),t.add(a).add(i).add(n).addClass("active")),n.hasClass("active")?(n.height(o.outerHeight()),n.find(".actionsPanel").animate({marginTop:"-20px",opacity:1})):(n.height(0),n.find(".actionsPanel").animate({marginTop:"0px",opacity:0})),this.toggleDetailsButton()},a.prototype.attachEvents=function(){var a=this,t=this.$accordion;t.find(".accordion-title > a").on("click",function(e){e.preventDefault()}),this.disableItemsActivation?t.find(".accordion-title").off("click").off("keyup"):t.find(".accordion-title").off("click").off("keyup").on("click",function(e){e.preventDefault(),this.$item=g(e.currentTarget),this.$items=this.$item.parent().siblings(".accordion-item"),a.toggleAccordion(t,this.$item),0<this.$item.closest(".accordion-compare").length&&this.$items.each(function(){var e=g(this),t=e.find(".accordion-title");e.hasClass("active")&&a.toggleAccordion(t)})}.bind(this)).on("keypress",function(e){13===e.which&&(e.preventDefault(),g(this).click())}),t.find(".compare-filter").off("click").on("click",function(e){o.accordions=[],o.init(this.$accordion)}.bind(this))},o.accordionModelDetailsList=[],o.init=function(e){e=new a(e);o.accordionModelDetailsList.push(e),g(".accordionModelDetails .accordion-regular").each(function(){var e,t=(i=g(this)).find(".accordion-item .box-content ul li"),a=i.find(".accordion-item .box-content table td.title"),i=i.attr("data-model-feature-tooltip-mapping"),n="";if(void 0!==i&&-1<i.indexOf(":")&&(n=i.split(":")),i){if(e=JSON.parse(i),t.length)for(var o=0;o<t.length;o++){var r=g(t[o]),l=r.text();if(e)for(var s in e)-1<l.indexOf(s)&&(s=e[s],r.html(l+('<span class="gux-tooltip" data-gux-tooltip-text="'+s+'"><sup class="gux-tooltip-rte-label">Tooltip</sup></span>')))}if(a.length)for(var c=0;c<a.length;c++){var d,u=g(a[c]),p=u.closest("tr").find("> .data"),m=u.closest("tr").find("> .data").text(),h=u.text();if(e)for(var f in e)-1<h.indexOf(f)&&(d="",d=void 0===(f=e[f])&&1<n.length&&(n[1],1)?'<span class="gux-tooltip" data-gux-tooltip-text="'+n[1].replaceAll("\\u003cp\\u003e","").replaceAll("\\u003c/p\\u003e\\n","")+'"><sup class="gux-tooltip-rte-label">Tooltip</sup></span>':'<span class="gux-tooltip" data-gux-tooltip-text="'+f+'"><sup class="gux-tooltip-rte-label">Tooltip</sup></span>',p.html(m+d))}}})},o}),define("language-landing/component.languageLanding",["jquery","mediaQuery","pubsub"],function(a,e,t){var i={init:function(){var e=a(".hideheader").attr("token"),t=a(".hidefooter").attr("token");"true"===e&&a(".nav-content").hide(),"true"===t&&a(".footer").hide()}};return i}),define("interiorExteriorColorizer/interiorExteriorColorizer",["jquery","jquery-flexslider","hammer","configurationProvider","_","pannellum/component.pannellum","mediaQuery"],function(s,e,c,t,d,a,n){var u,p,m=".interiorExterior360",h=new function(){this.curSlide=0,this.setCurSlide=function(e){this.curSlide=e},this.getCurSlide=function(){return this.curSlide}},i=0,f={init:function(){s(m).each(function(){var e=s(this),t=(e.find(".color-items .item").length&&f.colorSwatch.init(e),($activecolor=e.find(".color-items .item.active")).data("items"));f.createDom.init(this,e,t)})},createDom:{init:function(e,a,t){var i,n=h.getCurSlide(),o=a.find(".autoplayconfiguration").data(),r=(p=o.exterior&&Object.keys(o.exterior).length?o.exterior[0].length:0,a.find("#exterio .slides")),l=(r.html(""),d.template('<li class="item"><noscript><picture><source srcset="${renditions0}" media="(min-width: 1200px)"><source srcset="${renditions1}" media="(min-width: 992px)"><source srcset="${renditions2}" media="(min-width: 768px)"><source srcset="${renditions3}" media="(min-width: 480px)"><source srcset="${renditions4}" media="(min-width: 0px)"><img src="${defaultRendition}" alt="" title="" draggable="false"/></picture></noscript></li>')),t=(o&&o.exterior&&o.exterior[t]&&0<o.exterior[t].length&&s.each(o.exterior[t],function(e,t){t=l({renditions0:t.renditions[0].path,renditions1:t.renditions[1].path,renditions2:t.renditions[2].path,renditions3:t.renditions[3].path,renditions4:t.renditions[4].path,defaultRendition:t.fallbackRendition.path});r.append(t)}),r.find("li:eq("+n+")"));(t=t).find("noscript").replaceWith(function(){return this.textContent||this.innerText}),t=t.find("img"),s(".imageLoader").show(),(i=t.parent()).css({background:"center no-repeat","min-height":"300px",display:"block"}),t.load(function(){s(".imageLoader").hide(),i.css({"min-height":"inherit",background:""})}),a.find(".image-360").length&&a.find(".image-360 .slides").length&&a.find(".image-360 .slides")[0].hasChildNodes()&&a.find(".image-360").each(function(){var t=this;f.image360.init(this,a,n),new c(this).on("panright",function(e){g(s(t)),s(t).flexslider("prev")}).on("panleft",function(e){g(s(t)),s(t).flexslider("next")})}),a.find(".flex-next, .flex-prev").on("click",function(){g(s(this).closest(m).find(".image-360"))}),u=o.rotationSpeed||15}},colorSwatch:{init:function(e){r(e),e.find(".color-items .item").on("trigger"),e.find(".color-items .item")[0].click(),768<window.innerWidth&&(s(".color-items").not(".slick-initialized").slick({dots:!1,slidesToShow:6,slidesToScroll:1,infinite:!1,rtl:!!s(".rtl").length,prevArrow:'<span class="prev"></span>',nextArrow:'<span class="next"></span>'}),r(e)),setTimeout(()=>{768<window.innerWidth&&(s(".color-items").css("overflow","visible"),e.find(".color-items .item")[0].click(),s(".color-items").slick("refresh"),r(e))},4500)}},image360:{init:function(e,t,a){s(e).find(".flex-control-nav").remove(),s(e).find(".flex-direction-nav").remove(),s(e).removeData("flexslider");var i;s(e).flexslider({startAt:a,animation:"fade",slideshow:!1,useCss:!1,slideshowSpeed:1e3,animationSpeed:u,start:function(e){e.slides.eq(e.currentSlide).addClass("flex-active-transition")},before:function(e){g(s(e)),e.slides.eq(e.currentSlide).removeClass("flex-active-transition")},after:function(e){setTimeout(function(){e.slides.eq(e.currentSlide).addClass("flex-active-transition")},800),h.setCurSlide(e.currentSlide)}});"mobile"===n.getMediaType()||"tablet"===n.getMediaType()?(s(e).on("touchstart",".flex-next",function(e){e.preventDefault();e=s(this).parents(".image-360");i=o(e,"next")}),s(e).on("touchstart",".flex-prev",function(e){e.preventDefault();e=s(this).parents(".image-360");i=o(e,"prev")}),s(e).on("touchend",".flex-next, .flex-prev",function(e){clearInterval(i)}),s(":not(.image-360)").on("click mouseup mouseout",".flex-next, .flex-prev",function(e){clearInterval(i)})):(s(e).on("mousedown",".flex-next",function(e){var t=s(this).parents(".image-360");i=o(t,"next")}),s(e).on("mousedown",".flex-prev",function(e){var t=s(this).parents(".image-360");i=o(t,"prev")}),s(":not(.image-360)").on("click mouseup mouseout",".flex-next, .flex-prev",function(e){clearInterval(i)}))}}};function o(e,t){return setInterval(function(){e.flexslider(t)},400)}function g(e){e.find("noscript").length&&(e.find("noscript").replaceWith(function(){return s(this).parent().addClass("checking-loading"),this.textContent||this.innerText}),e=e.find(".checking-loading img"),s.each(e,function(e,t){s(t).parent();s(t).parents(".checking-loading").removeClass("checking-loading"),s(".imageLoader").show(),s(t).load(function(){++i===p-1&&(s(".imageLoader").hide(),i=0)})}))}function r(a){a.find(".color-items .item").on("click",function(){s(this).index();a.find("#colorizerBtn .colorOption").each(function(){s(this).removeClass("active")}),s(this).addClass("active").siblings().removeClass("active");var e=s(this).parents(m),t=s(this).data("items");f.createDom.init(this,e,t)})}let l=s("#interiorThreeSixtyView").find(".panorama"),v=document.querySelectorAll(".tab-item-link");return v&&0<v.length&&(v.forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();let t=e.target.getAttribute("tab");s(".show").addClass("hide").removeClass("show"),s("#"+t).addClass("show").removeClass("hide"),s("#"+t).find(".viewControlButton").addClass("show").removeClass("hide"),s(".tabs-nav-list").find(".tabs-nav-item").removeClass("active-tab"),s(this).parents().eq(1).addClass("active-tab"),setTimeout(()=>{768<window.innerWidth&&"exteriorOnly"===t&&(s(".color-items").slick("refresh"),r(s(m))),"interiorOnly"===t&&(a.init(),l[0].dataset.enableMultipleInteriors)&&s("body").find(".color-items-int .item")[0].click()},0)})}),setTimeout(()=>{v[0].click()},1500)),f}),define("jelly-bean/component.jellyBean",["jquery","mediaQuery","disclosure/component.disclosure"],function(m,e,t){var a={};function h(){var a,i,n,o,r,l,s,e,t=m("#fpsDomainName").data("domainname"),c=m(".jellybeans-content");t?(n=[],o=[],r=[],l=[],s=[],FPS.get([{ActionNameplate:{suffixFilter:["ViewPage","RequestBrochure","ScheduleTestDrive"]}}],{success:function(e){var t;0<e[0].ActionNameplate.length&&(t=[],e[0].ActionNameplate.forEach(function(e){"ViewPage"==e.suffix&&t.push(e)}),n.push(t)),0<(o=[].concat.apply([],n)).length&&(r=o.sort(function(e,t){return new Date(t.on)-new Date(e.on)}),l=3<r.length?r.splice(0,3):r,m.each(l,function(e,t){t={key:t._nameplate,returnURL:encodeURIComponent(t.returnURL),nameplateModelKey:t._trim,suffix:t.suffix};s.push(t)}),a=JSON.stringify(s),d(i=c.data("currentpage")+".puwylfps.data?q="+a))},error:function(e){console.log(e)}})):(t="FPSDATA",t=(e=localStorage.getItem(t))?(e=JSON.parse(e),(new Date).getTime()>e.expiry?(localStorage.removeItem(t),null):e.value):null,a=JSON.stringify(t),i=c.data("currentpage")+".puwyl.data?q="+a,null!=t&&0<t.length&&d(i))}function d(e){m.ajax({url:e,method:"GET",dataType:"json"}).success(function(t){var a,i,n,o,r,l="",s=!1,c=encodeURIComponent(m(".jellybeans-title-wrapper")?.attr("data-disclosure")?.trim()),d=encodeURIComponent(m(".jellybeans-title-wrapper")?.attr("data-startingprice")?.trim()),u=m(".jellybeans-title-wrapper[data-displayprice]").length;for(let e=0;e<t.length;e++)"viewNameplate"==t[e].suffix&&(s=!0,a=decodeURIComponent(t[e].pagePath),i=encodeURIComponent(t[e].imgUrl),n=t[e].name,o=t[e].startingPrice,r=t[e].currency,l+='<div class="jellybeans-vehicle-block hideJellybean pickup"><span class="jellybeans-vehicle-wrapper"><a href="'+a+'"><span class="jellybeans-vehicle"><picture class="jellybeans-picture"><img src="'+i+'" alt="'+n+'" /></picture></span></a><span class="jellybeans-vehicle-details"><a href="'+a+'"><span class="jellybeans-vehicle-name">'+n+"</span></a>",o&&0<u&&(l+='<span class="jellybeans-vehicle-price">'+d+"<br>"+r+"<span>"+o+"</span>",void 0!==c&&(l+='<sup data-disclosure="'+c+'" class="gux-disclosure" style="display: inline;"></sup>'),l+="</span>"),l+="</span></span></div>");1==s&&(m(".jellybeans-vehicles-container").append(l),m(".jellybeans-list .pickuptab").show(),m(".jellybean-item-link:visible:first").trigger("click"))}).error(function(e,t,a){console.log("Error while fetching data from VDM for 'Pickup Where you Left'.")}),t.init()}return a.init=function(){h();var t,a=!1,e=m(".jellybeans-list"),i=m(".jellybeans-vehicles-container").find('[data-mostpopular="true"]'),e=(e&&0===i.length&&m(".jellybeans-list-item.popular").remove(),m(".jellybeans-head-wrapper").attr("data-category")),e=JSON.parse(e),n=(console.log(e),m(".jellybeans-head-wrapper").attr("data-pickup")),o=m(".jellybeans-head-wrapper").attr("data-mostpopular"),r=m(".jellybeans-head-wrapper").attr("data-allvehicles"),l=!1,s=!1,c=!1,d="",u="",p="";e.forEach(function(e){e.category==n?(l=!0,e.hasOwnProperty("categorySecondName")&&(d=e.categorySecondName)):e.category==o?(s=!0,e.hasOwnProperty("categorySecondName")&&(u=e.categorySecondName)):e.category==r&&(c=!0,e.hasOwnProperty("categorySecondName"))&&(p=e.categorySecondName),e.hasOwnProperty("categorySecondName")&&(m("div.jellybeans-vehicles-container").find("."+e.category.replace(/ /g,"")).addClass(e.categorySecondName.replace(/ /g,"")),m("ul.jellybeans-list li > span a").filter('[data-title= "'+e.categorySecondName+'"]').not(":eq(0)").closest("li").css("display","none"))}),1==l&&(m(".jellybeans-list .pickuptab").remove(),(""==d?m(".jellybeans-list .jellybeans-list-item").find(".jellybean-item-link[data-title='"+n+"']"):m(".jellybeans-list .jellybeans-list-item").find(".jellybean-item-link[data-title='"+d+"']")).closest("li.jellybeans-list-item").addClass("pickuptab").css("display","none")),1==s&&m(".jellybeans-list .popular").hide(),1==c&&m(".jellybeans-list .allVehiclesTab").hide(),m(".jellybean-item-link").click(function(e){e.preventDefault(),m(".jellybeans-list").find(".jellybeans-list-item").removeClass("active-jellybean"),m(this).parents().eq(1).addClass("active-jellybean"),a&&(m(this).focus(),this.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"}),a=!1),t=m(this).attr("data-title"),m(".jellybeans-vehicles-container").find(".jellybeans-vehicle-block").addClass("hideJellybean"),("All Vehicles"==t||t==p?m(".jellybeans-vehicles-container").find(".jellybeans-vehicle-block:not(.pickup)"):"Most Popular"==t||t==u?i:"Pickup"==t||"Pick Up Where You Left Off"==t||t==d?m(".jellybeans-vehicles-container").find(".pickup"):(t=(t=t.replace(/\s/g,"")).replace(/[&\/\\#+()$.'":*?]/g,""),m("."+t))).removeClass("hideJellybean")}),m(".jellybeans-indicators span.rightArrow").click(function(e){a=!0,m(".jellybeans-list").find(".jellybeans-list-item.active-jellybean").next(".jellybeans-list-item:visible").find(".jellybean-item-link").trigger("click")}),m(".jellybeans-indicators span.leftArrow").click(function(e){a=!0,m(".jellybeans-list").find(".jellybeans-list-item.active-jellybean").prev(".jellybeans-list-item:visible").find(".jellybean-item-link").trigger("click")}),m(".jellybean-item-link:visible:first").trigger("click")},a}),define("service-calculator/component.serviceCalculator",["jquery","analytics/analyticsEventLayer","getImgSlToken"],function(m,t,n){var e={};function a(e,a,i){var n={};return m.each(e,function(e,t){t.provinceState==a&&null!=a&&(n.dealer=t.dealers),t.nameplateName==i&&null!=i&&(n.modelDetails=t.models)}),n}function o(e,a){var i={};return"default"==a?i=e[0].provinceValues:m.each(e,function(e,t){t.province==a&&(i=t.provinceValues)}),i}function r(e,a){var i={};return"default"==a&&(i=e[0].dealers),m.each(e,function(e,t){t.town==a&&(i=t.dealers)}),i}function l(e){for(var t="",e=(e=Number(e.toString()||0).toFixed(2)).toString().split("."),a=e[0],e=e[1];3<a.length;)t=","+a.slice(-3)+t,a=a.slice(0,a.length-3);return t=(t=a?a+t:t)+"."+e}return angular.module("serviceCalculator",[]).controller("serviceCal",["$scope","$timeout",function(p,u){function i(e){if(e.length)return e.sort(function(e,t){var a="true"==p.isThaiLanguage?"PartNameThai":"PartName",e=e[a].toUpperCase(),t=t[a].toUpperCase();return e==t?0:t<e?1:-1})}p.rootContainer=m(".service-calculator-container"),p.serviceData=m(".temporary-form-container").data("servicedata"),p.vatTax=m(".temporary-form-container").data("vattax"),p.dealerStatus=!0,p.selectVehicleStatus=!0,p.engineStatus=!0,p.transmissionStatus=!0,p.variantStatus=!0,p.intervalStatus=!0,p.isShowResult=!1,p.serviceButtonStatus=!0,p.iolmCouponStatus=!0,p.errorStatus=!1,p.isThaiLanguage=m("#displayinThai").val(),p.isVNMLanguage=m("#displayinVNM").val(),p.hoursThaiLanguage=m("#thaihour").val(),p.hoursVNMLanguage=m("#vnmHour").val(),p.isMechanicalPartsPresent=null!=m(".mechanicalParts").data("mechanicaldata"),1==p.isMechanicalPartsPresent&&(p.mechanicalData=m(".mechanicalParts").data("mechanicaldata")[0],p.mechanicalDataCopy=JSON.parse(JSON.stringify(p.mechanicalData)),p.masterData=p.mechanicalDataCopy.masterdata,p.mechanicalDetails=p.mechanicalDataCopy.modeldetails),p.mechanicalStatus=!1,p.isIolmPresent=null!=m(".temporary-form-container").data("iolm"),1==p.isIolmPresent&&(p.iolmData=m(".temporary-form-container").data("iolm")),p.province="",p.showIolmOptions=!1,p.isPOMenabled=!1,p.isIolmOnlyEnabled=!1,p.timingDefaultStatus=!0,p.isShowTimingMasterData=!0,p.marketName=m(".temporary-form-container").data("marketname"),p.isMarketThai="THA"==p.marketName,p.isMarketZA="ZAF"==p.marketName,p.isMarketVNM="VNM"==p.marketName,p.countryDefaultOption=m(".temporary-form-container").data("countrydefault"),p.provinceDefaultOption=m(".temporary-form-container").data("provincedefault"),p.townDefaultOption=m(".temporary-form-container").data("towndefault"),p.dealerDefaultOption=m(".temporary-form-container").data("dealerdefault"),p.maxFractionDigits=2,p.currency=m(".temporary-form-container").data("currentcy"),p.rightsideofprice=m(".temporary-form-container").data("rightsideofprice"),p.currencyforsouthafrica=m(".temporary-form-container").data("currencyforsouthafrica"),p.rightsideofpriceforsouthafrica=m(".temporary-form-container").data("rightsideofpriceforsouthafrica"),p.currencyforswaziland=m(".temporary-form-container").data("currencyforswaziland"),p.rightsideofpriceforswaziland=m(".temporary-form-container").data("rightsideofpriceforswaziland"),p.currencyfornamibia=m(".temporary-form-container").data("currencyfornamibia"),p.rightsideofpricefornamibia=m(".temporary-form-container").data("rightsideofpricefornamibia"),p.isSAFdefault=m(".temporary-form-container").data("defaultcountryselection"),p.markuppercentagenamibia=m(".temporary-form-container").data("markuppercentagenamibia"),p.markuppercentageswaziland=m(".temporary-form-container").data("markuppercentageswaziland"),p.linkpdfpath=m(".temporary-form-container").data("linkpdfpath"),p.pdfhyperlinktext=m(".temporary-form-container").data("pdfhyperlinktext"),p.pdfadditionaltext=m(".temporary-form-container").data("pdfadditionaltext"),p.pdfHyperlink="",p.breakout=!1,p.showDefenitionOfFordMotocraft=!1,p.freeThaiLang=m("#thaifree").val(),p.freeVnmLang=m("#vnmFree").val(),p.onlyIolmClicked=!1,p.rootContainer.addClass(p.marketName),p.isMobile=window.matchMedia("(max-width: 767px)"),p.nextGenOilPartNum="NEXTGENOIL",p.nextGenConsPartNum="CONS",p.nextGenOilPartCostFromDB=0,p.nextGenCONSPartCostFromDB=0,p.isIOLMChecked=!1,p.isOnlyIOLMChecked=!1,p.callResultApi=m(".temporary-form-container").data("callresultapi"),p.isImgSlConfigEnabled=m(".temporary-form-container").data("enable-imgsl"),p.isImgSlConfigRoot=m(".temporary-form-container > .configuration"),p.imgSlEndpoint=p.isImgSlConfigRoot.data("apigee-domain"),p.imgSlResultsPath=p.isImgSlConfigRoot.data("results-for-derative"),p.tokenErrorStatus=!1,p.isLoading=!1,0==p.isMarketThai&&0==p.isMarketVNM&&(p.dealersInfo=p.serviceData.dealersInfo,p.provinceStatus=!0,p.townStatus=!0,p.isProvincePresent=!0,p.isTownPresent=!0,p.modelYearStatus=!0,p.isMarketZA&&p.isSAFdefault&&u(function(){m("select[name = country]").val("South Africa").trigger("change")}),p.chooseCountry=function(){var e,a,i;""!=m("select[name = country]").val()?(p.selectedCountry=m("select[name = country]").val(),u(function(){m("select[name = state]").val("").trigger("change"),m("select[name = town]").val("").trigger("change"),m("select[name = dealer]").val("").trigger("change"),p.provinceStatus=!1,p.townStatus=!0,p.dealerStatus=!0}),p.isMarketZA&&p.chooseCurrency(p.selectedCountry),p.countryValues=(e=p.dealersInfo,a=p.selectedCountry,i={},m.each(e,function(e,t){t.country==a&&(i=t.countryValues)}),i),m(".townSection").show(),1<p.countryValues.length?(m(".provinceSection").show(),m("select[name = state]").empty(),m("select[name = state]").append('<option value="">'+p.provinceDefaultOption+"</option>"),p.countryValues.forEach(function(e){m("select[name = state]").append('<option value="'+e.province+'">'+e.province+"</option>")})):(m(".provinceSection").hide(),u(function(){m("select[name = town]").val("").trigger("change"),m("select[name = dealer]").val("").trigger("change"),p.townStatus=!1,p.dealerStatus=!0}),p.provinceValues=o(p.countryValues,"default"),1<p.provinceValues.length?(m(".townSection").show(),m("select[name = town]").empty(),m("select[name = town]").append('<option value="">'+p.townDefaultOption+"</option>"),p.provinceValues.forEach(function(e){m("select[name = town]").append('<option value="'+e.town+'">'+e.town+"</option>")})):(m(".townSection").hide(),p.dealer=r(p.provinceValues,"default"),u(function(){m("select[name = dealer]").val("").trigger("change"),p.dealerStatus=!1}),m("select[name = dealer]").empty(),m("select[name = dealer]").append('<option value="">'+p.dealerDefaultOption+"</option>"),p.dealer.forEach(function(e){m("select[name = dealer]").append('<option value= "'+e.dealerName+'" data-labourCost="'+e.labourCost+'" data-dealerCode="'+e.dealerCode+'">'+e.dealerName+"</option>")}),u(function(){p.dealer.length&&1==p.dealer.length&&(m("select[name = dealer]").val(m("select[name = dealer] option:eq(1)").val()).trigger("change"),p.dealerStatus=!0,p.changeDealer())})))):u(function(){m("select[name = state]").val("").trigger("change"),m("select[name = town]").val("").trigger("change"),m("select[name = dealer]").val("").trigger("change"),p.provinceStatus=!0,p.townStatus=!0,p.dealerStatus=!0,m("select[name = town], select[name = dealer]").prop("disabled",!0)})},p.chooseCurrency=function(e){switch(e){case"Namibia":p.currency=p.currencyfornamibia,p.rightsideofprice=p.rightsideofpricefornamibia;break;case"Swaziland":p.currency=p.currencyforswaziland,p.rightsideofprice=p.rightsideofpriceforswaziland;break;case"South Africa":p.currency=p.currencyforsouthafrica,p.rightsideofprice=p.rightsideofpriceforsouthafrica;break;default:p.currency=m(".temporary-form-container").data("currentcy"),p.rightsideofprice=m(".temporary-form-container").data("rightsideofprice")}},p.chooseTown=function(){""!=m("select[name = town]").val()?(p.selectedTown=m("select[name = town]").val(),p.dealer=r(p.provinceValues,p.selectedTown),u(function(){m("select[name = dealer]").val("").trigger("change"),p.dealerStatus=!1}),m("select[name = dealer]").empty(),m("select[name = dealer]").append('<option value="">'+p.dealerDefaultOption+"</option>"),0<p.dealer.length&&(p.dealer.forEach(function(e){m("select[name = dealer]").append('<option value= "'+e.dealerName+'" data-labourCost="'+e.labourCost+'" data-dealerCode="'+e.dealerCode+'">'+e.dealerName+"</option>")}),u(function(){p.dealer.length&&1==p.dealer.length&&(m("select[name = dealer]").val(m("select[name = dealer] option:eq(1)").val()).trigger("change"),p.dealerStatus=!0,p.changeDealer())}))):u(function(){m("select[name = dealer]").val("").trigger("change"),p.dealerStatus=!0,m("select[name = dealer]").prop("disabled",!0)})}),p.chooseProvince=function(){1==p.isMarketThai||1==p.isMarketVNM?""!=m("select[name = statethai]").val()?(p.selectedProvince=m("select[name = statethai]").val(),u(function(){m("select[name = dealerthai]").val("").trigger("change"),p.dealerStatus=!1}),p.dealer=a(p.serviceData.dealersInfo,p.selectedProvince).dealer,u(function(){p.dealer&&1==p.dealer.length&&(m("select[name = dealerthai]").val(m("select[name = dealerthai] option:eq(1)").val()).trigger("change"),p.changeVehicle())},100)):u(function(){m("select[name = dealerthai]").val("").trigger("change"),p.dealerStatus=!0,m("select[name = dealerthai]").prop("disabled",!0)}):""!=m("select[name = state]").val()?(p.selectedProvince=m("select[name = state]").val(),p.provinceValues=o(p.countryValues,p.selectedProvince),u(function(){m("select[name = town]").val("").trigger("change"),m("select[name = dealer]").val("").trigger("change"),p.townStatus=!1,p.dealerStatus=!0}),m("select[name = town]").empty(),m("select[name = town]").append('<option value="">'+p.townDefaultOption+"</option>"),p.provinceValues.forEach(function(e){m("select[name = town]").append('<option value="'+e.town+'">'+e.town+"</option>")})):u(function(){m("select[name = town]").val("").trigger("change"),m("select[name = dealer]").val("").trigger("change"),p.townStatus=!0,p.dealerStatus=!0,m("select[name = town], select[name = dealer]").prop("disabled",!0)})},p.changeDealer=function(){""!=(p.isMarketZA?m("select[name = dealer]"):m("select[name = dealerthai]")).val()?(u(function(){m("select[name = vehicle]").val("").trigger("change"),m("select[name = engine]").val("").trigger("change"),m("select[name = engineMobile]").val("").trigger("change"),p.isMarketZA?(m("select[name = modelYear]").val("").trigger("change"),p.modelYearStatus=!0):(m("select[name = transmission]").val("").trigger("change"),p.transmissionStatus=!0),m("select[name = variant]").val("").trigger("change"),m("select[name = interval]").val("").trigger("change"),p.variantStatus=!0,p.intervalStatus=!0,p.engineStatus=!0,p.serviceButtonStatus=!0,p.selectVehicleStatus=!1,p.serviceData.modelsInfo&&1==p.serviceData.modelsInfo.length&&(m("select[name = vehicle]").val(m("select[name = vehicle] option:eq(1)").val()).trigger("change"),p.selectVehicleStatus=!0,p.engineChange())}),p.isMarketZA?(p.tempLabourCost=m("select[name = dealer]").find("option:selected").attr("data-labourcost"),p.dealerCode=m("select[name = dealer]").find("option:selected").attr("data-dealercode")):p.tempLabourCost=m("select[name = dealerthai]").find("option:selected").attr("data-labourcost")):u(function(){m("select[name = vehicle]").val("").trigger("change"),m("select[name = engine]").val("").trigger("change"),m("select[name = engineMobile]").val("").trigger("change"),p.isMarketZA?(m("select[name = modelYear]").val("").trigger("change"),p.modelYearStatus=!0):(m("select[name = transmission]").val("").trigger("change"),p.transmissionStatus=!0),m("select[name = variant]").val("").trigger("change"),m("select[name = interval]").val("").trigger("change"),p.variantStatus=!0,p.intervalStatus=!0,p.engineStatus=!0,p.serviceButtonStatus=!0,p.selectVehicleStatus=!0})},m(".buttonTransparent").mouseover(function(){m(".btn-calculator").addClass("calculatorActive")}),m(".buttonTransparent").mouseout(function(){m(".btn-calculator").removeClass("calculatorActive")}),p.buttonTransparentClick=function(){1==p.isMarketThai||1==p.isMarketVNM?""!=p.chooseVehicle&&""!=p.dealerValue&&""!=p.chooseTransmission&&""!=p.chooseVariant&&""!=p.dealerValue||(p.errorStatus=!0):""!=p.chooseVehicle&&""!=p.dealerValue&&""!=p.chooseModelYear&&""!=p.chooseVariant&&""!=p.dealerValue||(p.errorStatus=!0),1==p.serviceButtonStatus?p.errorStatus=!0:p.serviceButtonClick()},p.serviceButtonClick=async function(){p.isLoading=!0,p.baseOnValue=m("select[name = interval]").val(),p.baseOnValueStatus=""!=p.baseOnValue,p.isIolmOnlyEnabled&&(p.baseOnValueStatus=!1),p.baseOnThaiValue=m("select[name = interval] option:selected").text(),p.serviceForValue=p.chooseVariant,p.dealerValue=(1==p.isMarketThai||1==p.isMarketVNM?m("select[name = dealerthai]"):m("select[name = dealer]")).val(),p.dealerThaiValue=m(1==p.isMarketThai?"select[name = dealerthai] option:selected":"select[name = dealer] option:selected").text();var e="derivativeName="+encodeURIComponent(p.serviceForValue)+"&serviceInterval="+encodeURI(p.baseOnValue)+"&isServiceApplicable=1&countryCode="+encodeURI(p.marketName),t=(p.isMarketZA&&(p.isIOLMChecked=m("#oilChange").prop("checked"),p.isOnlyIOLMChecked=m("#onlyIolm").prop("checked"),p.dealerCode&&(e+="&dealerCode="+encodeURI(p.dealerCode)),p.isOnlyIOLMChecked?e+="&nextGenOilPartNum="+p.nextGenOilPartNum+"&nextGenConsPartNum="+p.nextGenConsPartNum:p.isIOLMChecked&&p.baseOnValueStatus&&(e+="&nextGenOilPartNum="+p.nextGenOilPartNum)),p.errorStatus=!1,p.tokenErrorStatus=!1,p.mechanicalResult=p.getMechanicalResult(),p.timingSummaryData=p.getTimingSummaryData(),""),a={};p.isImgSlConfigEnabled?(t=p.imgSlEndpoint+p.imgSlResultsPath,await n.getOwnToken().then(function(e){e?.token&&(a.Authorization="Bearer "+e?.token),p.returnError(err.isError)}).catch(function(e){p.returnError(e.isError,e.message)})):t=p.callResultApi,p.tokenErrorStatus||m.ajax({url:t+"?"+e,type:"GET",async:!1,headers:a,success:function(e){p.isLoading=!1;var e=(p.isImgSlConfigEnabled?e?.data:e)?.results?.[0];function t(){p.resultPartsTemp.forEach(function({partNumber:e,partCost:t}){e===p.nextGenOilPartNum?p.nextGenOilPartCostFromDB=t:e===p.nextGenConsPartNum&&(p.nextGenCONSPartCostFromDB=t)})}p.result=e||null,p.resultParts=[],p.resultPartsTemp=[],null!=p.result&&p.result?.parts&&(p.isMarketZA?("Namibia"==p.selectedCountry&&0<p.markuppercentagenamibia?p.resultPartsTemp=p.calculateMarkupPercentage(p.result.parts,p.markuppercentagenamibia):"Swaziland"==p.selectedCountry&&0<p.markuppercentageswaziland?p.resultPartsTemp=p.calculateMarkupPercentage(p.result.parts,p.markuppercentageswaziland):p.resultPartsTemp=p.addDecimalToObject(p.result.parts,p.maxFractionDigits),p.linkpdfpath&&p.addPdfLink(p.chooseVariant)):p.resultParts=p.result.parts,p.isMarketZA)&&(p.isOnlyIOLMChecked?(t(),p.resultParts=p.resultPartsTemp.filter(({partNumber:e})=>e!==p.nextGenOilPartNum||e!==p.nextGenConsPartNum)):p.isIOLMChecked&&p.baseOnValueStatus?(t(),p.resultParts=p.resultPartsTemp.filter(({partNumber:e})=>e!==p.nextGenOilPartNum&&e!==p.nextGenConsPartNum)):p.resultParts=p.resultPartsTemp,p.checkForOtherParts=p.fetchIolmData?.parts&&(n=>{if(n.length){var o=n.map(function(e){return e.PartName}),r=[],l=[],e=[];if(o.some(function(e,t){var a,i;o.indexOf(e)!=t&&("Ford Genuine*"===n[t].PartType&&(e=n.map(function(e){return e.PartName}).indexOf(e),a=n,i=t,e=e,[a[i],a[e]]=[a[e],a[i]]),l.push(t),r.push({OtherTotalCost:n[t].TotalCost,OtherPartNumber:n[t].PartNumber,OtherPartName:n[t].PartName,OtherPartCostPerUnit:n[t].PartCostPerUnit,OtherQuantity:n[t].Quantity}))}),l.length)for(var t=l.reverse(),a=0;a<t.length;a++)n.splice(t[a],1);return r.length?r.forEach(function(t){e=n.map(function(e){return t.OtherPartName==e.PartName?Object.assign(e,t):e})}):e=n,(e=>{let t=[];return e.forEach(function(e){e.PartNumber===p.nextGenOilPartNum?(e.PartCostPerUnit=p.nextGenOilPartCostFromDB,e.TotalCost=(Number(e.Quantity)*Number(p.nextGenOilPartCostFromDB)).toFixed(p.maxFractionDigits),e.hasOwnProperty("OtherQuantity")&&""!==Number(e.OtherQuantity)&&(e.OtherPartCostPerUnit=p.nextGenOilPartCostFromDB,e.OtherTotalCost=(Number(e.OtherQuantity)*Number(p.nextGenOilPartCostFromDB)).toFixed(p.maxFractionDigits))):e.PartNumber===p.nextGenConsPartNum&&(e.PartCostPerUnit=p.nextGenCONSPartCostFromDB,e.TotalCost=(Number(e.Quantity)*Number(p.nextGenCONSPartCostFromDB)).toFixed(p.maxFractionDigits)),t.push(e)}),t})(e)}})(p.fetchIolmData.parts)||[]),p.showIolmOptions&&(p.sortedIolmData=p.isMarketZA?i(p.checkForOtherParts):p.fetchIolmData?.parts&&i(p.fetchIolmData.parts)),p.iolmResult=p.getIolmResult(),p.grandTotalStatus=p.baseOnValueStatus&&p.mechanicalResultStatus||p.baseOnValueStatus&&p.iolmResultStatus||p.iolmResultStatus&&p.mechanicalResultStatus,p.totallyLabour=+p.result.labourcostperHour+p.timingLabourHours,p.labourCost=parseInt(p.tempLabourCost),0==p.isMarketThai&&0==p.isMarketVNM?(p.selectedPartNumbers=[],m(".intervalPartListSection:not(.ng-hide) .listBox:not(.ng-hide)").each(function(e,t){p.selectedPartNumbers.push(m(this).find(".partBrand part-brand-container .part-brand-pill.active").data("partnumber"))}),u(function(){p.populateResults(),u(function(){m("html, body").animate({scrollTop:m(".calculator-result").offset().top},1e3,function(){p.onlyIolmClicked=!1})})})):(p.totalPartSandFluValue=p.getSumCost()+p.timingPartsCost,"Yes"==p.result.labourApplicable?(p.labourExpense=p.totallyLabour*p.labourCost,p.labourExpenseNumber=p.labourExpense,p.totallyLabourAndParts=p.totalPartSandFluValue+p.labourExpenseNumber,p.totalPartSandValueExcludingTemp=p.totallyLabourAndParts+p.totallyLabourAndParts*p.vatTax/100,p.labourExpense=p.rightsideofprice?l(p.labourExpense)+" "+p.currency:p.currency+" "+l(p.labourExpense),p.totalPartSandValueExcluding=l(p.totalPartSandValueExcludingTemp)):"No"==p.result.labourApplicable&&(e="",e="true"==p.isThaiLanguage?p.freeThaiLang:"true"==p.isVNMLanguage?p.freeVnmLang:"Free",p.labourExpense=e,p.totallyLabourAndParts=p.totalPartSandFluValue,p.totalPartSandValueExcludingTemp=p.totallyLabourAndParts+p.totalPartSandFluValue*p.vatTax/100,p.totalPartSandValueExcluding=l(p.totalPartSandValueExcludingTemp)),p.grandTotalExcludeVat=0,p.grandTotalIncludeVat=0,p.grandTotalExcludeVat=p.iolmResultStatus?(null!=p.totallyLabourAndParts&&p.baseOnValueStatus&&p.totallyLabourAndParts)+(null!=p.mechanicalTotalPartResult&&p.mechanicalResultStatus&&p.mechanicalTotalPartResult)+p.iolmTotalPartResult:p.totallyLabourAndParts+p.mechanicalTotalPartResult,p.grandTotalIncludeVat=p.iolmResultStatus?(null!=p.mechanicalTotalPartIncludingTemp&&p.mechanicalResultStatus&&p.mechanicalTotalPartIncludingTemp)+(null!=p.totalPartSandValueExcludingTemp&&p.baseOnValueStatus&&p.totalPartSandValueExcludingTemp)+p.iolmTotalPartIncludingTemp:p.mechanicalTotalPartIncludingTemp+p.totalPartSandValueExcludingTemp,p.mechanicalTotalPartExcluding=l(p.mechanicalTotalPartIncludingTemp),p.newCalculationForVNM(),p.isShowResult=!0,u(function(){m("html, body").animate({scrollTop:m(".calculator-result").offset().top},1e3)}),p.getImageAndClosure(p.chooseVehicle,p.serviceForValue),p.iolmResultStatus?p.initPdfUrl(p.mechanicalResult,p.timingSummaryData,p.iolmResult):p.initPdfUrl(p.mechanicalResult,p.timingSummaryData))},error:function(e){p.isLoading=!1,p.onlyIolmClicked=!1,console.log(e),p.isImgSlConfigEnabled&&p.returnError(!0,e?.responseJSON?.Error)}})},p.returnError=function(e,t){p.tokenErrorStatus=e,u(function(){t&&m(".serviceButtonBox .tokenErrorMessage").html(t)})},p.newCalculationForVNM=function(){p.totalAllPartsCost=0,p.totalAllLabourCost=0,p.tempTotalAllLabourCost=0,p.totalAllPartsCostIncludeVat=0,p.totalAllLabourCostIncludeVat=0,p.temptotalAllLabourCostIncludeVat=0,p.grandTotalPartsAndLabour=0,p.grandTotalPartsAndLabourIncludeVat=0,p.totalAllPartsCost=null!=p.totalPartSandFluValue?p.totalPartSandFluValue:0;var e="true"==p.isThaiLanguage?p.freeThaiLang:"true"==p.isVNMLanguage?p.freeVnmLang:"Free";switch(p.result.labourApplicable){case"Yes":p.tempTotalAllLabourCost+=p.labourExpenseNumber,p.totalAllLabourCost=p.addDelimeterAndCurrency(p.labourExpenseNumber),p.iolmResultStatus&&p.newCalculationForIOLM(),p.mechanicalResultStatus&&p.newCalculationForMech(),p.grandTotalPartsAndLabour=p.totalAllPartsCost+p.tempTotalAllLabourCost;break;case"No":p.totalAllLabourCost=e,p.iolmResultStatus||p.mechanicalResultStatus?(p.iolmResultStatus&&p.newCalculationForIOLM(),p.mechanicalResultStatus&&p.newCalculationForMech(),p.grandTotalPartsAndLabour=p.totalAllPartsCost+p.tempTotalAllLabourCost):p.grandTotalPartsAndLabour=p.totalAllPartsCost;break;default:p.iolmResultStatus&&p.newCalculationForIOLM(),p.mechanicalResultStatus&&p.newCalculationForMech(),p.grandTotalPartsAndLabour=p.totalAllPartsCost+p.tempTotalAllLabourCost}p.totalAllPartsCostIncludeVat=p.totalAllPartsCost+p.totalAllPartsCost*p.vatTax/100,p.temptotalAllLabourCostIncludeVat=p.tempTotalAllLabourCost+p.tempTotalAllLabourCost*p.vatTax/100,p.totalAllLabourCostIncludeVat=p.addDelimeterAndCurrency(p.temptotalAllLabourCostIncludeVat),p.grandTotalPartsAndLabourIncludeVat=p.totalAllPartsCostIncludeVat+p.temptotalAllLabourCostIncludeVat},p.newCalculationForIOLM=function(){p.isMarketZA||(p.totalAllPartsCost+=p.iolmTotalPart),m('#oilCoupon[type="checkbox"]:checked').length||(p.tempTotalAllLabourCost+=p.tempLabourExpense,p.totalAllLabourCost=p.addDelimeterAndCurrency(p.tempTotalAllLabourCost))},p.newCalculationForMech=function(){p.totalAllPartsCost+=p.mechanicalTotalPart,p.tempTotalAllLabourCost+=p.mechanicalLabourExpense,p.totalAllLabourCost=p.addDelimeterAndCurrency(p.tempTotalAllLabourCost)},p.addDelimeterAndCurrency=function(e){return p.rightsideofprice?l(e)+" "+p.currency:p.currency+" "+l(e)},p.addPdfLink=function(i){p.pdfHyperlink="";var n=JSON.parse(JSON.stringify(p.linkpdfpath));m.each(n,function(a,e){if(p.breakout)return!1;m.each(n[a].modelsmapped_to_PDF,function(e,t){t.modelName==i&&(p.pdfHyperlink=n[a].pdfpath,p.breakout=!0)})})},p.calculateMarkupPercentage=function(e,a){var i=JSON.parse(JSON.stringify(e));return m.each(i,function(e,t){i[e].totalrepaircost=p.calculatePercentage(t.totalrepaircost,a).toFixed(p.maxFractionDigits),i[e].partCost=parseInt(p.calculatePercentage(t.partCost,a)),t.hasOwnProperty("otherTotalrepaircost")&&(i[e].otherTotalrepaircost=p.calculatePercentage(t.otherTotalrepaircost,a).toFixed(p.maxFractionDigits)),t.hasOwnProperty("otherPartCost")&&(i[e].otherPartCost=parseInt(p.calculatePercentage(t.otherPartCost,a)))}),i},p.calculatePercentage=function(e,t){return Number(e)+Number((e/100*t).toFixed(p.maxFractionDigits))},p.addDecimalToObject=function(e,a){var i=JSON.parse(JSON.stringify(e));return m.each(i,function(e,t){i[e].totalrepaircost=Number(t.totalrepaircost).toFixed(a),i[e].partCost=Number(t.partCost).toFixed(a),t.hasOwnProperty("otherTotalrepaircost")&&(i[e].otherTotalrepaircost=Number(t.otherTotalrepaircost).toFixed(a)),t.hasOwnProperty("otherPartCost")&&(i[e].otherPartCost=Number(t.otherPartCost).toFixed(a))}),i},p.populateResults=function(){var e,a=0;m(".intervalPartListSection:not(.ng-hide) .listBox:not(.ng-hide):not(.excludeInTotal)").each(function(e,t){a+=parseFloat(m(this).find(".partTotal .costToCalc").text().replace(/,/g,""))}),p.partsTotal=0==a?p.getSumCost():Number(a.toFixed(p.maxFractionDigits)),p.totalPartSandFluValue=p.partsTotal+p.timingPartsCost,"Yes"==p.result.labourApplicable?(p.labourExpense=p.totallyLabour*p.labourCost,p.labourExpenseNumber=p.labourExpense,p.totallyLabourAndParts=p.totalPartSandFluValue+p.labourExpenseNumber,p.totalPartSandValueExcludingTemp=p.totallyLabourAndParts+p.totallyLabourAndParts*p.vatTax/100,p.labourExpense=p.rightsideofprice?l(p.labourExpense)+" "+p.currency:p.currency+" "+l(p.labourExpense),p.totalPartSandValueExcluding=l(p.totalPartSandValueExcludingTemp)):"No"==p.result.labourApplicable&&(e="",e="true"==p.isThaiLanguage?p.freeThaiLang:"true"==p.isVNMLanguage?p.freeVnmLang:"Free",p.labourExpense=e,p.totallyLabourAndParts=p.totalPartSandFluValue,p.totalPartSandValueExcludingTemp=p.totallyLabourAndParts+p.totalPartSandFluValue*p.vatTax/100,p.totalPartSandValueExcluding=l(p.totalPartSandValueExcludingTemp)),p.grandTotalExcludeVat=p.totallyLabourAndParts+(!isNaN(p.mechanicalTotalPartResult)&&p.mechanicalTotalPartResult),p.grandTotalIncludeVat=(!isNaN(p.mechanicalTotalPartIncludingTemp)&&p.mechanicalTotalPartIncludingTemp)+p.totalPartSandValueExcludingTemp,p.iolmResultStatus&&(p.grandTotalExcludeVat+=p.iolmTotalPartResult,p.grandTotalIncludeVat+=p.iolmTotalPartIncludingTemp),p.mechanicalTotalPartExcluding=l(p.mechanicalTotalPartIncludingTemp),p.isShowResult=!0,p.partsPopulatedCallback(),p.newCalculationForVNM(),u(function(){p.iolmResultStatus?p.initPdfUrl(p.mechanicalResult,p.timingSummaryData,p.iolmResult):p.initPdfUrl(p.mechanicalResult,p.timingSummaryData)})},p.getMechanicalResult=function(){var s,c=[],d=[];return p.mechanicalTotalPart=null,p.mechanicalResultStatus=!1,m(".partBox input[type = checkbox]:checked").length&&(p.mechanicalResultStatus=!0,s=[],m.each(m(".partBox input[type = checkbox]:checked"),function(e,t){var a,i=m(this),n={},o=[],r={},l=(l=i.next().text()).substring(0,l.length-1);s.push(m(this).data("itempartnumber")),a=i.parents(".categoryItem").find(".categoryName").text(),r.PartName=i.parents("li").children(":first").text(),r.PartCost=i.data("partcost"),r.FinalPartName=r.PartName+"("+l+")",-1==d.indexOf(a)?(d.push(a),n.category=a,o.push(r),n.mechanicalItemArray=o,c.push(n)):(i=d.indexOf(a),c[i].mechanicalItemArray.push(r))}),p.mechanicalLabourHours=null,m.each(p.mechanicalDetails,function(e,t){t.modelname==p.chooseVariant&&(t=t.partsdetails,m.each(t,function(e,t){-1!=s.indexOf(t.PartNumber)&&(p.mechanicalLabourHours+=Number(t.LabourHours))}))}),m.each(c,function(e,t){t=t.mechanicalItemArray;m.each(t,function(e,t){p.mechanicalTotalPart+=parseFloat(t.PartCost)})})),p.mechanicalLabourExpense=Number(p.tempLabourCost)*p.mechanicalLabourHours,p.mechanicalTotalPartResult=p.mechanicalLabourExpense+p.mechanicalTotalPart,p.mechanicalTotalPartIncludingTemp=p.mechanicalTotalPartResult+p.mechanicalTotalPartResult*p.vatTax/100,c},p.getImageAndClosure=function(a,i){var e=m(".temporary-form-container").data("csvdata"),t="";m.each(e,function(e,t){p.trimValue(t.nameplatename)==p.trimValue(a)&&p.trimValue(t.variantname)==p.trimValue(i)&&(p.imageAndClosure=t)}),m(".addDisclosure").remove(),null!=p.imageAndClosure&&p.imageAndClosure.hasOwnProperty("disclosure")&&(e=m("#disclosureAuthorText").val().trim(),t="Free"!=p.labourExpense&&p.labourExpense!=m("#thaifree").val()||""==e?""==p.imageAndClosure.disclosure?"":"<li class='addDisclosure'> "+p.imageAndClosure.disclosure+"</li>":""==p.imageAndClosure.disclosure?"<li class='addDisclosure'> "+e+"</li>":"<li class='addDisclosure'> "+p.imageAndClosure.disclosure+"</li><li class='addDisclosure'> "+e+"</li>",m(".freeDisclosure").append(t))},p.trimValue=function(e){return e.trim()},p.initPdfUrl=function(e,t,a){var n,o,i,r,l,s,e=JSON.parse(JSON.stringify(e)),c={},e=(c.mp=e,encodeURI(JSON.stringify(c))),c=m(".viewPdf").data("currentpage"),d="/content/dam/Ford/website-assets/ap/th/header/ford-logo.png",u="",u="true"==p.isThaiLanguage?"th":"en",t=JSON.stringify((n=[],m.each(t,function(e,t){var a=t.partsdetails,i={};i.labourHrsTimingBelt=t.LabourHours,m.each(a,function(e,t){i.partName=t.PartName,i.partCost=t.PartCost,i.partNameThai=t.PartNameThai,i.messageEnglish=t.MessageEnglish,i.messageThai=t.MessageThai}),n.push(i)}),n));null!=a&&p.isMarketZA&&(a.iolmParts=(o=[],m(".iolmListSection .listBox:not(.ng-hide)").each(function(){var e=m(this),t=e.find(".partBrand .part-brand-pill.active"),a="Other"==e.find(".partBrand").data("parttype"),i=a?e.find(".partBrand #otherTypePresent"):t;o.push({PartName:e.find(".partName").text(),PartType:a?i.data("label"):t.find("label").text(),Quantity:i.data("unitused"),TotalCost:i.data("repaircost"),PartNumber:i.data("partnumber")})}),o)),1==p.isMarketThai?s=c+".ServiceCalculatorLabourCost.pdf?"+("province="+p.selectedProvince+"&dealer="+p.dealerValue+"&vehicle="+p.chooseVehicle+"&engineSize="+p.EngineValue+"&transmission="+p.chooseTransmission+"&variant="+p.serviceForValue+"&serviceInterval="+p.baseOnValue+"&cs="+p.currency+"&tax="+p.vatTax+"&lexpHr="+p.labourCost+"&logo="+d+"&variantImage="+p.imageAndClosure.imageURL+"&disclaimerText="+p.imageAndClosure.disclosure+"&isServiceApplicable=1&lang="+u)+"&mechanicalparts="+e+"&tlLbrHrs="+p.mechanicalLabourHours+"&timingBeltSet="+t+"&countryCode="+p.marketName:1==p.isMarketVNM?s=c+".ServiceCalculatorLabourCost.pdf?"+("province="+p.selectedProvince+"&dealer="+p.dealerValue+"&vehicle="+p.chooseVehicle+"&engineSize="+p.EngineValue+"&transmission="+p.chooseTransmission+"&variant="+p.serviceForValue+"&serviceInterval="+p.baseOnValue+"&cs="+p.currency+"&tax="+p.vatTax+"&lexpHr="+p.labourCost+"&logo="+d+"&variantImage="+p.imageAndClosure.imageURL+"&disclaimerText="+p.imageAndClosure.disclosure+"&isServiceApplicable=1&lang=vi")+"&tlLbrHrs="+p.mechanicalLabourHours+"&countryCode="+p.marketName:(p.chooseModelYear=p.chooseModelYear.trim(),i=p.selectedPartNumbers.join(","),r=p.rightsideofprice?"Yes":"No",l="Namibia"==p.selectedCountry?p.markuppercentagenamibia:"Swaziland"==p.selectedCountry?p.markuppercentageswaziland:"0.0",s=c+".ServiceCalculatorLabourCostZA.pdf?"+("country="+p.selectedCountry+"&province="+p.selectedProvince+"&town="+p.selectedTown+"&dealer="+encodeURIComponent(p.dealerValue)+"&vehicle="+p.chooseVehicle+"&engineSize="+p.EngineValue+"&modelYear="+p.chooseModelYear+"&variant="+p.serviceForValue+"&serviceInterval="+p.baseOnValue+"&cs="+p.currency+"&tax="+p.vatTax+"&lexpHr="+p.labourCost+"&logo="+d+"&isServiceApplicable=1&lang="+u+"&isCSAfter="+r+"&markupPercentage="+l)+"&mechanicalparts="+e+"&tlLbrHrs="+p.mechanicalLabourHours+"&timingBeltSet="+t+"&countryCode="+p.marketName+"&selectedPartNumber="+i,p.dealerCode&&(s+="&dealerCode="+p.dealerCode)),null!=a&&(s+="&iolm="+encodeURI(JSON.stringify(a))),m(".viewPdf").attr("href",s)},p.getSumCost=function(){var a=0;return m.each(p.result.parts,function(e,t){a+=parseFloat(t.totalrepaircost)}),Number(a.toFixed(p.maxFractionDigits))},p.changeVehicle=function(){""!=m("select[name = vehicle]").val()?(u(function(){m("select[name = engine]").val("").trigger("change"),m("select[name = engineMobile]").val("").trigger("change"),1==p.isMarketThai||1==p.isMarketVNM?(m("select[name = transmission]").val("").trigger("change"),p.transmissionStatus=!0):(m("select[name = modelYear]").val("").trigger("change"),p.modelYearStatus=!0),m("select[name = variant]").val("").trigger("change"),m("select[name = interval]").val("").trigger("change"),p.variantStatus=!0,p.intervalStatus=!0,p.engineStatus=!1,p.serviceButtonStatus=!0}),p.chooseVehicle=m("select[name = vehicle]").val(),p.modelDetails=a(p.serviceData.modelsInfo,void 0,p.chooseVehicle).modelDetails,p.engineSize=p.filterEngineSize(p.modelDetails),(p.isMarketThai||p.isMarketVNM)&&u(function(){p.engineSize&&1==p.engineSize.length&&(m("select[name = engine]").val(m("select[name = engine] option:eq(1)").val()).trigger("change"),p.transmissionChange())}),p.isMarketZA&&u(function(){p.engineSize&&1==p.engineSize.length&&(p.isMobile.matches?(m("select[name = engineMobile]").val(m("select[name = engineMobile] option:eq(1)").val()).trigger("change"),p.engineStatus=!0,p.engineMobileChange()):(m("select[name = engine]").val(m("select[name = engine] option:eq(1)").val()).trigger("change"),p.engineStatus=!0,p.engineChange()))})):u(function(){m("select[name = engine]").val("").trigger("change"),m("select[name = engineMobile]").val("").trigger("change"),m("select[name = variant]").val("").trigger("change"),m("select[name = interval]").val("").trigger("change"),(1==p.isMarketThai||1==p.isMarketVNM?(m("select[name = transmission]").val("").trigger("change"),p.transmissionStatus=!0,m("select[name = transmission]")):(m("select[name = modelYear]").val("").trigger("change"),p.modelYearStatus=!0,m("select[name = modelYear]"))).prop("disabled",!0),p.variantStatus=!0,p.intervalStatus=!0,p.engineStatus=!0,p.serviceButtonStatus=!0,m("select[name = engine],select[name = engineMobile], select[name = variant],select[name = interval]").prop("disabled",!0)})},p.filterEngineSize=function(e){var i=[],n=[];return m.each(p.modelDetails,function(e,t){var a={};-1==n.indexOf(t.engineSize)&&(a.engineSizeValue=t.engineSize,i.push(a)),n.push(t.engineSize)}),i},p.engineChange=function(){var e;""!=m("select[name = engine]").val()?(u(function(){m("select[name = variant]").val("").trigger("change"),(1==p.isMarketThai||1==p.isMarketVNM?m("select[name = transmission]"):m("select[name = modelYear]")).val("").trigger("change"),m("select[name = interval]").val("").trigger("change"),p.variantStatus=!0,p.intervalStatus=!0,p.serviceButtonStatus=!0}),e=m("select[name = engine]").val(),p.EngineValue=e,1==p.isMarketThai||1==p.isMarketVNM?(p.transmissionStatus=!1,p.transmissionArray=p.transmissionFilter(e),u(function(){p.transmissionArray&&1==p.transmissionArray.length&&(m("select[name = transmission]").val(m("select[name = transmission] option:eq(1)").val()).trigger("change"),p.variantChange())})):(p.modelYearStatus=!1,p.modelYearArray=p.modelYearFilter(e),p.isMarketZA&&u(function(){p.modelYearArray&&1==p.modelYearArray.length&&(m("select[name = modelYear]").val(m("select[name = modelYear] option:eq(1)").val()).trigger("change"),p.modelYearStatus=!0,p.modelYearChange())}))):(1==p.isMarketThai||1==p.isMarketVNM?(m("select[name = transmission]").val("").trigger("change"),m("select[name = variant]").val("").trigger("change"),m("select[name = interval]").val("").trigger("change"),p.variantStatus=!0,p.transmissionStatus=!0,p.intervalStatus=!0,m("select[name = transmission],select[name = variant],select[name = interval]")):(m("select[name = modelYear]").val("").trigger("change"),p.modelYearStatus=!0,m("select[name = modelYear]"))).prop("disabled",!0)},p.engineMobileChange=function(){var e;""!=m("select[name = engineMobile]").val()?(u(function(){m("select[name = variant]").val("").trigger("change"),(1==p.isMarketThai||1==p.isMarketVNM?m("select[name = transmission]"):m("select[name = modelYear]")).val("").trigger("change"),m("select[name = interval]").val("").trigger("change"),p.variantStatus=!0,p.intervalStatus=!0,p.serviceButtonStatus=!0}),e=m("select[name = engineMobile]").val(),p.EngineValue=e,1==p.isMarketThai||1==p.isMarketVNM?(p.transmissionStatus=!1,p.transmissionArray=p.transmissionFilter(e)):(p.modelYearStatus=!1,p.modelYearArray=p.modelYearFilter(e))):((1==p.isMarketThai||1==p.isMarketVNM?(m("select[name = transmission]").val("").trigger("change"),p.transmissionStatus=!0,m("select[name = transmission]")):(m("select[name = modelYear]").val("").trigger("change"),p.modelYearStatus=!0,m("select[name = modelYear]"))).prop("disabled",!0),m("select[name = variant]").val("").trigger("change"),m("select[name = interval]").val("").trigger("change"),p.variantStatus=!0,p.intervalStatus=!0,m("select[name = interval],").prop("disabled",!0))},p.transmissionFilter=function(a){var i=[];return p.modelDetails.filter(function(e,t){if(-1==i.indexOf(e.transmission)&&e.engineSize==a)return i.push(e.transmission),e})},p.modelYearFilter=function(a){var i=[];return p.modelDetails.filter(function(e,t){if(-1==i.indexOf(e.modelYear)&&e.engineSize==a)return i.push(e.modelYear),e})},p.transmissionChange=function(){var e;""!=m("select[name = transmission]").val()?(u(function(){m("select[name = variant]").val("").trigger("change"),m("select[name = interval]").val("").trigger("change"),p.intervalStatus=!0,p.serviceButtonStatus=!0,p.variantStatus=!1}),p.chooseTransmission=m("select[name = transmission]").val(),e=p.EngineValue,p.intervalAndVariantValue=p.intervalAndVariant(p.chooseTransmission,e),u(function(){p.intervalAndVariantValue&&1==p.intervalAndVariantValue.length&&m("select[name = variant]").val(m("select[name = variant] option:eq(1)").val()).trigger("change")})):u(function(){m("select[name = variant]").val("").trigger("change"),m("select[name = interval]").val("").trigger("change"),p.intervalStatus=!0,p.serviceButtonStatus=!0,p.variantStatus=!0,m("select[name = variant], select[name = interval]").prop("disabled",!0)})},p.modelYearChange=function(){var e;""!=m("select[name = modelYear]").val()?(u(function(){m("select[name = variant]").val("").trigger("change"),m("select[name = interval]").val("").trigger("change"),p.intervalStatus=!0,p.serviceButtonStatus=!0,p.variantStatus=!1}),p.chooseModelYear=m("select[name = modelYear]").val(),e=p.EngineValue,p.intervalAndVariantValue=p.intervalAndVariant(p.chooseModelYear,e),p.isMarketZA&&p.variantChange(p.chooseModelYear)):u(function(){m("select[name = variant]").val("").trigger("change"),m("select[name = interval]").val("").trigger("change"),p.variantStatus=!0,p.intervalStatus=!0,p.isMarketZA&&(p.mechanicalStatus=!1)})},1==p.isMarketThai||1==p.isMarketVNM?p.intervalAndVariant=function(a,i){return p.modelDetails.filter(function(e,t){if(e.engineSize==i&&e.transmission==a)return e})}:p.intervalAndVariant=function(a,i){return p.modelDetails.filter(function(e,t){if(e.engineSize==i&&e.modelYear==a)return e})},p.variantChange=function(e){var o,r,l,s,c,d,e=p.isMarketZA?e:m("select[name = variant]").val();""!=e&&null!=e?(u(function(){p.isMarketZA?(m("select[name = interval]").val(m("select[name = interval] option:first-child").val()).trigger("change"),u(function(){p.intervalChange()})):m("select[name = interval]").val("").trigger("change"),p.serviceButtonStatus=!0,p.intervalStatus=!1}),p.isMarketZA||(p.chooseVariant=m("select[name = variant]").val()),m.each(p.intervalAndVariantValue,function(e,t){p.isMarketZA?t.modelYear==p.chooseModelYear&&t.engineSize==p.EngineValue&&(p.intervalArray=t.serviceIntervals,p.chooseVariant=t.variantName):t.variantName==p.chooseVariant&&(p.intervalArray=t.serviceIntervals)}),o=m("#thaimonths").val(),r=m("#thaiyear").val(),l=m("#thaikms").val(),s=m("#vnmMonths").val(),c=m("#vnmYear").val(),d=m("#vnmKms").val(),m.each(p.intervalArray,function(e,t){var a=t.yearsFromPurchaseAndDistance,i=("true"==p.isThaiLanguage?-1!=(a=-1==(a=-1!=a.indexOf("Months")?a.replace("Months",o):a).indexOf("Year")&&-1==a.indexOf("Years")?a:(a=a.replace("Years",r)).replace("Year",r)).indexOf("Kms")&&(a=a.replace("Kms",l)):"true"==p.isVNMLanguage&&-1!=(a=-1==(a=-1!=a.indexOf("Months")?a.replace("Months",s):a).indexOf("Year")&&-1==a.indexOf("Years")?a:(a=a.replace("Years",c)).replace("Year",c)).indexOf("Kms")&&(a=a.replace("Kms",d)),Number(a.split("/")[1].trim().split(" ")[0])),n=(i+"").replace(/\d{1,3}(?=(\d{3})+$)/g,"$&,"),a=a.replace(i,n);t.yearsFromPurchaseThaiLanguage=a}),u(function(){var a,i,n,o;p.newMasterData=(a=>{var n,l="";return 1==p.isMechanicalPartsPresent&&(n=JSON.parse(JSON.stringify(p.masterData))),m.each(p.mechanicalDetails,function(e,t){var r,i;t.modelname==a&&(l=t.partsdetails,r=[],m.each(l,function(e,t){r.push(t.PartNumber)}),i="",1==p.isMechanicalPartsPresent)&&m.each(n,function(e,n){var o=n.category;(i=n.partsdetails.filter(function(e,t){var a,i;if(-1!=r.indexOf(e.PartNumber))return a=[],(i={}).FordandMotorcraft=e.FordandMotorcraft,i.PartCost=e.PartCost,i.PartNumber=e.PartNumber,a.push(i),e.options=a,n.isShow=!0,e.flagStatus=!1,i=l[r.indexOf(e.PartNumber)].ModelYear,e.ModelYear="null"==i?"":i,e.tempCheckBoxId=o+e.PartName.slice(0,4)+e.ModelYear.slice(0,6),e.tempClassName=o+e.PartName.slice(0,4),e})).sort(function(e,t){return e.PartName.charCodeAt(0)-t.PartName.charCodeAt(0)});for(var t=0;t<i.length;t++)for(var a=t+1;a<i.length;a++)i[t].PartName==i[a].PartName&&i[t].ModelYear==i[a].ModelYear&&(i[t].options=i[t].options.concat(i[a].options),i.splice(a,1),a--);2<=i.length&&m.each(i,function(e,t){2<=t.options.length&&t.options.sort(function(e,t){return e.FordandMotorcraft.charCodeAt(0)-t.FordandMotorcraft.charCodeAt(0)})}),n.newPartsDetails=i})}),n})(p.chooseVariant),p.mechanicalStatus=!0,1==p.isMechanicalPartsPresent&&(p.mechanicalPartIsEmpty=!!p.newMasterData[0].newPartsDetails),p.isIolmPresent&&(p.fetchIolmData=(a=p.chooseVehicle,i=p.EngineValue,n=[],o=[],m.each(p.iolmData[0].iolmData,function(e,t){if(t.modelName==a)return n.push(t.engineAndPartDetails),p.showIolmOptions=!!n[0].hasOwnProperty(i),!1;p.showIolmOptions=!1}),m.each(p.iolmData[0].laborHoursData,function(e,t){if(t.modelName==a)return o.push(t.laborHours),p.showIolmOptions=!!o[0].hasOwnProperty(i),!1;p.showIolmOptions=!1}),p.showIolmOptions&&n.length&&o.length&&{parts:n[0][i],labour:o[0][i]}),p.showIolmOptions)&&u(function(){m('#oilChange[type="checkbox"]').prop("checked",!0).trigger("change")}),p.isMarketZA&&(p.showDefenitionOfFordMotocraft=!0),p.timingMasterData=(a=>{if(m(".temporary-form-container").data("timingbelt")){var i=m(".temporary-form-container").data("timingbelt")[0],e=[],t=i.modeldetails.filter(function(e,t){if(e.modelname==a)return e});if(t.length){for(var n=t[0].partnumberandlabourhours,o=0;o<n.length;){var r=JSON.parse(JSON.stringify(i.masterdata)).filter(function(e,a){if(e.partname==n[o].PartNumber)return e.LabourHours=n[o].LabourHours,p.isMarketZA?"Namibia"==p.selectedCountry&&0<p.markuppercentagenamibia?e.partsdetails.filter(function(e,t){e.PartCost=p.calculatePercentage(e.PartCost,p.markuppercentagenamibia)}):"Swaziland"==p.selectedCountry&&0<p.markuppercentageswaziland?e.partsdetails.filter(function(e,t){e.PartCost=p.calculatePercentage(e.PartCost,p.markuppercentageswaziland)}):e.partsdetails.filter(function(e,t){e.PartCost=i.masterdata[a].partsdetails[t].PartCost}):e});e=e.concat(r),o++}return p.isShowTimingMasterData=!0,e}}p.isShowTimingMasterData=!1})(p.chooseVariant)})):(p.intervalStatus=!0,p.serviceButtonStatus=!0,m("input[type = checkbox]").parents("li").attr("data-flagstatus",!1),m("input[type = checkbox]").next().removeClass("mechanicalChecked"),p.mechanicalStatus=!1),p.timingDefaultStatus=!0,m("input[type = checkbox]:not(#oilChange)").prop("checked",!1),m(".categoryBox").off("click").on("click",".categoryItem .itemCheckBox",function(e){0!=m(".partBox input[type = checkbox]:checked").length?u(function(){p.serviceButtonStatus=!1}):(p.showIolmOptions?0==m('#oilChange[type="checkbox"]:checked').length&&0==m(".partBox input[type = checkbox]:checked").length&&""==m("select[name = interval]").val():0==m(".partBox input[type = checkbox]:checked").length&&""==m("select[name = interval]").val())&&u(function(){p.serviceButtonStatus=!0});var t=m(this).parents("li").attr("class");m("."+t).find("input[type = checkbox]").not(this).prop("checked",!1),(m(this).prop("checked")?(m("."+t).find("input[type = checkbox]").not(this).next().addClass("mechanicalChecked"),m(this)):m("."+t).find("input[type = checkbox]").not(this)).next().removeClass("mechanicalChecked"),u(function(){p.isShowResult=!1})}),m(document).on("click change",'.iolm-input input[type = "checkbox"]',function(){m('#oilChange[type="checkbox"]:checked').length?m("select[name = interval]").val()?p.checkIolmFreeCouponInterval():u(function(){p.iolmCouponStatus=!1,p.serviceButtonStatus=!1}):0==m('#oilChange[type="checkbox"]:checked').length&&0==m(".partBox input[type = checkbox]:checked").length&&""==m("select[name = interval]").val()?(m('#oilCoupon[type="checkbox"]').prop("checked",!1),u(function(){p.iolmCouponStatus=!0,p.serviceButtonStatus=!0})):(m('#oilCoupon[type="checkbox"]').prop("checked",!1),u(function(){p.iolmCouponStatus=!0})),p.sortedIolmData=null,u(function(){p.isShowResult=!1})}),m(document).on("change",'.pom-input:not(.iolmOnly-input) input[type = "checkbox"]',function(){m(this).is(":checked")?u(function(){p.isPOMenabled=!0}):u(function(){p.isPOMenabled=!1,m('#oilChange[type="checkbox"]').prop("checked",!0).trigger("change"),m("select[name = interval]").val("").trigger("change"),p.serviceButtonStatus=!0}),p.isShowResult=!1}),m(document).on("change",'.iolmOnly-input input[type = "checkbox"]',function(){p.onlyIolmClicked||(p.isIolmOnlyEnabled=!p.isIolmOnlyEnabled,m('#oilChange[type="checkbox"]').prop("checked",!0).trigger("change"),m(this).is(":checked")?(m("select[name = interval]").val("").trigger("change"),u(function(){p.serviceButtonClick()})):(m("select[name = interval]").val(m("select[name = interval] option:first-child").val()).trigger("change"),u(function(){p.onlyIolmClicked=!1})),p.isShowResult=!1,p.onlyIolmClicked=!0,p.sortedIolmData=null)}),p.isShowResult=!1,p.isMarketZA&&(p.breakout=!1),p.isPOMenabled=!1,p.isIolmOnlyEnabled=!1,p.sortedIolmData=null},p.getTimingSummaryData=function(){var e=[],e=m('.timingList .timingCheckBox:not(.checkBoxDisabled) input[name="timebelt"]:checked');if(p.timingLabourHours=0,p.timingPartsCost=0,1<=e.length&&p.timingMasterData.length){for(var i=[],t=[],a=(e.each(function(e,a){p.isMarketZA?m.each(p.timingMasterData,function(e,t){m(a).attr("data-partnumber")==t.partname&&(p.timingPartsCost=p.timingPartsCost+Number(t.partsdetails[0].PartCost),p.timingLabourHours=p.timingLabourHours+Number(t.LabourHours))}):(p.timingLabourHours=p.timingLabourHours+Number(m(this).data("timinglabourhours")),p.timingPartsCost=p.timingPartsCost+Number(m(this).next().find(".timingCheckText").data("partcost"))),i.push(m(a).attr("data-partnumber"))}),0);a<i.length;){var n=p.timingMasterData.filter(function(e,t){if(e.partname==i[a])return e}),t=t.concat(n);a++}return t}},p.onTimingBeltChange=function(e){!e.isChecked&&e.isChecked||p.isShowResult&&(p.isShowResult=!1)},p.getIolmResult=function(e){if(p.iolmResultStatus=!1,p.iolmTotalPart=null,p.iolmLabourHours=null,m('#oilChange[type="checkbox"]:checked').length&&(p.iolmResultStatus=!0,p.iolmLabourHours+=Number(p.fetchIolmData.labour[0].LabourHours),p.isMarketZA?m(".iolmListSection .listBox:not(.ng-hide)").each(function(){p.iolmTotalPart+=parseFloat(m(this).find(".partTotal .costToCalc").text().replace(/,/g,""))}):m.each(p.fetchIolmData.parts,function(e,t){p.iolmTotalPart+=parseFloat(Number(t.TotalCost))}),m('#oilCoupon[type="checkbox"]:checked').length?(p.iolmLabourExpense="true"==p.isThaiLanguage?m("#thaifree").val():"Free",p.iolmTotalPartResult=p.iolmTotalPart):(p.tempLabourExpense=Number(p.tempLabourCost)*p.iolmLabourHours,p.iolmLabourExpense=p.rightsideofprice?l(p.tempLabourExpense)+" "+p.currency:p.currency+" "+l(p.tempLabourExpense),p.iolmTotalPartResult=p.tempLabourExpense+p.iolmTotalPart),p.iolmTotalPartIncludingTemp=p.iolmTotalPartResult+p.iolmTotalPartResult*p.vatTax/100,null==e))return{iolmParts:p.sortedIolmData,labourHours:p.iolmLabourHours,labourExpense:p.iolmLabourExpense}},p.checkIolmFreeCouponInterval=function(){["1 Year / 15000 Kms","2 Years / 30000 Kms","3 Years / 45000 Kms","4 Years / 60000 Kms","5 Years / 75000 Kms","6 Years / 90000 Kms"].includes(m("select[name = interval]").val())&&m('#oilChange[type="checkbox"]:checked').length?u(function(){p.iolmCouponStatus=!1}):(p.iolmCouponStatus=!0,m('#oilCoupon[type="checkbox"]').prop("checked",!1))},p.intervalChange=function(){if(""!=m("select[name = interval]").val()){if(p.serviceButtonStatus=!1,p.intervalStatus=!1,p.timingDefaultStatus=!1,p.iolmCouponStatus=!1,!p.isMarketZA)for(var e=["1 Year / 15000 Kms","2 Years / 30000 Kms","3 Years / 45000 Kms","4 Years / 60000 Kms","5 Years / 75000 Kms"],t=0;t<e.length;t++)m("select[name = interval]").val()==e[t]&&(p.timingDefaultStatus=!0,m(".timingCheckBox input[type = checkbox]").prop("checked",!1));p.showIolmOptions&&p.checkIolmFreeCouponInterval()}else p.timingDefaultStatus=!0,p.showIolmOptions&&0!=m('#oilChange[type="checkbox"]:checked').length||0!=m(".partBox input[type = checkbox]:checked").length||(p.serviceButtonStatus=!0);p.isShowResult=!1,p.isMarketZA&&(p.breakout=!1)},p.resetButton=function(){u(function(){m("select[name = vehicle]").val("").trigger("change"),m("select[name = engine]").val("").trigger("change"),m("select[name = engineMobile]").val("").trigger("change"),1==p.isMarketThai||1==p.isMarketVNM?(m("select[name = statethai]").val("").trigger("change"),m("select[name = transmission]").val("").trigger("change"),p.transmissionStatus=!0,m("select[name = dealerthai]").val("").trigger("change")):(m("select[name = country]").val("").trigger("change"),p.isSAFdefault&&u(function(){m("select[name = country]").val("South Africa").trigger("change")}),m("select[name = state]").val("").trigger("change"),m("select[name = town]").val("").trigger("change"),m("select[name = dealer]").val("").trigger("change"),m("select[name = modelYear]").val("").trigger("change"),p.provinceStatus=!0,p.townStatus=!0,p.modelYearStatus=!0),m("select[name = variant]").val("").trigger("change"),m("select[name = interval]").val("").trigger("change"),p.dealerStatus=!0,p.selectVehicleStatus=!0,p.variantStatus=!0,p.intervalStatus=!0,p.engineStatus=!0,p.mechanicalStatus=!1}),document.body.scrollTop=0,document.documentElement.scrollTop=0,p.isShowResult=!1,p.isMarketZA&&(p.breakout=!1)},p.partsPopulatedCallback=function(){u(function(){p.selectedPartNumbers=[];var a;m(".intervalPartListSection .listBox:not(.ng-hide)").each(function(e,t){null!=(a=m(this).find(".partBrand .part-brand-container .part-brand-pill.active").data("partnumber"))&&p.selectedPartNumbers.push(a)})})},p.partBrandChange=function(e,t){var a,i,n;m(e.target.parentElement).hasClass("otherBrandPresent")&&(a=m(e.target.parentElement).data("unitused"),i=m(e.target.parentElement).data("repaircost"),m(e.target.parentElement).hasClass("active")||(m(e.target.parentElement).addClass("active"),m(e.target.parentElement).siblings().removeClass("active")),m(e.target.parentElement).parents(".listBox").find(".partUnit").text(a),m(e.target.parentElement).parents(".listBox").find(".partTotal .costToCalc").text(i),n=0,m(null!=t&&t?".iolmListSection .listBox:not(.ng-hide)":".intervalPartListSection .listBox:not(.ng-hide)").each(function(e,t){n+=parseInt(m(this).find(".partTotal .costToCalc").text())}),null!=t&&t?p.getIolmResult(n):(p.partsTotal=n,p.partsPopulatedCallback()),p.populateResults())}}]),m(document).ready(function(){m(".serviceTitle").css("display","block"),m(".viewPdf").on("click",function(){var e=m(this).text().toLowerCase().trim();return t.getServiceCalculatorEvents().servicePlanDownloadPdfClick(e),!0})}),e.init=function(){window.matchMedia("(max-width: 767px)").matches&&m("head").append('<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />'),angular.bootstrap(document,["serviceCalculator"])},e}),define("esb-calculator/esb.Calculator",["jquery","angular"],function(D,e){var t={};return e.module("esbCalculator",[]).controller("esbCal",["$scope",function(r){function l(e){return e.filter(function(e,t,a){return t==a.indexOf(e)})}r.selectProductType="",r.selectModel="",r.productType=[],r.subProductType=[],r.model=[],r.fuelType=[],r.serviceInterval=[],r.vehicleAge=[],r.esbCalculatorResults=!1,r.esbResult=[],r.showSubProductType=!0,r.showModel=!0,r.showFuelType=!0,r.showServiceInterval=!0,r.showVehicleAge=!0,r.leftPrice=!0,r.disableCalcul=!0,r.showCaption=!1,r.showRefers=!1,r.errorDescription=!1,r.hideSubProductType=!0,r.hideServiceInterval=!0;var i=D(".esb-calculator-container").data("local-language"),e=(D(".tab-body").data("left-side"),D(".tab-body").data("right-side")),n=(r.rightPrice=!!e,D(".esb-calculator-container").data("csvdata"));if(i)for(var t=0,a=n.length;t<a;t++)r.productType.push(n[t].producttype_locallanguage.trim());else for(t=0,a=n.length;t<a;t++)r.productType.push(n[t].producttype.trim());function s(e,a,i){e.forEach(function(e,t){i.push(e[a].trim())})}r.productType=l(r.productType),setTimeout(function(){D(".esb-calculator select").each(function(e,t){D(t).select2({minimumResultsForSearch:-1})})},500);var o,c,d="",u="",p="",m="",h=[],f=[],g=[],v=[],y=[],b=[],e=D(".terms-condition").data("terms-condition"),w=!1,C=!1,k={};function S(){d&&u&&p&&m&&"default"!=d&&"default"!=u&&"default"!=p&&"default"!=m?r.disableCalcul=!1:(r.disableCalcul=!0,r.showCaption=!1),r.$apply()}function x(e,t,a){if(e&&t&&a){for(var i=[],n=0,o=e.length;n<o;n++)e[n][t].trim()==a&&i.push(e[n]);return i}}e.forEach(function(e,t){D.extend(k,e)}),D("#esb-productType").on("change",function(){for(var e in r.esbCalculatorResults=!1,d=D("#esb-productType option:checked").val(),r.selectProductType=d,D(".terms-condition").empty(),C=w=!1,sessionStorage.setItem("product-type",d),"Premium Extended Warranty"===d?(r.showRefers=!0,D(".tab-body").height(136)):(r.showRefers=!1,D(".tab-body").height(154)),k)e==d&&(D(".terms-condition").empty(),D(".terms-condition").append(k[e]),w=!0);var t=(h=x(n,i?"producttype_locallanguage":"producttype",d)).every(function(e,t){return""==e.serviceInterval}),a=h.every(function(e,t){return""==e.subproducttype});a?(r.hideSubProductType=!0,r.$apply(),r.model=[],s(h,"model",r.model),r.model=l(r.model),r.fuelType=[],r.vehicleAge=[],D("#esb-model").val("default").trigger("change"),D("#esb-fuelType").val("default").trigger("change"),D("#esb-vehicleAge").val("default").trigger("change"),r.showFuelType=!0,r.showVehicleAge=!0,r.showModel=!1):(r.hideSubProductType=!1,r.$apply(),D("#esb-subProductType").show(),D("#esb-subProductType").next(".select2-container").show(),D("#esb-subProductType").val("default").trigger("change"),r.showSubProductType=!1,r.showModel=!0,r.subProductType=[],s(h,i?"subproducttype_locallanguage":"subproducttype",r.subProductType),r.subProductType=l(r.subProductType)),t?(a?D(".tab-body").height(154):D(".tab-body").height(210),r.hideServiceInterval=!0,r.$apply()):(r.hideServiceInterval=!1,r.$apply(),a?D(".tab-body").height(210):D(".tab-body").height(270),D("#esb-serviceInterval").show(),D("#esb-serviceInterval").next(".select2-container").show(),D("#esb-serviceInterval").trigger("change"),r.showServiceInterval=!0),r.fuelType=[],r.vehicleAge=[],D("#esb-model").val("default").trigger("change"),D("#esb-fuelType").val("default").trigger("change"),D("#esb-vehicleAge").val("default").trigger("change"),r.showFuelType=!0,r.showServiceInterval=!0,r.showVehicleAge=!0,S()}),D("#esb-subProductType").on("change",function(){r.esbCalculatorResults=!1,o=D("#esb-subProductType option:checked").val(),w||D(".terms-condition").empty(),C&&(D(".terms-condition").empty(),C=!1),f=x(h,i?"subproducttype_locallanguage":"subproducttype",o),r.model=[],s(f,"model",r.model),r.model=l(r.model);var e,a=[];for(e in f.forEach(function(e,t){a.push(e.model)}),k)e==o&&(D(".terms-condition").empty(),D(".terms-condition").append(k[e]),C=!0);a=l(a),r.fuelType=[],r.vehicleAge=[],D("#esb-model").val("default").trigger("change"),D("#esb-fuelType").val("default").trigger("change"),D("#esb-serviceInterval").val("default").trigger("change"),D("#esb-vehicleAge").val("default").trigger("change"),r.showModel=!1,r.showFuelType=!0,r.showVehicleAge=!0,r.showServiceInterval=!0,S()}),D("#esb-model").on("change",function(){r.esbCalculatorResults=!1,u=D("#esb-model option:checked").val(),r.selectModel=u,g=x(1==r.hideSubProductType?h:f,"model",u);var a=[],i=[];g.forEach(function(e,t){i.push(e.fuelType.trim()),"All"==e.fuelType?a.push(-1):a.push(t)}),i=l(i),D("#esb-fuelType").val("default").trigger("change"),D("#esb-serviceInterval").val("default").trigger("change"),D("#esb-vehicleAge").val("default").trigger("change"),r.showServiceInterval=!0,r.showVehicleAge=!0,r.fuelType=[],s(g,"fuelType",r.fuelType),r.fuelType=l(r.fuelType),r.showFuelType=!1,S()}),D("#esb-fuelType").on("change",function(){var a,i,n,o;r.esbCalculatorResults=!1,p=D("#esb-fuelType option:checked").val().trim(),v=x(g,"fuelType",p),1==r.hideServiceInterval?(a=[],(y=v).forEach(function(e,t){"0-999"==e.VehicleAge?a.push(-1):a.push(t)}),0<(o=a).length&&o.some(function(e,t){return e!==o[0]})?(D("#esb-vehicleAge").val("default").trigger("change"),r.vehicleAge=[],s(v,"VehicleAge",r.vehicleAge),r.vehicleAge=l(r.vehicleAge),r.showVehicleAge=!1):(r.vehicleAge=[],r.vehicleAge.unshift("0-999"),r.$apply(),D("#esb-vehicleAge").val("0-999").trigger("change"),r.showVehicleAge=!0),i=[],1==r.hideServiceInterval&&v.forEach(function(e,t){i.push(e.VehicleAge)}),i=l(i)):(D("#esb-serviceInterval").val("default").trigger("change"),D("#esb-vehicleAge").val("default").trigger("change"),n=[],v.forEach(function(e,t){n.push(e.serviceInterval)}),n=l(n),r.serviceInterval=[],s(v,"serviceInterval",r.serviceInterval),r.serviceInterval=l(r.serviceInterval),r.$apply(),r.showServiceInterval=!1,r.showVehicleAge=!0),S()}),D("#esb-serviceInterval").on("change",function(){r.esbCalculatorResults=!1,c=D("#esb-serviceInterval option:checked").val(),y=x(v,"serviceInterval",c);var a=[],i=[];y.forEach(function(e,t){i.push(e.VehicleAge),"0-999"==e.VehicleAge?a.push(-1):a.push(t)}),1==r.hideServiceInterval&&v.forEach(function(e,t){i.push(e.VehicleAge)}),D("#esb-vehicleAge").val("default").trigger("change"),r.vehicleAge=[],s(y,"VehicleAge",r.vehicleAge),r.vehicleAge=l(r.vehicleAge),r.showVehicleAge=!1,i=l(i),S()}),D("#esb-vehicleAge").on("change",function(){r.esbCalculatorResults=!1,m=D("#esb-vehicleAge option:checked").val(),1==r.hideServiceInterval&&(y=v),b=x(y,"VehicleAge",m),S()}),r.startCalculator=function(){r.disableCalcul?r.errorDescription=!0:(r.errorDescription=!1,r.showCaption=!0,r.esbResult=b,r.esbCalculatorResults=!0)},D(function(){var e,t=D("#esb-productType").data("default-product-type"),t=("All"!=t&&D("#esb-productType").val(t).trigger("change"),D(".buy-product-btn"));t.data("use-overlay")&&(e="",0<document.domain.indexOf("author")&&(e="?wcmmode=disabled"),e=window.location.pathname+e+"#overlay"+t.data("overlay-url")+e,t.addClass("link-overlay base-url popup-link-initialized"),t.attr("_link_action","link-overlay"),t.attr("_link_style","cta-button cta-button-primary"),t.attr("href",e))})}]),t.init=function(){e.bootstrap(D(".esb-calculator"),["esbCalculator"])},t}),define("secondary-navigation-sticky/component.secondaryNavigationSticky",["jquery","angular","analytics/analyticsEventLayer","marketConfigGlobal"],function(c,a,d,u){var e={};return a.module("SecondaryNavigationStickyApp",["ngRoute","ngSanitize"]).controller("SecondaryNavigationStickyController",["$scope",function(e){var t=this,a="",i=c(".secondary-navigation-sticky-container"),n=!1,o=i.attr("data-overlaycontent"),r=i.attr("data-namplate-chk"),l=window.matchMedia("(max-width: 767px)"),s="";e.overlayObj=o?jQuery.parseJSON(o):"",e.overlayObj.length&&e.overlayObj.forEach(function(e,t){s+='<li><a class="btnCond-regular-white-ttNone-ls1" href="'+e.pathToModel+'" target="'+("true"==e.openinnewtab?"_blank":"_self")+'"><img class="icon" src="'+e.iconpath+'" /><span>'+e.modelName+"</span></a></li>"}),i.find(".secondary-nav-features > ul").append(s),t.checkMEAmarket=function(){return"ar"==u.getCurrentLanguageCode()&&c("html").hasClass("market_mea")},t.showOverlay=function(e){c(e.currentTarget);e=c(".secondary-nav-overlay");c("body").addClass("noscrollBg"),t.checkMEAmarket()?e.addClass("left"):e.addClass("right"),t.overlayPosition=t.checkMEAmarket()?"left slideInLeft":"",e.find(".secondary-nav-overlay-content").addClass("display-none"),e.find(".secondary-nav-overlay-content").removeClass("display-none"),e.css("width","450px"),l.matches&&e.css("width","100%"),c(".secondary-nav-overlay-wrapper").addClass("autoWidth"),c(".secondary-nav-overlayContainer").addClass("autoWidth"),"true"===r&&d.getNameplateExperienceEvents().trackNmpLandingPageClick("sidebar expand"),n||(a=setInterval(()=>{0<(c(".puwyl-model-wrapper")||"").length&&(n=!0,c(".puwyl-hidden-wrapper").clone().insertAfter(".secondary-nav-overlay-wrapper"),c(".secondary-nav-overlay").addClass("sn-cloned-nudge-popup"),clearInterval(a))},1e3))},t.hideOverlay=function(e){c(".secondary-nav-overlay").css("width","0px"),c(".secondary-nav-overlay-wrapper").removeClass("autoWidth"),c(".secondary-nav-overlayContainer").removeClass("autoWidth"),c("body").removeClass("noscrollBg"),c(".overlay-container").find(".secondary-nav-overlay-content").addClass("display-none"),l.matches&&c(".secondary-nav-overlayContainer").removeClass("autoHeight")}}]),e.init=function(){c("#secondary-navigation-sticky-wrap").length&&c("#secondary-navigation-sticky-wrap").each(function(e,t){a.bootstrap(t,["SecondaryNavigationStickyApp"])}),c(".content.show-content").addClass("secondary-nav-sticky")},e}),define("credit-payment-estimator/component.creditPaymentEstimator.app",["angular"],function(e){return e.module("creditPaymentEstimator",[])}),define("credit-payment-estimator/component.creditPaymentEstimator.controllers",["credit-payment-estimator/component.creditPaymentEstimator.app","credit-payment-estimator/controllers/creditPaymentEstimator.controller.vehicleInfo","credit-payment-estimator/controllers/creditPaymentEstimator.controller.main","credit-payment-estimator/controllers/creditPaymentEstimator.controller.financingPackage","credit-payment-estimator/controllers/creditPaymentEstimator.controller.CompareFinancialOptions","credit-payment-estimator/controllers/creditPaymentEstimator.controller.summaryList","credit-payment-estimator/controllers/creditPaymentEstimator.controller.productDescription"],function(e,t,a,i,n,o,r){e.controller("MainCtrl",["$scope","workFlowData",a]),e.controller("VinCodeInfoCtrl",["$scope","workFlowData","$filter",t]),e.controller("FinancingPackageCtrl",["$scope","workFlowData","$filter","$timeout","$window",i]),e.controller("CompareFinancialOptionsCtrl",["$scope","workFlowData",n]),e.controller("SummaryListCtl",["$scope","workFlowData",o]),e.controller("ProductDescriptionCtrl",["$scope","workFlowData",r])}),define("credit-payment-estimator/component.creditPaymentEstimator.directives",["credit-payment-estimator/component.creditPaymentEstimator.app","credit-payment-estimator/directives/creditPaymentEstimator.directive.maxValidator","credit-payment-estimator/directives/creditPaymentEstimator.directive.minValidator","credit-payment-estimator/directives/creditPaymentEstimator.directive.characterValidator","credit-payment-estimator/directives/creditPaymentEstimator.directive.slider","credit-payment-estimator/directives/creditPaymentEstimator.directive.eventPropogation"],function(e,t,a,i,n,o){e.directive("maxPayment",["$filter",t]),e.directive("maxPayment",["$filter",a]),e.directive("characterValidator",["$filter",i]),e.directive("slider",["$timeout","$filter","$rootScope",n]),e.directive("eventPropogation",o)}),define("credit-payment-estimator/component.creditPaymentEstimator.filters",["credit-payment-estimator/component.creditPaymentEstimator.app","credit-payment-estimator/filters/creditPaymentEstimator.filter.sortPrograms","credit-payment-estimator/filters/creditPaymentEstimator.filter.downPaymentSliderValue","credit-payment-estimator/filters/creditPaymentEstimator.filter.sortVehicle","credit-payment-estimator/filters/creditPaymentEstimator.filter.currencyFormat"],function(e,t,a,i,n){e.filter("sortPrograms",[t]),e.filter("sliderValue",[a]),e.filter("sortVehicle",[i]),e.filter("currencyFormat",[n])}),define("credit-payment-estimator/component.creditPaymentEstimator",["jquery","range-slider","jquery-flexslider","hammer","_","angular","analytics/analyticsEventLayer","credit-payment-estimator/component.creditPaymentEstimator.app","credit-payment-estimator/component.creditPaymentEstimator.controllers","credit-payment-estimator/component.creditPaymentEstimator.services","credit-payment-estimator/component.creditPaymentEstimator.filters","credit-payment-estimator/component.creditPaymentEstimator.directives","mediaQuery"],function(r,e,t,a,l,i,s,n,o,c,d,u,p){var m={},h={},f=h.paymentEstimator=function(e){(f.prototype._singletonInstance=this).opts=r.extend({tablet:768,financialProductList:".payment-estimator-wrap .financial-products .product-list",financialListItem:".payment-estimator-wrap .financial-products .product-list .product-item",financialProductWrap:".payment-estimator-wrap .financial-products .product-slider",financialSlideItem:".payment-estimator-wrap .financial-products .product-slider .product-item",financialProduct:".payment-estimator-wrap .financial-products .product-item",financialProductsDesc:".payment-estimator-wrap .financial-products .product-item .product-desc",equalHeightAttr:".payment-estimator-wrap .compare-financial-options .attribute",equalDataAttr:"data-attribute-name",headerCompare:".payment-estimator-wrap .compare-financial-options .head",compareElements:".vehicle-item",buttonAddVehicle:".compare-financial-options .vehicle-action a",buttonDelVehicle:".compare-financial-options .remove-btn a"},e=e||{}),this.init()};return f.getInstance=function(){return null==f.prototype._singletonInstance&&(f.prototype._singletonInstance=new h.paymentEstimator),f.prototype._singletonInstance},f.prototype.productToggleInfo=function(){r(this.opts.financialProduct).on("click",function(){r(this).toggleClass("open-info")})},f.prototype.bundleProductSlider=function(){var e=r(this.opts.financialProductList),t=r(this.opts.financialListItem).length,a=r(this.opts.financialProductWrap),i=(r(this.opts.financialSlideItem).length,1);function n(){var e=r(".payment-estimator-wrap .financial-products .product-slider .slide-wrap > li").length;e&&1<e&&(a.addClass("multi-product"),a.find(".flex-viewport").length||r(".payment-estimator-wrap .financial-products .product-slider").flexslider({animation:"slide",selector:".slide-wrap > li",animationLoop:!1,start:function(){},before:function(){},after:function(){}}))}t&&1<t&&e.addClass("multi-product"),n(),a.bind("DOMSubtreeModified",function(){var e;i!==r(".payment-estimator-wrap .financial-products .product-slider .slide-wrap > li").length&&(i=r(".payment-estimator-wrap .financial-products .product-slider .slide-wrap > li").length,clearTimeout(e),e=setTimeout(function(){n()},500))})},f.prototype.toUnique=function(e,t,a){for(t=e.length;a=--t;)for(;a--;)e[t]===e[a]&&e.splice(a,1);return e},f.prototype.equalHeight=function(e,t){var a=0;void 0!==t&&!0===t&&r(window).width()<this.opts.tablet?r(e).css("min-height","auto"):(r(e).css("min-height","auto"),r(e).each(function(){var e=r(this).outerHeight();a<e&&(a=e)}),r(e).css("min-height",a))},f.prototype.getVehiceAttributes=function(){var e=[],t=[],a=this.opts.equalHeightAttr,i=this.opts.equalDataAttr;return r(a).each(function(){e.push(r(this).attr(i))}),t=0<e.length?this.toUnique(e):t},f.prototype.equalHeightAttributes=function(){var a=this,e=this.getVehiceAttributes(),i=this.opts.equalHeightAttr,n=this.opts.equalDataAttr,t=this.opts.headerCompare;function o(){r.each(e,function(e,t){a.equalHeight(i+"["+n+"="+t+"]")}),r(t).length&&a.equalHeight(t)}o(),r(window).on("resize",l.throttle(function(){o()},100))},f.prototype.equalHeightFinancialProducts=function(){var e=this,t=this.opts.financialProductsDesc;r(t).length&&e.equalHeight(t,!0)},f.prototype.initEvents=function(){var e=this,t=(r(".overlay-content-inner .vehicle-wrap"),r(".overlay-container .overlay-close"),!1),a=(r(document.body).on("click","#showroom-vehicle-card .vehicle-card-grid .item-content, .overlay-container .overlay-close",function(){t=!0,r(".form-dropdown.mode-dropdown .select2-container").remove();try{r(".form-dropdown #select-models").removeClass("select2-offscreen").select2({minimumResultsForSearch:-1})}catch(e){}}),r(".form-dropdown.mode-dropdown #select-models")&&r(document).on("ajaxComplete.afterCloseOverlay",function(e){if(t){r(".form-dropdown.mode-dropdown .select2-container").remove();try{r(".form-dropdown #select-models").removeClass("select2-offscreen").select2({minimumResultsForSearch:-1})}catch(e){}t=!1}}),r(document.body).on("click",".overlay-content .vehicle-card-grid .item a",function(e){e.preventDefault()}),r(document.body).on("click",".add-model, .remove-model",function(){e.equalHeightAttributes(),r(".accordion-body.active").height(r(".accordion-body.active > .accordion-content").height())}),r(".financing-package .tabs-nav-item").off("click.tabs"),r(".financing-package .tabs-nav-item").on("click",function(e){if(e.preventDefault(),r(this).hasClass("is-active"))return!1;r(".financing-package .tabs-nav-item.is-active").removeClass("is-active"),r(this).addClass("is-active")}),"mobile"===p.getMediaType());function n(){var e={vehicleNameplate:encodeURIComponent(r(".info-section > h4").text()),vehicleModel:encodeURIComponent(r("#select-models").select2("data").text),financialProgram:encodeURIComponent(r.trim(r(".financing-package .tabPanel .tabs-nav .tabs-nav-list .is-active").text())),price:encodeURIComponent(r(".payment-estimator-wrap .payment-summary span.payment-price:first").text()),downPayment:encodeURIComponent(r(".payment-estimator-wrap .payment-summary span.payment-downPayment:first").text()),amountFinanced:encodeURIComponent(r(".payment-estimator-wrap .payment-summary span.payment-amountFinanced:first").text()),terms:encodeURIComponent(r(".payment-estimator-wrap .payment-summary span.payment-term:first").text()),monthlyPayment:encodeURIComponent(r(".payment-estimator-wrap .payment-summary span.payment-monthlyPayment:first").text()),ewPackage:encodeURIComponent(r(".payment-estimator-wrap .payment-summary span.payment-ewPackage-price:first").text().replace(/^\D/,"")),transactionPrice:encodeURIComponent(r(".payment-estimator-wrap .payment-summary .payment-transactionPrice:first").text()),addonAmount:encodeURIComponent(r(".payment-estimator-wrap .payment-summary .payment-addonAmount:first").text()),ewName:encodeURIComponent(r(".payment-estimator-wrap .payment-summary span.payment-ewPackage-price:first").prev().text()),rate:encodeURIComponent(r(".payment-estimator-wrap .payment-summary .payment-SLRange:first").text()),gmfv:encodeURIComponent(r(".payment-estimator-wrap .payment-summary .payment-ROCGmfv:first").text()),finalPrice:encodeURIComponent(r(".payment-estimator-wrap .payment-summary .payment-BalloonAmount:first").text())};return r.param(e)}function o(){return document.location.protocol+"//"+document.location.hostname+":"+document.location.port}r(".save-btn-payment-estimator").on("click",function(e){s.getCreditPaymentEstimatorEvents().action("save"),a?window.open(o()+r("#png-url").text()+"?"+n(),"_blank"):window.location.href=o()+r("#pdf-url").text()+"?"+n()}),r(".print-btn-payment-estimator").on("click",function(e){s.getCreditPaymentEstimatorEvents().action("print"),window.open().location.href=o()+r("#pdf-url").text()+"?contentDisposition=inline&"+n()}),r(".mail-btn-payment-estimator").on("click",function(){var e=r("#mail-url").text()+r("#mail-identifier").text();s.getCreditPaymentEstimatorEvents().action("email"),r.get(e,{},function(e){try{e.userEmailBody||(e=JSON.parse(e)),window.location.href="mailto:?body="+(t=e.userEmailBody,a={"${vehicleNameplate}":r(".info-section > h4").text(),"${vehicleModel}":r(".info-section .form-dropdown .select2-container .select2-chosen").text(),"${pdfLink}":o()+r("#pdf-url").text()+"?"+n()},i=r("<temp></temp>").append(t).text().replace(/&nbsp;/g," "),Object.keys(a).forEach(function(e){i=i.replace(e,a[e])}),encodeURIComponent(i))}catch(e){}var t,a,i}).fail(function(e){})})},f.prototype.checkActiveSort=function(){var e;void 0!==r("#showroom-vehicle-card .dropdown-vehicle-sort")&&void 0!==(e=r(".dropdown-vehicle-sort li.active"))&&r(".dropdown-vehicle-sort label .by").text(e.find("> a").text())},f.prototype.asideOverlayFilters=function(){if(void 0!==r(".payment-estimator-wrap .overlay-aside .filter label")){for(var e=r(".payment-estimator-wrap .overlay-aside .filter label"),t=0;t<e.length;t++)if(r(e[t]).find("input").is(":checked")){r(e[t]).addClass("active");break}e.on("click",function(){r(this).closest(".labels").find("label.active").removeClass("active"),r(this).addClass("active")})}},f.prototype.asideOverlayMobileFilters=function(){if(void 0!==r(".payment-estimator-wrap .overlay-header-side .filter label")){for(var e=r(".payment-estimator-wrap .overlay-header-side .filter label"),t=0;t<e.length;t++)if(r(e[t]).find("input").is(":checked")){r(e[t]).addClass("active");break}e.on("click",function(){r(this).closest(".labels").find("label.active").removeClass("active"),r(this).addClass("active")})}},f.prototype.closeOverlayAside=function(){r(document.body).on("click",".payment-estimator-wrap .overlay-aside .close-aside-btn",function(){r("html").hasClass("rtl")?r(this).closest(".overlay-aside").hasClass("opened")?(r(this).animate({left:-37},500),r(this).closest(".overlay-aside").animate({marginRight:-(r(".payment-estimator-wrap .overlay-aside").innerWidth()+36)},500),r(this).closest(".overlay-aside").removeClass("opened"),r(this).removeClass("active")):(r(this).animate({left:-16},500),r(this).closest(".overlay-aside").animate({marginRight:-35},500),r(this).closest(".overlay-aside").addClass("opened"),r(this).addClass("active")):r(this).closest(".overlay-aside").hasClass("opened")?(r(this).animate({right:-37},500),r(this).closest(".overlay-aside").animate({marginLeft:-(r(".payment-estimator-wrap .overlay-aside").innerWidth()+36)},500),r(this).closest(".overlay-aside").removeClass("opened"),r(this).removeClass("active")):(r(this).animate({right:-16},500),r(this).closest(".overlay-aside").animate({marginLeft:-35},500),r(this).closest(".overlay-aside").addClass("opened"),r(this).addClass("active"))})},f.prototype.scrollToTopAfterClose=function(){r(document.body).on("click",".vehicle-card-grid .item .item-content",function(e){r("html, body").animate({scrollTop:0},500)})},f.prototype.init=function(){this.productToggleInfo(),this.bundleProductSlider(),this.equalHeightFinancialProducts(),this.initEvents(),this.checkActiveSort(),this.asideOverlayFilters(),this.asideOverlayMobileFilters(),this.closeOverlayAside(),this.scrollToTopAfterClose()},m.init=function(){new h.paymentEstimator;r(".payment-estimator-wrap").length&&r(".creditPaymentEstimator.section").each(function(e,t){i.bootstrap(t,["creditPaymentEstimator"])})},m}),define("credit-payment-estimator/component.creditPaymentEstimator.services",["credit-payment-estimator/component.creditPaymentEstimator.app","credit-payment-estimator/services/creditPaymentEstimator.service.workflowdata"],function(e,t){e.service("workFlowData",["$rootScope","$location",t])}),define("credit-payment-estimator/controllers/creditPaymentEstimator.controller.CompareFinancialOptions",["mediaQuery","analytics/analyticsEventLayer"],function(o,r){return function(e,i,t){var a,n=this;n.workFlowData=i.getWorkFlowData(),n.currencySymbol=angular.element("#vehicle-info-currency").text()||angular.element("#currencySymbol").val(),n.currencyFormat=angular.element("#currencyFormatPattern").val(),n.monthlyPaymentLabel=angular.element(document.querySelector("#monthly-payment-label")).text(),n.finalPaymentLabel=angular.element(document.querySelector("#final-payment-label")).text(),n.classHolder="",n.modelsList=[],n.ActiveIds=[],n.selectedModel=i.getWorkFlowData().selectedModel,n.RCOid=angular.element("#rco-id").text()?parseInt(angular.element("#rco-id").text()):3,n.halfToHalfProductID=angular.element("#50-50-pid").text()?parseInt(angular.element("#50-50-pid").text()):4,e.$watch("compareSelectedProgram",function(e,t){n.selectedProgramKey=e}),a="mobile"===o.getMediaType()?1:3,n.checkLength=function(){n.ActiveIds.length>a?angular.element(document.querySelector(".vehicle-item.hidden-attrs")).addClass("ng-hide"):angular.element(document.querySelector(".vehicle-item.ng-hide")).removeClass("ng-hide")},n.checkLength(),n.addNewModel=function(e){e.preventDefault();var t=!1,a=JSON.parse(JSON.stringify(i.getWorkFlowData().selectedModel));a.vehicleName=JSON.parse(JSON.stringify(i.getWorkFlowData().selectedVehicle)).name,i.getWorkFlowData().toggleFinalPayment?(a.paymentLabel=n.finalPaymentLabel,a.payment=a.amountFinanced):(a.paymentLabel=n.monthlyPaymentLabel,a.payment=a.monthlyPayment),a.SLRange=Math.round(a.downPayment/(a.transactionPrice+a.addonAmount)*100)+"%",_.each(n.modelsList,function(e){_.isEqual(e,a)&&(t=!0)}),t||(n.modelsList.push(a),n.ActiveIds.push(i.getWorkFlowData().selectedModel.vehicleAssetId),n.checkLength(),r.getCreditPaymentEstimatorEvents().action("compare plans","add"))},n.removeItem=function(e,t){e.preventDefault(),n.modelsList.splice(t,1),n.ActiveIds.splice(t,1),n.checkLength(),r.getCreditPaymentEstimatorEvents().action("compare plans","remove")}}}),define("credit-payment-estimator/controllers/creditPaymentEstimator.controller.financingPackage",["_","mediaQuery","analytics/analyticsEventLayer"],function(b,w,C){return function(t,e,a,l,i){var n,s,c=this,d=(c.serviceData=e.getWorkFlowData(),c.init=f,c.currencySymbol=String.fromCharCode(angular.element("#vehicle-info-currency").text())||angular.element("#currencySymbol").val(),angular.element(document.querySelector("#financing-package-period-uom")).text()),o=(c.monthlyPaymentLabel=angular.element(document.querySelector("#monthly-payment-label")).text(),c.finalPaymentLabel=angular.element(document.querySelector("#final-payment-label")).text(),c.currencyFormat=angular.element(document.querySelector("#vehicle-info-currency-format")).text(),c.selectedProgramName,c.fixedAmountFinanced=4e4,c.fixedTransactionPrice=5e4,12),r=Number(angular.element("#minDownpaymentRate").text())/100||0,u=(Number(angular.element("#maxDownpaymentRate").text()),c.fpErrorAmtfinancedMin=angular.element("#fp-error-amtfinanced-min").text(),c.fpErrorInvalidChar=angular.element("#fp-error-invalid-char").text(),c.fpErrorInvalidAddonChar=angular.element("#fp-error-invalid-addon-char").text(),c.fpErrorMsrpMin=angular.element("#fp-error-msrp-min").text(),c.fpErrorAmtfinancedMax=angular.element("#fp-error-amtfinanced-max").text(),c.fpErrorTspMax=angular.element("#fp-error-tsp-max").text(),c.fpErrorTspMin=angular.element("#fp-error-tsp-min").text(),c.fpErrorAoaMax=angular.element("#fp-error-aoa-max").text(),c.fpErrorAoaMin=angular.element("#fp-error-aoa-min").text(),c.fpErrorTspRCOMin=angular.element("#fp-error-tsp-rco-min").text(),c.fpErrorMsrpRCOMax=angular.element("#fp-error-msrp-roc-max").text(),c.fpErrorTspHalfMin=angular.element("#fp-error-tsp-half-min").text(),c.EWPickedNameArr=angular.element("#ew-picked-name").text().trim().split(";"),c.EWExtremeNameArr=angular.element("#ew-extreme-name").text().trim().split(";"),1),p=(c.defaultProductID=1,c.RCOid=angular.element("#rco-id").text()?parseInt(angular.element("#rco-id").text()):3,c.halfToHalfProductID=angular.element("#50-50-pid").text()?parseInt(angular.element("#50-50-pid").text()):4,"");function m(){t.payment.transactionPrice.$viewValue=a("currencyFormat")(c.serviceData.selectedModel.transactionPrice,c.currencySymbol,c.currencyFormat),t.payment.addonAmount.$viewValue=a("currencyFormat")(c.serviceData.selectedModel.addonAmount,c.currencySymbol,c.currencyFormat),t.payment.downPayment.$viewValue=a("currencyFormat")(c.serviceData.selectedModel.downPayment,c.currencySymbol,c.currencyFormat),t.payment.amountFinanced.$viewValue=a("currencyFormat")(c.serviceData.selectedModel.amountFinanced,c.currencySymbol,c.currencyFormat),t.payment.transactionPrice.$render(),t.payment.addonAmount.$render(),t.payment.downPayment.$render(),t.payment.amountFinanced.$render()}function h(){c.maxTransactionPrice=c.serviceData.selectedModel.price,c.minTransactionPrice=c.fixedTransactionPrice,c.maxAddonAmount=Math.min(Math.round(.15*c.serviceData.selectedModel.transactionPrice),5e4),c.minAddonAmount=0,c.maxAmoutnFinaced=Math.round(.8*c.serviceData.selectedModel.totalPrice),c.minDownPayment=c.serviceData.selectedModel.totalPrice-c.maxAmoutnFinaced,c.downPaymentSlider=c.minDownPayment,c.upperBound=c.serviceData.selectedModel.totalPrice-c.fixedAmountFinanced,c.step=Math.round(c.serviceData.selectedModel.totalPrice/100)}function f(e,t){if(t&&(angular.element(document.getElementsByClassName("is-active")).removeClass("is-active"),angular.element(t.currentTarget).addClass("is-active")),0!=c.serviceData.selectedModel.programs.length)for(var a=0;a<c.serviceData.selectedModel.programs.length;a++)parseInt(c.serviceData.selectedModel.programs[a].key)===u&&(s=c.serviceData.selectedModel.programs[a].name);else s="";var i=e||s;if(c.selectedProgramName=i,v(!1),c.serviceData.toggleFinalPayment=!1,c.serviceData.selectedModel.balloonAmount=0,c.sectionSetup={prevDownPayment:"",selectedTerm:"",selectedWarrantyPackage:"",selectedProgram:"",selectedProgramProduct:"",availableEwPackages:"",availableTerms:"",availablePrograms:[],isInputDisabled:!1},c.serviceData.selectedModel.price?(c.serviceData.selectedModel.price=Math.round(c.serviceData.selectedModel.price),c.serviceData.selectedModel.transactionPrice=c.serviceData.selectedModel.price,c.serviceData.selectedModel.addonAmount=0,c.serviceData.selectedModel.totalPrice=c.serviceData.selectedModel.transactionPrice+c.serviceData.selectedModel.addonAmount):c.serviceData.selectedModel.price=0,c.serviceData.selectedModel.amountFinanced=Math.round(.8*Math.min(c.serviceData.selectedModel.price,c.serviceData.selectedModel.totalPrice)),c.serviceData.selectedModel.downPayment=c.serviceData.selectedModel.totalPrice-c.serviceData.selectedModel.amountFinanced,h(),c.availablePrograms=b.chain(c.serviceData.selectedModel.programs).pluck("name").unique().value(),c.sectionSetup.availablePrograms=c.availablePrograms,c.serviceData.selectedModel.programs){for(a=0;a<c.serviceData.selectedModel.programs.length;a++)c.serviceData.selectedModel.programs[a].name===i&&(c.sectionSetup.selectedProgram=c.serviceData.selectedModel.programs[a],angular.element(document.getElementById("select2-chosen-3")).text(c.sectionSetup.selectedProgram.name));c.sectionSetup.selectedProgram||(c.sectionSetup.selectedProgram=c.serviceData.selectedModel.programs.length?c.serviceData.selectedModel.programs[0]:null,angular.element(document.getElementById("select2-chosen-3")).text(c.sectionSetup.selectedProgram?c.sectionSetup.selectedProgram.name:"name default"))}if(null!=c.sectionSetup.selectedProgram&&c.sectionSetup.selectedProgram.products){for(var n,a=0;a<c.sectionSetup.selectedProgram.products.length;a++)parseInt(c.sectionSetup.selectedProgram.products[a].key)===c.defaultProductID&&(c.sectionSetup.selectedProgramProduct=c.sectionSetup.selectedProgram.products[a],(n=b.uniq(c.sectionSetup.selectedProgramProduct.terms,function(e,t,a){return e.ewPackage.name})).length)&&(c.sectionSetup.availableEwPackages=n.map(function(e){return e.ewPackage.name}),c.sectionSetup.selectedWarrantyPackage=c.sectionSetup.availableEwPackages[0],p=c.sectionSetup.availableEwPackages[0]);c.sectionSetup.selectedProgramProduct||(c.sectionSetup.selectedProgramProduct=c.sectionSetup.selectedProgram.products[0],c.sectionSetup.availableEwPackages="",c.sectionSetup.selectedWarrantyPackage="",parseInt(c.sectionSetup.selectedProgram.key)===c.halfToHalfProductID&&(c.sectionSetup.isInputDisabled=!0,c.sectionSetup.prevDownPayment=c.serviceData.selectedModel.downPayment,c.serviceData.selectedModel.amountFinanced=Math.round(.5*c.serviceData.selectedModel.totalPrice),c.serviceData.selectedModel.downPayment=c.serviceData.selectedModel.totalPrice-c.serviceData.selectedModel.amountFinanced,c.downPaymentSlider=c.serviceData.selectedModel.downPayment,v(!0))),parseInt(c.sectionSetup.selectedProgram.key)===c.halfToHalfProductID&&(c.sectionSetup.isInputDisabled=!0,c.sectionSetup.prevDownPayment=c.serviceData.selectedModel.downPayment,c.serviceData.selectedModel.amountFinanced=Math.round(.5*c.serviceData.selectedModel.totalPrice),c.serviceData.selectedModel.downPayment=c.serviceData.selectedModel.totalPrice-c.serviceData.selectedModel.amountFinanced,c.downPaymentSlider=c.serviceData.selectedModel.downPayment,v(!0))}if(c.sectionSetup.selectedWarrantyPackage&&-1<c.EWPickedNameArr.indexOf(c.sectionSetup.selectedWarrantyPackage)?($(".ewExtremeIntro").hide(),$(".ewPickedIntro").show()):c.sectionSetup.selectedWarrantyPackage&&-1<c.EWExtremeNameArr.indexOf(c.sectionSetup.selectedWarrantyPackage)?($(".ewPickedIntro").hide(),$(".ewExtremeIntro").show()):($(".ewPickedIntro").hide(),$(".ewExtremeIntro").hide()),c.sectionSetup.selectedWarrantyPackage?(angular.element(document.getElementById("select2-chosen-5")).text(c.sectionSetup.selectedWarrantyPackage),c.sectionSetup.availableTerms=c.sectionSetup.selectedProgramProduct.terms.filter(function(e){if(e.ewPackage.name===c.sectionSetup.selectedWarrantyPackage)return!0})):(angular.element(document.getElementById("select2-chosen-5")).text(""),c.sectionSetup.availableTerms=c.sectionSetup.selectedProgramProduct.terms),c.sectionSetup.availableTerms){for(a=0;a<c.sectionSetup.availableTerms.length;a++)c.sectionSetup.availableTerms[a].isDefault&&(c.sectionSetup.selectedTerm=c.sectionSetup.availableTerms[a].term,c.sectionSetup.selectedProgramProduct.selectedTerm=c.sectionSetup.availableTerms[a],angular.element(document.getElementById("select2-chosen-7")).text(c.sectionSetup.selectedTerm+d));c.sectionSetup.selectedTerm||(c.sectionSetup.selectedTerm=c.sectionSetup.availableTerms[0].term,c.sectionSetup.selectedProgramProduct.selectedTerm=c.sectionSetup.availableTerms[0],angular.element(document.getElementById("select2-chosen-7")).text(c.sectionSetup.selectedTerm+d))}c.sectionSetup.selectedProgramProduct.selectedTerm&&(c.serviceData.selectedModel.gmfv=c.sectionSetup.selectedProgramProduct.selectedTerm.GMFV),"mobile"===w.getMediaType()?$($("li.accordion-item")[0]).find(".pe-financing-package").length||($($("li.accordion-item")[0]).find(".accordion-content").append($(".pe-financing-package")),$($("li.accordion-item")[0]).show()):$($("li.accordion-item")[0]).hide(),l(m,0),$(".productDescription .creditProductDescription").css("display","none");$(".productDescription .creditProductDescriptionHtml").each(function(){""===$.trim($(this).html())&&(o=$(this).attr("data-credit-product-description"),$(this).html(o))}),i&&(c.sectionSetup.selectedProgram.name===i&&$("#programId"+c.sectionSetup.selectedProgram.key).css("display","block"),parseInt(c.sectionSetup.selectedProgram.key)===c.RCOid?c.serviceData.selectedModel.gmfv&&4e4<c.serviceData.selectedModel.gmfv&&(c.fixedAmountFinanced=Number(c.serviceData.selectedModel.gmfv),c.fixedTransactionPrice=Math.round(c.serviceData.selectedModel.gmfv/.8)):parseInt(c.sectionSetup.selectedProgram.key)===c.halfToHalfProductID?c.fixedTransactionPrice=8e4:(c.fixedAmountFinanced=4e4,c.fixedTransactionPrice=5e4),$("#SummaryselectedProgram").val(c.sectionSetup.selectedProgram.key),$("#CompareSelectedProgram").val(c.sectionSetup.selectedProgram.key));var o,r=$(".accordion-body").eq(0);r.hasClass("active")&&setTimeout(function(){var e=r.children(".accordion-content").height()+"px";r.css("height",e)},0),$(".ewIntroduction-body").click(function(e){(e=e||windows.event).stopPropagation?e.stopPropagation():e.cancelBubble=!0}),h(),y(),c.onDownPaymentBlur(),setTimeout(function(){var e=$(".form-range-slider .rs-txt").text();$(".ui-slider-handle").css("left",e)},300)}function g(){for(var e=0;e<c.sectionSetup.selectedProgram.products.length;e++)c.sectionSetup.selectedProgram&&parseInt(c.sectionSetup.selectedProgram.products[e].key)!==c.halfToHalfProductID&&(c.sectionSetup.selectedProgram.products[e].monthlyPayment="NA");c.sectionSetup.selectedProgramProduct.monthlyPayment="NA",c.serviceData.selectedModel.monthlyPayment="NA"}function v(e){c.serviceData.toggleFinalPayment=!!e}function y(){var e;if(null!=c.sectionSetup.selectedProgram){for(var t=0;t<c.sectionSetup.selectedProgram.products.length;t++)(e=c.sectionSetup.selectedProgram.products[t].name===c.sectionSetup.selectedProgramProduct.name?c.sectionSetup.selectedProgramProduct.selectedTerm:c.sectionSetup.selectedProgram.products[t].terms.filter(function(e){if(e.ewPackage){if(e.ewPackage.name===p&&e.isDefault)return c.sectionSetup.selectedProgram.products[t].selectedTerm=e,!0}else if(e.isDefault)return c.sectionSetup.selectedProgram.products[t].selectedTerm=e,!0})[0])||(e=c.sectionSetup.selectedProgram.products[t].terms[0],c.sectionSetup.selectedProgram.products[t].selectedTerm=c.sectionSetup.selectedProgram.products[t].terms[0]),parseInt(c.sectionSetup.selectedProgram.key)===c.RCOid?0!=e.customerRate&&e.customerRate?c.sectionSetup.selectedProgram.products[t].monthlyPayment=(c.serviceData.selectedModel.amountFinanced-Number(e.GMFV)/Math.pow(1+e.customerRate/1200,Number(e.term)))*(e.customerRate/1200*Math.pow(1+e.customerRate/1200,Number(e.term)-1)/(Math.pow(1+e.customerRate/1200,Number(e.term)-1)-1)):c.sectionSetup.selectedProgram.products[t].monthlyPayment=(c.serviceData.selectedModel.amountFinanced-Number(e.GMFV))/(e.term-1):parseInt(c.sectionSetup.selectedProgram.key)===c.halfToHalfProductID?(c.sectionSetup.prevDownPayment=c.serviceData.selectedModel.downPayment,c.serviceData.selectedModel.amountFinanced=Math.round(.5*c.serviceData.selectedModel.totalPrice),c.serviceData.selectedModel.downPayment=c.serviceData.selectedModel.totalPrice-c.serviceData.selectedModel.amountFinanced,c.downPaymentSlider=c.serviceData.selectedModel.downPayment,c.serviceData.selectedModel.balloonAmount=c.serviceData.selectedModel.amountFinanced,v(!0),c.sectionSetup.selectedProgram.products[t].monthlyPayment=c.serviceData.selectedModel.amountFinanced):0!=e.customerRate&&e.customerRate?c.sectionSetup.selectedProgram.products[t].monthlyPayment=c.serviceData.selectedModel.amountFinanced*(e.customerRate/1200*Math.pow(1+e.customerRate/1200,Number(e.term))/(Math.pow(1+e.customerRate/1200,Number(e.term))-1)):c.sectionSetup.selectedProgram.products[t].monthlyPayment=c.serviceData.selectedModel.amountFinanced/e.term,c.serviceData.selectedModel.price?c.sectionSetup.selectedProgram.products[t].monthlyPayment=Math.round(c.sectionSetup.selectedProgram.products[t].monthlyPayment):c.sectionSetup.selectedProgram.products[t].monthlyPayment="NA";c.serviceData.selectedModel.monthlyPayment=c.sectionSetup.selectedProgramProduct.monthlyPayment,c.serviceData.selectedModel.term=void 0!==c.sectionSetup.selectedProgramProduct.selectedTerm?c.sectionSetup.selectedProgramProduct.selectedTerm.term:o,c.serviceData.selectedModel.financeProgram=c.sectionSetup.selectedProgram.name,c.serviceData.selectedModel.financePackage=c.sectionSetup.selectedProgramProduct.name,c.sectionSetup.selectedProgramProduct.selectedTerm.ewPackage?(c.serviceData.selectedModel.ewPackage=c.sectionSetup.selectedProgramProduct.selectedTerm.ewPackage.name,c.serviceData.selectedModel.ewPackagePrice=c.sectionSetup.selectedProgramProduct.selectedTerm.ewPackage.price):(c.serviceData.selectedModel.ewPackage=void 0,c.serviceData.selectedModel.ewPackagePrice=void 0)}}t.$on("update-currency",function(){m()}),c.changeEwPackage=function(){var t=!1,e=(void 0!==c.sectionSetup.selectedProgramProduct&&""!=c.sectionSetup.selectedProgramProduct&&(c.sectionSetup.availableTerms=c.sectionSetup.selectedProgramProduct.terms.filter(function(e){if(e.ewPackage.name===c.sectionSetup.selectedWarrantyPackage)return e.isDefault&&(t=!0,c.sectionSetup.selectedTerm=e.term,c.sectionSetup.selectedProgramProduct.selectedTerm=e,angular.element(document.getElementById("select2-chosen-7")).text(c.sectionSetup.selectedTerm+d)),!0})),t||c.sectionSetup.availableTerms&&0<c.sectionSetup.availableTerms.length&&(c.sectionSetup.selectedTerm=c.sectionSetup.availableTerms[0].term,c.sectionSetup.selectedProgramProduct.selectedTerm=c.sectionSetup.availableTerms[0],angular.element(document.getElementById("select2-chosen-7")).text(c.sectionSetup.selectedTerm+d)),C.getCreditPaymentEstimatorEvents().action("ext warranty",c.sectionSetup.selectedTerm),y(),c.sectionSetup.selectedWarrantyPackage&&-1<c.EWPickedNameArr.indexOf(c.sectionSetup.selectedWarrantyPackage)?($(".ewExtremeIntro").hide(),$(".ewPickedIntro").show()):c.sectionSetup.selectedWarrantyPackage&&-1<c.EWExtremeNameArr.indexOf(c.sectionSetup.selectedWarrantyPackage)?($(".ewPickedIntro").hide(),$(".ewExtremeIntro").show()):($(".ewPickedIntro").hide(),$(".ewExtremeIntro").hide()),$(".accordion-item.active"));e.find(".accordion-body").css("height","0px"),e.find(".accordion-body").removeClass("active"),e.find(".accordion-title").removeClass("active"),e.removeClass("active")},c.changeTransactionPrice=function(e){(Number(e)>=c.fixedTransactionPrice&&Number(e)<=c.serviceData.selectedModel.price&&""!=e?(c.serviceData.selectedModel.transactionPrice=parseInt(e),c.serviceData.selectedModel.totalPrice=c.serviceData.selectedModel.transactionPrice+c.serviceData.selectedModel.addonAmount,c.serviceData.selectedModel.amountFinanced=Math.round(.8*Math.min(c.serviceData.selectedModel.price,c.serviceData.selectedModel.totalPrice)),c.serviceData.selectedModel.downPayment=c.serviceData.selectedModel.totalPrice-c.serviceData.selectedModel.amountFinanced,h(),y):g)(),l(function(){a("currencyFormat")(c.serviceData.selectedModel.amountFinanced,c.currencySymbol,c.currencyFormat),t.payment.amountFinanced.$viewValue=a("currencyFormat")(c.serviceData.selectedModel.amountFinanced,c.currencySymbol,c.currencyFormat),t.payment.amountFinanced.$render(),t.payment.downPayment.$viewValue=a("currencyFormat")(c.serviceData.selectedModel.downPayment,c.currencySymbol,c.currencyFormat),t.payment.downPayment.$render(),t.payment.addonAmount.$viewValue=a("currencyFormat")(c.serviceData.selectedModel.addonAmount,c.currencySymbol,c.currencyFormat),t.payment.addonAmount.$render()},0)},c.changeAddonAmount=function(e){(0<=Number(e)&&Number(e)<=Math.min(Math.round(.15*c.serviceData.selectedModel.transactionPrice),5e4)&&""!=e?(c.serviceData.selectedModel.addonAmount=parseInt(e),c.serviceData.selectedModel.totalPrice=c.serviceData.selectedModel.transactionPrice+c.serviceData.selectedModel.addonAmount,c.serviceData.selectedModel.amountFinanced=Math.round(.8*Math.min(c.serviceData.selectedModel.price,c.serviceData.selectedModel.totalPrice)),c.serviceData.selectedModel.downPayment=c.serviceData.selectedModel.totalPrice-c.serviceData.selectedModel.amountFinanced,h(),y):g)(),l(function(){a("currencyFormat")(c.serviceData.selectedModel.amountFinanced,c.currencySymbol,c.currencyFormat),t.payment.amountFinanced.$viewValue=a("currencyFormat")(c.serviceData.selectedModel.amountFinanced,c.currencySymbol,c.currencyFormat),t.payment.amountFinanced.$render(),t.payment.downPayment.$viewValue=a("currencyFormat")(c.serviceData.selectedModel.downPayment,c.currencySymbol,c.currencyFormat),t.payment.downPayment.$render(),t.payment.transactionPrice.$viewValue=a("currencyFormat")(c.serviceData.selectedModel.transactionPrice,c.currencySymbol,c.currencyFormat),t.payment.transactionPrice.$render()},0)},c.changeDownPayment=function(e){(Number(e)>=c.minDownPayment&&c.serviceData.selectedModel.totalPrice-Number(e)>=c.fixedAmountFinanced&&""!=e?(c.serviceData.selectedModel.downPayment=parseInt(e),c.downPaymentSlider=c.serviceData.selectedModel.downPayment,c.serviceData.selectedModel.amountFinanced=c.serviceData.selectedModel.totalPrice-c.serviceData.selectedModel.downPayment,y):(c.serviceData.selectedModel.totalPrice-Number(e)<c.fixedAmountFinanced&&(c.serviceData.selectedModel.amountFinanced=c.fixedAmountFinanced),g))(),l(function(){a("currencyFormat")(c.serviceData.selectedModel.amountFinanced,c.currencySymbol,c.currencyFormat),t.payment.amountFinanced.$viewValue=a("currencyFormat")(c.serviceData.selectedModel.amountFinanced,c.currencySymbol,c.currencyFormat),t.payment.amountFinanced.$render()},0)},c.changeAmountFinanced=function(e){(Number(e)<=Math.round(c.serviceData.selectedModel.totalPrice*(1-r))&&Number(e)>=c.fixedAmountFinanced?(c.serviceData.selectedModel.amountFinanced=parseInt(e),c.serviceData.selectedModel.downPayment=c.serviceData.selectedModel.totalPrice-c.serviceData.selectedModel.amountFinanced,c.downPaymentSlider=c.serviceData.selectedModel.downPayment,y):(Number(e)<c.fixedAmountFinanced&&(c.serviceData.selectedModel.downPayment=c.serviceData.selectedModel.totalPrice-c.fixedAmountFinanced),g))(),l(function(){t.payment.downPayment.$viewValue=a("currencyFormat")(c.serviceData.selectedModel.downPayment,c.currencySymbol,c.currencyFormat),t.payment.downPayment.$render(),t.payment.transactionPrice.$viewValue=a("currencyFormat")(c.serviceData.selectedModel.transactionPrice,c.currencySymbol,c.currencyFormat),t.payment.transactionPrice.$render(),t.payment.addonAmount.$viewValue=a("currencyFormat")(c.serviceData.selectedModel.addonAmount,c.currencySymbol,c.currencyFormat),t.payment.addonAmount.$render()},0)},c.onTransactionPriceBlur=function(){c.serviceData.selectedModel.transactionPrice<c.fixedTransactionPrice||c.serviceData.selectedModel.transactionPrice>c.serviceData.selectedModel.price||"string"==typeof c.serviceData.selectedModel.transactionPrice?(c.serviceData.selectedModel.transactionPrice=c.serviceData.selectedModel.price,(c.serviceData.selectedModel.addonAmount<0||c.serviceData.selectedModel.addonAmount>Math.min(Math.round(.15*c.serviceData.selectedModel.transactionPrice),5e4)||"string"==typeof c.serviceData.selectedModel.addonAmount)&&(c.serviceData.selectedModel.addonAmount=Math.min(Math.round(.15*c.serviceData.selectedModel.transactionPrice),5e4),c.serviceData.selectedModel.totalPrice=c.serviceData.selectedModel.transactionPrice+c.serviceData.selectedModel.addonAmount,c.serviceData.selectedModel.amountFinanced=Math.round(.8*Math.min(c.serviceData.selectedModel.price,c.serviceData.selectedModel.totalPrice)),c.serviceData.selectedModel.downPayment=c.serviceData.selectedModel.totalPrice-c.serviceData.selectedModel.amountFinanced),c.changeTransactionPrice(c.serviceData.selectedModel.transactionPrice),h(),y()):(c.serviceData.selectedModel.addonAmount<0||c.serviceData.selectedModel.addonAmount>Math.min(Math.round(.15*c.serviceData.selectedModel.transactionPrice),5e4)||"string"==typeof c.serviceData.selectedModel.addonAmount)&&(c.serviceData.selectedModel.addonAmount=Math.min(Math.round(.15*c.serviceData.selectedModel.transactionPrice),5e4),c.serviceData.selectedModel.totalPrice=c.serviceData.selectedModel.transactionPrice+c.serviceData.selectedModel.addonAmount,c.serviceData.selectedModel.amountFinanced=Math.round(.8*Math.min(c.serviceData.selectedModel.price,c.serviceData.selectedModel.totalPrice)),c.serviceData.selectedModel.downPayment=c.serviceData.selectedModel.totalPrice-c.serviceData.selectedModel.amountFinanced,h(),y()),t.payment.transactionPrice.$setValidity("maxPayment",!0),t.payment.transactionPrice.$setValidity("minPayment",!0),t.payment.transactionPrice.$setValidity("characterValidator",!0),l(m,0),C&&C.getCreditPaymentEstimatorEvents().action("change transaction price")},c.onAddonAmountBlur=function(){(c.serviceData.selectedModel.addonAmount<0||c.serviceData.selectedModel.addonAmount>Math.min(Math.round(.15*c.serviceData.selectedModel.transactionPrice),5e4)||"string"==typeof c.serviceData.selectedModel.addonAmount)&&(c.serviceData.selectedModel.addonAmount=Math.min(Math.round(.15*c.serviceData.selectedModel.transactionPrice),5e4),c.changeAddonAmount(c.serviceData.selectedModel.addonAmount),h(),y()),t.payment.addonAmount.$setValidity("maxPayment",!0),t.payment.addonAmount.$setValidity("minPayment",!0),t.payment.addonAmount.$setValidity("characterValidator",!0),l(m,0),C&&C.getCreditPaymentEstimatorEvents().action("change add-on amount")},c.onDownPaymentBlur=function(){(c.serviceData.selectedModel.downPayment<c.minDownPayment||c.serviceData.selectedModel.totalPrice-c.serviceData.selectedModel.downPayment<c.fixedAmountFinanced||"string"==typeof c.serviceData.selectedModel.downPayment)&&(c.serviceData.selectedModel.totalPrice-c.serviceData.selectedModel.downPayment<c.fixedAmountFinanced?c.serviceData.selectedModel.downPayment=c.serviceData.selectedModel.totalPrice-c.serviceData.selectedModel.amountFinanced:c.serviceData.selectedModel.downPayment=c.minDownPayment,c.downPaymentSlider=c.serviceData.selectedModel.downPayment,c.changeDownPayment(c.serviceData.selectedModel.downPayment),y()),t.payment.downPayment.$setValidity("maxPayment",!0),t.payment.downPayment.$setValidity("minPayment",!0),t.payment.downPayment.$setValidity("characterValidator",!0),l(m,0),C&&C.getCreditPaymentEstimatorEvents().action("change down payment")},c.onAmountFinancedBlur=function(){(c.serviceData.selectedModel.amountFinanced>Math.round(c.serviceData.selectedModel.totalPrice*(1-r))||"string"==typeof c.serviceData.selectedModel.amountFinanced)&&(c.serviceData.selectedModel.amountFinanced>Math.round(c.serviceData.selectedModel.totalPrice*(1-r))&&(c.serviceData.selectedModel.downPayment=n),c.serviceData.selectedModel.amountFinanced=c.serviceData.selectedModel.totalPrice-c.serviceData.selectedModel.downPayment,c.downPaymentSlider=c.serviceData.selectedModel.downPayment,y()),isNaN(Number(c.serviceData.selectedModel.amountFinanced))||(n=c.serviceData.selectedModel.downPayment),t.payment.amountFinanced.$setValidity("maxPayment",!0),t.payment.amountFinanced.$setValidity("minPayment",!0),t.payment.amountFinanced.$setValidity("characterValidator",!0),l(m,0)},c.onTransactionPriceFocus=function(){l(function(){t.payment.transactionPrice.$viewValue=c.serviceData.selectedModel.transactionPrice,t.payment.transactionPrice.$render()},100)},c.onAddonAmountFocus=function(){l(function(){t.payment.addonAmount.$viewValue=c.serviceData.selectedModel.addonAmount,t.payment.addonAmount.$render()},100)},c.onDownPaymentFocus=function(){l(function(){t.payment.downPayment.$viewValue=c.serviceData.selectedModel.downPayment,t.payment.downPayment.$render()},100)},c.onAmountFinancedFocus=function(){l(function(){n=c.serviceData.selectedModel.downPayment,t.payment.amountFinanced.$viewValue=c.serviceData.selectedModel.amountFinanced,t.payment.amountFinanced.$render()},100)},c.changeTerm=function(){void 0!==c.sectionSetup.availableTerms&&(c.sectionSetup.selectedProgramProduct.selectedTerm=c.sectionSetup.availableTerms.filter(function(e){if(e.term==c.sectionSetup.selectedTerm)return c.sectionSetup.selectedProgramProduct.selectedTerm=e,c.serviceData.selectedModel.gmfv=c.sectionSetup.selectedProgramProduct.selectedTerm.GMFV,C.getCreditPaymentEstimatorEvents().action("change terms",e.term),parseInt(c.sectionSetup.selectedProgram.key)===c.RCOid?c.serviceData.selectedModel.gmfv&&4e4<c.serviceData.selectedModel.gmfv&&(c.fixedAmountFinanced=Number(c.serviceData.selectedModel.gmfv),c.fixedTransactionPrice=Math.round(c.serviceData.selectedModel.gmfv/.8)):(c.fixedAmountFinanced=4e4,c.fixedTransactionPrice=5e4),e=c.downPaymentSlider,h(),c.downPaymentSlider=e,c.onTransactionPriceBlur(),c.onDownPaymentBlur(),y(),!0})[0]),l(c.onDownPaymentBlur,0)},c.changeProducts=function(t,e){if(v(!1),t!==c.sectionSetup.selectedProgramProduct.name){c.sectionSetup.selectedTerm="",angular.element(document.getElementsByClassName("open-info")).removeClass("open-info"),angular.element(e.currentTarget).addClass("open-info"),c.sectionSetup.selectedProgramProduct=c.sectionSetup.selectedProgram.products.filter(function(e){if(e.name===t)return!0})[0],!c.sectionSetup.prevDownPayment&&0!==c.sectionSetup.prevDownPayment||(c.serviceData.selectedModel.downPayment=c.sectionSetup.prevDownPayment,c.serviceData.selectedModel.amountFinanced=c.serviceData.selectedModel.totalPrice-c.serviceData.selectedModel.downPayment,c.downPaymentSlider=c.serviceData.selectedModel.downPayment,c.sectionSetup.prevDownPayment=void 0),c.sectionSetup.selectedProgramProduct&&parseInt(c.sectionSetup.selectedProgramProduct.key)===c.defaultProductID?(c.sectionSetup.isInputDisabled=!1,e=b.uniq(c.sectionSetup.selectedProgramProduct.terms,function(e,t,a){return e.ewPackage.name}),c.sectionSetup.availableEwPackages=e.map(function(e){return e.ewPackage.name}),c.sectionSetup.selectedWarrantyPackage=c.sectionSetup.availableEwPackages[0],angular.element(document.getElementById("select2-chosen-5")).text(c.sectionSetup.selectedWarrantyPackage),c.sectionSetup.availableTerms=c.sectionSetup.selectedProgramProduct.terms.filter(function(e){if(e.ewPackage.name===c.sectionSetup.selectedWarrantyPackage)return!0})):(c.sectionSetup.isInputDisabled=!1,c.sectionSetup.selectedWarrantyPackage=null,c.sectionSetup.availableTerms=c.sectionSetup.selectedProgramProduct.terms,angular.element(document.getElementById("select2-chosen-5")).text(""),$(".ewPickedIntro").hide(),$(".ewExtremeIntro").hide(),c.sectionSetup.availableEwPackages=[]);for(var a=0;a<c.sectionSetup.availableTerms.length;a++)c.sectionSetup.availableTerms[a].isDefault&&(c.sectionSetup.selectedTerm=c.sectionSetup.availableTerms[a].term,c.sectionSetup.selectedProgramProduct.selectedTerm=c.sectionSetup.availableTerms[a],angular.element(document.getElementById("select2-chosen-7")).text(c.sectionSetup.selectedTerm+d));c.sectionSetup.selectedTerm||(c.sectionSetup.selectedTerm=c.sectionSetup.availableTerms[0].term,c.sectionSetup.selectedProgramProduct.selectedTerm=c.sectionSetup.availableTerms[0],angular.element(document.getElementById("select2-chosen-7")).text(c.sectionSetup.selectedTerm+d)),y(),l(m,0),c.sectionSetup.selectedWarrantyPackage&&-1<c.EWPickedNameArr.indexOf(c.sectionSetup.selectedWarrantyPackage)?($(".ewExtremeIntro").hide(),$(".ewPickedIntro").show()):c.sectionSetup.selectedWarrantyPackage&&-1<c.EWExtremeNameArr.indexOf(c.sectionSetup.selectedWarrantyPackage)?($(".ewPickedIntro").hide(),$(".ewExtremeIntro").show()):($(".ewPickedIntro").hide(),$(".ewExtremeIntro").hide())}l(function(){$(".accordion-body.active").find(".payment-summary").length&&$(".accordion-body.active").height($(".accordion-body.active").find(".accordion-content").height())},0,!1)},c.showEWIntro=function(e){var t;if(-1<this.EWPickedNameArr.indexOf(e)&&!$(".ewPickedIntro").hasClass("active"))t=$(".ewPickedIntro");else{if(!(-1<this.EWExtremeNameArr.indexOf(e))||$(".ewExtremeIntro").hasClass("active"))return!1;t=$(".ewExtremeIntro")}e=t.find(".accordion-body .accordion-content").height()+"px",t.addClass("active"),t.find(".accordion-title").addClass("active"),t.find(".accordion-body").addClass("active"),t.find(".accordion-body").css("height",e),scrollTo(0,t.offset().top-$(".secondaryNavigation").height())},t.$watch(function(e){return e.ctrl.downPaymentSlider},function(e,t){var a;void 0!==e&&((e>=c.serviceData.selectedModel.totalPrice-c.fixedAmountFinanced?(a=c.serviceData.selectedModel.totalPrice-c.fixedAmountFinanced,c.changeDownPayment(a),m):e<=c.minDownPayment?(a=c.minDownPayment,c.changeDownPayment(a),m):(50==(e/c.serviceData.selectedModel.totalPrice*100).toFixed()&&(e=Math.ceil(c.serviceData.selectedModel.totalPrice/2)),c.serviceData.selectedModel.downPayment=e,c.serviceData.selectedModel.amountFinanced=c.serviceData.selectedModel.totalPrice-c.serviceData.selectedModel.downPayment,y))(),setTimeout(function(){var e=$(".form-range-slider .rs-txt").text();$(".ui-slider-handle").css("left",e)},300))}),angular.element(i).on("resize",b.throttle(function(){"mobile"===w.getMediaType()?$($("li.accordion-item")[0]).find(".pe-financing-package").length||t.$apply(function(){$($("li.accordion-item")[0]).find(".accordion-content").append($(".pe-financing-package")),$($("li.accordion-item")[0]).show()}):$(".payment-estimator-wrap").children(".pe-financing-package").length||t.$apply(function(){$(".pe-vehicle-info").after($(".pe-financing-package")),$($("li.accordion-item")[0]).hide()})},100)),e=t.$on("initComplete",function(e){t.$apply(function(){f()})}),t.$on("$destroy",e)}}),define("credit-payment-estimator/controllers/creditPaymentEstimator.controller.main",["analytics/analyticsEventLayer"],function(o){return function(e,t,a){var i=!1,n=!1;o&&o.getCreditPaymentEstimatorEvents().action("view offers"),this.accordionClick=function(e){if(o)switch(String(e)){case"payment-details":i||(i=!0,o.getCreditPaymentEstimatorEvents().action("payment details"));break;case"compare-plans":n||(n=!0,o.getCreditPaymentEstimatorEvents().action("compare plans"))}},this.introClick=function(e){var t=(e=e||window.event).currentTarget?$(e.currentTarget):"LI"==(t=e.target||e.srcElement).tagName?t:$(t).parents("li").eq(0),a=t.find(".accordion-body .accordion-content").height()+"px";t.find(".accordion-title").hasClass("active")?(t.find(".accordion-body").css("height","0px"),t.find(".accordion-body").removeClass("active"),t.find(".accordion-title").removeClass("active"),t.removeClass("active")):(t.addClass("active"),t.find(".accordion-title").addClass("active"),t.find(".accordion-body").addClass("active"),t.find(".accordion-body").css("height",a)),e.stopPropagation()}}}),define("credit-payment-estimator/controllers/creditPaymentEstimator.controller.productDescription",["analytics/analyticsEventLayer"],function(e){return function(e,t,a){this.workFlowData=t.getWorkFlowData(),this.productDescriptionList=JSON.parse($(".productDescription").attr("data-product-description-json"))}}),define("credit-payment-estimator/controllers/creditPaymentEstimator.controller.summaryList",[],function(){return function(e,t){var a=this;a.serviceData=t.getWorkFlowData(),a.currencySymbol=angular.element("#vehicle-info-currency").text()||angular.element("#currencySymbol").val(),a.currencyFormat=angular.element("#currencyFormatPattern").val(),a.monthlyPaymentLabel=angular.element(document.querySelector("#monthly-payment-label")).text(),a.finalPaymentLabel=angular.element(document.querySelector("#final-payment-label")).text(),e.$watch("summaryselectedProgram",function(e,t){a.selectedProgramKey=e})}}),define("credit-payment-estimator/controllers/creditPaymentEstimator.controller.vehicleInfo",["analytics/analyticsEventLayer"],function(n){return function(a,t,e){var i=this;i.currencySymbol=angular.element("#vehicle-info-currency").text()||angular.element("#currencySymbol").val(),i.currencyFormat=angular.element("#currencyFormatPattern").val(),i.showOverlay=!1,i.workFlowData=t.getWorkFlowData(),i.selectedVehicle=t.getWorkFlowData().selectedVehicle,i.selectedModel=t.getWorkFlowData().selectedModel,i.buildAndPrice=!!t.getWorkFlowData().buildAndPrice&&t.getWorkFlowData().buildAndPrice,i.showConfirmationOverlay=!1,setTimeout(function(){$("#select-models").find("option").each(function(e){$(this).text()==i.selectedModel.name&&(e=Number(e)-1,i.currentModel=e,$("#select-models").select2("val","number:"+String(e)).change())})},100),i.vehicleList=i.workFlowData.vehicleList.map(function(e){if(e&&e.category)switch(e.category.toUpperCase()){case"轿车":e.categoryOrder=1;break;case"SUV":e.categoryOrder=2;break;case"性能车":e.categoryOrder=3;break;case"商用车":e.categoryOrder=4}return e}),i.vehicleList=e("orderBy")(i.workFlowData.vehicleList,"categoryOrder"),i.vehicleDefList=i.workFlowData.vehicleDefList,i.sortByCategory=!0,i.showLoader=t.showLoader,i.currentKeyModel=i.selectedModel.key,i.filterSort="",i.filterByYear="",i.analyticsName=t.getWorkFlowData().selectedVehicle.analyticsName,this.selectedCategory="",fordAnalytics&&(fordAnalytics.onclick={nameplate:i.selectedVehicle.analyticsName,modelYear:i.selectedVehicle.year}),i.openConfirmOverlay=function(){i.showConfirmationOverlay=!0,angular.element(document.querySelector("html")).addClass("is-overlay-open"),n.getCreditPaymentEstimatorEvents().action("change vehicle","bnp")},i.closeConfirmOverlay=function(){i.showConfirmationOverlay=!1,angular.element(document.querySelector("html")).removeClass("is-overlay-open")},i.openOverlay=function(){i.showOverlay=!0,angular.element(document.querySelector(".payment-estimator-wrap")).addClass("is-overlay-open"),i.showConfirmationOverlay=!1,angular.element(document.querySelector("html")).removeClass("is-overlay-open"),n.getCreditPaymentEstimatorEvents().action("change vehicle")},i.returnToBnp=function(e){var t={k:i.selectedVehicle.key,n:i.selectedVehicle.name,img:i.selectedVehicle.imagePreview,fef:i.selectedVehicle.fuelEfficiencyFrom,mk:i.selectedModel.key,mn:i.selectedModel.name,mp:i.selectedModel.price,map:i.totalAccessoryPrice,mimg:i.imageURL},a=new URL(window.location.href).split("?"),t=$.param(t);0<a.length&&(t=t+"&"+a[1]),e&&(window.location=encodeURI(e+"?"+t))},i.sortBy=function(e){"category"===e?(i.sortByCategory=!0,i.filterSort=""):(i.sortByCategory=!1,i.filterSort=e),n.getCreditPaymentEstimatorEvents().action("mini showroom","sort","category"===e?e:"price")},i.closeOverlay=function(){i.showOverlay=!1,angular.element(document.querySelector(".payment-estimator-wrap")).removeClass("is-overlay-open")},i.setCurrentVehicleModel=function(e){i.workFlowData.selectedVehicle.models[e].key!==i.currentKeyModel&&(i.currentKeyModel=i.workFlowData.selectedVehicle.models[e].key,t.setCurrentProgramm(i.workFlowData.selectedVehicle.models[e].name,i.workFlowData.selectedVehicle.name,i.workFlowData.selectedVehicle.models[e]),n.getCreditPaymentEstimatorEvents().action("change model"))},t.setCurrentProgramm(i.selectedModel.name,i.selectedVehicle.name),i.setCurrentVehicleList=function(e){$(document).scrollTop(0);e.models[0].name&&e.models[0];i.analyticsName=e.analyticsName,fordAnalytics&&(fordAnalytics.onclick={nameplate:e.analyticsName,modelYear:e.year}),setTimeout(function(){var e="?"==(e=$("select.model-dropdown option").eq(0).val())?$("select.model-dropdown option").eq(1).val():e;$("select.model-dropdown").select2("val",e).change()},0),t.setSelectedVehicle(e.models[0].name,e.name,e.models[0],e),i.showOverlay=!1,angular.element(document.querySelector(".payment-estimator-wrap")).removeClass("is-overlay-open"),document.cookie='selectedNameplate={"vehicleKey":"'+e.key+'","modelKey":"","category":""};path=/'},i.selectedCategoryToFilterBy=function(e){this.selectedCategory=e,a.openFilter=!1,a.advanceFilter=!1,a.filterByCategory=!1},i.setMobileYearFilter=function(e,t){a.mobileFilter={max:t,min:e}},i.updateFilterByYear=function(){i.filterByYear=a.mobileFilter,a.openFilter=!1,a.advanceFilter=!0},i.setErrorMessage=function(){a.emptyProgram=i.emptyProgram}}}),define("credit-payment-estimator/services/creditPaymentEstimator.service.workflowdata",["_","common","utils/mediaTracking"],function(C,k,e){return function(l,e){var i,t={},s={},a=[],n=JSON.parse(angular.element(document.querySelector("#json-api")).text()),o=angular.element(document.querySelector("#data-default-vehicle")).text(),r=JSON.parse(o),c=n,d=k.localeStorage();function u(i,e,t){var a=C.chain(i).pluck("financialProgram").pluck("value").unique().value().map(function(t){var e=i.filter(function(e){if(e.financialProgram.value===t)return!0}),a=C.uniq(e,function(e,t,a){return e.financialProduct.value}).map(function(t){var e=i.filter(function(e){if(t.financialProgram.value===e.financialProgram.value&&t.financialProduct.value===e.financialProduct.value)return!0}).map(function(e){var t="Y"===e.defaultTerm,a=""!==e.ewPackageName.value?{name:e.ewPackageName.value,price:e.ewPackagePrice}:"";return{term:e.terms,isDefault:t,customerRate:e.customerRate,baseRate:e.baseRate,oemSubventionCap:e.oemSubventionCap,productCode:e.productCode,ewPackage:a,GMFV:e.gmfv}});return{name:t.financialProduct.value,key:t.financialProduct.key,terms:e}});return{name:t,key:e[0].financialProgram.key,products:a}});void 0!==t&&(s.selectedVehicle=t),void 0!==e?((t=e).programs=a,s.selectedModel=t):s.selectedModel.programs=a,d&&localStorage.setItem("WorkFlowData",JSON.stringify(s))}function p(e,t,a,i){var e=(e||y[0].vehicleList[0].models[0].name).split(".").join("-"),t=(t||y[0].vehicleList[0].name).split(".").join("-"),n=$("#data-url").html(),o=n+".paytool."+encodeURIComponent(t)+"."+encodeURIComponent(e)+".data",r=(t||(o=n+".paytool."+encodeURIComponent(e)+".data"),[]);try{$.ajax({url:o,dataType:"json",type:"GET"}).done(function(e){0<e.length?(angular.element(document.getElementsByClassName("is-active")).removeClass("is-active"),angular.element(".tabs-nav-item").eq(0).addClass("is-active"),u(r=e,a,i),s.emptyProgram=!1):(u(r,a,i),s.emptyProgram=!0),l.$broadcast("initComplete"),d&&localStorage.setItem("WorkFlowData",JSON.stringify(s))}).fail(function(e){})}catch(e){}}var m,h,f,g,v,a=n,y=C.chain(a).pluck("category").unique().value().map(function(e){var t={category:e,vehicleList:[]};return a.forEach(function(e){e.category===t.category&&(t.key=e.key,t.vehicleList.push(e))}),t});function b(){return getCookie("selectedNameplate")}function w(){var t={},a={};i=void 0!==r.vehicleKey&&(y.forEach(function(e){e.vehicleList.forEach(function(e){e.key==r.vehicleKey&&(t=e,""===r.modelKey?a=t.models[0]:t.models.forEach(function(e){e.key==r.modelKey&&(a=e)}))})}),Object.keys(t).length)&&Object.keys(a).length?(_selectedVDefaultVehicle=t,a):(_selectedVDefaultVehicle=y[0].vehicleList[0],y[0].vehicleList[0].models[0]),s.selectedModelindexInArray=0}return n=(n=n=window.location.search).replace(/\?/,"").split("&"),m={},$.each(n,function(e,t){return t=t.split("="),m[t[0]]=t[1]}),void 0!==(n=m).bp_k&&void 0!==n.bp_n?((f={}).key=n.bp_k,f.name=decodeURIComponent(n.bp_n.split("+").join(" ")),f.imagePreview=decodeURIComponent(n.bp_img),f.fuelEfficiencyFrom=n.bp_fef,f.models=[],(h={}).key=n.bp_mk,h.name=decodeURIComponent(n.bp_mn.split("+").join(" ")),h.price=n.bp_mp,h.priceType="",h.totalAccessoryPrice=n.bp_map,h.imageURL=decodeURIComponent(n.bp_mimg),h.indexInArray=0,f.models.push(h),_selectedVDefaultVehicle=f,i=f.models[0],s.buildAndPrice=!0,h=window.location.origin,f=window.location.pathname,g=n.wcmmode,v=n.cq_ck,e.$$absUrl=h+f+(void 0!==g?"?cq_ck="+v+"&wcmmode="+g:"")):void 0!==n.nameplatekey?(e=n.nameplatekey,document.cookie='selectedNameplate={"vehicleKey":"'+e+'","modelKey":"","category":""};path=/',r=JSON.parse(getCookie("selectedNameplate")),w()):b()?(r=JSON.parse(getCookie("selectedNameplate")),w()):localStorage.getItem("WorkFlowData")?(_selectedVDefaultVehicle=JSON.parse(localStorage.getItem("WorkFlowData")).selectedVehicle,i=JSON.parse(localStorage.getItem("WorkFlowData")).selectedModel,((e,t,a)=>{if(e&&t&&a){e=e.key,t=t.key;if(e==a.vehicleKey&&t==a.modelKey)return}return 1})(_selectedVDefaultVehicle,i,r)&&w(),s.selectedModelindexInArray=C.indexOf(_selectedVDefaultVehicle.models,C.findWhere(_selectedVDefaultVehicle.models,{key:i.key})),s.buildAndPrice=JSON.parse(localStorage.getItem("WorkFlowData")).buildAndPrice,s.emptyProgram=JSON.parse(localStorage.getItem("WorkFlowData")).emptyProgram):!b()&&0<o.length?w():(i=y[0].vehicleList[0].models[0],_selectedVDefaultVehicle=y[0].vehicleList[0],s.selectedModelindexInArray=0),s.selectedVehicle=_selectedVDefaultVehicle,s.selectedModel=i,s.selectedModelPay="",s.compareModels=[],s.compareModelsActiveIds=[],s.vehicleList=y,s.vehicleDefList=c,s.showLoader=!0,t.getWorkFlowData=function(){return s},t.setSelectedModel=function(e){s.selectedModel=e,d&&localStorage.setItem("WorkFlowData",JSON.stringify(s))},t.addCompareModels=function(){d&&localStorage.setItem("WorkFlowData",JSON.stringify(s))},t.setSelectedVehicle=function(e,t,a,i){p(e,t,a,i),s.buildAndPrice=!1,d&&localStorage.setItem("WorkFlowData",JSON.stringify(s))},t.setCurrentProgramm=function(e,t,a){p(e,t,a)},t}}),define("credit-payment-estimator/filters/creditPaymentEstimator.filter.currencyFormat",[],function(){return function(){return function(e,t,a){var i="",n=(angular.element("#currencyKSprtr").val(),angular.element("#currencyDecSprtr").val(),(n=angular.element("#currencyFormatPattern").val())||"¥###,###"),o=(o=angular.element("#currencySymbol").val())||"¥";if(e&&void 0!==e?e.indexOf?-1!==e.indexOf(",")&&(e=e.split(",").join("")):e=e.toString():e="0","NA"===e||isNaN(Number(e)))return"NA";if(t){for(var r=t.split("|"),l=[],s=0;s<r.length;s++)r[s]&&!isNaN(r[s])&&(r[s]=String.fromCharCode(r[s])),l.push(r[s]);l&&(t=l.join("")),i=updatePriceFormat(e,n,!0)}else t=o,i=updatePriceFormat(e,n,!1);return i}}}),define("credit-payment-estimator/filters/creditPaymentEstimator.filter.downPaymentSliderValue",[],function(){return function(){return function(e,t){return t?(e/t*100).toFixed()+"%":"0%"}}}),define("credit-payment-estimator/filters/creditPaymentEstimator.filter.sortPrograms",[],function(){return function(){return function(e,t,a){var i,n=[];if(e&&e.length){for(var o=0;o<e.length;o++)parseInt(e[o].key)===t?n.unshift(e[o]):parseInt(e[o].key)===a?i=e[o]:n.push(e[o]);return i&&n.push(i),n}}}}),define("credit-payment-estimator/filters/creditPaymentEstimator.filter.sortVehicle",[],function(){return function(){return function(e,t,a){var i=[],n=[],o=t.min,r=t.max;return angular.forEach(e,function(e){e.year>=o&&e.year<=r&&i.push(e)}),a?(angular.forEach(i,function(e){e.category===a&&n.push(e)}),n):i}}}),define("credit-payment-estimator/directives/creditPaymentEstimator.directive.characterValidator",[],function(){return function(){return{require:"ngModel",link:function(e,t,a,i){i.$parsers.unshift(function(e){return new RegExp(/^(\d+)$/).test(e.toString())?i.$setValidity("characterValidator",!0):i.$setValidity("characterValidator",!1),e})}}}}),define("credit-payment-estimator/directives/creditPaymentEstimator.directive.eventPropogation",[],function(){return function(){return{require:"ngModel",link:function(e,t,a,i){t.on("focus blur keyup change input",function(e){e.stopPropagation()})}}}}),define("credit-payment-estimator/directives/creditPaymentEstimator.directive.maxValidator",[],function(){return function(){return{require:"ngModel",link:function(e,t,a,i){i.$parsers.unshift(function(e){i.$modelValue;return parseInt(e)<=parseInt(a.maxPayment)?i.$setValidity("maxPayment",!0):i.$setValidity("maxPayment",!1),e})}}}}),define("credit-payment-estimator/directives/creditPaymentEstimator.directive.minValidator",[],function(){return function(){return{require:"ngModel",link:function(e,t,a,i){i.$parsers.unshift(function(e){i.$modelValue;return parseInt(e)>=parseInt(a.minPayment)?i.$setValidity("minPayment",!0):i.$setValidity("minPayment",!1),e})}}}}),define("credit-payment-estimator/directives/creditPaymentEstimator.directive.slider",["analytics/analyticsEventLayer"],function(u){return function(c,e,d){return{require:"ngModel",compile:function(){return{pre:function(n,o,t,r){angular.element("#vehicle-info-currency").text(),angular.element("#vehicle-info-currency-format").text();function a(){angular.forEach(i,function(e){angular.isDefined(t[e])&&(l[e]=parseInt(t[e],10))}),e.length&&(l.isRTL=!0),o.slider(l)}var e=angular.element(".rtl"),l={stop:function(e,t){var a=t.value,i=!1;return(a=l.upperBound&&a>l.upperBound?Math.min(a,l.upperBound):a)!==t.value&&(i=!0,t.value=a),i?setTimeout(function(){o.slider("value",t.value),r.$setViewValue(t.value),$(t.handle).find(".ui-slider-tip").text(t.value),n.$apply()},0):(d.$broadcast("update-currency"),u&&u.getCreditPaymentEstimatorEvents().action("change down payment"),n.payment.downPayment.$render(),n.payment.amountFinanced.$render()),!1}},i=["min","max","step","lowerBound","upperBound"];function s(){o.hasClass("ui-slider")&&o.slider("destroy")}t.$observe("disabled",function(e){a(),o.slider("option","disabled",!!e)}),n.$watch(t.uiSlider,function(e){a(),void 0!==e&&o.slider("option",e)},!0),t.$observe("upperBound",function(e){a()}),c(a,0,!0),o.bind("slide",function(e,t){r.$setViewValue(t.value),$(t.handle).find(".ui-slider-tip").text(t.value),n.$apply()}),n.$watch(t.ngModel,function(){o.slider("value",r.$viewValue),$(o).find(".ui-slider-tip").text(r.$viewValue)},!0),n.$on("initComplete",function(e){a(),o.slider("value",r.$viewValue),$(o).find(".ui-slider-tip").text(r.$viewValue)}),n.$on("$destroy",s),o.one("$destroy",s)}}}}}}),define("finance-calculator/component.financeCalculator.app",["angular"],function(e){return e.module("financeCalculator",[])}),define("finance-calculator/component.financeCalculator.controllers",["finance-calculator/component.financeCalculator.app","finance-calculator/controllers/financeCalculator.controller.vehicleInfo","finance-calculator/controllers/financeCalculator.controller.main","finance-calculator/controllers/financeCalculator.controller.financingPackage","finance-calculator/controllers/financeCalculator.controller.CompareFinancialOptions","finance-calculator/controllers/financeCalculator.controller.summaryList"],function(e,t,a,i,n,o){}),define("finance-calculator/component.financeCalculator.directives",["finance-calculator/component.financeCalculator.app","finance-calculator/directives/financeCalculator.directive.maxValidator","finance-calculator/directives/financeCalculator.directive.minValidator","finance-calculator/directives/financeCalculator.directive.characterValidator"],function(e,t,a,i){e.directive("maxPayment",t),e.directive("maxPayment",a),e.directive("characterValidator",i)}),define("finance-calculator/component.financeCalculator.filters",["finance-calculator/component.financeCalculator.app","finance-calculator/filters/financeCalculator.filter.currencyFormat","finance-calculator/filters/financeCalculator.filter.sortVehicle"],function(e,t,a){e.filter("currencyFormat",[t]),e.filter("sortVehicle",[a])}),define("finance-calculator/component.financeCalculator",["jquery","range-slider","jquery-flexslider","hammer","_","angular","finance-calculator/component.financeCalculator.app","finance-calculator/component.financeCalculator.controllers","finance-calculator/component.financeCalculator.services","finance-calculator/component.financeCalculator.filters","finance-calculator/component.financeCalculator.directives"],function(l,e,t,a,s,i,n,o,r,c,d){var u={},p={},m=p.paymentEstimator=function(e){(m.prototype._singletonInstance=this).opts=l.extend({tablet:768,financialProductList:".finance-calculator-wrap .financial-products .product-list",financialListItem:".finance-calculator-wrap .financial-products .product-list .product-item",financialProductWrap:".finance-calculator-wrap .financial-products .product-slider",financialSlideItem:".finance-calculator-wrap .financial-products .product-slider .product-item",financialProduct:".finance-calculator-wrap .financial-products .product-item",financialProductsDesc:".finance-calculator-wrap .financial-products .product-item .product-desc",equalHeightAttr:".finance-calculator-wrap .compare-financial-options .attribute",equalDataAttr:"data-attribute-name",headerCompare:".finance-calculator-wrap .compare-financial-options .head",compareElements:".vehicle-item",buttonAddVehicle:".compare-financial-options .vehicle-action a",buttonDelVehicle:".compare-financial-options .remove-btn a"},e=e||{}),this.init()};return m.getInstance=function(){return null==m.prototype._singletonInstance&&(m.prototype._singletonInstance=new p.paymentEstimator),m.prototype._singletonInstance},m.prototype.productToggleInfo=function(){l(this.opts.financialProduct).on("click",function(){l(this).toggleClass("open-info")})},m.prototype.bundleProductSlider=function(){var e=l(this.opts.financialProductList),t=l(this.opts.financialListItem).length,a=l(this.opts.financialProductWrap),i=(l(this.opts.financialSlideItem).length,1),n=this;function o(){l(window).width()<n.opts.tablet&&!a.find(".flex-viewport").length&&l(".finance-calculator-wrap .financial-products .product-slider").flexslider({animation:"slide",selector:".slide-wrap > li",animationLoop:!1,start:function(){},before:function(){},after:function(){}})}function r(){var e=l(".finance-calculator-wrap .financial-products .product-slider .slide-wrap > li").length;e&&1<e&&(a.addClass("multi-product"),o(),l(window).on("resize",s.throttle(function(){o()},500)))}t&&1<t&&e.addClass("multi-product"),r(),a.bind("DOMSubtreeModified",function(){var e;i!==l(".finance-calculator-wrap .financial-products .product-slider .slide-wrap > li").length&&(i=l(".finance-calculator-wrap .financial-products .product-slider .slide-wrap > li").length,clearTimeout(e),e=setTimeout(function(){r()},500))})},m.prototype.toUnique=function(e,t,a){for(t=e.length;a=--t;)for(;a--;)e[t]===e[a]&&e.splice(a,1);return e},m.prototype.equalHeight=function(e,t){var a=0;void 0!==t&&!0===t&&l(window).width()<this.opts.tablet?l(e).css("min-height","auto"):(l(e).css("min-height","auto"),l(e).each(function(){var e=l(this).outerHeight();a<e&&(a=e)}),l(e).css("min-height",a))},m.prototype.getVehiceAttributes=function(){var e=[],t=[],a=this.opts.equalHeightAttr,i=this.opts.equalDataAttr;return l(a).each(function(){e.push(l(this).attr(i))}),t=0<e.length?this.toUnique(e):t},m.prototype.equalHeightAttributes=function(){var a=this,e=this.getVehiceAttributes(),i=this.opts.equalHeightAttr,n=this.opts.equalDataAttr,t=this.opts.headerCompare;function o(){l.each(e,function(e,t){a.equalHeight(i+"["+n+"="+t+"]")}),l(t).length&&a.equalHeight(t)}o(),l(window).on("resize",s.throttle(function(){o()},100))},m.prototype.equalHeightFinancialProducts=function(){var e=this,t=this.opts.financialProductsDesc;function a(){l(t).length&&e.equalHeight(t,!0)}a(),l(window).on("resize",s.throttle(function(){a()},100))},m.prototype.initEvents=function(){var e=this,t=(l(".overlay-content-inner .vehicle-wrap"),l(".overlay-container .overlay-close"),!1);function n(){var e={vehicleNameplate:l(".info-section > h4").text(),vehicleModel:l(".info-section .form-dropdown .select2-container .select2-chosen").text(),financialProgram:l.trim(l(".financing-package .tabPanel .tabs-nav .tabs-nav-list .is-active").text()),price:l(".finance-calculator-wrap .payment-summary span.payment-price:first").text(),downPayment:l(".finance-calculator-wrap .payment-summary span.payment-downPayment:first").text(),amountFinanced:l(".finance-calculator-wrap .payment-summary span.payment-amountFinanced:first").text(),terms:l(".finance-calculator-wrap .payment-summary span.payment-term:first").text(),monthlyPayment:l(".finance-calculator-wrap .payment-summary span.payment-monthlyPayment:first").text(),ewPackage:l(".finance-calculator-wrap .payment-summary span.payment-ewPackage-price:first").text(),displayYear:l(".finance-calculator-wrap .radio-info-section .year-radio-holder .checked").text(),availableIncentives:l(".finance-calculator-wrap .payment-summary span.payment-available-incentives:first").text(),estimatedShowroomPrice:l(".finance-calculator-wrap .payment-summary span.payment-estimated-showroom-price:first").text(),estimatedSellingPrice:l(".finance-calculator-wrap .payment-summary span.payment-estimated-selling-price:first").text(),retailCash:l(".finance-calculator-wrap .payment-summary span.payment-retail-cash:first").text(),loyalityBonus:l(".finance-calculator-wrap .payment-summary span.payment-loyality-bonus:first").text(),netPrice:l(".finance-calculator-wrap .payment-summary span.payment-net-price:first").text(),netTradeInValueOfUsedCar:l(".finance-calculator-wrap .payment-summary span.payment-net-trade-in-value-of-used-car:first").text(),loanTermInMonths:l(".finance-calculator-wrap .payment-summary span.payment-loan-term-in-months:first").text(),annualInterestRate:l(".finance-calculator-wrap .payment-summary span.payment-annual-interest-rate:first").text(),monthlyPaymentEMI:l(".finance-calculator-wrap .payment-summary span.payment-monthly-payment-emi:first").text()};return l.param(e)}function o(){return document.location.protocol+"//"+document.location.hostname+":"+document.location.port}l(document.body).on("click","#showroom-vehicle-card .vehicle-card-grid .item-content, .overlay-container .overlay-close",function(){t=!0,l(".form-dropdown.mode-dropdown .select2-container").remove(),l(".form-dropdown #select-models").removeClass("select2-offscreen").select2({minimumResultsForSearch:-1}),l(".finance-calculator-wrap .radio-info-section .year-radio-holder label.checked").removeClass("checked")}),l(".form-dropdown.mode-dropdown #select-models")&&l(document).on("ajaxComplete.afterCloseOverlay",function(e){t&&(l(".form-dropdown.mode-dropdown .select2-container").remove(),l(".form-dropdown #select-models").removeClass("select2-offscreen").select2({minimumResultsForSearch:-1}),t=!1)}),l(document.body).on("click",".overlay-content .vehicle-card-grid .item a",function(e){e.preventDefault()}),l(document.body).on("click",".add-model, .remove-model",function(){e.equalHeightAttributes(),l(".accordion-body.active").height(l(".accordion-body.active > .accordion-content").height())}),l(".financing-package .tabs-nav-item").off("click.tabs"),l(".financing-package .tabs-nav-item").on("click",function(e){if(e.preventDefault(),l(this).hasClass("is-active"))return!1;l(".financing-package .tabs-nav-item.is-active").removeClass("is-active"),l(this).addClass("is-active")}),l(".save-btn-fcal").on("click",function(e){window.location.href=o()+l("#pdf-url").text()+"?"+n()}),l(".print-btn-fcal").on("click",function(e){window.open().location.href=o()+l("#pdf-url").text()+"?contentDisposition=inline&"+n()}),l(".mail-btn-fcal").on("click",function(){var e=l("#mail-url").text()+l("#mail-identifier").text();l.get(e,{},function(e){try{e.userEmailBody||(e=JSON.parse(e)),window.location.href="mailto:?body="+(t=e.userEmailBody,a={"${vehicleNameplate}":l(".info-section > h4").text(),"${vehicleModel}":l(".info-section .form-dropdown .select2-container .select2-chosen").text(),"${pdfLink}":o()+l("#pdf-url").text()+"?"+n()},i=l("<temp></temp>").append(t).text().replace(/&nbsp;/g," "),Object.keys(a).forEach(function(e){i=i.replace(e,a[e])}),encodeURIComponent(i))}catch(e){}var t,a,i}).fail(function(e){})})},m.prototype.asideOverlayFilters=function(){if(void 0!==l(".finance-calculator-wrap .overlay-aside .filter label")){for(var e=l(".finance-calculator-wrap .overlay-aside .filter label"),t=0;t<e.length;t++)if(l(e[t]).find("input").is(":checked")){l(e[t]).addClass("active");break}e.on("click",function(){l(this).closest(".labels").find("label.active").removeClass("active"),l(this).addClass("active")})}},m.prototype.asideOverlayMobileFilters=function(){if(void 0!==l(".finance-calculator-wrap .overlay-header-side .filter label")){for(var e=l(".finance-calculator-wrap .overlay-header-side .filter label"),t=0;t<e.length;t++)if(l(e[t]).find("input").is(":checked")){l(e[t]).addClass("active");break}e.on("click",function(){l(this).closest(".labels").find("label.active").removeClass("active"),l(this).addClass("active")})}},m.prototype.selectModelsFilter=function(){for(var e=l(".year-radio-holder label"),t=0;t<e.length;t++)l(e[t]).closest(".year-radio-holder").find("input").is(":checked")&&l(e[t]).addClass("checked");e.unbind().on("click",function(e){var t=l(this);t.hasClass("checked")?(t.closest(".year-radio-holder").find("input").attr("checked",!1),t.removeClass("checked")):(t.closest(".radio-info-section").find("label.checked").removeClass("checked"),t.addClass("checked")),setTimeout(function(){l(".form-dropdown.mode-dropdown .select2-container").remove(),l(".form-dropdown #select-models").removeClass("select2-offscreen").select2({minimumResultsForSearch:-1})},500)})},m.prototype.closeOverlayAside=function(){l(document.body).on("click",".finance-calculator-wrap .overlay-aside .close-aside-btn",function(){l("html").hasClass("rtl")?l(this).closest(".overlay-aside").hasClass("opened")?(l(this).animate({left:-37},500),l(this).closest(".overlay-aside").animate({marginRight:-(l(".finance-calculator-wrap .overlay-aside").innerWidth()+36)},500),l(this).closest(".overlay-aside").removeClass("opened"),l(this).removeClass("active")):(l(this).animate({left:-16},500),l(this).closest(".overlay-aside").animate({marginRight:-35},500),l(this).closest(".overlay-aside").addClass("opened"),l(this).addClass("active")):l("html").hasClass("lang_en")&&(l(this).closest(".overlay-aside").hasClass("opened")?(l(this).animate({right:-37},500),l(this).closest(".overlay-aside").animate({marginLeft:-(l(".finance-calculator-wrap .overlay-aside").innerWidth()+36)},500),l(this).closest(".overlay-aside").removeClass("opened"),l(this).removeClass("active")):(l(this).animate({right:-16},500),l(this).closest(".overlay-aside").animate({marginLeft:-35},500),l(this).closest(".overlay-aside").addClass("opened"),l(this).addClass("active")))})},m.prototype.checkActiveSort=function(){var e;void 0!==l("#showroom-vehicle-card .dropdown-vehicle-sort")&&void 0!==(e=l(".dropdown-vehicle-sort li.active"))&&l(".dropdown-vehicle-sort label .by").text(e.find("> a").text())},m.prototype.init=function(){this.productToggleInfo(),this.bundleProductSlider(),this.equalHeightAttributes(),this.equalHeightFinancialProducts(),this.initEvents(),this.checkActiveSort(),this.asideOverlayFilters(),this.asideOverlayMobileFilters(),this.closeOverlayAside(),this.selectModelsFilter()},u.init=function(){new p.paymentEstimator;l(".finance-calculator-wrap").length&&l(".financeCalculator.section").each(function(e,t){i.bootstrap(t,["financeCalculator"])})},u}),define("finance-calculator/component.financeCalculator.services",["finance-calculator/component.financeCalculator.app","finance-calculator/services/financeCalculator.service.workflowdata"],function(e,t){e.service("workFlowData",["$rootScope","$location",t])}),define("finance-calculator/controllers/financeCalculator.controller.CompareFinancialOptions",[],function(){return function(e,t,a){var i=this;i.workFlowData=t.getWorkFlowData(),i.currencySymbol=angular.element("#vehicle-info-currency").text(),i.termSymbol=angular.element("#financing-package-period-uom").text(),i.currencyFormat=angular.element("#vehicle-info-currency-format").text(),i.classHolder="",i.modelsList=[],i.ActiveIds=[],i.selectedModel=t.getWorkFlowData().selectedModel,i.checkLength=function(){3<i.ActiveIds.length?angular.element(document.querySelector(".vehicle-item.hidden-attrs")).addClass("ng-hide"):angular.element(document.querySelector(".vehicle-item.ng-hide")).removeClass("ng-hide")},i.checkLength(),i.addNewModel=function(e){e.preventDefault();e=JSON.parse(JSON.stringify(t.getWorkFlowData().selectedModel));i.modelsList.push(e),i.ActiveIds.push(t.getWorkFlowData().selectedModel.vehicleAssetId),i.checkLength()},i.removeItem=function(e,t){e.preventDefault(),i.modelsList.splice(t,1),i.ActiveIds.splice(t,1),i.checkLength()}}}),define("finance-calculator/controllers/financeCalculator.controller.financingPackage",["_"],function(e){return function(t,e,a,i,n){var o,r,l,s=this;function c(){t.payment.downPayment.$viewValue=i("currencyFormat")(s.downPayment,s.currencySymbol,s.currencyFormat),t.payment.downPayment.$render(),t.payment.netTradeIn.$viewValue=i("currencyFormat")(s.netTradeInValue,s.currencySymbol,s.currencyFormat),t.payment.netTradeIn.$render(),t.payment.availableIncentives.$viewValue=i("currencyFormat")(s.availableIncentives,s.currencySymbol,s.currencyFormat),t.payment.availableIncentives.$render()}s.serviceData=e.getWorkFlowData(),s.init=function(){s.calcData=s.serviceData.selectedModel.calcData,s.selectedModel=e.getWorkFlowData().selectedModel,s.termList=s.calcData.availableTerms||[],s.exShowroomPrice=s.calcData.paymentDetailsResult.exShowroomPrice.value,s.currencySymbol=s.calcData.amountFinanced.currency||angular.element("#vehicle-info-currency").text(),s.termSymbol=angular.element("#financing-package-period-uom").text(),s.currencyFormat=angular.element("#vehicle-info-currency-format").text(),s.monthlyPayment=s.calcData.amountFinanced.monthlyPayment,s.annualInterestRate=s.calcData.amountFinanced.annualInterestRate,s.calcData.paymentDetailsResult.exShowroomPrice.accessoriesPrice?(s.price=Number(s.calcData.paymentDetailsResult.exShowroomPrice.value)+Number(s.calcData.paymentDetailsResult.exShowroomPrice.accessoriesPrice),s.accessoriesPrice=Number(s.calcData.paymentDetailsResult.exShowroomPrice.accessoriesPrice)):s.price=Number(s.calcData.paymentDetailsResult.exShowroomPrice.value);s.upperBound=s.price,s.term=s.calcData.amountFinanced.loanTerm.toString(),angular.element(document.getElementById("select2-chosen-3")).text(s.term+" "+s.termSymbol),s.netTradeInValue=s.calcData.netTradeInValue,r=s.calcData.netTradeInValue,s.downPayment=s.calcData.downPayment,o=s.calcData.downPayment,s.availableIncentives=s.calcData.availableIncentives;s.calcData.availableIncentives;a(c,0),n.$broadcast("calculationComplete")},s.onDownPaymentFocus=function(){t.payment.downPayment.$viewValue=s.downPayment,t.payment.downPayment.$render()},s.onNetTradeInFocus=function(){t.payment.netTradeIn.$viewValue=s.netTradeInValue,t.payment.netTradeIn.$render()},s.onAvailableIncentivesFocus=function(){t.payment.availableIncentives.$viewValue=s.availableIncentives,t.payment.availableIncentives.$render()},s.onDownPaymentBlur=function(){s.downPayment>s.price||"string"==typeof s.downPayment?s.downPayment=o:(o=s.downPayment,s.downPayment!==s.calcData.downPayment&&e.calculateRate(s.serviceData.selectedModel,s.term,s.downPayment,s.netTradeInValue,s.accessoriesPrice,s.availableIncentives)),t.payment.downPayment.$setValidity("maxPayment",!0),t.payment.downPayment.$setValidity("characterValidator",!0),a(c,0)},s.onNetTradeInBlur=function(){s.netTradeInValue>s.price||"string"==typeof s.netTradeInValue?s.netTradeInValue=r:(r=s.netTradeInValue,s.netTradeInValue!==s.calcData.netTradeInValue&&e.calculateRate(s.serviceData.selectedModel,s.term,s.downPayment,s.netTradeInValue,s.accessoriesPrice,s.availableIncentives)),t.payment.netTradeIn.$setValidity("maxPayment",!0),t.payment.netTradeIn.$setValidity("characterValidator",!0),a(c,0)},s.onAvailableIncentivesBlur=function(){s.availableIncentives>s.price||"string"==typeof s.availableIncentives?s.availableIncentives=l:(l=s.availableIncentives,s.availableIncentives!==s.calcData.availableIncentives&&e.calculateRate(s.serviceData.selectedModel,s.term,s.downPayment,s.netTradeInValue,s.accessoriesPrice,s.availableIncentives)),t.payment.availableIncentives.$setValidity("maxPayment",!0),t.payment.availableIncentives.$setValidity("characterValidator",!0),a(c,0)},s.changeDownPayment=function(e){0<=parseInt(e)&&Number(e)<=s.price&&(s.downPayment=Number(e))},s.changeNetTradeIn=function(e){0<=parseInt(e)&&Number(e)<=s.price&&(s.netTradeInValue=Number(e))},s.changeAvailableIncentives=function(e){0<=parseInt(e)&&Number(e)<=s.price&&(s.availableIncentives=Number(e))},s.changeTerm=function(){s.term!=s.calcData.amountFinanced.loanTerm&&e.calculateRate(s.serviceData.selectedModel,s.term,s.downPayment,s.netTradeInValue,s.accessoriesPrice,s.availableIncentives)};var d=t.$on("initComplete",function(e){t.$apply(function(){s.init()})});t.$on("$destroy",d)}}),define("finance-calculator/controllers/financeCalculator.controller.main",[],function(){return function(e,t){this.data=t.getWorkFlowData()}}),define("finance-calculator/controllers/financeCalculator.controller.summaryList",[],function(){return function(e,t){var a=this,i=(a.init=function(){a.fromBuildAndPrice,a.calcData=t.getWorkFlowData().selectedModel.calcData,a.currencySymbol=a.calcData.amountFinanced.currency||angular.element("#vehicle-info-currency").text(),a.termSymbol=angular.element("#financing-package-period-uom").text(),a.currencyFormat=angular.element("#vehicle-info-currency-format").text(),a.calcData.paymentDetailsResult.exShowroomPrice.accessoriesPrice?a.fromBuildAndPrice=!0:a.fromBuildAndPrice=!1;a.fromBuildAndPrice?(a.priceName="Estimated EX-Showroom Price",a.price=a.calcData.paymentDetailsResult.exShowroomPrice.accessoriesPrice+a.calcData.paymentDetailsResult.exShowroomPrice.value,a.accessoriesPrice=a.calcData.paymentDetailsResult.exShowroomPrice.accessoriesPrice):(a.priceName="EX-Showroom Price",a.price=a.calcData.paymentDetailsResult.exShowroomPrice.value,a.accessoriesPrice=0);a.availableSelling=a.price-a.calcData.amountFinanced.cashBack,a.netPrice=a.calcData.netPrice,a.downPayment=a.calcData.downPayment,a.netTradeInValue=a.calcData.netTradeInValue,a.amountFinanced=a.calcData.amountFinanced.value,a.term=a.calcData.amountFinanced.loanTerm,a.annualInterestRate=a.calcData.amountFinanced.annualInterestRate,a.monthlyPayment=a.calcData.amountFinanced.monthlyPayment},e.$on("calculationComplete",function(e){a.init()}));e.$on("$destroy",i)}}),define("finance-calculator/controllers/financeCalculator.controller.vehicleInfo",[],function(){return function(e,r,t){var l=this;l.currencySymbol=angular.element("#vehicle-info-currency").text(),l.currencyFormat=angular.element("#vehicle-info-currency-format").text(),l.showOverlay=!1,l.workFlowData=r.getWorkFlowData(),l.selectedVehicle=r.getWorkFlowData().selectedVehicle,l.selectedModel=r.getWorkFlowData().selectedModel,l.buildAndPrice=!!r.getWorkFlowData().buildAndPrice&&r.getWorkFlowData().buildAndPrice,l.showConfirmationOverlay=!1,l.currentModel=l.selectedModel[0].key,l.vehicleList=l.workFlowData.vehicleList,l.vehicleDefList=l.workFlowData.vehicleDefList,l.sortByCategory=!0,l.showLoader=r.showLoader,l.currentKeyModel=l.selectedModel.key,l.filterSort="",l.filterByYear="",l.oldSelectedVehicle=r.getWorkFlowData().selectedVehicle,l.oldSelectedModel=r.getWorkFlowData().selectedModel,l.modelsList=r.getWorkFlowData().modelsList,l.filterModelsByYear="",l.openConfirmOverlay=function(){l.showConfirmationOverlay=!0,angular.element(document.querySelector("html")).addClass("is-overlay-open")},l.closeConfirmOverlay=function(){l.showConfirmationOverlay=!1,angular.element(document.querySelector("html")).removeClass("is-overlay-open")},l.openOverlay=function(){l.showOverlay=!0,angular.element(document.querySelector(".finance-calculator-wrap")).addClass("is-overlay-open"),l.showConfirmationOverlay=!1,angular.element(document.querySelector("html")).removeClass("is-overlay-open")},l.sortModelsByYear=function(e){var t,a,i,n=e.max,o=e.min,e=n+"-"+o;l.filterModelsByYear!==e?(l.filterModelsByYear=e,e=JSON.parse(JSON.stringify(l.selectedVehicle)),t=[],a=n!==o?n+" - "+o:n,i=[],l.modelsList.forEach(function(e){+e.nameplateYear<=+n&&+e.nameplateYear>=+o&&(t.push(e),-1===i.indexOf(e.nameRelVeh))&&(i.push(e.nameRelVeh),a=n)}),e.name=a+" "+i[0],e.models=t,l.selectedVehicle=e,l.selectedModel=l.selectedVehicle.models[0],r.setSelectedModel(l.selectedModel,!0)):(l.filterModelsByYear="",l.selectedVehicle=r.getWorkFlowData().selectedVehicle,l.selectedModel=r.getWorkFlowData().selectedModel)},l.sortBy=function(e){"category"===e?(l.sortByCategory=!0,l.filterSort=""):(l.sortByCategory=!1,l.filterSort=e)},l.closeOverlay=function(){l.showOverlay=!1,angular.element(document.querySelector(".finance-calculator-wrap")).removeClass("is-overlay-open")},l.setCurrentVehicleModel=function(e){var t;l.selectedVehicle.models[e].key!==l.currentKeyModel&&(l.currentKeyModel=l.selectedVehicle.models[e].key,l.selectedModel=l.selectedVehicle.models[e],t=0===l.filterModelsByYear.length,r.setSelectedModel(l.selectedVehicle.models[e],t))},l.setCurrentVehicleList=function(e){e.models[0].name&&e.models[0];r.setSelectedVehicle(e.models[0],e),l.filterModelsByYear="",l.selectedVehicle=r.getWorkFlowData().selectedVehicle,l.selectedModel=r.getWorkFlowData().selectedModel,l.showOverlay=!1,angular.element(document.querySelector(".finance-calculator-wrap")).removeClass("is-overlay-open")}}}),define("finance-calculator/services/financeCalculator.service.workflowdata",["_","utils/mediaTracking"],function(b,e){return function(l,e){var t={},s={},a=JSON.parse(angular.element(document.querySelector("#json-api")).text()),i=angular.element(document.querySelector("#data-default-vehicle")).text(),n=a,o=[];a.forEach(function(t){t.models.forEach(function(e){e.nameRelVeh=t.name,o.push(e)})});var r,c,d,u,p,m,h,f,g=b.chain(a).pluck("category").unique().value().map(function(e){var t={category:e,vehicleList:[]};return a.forEach(function(e){e.category===t.category&&t.vehicleList.push(e)}),t}),v=window.location.search;function y(t,e,a,i,n,o){s.calculationInProgress=!0;var r="?modelKey="+t.key,e="&term="+e,a="&downPayment="+a,i="&netTradeInValue="+i,o="&availableIncentives="+o,r=(n=n?"&accessoriesPrice="+n:"",angular.element("#serviceLayerUrl").val()+"/fordowner/vehicle/buildandprice/credit/models/calculatePayment"+r+e+a+i+o+n);try{$.ajax({url:r,dataType:returnJsonTypeBaseonBrowser(),type:"GET"}).done(function(e){200===e.returnCode&&(t.calcData=e),s.calculationInProgress=!1,l.$broadcast("initComplete"),localStorage.setItem("IndianMarketWorkFlowData",JSON.stringify(s))}).fail(function(e){})}catch(e){}}return v=(v=v).replace(/\?/,"").split("&"),r={},$.each(v,function(e,t){return t=t.split("="),r[t[0]]=t[1]}),void 0!==(v=r).k&&void 0!==v.n?((c={}).key=v.k,c.name=v.n.split("+").join(" "),c.imagePreview=decodeURIComponent(v.img),c.fuelEfficiencyFrom=v.fef,c.models=[],(f={}).key=v.mk,f.name=v.mn.split("+").join(" "),f.price=v.mp,f.priceType="",f.totalAccessoryPrice=v.map,f.imageURL=decodeURIComponent(v.mimg),f.indexInArray=0,c.models.push(f),f=(_selectedVDefaultVehicle=c).models[0],s.buildAndPrice=!0,c=window.location.origin,d=window.location.pathname,u=v.wcmmode,v=v.cq_ck,e.$$absUrl=c+d+(void 0!==u?"?cq_ck="+v+"&wcmmode="+u:"")):localStorage.getItem("IndianMarketWorkFlowData")?(_selectedVDefaultVehicle=JSON.parse(localStorage.getItem("IndianMarketWorkFlowData")).selectedVehicle,f=JSON.parse(localStorage.getItem("IndianMarketWorkFlowData")).selectedModel,s.buildAndPrice=JSON.parse(localStorage.getItem("IndianMarketWorkFlowData")).buildAndPrice):0<i.length?(p=JSON.parse(i),m={},h={},f=void 0!==p.vehicleKey&&(g.forEach(function(e){e.category==p.category&&e.vehicleList.forEach(function(e){e.key==p.vehicleKey&&(m=e).models.forEach(function(e){e.key==p.modelKey&&(h=e)})})}),0<Object.keys(m).length)&&0<Object.keys(h).length?(_selectedVDefaultVehicle=m,h):(_selectedVDefaultVehicle=g[0].vehicleList[0],g[0].vehicleList[0].models[0])):(f=g[0].vehicleList[0].models[0],_selectedVDefaultVehicle=g[0].vehicleList[0]),s.selectedVehicle=_selectedVDefaultVehicle,s.selectedModel=f,y(s.selectedModel,60,parseInt(.2*s.selectedModel.price),0,s.selectedModel.accessoriesPrice,0),s.selectedModelPay="",s.compareModels=[],s.compareModelsActiveIds=[],s.vehicleList=g,s.vehicleDefList=n,s.modelsList=o,s.showLoader=!0,t.getWorkFlowData=function(){return s},t.setSelectedModel=function(e,t){y(e,60,parseInt(.2*e.price),0,e.accessoriesPrice,0),t&&(s.selectedModel=e,localStorage.setItem("IndianMarketWorkFlowData",JSON.stringify(s)))},t.addCompareModels=function(){localStorage.setItem("IndianMarketWorkFlowData",JSON.stringify(s))},t.setSelectedVehicle=function(e,t){s.buildAndPrice=!1,s.selectedVehicle=t,s.selectedModel=e,y(s.selectedModel,60,parseInt(.2*s.selectedModel.price),0,s.selectedModel.accessoriesPrice,0),localStorage.setItem("IndianMarketWorkFlowData",JSON.stringify(s))},t.calculateRate=function(e,t,a,i,n,o){y(e,t,a,i,n,o)},t}}),define("finance-calculator/filters/financeCalculator.filter.currencyFormat",[],function(){return function(){return function(e,t,a){if(void 0===e)return"";if(e.indexOf?-1!==e.indexOf(",")&&(e=e.split(",").join("")):e=e.toString(),"NA"===e||isNaN(Number(e)))return"NA";var i,n="",e=-1!==e.indexOf(".")?(i=e.split(".")[0],"."+e.split(".")[1]):(i=e,""),o=i.length%3,r=(i.length-o)/3;if(o&&r?n=i.substr(0,o)+",":o&&!r&&(n=i.substr(0,o)),r)for(var l=0;l<r;l++)l===r-1?n+=i.substr(o+3*l,3):n=n+i.substr(o+3*l,3)+",";return n+=e,"append"===a?n=n+" "+t:"prepend"===a&&(n=t+" "+n),n}}}),define("finance-calculator/filters/financeCalculator.filter.sortVehicle",[],function(){return function(){return function(e,t){var a=[],i=t.min,n=t.max;return angular.forEach(e,function(e){e.year>=i&&e.year<=n&&a.push(e)}),a}}}),define("finance-calculator/directives/financeCalculator.directive.characterValidator",[],function(){return function(){return{require:"ngModel",link:function(e,t,a,i){i.$parsers.unshift(function(e){return new RegExp(/^(\d+)$/).test(e.toString())?i.$setValidity("characterValidator",!0):i.$setValidity("characterValidator",!1),e})}}}}),define("finance-calculator/directives/financeCalculator.directive.maxValidator",[],function(){return function(){return{require:"ngModel",link:function(e,t,a,i){i.$parsers.unshift(function(e){i.$modelValue;return parseInt(e)<=parseInt(a.maxPayment)?i.$setValidity("maxPayment",!0):i.$setValidity("maxPayment",!1),e})}}}}),define("finance-calculator/directives/financeCalculator.directive.minValidator",[],function(){return function(){return{require:"ngModel",link:function(e,t,a,i){i.$parsers.unshift(function(e){i.$modelValue;return parseInt(e)>=parseInt(a.minPayment)?i.$setValidity("minPayment",!0):i.$setValidity("minPayment",!1),e})}}}}),define("multi-finance-calculator/component.multiFinanceCalculator.app",["angular"],function(e){return e.module("multiFinanceCalculator",[])}),define("multi-finance-calculator/component.multiFinanceCalculator.controllers",["multi-finance-calculator/component.multiFinanceCalculator.app","multi-finance-calculator/controllers/multiFinanceCalculator.controller.main","multi-finance-calculator/controllers/FCARG/multiFinanceCalculator.controller.vehicleInfo","multi-finance-calculator/controllers/FCARG/multiFinanceCalculator.controller.financingPackage","multi-finance-calculator/controllers/FCARG/multiFinanceCalculator.controller.CompareFinancialOptions","multi-finance-calculator/controllers/FCARG/multiFinanceCalculator.controller.summaryList","multi-finance-calculator/controllers/FCBRA/multiFinanceCalculator.controller.vehicleInfo","multi-finance-calculator/controllers/FCBRA/multiFinanceCalculator.controller.financingPackage","multi-finance-calculator/controllers/FCBRA/multiFinanceCalculator.controller.CompareFinancialOptions","multi-finance-calculator/controllers/FCBRA/multiFinanceCalculator.controller.summaryList","multi-finance-calculator/controllers/FCIND/multiFinanceCalculator.controller.vehicleInfo","multi-finance-calculator/controllers/FCIND/multiFinanceCalculator.controller.financingPackage","multi-finance-calculator/controllers/FCIND/multiFinanceCalculator.controller.CompareFinancialOptions","multi-finance-calculator/controllers/FCIND/multiFinanceCalculator.controller.summaryList","multi-finance-calculator/controllers/FCMEX/multiFinanceCalculator.controller.vehicleInfo","multi-finance-calculator/controllers/FCMEX/multiFinanceCalculator.controller.financingPackage","multi-finance-calculator/controllers/FCMEX/multiFinanceCalculator.controller.CompareFinancialOptions","multi-finance-calculator/controllers/FCMEX/multiFinanceCalculator.controller.summaryList"],function(e,t,a,i,n,o,r,l,s,c,d,u,p,m,h,f,g,v){switch(e.controller("MainCtrl",["$scope","workFlowData",t]),angular.element("#calculator-version").text()){case"FCIND":e.controller("VinCodeInfoCtrl",["$scope","workFlowData",d]),e.controller("FinancingPackageCtrl",["$scope","workFlowData","$timeout","$filter","$rootScope",u]),e.controller("CompareFinancialOptionsCtrl",["$scope","workFlowData",p]),e.controller("SummaryListCtl",["$scope","workFlowData",m]);break;case"FCARG":e.controller("VinCodeInfoCtrl",["$scope","workFlowData",a]),e.controller("FinancingPackageCtrl",["$scope","workFlowData","$timeout","$filter","$rootScope",i]),e.controller("CompareFinancialOptionsCtrl",["$scope","workFlowData",n]),e.controller("SummaryListCtl",["$scope","workFlowData",o]);break;case"FCBRA":e.controller("VinCodeInfoCtrl",["$scope","workFlowData",r]),e.controller("FinancingPackageCtrl",["$scope","workFlowData","$timeout","$filter","$rootScope",l]),e.controller("CompareFinancialOptionsCtrl",["$scope","workFlowData",s]),e.controller("SummaryListCtl",["$scope","workFlowData",c]);break;case"FCMEX":e.controller("VinCodeInfoCtrl",["$scope","workFlowData",h]),e.controller("FinancingPackageCtrl",["$scope","workFlowData","$timeout","$filter","$rootScope",f]),e.controller("CompareFinancialOptionsCtrl",["$scope","workFlowData",g]),e.controller("SummaryListCtl",["$scope","workFlowData",v]);break;default:e.controller("VinCodeInfoCtrl",["$scope","workFlowData",d]),e.controller("FinancingPackageCtrl",["$scope","workFlowData","$timeout","$filter","$rootScope",u]),e.controller("CompareFinancialOptionsCtrl",["$scope","workFlowData",p]),e.controller("SummaryListCtl",["$scope","workFlowData",m])}}),define("multi-finance-calculator/component.multiFinanceCalculator.directives",["multi-finance-calculator/component.multiFinanceCalculator.app","multi-finance-calculator/directives/multiFinanceCalculator.directive.maxValidator","multi-finance-calculator/directives/multiFinanceCalculator.directive.minValidator","multi-finance-calculator/directives/multiFinanceCalculator.directive.characterValidator","multi-finance-calculator/directives/multiFinanceCalculator.directive.eventPropogation"],function(e,t,a,i,n){e.directive("maxPayment",t),e.directive("maxPayment",a),e.directive("characterValidator",i),e.directive("eventPropogation",n)}),define("multi-finance-calculator/component.multiFinanceCalculator.filters",["multi-finance-calculator/component.multiFinanceCalculator.app","multi-finance-calculator/filters/multiFinanceCalculator.filter.currencyFormat","multi-finance-calculator/filters/multiFinanceCalculator.filter.sortVehicle"],function(e,t,a){e.filter("currencyFormat",[t]),e.filter("sortVehicle",[a])}),define("multi-finance-calculator/component.multiFinanceCalculator",["jquery","range-slider","jquery-flexslider","hammer","_","angular","multi-finance-calculator/component.multiFinanceCalculator.app","multi-finance-calculator/component.multiFinanceCalculator.controllers","multi-finance-calculator/component.multiFinanceCalculator.services","multi-finance-calculator/component.multiFinanceCalculator.filters","multi-finance-calculator/component.multiFinanceCalculator.directives","mediaQuery","analytics/analyticsEventLayer"],function(g,e,t,a,l,v,i,n,o,r,s,y,b){var c={},d={},u=d.paymentEstimator=function(e){(u.prototype._singletonInstance=this).opts=g.extend({tablet:768,financialProductList:".multi-finance-calculator-wrap .financial-products .product-list",financialListItem:".multi-finance-calculator-wrap .financial-products .product-list .product-item",financialProductWrap:".multi-finance-calculator-wrap .financial-products .product-slider",financialSlideItem:".multi-finance-calculator-wrap .financial-products .product-slider .product-item",financialProduct:".multi-finance-calculator-wrap .financial-products .product-item",financialProductsDesc:".multi-finance-calculator-wrap .financial-products .product-item .product-desc",equalHeightAttr:".multi-finance-calculator-wrap .compare-financial-options .attribute",equalDataAttr:"data-attribute-name",headerCompare:".multi-finance-calculator-wrap .compare-financial-options .head",compareElements:".vehicle-item",buttonAddVehicle:".compare-financial-options .vehicle-action a",buttonDelVehicle:".compare-financial-options .remove-btn a"},e=e||{}),this.init()};return u.getInstance=function(){return null==u.prototype._singletonInstance&&(u.prototype._singletonInstance=new d.paymentEstimator),u.prototype._singletonInstance},u.prototype.productToggleInfo=function(){g(this.opts.financialProduct).on("click",function(){g(this).toggleClass("open-info")})},u.prototype.bundleProductSlider=function(){var e=g(this.opts.financialProductList),t=g(this.opts.financialListItem).length,a=g(this.opts.financialProductWrap),i=(g(this.opts.financialSlideItem).length,1),n=this;function o(){g(window).width()<n.opts.tablet&&!a.find(".flex-viewport").length&&g(".multi-finance-calculator-wrap .financial-products .product-slider").flexslider({animation:"slide",selector:".slide-wrap > li",animationLoop:!1,start:function(){},before:function(){},after:function(){}})}function r(){var e=g(".multi-finance-calculator-wrap .financial-products .product-slider .slide-wrap > li").length;e&&1<e&&(a.addClass("multi-product"),o(),g(window).on("resize",l.throttle(function(){o()},500)))}t&&1<t&&e.addClass("multi-product"),r(),a.bind("DOMSubtreeModified",function(){var e;i!==g(".multi-finance-calculator-wrap .financial-products .product-slider .slide-wrap > li").length&&(i=g(".multi-finance-calculator-wrap .financial-products .product-slider .slide-wrap > li").length,clearTimeout(e),e=setTimeout(function(){r()},500))})},u.prototype.toUnique=function(e,t,a){for(t=e.length;a=--t;)for(;a--;)e[t]===e[a]&&e.splice(a,1);return e},u.prototype.equalHeight=function(e,t){var a=0;void 0!==t&&!0===t&&g(window).width()<this.opts.tablet?g(e).css("min-height","auto"):(g(e).css("min-height","auto"),g(e).each(function(){var e=g(this).outerHeight();a<e&&(a=e)}),g(e).css("min-height",a))},u.prototype.getVehiceAttributes=function(){var e=[],t=[],a=this.opts.equalHeightAttr,i=this.opts.equalDataAttr;return g(a).each(function(){e.push(g(this).attr(i))}),t=0<e.length?this.toUnique(e):t},u.prototype.equalHeightAttributes=function(){var a=this,e=this.getVehiceAttributes(),i=this.opts.equalHeightAttr,n=this.opts.equalDataAttr,t=this.opts.headerCompare;function o(){g.each(e,function(e,t){a.equalHeight(i+"["+n+"="+t+"]")}),g(t).length&&a.equalHeight(t)}o(),g(window).on("resize",l.throttle(function(){o()},100))},u.prototype.equalHeightFinancialProducts=function(){var e=this,t=this.opts.financialProductsDesc;function a(){g(t).length&&e.equalHeight(t,!0)}a(),g(window).on("resize",l.throttle(function(){a()},100))},u.prototype.initEvents=function(){var t,a,i,n,o,e=this,r=(g(".overlay-content-inner .vehicle-wrap"),g(".overlay-container .overlay-close"),!1),l=(g(document.body).on("click","#showroom-vehicle-card .vehicle-card-grid .item-content, .overlay-container .overlay-close",function(){r=!0,g(".form-dropdown.mode-dropdown .select2-container").remove();try{g(".form-dropdown #select-models").removeClass("select2-offscreen").select2({minimumResultsForSearch:-1})}catch(e){}g(".multi-finance-calculator-wrap .radio-info-section .year-radio-holder label.checked").removeClass("checked")}),g(".form-dropdown.mode-dropdown #select-models")&&g(document).on("ajaxComplete.afterCloseOverlay",function(e){if(r){g(".form-dropdown.mode-dropdown .select2-container").remove();try{g(".form-dropdown #select-models").removeClass("select2-offscreen").select2({minimumResultsForSearch:-1})}catch(e){}r=!1}}),g(document.body).on("click",".overlay-content .vehicle-card-grid .item a",function(e){e.preventDefault()}),g("#scenario-5").length&&!(l=window.matchMedia("(max-width: 760px)").matches)&&(t=g("#scenario-5").offset().top,a=g("#scenario-5").offset().left,i=g(window).width()-(g("#scenario-5").offset().left+g("#scenario-5").outerWidth()),n=g(".secondaryNavigation.section").offset().top,o=g("#scenario-5").outerWidth(),g(window).scroll(function(){var e=g(window).scrollTop();t<e+n+70?(g("#scenario-5").css("position","fixed"),g("#scenario-5").css("z-index","9999"),g("#scenario-5").css("width",o+"px"),g("#scenario-5").css("top","0"),g("#scenario-5").css("margin-top",n+70+"px"),g("#scenario-5").css("left",a+"px"),g("#scenario-5").css("rigth",i+"px")):(g("#scenario-5").css("position","relative"),g("#scenario-5").css("width","100%"),g("#scenario-5").css("top","0"),g("#scenario-5").css("margin-top","0"),g("#scenario-5").css("left","0"),g("#scenario-5").css("rigth","0"))})),g(document.body).on("click",".add-model, .remove-model, .remove-btn",function(){e.equalHeightAttributes(),g(".accordion-body.active").height(g(".accordion-body.active > .accordion-content").height())}),g(".financing-package .tabs-nav-item").off("click.tabs"),g(".financing-package .tabs-nav-item").on("click",function(e){if(e.preventDefault(),g(this).hasClass("is-active"))return!1;g(".financing-package .tabs-nav-item.is-active").removeClass("is-active"),g(this).addClass("is-active")}),g(".financing-package li.tabs-nav-item:first").addClass("is-active"),"mobile"===y.getMediaType());function s(){var e=(e=c(g(".multi-finance-calculator-wrap .payment-summary span.payment-estimated-showroom-price:first")))||c(g(".multi-finance-calculator-wrap .payment-summary span.payment-admin-fee:first")),t=g("span[data-ng-if='ctrl.summaryList.monthlyFinRate']"),a=g("span[data-ng-if='ctrl.summaryList.downPaymentRate']"),e={vehicleNameplate:g(".info-section > h4#nameplateName").text(),vehicleModel:g("select#select-models .model-dropdown:selected").text()+"|"+g("#select-models").data("selected-modelkey"),financialProgram:g.trim(g(".financing-package .tabPanel .tabs-nav .tabs-nav-list .is-active").text()),price:c(g(".multi-finance-calculator-wrap .payment-summary span.payment-price:first")),downPayment:c(g(".multi-finance-calculator-wrap .payment-summary span.payment-downPayment:first")),amountFinanced:c(g(".multi-finance-calculator-wrap .payment-summary span.payment-amountFinanced:first")),terms:c(g(".multi-finance-calculator-wrap .payment-summary span.payment-term:first")),monthlyPayment:c(g(".multi-finance-calculator-wrap .payment-summary span.payment-monthlyPayment:first")),ewPackage:c(g(".multi-finance-calculator-wrap .payment-summary span.payment-vehicle-insurane:first")),displayYear:c(g(".multi-finance-calculator-wrap .radio-info-section .year-radio-holder .checked")),availableIncentives:c(g(".multi-finance-calculator-wrap .payment-summary span.payment-available-incentives:first")),estimatedShowroomPrice:e,estimatedSellingPrice:c(g(".multi-finance-calculator-wrap .payment-summary span.payment-estimated-selling-price:first")),retailCash:d(g(".multi-finance-calculator-wrap .payment-summary span.payment-retail-cash:first"),t||"","%"),loyalityBonus:c(g(".multi-finance-calculator-wrap .payment-summary span.payment-loyality-bonus:first")),netPrice:c(g(".multi-finance-calculator-wrap .payment-summary span.payment-net-price:first")),netTradeInValueOfUsedCar:c(g(".multi-finance-calculator-wrap .payment-summary span.payment-net-trade-in-value-of-used-car:first")),loanTermInMonths:c(g(".multi-finance-calculator-wrap .payment-summary span.payment-loan-term-in-months:first")),annualInterestRate:d(g(".multi-finance-calculator-wrap .payment-summary span.payment-annual-interest-rate:first"),a||"","%"),monthlyPaymentEMI:c(g(".multi-finance-calculator-wrap .payment-summary span.payment-monthly-payment-emi:first"))},t=g("span[data-ng-if='!ctrl.exceededMaxCetInstalment && ctrl.summaryList.withFP.monthlyCet']").html()||"",a=g("span[data-ng-if='ctrl.summaryList.withoutFP.monthlyCet']").html(),i=g("span[data-ng-if='ctrl.summaryList.withoutFP.annualCet']").html();if("FCBRA"==g("#calculator-version").text()){e.mwfp=c(g(".multi-finance-calculator-wrap .payment-summary span.payment-monthlycetwfp:first"))+t,e.awfp=c(g(".multi-finance-calculator-wrap .payment-summary span.payment-annualcetwfp:first"))+t,e.fafwfp=c(g(".multi-finance-calculator-wrap .payment-summary span.payment-total-financed-wfp:first")),e.mwofp=c(g(".multi-finance-calculator-wrap .payment-summary span.payment-monthlycetwofp:first"))+(a||""),e.awofp=c(g(".multi-finance-calculator-wrap .payment-summary span.payment-annualcetwofp:first"))+(i||""),e.fafwofp=c(g(".multi-finance-calculator-wrap .payment-summary span.payment-total-financed-wofp:first"));try{var n=g("#vcatalog-info").data("mdlyr");n&&isNaN(n)?e.mdlyr=escape(n):n&&!isNaN(n)?e.mdlyr=escape(parseInt(n)).trim():e.mdlyr="-",e.ctlg=escape(g("#vcatalog-info").data("ctlg").trim()),e.cksc=escape(g("#vcatalog-info").data("cksc").trim())}catch(e){console.error("Failed to get catalog info: "+e)}}return"ARG"==g("#countryCodeISO").val()&&(e.downPayment=g('.multi-finance-calculator-wrap .financing-package .form label input[name="downpayment"]:first').data("down-payment"),e.loanAmount=g('.multi-finance-calculator-wrap .financing-package .form label input[name="loanAmount"]:first').data("loan-amount"),e.countryCodeISO=g("#countryCodeISO").val(),e.modelYear=g(".form #nameplateYear").val()),"MEX"==g("#countryCodeISO").val()&&(t=g(".financial-mx-calculator").find(".selected-item").children("div").children("h4.ng-binding").text(),a=g(".financial-mx-calculator").children("h4").text(),i=g(".financial-mx-calculator").find(".selected-item").children("div").attr("id"),n=v.element("#insuranceType"),e.downPayment=g('.multi-finance-calculator-wrap .financing-package .form label input[name="downPayment"]:first').data("down-payment"),e.retailCash=u(g(".multi-finance-calculator-wrap .payment-retail-cash")),e.annualInterestRate=u(g(".multi-finance-calculator-wrap .payment-annual-interest-rate")),e.insurance=g("#MultiAnnualInsurance").prop("checked"),e.countryCodeISO=g("#countryCodeISO").val(),e.modelYear=g(".form #nameplateYear").val(),e.lifeInsurance=g("#FinanceLifeInsurance").prop("checked"),e.lifeInsuranceType=g("#FinanceLifeInsurance").prop("checked")?"finance":"cash",e.vehicleInsurance=!0,e.vehicleInsuranceType=g("#insuranceType").val(),e.zipCode=g("#zipCode").val(),e.valueVehicleInsurance=n.find(":selected").text(),e.mexCreditInsuranceTypeFinanceLbl=v.element("#MEXCreditInsuranceTypeFinance").text(),e.mexCreditInsuranceTypeCashLbl=v.element("#MEXCreditInsuranceTypeCash").text(),null!=i?(e.defaultRequest=!1,e.financePlan=i):e.defaultRequest=!0,e.financePlanName=null!=t?t:"",e.financePlanTitle=null!=a?a:""),"BRA"==g("#countryCodeISO").val()&&(n=g(".multi-finance-calculator-wrap .payment-retail-cash span").html(),i=(i=g(".multi-finance-calculator-wrap .payment-annual-interest-rate span").html())||"%",e.retailCash=u(g(".multi-finance-calculator-wrap .payment-retail-cash"))+(n||""),e.annualInterestRate=u(g(".multi-finance-calculator-wrap .payment-annual-interest-rate"))+i,e.modelYear=g(".form #nameplateYear").val(),"-undefined"==e.mwfp&&(e.mwfp="-"),"-undefined"==e.awfp)&&(e.awfp="-"),g.param(e)}function c(e){return g.trim(e.clone().children().remove().end().text())}function d(e,t,a){return(p(e)+p(t)).toFixed(1)+a}function u(e){var e=e.html(),t=0;return-1!==(t=e?e.indexOf("<"):t)&&0<t?e.substring(0,t)?e.substring(0,t).trim():0:-1==t&&e?e.trim():0}function p(e){if(e&&e.html()&&0<e.html().trim().length){e=parseFloat(e.html());if(!isNaN(e))return e}return 0}function m(){return document.location.protocol+"//"+document.location.hostname+":"+document.location.port}function h(){var t,e=document.querySelectorAll("form"),a=-1<navigator.userAgent.indexOf("Edge")||-1<navigator.userAgent.indexOf("Trident/7.0");if(NodeList.prototype.forEach)NodeList.prototype.forEach=Array.prototype.forEach,e.forEach(function(e){null!==e.querySelector('[name="FORM_TYPE"][value="CFC"]')&&(t=e)});else if(a&&"pt_BR"===g("[data-locale]").data("locale"))for(var i=Array.from(e),n=0;n<i.length;n++)null!==i[n].querySelector('[name="FORM_TYPE"][value="CFC"]')&&(t=i[n]);else e.forEach(function(e){null!==e.querySelector('[name="FORM_TYPE"][value="CFC"]')&&(t=e)});return t}function f(e){var t=h();void 0!==t&&t.classList.add("hide"),g(".overlay-container").is(":visible")&&g.ajax({type:"GET",url:e,dataType:"html",success:function(e){var t,i;e=e,g(".form-popup-375-holder").length||(e=g(e).find(".splitter-column").html(),g(".overlay-container .overlay-content").append('<div class="overlay-msg-content-inner is-active">'+e+"</div>"),g(".overlay-container .overlay-content-inner").removeClass("is-active"),0<(e=g(".overlay-content .overlay-msg-content-inner.is-active").find(".box-data")).length&&(t=e.data("bgcolor"),e.closest(".common-box.section").addClass(t)),0!=g(".email-confirmation-wrap").length&&g(".email-confirmation-wrap").parents(".overlay-content").find(".overlay-close").show(),i=window.location.href,e=g(".overlay-container").find("a.link-overlay:not(.popup-link-initialized), .link-overlay a:not(.popup-link-initialized)"),-1<i.indexOf("#")&&(i=i.split("#")[0]),e.filter(function(e,t){t=g(t).data("deep-linking");return void 0===t||"1"==t}).each(function(e,t){var a=getLocation(t.href);isAuthor&&-1==a.indexOf("?wcmmode=disabled")&&-1==a.indexOf("&wcmmode=disabled")&&(-1!=a.indexOf("?")?a+="&wcmmode=disabled":a+="?wcmmode=disabled"),t.search&&(-1!=a.indexOf("?")?a+=t.search.replace("?","&"):a+=t.search),g(t).attr("href",i+"#overlay"+a),g(t).hasClass("base-url")||g(t).addClass("base-url").attr("href",i+"#overlay"+a)}))},error:function(e){test(t&&t.getAttribute("data-error"))}})}g(".save-btn-mcal").on("click",function(e){b&&b.getCreditPaymentEstimatorEvents().action("save"),l?window.open(m()+g("#png-url").text()+"?"+s(),"_blank"):window.location.href=m()+g("#pdf-url").text()+"?"+s()}),g(".print-btn-mcal").on("click",function(e){var t=m()+g("#pdf-url").text()+"?contentDisposition=inline&"+s(),a=window.open(t,"_blank");b&&b.getCreditPaymentEstimatorEvents().action("print"),a||(window.location.href=t)}),g(".mail-btn-mcal").on("click",function(){var e=g("#mail-url").text()+g("#mail-identifier").text();b&&b.getCreditPaymentEstimatorEvents().action("email"),g.get(e,{},function(e){try{e.userEmailBody||(e=JSON.parse(e)),window.location.href="mailto:?body="+(t=e.userEmailBody,a={"${vehicleNameplate}":g(".info-section > h4").text(),"${vehicleModel}":g(".info-section .form-dropdown .select2-container .select2-chosen").text(),"${pdfLink}":m()+g("#pdf-url").text()+"?"+s()},i=g("<temp></temp>").append(t).text().replace(/&nbsp;/g," "),Object.keys(a).forEach(function(e){i=i.replace(e,a[e])}),encodeURIComponent(i))}catch(e){}var t,a,i}).fail(function(e){})}),g("[data-cfc-email]").one("click",function(e){e.preventDefault(),g(window).on("overlayloaded",function(e){var a;e.preventDefault(),"BRA"===(document.querySelector("#countryCodeISO")&&document.querySelector("#countryCodeISO").value)&&void 0!==(a=h())&&g(a).off("submit").on("submit",function(e){var t;e.preventDefault(),window.verifiedHuman?(t={emaildId:g(this).find('input[name="DS_EMAIL"]').val(),pdfUrl:document.location.protocol+"//"+document.location.hostname+g("#pdf-url").text()+"?contentDisposition=inline&"+s(),countryCode:document.querySelector('[name="countryCodeISO"]')&&document.querySelector('[name="countryCodeISO"]').value,templateUrl:(e="",e=window.location.origin||window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:""),(e=(e+=window.location.pathname).endsWith(".html")?e.substring(0,e.lastIndexOf(".")):0<(t=e.indexOf("predelivery"))?e.substring(0,t)+"predelivery/":e)+".edm.CFC.data"),pdfFileName:document.querySelector("#pdf-name")&&document.querySelector("#pdf-name").innerText,vehicleNameplate:g(".info-section > h4#nameplateName").text(),vehicleModel:g("select#select-models .model-dropdown:selected").text()+"|"+g("#select-models").data("selected-modelkey"),availableIncentives:c(g(".multi-finance-calculator-wrap .payment-summary span.payment-available-incentives:first")),estimatedSellingPrice:c(g(".multi-finance-calculator-wrap .payment-summary span.payment-estimated-selling-price:first"))},(e=g("#vcatalog-info").data("mdlyr"))&&isNaN(e)?t.mdlyr=escape(e):e&&!isNaN(e)?t.mdlyr=escape(parseInt(e)).trim():t.mdlyr="-",t.ctlg=escape(g("#vcatalog-info").data("ctlg").trim()),t.recaptcha=a.querySelector('[name="g-recaptcha-response"]').value,a.querySelector(".form-submit button").setAttribute("disabled",!0),g.ajax({url:g("#serviceLayerUrl").val()+"/fordowner/vehicle/buildandprice/credit/models/emailpdf",dataType:"json",data:t,type:"POST",success:function(e){!0===e.result?f(a&&a.getAttribute("data-success")):f(a&&a.getAttribute("data-error"))},error:function(e){f(a&&a.getAttribute("data-error"))}})):window.grecaptcha.execute()})})}),g('input[name="validationZone"]')&&"true"===g('input[name="validationZone"]').val()&&g(".zonePriceYes").each(function(){1===g(this).parent().find(".zonePriceYes").length&&(g(this).parent().find(".zonePriceBuilding").css("display","none"),g(this).parent().find(".zonePriceYes").css("display","block"),g(this).parent().find(".zonePriceYes").css("visibility","visible"))}),g(document).ready(function(){g('input[name="validationZone"]').on("change",function(){"true"===g('input[name="validationZone"]').val()&&g(".zonePriceYes").each(function(){1===g(this).parent().find(".zonePriceYes").length&&(g(this).parent().find(".zonePriceBuilding").css("display","none"),g(this).parent().find(".zonePriceYes").css("display","block"),g(this).parent().find(".zonePriceYes").css("visibility","visible"))})})})},u.prototype.asideOverlayFilters=function(){if(void 0!==g(".multi-finance-calculator-wrap .overlay-aside .filter label")){for(var e=g(".multi-finance-calculator-wrap .overlay-aside .filter label"),t=0;t<e.length;t++)if(g(e[t]).find("input").is(":checked")){g(e[t]).addClass("active");break}e.on("click",function(){g(this).closest(".labels").find("label.active").removeClass("active"),g(this).addClass("active")})}},u.prototype.selectModelsFilter=function(){for(var e=g(".year-radio-holder label"),t=0;t<e.length;t++)g(e[t]).closest(".year-radio-holder").find("input").is(":checked")&&g(e[t]).addClass("checked");e.unbind().on("click",function(e){var t=g(this);t.hasClass("checked")?(t.closest(".year-radio-holder").find("input").attr("checked",!1),t.removeClass("checked")):(t.closest(".radio-info-section").find("label.checked").removeClass("checked"),t.addClass("checked")),setTimeout(function(){g(".form-dropdown.mode-dropdown .select2-container").remove();try{g(".form-dropdown #select-models").removeClass("select2-offscreen").select2({minimumResultsForSearch:-1})}catch(e){}},500)})},u.prototype.asideOverlayMobileFilters=function(){if(void 0!==g(".multi-finance-calculator-wrap .overlay-header-side .filter label")){for(var e=g(".multi-finance-calculator-wrap .overlay-header-side .filter label"),t=0;t<e.length;t++)if(g(e[t]).find("input").is(":checked")){g(e[t]).addClass("active");break}e.on("click",function(){g(this).closest(".labels").find("label.active").removeClass("active"),g(this).addClass("active")})}},u.prototype.closeOverlayAside=function(){g(document.body).on("click",".multi-finance-calculator-wrap .overlay-aside .close-aside-btn",function(){g("html").hasClass("rtl")?g(this).closest(".overlay-aside").hasClass("opened")?(g(this).animate({left:-37},500),g(this).closest(".overlay-aside").animate({marginRight:-(g(".multi-finance-calculator-wrap .overlay-aside").innerWidth()+36)},500),g(this).closest(".overlay-aside").removeClass("opened"),g(this).removeClass("active")):(g(this).animate({left:-16},500),g(this).closest(".overlay-aside").animate({marginRight:-35},500),g(this).closest(".overlay-aside").addClass("opened"),g(this).addClass("active")):g(this).closest(".overlay-aside").hasClass("opened")?(g(this).animate({right:-37},500),g(this).closest(".overlay-aside").animate({marginLeft:-(g(".multi-finance-calculator-wrap .overlay-aside").innerWidth()+36)},500),g(this).closest(".overlay-aside").removeClass("opened"),g(this).removeClass("active")):(g(this).animate({right:-16},500),g(this).closest(".overlay-aside").animate({marginLeft:-35},500),g(this).closest(".overlay-aside").addClass("opened"),g(this).addClass("active"))})},u.prototype.checkActiveSort=function(){var e;void 0!==g("#showroom-vehicle-card .dropdown-vehicle-sort")&&void 0!==(e=g(".dropdown-vehicle-sort li.active"))&&g(".dropdown-vehicle-sort label .by").text(e.find("> a").text())},u.prototype.init=function(){this.productToggleInfo(),this.bundleProductSlider(),this.equalHeightFinancialProducts(),this.initEvents(),this.checkActiveSort(),this.asideOverlayFilters(),this.asideOverlayMobileFilters(),this.closeOverlayAside(),this.selectModelsFilter()},c.init=function(){new d.paymentEstimator;g(".multi-finance-calculator-wrap").length&&g(".multi-finance-calculator-wrap").each(function(e,t){v.bootstrap(t,["multiFinanceCalculator"])}),"BRA"==g("#countryCodeISO").val()&&g("select#select-models").change(function(){g("select#select-models").removeAttr("disabled")})},c}),define("multi-finance-calculator/component.multiFinanceCalculator.services",["multi-finance-calculator/component.multiFinanceCalculator.app","multi-finance-calculator/services/multiFinanceCalculator.service.workflowdata"],function(e,t){e.service("workFlowData",["$rootScope","$location",t])}),define("multi-finance-calculator/controllers/multiFinanceCalculator.controller.main",["analytics/analyticsEventLayer"],function(n){return function(e,t){this.data=t.getWorkFlowData();var a=!1,i=!1;n&&n.getCreditPaymentEstimatorEvents().action("view offers"),this.accordionClick=function(e){if(n)switch(String(e)){case"payment-details":a||(a=!0,n.getCreditPaymentEstimatorEvents().action("payment details"));break;case"compare-plans":i||(i=!0,n.getCreditPaymentEstimatorEvents().action("compare plans"))}}}}),define("multi-finance-calculator/controllers/FCARG/multiFinanceCalculator.controller.CompareFinancialOptions",["analytics/analyticsEventLayer"],function(n){return function(e,t,a){var i=this;i.workFlowData=t.getWorkFlowData(),i.currencySymbol=angular.element("#vehicle-info-currency").text()||angular.element("#currencySymbol").val(),i.termSymbol=angular.element("#financing-package-period-uom").text(),i.currencyFormat=angular.element("#vehicle-info-currency-format").text(),i.classHolder="",i.modelsList=[],i.ActiveIds=[],i.selectedModel=t.getWorkFlowData().selectedModel,i.checkLength=function(){3<i.ActiveIds.length?angular.element(document.querySelector(".vehicle-item.hidden-attrs")).addClass("ng-hide"):angular.element(document.querySelector(".vehicle-item.ng-hide")).removeClass("ng-hide")},i.checkLength(),i.addNewModel=function(e){e.preventDefault();e=JSON.parse(JSON.stringify(t.getWorkFlowData().selectedModel));i.modelsList.push(e),i.ActiveIds.push(t.getWorkFlowData().selectedModel.vehicleAssetId),i.checkLength(),n&&n.getCreditPaymentEstimatorEvents().action("compare plans","add")},i.removeItem=function(e,t){e.preventDefault(),i.modelsList.splice(t,1),i.ActiveIds.splice(t,1),i.checkLength(),n&&n.getCreditPaymentEstimatorEvents().action("compare plans","remove")}}}),define("multi-finance-calculator/controllers/FCARG/multiFinanceCalculator.controller.financingPackage",["_","analytics/analyticsEventLayer"],function(e,m){return function(t,e,a,i,n){var o=this;o.inputError=!1,o.maxLoanAmountError=!1,o.justLoaded=!0,o.zeroLoanAmountError=!1,o.emptyResponse=!1;var r,l="",s=(o.serviceData=e.getWorkFlowData(),o.init=function(){if(o.calcData=o.serviceData.selectedModel.calcData,"DATA_NOT_FOUND"===o.calcData.errorCode||"MISS_VEHICLE_ID"===o.calcData.errorCode||"SOMETHING_OCCUR_ERROR"===o.calcData.errorCode||"INVALID_TERM"===o.calcData.errorCode)return o.emptyResponse=!0,o.term=s,!1;o.term?o.lastestTermSelected=o.term:o.term=o.lastestTermSelected;setTimeout(function(){$("select.terms-dropdown").attr("data-old-vale")&&$("select.terms-dropdown").attr("data-old-vale")==$("select.terms-dropdown").val()||($("select.terms-dropdown").attr("data-old-vale",$("select.terms-dropdown").val()),$("select.terms-dropdown").val(o.term).change())},20),o.selectedModel=e.getWorkFlowData().selectedModel,o.calcData&&(o.emptyResponse=!1,l===o.serviceData.selectedModel.key?o.justLoaded?(o.maxLoanAmountError=!1,o.justLoaded=!1):o.maxLoanAmountError="LOANAMOUNT_TOO_LARGE"==o.calcData.errorCode:o.maxLoanAmountError=!1,o.termList=o.calcData.availableTerms.length?o.calcData.availableTerms:[],o.term=o.calcData.availableTerms.length?o.term:s,o.currencySymbol=angular.element("#vehicle-info-currency").text()||angular.element("#currencySymbol").val(),isNaN(o.currencySymbol)||(o.currencySymbol=String.fromCharCode(o.currencySymbol)),o.termSymbol=angular.element("#financing-package-period-uom").text(),o.currencyFormat=angular.element("#vehicle-info-currency-format").text(),o.calcData.paymentDetailsResult)&&(o.exShowroomPrice=o.calcData.paymentDetailsResult[0].exShowroomPrice?o.calcData.paymentDetailsResult[0].exShowroomPrice.value:o.defaultValue,o.calcData.paymentDetailsResult[0].exShowroomPrice.accessoriesPrice?(o.price=Math.round(Number(o.calcData.paymentDetailsResult[0].exShowroomPrice.value)+Number(o.calcData.paymentDetailsResult[0].exShowroomPrice.accessoriesPrice)),o.accessoriesPrice=Math.round(o.calcData.paymentDetailsResult[0].exShowroomPrice.accessoriesPrice)):(o.price=Math.round(o.calcData?o.calcData.paymentDetailsResult[0].exShowroomPrice.value:o.defaultValue),o.calcData.paymentDetailsResult[0].exShowroomPrice.accessoriesPrice=0));angular.element(document.getElementById("select2-chosen-3")).text(o.term+" "+o.termSymbol),o.loanAmount=l===o.serviceData.selectedModel.key?o.loanAmount:+o.calcData.paymentDetailsResult[0].debtBalance,u(),l=o.serviceData.selectedModel.key,o.rate=o.calcData.rate?o.calcData.rate.toFixed(2):o.defaultValue,o.tfcWithVAT=o.calcData.tfcWithVAT||o.defaultValue,o.tfcWoVAT=o.calcData.tfcWoVAT||o.defaultValue,d&&(-1!==o.rate.indexOf(".")&&(o.rate=o.rate.replace(/\./g,d)),-1!==o.tfcWithVAT.toString().indexOf(".")&&(o.tfcWithVAT=o.tfcWithVAT.toString().replace(/\./g,d)),-1!==o.tfcWoVAT.toString().indexOf(".")&&(o.tfcWoVAT=o.tfcWoVAT.toString().replace(/\./g,d)),o.calcData.rate)&&-1!==o.calcData.rate.toString().indexOf(".")&&(o.calcData.rate=o.calcData.rate.toString().replace(/\./g,d));n.$broadcast("calculationComplete")},$("select.terms-dropdown").data("defaultterm")),c=angular.element("#default-field-value"),d=(o.defaultValue=c.text()||"0.00",c.attr("data-rate-formatter"));function u(){t.payment.loanAmount.$viewValue=i("currencyFormat")(o.loanAmount,o.currencySymbol,o.currencyFormat),t.payment.loanAmount.$render()}function p(){var e={modelKey:o.selectedModel.key,term:o.term,loanAmount:o.loanAmount,accessoriesPrice:0};return o.calcData&&o.calcData.paymentDetailsResult&&(e.accessoriesPrice=o.calcData.paymentDetailsResult[0].exShowroomPrice.accessoriesPrice),e}o.onDownPaymentFocus=function(){o.inputError=!1,o.maxLoanAmountError=!1,o.zeroLoanAmountError=!1,t.payment.loanAmount.$viewValue=o.loanAmount,t.payment.loanAmount.$render()},$("#loanAmount").on("change focusout mouseout keydown",function(e){13==e.which&&(e.preventDefault(),o.onDownPaymentBlur(),$("#loanAmount").blur(),u())}),o.onDownPaymentBlur=function(){Number(o.loanAmount)||0==Number(o.loanAmount)?+o.loanAmount>+o.serviceData.selectedModel.price?o.maxLoanAmountError=!0:+o.loanAmount<=0?o.zeroLoanAmountError=!0:o.loanAmount!=r&&(r=o.loanAmount,u(),m&&m.getCreditPaymentEstimatorEvents().action("change loan amount"),e.calculateRate(p(),o.selectedModel)):o.inputError=!0},o.changeDownPayment=function(e){},o.changeLoanAmount=function(e){Number(e)&&(o.loanAmount=Number(e))},o.changeTerm=function(){o.calcData&&o.calcData.amountFinanced&&o.term!=o.calcData.amountFinanced[0].loanTerm&&(m&&m.getCreditPaymentEstimatorEvents().action("change terms",o.term),e.calculateRate(p(),o.selectedModel))},c=t.$on("initComplete",function(e){t.$apply(function(){o.init()}),u()}),t.$on("ARG_SelectedModel",function(e,t){o.term=t||s}),t.$on("$destroy",c)}}),define("multi-finance-calculator/controllers/FCARG/multiFinanceCalculator.controller.summaryList",[],function(){return function(e,t){var a=this,i=(a.init=function(){a.fromBuildAndPrice,a.calcData=t.getWorkFlowData().selectedModel.calcData,a.currencySymbol=angular.element("#vehicle-info-currency").text()||angular.element("#currencySymbol").val(),a.termSymbol=angular.element("#financing-package-period-uom").text(),a.termSymbolSingle=angular.element("#financing-package-period-uom-single").text(),a.currencyFormat=angular.element("#vehicle-info-currency-format").text(),a.rate=a.calcData.rate?a.calcData.rate+"%":a.defaultValue,a.calcData&&a.calcData.paymentDetailsResult?a.calcData.paymentDetailsResult[0].exShowroomPrice&&a.calcData.paymentDetailsResult[0].exShowroomPrice.accessoriesPrice&&(a.fromBuildAndPrice=!0):a.fromBuildAndPrice=!1;var e=a.calcData.paymentDetailsResult?a.calcData.paymentDetailsResult[0]:null;e&&e.exShowroomPrice.accessoriesPrice?(a.fromBuildAndPrice=!0,a.summaryList.accessoriesPrice=Math.round(e?a.calcData.paymentDetailsResult[0].exShowroomPrice.accessoriesPrice:0),a.summaryList.exShowroomPrice=a.calcData.paymentDetailsResult[0].exShowroomPrice.value,isNaN(a.summaryList.exShowroomPrice)||(a.summaryList.price=Math.round(a.summaryList.accessoriesPrice+a.summaryList.exShowroomPrice))):(a.fromBuildAndPrice=!1,e&&(a.summaryList.price=Math.round(a.calcData.paymentDetailsResult[0].exShowroomPrice.value)),a.summaryList.accessoriesPrice=0);a.paymentDetailsResult=a.calcData?a.calcData.paymentDetailsResult:[],a.summaryList.downPayment=a.calcData?a.calcData.downPayment:defaultValue,a.calcData&&a.calcData.amountFinanced&&(a.summaryList.term=a.calcData.amountFinanced[0].loanTerm);a.downPayment=a.calcData.downPayment,a.amountFinanced=a.calcData?a.calcData.amountFinanced:[]},a.defaultValue=angular.element("#default-field-value").text(),a.summaryList={price:null,downPayment:0,amountFinanced:null,term:$("select.terms-dropdown").data("defaultterm")||12,exShowroomPrice:null,accessoriesPrice:0},e.$on("calculationComplete",function(e){a.init()}));e.$on("$destroy",i)}}),define("multi-finance-calculator/controllers/FCARG/multiFinanceCalculator.controller.vehicleInfo",["analytics/analyticsEventLayer"],function(i){return function(e,o,t){var r=this,a=(r.currencySymbol=angular.element("#vehicle-info-currency").text()||angular.element("#currencySymbol").val(),r.currencyFormat=angular.element("#vehicle-info-currency-format").text(),r.showOverlay=!0,r.currentModel=0,r.workFlowData=o.getWorkFlowData(),r.selectedVehicle=o.getWorkFlowData().selectedVehicle,r.selectedModel=o.getWorkFlowData().selectedModel,r.buildAndPrice=!!o.getWorkFlowData().buildAndPrice&&o.getWorkFlowData().buildAndPrice,r.showConfirmationOverlay=!1,r.vehicleList=r.workFlowData.vehicleList,r.vehicleDefList=r.workFlowData.vehicleDefList,r.sortByCategory=!0,r.showLoader=o.showLoader,r.currentKeyModel=r.selectedModel.key,r.filterSort="",r.filterByYear="",r.oldSelectedVehicle=o.getWorkFlowData().selectedVehicle,r.oldSelectedModel=o.getWorkFlowData().selectedModel,r.modelsList=o.getWorkFlowData().modelsList,r.filterModelsByYear="",r.analyticsName=o.getWorkFlowData().selectedVehicle.analyticsName,fordAnalytics&&(fordAnalytics.onclick={nameplate:r.selectedVehicle.analyticsName,modelYear:r.selectedVehicle.year}),$.urlParam=function(e){e=new RegExp("[?&]"+e+"=([^&#]*)").exec(window.location.href);return null==e?null:decodeURI(e[1])||0},$.urlParam("from"));$.urlParam("name"),a?r.showOverlay=!1:($(".ARG .main-vehicle-info").find(".header-overlay").hide(),angular.element(document.querySelector(".multi-finance-calculator-wrap")).addClass("is-overlay-open"),r.showConfirmationOverlay=!1,r.showOverlay=!0),r.openConfirmOverlay=function(){r.showConfirmationOverlay=!0,angular.element(document.querySelector("html")).addClass("is-overlay-open"),i&&i.getCreditPaymentEstimatorEvents().action("change vehicle","bnp")},r.closeConfirmOverlay=function(){r.showConfirmationOverlay=!1,angular.element(document.querySelector("html")).removeClass("is-overlay-open")},r.openOverlay=function(){r.showOverlay=!0,$(".ARG .main-vehicle-info").find(".header-overlay").show(),angular.element(document.querySelector(".multi-finance-calculator-wrap")).addClass("is-overlay-open"),r.showConfirmationOverlay=!1,angular.element(document.querySelector("html")).removeClass("is-overlay-open"),i&&i.getCreditPaymentEstimatorEvents().action("change vehicle")},r.returnToBnp=function(e){var t={k:r.selectedVehicle.key,n:r.selectedVehicle.name,img:r.selectedVehicle.imagePreview,fef:r.selectedVehicle.fuelEfficiencyFrom,mk:r.selectedModel.key,mn:r.selectedModel.name,mp:r.selectedModel.price,map:r.totalAccessoryPrice,mimg:r.imageURL},a=new URL(window.location.href).split("?"),t=$.param(t);0<a.length&&(t=t+"&"+a[1]),e&&(window.location=encodeURI(e+"?"+t))},r.sortModelsByYear=function(t){var e,a,i,n;+r.filterModelsByYear!=+t?(r.filterModelsByYear=t,e=JSON.parse(JSON.stringify(r.selectedVehicle)),a=[],i=t,n=[],r.modelsList.forEach(function(e){+e.nameplateYear==+t&&(a.push(e),-1===n.indexOf(e.nameRelVeh))&&n.push(e.nameRelVeh)}),e.name=i+" "+n.join(", "),e.models=a,r.selectedVehicle=e,r.selectedModel=r.selectedVehicle.models[0],o.setSelectedModel(r.selectedModel,!0)):(r.filterModelsByYear="",r.selectedVehicle=o.getWorkFlowData().selectedVehicle,r.selectedModel=o.getWorkFlowData().selectedModel)},r.sortBy=function(e){"category"===e?(r.sortByCategory=!0,r.filterSort=""):(r.sortByCategory=!1,r.filterSort=e),i.getCreditPaymentEstimatorEvents().action("mini showroom","sort","category"===e?e:"price")},r.closeOverlay=function(){r.showOverlay=!1,angular.element(document.querySelector(".multi-finance-calculator-wrap")).removeClass("is-overlay-open")},r.setCurrentVehicleModel=function(e){var t;r.selectedVehicle.models[e].key!==r.currentKeyModel&&(r.currentKeyModel=r.selectedVehicle.models[e].key,r.selectedModel=r.selectedVehicle.models[e],t=0===r.filterModelsByYear.length,o.setSelectedModel(r.selectedVehicle.models[e],t),i)&&i.getCreditPaymentEstimatorEvents().action("change model")},r.setCurrentVehicleList=function(e){$(document).scrollTop(0);e.models[0].name&&e.models[0];r.analyticsName=e.analyticsName,fordAnalytics&&(fordAnalytics.onclick={nameplate:e.analyticsName,modelYear:e.year}),o.setSelectedVehicle(e.models[0],e),r.filterModelsByYear="",r.selectedVehicle=o.getWorkFlowData().selectedVehicle,r.selectedModel=o.getWorkFlowData().selectedModel,r.currentKeyModel=r.selectedModel.key,r.showOverlay=!1,angular.element(document.querySelector(".multi-finance-calculator-wrap")).removeClass("is-overlay-open")}}}),define("multi-finance-calculator/controllers/FCBRA/multiFinanceCalculator.controller.CompareFinancialOptions",["analytics/analyticsEventLayer"],function(n){return function(e,t,a){var i=this;i.workFlowData=t.getWorkFlowData(),i.currencySymbol=angular.element("#vehicle-info-currency").text()||angular.element("#currencySymbol").val(),i.termSymbol=angular.element("#financing-package-period-uom").text(),i.currencyFormat=angular.element("#vehicle-info-currency-format").text(),i.classHolder="",i.modelsList=[],i.ActiveIds=[],i.selectedModel=t.getWorkFlowData().selectedModel,i.checkLength=function(){3<i.ActiveIds.length?angular.element(document.querySelector(".vehicle-item.hidden-attrs")).addClass("ng-hide"):angular.element(document.querySelector(".vehicle-item.ng-hide")).removeClass("ng-hide")},i.checkLength(),i.addNewModel=function(e){e.preventDefault();e=JSON.parse(JSON.stringify(t.getWorkFlowData().selectedModel));i.modelsList.push(e),i.ActiveIds.push(t.getWorkFlowData().selectedModel.vehicleAssetId),i.checkLength(),n&&n.getCreditPaymentEstimatorEvents().action("compare plans","add")},i.removeItem=function(e,t){e.preventDefault(),i.modelsList.splice(t,1),i.ActiveIds.splice(t,1),i.checkLength(),n&&n.getCreditPaymentEstimatorEvents().action("compare plans","remove")}}}),define("multi-finance-calculator/controllers/FCBRA/multiFinanceCalculator.controller.financingPackage",["_","analytics/analyticsEventLayer"],function(e,u){return function(t,a,i,e,n){var o=this;function r(){var e=$(".multiFinanceCalculator .BRA .monthlyCETWithFP-error");setTimeout(function(){e.css("bottom",-e.outerHeight())},500)}function l(){t.payment.downPayment.$viewValue=e("currencyFormat")(o.downPayment,o.currencySymbol,o.currencyFormat),t.payment.downPayment.$render()}function s(){var e;o.calcData=o.serviceData.selectedModel.calcData,o.term?o.lastestTermSelected=o.term:o.term=o.lastestTermSelected,setTimeout(function(){$("select.terms-dropdown").val(o.term).change()},20),o.selectedModel=a.getWorkFlowData().selectedModel,isNaN(o.currencySymbol)||(o.currencySymbol=String.fromCharCode(o.currencySymbol)),o.termSymbol=angular.element("#financing-package-period-uom").text(),o.currencyFormat=angular.element("#vehicle-info-currency-format").text(),o.currencySymbol=angular.element("#vehicle-info-currency").text()||angular.element("#currencySymbol").val(),o.fpModel=((e=o.fpModel).miwfp=null,e.miwofp=null,e),o.exceededMaxCetInstalment=!1,o.noDataFromCFC="DATA_NOT_FOUND"==o.calcData.errorCode,o.calcData&&203!=o.calcData.returnCode&&(o.termList=o.calcData.availableTerms||[],o.calcData.amountFinanced&&(o.fpModel.miwofp=o.calcData.amountFinanced[0].monthlyPayment),o.calcData.paymentDetailsResult&&(e=(e=$(".financial-products-card").data("minpayment"))||0,o.calcData.paymentDetailsResult[0].multiAnnualInsurance>e||!o.calcData.paymentDetailsResult[0].multiAnnualInsurance?o.exceededMaxCetInstalment=!0:(o.exceededMaxCetInstalment=!1,o.fpModel.miwfp=o.calcData.paymentDetailsResult[0].multiAnnualInsurance)),o.selectedState||(o.selectedState=o.selectedModel.selectedState),a.setSelectedState(o.selectedState),o.downPayment=Math.ceil(o.calcData?o.calcData.downPayment:"-"),Math.ceil(o.calcData?o.calcData.downPayment:"-"),o.downPayment&&null!=o.downPayment&&0!=Number(o.downPayment)?o.minDownPayment=o.downPayment:(o.calcData=o.serviceData.selectedModel.calcData,o.downPayment=o.calcData.deposit,o.minDownPayment=o.calcData.deposit),o.stateList=o.selectedModel.stateData),i(l,0),r(),n.$broadcast("calculationComplete")}function c(){var e={modelKey:o.selectedModel.key,term:o.term,downPayment:isNaN(o.downPayment)?0:o.downPayment,accessoriesPrice:0,state:o.selectedState.value};return o.calcData&&o.calcData.paymentDetailsResult&&(e.accessoriesPrice=o.calcData.paymentDetailsResult[0].exShowroomPrice.accessoriesPrice),e}$("select.terms-dropdown").data("defaultterm"),o.serviceData=a.getWorkFlowData(),o.noDataFromCFC=!1,o.defaultValue=angular.element("#default-field-value").text(),o.disableUF=!0,o.validationFailed=!1,o.term=$("select.terms-dropdown").data("defaultterm")||60,o.fpModel={miwfp:null,miwofp:null},o.serviceData&&o.serviceData.selectedModel&&(o.stateList=o.serviceData.selectedModel.stateData,o.stateList)&&(o.selectedState=o.stateList[0]),o.onDownPaymentFocus=function(){o.validationFailed=!1,t.payment.downPayment.$viewValue=o.downPayment,t.payment.downPayment.$render()},o.onDownPaymentBlur=function(){o.downPayment=Number(o.downPayment),o.term?o.lastestTermSelected=o.term:o.term=o.lastestTermSelected,o.downPayment,o.downPayment!==o.calcData.downPayment&&a.calculateRate(c(),o.selectedModel),t.payment.downPayment.$setValidity("characterValidator",!0),l(),u&&u.getCreditPaymentEstimatorEvents().action("change down payment"),r()},o.changeDownPayment=function(e){Number(e)>=o.minDownPayment&&Number(e)<=o.price&&e&&(o.downPayment=Number(e),r())},o.changeTerm=function(){o.calcData&&o.calcData.amountFinanced&&o.term!=o.calcData.amountFinanced[0].loanTerm&&(u&&u.getCreditPaymentEstimatorEvents().action("change terms",o.term),a.calculateRate(c(),o.selectedModel))},o.changeState=function(){o.selectedState.value!=o.selectedModel.selectedState&&(o.selectedModel.selectedState=o.selectedState.value,o.disableUF=!0,a.calculateRate(c(),o.selectedModel),u)&&u.getCreditPaymentEstimatorEvents().action("state",o.selectedState.value)};var d=t.$on("initComplete",function(e){o.disableUF=!1,t.$apply(function(){s()}),o.calcData&&!o.serviceData.selectedModel.calcData.result&&(o.validationFailed=!0,angular.element("span.error").text(o.serviceData.selectedModel.calcData.msg)),"function"==typeof o.init&&((o.downPayment||o.term||o.netTradeInValue)&&o.selectedModel===a.getWorkFlowData().selectedModel?(o.init(!1),t.$apply(function(){o.init(!1)})):(o.init(!0),t.$apply(function(){o.init(!0)})))});t.$on("BRA_SelecteModel",function(){o.disableUF=!0}),t.$on("$destroy",d)}}),define("multi-finance-calculator/controllers/FCBRA/multiFinanceCalculator.controller.summaryList",[],function(){return function(e,t){var a=this,i=(a.defaultValue=angular.element("#default-field-value").text(),a.init=function(){{var e;a.fromBuildAndPrice,a.calcData=t.getWorkFlowData().selectedModel.calcData,a.currencySymbol=angular.element("#vehicle-info-currency").text()||angular.element("#currencySymbol").val(),a.termSymbol=angular.element("#financing-package-period-uom").text(),a.currencyFormat=angular.element("#vehicle-info-currency-format").text(),a.thousandsSep=angular.element("#currencyKSprtr").val(),a.decSep=angular.element("#currencyDecSprtr").val(),a.summaryList=(e=>(e.price=null,e.downPayment=null,e.downPaymentRate=null,e.amountFinanced=null,e.term=null,e.gracePeriod=null,e.monthlyFinRate=null,e.withFP.monthlyPayment=null,e.withFP.monthlyCet=null,e.withFP.annualCet=null,e.withFP.finalAmtFin=null,e.withoutFP.monthlyPayment=null,e.withoutFP.monthlyCet=null,e.withoutFP.annualCet=null,e.withoutFP.finalAmtFin=null,e.contractDate=null,e.modelYear=null,e.catalog=null,e.ckscode=null,e))(a.summaryList),a.calcData&&203!=a.calcData.returnCode&&((e=a.calcData.paymentDetailsResult?a.calcData.paymentDetailsResult[0]:null)&&e.exShowroomPrice.accessoriesPrice?(a.fromBuildAndPrice=!0,a.accessoriesPrice=Math.round(e?a.calcData.paymentDetailsResult[0].exShowroomPrice.accessoriesPrice:0),a.exShowroomPrice=a.calcData.paymentDetailsResult[0].exShowroomPrice.value,isNaN(a.exShowroomPrice)||(a.summaryList.price=Math.round(a.accessoriesPrice+a.exShowroomPrice))):(a.fromBuildAndPrice=!1,e&&(a.summaryList.price=Math.round(a.calcData.paymentDetailsResult[0].exShowroomPrice.value)),a.accessoriesPrice=0),0==a.calcData.downPayment?a.calcData.deposit&&(a.summaryList.downPayment=a.calcData.deposit,a.summaryList.downPaymentRate=currencyFormat(a.calcData.deposit/a.summaryList.price*100,2,a.decSep,a.thousandsSep)):0<a.calcData.downPayment&&(a.summaryList.downPayment=a.calcData.downPayment,a.summaryList.downPaymentRate=currencyFormat(a.calcData.downPayment/a.summaryList.price*100,2,a.decSep,a.thousandsSep)),a.calcData.amountFinanced&&(a.summaryList.amountFinanced=Math.ceil(a.calcData.amountFinanced[0].value),a.summaryList.term=a.calcData.amountFinanced[0].loanTerm),a.serviceData&&a.serviceData.selectedState?a.summaryList.selectedState=t.getWorkFlowData().selectedState.value:a.selectedModel&&a.selectedModel.selectedState&&(a.selectedState=a.selectedModel.selectedState.value),a.summaryList.gracePeriod=a.calcData.gracePeriod,a.summaryList.monthlyFinRate=currencyFormat(100*a.calcData.monthlyFinRate,2,a.decSep,a.thousandsSep),a.calcData.amountFinanced&&(a.summaryList.withoutFP.monthlyPayment=a.calcData.amountFinanced[0].monthlyPayment),a.summaryList.withoutFP.monthlyCet=currencyFormat(a.calcData.monthlyCETWithoutFP,2,a.decSep,a.thousandsSep),a.summaryList.withoutFP.annualCet=currencyFormat(a.calcData.annualCETWithoutFP,2,a.decSep,a.thousandsSep),a.summaryList.withoutFP.finalAmtFin=a.calcData.withoutInsurance,a.calcData.paymentDetailsResult&&(e=(e=$(".financial-products-card").data("minpayment"))||0,a.calcData.paymentDetailsResult[0].multiAnnualInsurance>e||!a.calcData.paymentDetailsResult[0].multiAnnualInsurance?a.exceededMaxCetInstalment=!0:(a.exceededMaxCetInstalment=!1,a.summaryList.withFP.monthlyPayment=a.calcData.paymentDetailsResult[0].multiAnnualInsurance)),a.exceededMaxCetInstalment||(a.summaryList.withFP.monthlyCet=currencyFormat(a.calcData.monthlyCETWithFP,2,a.decSep,a.thousandsSep),a.summaryList.withFP.annualCet=currencyFormat(a.calcData.annualCETWithFP,2,a.decSep,a.thousandsSep),a.summaryList.withFP.finalAmtFin=a.calcData.withInsurance),a.summaryList.contractDate=a.calcData.contractDate,a.calcData.vehicleInfo)&&(a.summaryList.modelYear=a.calcData.vehicleInfo.modelYear,a.summaryList.catalog=a.calcData.vehicleInfo.catalog,a.summaryList.ckscode=a.calcData.vehicleInfo.ckscode)}},a.serviceData=t.getWorkFlowData(),a.serviceData&&a.serviceData.selectedModel&&(a.stateList=a.serviceData.selectedModel.stateData,a.stateList)&&(a.selectedState=a.stateList[0].value),a.summaryList={price:null,downPayment:null,downPaymentRate:null,amountFinanced:null,term:null,selectedState:null,gracePeriod:null,monthlyFinRate:null,withFP:{monthlyPayment:null,monthlyCet:null,annualCet:null,finalAmtFin:null},withoutFP:{monthlyPayment:null,monthlyCet:null,annualCet:null,finalAmtFin:null},contractDate:null,modelYear:null,catalog:null,ckscode:null},e.$on("initComplete",function(e){a.init()}));e.$on("$destroy",i)}}),define("multi-finance-calculator/controllers/FCBRA/multiFinanceCalculator.controller.vehicleInfo",["analytics/analyticsEventLayer"],function(a){var i=_analytics_determineNameplateDetails();function n(e,t){var a;e&&t&&(i.init(),e=e?e.toLowerCase().replace(/fbr|ford/g,"").replace(/_/g," ").replace("novo","new").replace("mais","+").trim():"",a=i.determine(e,"",t,"",!1),fordAnalytics)&&(fordAnalytics.onclick={nameplate:a&&a.nameplate?a.nameplate:"ford "+e,modelYear:t})}return function(e,o,t){var r=this;r.currencySymbol=angular.element("#vehicle-info-currency").text()||angular.element("#currencySymbol").val(),r.currencyFormat=angular.element("#vehicle-info-currency-format").text(),r.workFlow=o,r.showOverlay=!1,r.currentModel=0,r.workFlowData=o.getWorkFlowData(),r.selectedVehicle=o.getWorkFlowData().selectedVehicle,r.selectedModel=o.getWorkFlowData().selectedModel,r.buildAndPrice=!!o.getWorkFlowData().buildAndPrice&&o.getWorkFlowData().buildAndPrice,r.showConfirmationOverlay=!1,r.vehicleList=r.workFlowData.vehicleList,r.vehicleDefList=r.workFlowData.vehicleDefList,r.sortByCategory=!0,r.showLoader=o.showLoader,null==r.selectedVehicle.key?r.currentKeyModel=o.getWorkFlowData().selectedVehicle.key:r.currentKeyModel=r.selectedVehicle.key,r.filterSort="",r.filterByYear="",r.oldSelectedVehicle=o.getWorkFlowData().selectedVehicle,r.oldSelectedModel=o.getWorkFlowData().selectedModel,r.modelsList=o.getWorkFlowData().modelsList,r.filterModelsByYear="",r.analyticsName=o.getWorkFlowData().selectedVehicle.analyticsName,r.selectedVehicle.name=decodeURIComponent(r.selectedVehicle.name),n(r.selectedVehicle.analyticsName,r.selectedVehicle.year),r.openConfirmOverlay=function(){r.showConfirmationOverlay=!0,angular.element(document.querySelector("html")).addClass("is-overlay-open"),a&&a.getCreditPaymentEstimatorEvents().action("change vehicle","bnp")},r.closeConfirmOverlay=function(){r.showConfirmationOverlay=!1,angular.element(document.querySelector("html")).removeClass("is-overlay-open")},r.openOverlay=function(){r.showOverlay=!0,angular.element(document.querySelector(".multi-finance-calculator-wrap")).addClass("is-overlay-open"),r.showConfirmationOverlay=!1,angular.element(document.querySelector("html")).removeClass("is-overlay-open"),a&&a.getCreditPaymentEstimatorEvents().action("change vehicle")},r.returnToBnp=function(e){var t={k:r.selectedVehicle.key,n:decodeURIComponent(r.selectedVehicle.name),img:r.selectedVehicle.imagePreview,fef:r.selectedVehicle.fuelEfficiencyFrom,mk:r.selectedModel.key,mn:r.selectedModel.name,mp:r.selectedModel.price,map:r.totalAccessoryPrice,mimg:r.imageURL},a=new URL(window.location.href).split("?"),t=$.param(t);0<a.length&&(t=t+"&"+a[1]),e&&(window.location=encodeURI(e+"?"+t))},r.sortModelsByYear=function(t){var e,a,i,n;+r.filterModelsByYear!=+t?(r.filterModelsByYear=t,e=JSON.parse(JSON.stringify(r.selectedVehicle)),a=[],i=t,n=[],r.modelsList.forEach(function(e){+e.nameplateYear==+t&&(a.push(e),-1===n.indexOf(e.nameRelVeh))&&n.push(e.nameRelVeh)}),e.name=i+" "+n.join(", "),e.models=a,r.selectedVehicle=e,r.selectedModel=r.selectedVehicle.models[0],o.setSelectedModel(r.selectedModel,!0)):(r.filterModelsByYear="",r.selectedVehicle=o.getWorkFlowData().selectedVehicle,r.selectedModel=o.getWorkFlowData().selectedModel)},r.sortBy=function(e){"category"===e?(r.sortByCategory=!0,r.filterSort=""):(r.sortByCategory=!1,r.filterSort=e),$('input[name="validationZone"]')&&"true"===$('input[name="validationZone"]').val()&&$(".zonePriceYes").each(function(){1===$(this).parent().find(".zonePriceYes").length&&($(this).parent().find(".zonePriceBuilding").css("display","none"),$(this).parent().find(".zonePriceYes").css("display","block"),$(this).parent().find(".zonePriceYes").css("visibility","visible"))}),a.getCreditPaymentEstimatorEvents().action("mini showroom","sort","category"===e?e:"name"===e?"model":"price")},r.closeOverlay=function(){r.showOverlay=!1,angular.element(document.querySelector(".multi-finance-calculator-wrap")).removeClass("is-overlay-open")},r.setCurrentVehicleModel=function(e){var t;r.selectedVehicle.models[e].key!==r.currentKeyModel&&(r.disableUF=!0,r.currentKeyModel=r.selectedVehicle.models[e].key,r.selectedModel=r.selectedVehicle.models[e],t=0===r.filterModelsByYear.length,o.setSelectedModel(r.selectedVehicle.models[e],t),a)&&a.getCreditPaymentEstimatorEvents().action("change model")},e.$on("initComplete",function(){r.disableUF=!1}),r.setCurrentVehicleList=function(e){$(document).scrollTop(0);e.models[0].name&&e.models[0];r.analyticsName=e.analyticsName,n(e.analyticsName,e.year),r.disableUF=!0,o.setSelectedVehicle(e.models[0],e),r.filterModelsByYear="",r.selectedVehicle=o.getWorkFlowData().selectedVehicle,r.selectedModel=o.getWorkFlowData().selectedModel,r.showOverlay=!1,angular.element(document.querySelector(".multi-finance-calculator-wrap")).removeClass("is-overlay-open")},r.totalPrice=function(){return parseInt(r.workFlowData.selectedModel.totalAccessoryPrice)==parseInt(r.workFlowData.selectedModel.price)?parseInt(r.workFlowData.selectedModel.price):parseInt(r.workFlowData.selectedModel.totalAccessoryPrice)+parseInt(r.workFlowData.selectedModel.price)}}}),define("multi-finance-calculator/controllers/FCIND/multiFinanceCalculator.controller.CompareFinancialOptions",["mediaQuery","analytics/analyticsEventLayer"],function(o,r){return function(e,t,a){var i,n=this;n.workFlowData=t.getWorkFlowData(),n.currencySymbol=angular.element("#vehicle-info-currency").text()||angular.element("#currencySymbol").val(),n.termSymbol=angular.element("#financing-package-period-uom").text(),n.currencyFormat=angular.element("#vehicle-info-currency-format").text(),n.classHolder="",n.modelsList=[],n.ActiveIds=[],n.selectedModel=t.getWorkFlowData().selectedModel,i="mobile"===o.getMediaType()?1:3,n.checkLength=function(){n.ActiveIds.length>i?angular.element(document.querySelector(".vehicle-item.hidden-attrs")).addClass("ng-hide"):angular.element(document.querySelector(".vehicle-item.ng-hide")).removeClass("ng-hide")},n.checkLength(),n.addNewModel=function(e){e.preventDefault();e=JSON.parse(JSON.stringify(t.getWorkFlowData().selectedModel));n.modelsList.push(e),n.ActiveIds.push(t.getWorkFlowData().selectedModel.vehicleAssetId),n.checkLength(),r&&r.getCreditPaymentEstimatorEvents().action("compare plans","add")},n.removeItem=function(e,t){e.preventDefault(),n.modelsList.splice(t,1),n.ActiveIds.splice(t,1),n.checkLength(),r&&r.getCreditPaymentEstimatorEvents().action("compare plans","remove")}}}),define("multi-finance-calculator/controllers/FCIND/multiFinanceCalculator.controller.financingPackage",["_","analytics/analyticsEventLayer"],function(e,m){return function(t,e,a,i,n){var o,r,l,s=this,c=(Number(angular.element("#minDownpaymentRate").text()),Number(angular.element("#maxDownpaymentRate").text())/100);function d(){t.payment.downPayment.$viewValue=i("currencyFormat")(s.downPayment,s.currencySymbol,s.currencyFormat),t.payment.downPayment.$render(),t.payment.netTradeIn.$viewValue=i("currencyFormat")(s.netTradeInValue,s.currencySymbol,s.currencyFormat),t.payment.netTradeIn.$render(),t.payment.availableIncentives.$viewValue=i("currencyFormat")(s.availableIncentives,s.currencySymbol,s.currencyFormat),t.payment.availableIncentives.$render()}function u(){var e={modelKey:s.selectedModel.key,term:s.term,downPayment:s.downPayment,accessoriesPrice:0,netTradeInValue:s.netTradeInValue,availableIncentives:s.availableIncentives};return s.calcData&&s.calcData.paymentDetailsResult&&(e.accessoriesPrice=s.calcData.paymentDetailsResult[0].exShowroomPrice.accessoriesPrice),e}s.serviceData=e.getWorkFlowData(),s.init=function(){s.calcData=s.serviceData.selectedModel.calcData,setTimeout(function(){$("select.terms-dropdown").val(s.term).change()},20),s.selectedModel=e.getWorkFlowData().selectedModel,s.termList=s.calcData?s.calcData.availableTerms:[],s.currencySymbol=angular.element("#vehicle-info-currency").text()||angular.element("#currencySymbol").val(),isNaN(s.currencySymbol)||(s.currencySymbol=String.fromCharCode(s.currencySymbol));s.termSymbol=angular.element("#financing-package-period-uom").text(),s.currencyFormat=angular.element("#vehicle-info-currency-format").text(),s.calcData&&s.calcData.amountFinanced&&(s.monthlyPayment=Math.round(s.calcData.amountFinanced[0].monthlyPayment),s.annualInterestRate=s.calcData.amountFinanced[0].annualInterestRate||s.defaultValue);s.calcData&&s.calcData.paymentDetailsResult&&(s.exShowroomPrice=Math.round(s.calcData.paymentDetailsResult[0].exShowroomPrice?s.calcData.paymentDetailsResult[0].exShowroomPrice.value:s.defaultValue),s.calcData.paymentDetailsResult[0].exShowroomPrice.accessoriesPrice?(s.accessoriesPrice=s.calcData.paymentDetailsResult[0].exShowroomPrice.accessoriesPrice||0,isNaN(s.exShowroomPrice)||(s.price=Math.round(Number(s.exShowroomPrice)+Number(s.accessoriesPrice)))):(s.price=Math.round(s.calcData.paymentDetailsResult[0].exShowroomPrice?s.calcData.paymentDetailsResult[0].exShowroomPrice.value:s.defaultValue),s.calcData.paymentDetailsResult[0].exShowroomPrice&&(s.calcData.paymentDetailsResult[0].exShowroomPrice.accessoriesPrice=0)));s.upperBound=Math.round(s.price*c),angular.element(document.getElementById("select2-chosen-3")).text(s.term+" "+s.termSymbol),s.netTradeInValue=s.calcData?s.calcData.netTradeInValue:s.defaultValue,r=s.calcData?s.calcData.netTradeInValue:s.defaultValue,s.downPayment=Math.round(s.calcData?s.calcData.downPayment:s.defaultValue),o=s.calcData?s.calcData.downPayment:s.defaultValue,s.availableIncentives=s.calcData?s.calcData.availableIncentives:s.defaultValue;s.calcData?s.calcData.availableIncentives:s.defaultValue;a(d,0),n.$broadcast("calculationComplete")},s.term=$("select.terms-dropdown").data("defaultterm")||12,s.defaultValue=angular.element("#default-field-value").text()||"-",s.exShowroomPrice=s.defaultValue,s.accessoriesPrice=0,s.price=s.defaultValue,s.monthlyPayment=s.defaultValue,s.annualInterestRate=s.defaultValue,s.onDownPaymentFocus=function(){t.payment.downPayment.$viewValue=s.downPayment,t.payment.downPayment.$render()},s.onNetTradeInFocus=function(){t.payment.netTradeIn.$viewValue=s.netTradeInValue,t.payment.netTradeIn.$render()},s.onAvailableIncentivesFocus=function(){t.payment.availableIncentives.$viewValue=s.availableIncentives,t.payment.availableIncentives.$render()},s.onDownPaymentBlur=function(){s.downPayment>s.price||"string"==typeof s.downPayment?s.downPayment=o:(o=s.downPayment,s.downPayment!==s.calcData.downPayment&&e.calculateRate(u(),s.selectedModel)),t.payment.downPayment.$setValidity("maxPayment",!0),t.payment.downPayment.$setValidity("characterValidator",!0),d(),m&&m.getCreditPaymentEstimatorEvents().action("change down payment")},s.onNetTradeInBlur=function(){s.netTradeInValue>s.price||"string"==typeof s.netTradeInValue?s.netTradeInValue=r:(r=s.netTradeInValue,s.netTradeInValue!==s.calcData.netTradeInValue&&e.calculateRate(u(),s.selectedModel)),t.payment.netTradeIn.$setValidity("maxPayment",!0),t.payment.netTradeIn.$setValidity("characterValidator",!0),d()},s.onAvailableIncentivesBlur=function(){s.availableIncentives>s.price||"string"==typeof s.availableIncentives?s.availableIncentives=l:(l=s.availableIncentives,s.availableIncentives!==s.calcData.availableIncentives&&e.calculateRate(u(),s.selectedModel)),t.payment.availableIncentives.$setValidity("maxPayment",!0),t.payment.availableIncentives.$setValidity("characterValidator",!0),d()},s.changeDownPayment=function(e){0<=Number(e)&&Number(e)<=s.price&&e&&(s.downPayment=Number(e))},s.changeNetTradeIn=function(e){0<=Number(e)&&Number(e)<=s.price&&e&&(s.netTradeInValue=Number(e))},s.changeAvailableIncentives=function(e){0<=Number(e)&&Number(e)<=s.price&&e&&(s.availableIncentives=Number(e))},s.changeTerm=function(){s.calcData&&s.amountFinanced&&s.term!=s.calcData.amountFinanced[0].loanTerm&&(m&&m.getCreditPaymentEstimatorEvents().action("change terms",s.term),e.calculateRate(u(),s.selectedModel))};var p=t.$on("initComplete",function(e){t.$apply(function(){s.init()})});t.$on("$destroy",p)}}),define("multi-finance-calculator/controllers/FCIND/multiFinanceCalculator.controller.summaryList",[],function(){return function(e,t){var a=this,i=(a.init=function(){a.fromBuildAndPrice,a.calcData=t.getWorkFlowData().selectedModel.calcData,a.currencySymbol=angular.element("#vehicle-info-currency").text()||angular.element("#currencySymbol").val(),a.termSymbol=angular.element("#financing-package-period-uom").text(),a.currencyFormat=angular.element("#vehicle-info-currency-format").text(),a.calcData&&(a.calcData.paymentDetailsResult&&a.calcData.paymentDetailsResult[0].exShowroomPrice.accessoriesPrice?a.fromBuildAndPrice=!0:a.fromBuildAndPrice=!1,a.fromBuildAndPrice?(a.calcData.paymentDetailsResult&&a.calcData.paymentDetailsResult[0].exShowroomPrice&&(a.accessoriesPrice=Math.round(a.calcData.paymentDetailsResult[0].exShowroomPrice.accessoriesPrice),a.exShowroomPrice=a.calcData?a.calcData.paymentDetailsResult[0].exShowroomPrice.value:null),isNaN(a.exShowroomPrice)||(a.price=Math.round(a.accessoriesPrice+a.exShowroomPrice))):(a.calcData.paymentDetailsResult&&(a.price=Math.round(a.calcData.paymentDetailsResult[0].exShowroomPrice.value)),a.accessoriesPrice=0),a.calcData.amountFinanced&&(a.cashBack=a.calcData.amountFinanced[0].cashBack,a.amountFinanced=a.calcData.amountFinanced[0].value?Math.round(a.calcData.amountFinanced[0].value):null,a.term=a.calcData.amountFinanced[0].loanTerm,a.annualInterestRate=a.calcData.amountFinanced[0].annualInterestRate,a.monthlyPayment=a.calcData.amountFinanced[0].monthlyPayment?Math.round(a.calcData.amountFinanced[0].monthlyPayment):null),a.availableSelling=a.price-a.cashBack,a.availableIncentives=a.calcData.availableIncentives?Math.round(a.calcData.availableIncentives):0,a.netPrice=a.calcData.netPrice?Math.round(a.calcData.netPrice):null,a.downPayment=a.calcData.downPayment?Math.round(a.calcData.downPayment):null,a.netTradeInValue=a.calcData?a.calcData.netTradeInValue:null)},a.defaultValue=angular.element("#default-field-value").text()||"-",a.price=null,a.accessoriesPrice=0,a.exShowroomPrice=null,a.cashBack=0,a.amountFinanced=null,a.term=$("select.terms-dropdown").data("defaultterm")||12,a.annualInterestRate=null,a.monthlyPayment=null,a.availableSelling=null,a.availableIncentives=0,a.netPrice=null,a.downPayment=null,e.$on("calculationComplete",function(e){a.init()}));e.$on("$destroy",i)}}),define("multi-finance-calculator/controllers/FCIND/multiFinanceCalculator.controller.vehicleInfo",["analytics/analyticsEventLayer"],function(i){return function(a,l,e){var s=this;s.currencySymbol=angular.element("#vehicle-info-currency").text()||angular.element("#currencySymbol").val(),s.currencyFormat=angular.element("#vehicle-info-currency-format").text(),s.showOverlay=!1,s.currentModel=0,s.workFlowData=l.getWorkFlowData(),s.selectedVehicle=l.getWorkFlowData().selectedVehicle,s.selectedModel=l.getWorkFlowData().selectedModel,s.buildAndPrice=!!l.getWorkFlowData().buildAndPrice&&l.getWorkFlowData().buildAndPrice,s.showConfirmationOverlay=!1,s.vehicleList=s.workFlowData.vehicleList,s.vehicleDefList=s.workFlowData.vehicleDefList,s.sortByCategory=!0,s.showLoader=l.showLoader,s.currentKeyModel=s.selectedModel.key,s.filterSort="",s.filterByYear="",s.oldSelectedVehicle=l.getWorkFlowData().selectedVehicle,s.oldSelectedModel=l.getWorkFlowData().selectedModel,s.modelsList=s.selectedVehicle.models,s.filterModelsByYear="",s.analyticsName=l.getWorkFlowData().selectedVehicle.analyticsName,this.selectedCategory="",s.disableCurrentYearBtn=!1,s.disableEarlyYearBtn=!1,fordAnalytics&&(fordAnalytics.onclick={nameplate:s.selectedVehicle.analyticsName,modelYear:s.selectedVehicle.year}),s.openConfirmOverlay=function(){s.showConfirmationOverlay=!0,angular.element(document.querySelector("html")).addClass("is-overlay-open"),i&&i.getCreditPaymentEstimatorEvents().action("change vehicle","bnp")},s.closeConfirmOverlay=function(){s.showConfirmationOverlay=!1,angular.element(document.querySelector("html")).removeClass("is-overlay-open")},s.openOverlay=function(){s.showOverlay=!0,angular.element(document.querySelector(".multi-finance-calculator-wrap")).addClass("is-overlay-open"),s.showConfirmationOverlay=!1,angular.element(document.querySelector("html")).removeClass("is-overlay-open"),i&&i.getCreditPaymentEstimatorEvents().action("change vehicle")},s.returnToBnp=function(e){var t={k:s.selectedVehicle.key,n:s.selectedVehicle.name,img:s.selectedVehicle.imagePreview,fef:s.selectedVehicle.fuelEfficiencyFrom,mk:s.selectedModel.key,mn:s.selectedModel.name,mp:s.selectedModel.price,map:s.totalAccessoryPrice,mimg:s.imageURL},a=new URL(window.location.href).split("?"),t=$.param(t);0<a.length&&(t=t+"&"+a[1]),e&&(window.location=encodeURI(e+"?"+t))},s.sortModelsByYear=function(e){var t,a,i,n,o=e.max,r=e.min,e=o+"-"+r;s.filterModelsByYear!==e?(s.filterModelsByYear=e,e=JSON.parse(JSON.stringify(s.selectedVehicle)),t=[],a=o!==r?o+" - "+r:o,i=[],s.modelsList.forEach(function(e){+e.nameplateYear<=+o&&+e.nameplateYear>=+r&&(t.push(e),-1===i.indexOf(e.nameRelVeh))&&(i.push(e.nameRelVeh),a=o)}),n=void 0!==i[0]?i[0]:"",e.name=a+" "+n,e.models=t,s.selectedVehicle=e,s.selectedModel=s.selectedVehicle.models[0],s.currentModel=0,l.setSelectedModel(s.selectedModel,!1)):(s.filterModelsByYear="",s.selectedVehicle=l.getWorkFlowData().selectedVehicle,s.selectedModel=l.getWorkFlowData().selectedModel,l.setSelectedModel(s.selectedModel,!1),s.currentModel=0)},s.sortBy=function(e){"category"===e?(s.sortByCategory=!0,s.filterSort=""):(s.sortByCategory=!1,s.filterSort=e),i.getCreditPaymentEstimatorEvents().action("mini showroom","sort","category"===e?e:"price")},s.closeOverlay=function(){s.showOverlay=!1,angular.element(document.querySelector(".multi-finance-calculator-wrap")).removeClass("is-overlay-open")},s.setCurrentVehicleModel=function(e){var t;s.selectedVehicle.models.length&&+s.selectedVehicle.models[e].key!=+s.currentKeyModel&&(s.currentKeyModel=s.selectedVehicle.models[e].key,s.selectedModel=s.selectedVehicle.models[e],t=!s.filterModelsByYear||0===Object.keys(s.filterModelsByYear).length,l.setSelectedModel(s.selectedVehicle.models[e],t),i)&&i.getCreditPaymentEstimatorEvents().action("change model")},s.setCurrentVehicleList=function(e){$(document).scrollTop(0);e.models[0].name&&e.models[0];s.analyticsName=e.analyticsName,fordAnalytics&&(fordAnalytics.onclick={nameplate:e.analyticsName,modelYear:e.year}),l.setSelectedVehicle(e.models[0],e),s.filterModelsByYear="",s.selectedVehicle=l.getWorkFlowData().selectedVehicle,s.selectedModel=l.getWorkFlowData().selectedModel,s.modelsList=s.selectedVehicle.models,s.showOverlay=!1,angular.element(document.querySelector(".multi-finance-calculator-wrap")).removeClass("is-overlay-open")},s.selectedCategoryToFilterBy=function(e){this.selectedCategory=e,a.openFilter=!1,a.advanceFilter=!1,a.filterByCategory=!1},s.setMobileYearFilter=function(e,t){a.mobileFilter={max:t,min:e}},s.updateFilterByYear=function(){s.filterByYear=a.mobileFilter,a.openFilter=!1,a.advanceFilter=!0}}}),define("multi-finance-calculator/controllers/FCMEX/multiFinanceCalculator.controller.CompareFinancialOptions",["analytics/analyticsEventLayer"],function(n){return function(e,t,a){var i=this;i.workFlowData=t.getWorkFlowData(),i.currencySymbol=angular.element("#vehicle-info-currency").text()||angular.element("#currencySymbol").val(),i.termSymbol=angular.element("#financing-package-period-uom").text(),i.currencyFormat=angular.element("#vehicle-info-currency-format").text(),i.classHolder="",i.modelsList=[],i.ActiveIds=[],i.selectedModel=t.getWorkFlowData().selectedModel,i.checkLength=function(){3<i.ActiveIds.length?angular.element(document.querySelector(".vehicle-item.hidden-attrs")).addClass("ng-hide"):angular.element(document.querySelector(".vehicle-item.ng-hide")).removeClass("ng-hide")},i.checkLength(),i.addNewModel=function(e){e.preventDefault();e=JSON.parse(JSON.stringify(t.getWorkFlowData().selectedModel));i.modelsList.push(e),i.ActiveIds.push(t.getWorkFlowData().selectedModel.vehicleAssetId),i.checkLength(),n&&n.getCreditPaymentEstimatorEvents().action("compare plans","add")},i.removeItem=function(e,t){e.preventDefault(),i.modelsList.splice(t,1),i.ActiveIds.splice(t,1),i.checkLength(),n&&n.getCreditPaymentEstimatorEvents().action("compare plans","remove")}}}),define("multi-finance-calculator/controllers/FCMEX/multiFinanceCalculator.controller.financingPackage",["_","analytics/analyticsEventLayer"],function(e,p){return function(t,a,i,n,o){var r,l=this,s=Number(angular.element("#minDownpaymentRate").text())/100,c=Number(angular.element("#maxDownpaymentRate").text())/100;function d(){t.payment.downPayment.$viewValue=n("currencyFormat")(l.downPayment,l.currencySymbol,l.currencyFormat),t.payment.downPayment.$render()}function e(e){e={modelKey:l.selectedModel.key,term:l.term,downPayment:l.downPayment,accessoriesPrice:0,insurance:l.multiAnnualInsurance,lifeInsurance:l.financeLifeInsurance,lifeInsuranceType:l.financeLifeInsurance?"finance":"cash",vehicleInsurance:"true",vehicleInsuranceType:l.vehicleInsuranceType,defaultRequest:e||!1,zipCode:l.zipCode};return l.calcData&&l.calcData.paymentDetailsResult&&(e.accessoriesPrice=l.calcData.paymentDetailsResult[0].exShowroomPrice.accessoriesPrice),e}l.serviceData=a.getWorkFlowData(),l.plansData=a.getPlansData(),l.init=function(){l.calcData=l.serviceData.selectedModel.calcData,l.invalidZipcode=void 0!==l.zipCode&&null!=l.zipCode&&null!=l.calcData.zipCodeMessage&&l.calcData.zipCodeMessage.toLowerCase().includes("invalid zipcode"),setTimeout(function(){var e=l.term||l.defaultTerm;$("select.terms-dropdown").val(e).change()},20),l.selectedModel=a.getWorkFlowData().selectedModel,l.plansData=a.getPlansData(),l.termList=l.calcData&&l.calcData.availableTerms.length?l.calcData.availableTerms:[l.defaultTerm],l.currencySymbol=angular.element("#vehicle-info-currency").text()||angular.element("#currencySymbol").val(),isNaN(l.currencySymbol)||(l.currencySymbol=String.fromCharCode(l.currencySymbol));l.termSymbol=angular.element("#financing-package-period-uom").text(),l.currencyFormat=angular.element("#vehicle-info-currency-format").text(),l.calcData&&l.calcData.amountFinanced&&(l.monthlyPayment=Math.round(l.calcData.amountFinanced[0].monthlyPayment),l.annualInterestRate=l.calcData.amountFinanced[0].annualInterestRate,l.apr=l.calcData.amountFinanced[0].apr);{var e;l.calcData&&l.calcData.paymentDetailsResult&&(e=l.calcData.paymentDetailsResult[0],l.exShowroomPrice=Math.round(e.exShowroomPrice?e.exShowroomPrice.value:l.defaultValue),l.customerRate=e.customerRate,l.adminCost=Math.round(e.adminCost),e.exShowroomPrice.accessoriesPrice?(l.price=Math.round(Number(e.exShowroomPrice.value)+Number(e.exShowroomPrice.accessoriesPrice)),l.accessoriesPrice=Math.round(e.exShowroomPrice.accessoriesPrice)):(l.price=Math.round(e.exShowroomPrice?e.exShowroomPrice.value:l.defaultValue),e.exShowroomPrice.accessoriesPrice=0))}l.upperBound=Math.round(l.price*c),l.minDownPayment=Math.round(l.price*s),angular.element(document.getElementById("select2-chosen-3")).text(l.term+" "+l.termSymbol),l.downPayment=l.calcData?l.calcData.downPayment:l.defaultValue,r=l.calcData?l.calcData.downPayment:l.defaultValue,i(d,0),0==l.adminCost?l.adminCostFormatted=0:l.adminCostFormatted=n("currencyFormat")(l.adminCost,l.currencySymbol,l.currencyFormat);o.$broadcast("calculationComplete")},l.multiAnnualInsurance=$("#MultiAnnualInsurance").prop("checked"),t.insuranceCheckeded=!0,l.financeLifeInsurance=$("#FinanceLifeInsurance").prop("checked"),t.financeLifeInsuranceChecked=!0,l.term=$("select.terms-dropdown").data("defaultterm")||60,l.defaultTerm=l.term,l.termList=[],l.defaultValue=angular.element("#default-field-value").text()||"-",l.monthlyPayment=l.defaultValue,l.annualInterestRate=l.defaultValue,l.apr=l.defaultValue,l.customerRate=l.defaultValue,l.exShowroomPrice=l.defaultValue,l.accessoriesPrice=0,l.price=l.defaultValue,l.adminCost=0,l.vehicleInsuranceType=$("#insuranceType").val(),l.completeDataArray=[],l.invalidZipcode=!1,$("#MultiAnnualInsurance").change(function(){t.insuranceCheckeded?(t.insuranceCheckeded=!1,l.multiAnnualInsurance=!1):(t.insuranceCheckeded=!0,l.multiAnnualInsurance=!0),l.changeMultiAnnualInsurance()}),l.minDwnpaymntCfcValid=!0,$("#FinanceLifeInsurance").change(function(){t.financeLifeInsuranceChecked?(t.financeLifeInsuranceChecked=!1,l.financeLifeInsurance=!1):(t.financeLifeInsuranceChecked=!0,l.financeLifeInsurance=!0),a.calculateRate(e(),l.selectedModel),l.plansData.PlansDataArray=[],a.calculatePlansRate(e(!0),l.selectedModel)}),$("#insuranceType").change(function(){l.vehicleInsuranceType=$("#insuranceType").val(),a.calculateRate(e(),l.selectedModel),l.plansData.PlansDataArray=[],a.calculatePlansRate(e(!0),l.selectedModel)}),$("#zipCode").change(function(){l.zipCode=$("#zipCode").val(),a.calculateRate(e(),l.selectedModel),l.plansData.PlansDataArray=[],a.calculatePlansRate(e(!0),l.selectedModel)}),t.changeInfoByPlan=function(e){$(".selected-item").removeClass("selected-item"),a.calculateRate((e=>(e={modelKey:l.selectedModel.key,term:l.term,downPayment:l.downPayment,accessoriesPrice:0,insurance:l.multiAnnualInsurance,lifeInsurance:"true",lifeInsuranceType:l.financeLifeInsurance?"finance":"cash",vehicleInsurance:"true",vehicleInsuranceType:l.vehicleInsuranceType,defaultRequest:!1,financePlan:e,zipCode:l.zipCode},l.calcData&&l.calcData.paymentDetailsResult&&(e.accessoriesPrice=l.calcData.paymentDetailsResult[0].exShowroomPrice.accessoriesPrice),e))(e.delegateTarget.id),l.selectedModel),$("#"+e.delegateTarget.id).parent(".product-item").addClass("selected-item")},l.onDownPaymentFocus=function(){t.payment.downPayment.$viewValue=l.downPayment,t.payment.downPayment.$render()},l.onDownPaymentBlur=function(){l.downPayment<l.minDownPayment||l.downPayment>l.upperBound||"string"==typeof l.downPayment?l.downPayment=r:(r=l.downPayment,l.downPayment!==l.calcData.downPayment&&(a.calculateRate(e(),l.selectedModel),l.plansData.PlansDataArray=[],a.calculatePlansRate(e(!0),l.selectedModel))),t.payment.downPayment.$setValidity("maxPayment",!0),t.payment.downPayment.$setValidity("minPayment",!0),t.payment.downPayment.$setValidity("characterValidator",!0),d(),p&&p.getCreditPaymentEstimatorEvents().action("change down payment")},l.changeDownPayment=function(e){Number(e)>=l.minDownPayment&&Number(e)<=l.upperBound&&e&&(l.downPayment=Number(e))},l.changeTerm=function(){l.calcData&&l.calcData.amountFinanced&&l.term!=l.calcData.amountFinanced.loanTerm&&(p&&p.getCreditPaymentEstimatorEvents().action("change terms",l.term),a.calculateRate(e(),l.selectedModel),l.plansData.PlansDataArray=[],a.calculatePlansRate(e(!0),l.selectedModel))},l.changeMultiAnnualInsurance=function(){a.calculateRate(e(),l.selectedModel),l.plansData.PlansDataArray=[],a.calculatePlansRate(e(!0),l.selectedModel)};var u=t.$on("initComplete",function(e){t.$apply(function(){l.init()})});t.$on("MEX_SelectedModel",function(){l.term=l.defaultTerm}),t.$on("$destroy",u)}}),define("multi-finance-calculator/controllers/FCMEX/multiFinanceCalculator.controller.summaryList",[],function(){return function(e,t){var a=this,i=(a.init=function(){{var e;a.fromBuildAndPrice,a.calcData=t.getWorkFlowData().selectedModel.calcData,a.currencySymbol=angular.element("#vehicle-info-currency").text()||angular.element("#currencySymbol").val(),a.termSymbol=angular.element("#financing-package-period-uom").text(),a.termSymbolSingle=angular.element("#financing-package-period-uom-single").text(),a.currencyFormat=angular.element("#vehicle-info-currency-format").text(),a.calcData&&(a.paymentDetailsResults=a.calcData?a.calcData.paymentDetailsResult:[],a.calcData.paymentDetailsResult&&a.calcData.paymentDetailsResult[0].exShowroomPrice.accessoriesPrice?a.fromBuildAndPrice=!0:a.fromBuildAndPrice=!1,e=a.calcData.paymentDetailsResult?a.calcData.paymentDetailsResult[0]:null,a.fromBuildAndPrice?(e&&e.exShowroomPrice&&(a.accessoriesPrice=Math.round(e.exShowroomPrice.accessoriesPrice),a.exShowroomPrice=e.exShowroomPrice.value),isNaN(a.exShowroomPrice)||(a.price=Math.round(a.accessoriesPrice+a.exShowroomPrice))):(e&&(a.price=Math.round(e.exShowroomPrice.value)),a.accessoriesPrice=0),a.calcData.amountFinanced&&(a.amountFinanced=a.calcData.amountFinanced[0]?Math.round(a.calcData.amountFinanced[0].value):null,a.term=a.calcData.amountFinanced[0].loanTerm,a.apr=a.calcData.amountFinanced[0].apr,a.monthlyPayment=a.calcData.amountFinanced[0].monthlyPayment?Math.round(a.calcData.amountFinanced[0].monthlyPayment):null,a.name=a.calcData.amountFinanced[0].name||null),a.calcData.paymentDetailsResult&&(e=a.calcData.paymentDetailsResult[0],a.creditLifeInsurance=e.lifeInsurance?Math.round(e.lifeInsurance):null,a.vehicleInsurance=e.multiAnnualInsurance?Math.round(e.multiAnnualInsurance):null,a.totalAdminFee=e.adminCost?Math.round(e.adminCost):null,a.customerRate=e.customerRate,a.debtBalance=e.debtBalance?Math.round(e.debtBalance):null),a.downPayment=a.calcData.downPayment?Math.round(a.calcData.downPayment):null)}},a.defaultValue=angular.element("#default-field-value").text()||"-",a.accessoriesPrice=0,a.exShowroomPrice=null,a.price=null,a.amountFinanced=null,a.term=$("select.terms-dropdown").data("defaultterm")||12,a.apr=null,a.monthlyPayment=null,a.creditLifeInsurance=null,a.vehicleInsurance=null,a.totalAdminFee=null,a.customerRate=null,a.downPayment=null,angular.element("#FinanceLifeInsurance")),n=angular.element("#insuranceType"),o=angular.element("#MEXCreditInsuranceTypeFinance").text(),r=angular.element("#MEXCreditInsuranceTypeCash").text(),l=(a.financeLifeInsuranceSelLbl=i.prop("checked")?o:r,a.insuranceTypeSelection=n.find(":selected").text(),i.change(function(){a.financeLifeInsuranceSelLbl=i.prop("checked")?o:r}),n.change(function(){a.insuranceTypeSelection=n.find(":selected").text(),e.$apply()}),e.$on("calculationComplete",function(e){a.init()}));e.$on("$destroy",l)}}),define("multi-finance-calculator/controllers/FCMEX/multiFinanceCalculator.controller.vehicleInfo",["analytics/analyticsEventLayer"],function(i){return function(a,o,e){var r=this,t=(r.currencySymbol=angular.element("#vehicle-info-currency").text()||angular.element("#currencySymbol").val(),r.currencyFormat=angular.element("#vehicle-info-currency-format").text(),r.showOverlay=!1,r.currentModel=0,r.workFlowData=o.getWorkFlowData(),r.selectedVehicle=o.getWorkFlowData().selectedVehicle,r.selectedModel=o.getWorkFlowData().selectedModel,r.buildAndPrice=!!o.getWorkFlowData().buildAndPrice&&o.getWorkFlowData().buildAndPrice,r.showConfirmationOverlay=!1,r.vehicleList=r.workFlowData.vehicleList,r.vehicleDefList=r.workFlowData.vehicleDefList,r.sortByCategory=!0,r.showLoader=o.showLoader,r.currentKeyModel=r.selectedModel.key,r.filterSort="",r.filterByYear="",r.oldSelectedVehicle=o.getWorkFlowData().selectedVehicle,r.oldSelectedModel=o.getWorkFlowData().selectedModel,r.modelsList=o.getWorkFlowData().modelsList,r.filterModelsByYear="",r.analyticsName=o.getWorkFlowData().selectedVehicle.analyticsName,fordAnalytics&&(fordAnalytics.onclick={nameplate:r.selectedVehicle.analyticsName,modelYear:r.selectedVehicle.year}),$.urlParam=function(e){e=new RegExp("[?&]"+e+"=([^&#]*)").exec(window.location.href);return null==e?null:decodeURI(e[1])||0},$.urlParam("bp_k"));$.urlParam("bp_mk"),t?r.showOverlay=!1:($(".MEX .main-vehicle-info").find(".header-overlay").hide(),angular.element(document.querySelector(".multi-finance-calculator-wrap")).addClass("is-overlay-open"),r.showConfirmationOverlay=!1,r.showOverlay=!0),r.openConfirmOverlay=function(){r.showConfirmationOverlay=!0,angular.element(document.querySelector("html")).addClass("is-overlay-open"),i&&i.getCreditPaymentEstimatorEvents().action("change vehicle","bnp")},r.closeConfirmOverlay=function(){r.showConfirmationOverlay=!1,angular.element(document.querySelector("html")).removeClass("is-overlay-open")},r.openOverlay=function(){r.showOverlay=!0,angular.element(document.querySelector(".multi-finance-calculator-wrap")).addClass("is-overlay-open"),r.showConfirmationOverlay=!1,angular.element(document.querySelector("html")).removeClass("is-overlay-open"),i&&i.getCreditPaymentEstimatorEvents().action("change vehicle")},r.returnToBnp=function(e){var t={k:r.selectedVehicle.key,n:r.selectedVehicle.name,img:r.selectedVehicle.imagePreview,fef:r.selectedVehicle.fuelEfficiencyFrom,mk:r.selectedModel.key,mn:r.selectedModel.name,mp:r.selectedModel.price,map:r.totalAccessoryPrice,mimg:r.imageURL},a=new URL(window.location.href).split("?"),t=$.param(t);0<a.length&&(t=t+"&"+a[1]),e&&(window.location=encodeURI(e+"?"+t))},r.sortModelsByYear=function(t){var e,a,i,n;+r.filterModelsByYear!=+t?(r.filterModelsByYear=t,e=JSON.parse(JSON.stringify(r.selectedVehicle)),a=[],i=t,n=[],r.modelsList.forEach(function(e){+e.nameplateYear==+t&&(a.push(e),-1===n.indexOf(e.nameRelVeh))&&n.push(e.nameRelVeh)}),e.name=i+" "+n.join(", "),e.models=a,r.selectedVehicle=e,r.selectedModel=r.selectedVehicle.models[0],o.setSelectedModel(r.selectedModel,!0)):(r.filterModelsByYear="",r.selectedVehicle=o.getWorkFlowData().selectedVehicle,r.selectedModel=o.getWorkFlowData().selectedModel)},r.sortBy=function(e){"category"===e?(r.sortByCategory=!0,r.filterSort=""):(r.sortByCategory=!1,r.filterSort=e),i.getCreditPaymentEstimatorEvents().action("mini showroom","sort","category"===e?e:"price")},r.closeOverlay=function(){r.showOverlay=!1,angular.element(document.querySelector(".multi-finance-calculator-wrap")).removeClass("is-overlay-open")},r.setCurrentVehicleModel=function(e){var t;r.selectedVehicle.models[e].key!==r.currentKeyModel&&(r.currentKeyModel=r.selectedVehicle.models[e].key,r.selectedModel=r.selectedVehicle.models[e],t=0===r.filterModelsByYear.length,o.setSelectedModel(r.selectedVehicle.models[e],t),i)&&i.getCreditPaymentEstimatorEvents().action("change model")},r.setCurrentVehicleList=function(e,t){void 0!==t&&$(t.target).hasClass("vehicle-showroom-citation")||($(document).scrollTop(0),e.models[0].name&&e.models[0],r.analyticsName=e.analyticsName,fordAnalytics&&(fordAnalytics.onclick={nameplate:e.analyticsName,modelYear:e.year}),o.setSelectedVehicle(e.models[0],e),r.filterModelsByYear="",r.selectedVehicle=o.getWorkFlowData().selectedVehicle,r.selectedModel=o.getWorkFlowData().selectedModel,r.showOverlay=!1,angular.element(document.querySelector(".multi-finance-calculator-wrap")).removeClass("is-overlay-open"))},r.selectedCategoryToFilterBy=function(e){this.selectedCategory=e,a.openFilter=!1,a.advanceFilter=!1,a.filterByCategory=!1},r.setMobileYearFilter=function(e,t){a.mobileFilter={max:t,min:e}},r.updateFilterByYear=function(){r.filterByYear=a.mobileFilter,a.openFilter=!1,a.advanceFilter=!0}}}),define("multi-finance-calculator/services/multiFinanceCalculator.service.workflowdata",["_","common"],function(V,B){return function(l,_){var r,e,t={},s=angular.element("#calculator-version").text(),c=$("select.terms-dropdown").data("defaultterm")||60,d=!1,u=[12,24,30,36],p={},m={},h=[],f=0,a=JSON.parse(angular.element(document.querySelector("#json-api")).text()),i=angular.element(document.querySelector("#data-default-vehicle")).text(),n=a,o=[],g=Number(angular.element("#minDownpaymentRate").text())/100,v=(Number(angular.element("#maxDownpaymentRate").text()),B.localeStorage()),R="NO_DATA_FROM_CFC_PLAN";a.forEach(function(t){t.models.forEach(function(e){e.nameRelVeh=t.name,o.push(e)})});var y,b,w,C,k,S,x=V.chain(a).pluck("category").unique().value().map(function(e){var t={category:e,vehicleList:[]};return a.forEach(function(e){e.category===t.category&&t.vehicleList.push(e)}),t}),D=window.location.search,P=(D=(D=D).replace(/\?/,"").split("&"),y={},$.each(D,function(e,t){return t=t.split("="),y[t[0]]=t[1]}),y);if("nameplate"===P.from){for(var T,N=0;N<x.length&&!(T=V.find(x[N].vehicleList,function(e){return e.key===P.name}));N++);S=T.models[0],e=T,A(P)}else void 0!==P.bp_k&&void 0!==P.bp_n?((D={}).key=decodeURIComponent(P.bp_k),D.name=decodeURIComponent(P.bp_n.split("+").join(" ")),D.imagePreview=decodeURIComponent(P.bp_img),D.fuelEfficiencyFrom=decodeURIComponent(P.bp_fef),D.models=[],(b={}).key=decodeURIComponent(P.bp_mk),b.name=decodeURIComponent(P.bp_mn.split("+").join(" ")),b.price=decodeURIComponent(P.bp_mp),"FCMEX"===s&&0<parseInt(decodeURIComponent(P.bp_map))&&0<parseInt(decodeURIComponent(P.bp_mp))?b.totalAccessoryPrice=parseInt(decodeURIComponent(P.bp_map))+parseInt(decodeURIComponent(P.bp_mp)):b.totalAccessoryPrice=decodeURIComponent(P.bp_map),b.imageURL=decodeURIComponent(P.bp_mimg),b.indexInArray=0,D.models.push(b),S=(e=D).models[0],p.buildAndPrice=!0,A(P),0==b.totalAccessoryPrice&&0<b.price&&(b.totalAccessoryPrice=b.price)):localStorage.getItem("IndianMarketWorkFlowData")?(e=JSON.parse(localStorage.getItem("IndianMarketWorkFlowData")).selectedVehicle,S=JSON.parse(localStorage.getItem("IndianMarketWorkFlowData")).selectedModel,JSON.parse(localStorage.getItem("IndianMarketWorkFlowData")).selectedState,p.buildAndPrice=JSON.parse(localStorage.getItem("IndianMarketWorkFlowData")).buildAndPrice):0<i.length?(w=JSON.parse(i),C={},k={},S=void 0!==w.vehicleKey&&(x.forEach(function(e){e.category==w.category&&e.vehicleList.forEach(function(e){e.key==w.vehicleKey&&(C=e).models.forEach(function(e){e.key==w.modelKey&&(k=e)})})}),0<Object.keys(C).length)&&0<Object.keys(k).length?(e=C,k):(e=x[0].vehicleList[0],x[0].vehicleList[0].models[0])):(S=x[0].vehicleList[0].models[0],e=x[0].vehicleList[0]);function A(e){var t=window.location.origin,a=window.location.pathname,i=e.wcmmode;_.$$absUrl=t+a+(void 0!==i?"?cq_ck="+e.cq_ck+"&wcmmode="+i:"")}function I(a,i,n){var o;p.calculationInProgress=!0;var e=angular.element("#serviceLayerUrl").val()+"/fordowner/vehicle/buildandprice/credit/models/calculatePayment";if(a&&(a.state&&$.each(i.stateData,function(e,t){t.value==a.state&&(a.state=t.key)}),a.downPayment=isNaN(a.downPayment)?0:a.downPayment,a.countryCodeISO=$("#countryCodeISO").val()),$(".downPayment-error").hide(),$(".monthlyCETWithFP-error").hide(),$(".accordion-item").removeClass("active").find(".accordion-body").height(0),"empty"!==a.modelKey){$(".BRA.pe-financing-package").show(),$(".BRA.pe-accordion").show(),$(".BRA.pe-ways-of-preserve").show();try{$.ajax({url:e,dataType:returnJsonTypeBaseonBrowser(),data:a,type:"GET"}).done(function(e){m.defaultAnswer=e.amountFinanced;var t=angular.element("#calculator-version").text();if("FCARG"===t&&!O(e)&&r<u.length)return I(F(p.selectedModel),p.selectedModel,!0),!(d=!0);r=null,O(e)?(201==(o=e).returnCode?M(e,"WARN_CFC_DOWNPAYMENT_INVALID",$(".downPayment-error")):202==e.returnCode&&M(e,"WARN_CFC_DOWNPAYMENT_EXCEEDED",$(".downPayment-error")),d&&(d=!1,p.defaultTerm=c,l.$broadcast("ARG_SelectedModel",c)),"FCBRA"==t&&(t=(t=$(".financial-products-card").data("minpayment"))||0,e.paymentDetailsResult&&"undefined"!=e.paymentDetailsResult[0].multiAnnualInsurance&&Number(e.paymentDetailsResult[0].multiAnnualInsurance)>t?M(e,"WARN_MONTHLY_CET_WITH_FP_INVALID",$(".monthlyCETWithFP-error")):$(".monthlyCETWithFP-error").hide(),p.selectedState||(p.selectedState=i.stateData[0].value)),200==e.returnCode&&($(".BRA .financial-products-card").show(),$(".BRA .finance-calculator-btns").show(),$(".BRA.pe-accordion").show()),0==e.downPayment&&($(".downPayment-error").hide(),$(".BRA .financial-products-card").show(),$(".BRA .finance-calculator-btns").show(),$(".BRA.pe-accordion").show()),200!=e.returnCode&&0!=e.downPayment&&($(".BRA .financial-products-card").hide(),$(".BRA .finance-calculator-btns").hide(),$(".BRA.pe-accordion").hide()),i.calcData=o,p.calculationInProgress=!1,l.$broadcast("initComplete"),n&&v&&localStorage.setItem("IndianMarketWorkFlowData",JSON.stringify(p))):(203==e.returnCode&&M(e,"WARN_CFC_CONDITION_INVALID",$(".downPayment-error")),i&&(M(i.calcData=e,"",""),p.calculationInProgress=!1,l.$broadcast("initComplete"),n)&&v&&localStorage.setItem("IndianMarketWorkFlowData",JSON.stringify(p)))}).fail(function(e){M(e,"","")})}catch(e){}}else $(".BRA.pe-financing-package").hide(),$(".BRA.pe-accordion").hide(),$(".BRA.pe-ways-of-preserve").hide()}function L(n,o){var e=angular.element("#serviceLayerUrl").val()+"/fordowner/vehicle/buildandprice/credit/models/calculatePayment",r=(n&&(n.state&&$.each(o.stateData,function(e,t){t.value==n.state&&(n.state=t.key)}),n.downPayment=isNaN(n.downPayment)?0:n.downPayment,n.countryCodeISO=$("#countryCodeISO").val()),f);try{$.ajax({url:e,dataType:returnJsonTypeBaseonBrowser(),data:n,type:"GET"}).done(function(e){var t,a,i;m.amountFinanced=e.amountFinanced,e.plans&&0<e.plans.length?(m.plans=e.plans,t=e.plans,i=o,(a=n).defaultRequest=!1,h=[],0<t.length&&t.forEach(e=>{f=Number(e.code),a.financePlan=Number(e.code),L(a,i)})):m.plans&&m.plans.length>=h.length&&("FCMEX"===s&&e.hasOwnProperty("errorCode")&&e.errorCode===R||(m.amountFinanced[0].code=r,h.push(m.amountFinanced[0]),m.PlansDataArray=h),l.$broadcast("initComplete"))})}catch(e){console.error("Something is wrong")}}function M(e,t,a){var i=a;a&&(t?i.length&&i.show().html('<span class="error">'+getErrorMessageByCode(t)+"</span>"):e.errorCode&&i.length&&i.show().html('<span class="error">'+getErrorMessageByCode(e.errorCode)+"</span>"))}function O(e){try{return e.result?!("Success"!=e.message&&200!=e.returnCode&&201!=e.returnCode&&202!=e.returnCode||200!=e.returnCode&&201!=e.returnCode&&202!=e.returnCode):void 0}catch(e){}}function E(t,a){window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:""));var e=window.location.origin,i=angular.element("#states-list-url").text(),e=(console.log("Model "+t),e+i+".dropdown.data");try{$.ajax({url:e,dataType:returnJsonTypeBaseonBrowser(),type:"GET"}).done(function(e){0<e.length&&(t.stateData=e,$("#select-states").text().trim()&&-1<$("#select-states").text().trim().indexOf($("#select-states").val())?(t.selectedState=$("#select-states").val(),p.selectedState=$("#select-states").val()):(p.selectedState=e[0].value,t.selectedState=e[0].value),I(F(t),t,a))}).fail(function(e){})}catch(e){}}function F(e){if(e){$(".radio-info-section").find("#noModelError").remove(),c=$("select.terms-dropdown").data("defaultterm")||60;var t={modelKey:e.key,term:c,downPayment:Math.round(e.price*g),accessoriesPrice:e.accessoriesPrice?Math.round(e.accessoriesPrice):0,zonePrice:"false"};switch(s){case"FCIND":t.availableIncentives=0,t.netTradeInValue=0;break;case"FCARG":if(delete t.downPayment,t.loanAmount=e.price,r){if(!(r<=u.length))return;c=u[(r+=1)-1],t.term=u[r-1]}else r=1;break;case"FCBRA":var a=e.calcData?e.calcData.deposit:0;t.downPayment=a,t.state=e.selectedState||e.stateData[0].value,t.accessoriesPrice=e.accessoriesPrice?Math.ceil(e.accessoriesPrice):0,"true"===$('input[name="validationZone"]').val()&&(t.zonePrice="true"),console.log("Parametros"+JSON.stringify(t));break;case"FCMEX":t.insurance=$("#MultiAnnualInsurance").prop("checked"),t.lifeInsurance="true",t.lifeInsuranceType=$("#FinanceLifeInsurance").prop("checked")?"finance":"cash",t.countryCodeISO=$("#countryCodeISO").val(),t.defaultRequest="false";break;default:t.availableIncentives=0,t.netTradeInValue=0}return t}$(".radio-info-section").find("#noModelError").remove();var i=$(".multi-finance-calculator-wrap").attr("data-nomodelexists");$(".radio-info-section").append("<div id='noModelError' style='color:red; display:block'>"+i+" </div>")}for(p.selectedVehicle=e,p.selectedModel=S,p.defaultTerm=c,"FCBRA"===s?E(p.selectedModel,!0):"FCMEX"===s?(I(F(p.selectedModel),p.selectedModel,!0),L((D={modelKey:(D=p.selectedModel).key,term:c,downPayment:Math.round(D.price*g),accessoriesPrice:D.accessoriesPrice?Math.round(D.accessoriesPrice):0},"FCMEX"===s?(D.insurance=$("#MultiAnnualInsurance").prop("checked"),D.lifeInsurance="true",D.lifeInsuranceType=$("#FinanceLifeInsurance").prop("checked")?"finance":"cash",D.countryCodeISO=$("#countryCodeISO").val(),D.defaultRequest="true"):(D.availableIncentives=0,D.netTradeInValue=0),D),p.selectedModel)):I(F(p.selectedModel),p.selectedModel,!0),N=0;N<n.length;N++)n[N].startingPrice?n[N].priceForOrder=+n[N].startingPrice:n[N].priceForOrder=0;return p.selectedModelPay="",p.compareModels=[],p.compareModelsActiveIds=[],p.vehicleList=x,p.vehicleDefList=n,p.modelsList=o,p.showLoader=!0,t.getWorkFlowData=function(){return p},t.getPlansData=function(){return m},t.setSelectedModel=function(e,t){p.selectedModel=e,"FCBRA"===s?(l.$broadcast("BRA_SelecteModel"),E(p.selectedModel,t)):I(F(p.selectedModel),p.selectedModel,t),"FCARG"===s&&l.$broadcast("ARG_SelectedModel"),"FCMEX"===s&&l.$broadcast("MEX_SelectedModel"),t&&v&&localStorage.setItem("IndianMarketWorkFlowData",JSON.stringify(p))},t.setSelectedState=function(t){p.selectedState=t,setTimeout(function(){var e=".multi-finance-calculator-wrap select#select-states";$(e+' option[value="'+t+'"]').length&&($(e+" option").prop("selected",!1),$(e+' option[value="'+t+'"]').prop("selected",!0),$(e).trigger("change"))},1e3)},t.addCompareModels=function(){v&&localStorage.setItem("IndianMarketWorkFlowData",JSON.stringify(p))},t.setSelectedVehicle=function(e,t){p.buildAndPrice=!1,p.selectedVehicle=t,p.selectedModel=e,"FCBRA"===s?E(p.selectedModel,!0):I(F(p.selectedModel),p.selectedModel,!0),"FCARG"===s&&l.$broadcast("ARG_SelectedModel"),"FCMEX"===s&&l.$broadcast("MEX_SelectedModel"),v&&localStorage.setItem("IndianMarketWorkFlowData",JSON.stringify(p))},t.calculateRate=function(e,t){I(e,t,!0)},t.calculatePlansRate=function(e,t){L(e,t)},t}}),define("multi-finance-calculator/filters/multiFinanceCalculator.filter.currencyFormat",[],function(){return function(){return function(e,t,a){var i="",n=(angular.element("#currencyKSprtr").val(),angular.element("#currencyDecSprtr").val(),angular.element("#currencyFormatPattern").val()),o=angular.element("#currencySymbol").val(),r="FCARG"===angular.element("#calculator-version").text();if(!e||void 0===e)return"";if(e.indexOf?-1!==e.indexOf(",")&&(e=e.split(",").join("")):e=e.toString(),0===e||"-"===e)return"-";if("NA"===e||isNaN(Number(e)))return"NA";if(t){for(var l=t.split("|"),s=[],c=0;c<l.length;c++)l[c]&&!isNaN(l[c])&&(l[c]=String.fromCharCode(l[c])),s.push(l[c]);s&&(t=s.join("")),i=updatePriceFormat(e,n,!0,r)}else t=o,i=updatePriceFormat(e,n,!1);return i}}}),define("multi-finance-calculator/filters/multiFinanceCalculator.filter.sortVehicle",[],function(){return function(){return function(e,t,a){var i=[],n=[],o=t.min,r=t.max;return angular.forEach(e,function(e){e.year>=o&&e.year<=r&&i.push(e)}),a?(angular.forEach(i,function(e){e.category===a&&n.push(e)}),n):i}}}),define("multi-finance-calculator/directives/multiFinanceCalculator.directive.characterValidator",[],function(){return function(){return{require:"ngModel",link:function(e,t,a,i){i.$parsers.unshift(function(e){return new RegExp(/^(\d+)$/).test(e.toString())?i.$setValidity("characterValidator",!0):i.$setValidity("characterValidator",!1),e})}}}}),define("multi-finance-calculator/directives/multiFinanceCalculator.directive.eventPropogation",[],function(){return function(){return{require:"ngModel",link:function(e,t,a,i){t.on("focus blur keyup change input",function(e){e.stopPropagation()})}}}}),define("multi-finance-calculator/directives/multiFinanceCalculator.directive.maxValidator",[],function(){return function(){return{require:"ngModel",link:function(e,t,a,i){i.$parsers.unshift(function(e){i.$modelValue;return Math.ceil(e)<=Math.ceil(a.maxPayment)?i.$setValidity("maxPayment",!0):i.$setValidity("maxPayment",!1),e})}}}}),define("multi-finance-calculator/directives/multiFinanceCalculator.directive.minValidator",[],function(){return function(){return{require:"ngModel",link:function(e,t,a,i){i.$parsers.unshift(function(e){i.$modelValue;return Math.ceil(e)>=Math.ceil(a.minPayment)?i.$setValidity("minPayment",!0):i.$setValidity("minPayment",!1),e})}}}}),define("footer/component.footer",["jquery","analytics/analyticsEventLayer"],function(a,i){var e={};function n(){if(a(".footer-links-cta").find(".cta").length<1&&a(".footer-cta-section").remove(),a(".footer.fds-enabled").length){t=(t=a(".lang-links")[0])?t.cloneNode(!0):"",a("span.lang-select .lang-links").length||a("span.lang-select").append(t);{let e;var t=(e=a(".utility-links li.site-link-fds-globe").length?a(".utility-links li.site-link-fds-globe").closest("ul")[0]:e)?e.cloneNode(!0):"";a("span.country-select .utility-links").length||a("span.country-select").append(t)}9<a(".footer-right-linksRow .links-body p:not(.dyn-link)").length&&o()}}function o(){a(".footer-right-linksRow .links-body").find("p:not(.dyn-link):gt(7)").addClass("hidden-desktop"),a(".footer-right-linksRow .links-body p.show-more").removeClass("hidden-desktop"),a(".footer-right-linksRow .links-body p.show-less").addClass("hidden-desktop")}return a(".footer-social-share .image .component-content a").click(function(e){var t=a(this).attr("href");i.getSocialEvents().socialClick(t)}),a("body").on("click",".show-more-link",function(e){a(".footer-right-linksRow .links-body p").removeClass("hidden-desktop"),a(".footer-right-linksRow .links-body p.show-more").addClass("hidden-desktop")}),a("body").on("click",".show-less-link",function(e){o()}),a("body").on("click",".mob-quick-link",function(e){a(this).hasClass("icon-chevron-thin-down")?(a(this).removeClass("icon-chevron-thin-down").addClass("icon-chevron-thin-up"),a(".links-body").removeClass("hide-on-mobile")):a(this).hasClass("icon-chevron-thin-up")&&(a(this).removeClass("icon-chevron-thin-up").addClass("icon-chevron-thin-down"),a(".links-body").addClass("hide-on-mobile"))}),a("body").on("click",".site-link-fds-globe",function(e){a("#language-popup-backdrop").removeClass("hide-language-modal-fds"),a("#header-language-selector-modal").removeClass("hide-language-modal-fds"),window.scrollTo({top:0,behavior:"smooth"})}),e.init=function(){a(".footer").each(function(e,t){n()})},e}),define("tabs/component.tabs",["jquery","_","mediaQuery"],function(a,e,t){var i={};function n(e){this.$element=e,this.bindUIElements(),this.bindEvents()}return n.prototype.bindUIElements=function(){this.$componentContent=this.$element.find(".component-content"),this.$contents=this.$element.find(".tabs-content"),this.$contentAnimator=this.$element.find(".tabs-animator"),this.$contentContainer=this.$element.find(".tabs-container"),this.isVertical=this.$componentContent.hasClass("tabs-vertical"),this.isAnimate=this.$componentContent.data("animation"),this.$tabsNav=this.$element.find(".tabs-nav"),this.$tabs=this.$element.find(".tabs-nav-item"),this.isAnimate||this.$contents.addClass("hide")},n.prototype.bindEvents=function(){var t=this.$tabs.filter(".is-active");this.isVertical&&this.setContentHeight(),this.$tabs.on("click.tabs",function(e){e.preventDefault();e=a(e.currentTarget);t=this.$contents.filter(e.find("a").attr("href")),this.$tabs.removeClass("is-active"),e.addClass("is-active"),this.switchContent(t)}.bind(this)),this.$tabsNav.on("click.tabs-nav",function(e){e.preventDefault(),e.stopImmediatePropagation(),this.$tabsNav.toggleClass("is-open")}.bind(this)),t.trigger("click.tabs"),a(window).on("resize",e.throttle(function(){this.switchContent(t)},300).bind(this)),a(window).on("load",function(){a(window).trigger("resize.galleryTrigger")})},n.prototype.switchContent=function(e){var t,a,i,n;this.$contentAnimator.width("auto"),e.siblings().removeClass("active"),e.addClass("active"),this.isAnimate?(t=this.$componentContent.data("animation-speed")?this.$componentContent.data("animation-speed")+"s":"0s",i=this.$contents.index(e),i=(a=this.$contentAnimator.parent().width())*i,n=this.$contents.length,this.$contentAnimator.width(a*n).children(".tabs-content").width(a),this.$contentAnimator.css({transform:"translate3d(0, 0, 0)"}).animate({marginLeft:-i+"px"},t)):(this.$contents.addClass("hide"),e.removeClass("hide"))},n.prototype.setContentHeight=function(){var e=0;this.$tabs.each(function(){e+=a(this).outerHeight(!0)}),this.$contents.each(function(){a(this).height()<e&&a(this).css("min-height",e+"px")})},i.tabs=[],i.init=function(e){e=new n(e);i.tabs.push(e)},i}),define("tabs/component.tabPanel",["jquery","_","mediaQuery","jquery-flexslider","isAuthor","analytics/analyticsEventLayer"],function(r,n,o,e,t,l){var a={},s=t.getAuthorStatus();function i(e){var t=this,e=(this.$element=e,this.$element.find(".component-content")),a=(this.isFds=e.data("usefds"),this.isNotFixed=e.data("tab-fixed"),this.clk=0,this.isScrollableMobile=e.hasClass("mobile-scrolling-tabs"),this.bindUIElements(),this.bindEvents(),o.getMediaType()),i=e.hasClass("accordion-on-mobile"),n=e.hasClass("mobile-scrolling-tabs");this.tabActiveColor=e.data("style-active"),this.tabInactiveColor=e.data("style-inactive"),"mobile"==a?(e.attr("style",e.attr("data-style-mobile")),n?window.location.hash&&this.triggerTab(window.location.hash):i?(this.initAccordion(),window.location.hash&&this.triggerTab(window.location.hash)):r(window).load(function(){t.initCarousel()})):e.attr("style",e.attr("data-style-desktop")),window.location.hash&&"mobile"!=a&&this.triggerTab(window.location.hash),this.setTabColors(r(".tabs-nav-item.is-active")),r(".tabPanel:has(.image-tabs-panel)").find("[data-padding-desktop],[data-padding-mobile],[data-margin-desktop],[data-margin-mobile]").each2(function(){c(o.getMediaType(),r(this))})}function c(e,t){var a=r(t).attr("data-margin-mobile"),i=r(t).attr("data-margin-desktop"),n=r(t).attr("data-padding-mobile"),o=r(t).attr("data-padding-desktop");"desktop"==e||"xlarge"==e||"tablet"==e?(r(t).find(".billboard-paragraph").attr("style",o),r(t).attr("style",i)):(r(t).find(".billboard-paragraph").attr("style",n),r(t).attr("style",a))}return i.prototype.bindUIElements=function(){this.$window=r(window),this.$body=r("body"),this.$componentContent=this.$element.find(".component-content"),this.$contents=this.$element.find(".tabs-content"),this.$contentAnimator=this.$element.find(".tabs-animator"),this.$contentContainer=this.$element.find(".tabs-container"),this.isVertical=this.$componentContent.hasClass("tabs-vertical")||this.$element.find(".image-tabs-panel").length,this.isCarouselMobile=this.$componentContent.hasClass("carousel-on-mobile"),this.isAccordionMobile=this.$componentContent.hasClass("accordion-on-mobile"),this.isAnimate=this.$componentContent.data("animation"),this.$tabsNav=this.$element.find(".tabs-nav"),this.$tabsNavPanel=this.$element.find(".nav-pannel"),this.$tabs=this.$element.find(".tabs-nav-item"),this.$mobAccordionTab=this.$element.find(".mob-accordion-tab"),this.isAnimate||this.$contents.addClass("hide"),this.$tabsNav.each(function(){var e=r(this),t=(e.find(".tabs-nav-item").length,e.find(".tabs-nav-item.is-active").length);(0==t||1<t)&&(e.find(".tabs-nav-item").removeClass("is-active"),e.find(".tabs-nav-item").removeClass("active"),e.find(".tabs-nav-item.first").addClass("is-active active"))}),this.triggerUpdateCarousel(this.$element.find(".tabs-nav-item a")),this.triggerUpdateCarousel(this.$element.find(".tabs-container .mob-accordion-tab"))},i.prototype.triggerUpdateCarousel=function(e){e.on("click",function(e){var t=r(this).attr("href");0<r(t).find(".flex-viewport").length&&r(window).trigger("resize")})},i.prototype.triggerTab=function(t){try{this.$tabs.find("a[href='"+t+"']").trigger("click")}catch(e){console.error("Failed to trigger tab "+t+e)}},i.prototype.bindEvents=function(){var e,t,a=this.$tabs.filter(".is-active"),i=(this.$element,o.getMediaType(),r("body").find(".overlay-container"));this.setDataTab(),this.isVertical&&this.setContentHeight(),!this.isAuthorMode&&this.isFds&&this.isScrollableMobile&&0==i.length&&!0!==this.isNotFixed&&(i=r(this.$tabsNavPanel),r("<div/>").insertBefore(this.$tabsNavPanel),r("<div/>").hide().css("height",i.outerHeight()).insertAfter(this.$tabsNavPanel),e=i.next(),t=i.prev(),this.$window.on("scroll",n.throttle(function(){this.stickyNav(e,t)},100).bind(this)),this.setNavPanelHeight()),this.$tabs.on("click.tabs",function(e){e.preventDefault();var t=r(e.currentTarget);t.find("a").attr("href");l.getTabsEvents().trackSelectTabs(t.text().trim()),t.hasClass("is-active")?t.siblings().removeClass("is-active active"):(t.addClass("is-active active").siblings().removeClass("is-active active"),this.setTabColors(t)),a=this.$contents.filter(t.find("a").attr("href")),this.switchContent(a),r(window).trigger("resize"),this.isFds&&(0!=this.clk&&(l.getNameplateExperienceEvents().trackNmpChildPageClick(t.text().trim().toLowerCase()),t.focus(),e.currentTarget.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})),this.clk++)}.bind(this)),this.$mobAccordionTab.on("click",function(e){e.preventDefault();var t=r(e.currentTarget).attr("href");setTimeout(function(){r(t).find(".carousel").hasClass("js-resized-mob")||(r(t).find(".carousel").resize().addClass("js-resized-mob"),r(window).trigger("resize"))},500)}.bind(this)),this.$tabsNav.on("click.tabs-nav",function(e){e.preventDefault(),this.$tabsNav.toggleClass("is-open")}.bind(this)),a.trigger("click.tabs"),window.location.hash||a.trigger("click.tabs"),r(window).on("resize.applyMarginPadding",function(){setTimeout(0,function(){r(".tabPanel:has(.image-tabs-panel)").find("[data-padding-desktop],[data-padding-mobile],[data-margin-desktop],[data-margin-mobile]").each2(function(){c(o.getMediaType(),r(this))})})})},i.prototype.stickyNav=function(e,t){var a=r(".section.secondaryNavigation"),t=t.offset().top;0<a.length?(t-=a.outerHeight(),this.$window.scrollTop()>t?(this.$tabsNavPanel.addClass("fixed"),e.show()):(this.$tabsNavPanel.removeClass("fixed"),e.hide())):this.$window.scrollTop()>t?(this.$tabsNavPanel.addClass("fixed fixed-top"),e.show()):(this.$tabsNavPanel.removeClass("fixed fixed-top"),e.hide())},i.prototype.switchContent=function(e){var t,a,i,n;this.$contentAnimator.width("auto"),e.siblings().removeClass("active"),e.addClass("active"),this.isAnimate?(t=this.$componentContent.data("animation-speed")?this.$componentContent.data("animation-speed")+"s":"0s",i=this.$contents.index(e),i=(a=this.$contentAnimator.parent().width())*i,n=this.$contents.length,this.$contentAnimator.width(a*n).children(".tabs-content").width(a),this.$contentAnimator.css({transform:"translate3d(0, 0, 0)"}).animate({marginLeft:-i+"px"},t)):(this.$contents.addClass("hide"),e.removeClass("hide")),e.find(".carousel").hasClass("js-resized")||e.find(".carousel").resize().addClass("js-resized"),s&&this.toggleTabParsys(e)},i.prototype.toggleTabParsys=function(e){var t,a,i=this,n=e.attr("data-componentPath");this.$contents.each(function(){a=r(this).attr("data-componentPath"),t=i.getEditablePromise(a),n===a?t.done(function(e){e&&e.show()}):t.done(function(e){e&&e.hide()})})},i.prototype.getEditablePromise=function(e){var t=$CQ.Deferred(),a=CQ.WCM.getEditable(e);return a?t.resolve(a):CQ.WCM.onEditableReady(e,function(e){t.resolve(e)}),t.promise()},i.prototype.setNavPanelHeight=function(){var e=0;this.$tabsNav.each(function(){e+=this.clientHeight}),this.$tabsNavPanel.each(function(){r(this).css("min-height",e+"px")})},i.prototype.setContentHeight=function(){var e=0;this.$tabs.each(function(){e+=r(this).outerHeight(!0)}),this.$contents.each(function(){r(this).height()<e&&r(this).css("min-height",e+"px")})},i.prototype.setDataTab=function(){this.$tabs.each(function(e,t){return r(t).find("a").attr("data-tab")&&r(t).find("a").attr("data-tab",r(t).find("a").data("tab").replace("<p>","").replace("</p>","").replace("\n","").trim())})},i.prototype.initCarousel=function(){this.isCarouselMobile&&this.$contentContainer.flexslider({selector:".tabs-animator > .tabs-content",animation:"slide",controlsContainer:".flex-container",smoothHeight:!0})},i.prototype.initAccordion=function(){var e;this.$mobAccordionTab.append('<i class="accordion-indicator icon-chevron-thin-right"></i>'),this.isAccordionMobile&&(window.location.hash&&(e=encodeURI(window.location.hash),isNaN(e)||r(".mob-accordion-tab"+e+" > .accordion-indicator").toggleClass("active")),r(".tabs-content.active").prev().find(".accordion-indicator").addClass("active"),this.$mobAccordionTab.on("click",function(e){e.preventDefault(),e.stopImmediatePropagation();var e=r(this).attr("href"),t=r(this).find(".accordion-indicator");r(".tabs-content"+e).animate({height:"toggle"}),t.toggleClass("active"),window.location=e}))},i.prototype.setTabColors=function(e){var t=e.siblings(),a=this.tabInactiveColor||"2d96cd",i=this.tabActiveColor||"1b394e";t.unbind("mouseenter mouseleave"),e.parents().hasClass("image-tabs-panel")?(t.css({background:a}),e.css({background:i}),e.find(".arrow-left").css({"border-right-color":i}),e.find(".arrow-down").css({"border-top-color":i})):(t.find("a").children().css("color",a),e.css("border-bottom-color",i),e.find("a").children().css("color",i),e.hover(function(e){r(this).find("a").css("color",i)}))},a.tabs=[],a.init=function(e){var t=!1;e.each(function(){var e;(0<r(this).closest(".tabImagePanel").length||!s)&&(e=new i(r(this)),a.tabs.push(e))}),r(".tabs-nav-item").click(function(e){e.preventDefault(),t&&(r(this).focus(),this.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"}),t=!1)}),r(".indicators span.rightArrow").click(function(e){r(".tabs-nav-list").find(".tabs-nav-item.active").next(".tabs-nav-item").find("a.ownerVehicle").trigger("click"),t=!0}),r(".indicators span.leftArrow").click(function(e){r(".tabs-nav-list").find(".tabs-nav-item.active").prev(".tabs-nav-item").find("a.ownerVehicle").trigger("click"),t=!0})},a}),define("tabs/component.myProfileTab",["jquery","_","mediaQuery","jquery-flexslider","utils/mediaTracking","analytics/analyticsEventLayer","isAuthor","service-history-search-result/component.serviceHistorySearchResult"],function(d,e,o,t,a,u,i,r){var l={};function p(e,t,a){for(var i=t.find(".component-content .ownerVehicleTitle"),n=t.find(".tabs-animator input[name=vincode]"),o=t.find(".tabs-animator input[name=modelKey]"),r=t.find(".tabs-animator input[name=color]"),l=t.find(".tabs-animator input[name=vehicleName]"),s=t.find(".tabs-animator .ownerVehicleAccordionTab"),c=0;c<e;c++)void 0===a.vehicle[c].yourVehicle||""==a.vehicle[c].yourVehicle||null==a.vehicle[c].yourVehicle?(i[c].innerHTML="-",s[c].innerHTML="-"):(i[c].innerHTML=a.vehicle[c].yourVehicle,s[c].innerHTML=a.vehicle[c].yourVehicle),n[c].value=a.vehicle[c].vincode,r[c].value=a.vehicle[c].color,o[c].value=a.vehicle[c].modelKey,l[c].value=a.vehicle[c].yourVehicle}function s(e,t,a){var i=require("cookie").getCookie("OWNER_SESSION");if(void 0!==i&&""!=i&&e){i=t,t=a,a=e,e=0;if(1==(e=a.vehicle?a.vehicle.length:e)&&(d(".link-delete-vehicle-overlay").remove(),d(".delete-vehicle").remove(),d(".dashboard-billboard-content").find(".content-details > p:last > a.cta-button").remove()),e<i){var n=t.find(".component-content .ownerVehicleTitle"),o=t.find(".tabs-animator .ownerVehicleAccordionTab"),r=t.find(".tabs-animator .tabs-content.ownerVehicleContent"),l=i-e;if(1==l){var s=i-1;n.closest("li").length>s&&n.closest("li").slice(s,i).remove(),o.length>s&&o.slice(s,i).remove(),r.length>s&&r.slice(s,i).remove()}else if(2==l)for(var c=0;c<2;c++)n.closest("li").slice(c,c+1==2?c+1:2).remove(),o.slice(c,c+1==2?c+1:2).remove(),r.slice(c,c+1==2?c+1:2).remove();p(e,t,a)}else i==e?(p(e,t,a),s=t.find(".component-content .addVehicleTabTitle"),l=t.find(".tabs-animator .addVehicleAccordionTab"),e=t.find(".tabs-animator .tabs-content.addVehicleContent"),s.remove(),l.remove(),e.remove()):p(i,t,a);u.getOwnerMyProfileEvents().vehicleTabTriggers()}}function c(e){this.$element=e,this.$element.length&&(n=this.$element.find(".tabs-animator input[name=numberVehicle]").val(),s(i=(i=require("cookie").getCookie("OWNER_USERINFO"))&&JSON.parse(i),n,e),d(".checkServiceHistory").length)&&(d(".checkServiceHistory").css("padding","0.75rem 0"),t=d(".main-nav").css("z-index"),a=d(".section.secondaryNavigation").css("z-index"),d(".service-history-view-more").bind("click",function(){r.init()}),d(".service-history-close").bind("click",function(){d(".main-nav").css("z-index",t),d(".section.secondaryNavigation").css("z-index",a),d("#servicePage").css("display","none")})),this.bindUIElements(),this.bindEvents();var t,a,i=this.$element.find(".component-content"),n=o.getMediaType(),e=i.hasClass("accordion-on-mobile");this.tabActiveColor=i.data("style-active"),this.tabInactiveColor=i.data("style-inactive"),"mobile"==n?e?(this.initAccordion(),this.triggerTab()):this.initCarousel():this.triggerTab(),d(".tabs-content").find("input[name=vincode]").each(function(){var e,t;e="vincode",t=(t=window.location.href)||location.href,e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),(null==(e=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(t))?null:e[1])==d(this).val()&&d(".tabs-nav-list").find("a#"+d(this).closest(".tabs-content").attr("id")).click()}),i=window.location.hash,n=d(".myProfileLogOut"),null!=i&&""!=i&&"#logout"===i&&l.isPublishMode&&n.length&&n.show()}function n(){var e=d.cookie("OWNER_SESSION"),t=d.cookie("OWNER_USERNAME");void 0!==e&&""!=e&&(t={userName:t,sessionToken:e},"true"==d("#isLightHouse").val()&&(t.make=d("#make").val(),t.isLightHouse=!0,t.countryCodeIso2=d("#countryCodeIso2").val(),t.countryCodeISO=d("#countryCodeISO").val()),d.ajax({type:"POST",url:d("#serviceLayerUrl").val()+"/fordowner/vehicle/users/profiles/accountinfo",dataType:returnJsonTypeBaseonBrowser(),data:t,success:function(e){var t,a,i,n=e.returnCode;if(null!=n)switch(n){case 201:case 200:a=(t=e).vehicle,i=d.cookie("OWNER_SESSEXPIRY"),require("cookie").setCookieWithPath("OWNER_USERINFO",JSON.stringify(t),i,"/"),require("cookie").setCookieWithPath("OWNER_VEHINFO",JSON.stringify(a),i,"/"),addClientContextData(t)}},error:function(e){},complete:function(){for(var e=new URL(window.location).href.split("#"),t=0;t<e.length;t++){-1!=e[t].indexOf("http")&&window.open(e[t],"_self");break}}}))}function m(t,a){return Object.keys(a).forEach(function(e){t=t.replace(e,a[e])}),t}return l.isAuthorMode=i.getAuthorStatus(),l.isPublishMode=!l.isAuthorMode,c.prototype.bindUIElements=function(){this.$componentContent=this.$element.find(".component-content"),this.$contents=this.$element.find(".tabs-content"),this.$contentAnimator=this.$element.find(".tabs-animator"),this.$contentContainer=this.$element.find(".tabs-container"),this.isVertical=this.$componentContent.hasClass("tabs-vertical"),this.isCarouselMobile=this.$componentContent.hasClass("carousel-on-mobile"),this.isAccordionMobile=this.$componentContent.hasClass("accordion-on-mobile"),this.isAnimate=this.$componentContent.data("animation"),this.$tabsNav=this.$element.find(".tabs-nav"),this.$tabs=this.$element.find(".tabs-nav-item"),this.$mobAccordionTab=this.$element.find(".mob-accordion-tab"),this.isAnimate||this.$contents.addClass("hide")},c.prototype.showDefaultTab=function(){this.$contentContainer.find("#tabs-0").removeClass("hide").addClass("active")},c.prototype.triggerTab=function(){var e;window.location.hash&&"#tabs-0"!=window.location.hash?-1!=(e=window.location.hash).indexOf("#overlay")||-1!=e.indexOf("#/overlay")?2<e.split("#")&&(e=e.substring(e.lastIndexOf("#"),e.length),this.$tabs.find('a[href="'+e+'"]').trigger("click")):this.$tabs.find('a[href="'+e+'"]').trigger("click"):this.$contents.first().addClass("active")},c.prototype.bindEvents=function(){var a=this.$tabs.filter(".is-active");this.$element;this.isVertical&&this.setContentHeight(),this.$tabs.on("click.tabs",function(e){if(!d(e.currentTarget).hasClass("signoff")){e.preventDefault();var e=d(e.currentTarget),t=e.find("a").attr("href");if(e.hasClass("is-active"))return!1;a=this.$contents.filter(e.find("a").attr("href")),-1!=window.location.hash.indexOf("#overlay")||-1!=window.location.hash.indexOf("#/overlay")?window.location=encodeURI(window.location.hash+t):window.location=t,"logout"!=a.attr("id")&&(this.$tabs.removeClass("is-active"),e.addClass("is-active"),e.click(function(){return!1}),this.setTabColors(e)),this.switchContent(a)}}.bind(this)),this.$tabsNav.on("click.tabs-nav",function(e){e.preventDefault(),this.$tabsNav.toggleClass("is-open")}.bind(this)),this.showDefaultTab(),window.location.hash||a.trigger("click.tabs"),d(window).on("resize",e.throttle(function(){this.switchContent(a)},300).bind(this)),d(".addNewTab").on("click",function(e){e.preventDefault(),n()}),d(".deleteTab").on("click",function(e){e.preventDefault(),n()})},c.prototype.switchContent=function(e){var t,a,i,n=e;0<(n=n.find('input[name="vincode"]')).length&&(n=n.val())&&(n=(e=>{var t={};if((t=CQ_Analytics&&CQ_Analytics.OwnerInfoStoreMgr?CQ_Analytics.OwnerInfoStoreMgr.getData():t)&&t.vehicle){var a=t.vehicle;if(0<a.length)for(var i=0;i<a.length;i++)if(e==a[i].vincode)return a[i]}return{}})(n))&&u.getSelectVehiclesEvents().trackUserSelectVehicle(n),this.$contentAnimator.width("auto"),e.siblings().removeClass("active"),e.addClass("active"),this.isAnimate?(n=this.$componentContent.data("animation-speed")?this.$componentContent.data("animation-speed")+"s":"0s",a=this.$contents.index(e),a=(t=this.$contentAnimator.parent().width())*a,i=this.$contents.length,this.$contentAnimator.width(t*i).children(".tabs-content").width(t),this.$contentAnimator.css({transform:"translate3d(0, 0, 0)"}).animate({marginLeft:-a+"px"},n)):(this.$contents.addClass("hide"),e.removeClass("hide"))},c.prototype.setContentHeight=function(){var e=0;this.$tabs.each(function(){e+=d(this).outerHeight(!0)}),this.$contents.each(function(){d(this).height()<e&&d(this).css("min-height",e+"px")})},c.prototype.initCarousel=function(){this.isCarouselMobile&&this.$contentContainer.flexslider({selector:".tabs-animator > .tabs-content",animation:"slide",controlsContainer:".flex-container",smoothHeight:!0})},c.prototype.initAccordion=function(){var e;this.$mobAccordionTab.append('<i class="accordion-indicator icon-chevron-thin-right"></i>'),this.isAccordionMobile&&(window.location.hash&&(e=encodeURI(window.location.hash),d(".mob-accordion-tab"+e+" > .accordion-indicator").toggleClass("active")),this.$mobAccordionTab.on("click",function(e){e.preventDefault();e=d(this).attr("href");d(this).find(".accordion-indicator");d(".accordion-on-mobile .tabs-content").removeClass("active").addClass("hide"),d(".mob-accordion-tab > .accordion-indicator").removeClass("active"),d(".tabs-content"+e).removeClass("hide").addClass("active"),d(".mob-accordion-tab"+e+" > .accordion-indicator").addClass("active"),window.location=e}))},c.prototype.setTabColors=function(e){var t=e.siblings(),a=this.tabInactiveColor||"2d96cd",i=this.tabActiveColor||"1b394e";t.find("a").css("color","#"+a),t.hover(function(){d(this).find("a").css("color","#"+i)},function(){d(this).find("a").css("color","#"+a)}),e.unbind("hover"),e.css("border-bottom-color","#"+i),e.find("a").css("color","#"+i),e.hover(function(e){d(this).find("a").css("color","#"+i)})},l.onwerTabs=[],l.init=function(e){i=a=t="","undefined"!=typeof CQ_Analytics&&void 0!==CQ_Analytics.OwnerInfoStoreMgr.data&&void 0!==CQ_Analytics.OwnerInfoStoreMgr.data.length&&(t=CQ_Analytics.OwnerInfoStoreMgr.getData().firstName,a=CQ_Analytics.OwnerInfoStoreMgr.getData().userName,i=CQ_Analytics.OwnerInfoStoreMgr.getData().lastName),"undefined"!=a&&""!=a||(a=d.cookie("OWNER_USERNAME")),0<(n=d(".cl-text-grey").eq(1)).length&&n.each(function(){0<d(this).html().indexOf("[@firstName]")&&(void 0!==t?d(this).html(m(d(this).html(),{"[@firstName]":t})):d(this).html(m(d(this).html(),{"[@firstName]":a}))),0<d(this).html().indexOf("[@lastName]")&&(void 0!==i?d(this).html(m(d(this).html(),{"[@lastName]":i})):d(this).html(m(d(this).html(),{"[@lastName]":""}))),0<d(this).html().indexOf("[@userName]")&&(void 0!==a?d(this).html(m(d(this).html(),{"[@userName]":a})):d(this).html(m(d(this).html(),{"[@userName]":t})))});var t,a,i,n=new c(e);l.onwerTabs.push(n)},l}),define("tooltip-gux/global.ux.tooltip",["jquery","mediaQuery","analytics/analyticsEventLayer","scroll/global.ux.scroll"],function(m,c,e,d){function n(a,e,t){var i,n,o,r="gux-tooltip-"+Math.random().toString(16).slice(2),e=e||"",t=t||"",l="",s=m("#global-ux");m(".gux-tooltip-overlay").each(function(){f(this)}),l+='<div id="'+r+'" class="gux-tooltip-overlay" tabindex="0">',e&&0!=e&&(l+='<div class="gux-tooltip-overlay-title body1-bold">'+e+"</div>"),l=l+'<div class="tooltip-bdody"><span class="gux-tooltip-overlay-text body1-regular">'+t+'</span></div><a class="close-icon" tabindex="0"></a></div>',0===m("#"+r).length&&(e=m("body").scrollTop(),s.append(l),t=m("#"+r),u(r,a),"mobile"!==c.getMediaType()&&p(r,a),n=e,o=a,(i=t).find("a.close-icon").click(function(e){h(e,i,n,o)}),i.keydown(function(e){27!==e.keyCode?e.stopImmediatePropagation():h(e,i,n,o)}),m(".gux-tooltip-overlay .close-icon").on("keydown",function(e){e.preventDefault(),e.target.click()}),m(document).on("click.toggleTooltip",function(e){i.is(e.target)||0!==i.has(e.target).length||f(i)}),t.focus(),window.addEventListener("mediaQuery.change",function(){m("#"+r).length&&("mobile"===c.getMediaType()&&d.preventScrollBody(),"mobile"===c.getPreviousMediaType())&&d.allowScrollBody(0)}),m(window).on("resize.tooltip",function(){var e=r,t=a;m("#"+e),"mobile"!==c.getMediaType()&&(u(e,t),p(e,t))}))}function u(e,t){var e=m("#"+e),a=c.getMediaType(),i=t?t.offset().left+t.outerWidth():0,t=t?t.offset().top+t.outerHeight():0;e.length&&"mobile"!==a&&e.css({top:t,right:"auto",bottom:"auto",left:i})}function p(e,t){var e=m("#"+e),a=m("#global-ux"),i=Math.floor(e.outerHeight(!0)),n=Math.floor(e.outerWidth(!0)),o=Math.floor(n/2),r=(Math.floor(i/2),Math.floor(e.offset().left),Math.floor(t.offset().left+e.outerWidth(!0))),a=Math.floor(a.closest("body").outerWidth()),l=Math.floor(m(window).scrollTop()),s=Math.floor(t.offset().top),c=Math.floor(t.offset().left),d=Math.floor(t.outerHeight(!0)),t=Math.floor(t.outerWidth(!0)),l=s-l,l=Math.floor(s+m(window).height()-l)-s,u="auto",p="auto";p=a<r?i<l?(u=Math.floor(s+d),o<(d=r-a)?c-d:c-o):(u=s-(i-l),c-n):(u=i<l?s-40:s-(i-l),Math.floor(c+t)),e.css({left:p,top:u,right:"5px"})}function h(e,t,a,i){e.stopImmediatePropagation(),f(t),setTimeout(function(){i.focus()},260)}function f(e){m(e).remove(),m(window).off("resize.tooltip"),m(document).off("click.toggleTooltip")}return{init:function(){m("body").find(".gux-tooltip");m(document.body).on("click",".gux-tooltip",function(e){var t,a,i=m(this);a=i.hasClass("option-tool")?(t=i.attr("data-gux-tooltip-title"),i.attr("data-gux-tooltip-text")):(t=i.data("gux-tooltip-title"),i.data("gux-tooltip-text")),e.preventDefault(),e.stopPropagation(),n(i,t,a)}),m(document.body).on("keyup",".gux-tooltip",function(e){var t=m(this),a=t.data("gux-tooltip-title"),i=t.data("gux-tooltip-text");13===e.which&&n(t,a,i)})},showTooltip:n,applyTooltipStyles:u}}),define("twoCalculatorService/component.twoCalculatorService",["jquery","angular"],function(a,e){var t={};return e.module("twoCalculatorService",[]).controller("renderData",["$scope",function(t){t.chooseUser=!0,t.choosecarType=!0,t.monthAndMileageType=!0,t.extendChooseCarType=!0,t.extendChooseyearType=!0,t.calPriceResultShow=!1,t.basicCalculatorButton=!0,t.extendCalculatorButton=!0,t.basicCalculatorButtonClick=!1,t.extendCalculatorButtonClick=!1,t.chooseStatus="",t.extendYear="",t.warrantschemesData=a(".calContainer").data("warrantyschemesdata"),t.extendwarrantyschemesdata=a(".calContainer").data("extendwarrantyschemesdata"),t.chooseUserType=function(){t.userType=a("#userTypeLabel").val(),e.forEach(t.warrantschemesData,function(e){t.userType===e.User&&(t.carTypeData=e.warrantyScheme)}),t.chooseUser=!1,t.monthAndMileageType=!0,t.choosecarType=!0,t.basicCalculatorButton=!0,t.vehicleType="",t.monthAndMileage="",t.carYear="",t.setSelectLabel("vehicleType"),t.setSelectLabel("MonthAndMileage"),t.setSelectLabel("carYear")},t.carTypeChange=function(){t.carTypeValue=a("#vehicleType").val(),e.forEach(t.carTypeData,function(e){t.carTypeValue===e.vehicleType&&(t.warrantySchemeDetails=e.warrantySchemeDetails)}),t.monthAndMileageType=!1,t.choosecarType=!0,t.basicCalculatorButton=!0,t.monthAndMileage="",t.carYear="",t.setSelectLabel("MonthAndMileage"),t.setSelectLabel("carYear")},t.MonthAndMileageChange=function(){t.monthAndMileage=a("#MonthAndMileage").val(),e.forEach(t.warrantySchemeDetails,function(e){t.monthAndMileage===e.useMonthAndMileage&&(t.warrantySchemePriceLists=e.warrantySchemePriceList)}),t.choosecarType=!1,t.basicCalculatorButton=!0,t.carYear="",t.setSelectLabel("carYear")},t.carYear=t.warrantySchemePriceLists,t.yearChange=function(){t.basicCalculatorButton=!1},t.basicCalculator=function(){t.chooseCarYear=a("#carYear").val(),e.forEach(t.warrantySchemePriceLists,function(e){t.chooseCarYear===e.yearOfPurchasedMaintenanceProject&&(t.basicPackagePrice=e.basicPackagePrice,t.premiumnPakagePrice=e.premiumnPakagePrice)}),t.calPriceResultShow=!0,t.chooseCar=t.carTypeValue,t.scheme="安心保固",t.basicCalculatorButtonClick=!0,t.extendCalculatorButtonClick=!1},t.extendCarChange=function(){t.carTypeChoose=a("#extendCar").val(),e.forEach(t.extendwarrantyschemesdata,function(e){t.carTypeChoose===e.vehicleType&&(t.extendYearDetail=e.extendWarrantySchemeDetail)}),t.extendChooseCarType=!1,t.extendChooseyearType=!0,t.extendCalculatorButton=!0,t.extendYear="",t.chooseStatus="",t.setSelectLabel("extendYear"),t.setSelectLabel("status")},t.extendYearChange=function(){t.extendYear=a("#extendYear").val(),e.forEach(t.extendYearDetail,function(e){t.extendYear===e.yearOfPurchasedExtension&&(t.warrantyStatus=e.extendWarrantySchemePrice,t.extendYear=e.yearOfPurchasedExtension)}),t.extendChooseyearType=!1,t.extendCalculatorButton=!0,t.chooseStatus="",t.setSelectLabel("status")},t.statusChange=function(){t.extendCalculatorButton=!1},t.extendCalculator=function(){t.ectendStatus=a("#status").val(),e.forEach(t.warrantyStatus,function(e){t.ectendStatus===e.warrantyStatus&&(t.basicPackagePrice=e.basicPackagePrice,t.premiumnPakagePrice=e.premiumnPakagePrice,t.chooseStatus=e.warrantyStatus,t.calPriceResultShow=!0,t.chooseCar=t.carTypeChoose,t.scheme="安心保固加購",t.chooseCarYear=a("#extendYear").val(),t.basicCalculatorButtonClick=!1,t.extendCalculatorButtonClick=!0)})},t.setSelectLabel=function(e){setTimeout(function(){a("#"+e).trigger("change")},0)}}]),t.init=function(){e.bootstrap(document,["twoCalculatorService"])},t}),define("scroll/global.ux.scroll",["jquery","mediaQuery","_"],function(o,r,l){return{preventScrollBody:function(e){var t=o("body:not(.cq-wcm-edit)"),a=t.data("overlayCount")||0;t.length&&("mobile"===r.getMediaType()||e)&&t.data("overlayCount",++a).addClass("no-scroll")},allowScrollBody:function(e,t){var a=o("body:not(.cq-wcm-edit)"),i=a.data("overlayCount")||0,n="mobile"===r.getMediaType()?0:1;a.length&&(i<=1?(a.removeClass("no-scroll"),l.isNumber(e)&&("mobile"===r.getMediaType()||t)&&o("body, html").animate({scrollTop:e+"px"},n),i=0):i--,a.data("overlayCount",i))}}}),define("scroll-follow/component.scroll-follow",["jquery","mediaQuery","isAuthor"],function(t,e,a){var i={};function n(e){this.$el=e,this.isAuthorMode=a.getAuthorStatus(),this.bindUIElements(),this.bindUIEvents()}return n.prototype.bindUIElements=function(){this.$window=t(window),this.indicatorStatus=!1,this.container=this.$el.closest(".feature"),this.top=this.container.offset().top,this.triggerOffset=350,this.lastScrollTop=0},n.prototype.bindUIEvents=function(){var e=this.moveElement.bind(this);t(window).on("scroll",function(){window.requestAnimationFrame(e)})},n.prototype.moveBetween=function(e,t){e.addClass("sticky"),e.css({top:t.tops+"px",bottom:"initial",width:t.initWidth,position:"fixed"})},n.prototype.moveToTop=function(e){e.css({top:"initial",bottom:"initial",position:"static"}).removeClass("sticky")},n.prototype.moveToBottom=function(e){e.pos.sectionHeight>e.height()?e.css({bottom:(this.container.outerHeight(!0)-this.container.height())/2}):e.css({bottom:"auto"}),e.css({position:"absolute",top:"initial"}).removeClass("sticky")},n.prototype.moveElement=function(){this.$el.pos={offset:window.pageYOffset,elementHeight:this.$el.height(),tops:this.$el.offset().top-window.pageYOffset,topTrigger:this.container.offset().top-this.triggerOffset,bottomTrigger:this.container.offset().top+this.container.height()-this.$el.height()-this.triggerOffset,initWidth:this.$el.parent().width(),sectionHeight:this.$el.parent().next("div").height()},"desktop"===e.getMediaType()&&this.$el.pos.sectionHeight>2*this.$el.pos.elementHeight&&(!this.$el.hasClass("sticky")&&this.$el.pos.offset>=this.$el.pos.topTrigger&&this.$el.pos.offset<this.$el.pos.bottomTrigger?this.moveBetween(this.$el,this.$el.pos):this.$el.hasClass("sticky")&&this.$el.pos.offset<this.$el.pos.topTrigger?(this.$el.pos.offset<this.lastScrollTop&&this.moveToTop(this.$el),this.lastScrollTop=this.$el.pos.offset):this.$el.hasClass("sticky")&&this.$el.pos.offset>=this.$el.pos.bottomTrigger&&(this.$el.pos.offset>this.lastScrollTop&&this.moveToBottom(this.$el),this.lastScrollTop=this.$el.pos.offset))},i.init=function(e){new n(e)},i}),define("back-to-top/component.backToTop",["jquery"],function(r){var e={};return e.init=function(){var t=r("#back-to-the-top"),a=r(window),i=a.height(),n=r(".main-nav").height(),o=0;t.on("click",function(e){e.preventDefault(),r("html, body").animate({scrollTop:0},700)}),r(window).scroll(function(){var e;e=a.scrollTop(),Math.abs(o-e)<=20||(e<n||o<e?t.removeClass("scrollUp"):1600<e&&e+i<r(document).height()&&t.addClass("scrollUp"),o=e)})},e}),define("dynamic-key-features/component.dynamicKeyFeatures",["jquery","jquery-flexslider","_","configurationProvider","utils/utils.validateDynamicModelData","dynamic-key-features/component.dynamicKeyFeaturesCarousel"],function(a,e,n,t,i,o){var r={},l=".key-features-template",s="service-ok",c="service-error";function d(e){this.$element=e,this.conf=t.get(this.$element),this.requestedFeatures=this.conf.features,this.keyFeaturesArray=[],this.templateHtml=this.$element.find(l).html();e=this.getData(this.conf.endpoint);e.done(function(e){this.setComponentStateSuccess(),i.validate(e.featureCategories)&&(this.keyFeaturesArray=this.parseData(e.featureCategories),this.renderFeatures(this.keyFeaturesArray,this.requestedFeatures))}.bind(this)),e.fail(function(){this.setComponentStateFailed()}.bind(this))}return d.prototype.renderFeatures=function(e,t){var a=[],i=n.template(this.templateHtml);t.forEach(function(t){e.forEach(function(e){e.id===t&&a.push(e)})}),this.$element.find(".key-features-slide-container .row").first().append(i({requestedFeatures:a})),a.length<7?this.$element.find(".carousel-bottom-arrows").hide():a.length<28?(this.$element.find(".carousel-bottom-arrows").addClass("hidden-desktop"),this.$element.find(".carousel-controls").addClass("hidden-mobile")):this.$element.find(".carousel-controls").hide(),o.init(this.$element)},d.prototype.parseData=function(e){var t=[];return e.forEach(function(e){e.featureGroups.forEach(function(e){e.features.forEach(function(e){e.keyFeature&&(e={id:e.id,shortDescription:e.shortDescription,longDescription:e.longDescription,image:e.image},t.push(e))})})}),t},d.prototype.getData=function(e){return a.getJSON(e)},d.prototype.setComponentStateSuccess=function(){this.$element.addClass(s)},d.prototype.setComponentStateFailed=function(){this.$element.addClass(c)},r.init=function(e){a(".dynamicKeyFeatures").each(function(e,t){new d(a(t))})},r}),define("dynamic-key-features/component.dynamicKeyFeaturesCarousel",["jquery","jquery-flexslider","_","mediaQuery"],function(s,e,c,t){var a={};function i(e){var i=s(e).find(".carousel"),t=!1,a=0,n={controlsContainer:i.find("> .carousel-controls"),selector:".slide-container > .carousel-slide",animation:"slide",animationLoop:!1,directionNav:!1,pauseOnHover:!0,slideshow:!1,keyboard:!0,itemWidth:310,itemMargin:0,minItems:o(),maxItems:o(),start:function(e){var t=o();n.minItems=t,n.maxItems=t,e.resize(),e.find(".carousel-previous").addClass("inactive"),l(e)},end:function(e){a++},before:function(e){e.find(".slide-current-slide").text(e.animatingTo+1),e.find(".carousel-btn").removeClass("inactive"),0==e.animatingTo&&e.find(".carousel-previous").addClass("inactive"),e.animatingTo==e.count-1&&e.find(".carousel-next").addClass("inactive")},after:function(e){!t&&0==e.currentSlide&&1<=a&&(e.vars.slideshow=!1,e.flexslider("stop"))}};function o(){return window.innerWidth<767?1:3}function r(){t=!0,i.flexslider("stop")}function l(e){var t=e.data()&&e.data().flexslider||e;6<t.count&&(e.find(".slide-current-slide").text(t.currentSlide+1),e.find(".slide-total-slides").text(" / "+t.pagingCount),e.addClass("carousel-numbers-pagination"))}i.find(".model a").each(function(e,t){s(t).attr("tabIndex","-1")}),i.flexslider(n),e=s(window),i.find(".carousel-previous").on("click",function(e){s(this).closest(".carousel").flexslider("prev"),r()}),i.find(".carousel-next").on("click",function(e){s(this).closest(".carousel").flexslider("next"),r()}),i.on("click",function(){r()}),i.on("keydown",function(e){var t=e.keyCode||e.which,a=i.data("flexslider");9===t&&(i.flexslider("stop"),e.shiftKey?0!==a.currentSlide&&(i.flexslider("prev"),e.preventDefault()):a.currentSlide!==a.pagingCount-1&&(i.flexslider("next"),e.preventDefault()))}),e.on("resize",c.throttle(function(){l(i)},100))}return a.init=function(e){i(e)},a}),define("cookie/global.ux.cookie",["jquery","jquery-cookie"],function(t,e){function a(){null===o.cookies.id||""===o.cookies.id||"null"===o.cookies.id||void 0===o.cookies.id?o.cookies.status=!1:o.cookies.status=!0}function i(){var e;o.cookies.status||(t.cookie("adobe_id",JSON.stringify(["adobe","12345"])),e=JSON.parse(t.cookie("adobe_id")),o.cookies.type=e[0],o.cookies.id=e[1],o.cookies.status=!0,o.cookies.id)}function n(){o.cookies.enabled=t.cookie("check_Ford","valid",{expires:1})&&"valid"==t.cookie("check_Ford"),o.cookies.enabled&&(o.cookies.id=t.cookie("id"),a(),i())}var o={cookies:{id:null,status:!1,enabled:!1,type:""}};return{init:function(){n()},cookieInfo:function(){return o.cookies},checkCookie:a,createCookie:i}}),define("lightbox/global.ux.lightbox",["jquery"],function(i){var n={lightboxContainer:null,lightboxElements:null};return{init:function(){n.lightboxContainer=i("#gux-lightbox"),n.lightboxElements=i(".lightbox-link"),i("#lightbox-close").on("click",function(e){e.preventDefault(),n.lightboxContainer.hide()}),n.lightboxElements.each(function(){var t,a=i(this);a.on("click",function(e){e.preventDefault(),t=a.data("load-lightbox"),t=i("#"+t)[0].outerHTML,n.lightboxContainer.find(".content").empty(),n.lightboxContainer.find(".content").append(t),n.lightboxContainer.show(),i("#details-show").on("click",function(e){e.preventDefault(),i(this).closest(".caption").toggleClass("active")})})})}}}),(n=>{void 0===n.fn.each2&&n.extend(n.fn,{each2:function(e){for(var t=n([0]),a=-1,i=this.length;++a<i&&(t.context=t[0]=this[a])&&!1!==e.call(t[0],a,t););return this}})})(jQuery),((g,v)=>{var e,t,y,n,l,b,c,a,i,o;function r(e){var t=g(document.createTextNode(""));e.before(t),t.before(e),t.remove()}function s(e){return e.replace(/[^\u0000-\u007E]/g,function(e){return a[e]||e})}function d(e,t){for(var a=0,i=t.length;a<i;a+=1)if(u(e,t[a]))return a;return-1}function u(e,t){return e===t||e!==v&&t!==v&&null!==e&&null!==t&&(e.constructor===String?e+""==t+"":t.constructor===String&&t+""==e+"")}function p(e,t){var a,i,n;if(null===e||e.length<1)return[];for(i=0,n=(a=e.split(t)).length;i<n;i+=1)a[i]=g.trim(a[i]);return a}function m(e){return e.outerWidth(!1)-e.width()}function h(t){var a="keyup-change-value";t.on("keydown",function(){g.data(t,a)===v&&g.data(t,a,t.val())}),t.on("keyup",function(){var e=g.data(t,a);e!==v&&t.val()!==e&&(g.removeData(t,a),t.trigger("keyup-change"))})}function f(t,a,i){var n;return i=i||v,function(){var e=arguments;window.clearTimeout(n),n=window.setTimeout(function(){a.apply(i,e)},t)}}function w(e){e.preventDefault(),e.stopPropagation()}function C(e,t,a){var i,n,o=[];(i=e?e.attr("class"):i)&&g((i=""+i).split(" ")).each2(function(){0===this.indexOf("select2-")&&o.push(this)}),(i=t?t.attr("class"):i)&&g((i=""+i).split(" ")).each2(function(){0!==this.indexOf("select2-")&&(n=a(this))&&o.push(n)}),e&&e.attr("class",o.join(" "))}function k(e,t,a,i){var n=s(e.toUpperCase()).indexOf(s(t.toUpperCase())),t=t.length;n<0?a.push(i(e)):(a.push(i(e.substring(0,n))),a.push("<span class='select2-match'>"),a.push(i(e.substring(n,n+t))),a.push("</span>"),a.push(i(e.substring(n+t,e.length))))}function S(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(e).replace(/[&<>"'\/\\]/g,function(e){return t[e]})}function x(o){var e,r=null,t=o.quietMillis||100,l=o.url,s=this;return function(n){window.clearTimeout(e),e=window.setTimeout(function(){var e=o.data,t=l,a=o.transport||g.fn.select2.ajaxDefaults.transport,i=g.extend({},g.fn.select2.ajaxDefaults.params,{type:o.type||"GET",cache:o.cache||!1,jsonpCallback:o.jsonpCallback||v,dataType:o.dataType||"json"}),e=e?e.call(s,n.term,n.page,n.context):null,t="function"==typeof t?t.call(s,n.term,n.page,n.context):t;r&&"function"==typeof r.abort&&r.abort(),o.params&&(g.isFunction(o.params)?g.extend(i,o.params.call(s)):g.extend(i,o.params)),g.extend(i,{url:t,dataType:o.dataType,data:e,success:function(e){e=o.results(e,n.page);n.callback(e)}}),r=a.call(s,i)},t)}}function D(e){var t,a,i=e,l=function(e){return""+e.text},e=(g.isArray(i)&&(i={results:a=i}),!1===g.isFunction(i)&&(a=i,i=function(){return a}),i());return e.text&&(l=e.text,g.isFunction(l)||(t=e.text,l=function(e){return e[t]})),function(n){var o,r=n.term,a={results:[]};""===r?n.callback(i()):(o=function(e,t){var a,i;if((e=e[0]).children){for(i in a={},e)e.hasOwnProperty(i)&&(a[i]=e[i]);a.children=[],g(e.children).each2(function(e,t){o(t,a.children)}),(a.children.length||n.matcher(r,l(a),e))&&t.push(a)}else n.matcher(r,l(e),e)&&t.push(e)},g(i().results).each2(function(e,t){o(t,a.results)}),n.callback(a))}}function P(t){var o=g.isFunction(t);return function(a){var i=a.term,n={results:[]},e=o?t(a):t;g.isArray(e)&&(g(e).each(function(){var e=this.text!==v,t=e?this.text:this;""!==i&&!a.matcher(i,t)||n.results.push(e?this:{id:this,text:this})}),a.callback(n))}}function T(e,t){if(g.isFunction(e))return 1;if(e){if("string"==typeof e)return 1;throw new Error(t+" must be a string, function, or falsy value")}}function N(e){var t;return g.isFunction(e)?(t=Array.prototype.slice.call(arguments,1),e.apply(null,t)):e}function A(){var t=this;if(g("html").hasClass("ie8"))for(var e=0;e<arguments.length;e++)t[arguments[e]].remove();else Array.prototype.forEach.call(arguments,function(e){t[e].remove(),t[e]=null})}function I(e,t){function a(){}return((a.prototype=new e).constructor=a).prototype.parent=e.prototype,a.prototype=g.extend(a.prototype,t),a}window.Select2===v&&(l={x:0,y:0},c={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(e){switch(e=e.which||e){case c.LEFT:case c.RIGHT:case c.UP:case c.DOWN:return!0}return!1},isControl:function(e){switch(e.which){case c.SHIFT:case c.CTRL:case c.ALT:return!0}return!!e.metaKey},isFunctionKey:function(e){return 112<=(e=e.which||e)&&e<=123}},a={"Ⓐ":"A","Ａ":"A","À":"A","Á":"A","Â":"A","Ầ":"A","Ấ":"A","Ẫ":"A","Ẩ":"A","Ã":"A","Ā":"A","Ă":"A","Ằ":"A","Ắ":"A","Ẵ":"A","Ẳ":"A","Ȧ":"A","Ǡ":"A","Ä":"A","Ǟ":"A","Ả":"A","Å":"A","Ǻ":"A","Ǎ":"A","Ȁ":"A","Ȃ":"A","Ạ":"A","Ậ":"A","Ặ":"A","Ḁ":"A","Ą":"A","Ⱥ":"A","Ɐ":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ⓑ":"B","Ｂ":"B","Ḃ":"B","Ḅ":"B","Ḇ":"B","Ƀ":"B","Ƃ":"B","Ɓ":"B","Ⓒ":"C","Ｃ":"C","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","Ç":"C","Ḉ":"C","Ƈ":"C","Ȼ":"C","Ꜿ":"C","Ⓓ":"D","Ｄ":"D","Ḋ":"D","Ď":"D","Ḍ":"D","Ḑ":"D","Ḓ":"D","Ḏ":"D","Đ":"D","Ƌ":"D","Ɗ":"D","Ɖ":"D","Ꝺ":"D","Ǳ":"DZ","Ǆ":"DZ","ǲ":"Dz","ǅ":"Dz","Ⓔ":"E","Ｅ":"E","È":"E","É":"E","Ê":"E","Ề":"E","Ế":"E","Ễ":"E","Ể":"E","Ẽ":"E","Ē":"E","Ḕ":"E","Ḗ":"E","Ĕ":"E","Ė":"E","Ë":"E","Ẻ":"E","Ě":"E","Ȅ":"E","Ȇ":"E","Ẹ":"E","Ệ":"E","Ȩ":"E","Ḝ":"E","Ę":"E","Ḙ":"E","Ḛ":"E","Ɛ":"E","Ǝ":"E","Ⓕ":"F","Ｆ":"F","Ḟ":"F","Ƒ":"F","Ꝼ":"F","Ⓖ":"G","Ｇ":"G","Ǵ":"G","Ĝ":"G","Ḡ":"G","Ğ":"G","Ġ":"G","Ǧ":"G","Ģ":"G","Ǥ":"G","Ɠ":"G","Ꞡ":"G","Ᵹ":"G","Ꝿ":"G","Ⓗ":"H","Ｈ":"H","Ĥ":"H","Ḣ":"H","Ḧ":"H","Ȟ":"H","Ḥ":"H","Ḩ":"H","Ḫ":"H","Ħ":"H","Ⱨ":"H","Ⱶ":"H","Ɥ":"H","Ⓘ":"I","Ｉ":"I","Ì":"I","Í":"I","Î":"I","Ĩ":"I","Ī":"I","Ĭ":"I","İ":"I","Ï":"I","Ḯ":"I","Ỉ":"I","Ǐ":"I","Ȉ":"I","Ȋ":"I","Ị":"I","Į":"I","Ḭ":"I","Ɨ":"I","Ⓙ":"J","Ｊ":"J","Ĵ":"J","Ɉ":"J","Ⓚ":"K","Ｋ":"K","Ḱ":"K","Ǩ":"K","Ḳ":"K","Ķ":"K","Ḵ":"K","Ƙ":"K","Ⱪ":"K","Ꝁ":"K","Ꝃ":"K","Ꝅ":"K","Ꞣ":"K","Ⓛ":"L","Ｌ":"L","Ŀ":"L","Ĺ":"L","Ľ":"L","Ḷ":"L","Ḹ":"L","Ļ":"L","Ḽ":"L","Ḻ":"L","Ł":"L","Ƚ":"L","Ɫ":"L","Ⱡ":"L","Ꝉ":"L","Ꝇ":"L","Ꞁ":"L","Ǉ":"LJ","ǈ":"Lj","Ⓜ":"M","Ｍ":"M","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ɯ":"M","Ⓝ":"N","Ｎ":"N","Ǹ":"N","Ń":"N","Ñ":"N","Ṅ":"N","Ň":"N","Ṇ":"N","Ņ":"N","Ṋ":"N","Ṉ":"N","Ƞ":"N","Ɲ":"N","Ꞑ":"N","Ꞥ":"N","Ǌ":"NJ","ǋ":"Nj","Ⓞ":"O","Ｏ":"O","Ò":"O","Ó":"O","Ô":"O","Ồ":"O","Ố":"O","Ỗ":"O","Ổ":"O","Õ":"O","Ṍ":"O","Ȭ":"O","Ṏ":"O","Ō":"O","Ṑ":"O","Ṓ":"O","Ŏ":"O","Ȯ":"O","Ȱ":"O","Ö":"O","Ȫ":"O","Ỏ":"O","Ő":"O","Ǒ":"O","Ȍ":"O","Ȏ":"O","Ơ":"O","Ờ":"O","Ớ":"O","Ỡ":"O","Ở":"O","Ợ":"O","Ọ":"O","Ộ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Ɔ":"O","Ɵ":"O","Ꝋ":"O","Ꝍ":"O","Ƣ":"OI","Ꝏ":"OO","Ȣ":"OU","Ⓟ":"P","Ｐ":"P","Ṕ":"P","Ṗ":"P","Ƥ":"P","Ᵽ":"P","Ꝑ":"P","Ꝓ":"P","Ꝕ":"P","Ⓠ":"Q","Ｑ":"Q","Ꝗ":"Q","Ꝙ":"Q","Ɋ":"Q","Ⓡ":"R","Ｒ":"R","Ŕ":"R","Ṙ":"R","Ř":"R","Ȑ":"R","Ȓ":"R","Ṛ":"R","Ṝ":"R","Ŗ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꝛ":"R","Ꞧ":"R","Ꞃ":"R","Ⓢ":"S","Ｓ":"S","ẞ":"S","Ś":"S","Ṥ":"S","Ŝ":"S","Ṡ":"S","Š":"S","Ṧ":"S","Ṣ":"S","Ṩ":"S","Ș":"S","Ş":"S","Ȿ":"S","Ꞩ":"S","Ꞅ":"S","Ⓣ":"T","Ｔ":"T","Ṫ":"T","Ť":"T","Ṭ":"T","Ț":"T","Ţ":"T","Ṱ":"T","Ṯ":"T","Ŧ":"T","Ƭ":"T","Ʈ":"T","Ⱦ":"T","Ꞇ":"T","Ꜩ":"TZ","Ⓤ":"U","Ｕ":"U","Ù":"U","Ú":"U","Û":"U","Ũ":"U","Ṹ":"U","Ū":"U","Ṻ":"U","Ŭ":"U","Ü":"U","Ǜ":"U","Ǘ":"U","Ǖ":"U","Ǚ":"U","Ủ":"U","Ů":"U","Ű":"U","Ǔ":"U","Ȕ":"U","Ȗ":"U","Ư":"U","Ừ":"U","Ứ":"U","Ữ":"U","Ử":"U","Ự":"U","Ụ":"U","Ṳ":"U","Ų":"U","Ṷ":"U","Ṵ":"U","Ʉ":"U","Ⓥ":"V","Ｖ":"V","Ṽ":"V","Ṿ":"V","Ʋ":"V","Ꝟ":"V","Ʌ":"V","Ꝡ":"VY","Ⓦ":"W","Ｗ":"W","Ẁ":"W","Ẃ":"W","Ŵ":"W","Ẇ":"W","Ẅ":"W","Ẉ":"W","Ⱳ":"W","Ⓧ":"X","Ｘ":"X","Ẋ":"X","Ẍ":"X","Ⓨ":"Y","Ｙ":"Y","Ỳ":"Y","Ý":"Y","Ŷ":"Y","Ỹ":"Y","Ȳ":"Y","Ẏ":"Y","Ÿ":"Y","Ỷ":"Y","Ỵ":"Y","Ƴ":"Y","Ɏ":"Y","Ỿ":"Y","Ⓩ":"Z","Ｚ":"Z","Ź":"Z","Ẑ":"Z","Ż":"Z","Ž":"Z","Ẓ":"Z","Ẕ":"Z","Ƶ":"Z","Ȥ":"Z","Ɀ":"Z","Ⱬ":"Z","Ꝣ":"Z","ⓐ":"a","ａ":"a","ẚ":"a","à":"a","á":"a","â":"a","ầ":"a","ấ":"a","ẫ":"a","ẩ":"a","ã":"a","ā":"a","ă":"a","ằ":"a","ắ":"a","ẵ":"a","ẳ":"a","ȧ":"a","ǡ":"a","ä":"a","ǟ":"a","ả":"a","å":"a","ǻ":"a","ǎ":"a","ȁ":"a","ȃ":"a","ạ":"a","ậ":"a","ặ":"a","ḁ":"a","ą":"a","ⱥ":"a","ɐ":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ⓑ":"b","ｂ":"b","ḃ":"b","ḅ":"b","ḇ":"b","ƀ":"b","ƃ":"b","ɓ":"b","ⓒ":"c","ｃ":"c","ć":"c","ĉ":"c","ċ":"c","č":"c","ç":"c","ḉ":"c","ƈ":"c","ȼ":"c","ꜿ":"c","ↄ":"c","ⓓ":"d","ｄ":"d","ḋ":"d","ď":"d","ḍ":"d","ḑ":"d","ḓ":"d","ḏ":"d","đ":"d","ƌ":"d","ɖ":"d","ɗ":"d","ꝺ":"d","ǳ":"dz","ǆ":"dz","ⓔ":"e","ｅ":"e","è":"e","é":"e","ê":"e","ề":"e","ế":"e","ễ":"e","ể":"e","ẽ":"e","ē":"e","ḕ":"e","ḗ":"e","ĕ":"e","ė":"e","ë":"e","ẻ":"e","ě":"e","ȅ":"e","ȇ":"e","ẹ":"e","ệ":"e","ȩ":"e","ḝ":"e","ę":"e","ḙ":"e","ḛ":"e","ɇ":"e","ɛ":"e","ǝ":"e","ⓕ":"f","ｆ":"f","ḟ":"f","ƒ":"f","ꝼ":"f","ⓖ":"g","ｇ":"g","ǵ":"g","ĝ":"g","ḡ":"g","ğ":"g","ġ":"g","ǧ":"g","ģ":"g","ǥ":"g","ɠ":"g","ꞡ":"g","ᵹ":"g","ꝿ":"g","ⓗ":"h","ｈ":"h","ĥ":"h","ḣ":"h","ḧ":"h","ȟ":"h","ḥ":"h","ḩ":"h","ḫ":"h","ẖ":"h","ħ":"h","ⱨ":"h","ⱶ":"h","ɥ":"h","ƕ":"hv","ⓘ":"i","ｉ":"i","ì":"i","í":"i","î":"i","ĩ":"i","ī":"i","ĭ":"i","ï":"i","ḯ":"i","ỉ":"i","ǐ":"i","ȉ":"i","ȋ":"i","ị":"i","į":"i","ḭ":"i","ɨ":"i","ı":"i","ⓙ":"j","ｊ":"j","ĵ":"j","ǰ":"j","ɉ":"j","ⓚ":"k","ｋ":"k","ḱ":"k","ǩ":"k","ḳ":"k","ķ":"k","ḵ":"k","ƙ":"k","ⱪ":"k","ꝁ":"k","ꝃ":"k","ꝅ":"k","ꞣ":"k","ⓛ":"l","ｌ":"l","ŀ":"l","ĺ":"l","ľ":"l","ḷ":"l","ḹ":"l","ļ":"l","ḽ":"l","ḻ":"l","ſ":"l","ł":"l","ƚ":"l","ɫ":"l","ⱡ":"l","ꝉ":"l","ꞁ":"l","ꝇ":"l","ǉ":"lj","ⓜ":"m","ｍ":"m","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ɯ":"m","ⓝ":"n","ｎ":"n","ǹ":"n","ń":"n","ñ":"n","ṅ":"n","ň":"n","ṇ":"n","ņ":"n","ṋ":"n","ṉ":"n","ƞ":"n","ɲ":"n","ŉ":"n","ꞑ":"n","ꞥ":"n","ǌ":"nj","ⓞ":"o","ｏ":"o","ò":"o","ó":"o","ô":"o","ồ":"o","ố":"o","ỗ":"o","ổ":"o","õ":"o","ṍ":"o","ȭ":"o","ṏ":"o","ō":"o","ṑ":"o","ṓ":"o","ŏ":"o","ȯ":"o","ȱ":"o","ö":"o","ȫ":"o","ỏ":"o","ő":"o","ǒ":"o","ȍ":"o","ȏ":"o","ơ":"o","ờ":"o","ớ":"o","ỡ":"o","ở":"o","ợ":"o","ọ":"o","ộ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","ɔ":"o","ꝋ":"o","ꝍ":"o","ɵ":"o","ƣ":"oi","ȣ":"ou","ꝏ":"oo","ⓟ":"p","ｐ":"p","ṕ":"p","ṗ":"p","ƥ":"p","ᵽ":"p","ꝑ":"p","ꝓ":"p","ꝕ":"p","ⓠ":"q","ｑ":"q","ɋ":"q","ꝗ":"q","ꝙ":"q","ⓡ":"r","ｒ":"r","ŕ":"r","ṙ":"r","ř":"r","ȑ":"r","ȓ":"r","ṛ":"r","ṝ":"r","ŗ":"r","ṟ":"r","ɍ":"r","ɽ":"r","ꝛ":"r","ꞧ":"r","ꞃ":"r","ⓢ":"s","ｓ":"s","ß":"s","ś":"s","ṥ":"s","ŝ":"s","ṡ":"s","š":"s","ṧ":"s","ṣ":"s","ṩ":"s","ș":"s","ş":"s","ȿ":"s","ꞩ":"s","ꞅ":"s","ẛ":"s","ⓣ":"t","ｔ":"t","ṫ":"t","ẗ":"t","ť":"t","ṭ":"t","ț":"t","ţ":"t","ṱ":"t","ṯ":"t","ŧ":"t","ƭ":"t","ʈ":"t","ⱦ":"t","ꞇ":"t","ꜩ":"tz","ⓤ":"u","ｕ":"u","ù":"u","ú":"u","û":"u","ũ":"u","ṹ":"u","ū":"u","ṻ":"u","ŭ":"u","ü":"u","ǜ":"u","ǘ":"u","ǖ":"u","ǚ":"u","ủ":"u","ů":"u","ű":"u","ǔ":"u","ȕ":"u","ȗ":"u","ư":"u","ừ":"u","ứ":"u","ữ":"u","ử":"u","ự":"u","ụ":"u","ṳ":"u","ų":"u","ṷ":"u","ṵ":"u","ʉ":"u","ⓥ":"v","ｖ":"v","ṽ":"v","ṿ":"v","ʋ":"v","ꝟ":"v","ʌ":"v","ꝡ":"vy","ⓦ":"w","ｗ":"w","ẁ":"w","ẃ":"w","ŵ":"w","ẇ":"w","ẅ":"w","ẘ":"w","ẉ":"w","ⱳ":"w","ⓧ":"x","ｘ":"x","ẋ":"x","ẍ":"x","ⓨ":"y","ｙ":"y","ỳ":"y","ý":"y","ŷ":"y","ỹ":"y","ȳ":"y","ẏ":"y","ÿ":"y","ỷ":"y","ẙ":"y","ỵ":"y","ƴ":"y","ɏ":"y","ỿ":"y","ⓩ":"z","ｚ":"z","ź":"z","ẑ":"z","ż":"z","ž":"z","ẓ":"z","ẕ":"z","ƶ":"z","ȥ":"z","ɀ":"z","ⱬ":"z","ꝣ":"z"},o=g(document),i=1,y=function(){return i++},o.on("mousemove",function(e){l.x=e.pageX,l.y=e.pageY}),o=I(Object,{bind:function(e){var t=this;return function(){e.apply(t,arguments)}},init:function(e){var o,t,a,i,n=".select2-results",r=(this.opts=e=this.prepareOpts(e),this.id=e.id,e.element.data("select2")!==v&&null!==e.element.data("select2")&&e.element.data("select2").destroy(),this.container=this.createContainer(),this.liveRegion=g("<span>",{role:"status","aria-live":"polite"}).addClass("select2-hidden-accessible").appendTo(document.body),this.containerId="s2id_"+(e.element.attr("id")||"autogen"+y()),this.containerEventName=this.containerId.replace(/([.])/g,"_").replace(/([;&,\-\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.container.attr("title",e.element.attr("title")),this.body=g("body"),C(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.attr("style",e.element.attr("style")),this.container.css(N(e.containerCss)),this.container.addClass(N(e.containerCssClass)),this.elementTabIndex=this.opts.element.attr("tabindex"),this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",w),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),C(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(N(e.dropdownCssClass)),this.dropdown.data("select2",this),this.dropdown.on("click",w),this.results=o=this.container.find(n),this.search=t=this.container.find("input.select2-input"),this.queryCount=0,this.resultsPage=0,this.context=null,this.initContainer(),this.container.on("click",w),this.results.on("mousemove",function(e){l!==v&&l.x===e.pageX&&l.y===e.pageY||g(e.target).trigger("mousemove-filtered",e)}),this.dropdown.on("mousemove-filtered",n,this.bind(this.highlightUnderEvent)),this.dropdown.on("touchstart touchmove touchend",n,this.bind(function(e){this._touchEvent=!0,this.highlightUnderEvent(e)})),this.dropdown.on("touchmove",n,this.bind(this.touchMoved)),this.dropdown.on("touchstart touchend",n,this.bind(this.clearTouchMoved)),this.dropdown.on("click",this.bind(function(e){this._touchEvent&&(this._touchEvent=!1,this.selectHighlighted())})),r=80,a=this.results,i=f(r,function(e){a.trigger("scroll-debounced",e)}),a.on("scroll",function(e){0<=d(e.target,a.get())&&i(e)}),this.dropdown.on("scroll-debounced",n,this.bind(this.loadMoreIfNeeded)),g(this.container).on("change",".select2-input",function(e){e.stopPropagation()}),g(this.dropdown).on("change",".select2-input",function(e){e.stopPropagation()}),g.fn.mousewheel&&o.mousewheel(function(e,t,a,i){var n=o.scrollTop();0<i&&n-i<=0?(o.scrollTop(0),w(e)):i<0&&o.get(0).scrollHeight-o.scrollTop()+i<=o.height()&&(o.scrollTop(o.get(0).scrollHeight-o.height()),w(e))}),h(t),t.on("keyup-change input paste",this.bind(this.updateResults)),t.on("focus",function(){t.addClass("select2-focused")}),t.on("blur",function(){t.removeClass("select2-focused")}),this.dropdown.on("mouseup",n,this.bind(function(e){0<g(e.target).closest(".select2-result-selectable").length&&(this.highlightUnderEvent(e),this.selectHighlighted(e))})),this.dropdown.on("click mouseup mousedown touchstart touchend focusin",function(e){e.stopPropagation()}),this.nextSearchTerm=v,g.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),null!==e.maximumInputLength&&this.search.attr("maxlength",e.maximumInputLength),e.element.prop("disabled")),n=(this.enable(!(r=r===v?!1:r)),e.element.prop("readonly"));this.readonly(n=n===v?!1:n),b=b||((r=g("<div class='select2-measure-scrollbar'></div>")).appendTo("body"),n={width:r.width()-r[0].clientWidth,height:r.height()-r[0].clientHeight},r.remove(),n),this.autofocus=e.element.prop("autofocus"),e.element.prop("autofocus",!1),this.autofocus&&this.focus(),this.search.attr("placeholder",e.searchInputPlaceholder)},destroy:function(){var e=this.opts.element,t=e.data("select2");this.close(),this.propertyObserver&&(this.propertyObserver.disconnect(),this.propertyObserver=null),t!==v&&(t.container.remove(),t.liveRegion.remove(),t.dropdown.remove(),e.removeClass("select2-offscreen").removeData("select2").off(".select2").prop("autofocus",this.autofocus||!1),this.elementTabIndex?e.attr({tabindex:this.elementTabIndex}):e.removeAttr("tabindex"),e.show()),A.call(this,"container","liveRegion","dropdown","results","search")},optionToData:function(e){return e.is("option")?{id:e.prop("value"),text:e.text(),element:e.get(),css:e.attr("class"),disabled:e.prop("disabled"),locked:u(e.attr("locked"),"locked")||u(e.data("locked"),!0)}:e.is("optgroup")?{text:e.attr("label"),children:[],element:e.get(),css:e.attr("class")}:void 0},prepareOpts:function(h){var t,e,f=this,r=h.element;if("select"===r.get(0).tagName.toLowerCase()&&(this.select=e=h.element),e&&g.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in h)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}),"function"!=typeof(h=g.extend({},{populateResults:function(e,t,d){var u=this.opts.id,p=this.liveRegion,m=function(e,t,a){for(var i,n,o,r,l,s=0,c=(e=h.sortResults(e,t,d)).length;s<c;s+=1)r=!(l=!0===(i=e[s]).disabled)&&u(i)!==v,n=i.children&&0<i.children.length,(o=g("<li></li>")).addClass("select2-results-dept-"+a),o.addClass("select2-result"),o.addClass(r?"select2-result-selectable":"select2-result-unselectable"),l&&o.addClass("select2-disabled"),n&&o.addClass("select2-result-with-children"),o.addClass(f.opts.formatResultCssClass(i)),o.attr("role","presentation"),(r=g(document.createElement("div"))).addClass("select2-result-label"),r.attr("id","select2-result-label-"+y()),r.attr("role","option"),(l=h.formatResult(i,r,d,f.opts.escapeMarkup))!==v&&(r.html(l),o.append(r)),n&&((l=g("<ul></ul>")).addClass("select2-result-sub"),m(i.children,l,a+1),o.append(l)),o.data("select2-data",i),t.append(o);p.text(h.formatMatches(e.length))};m(t,e,0)}},g.fn.select2.defaults,h)).id&&(t=h.id,h.id=function(e){return e[t]}),g.isArray(h.element.data("select2Tags"))){if("tags"in h)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+h.element.attr("id");h.tags=h.element.data("select2Tags")}if(e?(h.query=this.bind(function(i){var e,a={results:[],more:!1},n=i.term,o=function(e,t){var a;e.is("option")?i.matcher(n,e.text(),e)&&t.push(f.optionToData(e)):e.is("optgroup")&&(a=f.optionToData(e),e.children().each2(function(e,t){o(t,a.children)}),0<a.children.length)&&t.push(a)},t=r.children();(t=this.getPlaceholder()!==v&&0<t.length&&(e=this.getPlaceholderOption())?t.not(e):t).each2(function(e,t){o(t,a.results)}),i.callback(a)}),h.id=function(e){return e.id}):"query"in h||("ajax"in h?((e=h.element.data("ajax-url"))&&0<e.length&&(h.ajax.url=e),h.query=x.call(h.element,h.ajax)):"data"in h?h.query=D(h.data):"tags"in h&&(h.query=P(h.tags),h.createSearchChoice===v&&(h.createSearchChoice=function(e){return{id:g.trim(e),text:g.trim(e)}}),h.initSelection===v)&&(h.initSelection=function(e,t){var a=[];g(p(e.val(),h.separator)).each(function(){var e={id:this,text:this},t=h.tags;g.isFunction(t)&&(t=t()),g(t).each(function(){if(u(this.id,e.id))return e=this,!1}),a.push(e)}),t(a)})),"function"!=typeof h.query)throw"query function not defined for Select2 "+h.element.attr("id");if("top"===h.createSearchChoicePosition)h.createSearchChoicePosition=function(e,t){e.unshift(t)};else if("bottom"===h.createSearchChoicePosition)h.createSearchChoicePosition=function(e,t){e.push(t)};else if("function"!=typeof h.createSearchChoicePosition)throw"invalid createSearchChoicePosition option must be 'top', 'bottom' or a custom function";return h},monitorSource:function(){var t,e,a=this.opts.element;a.on("change.select2",this.bind(function(e){!0!==this.opts.element.data("select2-change-triggered")&&this.initSelection()})),t=this.bind(function(){var e=a.prop("disabled"),e=(this.enable(!(e=e===v?!1:e)),a.prop("readonly"));this.readonly(e=e===v?!1:e),C(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container&&this.container.addClass(N(this.opts.containerCssClass)),C(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown&&this.dropdown.addClass(N(this.opts.dropdownCssClass))}),a.length&&a[0].attachEvent&&a.each(function(){this.attachEvent("onpropertychange",t)}),(e=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver)!==v&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new e(function(e){e.forEach(t)}),this.propertyObserver.observe(a.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(e){e=g.Event("select2-selecting",{val:this.id(e),object:e});return this.opts.element.trigger(e),!e.isDefaultPrevented()},triggerChange:function(e){e=g.extend({},e=e||{},{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(e),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return!0===this.enabledInterface},enableInterface:function(){var e=this._enabled&&!this._readonly;return e!==this.enabledInterface&&(this.container.toggleClass("select2-container-disabled",!e),this.close(),this.enabledInterface=e,!0)},enable:function(e){this._enabled!==(e=e===v||e)&&(this._enabled=e,this.opts.element.prop("disabled",!e),this.enableInterface())},disable:function(){this.enable(!1)},readonly:function(e){this._readonly!==(e=e!==v&&e)&&(this._readonly=e,this.opts.element.prop("readonly",e),this.enableInterface())},opened:function(){return!!this.container&&this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var e,t,a=this.dropdown,i=this.container.offset(),n=this.container.outerHeight(!1),o=this.container.outerWidth(!1),r=a.outerHeight(!1),l=g(window),s=l.width(),c=l.height(),d=l.scrollLeft()+s,c=l.scrollTop()+c,u=i.top+n,p=i.left,c=u+r<=c,m=i.top-r>=l.scrollTop(),h=a.outerWidth(!1),f=p+h<=d;a.hasClass("select2-drop-above")?(e=!0,!m&&c&&(e=!(t=!0))):(e=!1,!c&&m&&(e=t=!0)),t&&(a.hide(),i=this.container.offset(),n=this.container.outerHeight(!1),o=this.container.outerWidth(!1),r=a.outerHeight(!1),d=l.scrollLeft()+s,l.scrollTop(),u=i.top+n,f=(p=i.left)+(h=a.outerWidth(!1))<=d,a.show(),this.focusSearch()),this.opts.dropdownAutoWidth?(c=g(".select2-results",a)[0],a.addClass("select2-drop-auto-width"),a.css("width",""),o<(h=a.outerWidth(!1)+(c.scrollHeight===c.clientHeight?0:b.width))?o=h:h=o,r=a.outerHeight(!1),f=p+h<=d):this.container.removeClass("select2-drop-auto-width"),"static"!==this.body.css("position")&&(u-=(m=this.body.offset()).top,p-=m.left),t={left:p=f?p:i.left+this.container.outerWidth(!1)-h,width:o},e?(t.top=i.top-r,t.bottom="auto",this.container.addClass("select2-drop-above"),a.addClass("select2-drop-above")):(t.top=u,t.bottom="auto",this.container.removeClass("select2-drop-above"),a.removeClass("select2-drop-above")),t=g.extend(t,N(this.opts.dropdownCss)),a.css(t)},shouldOpen:function(){var e;return!this.opened()&&!1!==this._enabled&&!0!==this._readonly&&(e=g.Event("select2-opening"),this.opts.element.trigger(e),!e.isDefaultPrevented())},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return!!this.shouldOpen()&&(this.opening(),!0)},opening:function(){var a,e=this.containerEventName,t="scroll."+e,i="resize."+e,n="orientationchange."+e,o=(this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body.children().last()[0]&&this.dropdown.detach().appendTo(this.body),0==(a=g("#select2-drop-mask")).length&&((a=g(document.createElement("div"))).attr("id","select2-drop-mask").attr("class","select2-drop-mask"),a.hide(),a.appendTo(this.body),a.on("mousedown touchstart click",function(e){r(a);var t=g("#select2-drop");0<t.length&&((t=t.data("select2")).opts.selectOnBlur&&t.selectHighlighted({noFocus:!0}),t.close(),e.preventDefault(),e.stopPropagation())})),this.dropdown.prev()[0]!==a[0]&&this.dropdown.before(a),g("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),a.show(),this.positionDropdown(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active"),this);this.container.parents().add(window).each(function(){g(this).on(i+" "+t+" "+n,function(e){o.opened()&&o.positionDropdown()})})},close:function(){var e,t,a,i;this.opened()&&(e=this.containerEventName,t="scroll."+e,a="resize."+e,i="orientationchange."+e,this.container.parents().add(window).each(function(){g(this).off(t).off(a).off(i)}),this.clearDropdownAlignmentPreference(),g("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active"),this.results.empty(),this.clearSearch(),this.search.removeClass("select2-active"),this.opts.element.trigger(g.Event("select2-close")))},externalSearch:function(e){this.open(),this.search.val(e),this.updateResults(!1)},clearSearch:function(){},getMaximumSelectionSize:function(){return N(this.opts.maximumSelectionSize)},ensureHighlightVisible:function(){var e,t,a,i=this.results,n=this.highlight();n<0||(0==n?i.scrollTop(0):(a=this.findHighlightableChoices().find(".select2-result-label"),t=(e=g(a[n])).offset().top+e.outerHeight(!0),n===a.length-1&&0<(n=i.find("li.select2-more-results")).length&&(t=n.offset().top+n.outerHeight(!0)),(a=i.offset().top+i.outerHeight(!0))<t&&i.scrollTop(i.scrollTop()+(t-a)),(n=e.offset().top-i.offset().top)<0&&"none"!=e.css("display")&&i.scrollTop(i.scrollTop()+n)))},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-disabled):not(.select2-selected)")},moveHighlight:function(e){for(var t=this.findHighlightableChoices(),a=this.highlight();-1<a&&a<t.length;){var i=g(t[a+=e]);if(i.hasClass("select2-result-selectable")&&!i.hasClass("select2-disabled")&&!i.hasClass("select2-selected")){this.highlight(a);break}}},highlight:function(e){var t=this.findHighlightableChoices();if(0===arguments.length)return d(t.filter(".select2-highlighted")[0],t.get());(e=e>=t.length?t.length-1:e)<0&&(e=0),this.removeHighlight(),(t=g(t[e])).addClass("select2-highlighted"),this.search.attr("aria-activedescendant",t.find(".select2-result-label").attr("id")),this.ensureHighlightVisible(),this.liveRegion.text(t.text()),(e=t.data("select2-data"))&&this.opts.element.trigger({type:"select2-highlight",val:this.id(e),choice:e})},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")},touchMoved:function(){this._touchMoved=!0},clearTouchMoved:function(){this._touchMoved=!1},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(e){var t,e=g(e.target).closest(".select2-result-selectable");0<e.length&&!e.is(".select2-highlighted")?(t=this.findHighlightableChoices(),this.highlight(t.index(e))):0==e.length&&this.removeHighlight()},loadMoreIfNeeded:function(){var t=this.results,a=t.find("li.select2-more-results"),i=this.resultsPage+1,n=this,o=this.search.val(),r=this.context;0!==a.length&&a.offset().top-t.offset().top-t.height()<=this.opts.loadMorePadding&&(a.addClass("select2-active"),this.opts.query({element:this.opts.element,term:o,page:i,context:r,matcher:this.opts.matcher,callback:this.bind(function(e){n.opened()&&(n.opts.populateResults.call(this,t,e.results,{term:o,page:i,context:r}),n.postprocessResults(e,!1,!1),!0===e.more?(a.detach().appendTo(t).text(N(n.opts.formatLoadMore,i+1)),window.setTimeout(function(){n.loadMoreIfNeeded()},10)):a.remove(),n.positionDropdown(),n.resultsPage=i,n.context=e.context,this.opts.element.trigger({type:"select2-loaded",items:e}))})}))},tokenize:function(){},updateResults:function(a){var i,n=this.search,o=this.results,r=this.opts,l=this,e=n.val(),t=g.data(this.container,"select2-last-term");function s(){n.removeClass("select2-active"),l.positionDropdown(),o.find(".select2-no-results,.select2-selection-limit,.select2-searching").length?l.liveRegion.text(o.text()):l.liveRegion.text(l.opts.formatMatches(o.find(".select2-result-selectable").length))}function c(e){o.html(e),s()}!0!==a&&t&&u(e,t)||(g.data(this.container,"select2-last-term",e),(!0===a||!1!==this.showSearchInput&&this.opened())&&(i=++this.queryCount,1<=(t=this.getMaximumSelectionSize())&&(e=this.data(),g.isArray(e))&&e.length>=t&&T(r.formatSelectionTooBig,"formatSelectionTooBig")?c("<li class='select2-selection-limit'>"+N(r.formatSelectionTooBig,t)+"</li>"):n.val().length<r.minimumInputLength?(T(r.formatInputTooShort,"formatInputTooShort")?c("<li class='select2-no-results'>"+N(r.formatInputTooShort,n.val(),r.minimumInputLength)+"</li>"):c(""),a&&this.showSearch&&this.showSearch(!0)):r.maximumInputLength&&n.val().length>r.maximumInputLength?T(r.formatInputTooLong,"formatInputTooLong")?c("<li class='select2-no-results'>"+N(r.formatInputTooLong,n.val(),r.maximumInputLength)+"</li>"):c(""):(r.formatSearching&&0===this.findHighlightableChoices().length&&c("<li class='select2-searching'>"+N(r.formatSearching)+"</li>"),n.addClass("select2-active"),this.removeHighlight(),(e=this.tokenize())!=v&&null!=e&&n.val(e),this.resultsPage=1,r.query({element:r.element,term:n.val(),page:this.resultsPage,context:null,matcher:r.matcher,callback:this.bind(function(e){var t;i==this.queryCount&&(this.opened()?(this.context=e.context===v?null:e.context,this.opts.createSearchChoice&&""!==n.val()&&(t=this.opts.createSearchChoice.call(l,n.val(),e.results))!==v&&null!==t&&l.id(t)!==v&&null!==l.id(t)&&0===g(e.results).filter(function(){return u(l.id(this),l.id(t))}).length&&this.opts.createSearchChoicePosition(e.results,t),0===e.results.length&&T(r.formatNoMatches,"formatNoMatches")?c("<li class='select2-no-results'>"+N(r.formatNoMatches,n.val())+"</li>"):(o.empty(),l.opts.populateResults.call(this,o,e.results,{term:n.val(),page:this.resultsPage,context:null}),!0===e.more&&T(r.formatLoadMore,"formatLoadMore")&&(o.append("<li class='select2-more-results'>"+l.opts.escapeMarkup(N(r.formatLoadMore,this.resultsPage))+"</li>"),window.setTimeout(function(){l.loadMoreIfNeeded()},10)),this.postprocessResults(e,a),s(),this.opts.element.trigger({type:"select2-loaded",items:e}))):this.search.removeClass("select2-active"))})}))))},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){var a;(a=this.search)[0]!==document.activeElement&&window.setTimeout(function(){var e=a[0],t=a.val().length;a.focus(),(0<e.offsetWidth||0<e.offsetHeight)&&e===document.activeElement&&(e.setSelectionRange?e.setSelectionRange(t,t):e.createTextRange&&((t=e.createTextRange()).collapse(!1),t.select()))},0)},selectHighlighted:function(e){var t,a;this._touchMoved?this.clearTouchMoved():(t=this.highlight(),(a=this.results.find(".select2-highlighted").closest(".select2-result").data("select2-data"))?(this.highlight(t),this.onSelect(a,e)):e&&e.noFocus&&this.close())},getPlaceholder:function(){var e;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||((e=this.getPlaceholderOption())!==v?e.text():v)},getPlaceholderOption:function(){var e;if(this.select)return e=this.select.children("option").first(),this.opts.placeholderOption!==v?"first"===this.opts.placeholderOption&&e||"function"==typeof this.opts.placeholderOption&&this.opts.placeholderOption(this.select):""===g.trim(e.text())&&""===e.val()?e:void 0},initContainerWidth:function(){var e=function(){var e,t,a,i,n;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"!==this.opts.width&&"resolve"!==this.opts.width)return g.isFunction(this.opts.width)?this.opts.width():this.opts.width;if((e=this.opts.element.attr("style"))!==v)for(i=0,n=(t=e.split(";")).length;i<n;i+=1)if(null!==(a=t[i].replace(/\s/g,"").match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i))&&1<=a.length)return a[1];return"resolve"===this.opts.width?0<(e=this.opts.element.css("width")).indexOf("%")?e:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px":null}.call(this);null!==e&&this.container.css("width",e)}}),e=I(o,{createContainer:function(){return g(document.createElement("div")).attr({class:"select2-container"}).html(["<a href='javascript:void(0)' class='select2-choice' tabindex='-1'>","   <span class='select2-chosen'>&#160;</span><abbr class='select2-search-choice-close'></abbr>","   <span class='select2-arrow' role='presentation'><b role='presentation'></b></span>","</a>","<label for='' class='select2-offscreen'></label>","<input class='select2-focusser select2-offscreen' type='text' aria-haspopup='true' role='button' />","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <label for='' class='select2-offscreen'></label>","       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input' role='combobox' aria-expanded='true'","       aria-autocomplete='list' />","   </div>","   <ul class='select2-results' role='listbox'>","   </ul>","</div>"].join(""))},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var e,t,a;0<=this.opts.minimumResultsForSearch&&this.showSearch(!0),this.parent.opening.apply(this,arguments),!1!==this.showSearchInput&&this.search.val(this.focusser.val()),this.opts.shouldFocusInput(this)&&(this.search.focus(),(e=this.search.get(0)).createTextRange?setTimeout(function(){(t=e.createTextRange()).collapse(!1),t.select()},500):e.setSelectionRange&&(a=this.search.val().length,e.setSelectionRange(a,a))),""===this.search.val()&&this.nextSearchTerm!=v&&(this.search.val(this.nextSearchTerm),this.search.select()),this.focusser.prop("disabled",!0).val(""),this.updateResults(!0),this.opts.element.trigger(g.Event("select2-open"))},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this))&&this.focusser.focus()},focus:function(){this.opened()?this.close():(this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus()},destroy:function(){g("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),A.call(this,"selection","focusser")},initContainer:function(){var t,e=this.container,a=this.dropdown,i=y(),i=(this.opts.minimumResultsForSearch<0?this.showSearch(!1):this.showSearch(!0),this.selection=t=e.find(".select2-choice"),this.focusser=e.find(".select2-focusser"),t.find(".select2-chosen").attr("id","select2-chosen-"+i),this.focusser.attr("aria-labelledby","select2-chosen-"+i),this.results.attr("id","select2-results-"+i),this.search.attr("aria-owns","select2-results-"+i),this.focusser.attr("id","s2id_autogen"+i),e=g("label[for='"+this.opts.element.attr("id")+"']"),this.focusser.prev().text(e.text()).attr("for",this.focusser.attr("id")),this.opts.element.attr("title"));this.opts.element.attr("title",i||e.text()),this.focusser.attr("tabindex",this.elementTabIndex),this.search.attr("id",this.focusser.attr("id")+"_search"),this.search.prev().text(g("label[for='"+this.focusser.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled())if(e.which===c.PAGE_UP||e.which===c.PAGE_DOWN)w(e);else switch(e.which){case c.UP:case c.DOWN:return this.moveHighlight(e.which===c.UP?-1:1),void w(e);case c.ENTER:return this.selectHighlighted(),void w(e);case c.TAB:return void this.selectHighlighted({noFocus:!0});case c.ESC:return this.cancel(e),void w(e)}})),this.search.on("blur",this.bind(function(e){document.activeElement===this.body.get(0)&&window.setTimeout(this.bind(function(){this.opened()&&this.search.focus()}),0)})),this.focusser.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()&&e.which!==c.TAB&&!c.isControl(e)&&!c.isFunctionKey(e)&&e.which!==c.ESC){if(!1!==this.opts.openOnEnter||e.which!==c.ENTER)return e.which==c.DOWN||e.which==c.UP||e.which==c.ENTER&&this.opts.openOnEnter?e.altKey||e.ctrlKey||e.shiftKey||e.metaKey?void 0:(this.open(),this.search.focus(),void w(e)):void(e.which!=c.DELETE&&e.which!=c.BACKSPACE||(this.opts.allowClear&&this.clear(),w(e)));w(e)}})),h(this.focusser),this.focusser.on("keyup-change input",this.bind(function(e){0<=this.opts.minimumResultsForSearch&&(e.stopPropagation(),this.opened()||this.open())})),t.on("mousedown touchstart","abbr",this.bind(function(e){this.isInterfaceEnabled()&&(this.clear(),(e=e).preventDefault(),e.stopImmediatePropagation(),this.close(),this.selection.focus())})),t.on("mousedown touchstart",this.bind(function(e){r(t),this.container.hasClass("select2-container-active")||this.opts.element.trigger(g.Event("select2-focus")),this.opened()?this.close():this.isInterfaceEnabled()&&this.open(),w(e)})),a.on("mousedown touchstart",this.bind(function(){this.opts.shouldFocusInput(this)&&this.search.focus()})),t.on("focus",this.bind(function(e){w(e)})),this.focusser.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(g.Event("select2-focus")),this.container.addClass("select2-container-active")})).on("blur",this.bind(function(){this.opened()||(this.container.removeClass("select2-container-active"),this.opts.element.trigger(g.Event("select2-blur")))})),this.search.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(g.Event("select2-focus")),this.container.addClass("select2-container-active")})),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.setPlaceholder()},clear:function(e){var t,a=this.selection.data("select2-data");a&&(t=g.Event("select2-clearing"),this.opts.element.trigger(t),t.isDefaultPrevented()||(t=this.getPlaceholderOption(),this.opts.element.val(t?t.val():""),this.selection.find(".select2-chosen").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),!1!==e&&(this.opts.element.trigger({type:"select2-removed",val:this.id(a),choice:a}),this.triggerChange({removed:a}))))},initSelection:function(){var t;this.isPlaceholderOptionSelected()?(this.updateSelection(null),this.close(),this.setPlaceholder()):(t=this).opts.initSelection.call(null,this.opts.element,function(e){e!==v&&null!==e&&(t.updateSelection(e),t.close(),t.setPlaceholder(),t.nextSearchTerm=t.opts.nextSearchTerm(e,t.search.val()))})},isPlaceholderOptionSelected:function(){var e;return this.getPlaceholder()!==v&&((e=this.getPlaceholderOption())!==v&&e.prop("selected")||""===this.opts.element.val()||this.opts.element.val()===v||null===this.opts.element.val())},prepareOpts:function(){var r=this.parent.prepareOpts.apply(this,arguments),a=this;return"select"===r.element.get(0).tagName.toLowerCase()?r.initSelection=function(e,t){e=e.find("option").filter(function(){return this.selected&&!this.disabled});t(a.optionToData(e))}:"data"in r&&(r.initSelection=r.initSelection||function(e,t){var n=e.val(),o=null;r.query({matcher:function(e,t,a){var i=u(n,r.id(a));return i&&(o=a),i},callback:g.isFunction(t)?function(){t(o)}:g.noop})}),r},getPlaceholder:function(){return this.select&&this.getPlaceholderOption()===v?v:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var e=this.getPlaceholder();!this.isPlaceholderOptionSelected()||e===v||this.select&&this.getPlaceholderOption()===v||(this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(e)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear"))},postprocessResults:function(e,t,a){var i=0,n=this;this.findHighlightableChoices().each2(function(e,t){if(u(n.id(t.data("select2-data")),n.opts.element.val()))return i=e,!1}),!1!==a&&(!0===t&&0<=i?this.highlight(i):this.highlight(0)),!0===t&&0<=(a=this.opts.minimumResultsForSearch)&&this.showSearch(function a(e){var i=0;return g.each(e,function(e,t){t.children?i+=a(t.children):i++}),i}(e.results)>=a)},showSearch:function(e){this.showSearchInput!==e&&(this.showSearchInput=e=!0,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!e),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!e),g(this.dropdown,this.container).toggleClass("select2-with-searchbox",e))},onSelect:function(e,t){var a,i;this.triggerSelect(e)&&(a=this.opts.element.val(),i=this.data(),this.opts.element.val(this.id(e)),this.updateSelection(e),this.opts.element.trigger({type:"select2-selected",val:this.id(e),choice:e}),this.nextSearchTerm=this.opts.nextSearchTerm(e,this.search.val()),this.close(),t&&t.noFocus||!this.opts.shouldFocusInput(this)||this.focusser.focus(),u(a,this.id(e))||this.triggerChange({added:e,removed:i}))},updateSelection:function(e){var t,a=this.selection.find(".select2-chosen");this.selection.data("select2-data",e),a.empty(),(t=null!==e?this.opts.formatSelection(e,a,this.opts.escapeMarkup):t)!==v&&a.append(t),(t=this.opts.formatSelectionCssClass(e,a))!==v&&a.addClass(t),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==v&&this.container.addClass("select2-allowclear")},val:function(){var e,t=!1,a=null,i=this,n=this.data();if(0===arguments.length)return this.opts.element.val();if(e=arguments[0],1<arguments.length&&(t=arguments[1]),this.select)this.select.val(e).find("option").filter(function(){return this.selected}).each2(function(e,t){return a=i.optionToData(t),!1}),this.updateSelection(a),this.setPlaceholder(),t&&this.triggerChange({added:a,removed:n});else if(e||0===e){if(this.opts.initSelection===v)throw new Error("cannot call val() if initSelection() is not defined");this.opts.element.val(e),this.opts.initSelection(this.opts.element,function(e){i.opts.element.val(e?i.id(e):""),i.updateSelection(e),i.setPlaceholder(),t&&i.triggerChange({added:e,removed:n})})}else this.clear(t)},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(e){var t,a=!1;if(0===arguments.length)return t=(t=this.selection.data("select2-data"))==v?null:t;1<arguments.length&&(a=arguments[1]),e?(t=this.data(),this.opts.element.val(e?this.id(e):""),this.updateSelection(e),a&&this.triggerChange({added:e,removed:t})):this.clear(a)}}),t=I(o,{createContainer:function(){return g(document.createElement("div")).attr({class:"select2-container select2-container-multi"}).html(["<ul class='select2-choices'>","  <li class='select2-search-field'>","    <label for='' class='select2-offscreen'></label>","    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""))},prepareOpts:function(){var s=this.parent.prepareOpts.apply(this,arguments),i=this;return"select"===s.element.get(0).tagName.toLowerCase()?s.initSelection=function(e,t){var a=[];e.find("option").filter(function(){return this.selected&&!this.disabled}).each2(function(e,t){a.push(i.optionToData(t))}),t(a)}:"data"in s&&(s.initSelection=s.initSelection||function(e,o){var r=p(e.val(),s.separator),l=[];s.query({matcher:function(e,t,a){var i=g.grep(r,function(e){return u(e,s.id(a))}).length;return i&&l.push(a),i},callback:g.isFunction(o)?function(){for(var e=[],t=0;t<r.length;t++)for(var a=r[t],i=0;i<l.length;i++){var n=l[i];if(u(a,s.id(n))){e.push(n),l.splice(i,1);break}}o(e)}:g.noop})}),s},selectChoice:function(e){var t=this.container.find(".select2-search-choice-focus");t.length&&e&&e[0]==t[0]||(t.length&&this.opts.element.trigger("choice-deselected",t),t.removeClass("select2-search-choice-focus"),e&&e.length&&(this.close(),e.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",e)))},destroy:function(){g("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),A.call(this,"searchContainer","selection")},initContainer:function(){var s,e=".select2-choices",t=(this.searchContainer=this.container.find(".select2-search-field"),this.selection=s=this.container.find(e),this);this.selection.on("click",".select2-search-choice:not(.select2-locked)",function(e){t.search[0].focus(),t.selectChoice(g(this))}),this.search.attr("id","s2id_autogen"+y()),this.search.prev().text(g("label[for='"+this.opts.element.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("input paste",this.bind(function(){!this.isInterfaceEnabled()||this.opened()||this.open()})),this.search.attr("tabindex",this.elementTabIndex),this.keydowns=0,this.search.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()){++this.keydowns;var t,a,i,n=s.find(".select2-search-choice-focus"),o=n.prev(".select2-search-choice:not(.select2-locked)"),r=n.next(".select2-search-choice:not(.select2-locked)"),l=(l=this.search,a=t=0,"selectionStart"in(l=g(l)[0])?(t=l.selectionStart,a=l.selectionEnd-t):"selection"in document&&(l.focus(),i=document.selection.createRange(),a=document.selection.createRange().text.length,i.moveStart("character",-l.value.length),t=i.text.length-a),{offset:t,length:a});if(!n.length||e.which!=c.LEFT&&e.which!=c.RIGHT&&e.which!=c.BACKSPACE&&e.which!=c.DELETE&&e.which!=c.ENTER)if((e.which!==c.BACKSPACE||1!=this.keydowns)&&e.which!=c.LEFT||0!=l.offset||l.length){if(this.selectChoice(null),this.opened())switch(e.which){case c.UP:case c.DOWN:return this.moveHighlight(e.which===c.UP?-1:1),void w(e);case c.ENTER:return this.selectHighlighted(),void w(e);case c.TAB:return this.selectHighlighted({noFocus:!0}),void this.close();case c.ESC:return this.cancel(e),void w(e)}if(e.which!==c.TAB&&!c.isControl(e)&&!c.isFunctionKey(e)&&e.which!==c.BACKSPACE&&e.which!==c.ESC){if(e.which===c.ENTER){if(!1===this.opts.openOnEnter)return;if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return}this.open(),e.which!==c.PAGE_UP&&e.which!==c.PAGE_DOWN||w(e),e.which===c.ENTER&&w(e)}}else this.selectChoice(s.find(".select2-search-choice:not(.select2-locked)").last()),w(e);else i=n,e.which==c.LEFT&&o.length?i=o:e.which==c.RIGHT?i=r.length?r:null:e.which===c.BACKSPACE?this.unselect(n.first())&&(this.search.width(10),i=o.length?o:r):e.which==c.DELETE?this.unselect(n.first())&&(this.search.width(10),i=r.length?r:null):e.which==c.ENTER&&(i=null),this.selectChoice(i),w(e),i&&i.length||this.open()}})),this.search.on("keyup",this.bind(function(e){this.keydowns=0,this.resizeSearch()})),this.search.on("blur",this.bind(function(e){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.selectChoice(null),this.opened()||this.clearSearch(),e.stopImmediatePropagation(),this.opts.element.trigger(g.Event("select2-blur"))})),this.container.on("click",e,this.bind(function(e){!this.isInterfaceEnabled()||0<g(e.target).closest(".select2-search-choice").length||(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(g.Event("select2-focus")),this.open(),this.focusSearch(),e.preventDefault())})),this.container.on("focus",e,this.bind(function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger(g.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())})),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){var t;""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),!this.select&&""===this.opts.element.val()||(t=this).opts.initSelection.call(null,this.opts.element,function(e){e!==v&&null!==e&&(t.updateSelection(e),t.close(),t.clearSearch())})},clearSearch:function(){var e=this.getPlaceholder(),t=this.getMaxSearchWidth();e!==v&&0===this.getVal().length&&!1===this.search.hasClass("select2-focused")?(this.search.val(e).addClass("select2-default"),this.search.width(0<t?t:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),""===this.search.val()&&this.nextSearchTerm!=v&&(this.search.val(this.nextSearchTerm),this.search.select()),this.updateResults(!0),this.opts.shouldFocusInput(this)&&this.search.focus(),this.opts.element.trigger(g.Event("select2-open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(e){var t=[],a=[],i=this;g(e).each(function(){d(i.id(this),t)<0&&(t.push(i.id(this)),a.push(this))}),e=a,this.selection.find(".select2-search-choice").remove(),g(e).each(function(){i.addSelectedChoice(this)}),i.postprocessResults()},tokenize:function(){var e=this.search.val();null!=(e=this.opts.tokenizer.call(this,e,this.data(),this.bind(this.onSelect),this.opts))&&e!=v&&(this.search.val(e),0<e.length)&&this.open()},onSelect:function(e,t){this.triggerSelect(e)&&(this.addSelectedChoice(e),this.opts.element.trigger({type:"selected",val:this.id(e),choice:e}),this.nextSearchTerm=this.opts.nextSearchTerm(e,this.search.val()),this.clearSearch(),this.updateResults(),!this.select&&this.opts.closeOnSelect||this.postprocessResults(e,!1,!0===this.opts.closeOnSelect),!this.opts.closeOnSelect&&0<this.countSelectableResults()?(this.search.width(10),this.resizeSearch(),0<this.getMaximumSelectionSize()&&this.val().length>=this.getMaximumSelectionSize()?this.updateResults(!0):this.nextSearchTerm!=v&&(this.search.val(this.nextSearchTerm),this.updateResults(),this.search.select()),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:e}),t&&t.noFocus||this.focusSearch())},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(e){var t=!e.locked,a=g("<li class='select2-search-choice'>    <div></div>    <a href='#' class='select2-search-choice-close' tabindex='-1'></a></li>"),i=g("<li class='select2-search-choice select2-locked'><div></div></li>"),a=t?a:i,i=this.id(e),n=this.getVal(),o=this.opts.formatSelection(e,a.find("div"),this.opts.escapeMarkup);o!=v&&a.find("div").replaceWith("<div>"+o+"</div>"),(o=this.opts.formatSelectionCssClass(e,a.find("div")))!=v&&a.addClass(o),t&&a.find(".select2-search-choice-close").on("mousedown",w).on("click dblclick",this.bind(function(e){this.isInterfaceEnabled()&&(this.unselect(g(e.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),w(e),this.close(),this.focusSearch())})).on("focus",this.bind(function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))})),a.data("select2-data",e),a.insertBefore(this.searchContainer),n.push(i),this.setVal(n)},unselect:function(e){var t,a,i=this.getVal();if(0===(e=e.closest(".select2-search-choice")).length)throw"Invalid argument: "+e+". Must be .select2-search-choice";if(t=e.data("select2-data")){var n=g.Event("select2-removing");if(n.val=this.id(t),n.choice=t,this.opts.element.trigger(n),n.isDefaultPrevented())return!1;for(;0<=(a=d(this.id(t),i));)i.splice(a,1),this.setVal(i),this.select&&this.postprocessResults();return e.remove(),this.opts.element.trigger({type:"select2-removed",val:this.id(t),choice:t}),this.triggerChange({removed:t}),!0}},postprocessResults:function(e,t,a){var i=this.getVal(),n=this.results.find(".select2-result"),o=this.results.find(".select2-result-with-children"),r=this;n.each2(function(e,t){0<=d(r.id(t.data("select2-data")),i)&&(t.addClass("select2-selected"),t.find(".select2-result-selectable").addClass("select2-selected"))}),o.each2(function(e,t){t.is(".select2-result-selectable")||0!==t.find(".select2-result-selectable:not(.select2-selected)").length||t.addClass("select2-selected")}),-1==this.highlight()&&!1!==a&&r.highlight(0),!this.opts.createSearchChoice&&0<!n.filter(".select2-result:not(.select2-selected)").length&&(e&&(e.more||0!==this.results.find(".select2-no-results").length)||T(r.opts.formatNoMatches,"formatNoMatches")&&this.results.append("<li class='select2-no-results'>"+N(r.opts.formatNoMatches,r.search.val())+"</li>"))},getMaxSearchWidth:function(){return this.selection.width()-m(this.search)},resizeSearch:function(){var e,t,a,i=m(this.search);t=this.search,n||(a=t[0].currentStyle||window.getComputedStyle(t[0],null),(n=g(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:a.fontSize,fontFamily:a.fontFamily,fontStyle:a.fontStyle,fontWeight:a.fontWeight,letterSpacing:a.letterSpacing,textTransform:a.textTransform,whiteSpace:"nowrap"})).attr("class","select2-sizer"),g("body").append(n)),n.text(t.val()),a=n.width()+10,t=this.search.offset().left,(t=(t=(t=(e=this.selection.width())-(t-this.selection.offset().left)-i)<a?e-i:t)<40?e-i:t)<=0&&(t=a),this.search.width(Math.floor(t))},getVal:function(){var e;return this.select?null===(e=this.select.val())?[]:e:p(e=this.opts.element.val(),this.opts.separator)},setVal:function(e){var t;this.select?this.select.val(e):(t=[],g(e).each(function(){d(this,t)<0&&t.push(this)}),this.opts.element.val(0===t.length?"":t.join(this.opts.separator)))},buildChangeDetails:function(e,t){for(var t=t.slice(0),e=e.slice(0),a=0;a<t.length;a++)for(var i=0;i<e.length;i++)u(this.opts.id(t[a]),this.opts.id(e[i]))&&(t.splice(a,1),0<a&&a--,e.splice(i,1),i--);return{added:t,removed:e}},val:function(e,a){var i,n=this;if(0===arguments.length)return this.getVal();if((i=this.data()).length||(i=[]),e||0===e){if(this.setVal(e),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),a&&this.triggerChange(this.buildChangeDetails(i,this.data()));else{if(this.opts.initSelection===v)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(e){var t=g.map(e,n.id);n.setVal(t),n.updateSelection(e),n.clearSearch(),a&&n.triggerChange(n.buildChangeDetails(i,n.data()))})}this.clearSearch()}else this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),a&&this.triggerChange({added:this.data(),removed:i})},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var e=[],t=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each(function(){e.push(t.opts.id(g(this).data("select2-data")))}),this.setVal(e),this.triggerChange()},data:function(e,t){var a,i,n=this;if(0===arguments.length)return this.selection.children(".select2-search-choice").map(function(){return g(this).data("select2-data")}).get();i=this.data(),a=g.map(e=e||[],function(e){return n.opts.id(e)}),this.setVal(a),this.updateSelection(e),this.clearSearch(),t&&this.triggerChange(this.buildChangeDetails(i,this.data()))}}),g.fn.select2=function(){var e,t,a,i,n=Array.prototype.slice.call(arguments,0),o=["val","destroy","opened","open","close","focus","isFocused","container","dropdown","onSortStart","onSortEnd","enable","disable","readonly","positionDropdown","data","search"],r=["opened","isFocused","container","dropdown"],l=["val","data"],s={search:"externalSearch"};return this.each(function(){if(0===n.length||"object"==typeof n[0])(t=0===n.length?{}:g.extend({},n[0])).element=g(this),"select"===t.element.get(0).tagName.toLowerCase()?i=t.element.prop("multiple"):(i=t.multiple||!1,"tags"in t&&(t.multiple=i=!0)),(e=new(i?window.Select2.class.multi:window.Select2.class.single)).init(t);else{if("string"!=typeof n[0])throw"Invalid arguments to select2 plugin: "+n;if(d(n[0],o)<0)throw"Unknown method: "+n[0];if(a=v,(e=g(this).data("select2"))!==v)return t=n[0],a="container"===t?e.container:"dropdown"===t?e.dropdown:e[t=s[t]?s[t]:t].apply(e,n.slice(1)),!(0<=d(n[0],r)||0<=d(n[0],l)&&1==n.length)&&void 0}}),a===v?this:a},g.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(e,t,a,i){var n=[];return k(e.text,a.term,n,i),n.join("")},formatSelection:function(e,t,a){return e?a(e.text):v},sortResults:function(e,t,a){return e},formatResultCssClass:function(e){return e.css},formatSelectionCssClass:function(e,t){return v},formatMatches:function(e){return e+" results are available, use up and down arrow keys to navigate."},formatNoMatches:function(){return"No matches found"},formatInputTooShort:function(e,t){t-=e.length;return"Please enter "+t+" or more character"+(1==t?"":"s")},formatInputTooLong:function(e,t){e=e.length-t;return"Please delete "+e+" character"+(1==e?"":"s")},formatSelectionTooBig:function(e){return"You can only select "+e+" item"+(1==e?"":"s")},formatLoadMore:function(e){return"Loading more results…"},formatSearching:function(){return"Searching…"},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(e){return e==v?null:e.id},matcher:function(e,t){return 0<=s(""+t).toUpperCase().indexOf(s(""+e).toUpperCase())},separator:",",tokenSeparators:[],tokenizer:function(e,t,a,i){var n,o,r,l,s,c=e,d=!1;if(!i.createSearchChoice||!i.tokenSeparators||i.tokenSeparators.length<1)return v;for(;;){for(o=-1,r=0,l=i.tokenSeparators.length;r<l&&(s=i.tokenSeparators[r],!(0<=(o=e.indexOf(s))));r++);if(o<0)break;if(n=e.substring(0,o),e=e.substring(o+s.length),0<n.length&&(n=i.createSearchChoice.call(this,n,t))!==v&&null!==n&&i.id(n)!==v&&null!==i.id(n)){for(d=!1,r=0,l=t.length;r<l;r++)if(u(i.id(n),i.id(t[r]))){d=!0;break}d||a(n)}}return c!==e?e:void 0},escapeMarkup:S,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(e){return e},adaptDropdownCssClass:function(e){return null},nextSearchTerm:function(e,t){return v},searchInputPlaceholder:"",createSearchChoicePosition:"top",shouldFocusInput:function(e){return!(("ontouchstart"in window||0<navigator.msMaxTouchPoints)&&e.opts.minimumResultsForSearch<0)}},g.fn.select2.ajaxDefaults={transport:g.ajax,params:{type:"GET",cache:!1,dataType:"json"}},window.Select2={query:{ajax:x,local:D,tags:P},util:{debounce:f,markMatch:k,escapeMarkup:S,stripDiacritics:s},class:{abstract:o,single:e,multi:t}})})(jQuery),define("overlay/component.overlay",["jquery","isAuthor","marketConfigGlobal","gallery-trigger/component.galleryTrigger","gallery-category/gallery-category","scroll/global.ux.scroll","brightcove/component.brightcove","brightcove/component.newBrightcove","form/component.form.checkboxcarousel","form/component.form.dropdown","form/component.form.recaptcha","cookie","credit-options-addon/component.creditOptionsAddon","billboard-common/component.billboardCommon","rich-text/hotDealsPrice","utils/getParamValue","climes-config/component.climesConfig","simpleEmiCalculator/component.simpleEmiCalculator","dealer-locator-review/component.dealerLocatorReview","custom-redirect-hotlead/customRedirect","simpleEmiCalculator/component.monthlyPaymentCalculator","analytics/analyticsEventLayer"],function(s,t,c,e,a,d,u,p,i,n,o,E,r,l,m,h,f,g,v,y,b,w){function C(e){var t=document.createElement("a");return t.href=e,e=0!==(e=t.pathname).indexOf("/")?"/"+e:e}var k,S={},x=window.location.pathname,D="overlay",P="link-overlay-dynamic",T=s("html"),N=s("body"),A=s(window),I=s("head").find('meta[name="viewport"]'),$=I.attr("content"),L=_.template('<div class="overlay-container">     <div class="overlay-content" tabindex="0">        <span class="overlay-close" tabindex="0"><i class="icon-plus icon-x"></i></span>        <div class="overlay-loading"></div>         <div class="overlay-content-inner is-active"></div>    </div></div>');function M(e){O.prototype.hideInitPreloader(),O.prototype.hideInitFdsPreloader(),-1<x.indexOf("recall")&&document.querySelectorAll(".overlay-container").forEach(function(e){-1===e.className.indexOf("has-form")&&(e.className+=" has-form",document.querySelector(".overlay-close").setAttribute("style","top: 20px;"))}),s(".overlay-container .overlay-msg-content-inner").length&&s(".overlay-container .overlay-msg-content-inner").remove(),s(".overlay-container .overlay-content-inner").addClass("is-active"),s(".simpleEmiCalculator").length&&(s(".overlay-content").addClass("simpleEmiCalculator-Overlay"),g.init()),s(".monthly-payment-calculator").length&&(s(".overlay-content").addClass("monthly-payment-calculator-Overlay"),b.init()),s(".fds-refactored-UI").length&&s(".overlay-container").addClass("fds-overlay-container"),-1<window.location.href.indexOf("request-a-call")&&"tha"===c.getCurrentiso3MarketCode()&&(s(".overlay-container").addClass("sticky-overlay-container"),s(".overlay-container").find(".overlay-content").addClass("custom-sticky-container"),s(".overlay-container").find(".overlay-close i").removeClass("icon-plus icon-x").addClass("icon-close2"));var t,a=s.Event("onoverlayload"),i=(a.state=e,s(window).trigger(a),s(".vehicle-menu-backdrop").length&&s(".vehicle-menu-backdrop").trigger("click"),s(".overlay-container .box-content").find("img"));i.length&&((t=i.parent()).css("background","url(/etc/designs/guxfoap/clientlibs/guxfoap/img/loader-blue.gif) center no-repeat"),t.css("min-height","300px"),t.css("display","block"),i.hide(),i.load(function(){i.show(),t.css({"min-height":"inherit",background:""})})),"ARG"===s("#countryCodeISO").attr("value")&&s(".area-field textarea").keypress(function(e){13==e.keyCode&&e.preventDefault()})}function O(e){this.overlay=e,this.$overlayBox=e.find(".content").first(),this.$item=e.find("a.link-overlay:not(.popup-link-initialized), .link-overlay a:not(.popup-link-initialized)"),this.$currentItem=null,this.isAuthorMode=t.getAuthorStatus(),this.isSearchOverlay=!1,this.isVideoOverlay=!1,this.videoElementId=null,this.isImageOverlay=!1,this.isDynamicOverlay=!1,this.isOverlayVisible=!1,this.isFullScreenOpen=!1,this.isPanoOverlay=!1,this.isFdsOverlay=!1,this.isFdsDownOverlay=!1,this.isFdsStickyOverlay=!1,this.popupURL="",this.isFdsPopupOverlay=!1,this.isPostalCodeOverlay=!1,this.isFdsZoomInOverlay=!1,this.isFdsFullWidth=!1,this.scrollTopPosition=0,this.isTestDriveForm=!1,this.addBaseUrl(),this.attachLinkEvents(),this.getHashUrl();e=window.location.hash.replace(/#(?:[^\/]+\/)*([^\.]+)(?:\.html)?(?:\?.+)/gm,"$1");e&&"searchoverlay"===e.toLocaleLowerCase()&&(this.isSearchOverlay=!0),this.dynamicOverlayAttributes={imageUrl:!1,shortDescription:!1,longDescription:!1}}return O.prototype.addBaseUrl=function(e){a=window.location.href,t=!1;var t,i=t=-1<a.indexOf("?wcmmode=disabled")||-1<a.indexOf("&wcmmode=disabled")||t,a=(this.$item=s(e=e||"body").find("a.link-overlay:not(.popup-link-initialized), .link-overlay a:not(.popup-link-initialized)"),this.$item.filter(function(e,t){t=s(t).data("deep-linking");return void 0===t||"1"==t}).each(function(e,t){var a=C(t.href);i&&-1==a.indexOf("?wcmmode=disabled")&&-1==a.indexOf("&wcmmode=disabled")&&(-1!=a.indexOf("?")?a+="&wcmmode=disabled":a+="?wcmmode=disabled"),t.search&&(-1!=a.indexOf("?")?a+=t.search.replace("?","&"):a+=t.search),s(t).hasClass("base-url")||s(t).addClass("base-url").attr("href",x+"#overlay"+a)}),s.Event("baseUrlsload"));s(window).trigger(a)},O.prototype.setFavicon=function(){var e=s('link[type="image/x-icon"]').remove().attr("href");s('<link href="'+e+'" rel="shortcut icon" type="image/x-icon" />').appendTo("head")},O.prototype.getHashUrl=function(){if(this.hashRoute=encodeURI(window.location.hash),0<=this.hashRoute.search("#/"+D)&&(this.hashRoute=this.hashRoute.replace("#/"+D,"#"+D)),-1!==this.hashRoute.indexOf("overlay_id")){for(var e=this.hashRoute,t=(e=-1!=e.indexOf(".html?")?e.slice(e.indexOf(".html?"),e.length):e).split("&"),a=0,i=0;i<t.length;i++){var n=t[i].replace("#","").split("=");"overlay_id"===n[0]&&(a=n[1])}0!=a&&setTimeout(function(){s("a[data-overlay_id="+a+"]").click()},500)}else-1!==this.hashRoute.indexOf(D)&&"#overlay"!==this.hashRoute&&(-1!==this.hashRoute.indexOf(".html")?this.hashRoute=this.hashRoute.replace("#"+D,""):this.hashRoute=this.hashRoute.replace("#"+D,"")+".html",this.getOverlayContent(this.hashRoute,!0))},O.prototype.clearHashUrl=function(){history.pushState("",document.title,window.location.pathname+window.location.search),s(".dealerLocator.section").length||(this.hashRoute="")},O.prototype.attachLinkEvents=function(){var e,n=this;s(document).off("click"),s(document).on("mouseup",".link-overlay",function(e){var t;"true"==s(this).attr("data-autopopulate")&&(sessionStorage.setItem("nameplate",s(this).data("nameplate")),sessionStorage.setItem("modelseries",s(this).data("modelname"))),0<s(this).siblings(".vehicleAttr").length&&(t=s(this).siblings(".vehicleAttr").find('span[id*="startingPrice"]').text(),sessionStorage.setItem("EmiDisplayPrice",t)),0<s(this).parents(".buildPrice.section").length&&(t=s(this).parents(".buildPrice.section").find(".panel-price .price span").first().text(),sessionStorage.setItem("EmiDisplayPrice",t)),0<s(this).parents(".common-vehicle-attributes.section").length&&(t=s(this).parents(".common-vehicle-attributes.section").find(".price .values:visible span span span span").text(),sessionStorage.setItem("EmiDisplayPrice",t))}),s(document).on("click",".vjs-play-control",function(e){var t=s("video").attr("id");null!==t&&"undefined"!==t&&(document.getElementById(t).muted=!1)}),s(document).on("click",".overlay-close",function(e){var t=s("video").attr("id");null!==t&&"undefined"!==t&&(document.getElementById(t).muted=!0)}),s(document).on("click",".link-overlay",function(e){e.preventDefault(),n.scrollTopPosition=s(window).scrollTop();var t=s(e.currentTarget),a=t.data("deep-linking"),i=t.data("overlay-url"),i=void 0===i&&t.find("a.popup-link-initialized").length?void 0!==i?C(i):t.find("a.popup-link-initialized").attr("href").substring(1).split(/#overlay/g)[1]:void 0!==i?C(i):t.attr("href").substring(1).split(/#overlay/g)[1],e=(e.preventDefault(),e.stopPropagation(),this.$currentItem=t,s(e.currentTarget).closest(".link-overlay"));this.isVideoOverlay=e.hasClass("link-overlay-video")||e.hasClass("video-link-overlay"),this.isSearchOverlay=t.closest(".link-overlay").hasClass("link-overlay-search"),this.isImageOverlay=t.closest(".link-overlay").hasClass("link-overlay-image"),this.isDynamicOverlay=t.closest(".link-overlay").hasClass(P),this.isPanoOverlay=e.hasClass("js-panorama-overlay"),this.isTestDriveForm=e.hasClass("testDriveCTA"),this.isFdsOverlay=e.hasClass("fds-link-overlay"),this.isFdsDownOverlay=e.hasClass("fds-down-link-overlay"),this.isFdsStickyOverlay=e.hasClass("fds-sticky-overlay"),this.popupURL=e.attr("href"),this.isFdsPopupOverlay=e.hasClass("fds-popup-link-overlay"),this.isPostalCodeOverlay=e.hasClass("postalcode-overlay"),this.isFdsZoomInOverlay=e.hasClass("fds-zoomin-overlay"),this.isFdsFullWidth=e.hasClass("fds-full-width"),this.isAccessoriesMiniDealerOverlay=e.hasClass("accessories-minidealer-overlay"),this.isFdsZoomInOverlay||this.isFdsOverlay||this.isFdsStickyOverlay||this.isFdsDownOverlay?this.showInitFdsPreloader():this.showInitPreloader(),this.isDynamicOverlay&&(this.dynamicOverlayAttributes={imageUrl:t.data("image-url"),shortDescription:t.data("short-description"),longDescription:t.data("long-description")}),this.isAuthorMode||t.hasClass("no-overlay")?window.open(i):(void 0!==(e=t.data("overlay_id"))&&(i=-1!=i.indexOf("?")?i+"&overlay_id="+e:i+"?overlay_id="+e),t.hasClass("js-pushparam")?this.getOverlayContent(i,void 0===a||"1"==a,!0):this.getOverlayContent(i,void 0===a||"1"==a)),s(".dealerLocator.section").length||(void 0!==t.attr("href")?window.location.hash=t.attr("href").split("#")[1]:void 0!==t.find("> a").attr("href")&&(window.location.hash=t.find("> a").attr("href").split("#")[1]))}.bind(this)).on("keydown",function(e){var t=s(e.currentTarget),a=e.keyCode||e.which,i=e.target.id||"";13===a&&"search-bar-desktop"!=i&&(e.preventDefault(),t.trigger("click"),e.target.parentElement.classList.contains("accordion-title")||"A"!==e.target.tagName||(window.prevEle=document.activeElement))}.bind(this)),this.$item.addClass("popup-link-initialized"),s(".accessories-row, .accessories .accessories-dropdown").length&&window.location.href.includes("#/overlay")&&history.pushState&&(e=window.location.href.replace(window.location.hash,""),window.history.pushState({path:e},"",e))},O.prototype.enableZoom=function(){_.defer(function(){I.attr("content",$)}.bind(this))},O.prototype.disableZoom=function(){I.attr("content","width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no")},O.prototype.confirmCloseRegister=function(){var e=s(".register-wrap .register-steps .icon-checkmark"),a=e.length||0;s(".register-wrap .cancel-register-wrap .count").length?s(".register-wrap .cancel-register-wrap").removeClass("hidden-msg").find(".count").text(3-a):s(".register-wrap .cancel-register-wrap").removeClass("hidden-msg").find("p").html(function(e,t){return t.replace("{step}",'<span class="count">'+(3-a)+"</span>")})},O.prototype.attachOverlayEvents=function(){this.$overlayBox.on("click touchstart",".overlay-container",function(e){}).on("click touchstart",".postaloverlay-close",function(e){this.hideOverlay()}.bind(this)).on("click touchstart",".overlay-close, .close-item, .close-btn-overlay",function(e){if(this.isOverlayVisible){if(s(".overlay-container .register-wrap").length&&!s(".overlay-container.ready-to-close").length)return s(".overlay-container .overlay-close").hide(),this.confirmCloseRegister(),!1;var t,a=s(".overlay-container:not(.not-overlay)").find(".form"),i=s(".overlay-container:not(.not-overlay)").find(".sameHeightSplitter"),i=("none"==a.css("display")&&(i.remove(),a.show()),e.preventDefault(),e.stopPropagation(),this.isFdsZoomInOverlay?(s(".overlay-content").removeClass("zoomIn").addClass("fadeOut"),t=this,setTimeout(function(){t.hideOverlay()},1e3)):this.hideOverlay(),s(".overlay-content").hasClass("overlay-postal-code"));i&&(localStorage.getItem("overlayOpenFlg")&&localStorage.removeItem("overlayOpenFlg"),s(".overlay-content").removeClass("overlay-postal-code")),s(".overlay-container").hasClass("new-design")&&s(".overlay-container").removeClass("new-design")}}.bind(this)).on("keydown",".overlay-close",function(e){if(s(".overlay-container .register-wrap").length&&!s(".overlay-container.ready-to-close").length)return s(".overlay-container .overlay-close").hide(),this.confirmCloseRegister(),!1;e=e.keyCode||e.which;!this.isOverlayVisible||27!==e&&13!==e||this.hideOverlay()}.bind(this)).on("click touchstart",".cancel-btn",function(e){e.keyCode||e.which;e=s(".overlay-container:not(.not-overlay)").find(".sameHeightSplitter");this.isOverlayVisible&&(e.remove(),this.hideOverlay())}.bind(this)),A.on("orientationchange",function(e){var t=90==Math.abs(window.orientation);window.innerHeight;t?this.disableZoom():this.enableZoom()}.bind(this))},O.prototype.getOverlayContent=function(i,n,o){s.ajax({type:"GET",url:i,dataType:"html",success:function(e){var t,a,e=s(e).find(".content").html();void 0!==o&&o&&(t="",-1<(a=window.location.href).indexOf("#")?(t=a.split("#")[1],!1!==h.byNameInHash("Model")&&(t=h.removeParam("Model",t)),!1!==h.byNameInHash("Series")&&(t=h.removeParam("Series",t)),!1!==h.byNameInHash("engine")&&(t=h.removeParam("engine",t)),!1!==h.byNameInHash("exteriorColor")&&(t=h.removeParam("exteriorColor",t)),!1!==h.byNameInHash("interiorColor")&&(t=h.removeParam("interiorColor",t)),-1<(t=!1!==h.byNameInHash("options")?h.removeParam("options",t):t).indexOf("?")?window.location.hash=t+"&"+k:window.location.hash=t+"?"+k):window.location.hash="?"+k),this.initOverlayContainer(),this.showLoadingContainer(),s(".dealerLocator.section").length?this.overlayBuilder(e,i):this.overlayBuilder(e,i,n),this.$overlayClose.blur(),this.setFavicon(),this.initFormsInside(i),this.initPaymentCalculator(),this.isTestDriveForm&&w.getFormWizardEvents().init()}.bind(this),error:function(e){this.clearHashUrl()}.bind(this)})},O.prototype.initOverlayContainer=function(){var a,e;this.$overlayContainer?this.$overlayContentInner.empty():((a=this).$overlayBox.append(L),this.$overlayContainer=s(".overlay-container:not(.not-overlay)"),this.$overlayContent=s(".overlay-content:not(.not-overlay)"),this.$overlayContentInner=s(".content > .overlay-container .overlay-content-inner:not(.not-overlay)"),this.$overlayLoading=s(".overlay-loading:not(.not-overlay)"),this.$overlayClose=s(".overlay-close:not(.not-overlay)"),this.$overlayContainer.on("click",function(e){var t,e=e.target,e=0===s(this).find(e).length;return!(s(".overlay-container.postalcode-overlay-container").length&&e||s(".overlay-container.expert-overlay-container").length&&e||document.querySelector(".overlay-container .email-confirmation-wrap")&&!document.querySelector(".overlay-container .email-confirmation-wrap.hidden-msg"))&&void(a.isOverlayVisible&&e&&(e=s(".overlay-container:not(.not-overlay)").find(".form"),t=s(".overlay-container:not(.not-overlay)").find(".sameHeightSplitter"),"none"==e.css("display")&&(t.remove(),e.show()),s(".overlay-container").hasClass("new-design")||s(".overlay-close").click()))}),this.attachOverlayEvents()),this.isSearchOverlay&&(0<(e=s(".configuration[data-market-code]")).length&&"ZA"==e.attr("data-market-code")&&this.$overlayContainer.addClass("overlay-search-sa"),this.$overlayContainer.addClass("overlay-search")),this.isImageOverlay&&this.$overlayContainer.addClass("overlay-image"),this.isDynamicOverlay&&this.$overlayContainer.addClass("overlay-dynamic overlay-image"),this.isPanoOverlay&&this.$overlayContainer.addClass("js-panorama-overlay-content"),!s(".fds-bg-accessories")||(s(".overlay-content").addClass("accesoriesOverlay"),setTimeout(()=>{s(".accesoriesOverlay .common-overlay").addClass("fds")},1e3))},O.prototype.initFormsInside=function(e){var t,a;s(".overlay-content-inner .form").length&&!this.isAuthorMode&&(s(".overlay-container").addClass("has-form"),s(".overlay-content-inner .form .richtext").first().addClass("first"),s(".overlay-content-inner .form .richtext").first().find(".desktop p").length||s(".overlay-container .overlay-close").addClass("desktop-align-title"),s(".overlay-content-inner .form .richtext").first().find(".mobile p").length||s(".overlay-container .overlay-close").addClass("mobile-align-title"),s(".overlay-content-inner .form select").length&&n.init(),s(".overlay-content-inner .form-checkbox-carousel").length&&i.init(e),s(".overlay-content-inner .creditOptionsAddon").length&&r.init(),s(".form-recaptcha").length&&o.init(),s(".overlay-content-inner .form .common-billboard")&&(l.init(s(this)),e=s("body"),a=new URL(window.location.href),a=(a=new RegExp("[?&]Model=([^&#]*)","i").exec(a))?a[1]:null,s("body #modelCodeForHotDeals").val()?s("body #modelCodeForHotDeals").val(a):((t=document.createElement("INPUT")).setAttribute("type","hidden"),t.setAttribute("id","modelCodeForHotDeals"),t.setAttribute("name","modelCodeForHotDeals"),t.setAttribute("value",a),e.append(t)),m.init()),s(".overlay-content-inner .dealer-locator-review"))&&v.init(),s("#termsAndConditions").length&&f.init(),s(".sendScenarioHotLead").length&&(s("#downPayment").length&&""===s("#downPayment").val()&&(s("#typeOfTransaction-financed").attr("disabled","true"),(a=s("#typeOfTransaction-financed").siblings()).css("color","#fff"),a.css("background","rgb(136, 136, 136)")),y.init(this.$currentItem.context.id))},O.prototype.hideOverlayOnEscapeKeydown=function(e){e=e.keyCode||e.which;if(!this.isFullScreenOpen||27!==e)return 13===e&&s(".overlay-container .register-wrap").length&&!s(".register-wrap .cancel-register-wrap").hasClass("hidden-msg")?(s(".register-wrap .cancel-register-wrap .cta-close-register").trigger("click"),!1):27===e?s(".overlay-container .register-wrap").length?(s(".register-wrap .cancel-register-wrap").hasClass("hidden-msg")?(s(".overlay-container .overlay-close").hide(),this.confirmCloseRegister()):s(".register-wrap .cancel-register-wrap .cta-cancel-close").trigger("click"),!1):s(".overlay-container .email-confirmation-wrap").length&&!s(".email-confirmation-wrap").hasClass("hidden-msg")?(s(".email-confirmation-wrap .cta-close-email-phone-overlay").trigger("click"),!1):void this.hideOverlay():void 0;N.trigger("hideFullscreen"),N.one("keydown",function(e){this.hideOverlayOnEscapeKeydown(e)}.bind(this)),window.prevEle&&window.prevEle.focus()},O.prototype.showLoadingContainer=function(){this.$overlayClose.hide(),this.$overlayContainer.removeClass("overlay-hide"),this.$overlayLoading.show()},O.prototype.overlayBuilder=function(e,t,a){for(var t=D+t.replace(/\.html$/,""),e=(this.showOverlay(e),t),i=(e=-1!=e.indexOf(".html?")?e.slice(e.indexOf(".html?")+".html?".length,e.length):e).split("&"),n=0,o=0;o<i.length;o++){var r=i[o].replace("#","").split("=");"overlay_id"===r[0]&&(n=r[1])}void 0!==a&&0!=n&&(window.location.hash="overlay_id="+n),M("loaded"),t=(0<s(".overlay-container:visible").find(".overlay-msg-content-inner.is-active").length?s(".overlay-content .overlay-msg-content-inner.is-active"):s(".overlay-content .overlay-content-inner.is-active")).find(".box-data"),s(".richtext a.cta-button.download-brochure").each(function(){var e=s(this);null!=e.attr("_link_action")&&1<e.attr("_link_action").length&&"download-brochure"===e.attr("_link_action")&&e.attr("download","")}),s(".richtext a.download-brochure").each(function(){var e=s(this);null!=e.attr("_link_action")&&1<e.attr("_link_action").length&&"download-brochure"===e.attr("_link_action")&&e.attr("download","")}),0<t.length&&(e=t.data("bgcolor"),t.closest(".common-box.section").addClass(e)),setTimeout(function(){var e=s(window).height(),t=(screen.width,s(".overlay-content").height()),a=s(".overlay-content");e<=t?a.find(".search").length<=0&&a.css({top:"0",transform:"none","-o-transform":"none","-ms-transform":"none","-moz-transform":"none","-webkit-transform":"none"}):a.find(".search").length<=0&&a.css({top:"0",transform:"translateY(0)","-o-transform":"translateY(0)","-ms-transform":"translateY(0)","-moz-transform":"translateY(0)","-webkit-transform":"translateY(0)"}),s(window).trigger("overlayloaded")},1e3),setTimeout(function(){for(var e=window.location.href.split("?"),t=0;t<e.length;t++){var a=e[t].split("="),i=decodeURIComponent(a[0]),a=decodeURIComponent(a[1]);"brochureLinkPath"==i&&(a=a.replace("&wcmmode",""),null!=(i=document.getElementById("idBrochureLinkPath")))&&(i.href=a)}},3e3)},O.prototype.getDocumentHeight=function(e){return(e=e||document).height()},O.prototype.setIframeHeight=function(e){var e=document.getElementById(e)||document.getElementsByTagName("iframe")[0],t=e.contentWindow.document,t=s(t).find(".brightcove-player");e.style.height=this.getDocumentHeight(t)+"px"},O.prototype.showOverlay=function(e,t){var a,i,n,o=s.Event("overlayOpen",{element:this.$overlayContentInner}),r=s(".fds-bg-accessories"),l=(this.isFdsOverlay&&!r&&(this.$overlayContainer.addClass("fds-overlay-container"),this.$overlayContainer.find(".overlay-close i").removeClass("icon-plus icon-x").addClass("icon-close2"),this.isPostalCodeOverlay)&&(this.$overlayContainer.addClass("postalcode-overlay-container"),this.$overlayContainer.find(".overlay-close").addClass("postaloverlay-close").removeClass("overlay-close")),this.isFdsDownOverlay&&this.$overlayContainer.find(".overlay-close i").removeClass("icon-plus icon-x").addClass("icon-close2"),this.isFdsStickyOverlay&&-1<this.popupURL.indexOf("request-a-call")&&"tha"===c.getCurrentiso3MarketCode()&&(this.$overlayContainer.addClass("sticky-overlay-container"),this.$overlayContainer.find(".overlay-content").addClass("custom-sticky-container"),this.$overlayContainer.find(".overlay-close i").removeClass("icon-plus icon-x").addClass("icon-close2")),this.isFdsPopupOverlay&&(this.$overlayContainer.addClass("expert-overlay-container"),this.$overlayContainer.find(".overlay-content").addClass("custom-popup-container"),this.$overlayContainer.find(".overlay-close i").removeClass("icon-plus icon-x").addClass("icon-close2")),this.isFdsZoomInOverlay&&(this.$overlayContainer.addClass("fds-zoomin-container"),this.$overlayContainer.find(".fadeOut")&&this.$overlayContainer.find(".fadeOut").removeClass("fadeOut"),this.isFdsFullWidth?s(".overlay-content").addClass("zoomIn animated fds-full-width"):s(".overlay-content").addClass("zoomIn animated"),this.$overlayContainer.find(".overlay-close i").removeClass("icon-plus icon-x").addClass("icon-close2")),this.$overlayLoading.hide(),N.addClass("is-overlay-open"),T.addClass("is-overlay-open"),d.preventScrollBody(!0),this.isSearchOverlay||this.isImageOverlay||this.isDynamicOverlay?this.$overlayContainer.delay(200).queue(function(){this.$overlayContainer.addClass("visible").clearQueue(),s(window).trigger(o),this.isSearchOverlay&&this.$overlayBox.find("#header-search-form .typeahead").focus()}.bind(this)):this.$overlayContainer.addClass("visible"),this.isAccessoriesMiniDealerOverlay&&this.$overlayContainer.addClass("new-design"),"en_ZA"===s("[data-locale]").data("locale")&&setTimeout(function(){0!=s(".overlay-container").find(".search-form-sa").length&&s(".overlay-container").find("#header-search-form .typeahead").focus()},200),this.isDynamicOverlay&&(r=(e=s(e)).find(".image"),i=(a=e.find(".accordion")).find(".accordion-title"),n=a.find(".accordion-body"),r.find("source").attr("srcset",this.dynamicOverlayAttributes.imageUrl),this.dynamicOverlayAttributes.longDescription?(i.find("h3").text(this.dynamicOverlayAttributes.shortDescription),n.find(".richtext p").text(this.dynamicOverlayAttributes.longDescription)):(a.attr("data-disable-items-activation","1"),i.empty().append(s("<h3>").text(this.dynamicOverlayAttributes.shortDescription)))),this.$overlayClose.show().focus(),this.$overlayContainer.animate({scrollTop:"0px"},1),this.$overlayContainer.find(".overlay-msg-content-inner").length&&this.$overlayContainer.find(".overlay-msg-content-inner").remove(),this.$overlayContentInner.find("*").remove(),this.$overlayContentInner.addClass("is-active").append(e),this.addBaseUrl(".overlay-container"),this.isVideoOverlay=0<this.$overlayContentInner.find(".BrightcoveExperience").length||0<this.$overlayContentInner.find(".js-brightcove-player").length,0);this.isVideoOverlay&&(this.$overlayContainer.addClass("overlay-video"),this.$overlayContentInner.find(".brightcove").each(function(e,t){0<s(t).find(".js-brightcove-player").length&&0==l?"aus"!==c.getCurrentiso3MarketCode()&&p.init(s(t),"autoplay"):u.init(s(t)),l++})),this.$overlayContent.focus(),this.isOverlayVisible=!0,N.on("keydown.overlay",this.hideOverlayOnEscapeKeydown.bind(this)),s(".common-overlay.no-caption").parents("body #global-ux").addClass("no-caption-overlay")},O.prototype.hideOverlay=function(){s(".dealerLocator.section").length||(window.location.hash=""),N.off("keydown.overlay"),N.removeClass("no-scroll is-overlay-open"),T.removeClass("no-scroll is-overlay-open"),d.allowScrollBody(this.scrollTopPosition,!0),this.isVideoOverlay&&(Array.from(document.getElementsByTagName("video")).forEach(e=>{e=videojs(e.id);e.pause(),e.dispose()}),this.$overlayContainer.find(".brightcove").html("")),this.$overlayContainer.removeClass("visible").delay(200).queue(function(){s(this).removeClass("overlay-search overlay-image overlay-dynamic ready-to-close gallery-trigger-carousel has-form has-paymentCalculator").addClass("overlay-hide"),s(this).find(".overlay-content-inner").html(""),s(this).find(".carousel-arrows").remove(),s(this).clearQueue()}),this.$currentItem&&(this.$currentItem.focus(),this.$currentItem=null),this.isOverlayVisible=!1;var e=s.Event("onoverlayhide");s(window).trigger(e),s(".common-overlay.no-caption").parents("body #global-ux").removeClass("no-caption-overlay"),window.prevEle&&window.prevEle.focus()},O.prototype.showInitPreloader=function(){T.addClass("is-overlay-open"),N.addClass("is-overlay-open"),this.$overlayBox.append('<div class="overlay-container visible initPreloader"><img src="/etc/designs/guxfoap/clientlibs/guxfoap/img/load.gif" alt="preloader" height="61" width="61" style="width: auto; position: fixed; top: 50%; left: 50%; margin-top: -15px; margin-left: -15px;"></div>')},O.prototype.hideInitPreloader=function(){s(".initPreloader").remove()},O.prototype.showInitFdsPreloader=function(){T.addClass("is-overlay-open"),N.addClass("is-overlay-open"),this.$overlayBox.append('<div class="overlay-container visible initFdsPreloader"><div class="fdsLoader"></div></div>')},O.prototype.hideInitFdsPreloader=function(){s(".initFdsPreloader").remove()},O.prototype.initPaymentCalculator=function(){s(".overlay-content-inner .paymentCalculator").length&&!this.isAuthorMode&&s(".overlay-container").addClass("has-paymentCalculator")},s(".image.section, .mediaCarouselItem.section, .common-brandGallery .item .image, .common-mediaCarousel .media-carousel-video").each(function(){var e,t=s(this).find(".link-overlay"),a=t.find("a[data-overlay-type]"),i=t.find('a[data-overlay-type="video link-overlay link-overlay-video"]'),t=t.find('a[data-overlay-type="photo link-overlay link-overlay-image"]'),n=i.length,o=t.length,r=a.data("overlay-unique");a&&(o&&(e=t.data("overlay-unique"),"none"!==r)&&t.attr("data-overlay_id",e),n)&&(e=i.data("overlay-unique"),"none"!==r)&&i.attr("data-overlay_id",e)}),S.overlays=[],S.init=function(){var e=new O(N);S.overlays.push(e)},S.storeParam=function(e){k=e},S}),define("overlay/component.overlaySearch",["jquery","mediaQuery"],function(e,i){var t={init:function(){function a(e,t){var a="",a="desktop"==t||"xlarge"==t||"tablet"==t?null!=e.attr("placeholder-desktop")?e.attr("placeholder-desktop"):"":""!=(a=null!=e.attr("placeholder-mobile")?e.attr("placeholder-mobile"):"").replace(" ","")?e.attr("placeholder-mobile"):e.attr("placeholder-desktop");e.attr("placeholder",a)}e(window).on("onoverlayload",function(){var t=e(".search-form #search-field:first");t&&t.length&&(a(t,i.getMediaType()),e.subscribe("mediaQuery:change",function(e){a(t,e.getMediaType())}))})}};return t}),define("models-display/component.modelsDisplay",["jquery","_","configurationProvider","requestCacheManager","vehicleAttributeUtil","models-display/component.modelsDisplayCarousel","prices-display-configuration/component.prices-display-configuration"],function(i,e,t,a,n,o,r){var l={};function s(e){var t;e.addClass("service-ok"),o.init(e),e="loaded",(t=i.Event("onmodelsdisplayload")).state=e,i(window).trigger(t)}return l.init=function(){i(".modelsDisplay").each(function(e,t){t=i(t);t.find(".slide-container");s(t)});var a=i("#namePlates"),e=i(".models-display").attr("data-nameplates-models-map");a.length?e&&i.each(JSON.parse(e),function(e,t){a.val(a.val()+","+e)}):e&&i.each(JSON.parse(e),function(e,t){i("body").append(i('<input type="hidden" id="namePlates" value='+e+">"))}),i(document).ready(function(){updatePriceAjax(i("#isDynamicPrice").val(),i(".models-display").find("input[name=combinedKey]").val(),"",[".models-display .slide-container"]),i('input[name="validationZone"]').on("change",function(){"true"===i('input[name="validationZone"]').val()&&i(".models-display .model span").each(function(e){var t=this.id.includes("startingPrice")&&"gux-variable"===this.className?this.id.replace("startingPrice",""):this.className,t=i('input[name="'+t+'"]').val(),a=this.id;null!=t&&""!=t&&a.includes("startingPrice")&&i(this).text(t)})})})},l}),define("models-display/component.modelsDisplayCarousel",["jquery","jquery-flexslider","mediaQuery"],function(f,e,t){var a={};return a.init=function(e){function t(){var l=m;f(".modelsDisplay .models-display").each(function(){var e=f(this),t=e.attr("data-nameplates-models-map");if(t){for(var a in JSON.parse(t)){a=l[a];if(a)for(var i=a.derivatives,n=0;n<i.length;n++){var o=i[n].maxPrice,r=i[n].startingPrice;o&&e.find('span[id="maxPrice'+i[n].id+'"]').html(o),r&&e.find('span[id="startingPrice'+i[n].id+'"]').html(r),f("#priceRange"+i[n].id).length&&o&&r&&e.find('span[id="priceRange'+i[n].id+'"]').html(r+"&nbsp;-&nbsp;"+o)}}Object.keys(l).length&&f(".models-display p span").removeClass("loading-price")}})}function a(e){p++}function i(e){e.resize(),e.find(".carousel-previous").addClass("inactive"),l(e),t()}function n(e){e.find(".slide-current-slide").text(e.animatingTo+1),e.find(".carousel-btn").removeClass("inactive"),0===e.animatingTo&&e.find(".carousel-previous").addClass("inactive"),e.animatingTo==e.count-1&&e.find(".carousel-next").addClass("inactive")}function o(e){!u&&0===e.currentSlide&&1<=p&&(e.vars.slideshow=!1,e.flexslider("stop"))}function r(){u=!0,d.flexslider("stop")}function l(e){var t=e.data()&&e.data().flexslider||e;9<t.pagingCount?(e.find(".slide-current-slide").text(t.currentSlide+1),e.find(".slide-total-slides").text(" / "+t.pagingCount),e.addClass("carousel-numbers-pagination")):e.removeClass("carousel-numbers-pagination")}function s(){return window.innerWidth<768?1:4}var c,d,u,p,m,h;d=f(e=e).find(".carousel"),u=!1,m={},c=(p=0)<f(".rtl").length?{controlsContainer:d.find("> .carousel-controls"),selector:".slide-container > .carousel-slide",animation:"slide",animationLoop:!1,directionNav:!1,pauseOnHover:!0,slideshow:!1,itemWidth:310,itemMargin:0,start:i,end:a,before:n,after:o,useCSS:!1,minItems:s(),maxItems:s(),rtl:!0}:{controlsContainer:d.find("> .carousel-controls"),selector:".slide-container > .carousel-slide",animation:"slide",animationLoop:!1,directionNav:!1,pauseOnHover:!0,slideshow:!1,itemWidth:310,itemMargin:0,start:i,end:a,before:n,after:o,useCSS:!1,minItems:s(),maxItems:s()},f(window).resize(function(){s()}),e=d.find(".carousel-slide").length,d.flexslider(c),e<=4&&d.find(".carousel-arrows").hide(),e=f(window),d.find(".carousel-previous").on("click",function(e){f(this).closest(".carousel").flexslider("prev"),r()}),d.find(".carousel-next").on("click",function(e){f(this).closest(".carousel").flexslider("next"),r()}),d.on("click",function(){r()}),d.on("focusin",function(e){0===d.find("a:focus").parents(".carousel-slide").index()&&d.flexslider(0)}),d.on("keydown",function(e){var t,e=e.keyCode||e.which,a=(c=d.data("flexslider"),d.find("a:focus").parents(".carousel-slide")),i=d.find("a").parents(".carousel-slide");switch(37===e?0===((t=a.index()-1)+1)%s()&&0!==a.index()&&d.flexslider("prev"):9!==e&&39!==e||0===((t=a.index()+1)+1)%s()&&t<i.length&&d.flexslider("next"),e){case 37:a.prev().find("a").focus();break;case 39:a.next().find("a").focus()}}),e.on("resize",_.debounce(function(){l(d)},100)),1024<f(window).width()&&f(".rtl .modelsDisplay.service-ok").each(function(){var e=f(this).find(".carousel-slide.model");e.length<4&&e.parent().addClass("flipslide")}),e=f.cookie("common.location.LOC"),h=f("#isDynamicPriceBasedLocation").val(),e&&"false"!==h&&f(".models-display p span").addClass("loading-price"),f(document).on("pricesUpdated",function(e){e.message?(m=e.localData,t()):e.setToNull&&(f('span[id*="maxPrice"]').html(""),f('span[id*="maxPrice"]').closest("p").css("display","none"),f('span[id*="startingPrice"]').html(""),f('span[id*="startingPrice"]').closest("p").css("display","none"),f('span[id*="priceRange"]').html(""),f('span[id*="priceRange"]').closest("p").css("display","none"),f(".models-display p span").removeClass("loading-price"))})},a}),define("model-details-accordion/component.modelDetailsAccordion",["jquery","_","configurationProvider","accordion/component.accordion","overlay/component.overlay","utils/utils.validateDynamicModelData"],function(i,l,t,n,e,o){var a={},r=".accordion-template",s=".feature-category-panel-template",c=".technical-specification-panel-template",d="technical-specification",u="service-ok",p="service-error";function m(e){this.$elem=e,this.conf=t.get(this.$elem),this.accordionTemplate=this.$elem.find(r).html(),this.fetureCategoryPanelTemplate=this.$elem.find(s).html(),this.technicalSpecificationPanelTemplate=this.$elem.find(c).html(),this.accordionPanelsOrder=this.conf.order||!1,this.technicalSpecificationGroupsOrder=this.conf.techOrder||!1,this.overlayImageUrl=this.conf.overlayImageUrl||"",this.technicalSpecificationTitle=this.conf.technicalSpecificationTitle||"",this.technicalSpecs=this.conf.technicalSpecs||!1,this.optionalLabel=this.conf.optionalLabel,this.standardLabel=this.conf.standardLabel;e=this.getData(this.conf.endpoint);e.done(function(e){var t,a;this.setComponentStateCorrect(),o.validate(e.featureCategories)&&(a=[],t=[],a=this.parseFeatureCategoryData(e.featureCategories,l.template(this.fetureCategoryPanelTemplate),this.overlayImageUrl,this.optionalLabel,this.standardLabel),e.technicalSpecification&&this.technicalSpecs&&(t=this.parseTechnicalSpecificationData(e.technicalSpecification,l.template(this.technicalSpecificationPanelTemplate),d,this.technicalSpecificationTitle),this.technicalSpecificationGroupsOrder&&(t.contentData=this.sortTechnicalSpecificationGroups(t.contentData,this.technicalSpecificationGroupsOrder)),a.push(t)),this.accordionPanelsOrder&&(a=this.sortGroups(a,this.accordionPanelsOrder)),this.renderComponent(this.accordionTemplate,a),this.bindEvents(),this.$elem.find(".accordion").each(function(){n.init(i(this))}))}.bind(this)),e.fail(function(){this.setComponentStateFailed()}.bind(this))}return m.prototype.getData=function(e){return i.getJSON(e)},m.prototype.parseFeatureCategoryData=function(e,t,a,n,o){var r=[];return e.forEach(function(e){var i={id:e.id,name:e.name,template:t,contentData:[],additionalParameters:{href:window.location.href,overlayUrl:a}};e.featureGroups.forEach(function(e,a){var t=l.groupBy(e.features,function(e){return e.optional});i.contentData.push({name:e.name,types:[]}),l.forEach(t,function(e,t){i.contentData[a].types.push({name:"true"==t?n:o,features:[]}),e.forEach(function(e){l.last(i.contentData[a].types).features.push({shortDescription:e.shortDescription,longDescription:e.longDescription,image:e.image})})})}),r.push(i)}),r},m.prototype.parseTechnicalSpecificationData=function(e,t,a,i){var n={id:a,name:i,template:t,contentData:[],additionalParameters:{}};return e.forEach(function(e){n.contentData.push(e)}),n},m.prototype.sortGroups=function(e,t){var a=t,i=a.length;return l.forEach(a,function(e,t,a){a[t]=l.unescape(e).replace(/ /g,"-").toLowerCase()}),l.sortBy(e,function(e){e=l.indexOf(a,l.unescape(e.name).replace(/ /g,"-").toLowerCase());return-1<e?e:i++})},m.prototype.sortTechnicalSpecificationGroups=function(e,t){var a=t.length;return l.sortBy(e,function(e){e=l.indexOf(t,e.id);return-1<e?e:a++})},m.prototype.renderComponent=function(e,t){e=l.template(e);this.$elem.append(e({data:t}))},m.prototype.setComponentStateCorrect=function(){this.$elem.addClass(u)},m.prototype.setComponentStateFailed=function(){this.$elem.addClass(p)},m.prototype.bindEvents=function(){e.init()},a.init=function(){i(".modelDetailsAccordion").each(function(e,t){new m(i(t))})},a}),define("model-details-accordion/component.modelDetailsAccordionPoC",["jquery","_","configurationProvider","accordion/component.accordion","overlay/component.overlay"],function(a,c,t,i,e){var n={},o=".accordion-template",r=".feature-category-panel-template",l=".technical-specification-panel-template",s="service-ok",d="service-error";function u(e){this.$elem=e,this.conf=t.get(this.$elem),this.accordionTemplate=this.$elem.find(o).html(),this.fetureCategoryPanelTemplate=this.$elem.find(r).html(),this.technicalSpecificationPanelTemplate=this.$elem.find(l).html(),this.accordionPanelsOrder=this.conf.order||!1,this.technicalSpecificationGroupsOrder=this.conf.techOrder||!1,this.overlayImageUrl=this.conf.overlayImageUrl||"",this.technicalSpecificationTitle=this.conf.technicalSpecificationTitle||"",this.technicalSpecs=this.conf.technicalSpecs||!1,this.optionalLabel=this.conf.optionalLabel,this.standardLabel=this.conf.standardLabel;e=a.getJSON(this.conf.endpoint);e.done(function(e){this.validateData(e)?(this.setServiceStatus(!0),e=e.data[Object.keys(e.data)[0]].features.byMarketing.children,e=this.parseFeatureCategoryData(e,c.template(this.fetureCategoryPanelTemplate),this.overlayImageUrl,this.optionalLabel,this.standardLabel,this.conf.featureDisplayField),this.renderComponent(this.accordionTemplate,e),this.bindEvents(),this.$elem.find(".accordion").each(function(){i.init(a(this))})):this.setServiceStatus(!1)}.bind(this)),e.fail(function(){this.setServiceStatus(!1)}.bind(this))}return u.prototype.validateData=function(e){return!0},u.prototype.parseFeatureCategoryData=function(e,t,a,n,o,i){function r(e){var t=[];return c.forEach(e,function(e){t.push({shortDescription:e.name||e.code,longDescription:e.name||e.code,optional:"AVAILABLE"==e.state,image:e.imageSet?e.imageSet.images[0].url:""})}),t}var l,s=[];return l=[],c.forEach(e,function(e){var t;c.isEmpty(e)||l.push({id:e.code,name:e.name,featureGroups:(e=e.children,t=[],c.forEach(e,function(e){c.isEmpty(e)||(c.isEmpty(e.children)?c.isEmpty(e.features)||t.push({id:e.code,name:e.name,features:r(e.features)}):t.push({id:e.code,name:e.name,features:r(e.children)}))}),t)})}),l.forEach(function(e){var i={id:e.id,name:e.name,template:t,contentData:[],additionalParameters:{overlayUrl:a}};e.featureGroups.forEach(function(e,a){var t=c.groupBy(e.features,function(e){return e.optional});i.contentData.push({name:e.name,types:[]}),c.forEach(t,function(e,t){i.contentData[a].types.push({name:"true"==t?n:o,features:[]}),e.forEach(function(e){c.last(i.contentData[a].types).features.push({shortDescription:e.shortDescription,longDescription:e.longDescription,image:e.image})})})}),s.push(i)}),s},u.prototype.parseTechnicalSpecificationData=function(e,t,a,i){var n={id:a,name:i,template:t,contentData:[],additionalParameters:{}};return e.forEach(function(e){n.contentData.push(e)}),n},u.prototype.sortGroups=function(e,t){var a=t,i=a.length;return c.forEach(a,function(e,t,a){a[t]=c.unescape(e).replace(/ /g,"-").toLowerCase()}),c.sortBy(e,function(e){e=c.indexOf(a,c.unescape(e.name).replace(/ /g,"-").toLowerCase());return-1<e?e:i++})},u.prototype.sortTechnicalSpecificationGroups=function(e,t){var a=t.length;return c.sortBy(e,function(e){e=c.indexOf(t,e.id);return-1<e?e:a++})},u.prototype.setServiceStatus=function(e){e?this.$elem.addClass(s):this.$elem.addClass(d)},u.prototype.renderComponent=function(e,t){e=c.template(e);this.$elem.append(e({data:t}))},u.prototype.bindEvents=function(){e.init()},n.init=function(){a(".modelDetailsAccordionPoC").each(function(e,t){new u(a(t))})},n}),define("also-like/component.youMightAlsoLike",["jquery","_","configurationProvider","requestCacheManager","vehicleAttributeUtil","prices-display-configuration/component.prices-display-configuration"],function(o,e,t,a,i,n){var r={};function l(e){var t=o.Event("onyoumightalsolikeload");t.state=e,o(window).trigger(t)}return r.init=function(){var e,t,a=o("#namePlates");a.length?o.each(o(".youMightAlsoLike input"),function(e,t){"combinedKey"===t.name&&a.val(a.val()+","+t.value)}):o.each(o(".youMightAlsoLike input"),function(e,t){"combinedKey"===t.name&&o("body").append(o('<input type="hidden" id="namePlates" value='+t.value+">"))}),e=o.cookie("common.location.LOC"),t=o("#isDynamicPriceBasedLocation").val(),e&&"false"!==t&&o(".carousel-slide p .value > span").addClass("loading-price"),o(document).on("pricesUpdated",function(e){var n;e.message?(n=e.localData,o(".youMightAlsoLike .carousel-slide").each(function(){var e,t,a=o(this),i=a.attr("data-nameplate-key"),i=n[i];i&&(e=i.maxPrice,t=i.startingPrice,e&&a.find('span[id="maxPrice'+i.id+'"]').html(e),t&&a.find('span[id="startingPrice'+i.id+'"]').html(t),a.find('span[id="priceRange'+i.id+'"]').length)&&e&&t&&a.find('span[id="priceRange'+i.id+'"]').html(t+"&nbsp;-&nbsp;"+e)})):e.setToNull&&(o('span[id*="maxPrice"]').html(""),o('span[id*="maxPrice"]').closest("p").css("display","none"),o('span[id*="startingPrice"]').html(""),o('span[id*="startingPrice"]').closest("p").css("display","none"),o('span[id*="priceRange"]').html(""),o('span[id*="priceRange"]').closest("p").css("display","none")),o(".carousel-slide p .value > span").removeClass("loading-price")}),o(".youMightAlsoLike").each(function(e,t){t=o(t);t.find(".slide-container");t.addClass("service-ok"),l("loaded")}),o(document).ready(function(){updatePriceAjax(o("#isDynamicPrice").val(),"",o(".also-like").find("input[name=combinedKey]").val(),[".youMightAlsoLike .slide-container"])})},r}),define("responsive/global.ux.imageInterchange",["jquery"],function(o){function e(e){e.matches?r.mediaWidths.mobileStatus=!0:r.mediaWidths.mobileStatus=!1,a()}function t(){r.img.elements="",r.img.elements=o("body").find(".img-interchange");var t,a,i="",n="";r.img.imgData=[],r.img.elements.each(function(e){t=o(this),a=t.attr("data-interchange-img-src"),"small"==t.attr("data-interchange-size")?(i=a,n=t.attr("src")):(n=a,i=t.attr("src")),r.img.imgData.push({elementIndex:e,mobileImgSrc:i,mobileImgSize:"small",desktopImgSrc:n,desktopImgSize:"large"})})}var r={mediaWidths:{mobile:"(max-width: 767px)",desktop:"(min-width: 768px)",mobileStatus:!0},matchMedia:{mobile:null,desktop:null},img:{elements:null,mobile:null,desktop:null,imgData:[]}},a=function(){for(var e=0;e<r.img.elements.length;e++)!0===r.mediaWidths.mobileStatus?(r.img.elements.eq(e).attr("src",r.img.imgData[e].mobileImgSrc),r.img.elements.eq(e).attr("data-interchange-size",r.img.imgData[e].desktopImgSize),r.img.elements.eq(e).attr("data-interchange-img-src",r.img.imgData[e].desktopImgSrc)):!1===r.mediaWidths.mobileStatus&&(r.img.elements.eq(e).attr("src",r.img.imgData[e].desktopImgSrc),r.img.elements.eq(e).attr("data-interchange-size",r.img.imgData[e].mobileImgSize),r.img.elements.eq(e).attr("data-interchange-img-src",r.img.imgData[e].mobileImgSrc))};return{init:function(){r.matchMedia.mobile=window.matchMedia(r.mediaWidths.mobile),r.matchMedia.desktop=window.matchMedia(r.mediaWidths.desktop),t(),e(r.matchMedia.mobile),r.matchMedia.mobile.addListener(e)},captureImageData:function(){t(),e(r.matchMedia.mobile)},mobileStatus:function(){return r.mediaWidths.mobileStatus}}}),define("scrolling-visual-indicator/component.scrolling-visual-indicator",["jquery","mediaQuery","isAuthor","_"],function(t,e,a,i){var n={};function o(e){this.$el=t(e),this.isAuthorMode=a.getAuthorStatus(),this.bindUIElements(),this.addVisualIndicator(),this.bindUIEvents()}return o.prototype.bindUIElements=function(){this.$window=t(window),this.$visualIndicator,this.indicatorStatus=!1,this.cookie=this.getCookie("indicator")},Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");function t(){return i.apply(this instanceof n&&e?this:e,a.concat(Array.prototype.slice.call(arguments)))}var a=Array.prototype.slice.call(arguments,1),i=this,n=function(){};return n.prototype=this.prototype,t.prototype=new n,t}),o.prototype.bindUIEvents=function(){this.cookie||(this.$window.on("resize",i.throttle(function(){this.$visualIndicator&&("desktop"===e.getMediaType()&&this.screenHeight()<900?(this.$visualIndicator.show(),this.setBottomPosition()):this.$visualIndicator.hide())},2e3).bind(this)),this.indicatorStatus&&t(window).on("scroll",i.throttle(function(){this.removeVisualIndicator()},300).bind(this))),this.$el.on("click",".visual-indicator .indicator",function(){t("html, body").delay(500).animate({scrollTop:this.screenHeight()-130},1e3),this.removeVisualIndicator()}.bind(this))},o.prototype.setBottomPosition=function(){var e;t(".carousel-controls").length&&this.indicatorStatus&&(this.$visualIndicator.css("bottom","10px"),(e=t(".carousel-controls").offset().top-this.$visualIndicator.offset().top)<30)&&-40<e&&this.$visualIndicator.css("bottom","70px")},o.prototype.addVisualIndicator=function(){this.cookie||(this.$visualIndicator=t("<span/>"),this.$visualIndicator.addClass("visual-indicator"),this.$el.append(this.$visualIndicator),this.indicatorStatus=!0,"desktop"===e.getMediaType()&&this.screenHeight()<900?this.$visualIndicator.show():this.$visualIndicator.hide())},o.prototype.screenHeight=function(){return parseInt(this.$window.height())},o.prototype.setCookie=function(e,t){document.cookie=e+"="+t},o.prototype.getCookie=function(e){e=document.cookie.match("(^|;) ?"+e+"=([^;]*)(;|$)");return e?e[2]:null},o.prototype.removeVisualIndicator=function(){this.setCookie("indicator",!0),this.$visualIndicator&&this.$visualIndicator.remove()},n.init=function(){new o("#global-ux")},n}),define("main-navigation/component.mainNavigation",["jquery","mediaQuery","marketConfigGlobal","main-navigation/component.vehicleMenu","overlay/component.overlay"],function(c,d,F,l,_){var u,p,e={},m="site-link-open",s="category-open",i="accordion-content-wrapper",h="accordion-content",n="expanded",f=".richtext.section",g="",o=!1,v=!1,y=c.cookie("common.location.LOC")||"",a="",b="",r=!1;function w(){var e=u.find("."+s),t=e.find("."+n),a=t.find("."+i);p.find("."+m).find(".show-mobile-only").removeClass("show-sub-menu").addClass("hide-sub-menu"),p.find("."+m).find(".show-mobile-only").css({"max-height":0}),p.find("."+m).removeClass(m),e.removeClass(s).find("a").attr("tabindex","-1"),t.removeClass(n),"mobile"===d.getMediaType()&&a.height(0),P(e)}function C(){var e=c(".vehicle-menu-backdrop");w(),p.removeClass("has-open-category"),p.next().removeClass("is-open"),u.find(".contact-us").removeClass("hidden"),e.remove(),c(".utility-links a").removeClass(m),S(-1)}function k(e){if(e.length){var t=c(".main-nav .nav-content .utility-links"),a=("mobile"!=d.getMediaType()&&(e.hasClass("isFdsEnabled")?e.insertAfter(t):e.insertBefore(t)),e.css("visibility","visible"),e.find(".global-user")),i=e.find(".global-links-list"),t=e.data("prelogintitle"),n=e.data("postlogintitle"),e=e.data("preloginlink");a.attr("title",t),a.attr("href",e);try{document.getElementsByTagName("body")[0].addEventListener("fma_authenticated",()=>{window.fma.isAuthenticated&&(a.attr("title",n),a.attr("href","javascript:;"),a.addClass("FMA_loggedIn"),a.hasClass("FMA_loggedIn"))&&a.on("click",function(e){e.preventDefault(),i.toggleClass("global-links-list-shown"),c(".utility-list").removeClass("utility-menu-shown"),C()})})}catch(e){console.warn(e)}try{var o=document.getElementsByClassName("logoutFMA");for(let e=0;e<o.length;e++)o[e].addEventListener("click",function(){window.fma.logout()})}catch(e){console.warn(e)}}}function R(){var e=u.find(".categories "+f);e.each(function(){c(this).find(".desktop p").wrapAll('<div class="'+i+'"><div class="'+h+'"></div></div>'),c(this).find(".mobile p").wrapAll('<div class="'+i+'"><div class="'+h+'"></div></div>')}),e.find("h3").on("click",function(e){var t=c(this).closest(f);c(e.target).attr("href")||"mobile"===d.getMediaType()&&(t.hasClass(n)?t.removeClass(n).find("."+i).height(0):(u.find("."+n).removeClass(n).find("."+i).height(0),t.addClass(n),t.find("."+i).height(t.find(".mobile ."+h).outerHeight())),T(t.closest(".category")))})}function V(e){var t,a=c("#global-ux"),i=c(e),n=u.find("."+s),o=i.closest("li"),r=c(".vehicle-menu-backdrop");c(".utility-list").removeClass("utility-menu-shown"),c(".global-owner-links .global-links-list").removeClass("global-links-list-shown"),o.hasClass(m)?(C(),S(-1),"mobile"===d.getMediaType()&&g&&(c(".site-links li").removeClass(m),o.find(".show-mobile-only").addClass("hide-sub-menu").removeClass("show-sub-menu"))):(w(),o.addClass(m),t=o.attr("data-contains-mini-showroom"),g?d.getMediaType():p.addClass("has-open-category"),p.next().addClass("is-open"),i=u.find(i.attr("data-target-category")),"mobile"===d.getMediaType()&&g&&(o.find(".show-mobile-only").removeClass("hide-sub-menu").addClass("show-sub-menu"),o.find(".show-mobile-only").css({"max-height":o.find(".show-mobile-only").find(".mobile-list-item").outerHeight()+10}),"true"!==t)||i.addClass(s),u.find(".contact-us").addClass("hidden"),T(i),0<i.find(".vehicle-menu").length?(l.getVehicleMenu(),S(3)):0<i.find(".fds-vehicle-menu").length?("mobile"==d.getMediaType()&&g&&(u.find(".site-links").addClass("hide-menu"),u.find(".back_button").removeClass("hide-menu"),u.find(".vehicle-title").removeClass("hide-menu"),c(".logo").addClass("hide-menu"),u.find(".back_button").addClass("show-menu")),l.getVehicleMenu(),S(3)):(S(-1),o=i,t=(t=e)&&t.getAttribute("tabindex"),t=parseInt(t)+1,o.find("a").attr("tabindex",t)),0!==r.length||v||a.append('<div class="vehicle-menu-backdrop"></div>')),P(n)}function S(e){c(".vehicle-menu-item-title").each(function(){c(this).attr("tabindex",e)})}function B(){var e;c(".nav-header-center a").attr("tabindex",0),window.startingIndex=1,u.find(".nav-header a").attr("tabindex",window.startingIndex),p.find("a").each(function(){3===window.startingIndex&&window.startingIndex++,c(this).attr("tabindex",window.startingIndex),window.startingIndex++}),u.find(".category a").attr("tabindex","-1"),e=window.startingIndex,window.startingIndex=e,u.find(".utility-links").find("a").each(function(){c(this).attr("tabindex",window.startingIndex),window.startingIndex+=1})}function x(){var e=u.find(".nav-content"),t=c(".cookie-disclaimer"),a=u.outerHeight();"none"!==t.css("display")&&(a+=t.outerHeight()),e.is(":animated")||e.css({top:a})}function U(e,t){e.parent().insertAfter(".site-links"),0===c(".site-link-search").length&&(c(".nav-content .icon-search").parent().wrap('<div class="site-link-search"></div>'),e=c(".nav-content .icon-search").next(".site-link-title").text(),t=void 0!==t?t:e,c(".site-link-search").append('<form action="'+c("#footer-search-form").attr("action")+'"  class="search-form" id="footer-search-form"><input type="text" autocomplete="off" class="search-input" name="q" placeholder="'+t+'"/></form>')),c(".search-form").length&&c(".search-form").find(".typeahead")&&c(".search-form").find(".typeahead").attr({placeholder:t}),"en_ZA"===c("[data-locale]").data("locale")&&(c("#footer-search-form .search-input").attr("readonly","readonly"),c("#footer-search-form .search-input").attr("placeholder",""),c("#footer-search-form").parent(".site-link-search").addClass("search-button-mobile-sa"))}function D(){var e=c(".utility-links .icon-search"),t=document.querySelectorAll('[data-cta-utility="true"]'),a=c(".site-links"),i=c(".utility-links"),n=c("#mobilePlaceholderText").val();"mobile"==d.getMediaType()?(0<t.length?(t.forEach(function(e){e.classList.add("ctaMobile")}),i.insertAfter(a)):(c(".utility-links a").each(function(e,t){c(this).find("i").hasClass("icon-search")||(c(this).insertAfter(".site-links li:last"),c(this).wrap('<li class="site-link-download bdrbtm repositionutility" data-utility-link></li>'))}),e.parent().insertAfter(".site-links")),U(e,n)):(c(".repositionutility a").each(function(e,t){c(this).appendTo(".utility-links li:eq("+e+") span")}),c(".site-link-search a").appendTo(".utility-links li:last"),c(".site-link-search").remove(),n=c("#placeholderText").val(),c(".search-form").length&&c(".search-form").find(".typeahead")&&c(".search-form").find(".typeahead").attr({placeholder:n}))}function P(e){e.css({"min-height":"0",height:"0"})}function T(e){var t,a=c(".nav-content").outerHeight();(e.find(".vehicle-menu").length||e.find(".fds-vehicle-menu").length)&&"mobile"!==d.getMediaType()&&(g?o||c(".full-screen-container").addClass("show-menu").removeClass("hide-menu"):e.addClass("loading-vehiclemenu"),I(e.closest(".main-nav"))),t=e.find(".category-inner").outerHeight(),e.height(t),"mobile"===d.getMediaType()?(g&&c(".full-screen-container").addClass("show-menu").removeClass("hide-menu"),a-=c(".site-link-search").outerHeight(),p.outerHeight()>a&&(a=p.outerHeight()),e.css({"min-height":a,height:"auto"}),e.find(".category-inner").css({height:"auto"})):e.css({"min-height":"0",height:t}),c(window).on("vehicleMenuBuilt",function(){g&&(c(".full-screen-container").addClass("hide-menu").removeClass("show-menu"),"mobile"!=d.getMediaType())&&(o=!0,$()),e.removeClass("loading-vehiclemenu")})}function N(e){var t,a,i;return e.find(".vehicle-menu").length?(a=(t=e.find(".vehicle-menu")).find(".is-active .vehicle-menu-content").outerHeight(),i=t.find(".vehicle-menu-item").outerHeight()+a):e.find(".fds-menu-section").length&&(a=(t=e.find(".fds-menu-section")).find(".fds-menu-vehicles-container").outerHeight()+150,i=A(e)<=a?a+20:A(e)),i}function A(e){var t=0;return t=e.find(".fds-menu-list-item").length&&"mobile"!=d.getMediaType()?130+50*e.find(".fds-menu-list-item").length:t}function I(e){var t=e.find(".vehicle-menu").length?e.find(".vehicle-menu"):e.find(".fds-vehicle-menu"),a=t.closest(".category-open");t.closest(".category-open .category-inner").css({height:N(e)}),a.css({height:N(e)}),t.css({height:N(e)})}function $(){var e=f;"mobile"===d.getMediaType()&&(u.find(e+" ."+i).height(0),e+=".expanded"),u.find(e+" ."+i).each(function(){var e=c(this);e.height(e.find("."+h).outerHeight())}),u.find("."+s).each(function(){T(c(this))})}function L(){u.find(".category").each(function(){var e=c(this).find("h3"),t=0;e.css({height:"auto"}),"mobile"!==d.getMediaType()&&(e.each(function(){var e=c(this);t=Math.max(e.outerHeight(),t)}),e.css({height:t}))})}function q(i){var e=i,t=(e.find(".vehicle-menu-item.is-active .vehicle-menu-content"),e.find(".vehicle-menu-item")),a=(window.document.addEventListener?window.document.addEventListener("mediaQuery.change",o,!1):window.document.attachEvent("mediaQuery.change",o),i),n=a.find(".vehicle-menu-item");function o(){"mobile"===d.getMediaType()?(i.find(".vehicle-menu").height(""),r()):(t.hasClass("is-active")||t.first().addClass("is-active"),I(i))}function r(){e.find(".vehicle-menu-item-title").each(function(){c(this).parent(".vehicle-menu-item").removeClass("is-active")})}n.find(".vehicle-menu-item-title"),c(window).on("resize",function(){a.find(".vehicle-menu");"mobile"!==d.getMediaType()&&I(a)}),n.bind("keydown",function(e){13===e.keyCode&&(e.target.click(),c(".vehicle-menu-item.is-active .vehicle-menu-content a").each(function(){c(this).attr("tabindex",3)}))}),n.on("click",function(e){var o,t=c(this).find(".vehicle-menu-item-title"),a=n,r=t;r.closest(".vehicle-menu"),"mobile"===d.getMediaType()?((t=r.parent(".vehicle-menu-item")).toggleClass("is-expanded"),o=t.hasClass("is-expanded"),setTimeout(function(){var e,t,a,i,n;e=o,a=(t=r).parent(".vehicle-menu-item"),t=t.siblings(".vehicle-menu-content"),i=a.find(".vehicle-menu-buttons"),n=a.find(".vehicle-tiles"),i=i.outerHeight()+n.outerHeight()+c(".cookie-disclaimer").outerHeight(),i=v?i+30:i,e?(a.siblings().each(function(){c(this).removeClass("is-expanded"),c(this).find(".vehicle-menu-content").css({"max-height":0})}),t.css({"max-height":i+"px"})):t.css({"max-height":0})},500)):(a.each(function(){c(this).removeClass("is-active")}),r.parent(".vehicle-menu-item").addClass("is-active"),I(i))}),"mobile"===d.getMediaType()?(r(),c(".mobileTitle").on("click",function(){var e=c(this),t=e.hasClass("open-menu"),t=(c(".mobileTitle").each(function(){c(this).removeClass("open-menu")}),t?c(this).removeClass("open-menu"):c(this).addClass("open-menu"),c(this).attr("data-nav"));c(".fds-menu-vehicle-block").each(function(){c(this).addClass("hide-car-menu").removeClass("show-car-menu")}),c("."+t).each(function(){e.hasClass("open-menu")?c(this).addClass("show-car-menu").removeClass("hide-car-menu"):c(this).removeClass("show-car-menu").addClass("hide-car-menu")}),c(".nav-content").scrollTop(0)})):setTimeout(function(){I(i)},300)}function j(e){u=c(e),g=c("#menu-fds").attr("data-menufds"),v=c(".main-nav").hasClass("fds-header"),t=u.find(".toggle-nav-content"),a=u.find(".nav-content"),t.unbind("click"),t.on("click",function(e){e.preventDefault(),c("body").toggleClass("no-scroll"),window.scrollTo(0,0),a.scrollTop(0),x(),a.toggleClass("visible"),t.toggleClass("x-icon"),C(),"mobile"==d.getMediaType()&&g&&(t.hasClass("x-icon")?(c(".nav-header").find(".global-owner-links").hide(),u.find(".right-close").removeClass("hide-menu"),u.find(".right-close").addClass("show-menu"),c(".nav-header-right .lang-links").addClass("hide")):(c(".nav-header-right .lang-links").removeClass("hide"),u.find(".right-close").removeClass("show-menu"),u.find(".right-close").addClass("hide-menu"),u.find(".back_button").addClass("hide-menu"),c(".logo").removeClass("hide-menu"),u.find(".vehicle-title").addClass("hide-menu"),u.find(".site-links").removeClass("hide-menu"),c(".nav-header").find(".global-owner-links").show())),t.hasClass("x-icon")?c("body").addClass("pos-fixed"):(c("body").removeClass("pos-fixed"),c("body").removeClass("no-scroll"))}),(e=(p=u.find(".site-links")).find('.site-link-chevron a:not([href][href != ""])')).on("click",function(e){V(this)}),e.bind("keydown",function(e){13===e.keyCode&&(this.parentElement.classList.contains("site-link-open")?C():(C(),e.target.click()))}),u.find(".chevron-back").on("click",function(e){e.preventDefault(),"mobile"==d.getMediaType()&&g&&(u.find(".site-links").removeClass("hide-menu"),u.find(".back_button").removeClass("show-menu"),u.find(".back_button").addClass("hide-menu"),u.find(".vehicle-title").addClass("hide-menu"),c(".logo").removeClass("hide-menu")),C()}),u.find(".chevron-back").on("keydown",function(e){13===(e.keyCode||e.which)&&c(this).is(":focus")&&(e.preventDefault(),"mobile"==d.getMediaType()&&g&&(u.find(".site-links").removeClass("hide-menu"),u.find(".back_button").removeClass("show-menu"),u.find(".back_button").addClass("hide-menu"),u.find(".vehicle-title").addClass("hide-menu"),c(".logo").removeClass("hide-menu")),C())}),R(),B(),g?(k(i=c(document).find(".global-owner-links")),c(".profile-accordion").on("click",function(e){c(".utility-list").toggleClass("utility-menu-shown"),i.length&&i.find(".global-user").hasClass("FMA_loggedIn")&&i.find(".global-links-list").removeClass("global-links-list-shown"),C()}),"mobile"===d.getMediaType()&&(e=c(".utility-list"),r=c(".lang-links"),e.each(function(){c(this).find("a:not(.postalcodeoverlay)").wrapAll('<div class="sticky-nav-content"></div>')}),e=c(".sticky-nav-content"),c("#nav-content").append(e),r.insertAfter(".sticky-nav-content"))):c(document).find(".global-owner-links").length&&k(c(document).find(".global-owner-links")),u.find(".category ."+h).each(function(){for(var e=c(this),t=e.find("p"),a=t.length,i=0;i<a;i+=6)t.slice(i,i+6).wrapAll('<div class="category-links-column"></div>');e.closest(f).addClass("has-"+Math.ceil(a/6)+"-links-columns")}),x(),e=c(document),o=u.find(".nav-content"),e.on("cookieOpened",function(){n=u.outerHeight()+c(".cookie-disclaimer").outerHeight(),o.animate({top:n},"slow")}),e.on("cookieClosed",function(){n=u.outerHeight(),o.animate({top:n},"slow")}),D(),L(),$(),c(window).resize(function(e){x(),L(),$(),D()}),c("body").on("click",function(e){c(e.target).closest(".main-nav").length||C()}),c(".site-link-fds-globe").on("click",function(e){c("#language-popup-backdrop").removeClass("hide-language-modal-fds"),c("#header-language-selector-modal").removeClass("hide-language-modal-fds")}),c(".icon-language-modal-close").on("click",function(e){c("#language-popup-backdrop").addClass("hide-language-modal-fds"),c("#header-language-selector-modal").addClass("hide-language-modal-fds")}),c(window).on("vehicleMenuBuilt",function(){q(u),_.overlays[0].addBaseUrl()}),r=u.find(".site-links"),(e=((e=u.find(".utility-links")).length?e:r).find("li:last-child")).on("keydown",function(e){9===(e.keyCode||e.which)&&C()}),c(".utility-links a[data-target-category]").on("click",function(){c(this).toggleClass(m);var e=c(this).attr("data-target-category");c(".site-links a[data-target-category]").each(function(){e===c(this).attr("data-target-category")&&c(this).trigger("click")})}),c("a").on("keydown",function(e){13===e.keyCode&&e.target.href&&e.target.click()}),"mobile"===d.getMediaType()&&c(".lang-links").length&&(e=c(".lang-links")[0].cloneNode(!0),c(".nav-header-right").append(e)),e=c("#postalCodeOverlayPagePath").data("postalcodeoverlaypagepath"),s=c(".postalcodeoverlay"),l=s?s.length:0,y&&s.html(y),e&&0<l&&s.attr("href",e);var t,a,i,n,o,r,l=c(".postalcodeoverlay").length,s=localStorage.getItem("overlayOpenFlg");0<l&&s&&(b=setInterval(M,100))}function M(){var e=c(".overlay-content")?c(".overlay-content").length:0,t=c(".search-fields input")?c(".search-fields input").length:0;localStorage.setItem("overlayOpenFlg",!0),0<e&&(e=c(".overlay-content"),y=c.cookie("common.location.LOC")||"",(c(".overlay-content.overlay-postal-code")?c(".overlay-content.overlay-postal-code").length:0)<1&&e.addClass("overlay-postal-code"),y&&c(".search-fields input").val(y),0),0<t&&(c(".search-fields input").on("keyup",function(e){var t=c("#postal-code-search").val()||"",a=(c("#postal-code-search").val(t.trim().replace(/[^a-zA-Z0-9]/g,"")),c(this).val()||""),i=c(".postalError").css("display");8===e.keyCode&&""!==a&&a.length<3?c(".postalSuggestionWrapper").empty():13===e.keyCode&&"block"!==i&&!0!==r?O():40!==e.keyCode&&38!==e.keyCode&&13!==e.keyCode&&(/^\d+$/.test(t)?(c(".postalError").css("display","none"),3<=(a=(a=c(this)).val()?a.val():0).length&&(a=a,i=c("#global-market-configuration .configuration").data("iso3MarketCode")?c("#global-market-configuration .configuration").data("iso3MarketCode"):"",e=c(".config-api").data()?c(".config-api").data():"",c(".postalError").css("display","none"),r=!0,c.ajax({type:"GET",url:e.heremapapipc+"?resultType=postalCode&query="+a+"&country="+i+"&apiKey="+e.heremapkey,success:function(n){if(n){var o=Object.keys(n)?Object.keys(n).length:0,e=n.suggestions?n.suggestions.length:0,t="suggestions"===Object.keys(n)[0];if(0!==o&&0!==e&&t){{o=n;let e=o.suggestions||[],t="",a="",i=c(".postalSuggestionWrapper");i.find(".postal-suggestion")&&i.empty(),e.forEach(e=>{e&&e.address&&(a=e.address.postalCode||"",t+='<div class="postal-suggestion">'+a+"</div>")}),i.append(t)}1===n.suggestions.length?(E(n.suggestions[0].address.postalCode||""),c(".overlay-close").trigger("click")):c(".postalSuggestionWrapper .postal-suggestion").on("click",function(){E(c(this).text()),c(".overlay-close").trigger("click")}),r=!1}else H()}}}))):H())}),c(".overlay-postal-code .overlay-close i").removeClass("icon-plus").removeClass("icon-x").addClass("icon-thin-close"),"block"!==c(".postalError").css("display")&&!0!==r?c(".search-fields .icon-arrow").on("click",function(){3<c(".search-fields input").val().length&&(O(),setTimeout(()=>{c(".overlay-close").trigger("click")},200))}):c(".search-fields .icon-arrow").unbind("click"),clearInterval(a),clearInterval(b))}function O(){c(".overlay-content").hasClass("overlay-postal-code");var e=c("#postal-code-search").val();c(".postalcodeoverlay").html(e),t(e),setTimeout(()=>{c(".postalSuggestionWrapper").empty(),c(".overlay-close").trigger("click")},200),0}function t(e){var t=c("#usage-type-personal").is(":checked"),a=c("#usage-type-commercial").is(":checked");let i="P";t?i="P":a&&(i="B"),c.cookie("common.location.LOC",e,{path:"/"}),c.cookie("common.location.type",i,{path:"/"})}function E(e){c(".searchandicon input").val(e),c(".postalcodeoverlay").html(e),t(e),setTimeout(()=>{c(".search-fields input").focus(),c(".postalSuggestionWrapper").empty()},500)}function H(){c(".postalError").css("display","block"),c(".search-fields .icon-arrow").unbind("click")}return c(".postalcodeoverlay").on("click",function(){a=setInterval(M,100)}),e.init=function(){c(".main-nav").each(function(e,t){j(t)}),"br"==F.getCurrentMarketCode()&&c("body").addClass("br")},e}),define("main-navigation/component.vehicleMenu",["jquery","mediaQuery","configurationProvider","requestCacheManager","vehicleAttributeUtil","_","prices-display-configuration/component.prices-display-configuration","marketConfigGlobal"],function(D,d,t,e,a,i,n,P){var o,r={items:[]},C=D(".main-nav").hasClass("fds-header"),T="true"===D("#isAuthor").val();function l(e){var s=D(e),e=(t.get(s),D("#currentLocalePath").val()),S=D("#syndication-url").text();function c(){D("[data-nameplatecode]").on("keydown",function(e){13===e.keyCode&&e.target.href&&e.target.click()})}function x(e){var t="";if(null!=e&&""!=e){var a;new Array;if(!(1<(a=e.split(/\s+/)).length))return e;for(var i=0;i<a.length;i++)t+="<span style='white-space:nowrap;'>"+a[i]+"</span> "}return t}D.ajax({type:"GET",dataType:"json",url:e+"/.vehiclesmenu.data",success:function(e){(o?function(e){var a,y,t,i=s,b=(s.find(".tile"),""),w="",n=!1,o="",r="",l=document.querySelector(".site-link-chevron.site-link-open"),l=l&&l.querySelector("a"),l=l&&l.getAttribute("tabindex"),C=(parseInt(l),D("#navigation").attr("data-display-vehicle-price")),k="";y=D('<div class="fds-menu-item-details"><div class="fds-menu-content-wrapper"><div class="fds-menu-content"><div class="fds-menu-vehicles-container"></div></div></div></div>'),i.empty(),D.each(e,function(e,h){var f,g,t,v="vehicle_"+e;"mobile"===d.getMediaType()&&(g="hide-car-menu",t="close-menu"),a=D('<li class="fds-menu-list-item"></li>'),tabNav=D('<span><a href="#" class="fds-menu-item-link" data-nav="'+v+'" data-title="'+h.category+'">'+h.category+"</a></span>"),t=D('<div class="mobileInfo mobileTitle '+t+'" data-nav="'+v+'" data-title="'+h.category+'"><h4>'+h.category+"</h4></div>"),y.find(".fds-menu-vehicles-container").append(D(t)),a.append(tabNav),0===e&&a.addClass("active-fds-menu"),void 0!==h.actionButtons&&!1===n&&(o=D(h.actionButtons).children().first().text(),r=D(h.actionButtons).children().first().attr("href"),n=!0),void 0!==h.nameplates&&0<h.nameplates.length&&D.each(h.nameplates,function(e,t){var a,i,n,o,r,l,s,c,d,u,p="",m=t.exploreLabel||"Explore";tabVehicleMenuButtons='<div class="ctaWrapper"><a class="fds-primary-button small-fds-button" href="'+t.path+'"  > '+m+"</a></div>",tabVehicleMobileMenuButtons='<div class="btn-list"><a class="explore-btn fds-primary-button small-fds-button" href="'+t.path+'"  >'+m+"</a>",t.additionalCTA&&(tabVehicleMenuButtons+='<a href="'+t.additionalCTA+'" class="fds-primary-button fds-Secondary small-fds-button nopadding">'+t.additionalLabel+'<i class="icon-m-chevron-hover"></i></a>',tabVehicleMobileMenuButtons+='<a href="'+t.additionalCTA+'" class="fds-primary-button fds-Outline small-fds-button nopadding">'+t.additionalLabel+"</a></div>"),t.path&&(f=t.imgUrlHeader?(0!==S.length&&location.origin!==S&&t.imgUrlHeader&&!T&&(t.imgUrlHeader=S+t.imgUrlHeader,t.path=S+t.path),t.imgUrlHeader&&t.imgAltText?'<span class="fds-menu-vehicle"><picture class="fds-menu-picture"><img src="'+t.imgUrlHeader+'" alt="'+t.imgAltText+'" /></span>':t.imgUrlHeader?'<span class="fds-menu-vehicle"><picture class="fds-menu-picture"><img src="'+t.imgUrlHeader+'" alt="'+t.name+'" /></span>':'<span class="fds-menu-vehicle"><picture class="fds-menu-picture"><img src="" alt="'+t.name+'" /></span>'):(0!==S.length&&location.origin!==S&&t.image&&!T&&(t.image=S+t.image,t.path=S+t.path),t.image&&t.imgAltText?'<span class="fds-menu-vehicle"><picture class="fds-menu-picture"><img src="'+t.image+'" alt="'+t.imgAltText+'" /></span>':t.image?'<span class="fds-menu-vehicle"><picture class="fds-menu-picture"><img src="'+t.image+'" alt="'+t.name+'" /></span>':'<span class="fds-menu-vehicle"><picture class="fds-menu-picture"><img src="" alt="'+t.name+'" /></span>'),void 0!==t.attributeItemModels&&(m=t.currency,d=t.attributeItemModels[0].prefix,u=t.attributeItemModels[0].suffix,c=s=l=r=o=n=i=a="",void 0!==d&&(b='<span class="make-prefix">'+d+"</span>"),void 0!==u&&(w='<span class="make-suffix">'+u+"</span>"),void 0!==t.pricing&&(void 0!==t.pricing.min&&(a=m+'<span class="value">'+t.pricing.min.priceVat+"</span>"),void 0!==t.pricing.max&&(i=m+'<span class="value">'+t.pricing.max.priceVat+"</span>"),void 0!==t.pricing.promotional&&(n=m+'<span class="value">'+t.pricing.promotional.priceVat+"</span>"),void 0!==t.pricing.retail)&&(o=m+'<span class="value">'+t.pricing.retail.priceVat+"</span>"),D.each(t.attributeItemModels,function(e,t){if(void 0!==t.attributeId)switch(t.attributeId){case"price-maximal":r='<div class="make-info">'+b+'<span class="make-price">'+i+"</span>"+w+"</div>";break;case"price-promotional":l='<div class="make-info">'+b+'<span class="make-price">'+n+"</span>"+w+"</div>";break;case"price-retail":s='<div class="make-info">'+b+'<span class="make-price">'+o+"</span>"+w+"</div>";break;case"price-min":c='<div class="make-info">'+b+'<span class="make-price">'+a+"</span>"+w+"</div>"}p=s+l+c+r})),d="cn"==P.getCurrentMarketCode()?x(t.name):t.name,"true"==C&&(u=D("li.configuration").attr("data-starting-at-label"),k='<span class="model-price">'+u+"<br/>"+t.pricing.min.priceVat+"</span>"),m=t.blurbIcon?"inline-block":"none",mobileVehicleTile='<div class="mobileInfo"><span class="fds-menu-vehicle-wrapper"><a href="'+t.path+'" class="fds-vehicle-img" tabindex="-1">'+f+'</a><div class="ctaWrapper"><div class="badges-container only-mobile"><img class="blurb-icon" style="display:'+m+'" src="'+t.blurbIcon+'"><span class="blurb-message">'+t.blurbMessage+'</span></div><div><span class="fds-menu-vehicle-details"><a href="'+t.path+'"><span class="fds-menu-vehicle-name">'+d+"</span></a>"+k+"</span></div>"+tabVehicleMobileMenuButtons+"</div></span></div>",f='<div class="fds-menu-vehicle-block '+h.category+" "+v+" "+g+'" data-nameplatecode="'+t.code+'"><div class="badges-container only-desktop"><img class="blurb-icon" style="display:'+m+'" src="'+t.blurbIcon+'"><span class="blurb-message">'+t.blurbMessage+'</span></div><span class="fds-menu-vehicle-wrapper hideForMobile"><a href="'+t.path+'" tabindex="-1">'+f+'</a><span class="fds-menu-vehicle-details"><a href="'+t.path+'"><span class="fds-menu-vehicle-name">'+d+"</span></a>"+k+"</span>"+tabVehicleMenuButtons+"</span>"+mobileVehicleTile+p+"</div>"),y.find(".fds-menu-vehicles-container").append(D(f))}),i.append(a)}),d.mobile.matches?(""!==r&&""!==o&&(t=D('<div class="mobileInfo mobileTitle close-menu"><a href='+r+"><h4>"+o+"</h4></a></div>")),y.find(".fds-menu-vehicles-container").append(D(t))):(""!==r&&""!==o&&(t=`<li class='fds-menu-list-item'><span><a href='${r}'> ${o} </a></span></li>`),i.append(t));D(".fds-menu-section").append(y),c(),D(".fds-menu-item-link").click(function(e){e.preventDefault(),D(this).trigger("vehicleMenuBuilt"),D(".fds-menu-list").find(".fds-menu-list-item").removeClass("active-fds-menu"),D(this).parents().eq(1).addClass("active-fds-menu"),D(".fds-menu-vehicles-container").find(".fds-menu-vehicle-block").addClass("hide-fds-menu"),menuCategory=(menuCategory=(menuCategory=D(this).attr("data-nav")).replace(/\s/g,"")).replace(/[&\/\\#+()$.'":*?]/g,""),D("."+menuCategory).removeClass("hide-fds-menu")}),D(".fds-menu-item-link:visible:first").trigger("click"),D(this).trigger("vehicleMenuBuilt"),D(".category").removeClass("loading-vehiclemenu"),D(".full-screen-container").addClass("hide-menu").removeClass("show-menu")}:function(e){var a,g,i=s,v=(s.find(".tile"),""),y="",t=document.querySelector(".site-link-chevron.site-link-open"),t=t&&t.querySelector("a"),t=t&&t.getAttribute("tabindex"),n=parseInt(t)+1,b=D("#navigation").attr("data-display-vehicle-price"),w="";D.each(e,function(e,t){var f;a=D('<li class="vehicle-menu-item"></li>'),tabNav=D('<a href="javascript:void(0);" class="vehicle-menu-item-title" tabindex="'+n+'">'+t.category+"</a>"),g=D('<div class="vehicle-menu-content accordion-mobile"><div class="vehicle-tiles"></div></div>'),a.append(tabNav),0===e&&a.addClass("is-active"),C&&(t.actionButtons=t.actionButtons.replace("cta-button cta-button-primary","fds-primary-button fds-dark fds-chevron-light-anywhere")),0!==S.length&&location.origin!==S&&void 0!==t.actionButtons?(e=((e,t)=>{var a=D(e),i="";for(let e=0;e<a.length;e++){var n=a[e];if(n.children){for(let e=0;e<n.children.length;e++)"A"===n.children[e].tagName&&n.children[e].attributes.href.value.startsWith("/content")&&(n.children[e].href=t+n.children[e].attributes.href.value);i+=n.outerHTML}}return i})(t.actionButtons,S),t.actionButtons=e,tabVehicleMenuButtons=D('<div class="richtext vehicle-menu-buttons">'+t.actionButtons+"</div>"),g.append(tabVehicleMenuButtons)):void 0!==t.actionButtons&&(tabVehicleMenuButtons=D('<div class="richtext vehicle-menu-buttons">'+t.actionButtons+"</div>"),g.append(tabVehicleMenuButtons)),void 0!==t.nameplates&&0<t.nameplates.length&&D.each(t.nameplates,function(e,t){var a,i,n,o,r,l,s,c,d,u,p,m,h="";t.path&&(f=t.imgUrlHeader?(0!==S.length&&location.origin!==S&&t.imgUrlHeader&&!T&&(t.imgUrlHeader=S+t.imgUrlHeader,t.path=S+t.path),t.imgUrlHeader&&t.imgAltText?'<span class="vehicle-img"><img class="model-shot" src="'+t.imgUrlHeader+'" alt="'+t.imgAltText+'" /></span>':t.imgUrlHeader?'<span class="vehicle-img"><img class="model-shot" src="'+t.imgUrlHeader+'" alt="'+t.name+'" /></span>':'<span class="vehicle-img"><img class="model-shot" src="" alt="'+t.name+'" /></span>'):(0!==S.length&&location.origin!==S&&t.image&&!T&&(t.image=S+t.image,t.path=S+t.path),t.image&&t.imgAltText?'<span class="vehicle-img"><img class="model-shot" src="'+t.image+'" alt="'+t.imgAltText+'" /></span>':t.image?'<span class="vehicle-img"><img class="model-shot" src="'+t.image+'" alt="'+t.name+'" /></span>':'<span class="vehicle-img"><img class="model-shot" src="" alt="'+t.name+'" /></span>'),void 0!==t.attributeItemModels&&(p=t.currency,d=t.attributeItemModels[0].prefix,u=t.attributeItemModels[0].suffix,c=s=l=r=o=n=i=a="",void 0!==d&&(v='<span class="make-prefix">'+d+"</span>"),void 0!==u&&(y='<span class="make-suffix">'+u+"</span>"),void 0!==t.pricing&&(void 0!==t.pricing.min&&(a=p+'<span class="value">'+t.pricing.min.priceVat+"</span>"),void 0!==t.pricing.max&&(i=p+'<span class="value">'+t.pricing.max.priceVat+"</span>"),void 0!==t.pricing.promotional&&(n=p+'<span class="value">'+t.pricing.promotional.priceVat+"</span>"),void 0!==t.pricing.retail)&&(o=p+'<span class="value">'+t.pricing.retail.priceVat+"</span>"),D.each(t.attributeItemModels,function(e,t){if(void 0!==t.attributeId)switch(t.attributeId){case"price-maximal":r='<div class="make-info">'+v+'<span class="make-price">'+i+"</span>"+y+"</div>";break;case"price-promotional":l='<div class="make-info">'+v+'<span class="make-price">'+n+"</span>"+y+"</div>";break;case"price-retail":s='<div class="make-info">'+v+'<span class="make-price">'+o+"</span>"+y+"</div>";break;case"price-min":c='<div class="make-info">'+v+'<span class="make-price">'+a+"</span>"+y+"</div>"}h=s+l+c+r})),d="cn"==P.getCurrentMarketCode()?x(t.name):t.name,u=D("li.configuration").attr("data-starting-at-label"),"true"==b&&(w='<span class="model-price">'+u+"<br/>"+t.pricing.min.priceVat+"</span>"),p=t.blurbIcon?"inline-block":"none",m="",C&&(t.exploreLabel.length&&t.path.length&&(m=`
                  <div class="form-cancel fdsButton column">
                      <a href="${t.path}" class="fds-secondary-button fds-dark">  
                          ${t.exploreLabel}
                          <div class="fds-chevron fds-chevron-right"></div>
                      </a>
                  </div>
                  `),D("li.configuration").attr("data-starting-at-label").length)&&(w='<span class="model-price">'+u+" "+t.pricing?.min?.priceVat+"</span>"),f='<div class="tile small-12 large-2" data-nameplatecode="'+t.code+'"><div class="badges-container non-fds-badge"><img class="blurb-icon" style="display:'+p+'" src="'+t.blurbIcon+'"><span class="blurb-message">'+t.blurbMessage+'</span></div><a href="'+t.path+'" tabindex="-1">'+f+'<div class="info"><div class="title-container"><h3 class="model-title"><span class="model-name">'+d+"</span>"+w+m+"</h3>"+h+"</div></div></a></div>"),g.find(".vehicle-tiles").append(D(f))}),a.append(g),i.append(a)}),c(),D(this).trigger("vehicleMenuBuilt")})(e)},error:function(){s.addClass("service-error")}})}return r.init=function(){},r.getVehicleMenu=function(){(o=D("#menu-fds").attr("data-menufds"))?D(".fds-menu-list").each(function(e,t){D(this).hasClass("js-built")?(D(".category").removeClass("loading-vehiclemenu"),D(".full-screen-container").addClass("hide-menu").removeClass("show-menu")):(r.items.push(new l(t)),D(this).addClass("js-built"))}):D(".vehicle-menu").each(function(e,t){D(this).hasClass("js-built")||(r.items.push(new l(t)),D(this).addClass("js-built"))})},r}),define("box/component.box",["jquery","configurationProvider","mediaQuery"],function(r,n,o){var e={};a();var t=r(".common-box").children(".box-data.sticky");function a(){r(".common-box").each(function(){var e=r(window).width(),t=r(this),a=t.children(".box-data"),i=t.children(".box-image"),n=t.children(".box-content"),o=n.children(".feature-container");boxLayoutDesktop=r(".box-data[data-box-layout-desktop]"),boxLayoutMobile=r(".box-data[data-box-layout-mobile]"),dataBoxLayoutDesktop=a.data("box-layout-desktop"),dataBoxLayoutMobile=a.data("box-layout-mobile"),htDesktop=a.data("height-desktop"),htMobile=a.data("height-mobile"),valHtDesktop="height:"+htDesktop,valHtMobile="height:"+htMobile,bgColor=a.data("bgcolor"),stickyDesktop=a.data("sticky-desktop"),stickyMobile=a.data("sticky-mobile"),marginDesktop=a.data("margin-desktop"),marginMobile=a.data("margin-mobile"),imgDataPosXDesktop=i.data("pos-x-desktop"),imgDataPosYDesktop=i.data("pos-y-desktop"),imgDataPosXMobile=i.data("pos-x-mobile"),imgDataPosYMobile=i.data("pos-y-mobile"),txtPaddingDesktop=o.data("padding-desktop"),txtPaddingMobile=o.data("padding-mobile"),allPosition="align-left align-center align-right align-top align-middle align-bottom",txtDataPosXDesktop=n.data("pos-x-desktop"),txtDataPosYDesktop=n.data("pos-y-desktop"),txtDataPosXMobile=n.data("pos-x-mobile"),txtDataPosYMobile=n.data("pos-y-mobile"),t.addClass(bgColor),0===i.length?a.parent().addClass("no-bgimage"):a.parent().addClass("with-bgimage"),767<e?(a.addClass(stickyDesktop),"auto"===a.data("height-desktop")?(a.parent().addClass("no-height"),a.parent().removeClass("with-height")):(a.parent().removeClass("no-height"),a.parent().addClass("with-height")),boxLayoutDesktop.parent(".common-box").addClass(dataBoxLayoutDesktop),1<=r(".box-data[data-margin-desktop]").length?t.attr("style",valHtDesktop+";"+marginDesktop):t.attr("style",valHtDesktop+";"),i.addClass(imgDataPosXDesktop),i.addClass(imgDataPosYDesktop),n.removeClass(allPosition),n.addClass(txtDataPosXDesktop).addClass(txtDataPosYDesktop),o.attr("style",txtPaddingDesktop)):(a.addClass(stickyMobile),"auto"===a.data("height-mobile")?(a.parent().addClass("no-height"),a.parent().removeClass("with-height")):(a.parent().removeClass("no-height"),a.parent().addClass("with-height")),boxLayoutMobile.parent(".common-box").addClass(dataBoxLayoutMobile),1<=r(".box-data[data-margin-mobile]").length?t.attr("style",valHtMobile+";"+marginMobile):t.attr("style",valHtMobile+";"),i.addClass(imgDataPosXDesktop),i.addClass(imgDataPosYDesktop),n.removeClass(allPosition),n.addClass(txtDataPosXMobile).addClass(txtDataPosYMobile),o.attr("style",txtPaddingMobile))})}return t.length&&(t.removeClass("sticky"),t.parent(".common-box").addClass("sticky")),r(window).scroll(function(){var e,t,a,i=r(".main-nav").first(),i=(i.length&&i.height(),r(".common-box.sticky"));i.length&&(e=r(".box-anchor"),t=r(this).scrollTop(),a=i.outerHeight(),e.length||i.before('<div class="box-anchor"></div>'),t>r(".box-anchor").offset().top?(i.addClass("stickIt").css("top",0),e.height(a)):(i.removeClass("stickIt").css("top",0),e.remove()))}),r(window).resize(function(){setTimeout(function(){a()},500)}),e.init=function(){r(".box").each(function(e,t){var a,i;a=(t=r(t=t)).find(".box-content"),i=n.get(t),t=t.find(".feature-container"),i.backgroundImage&&a.attr("style",'background-image: url("'+i.backgroundImage+'");background-repeat: no-repeat'),"mobile"==o.getMediaType()&&t.attr("style",t.attr("data-style-mobile"))})},e}),define("generic-carousel/component.genericCarousel",["jquery","jquery-flexslider","fordjs","configurationProvider"],function(n,e,t,l){var s=null!==document.ontouchstart?"click":"touchstart";function a(e){var e=n(e),o=e.find(".carousel"),t=!1,a=0,r=l.get(e),e={controlsContainer:o.find("> .carousel-controls"),selector:".slide-container > .carousel-slide",animation:"slide",directionNav:!1,pauseOnHover:!0,slideshow:!1,start:function(e){e.resize(),e.find(".carousel-previous").addClass("inactive")},end:function(){a++},before:function(e){e.find(".carousel-btn").removeClass("inactive"),0==e.animatingTo&&e.find(".carousel-previous").addClass("inactive");e.animatingTo==e.count-1&&e.find(".carousel-next").addClass("inactive")},keyboard:!1,after:function(e){!t&&0==e.currentSlide&&1<=a&&(e.vars.slideshow=!1,e.flexslider("stop"))}};function i(){t=!0,o.flexslider("stop")}o.find(".heading a").each(function(e,t){n(t).attr("tabIndex","-1")}),o.flexslider(n.extend(e,r)),o.find(".carousel-previous").on(s,function(e){n(e.target).closest(".carousel").flexslider("prev"),i()}),o.find(".carousel-next").on(s,function(e){n(e.target).closest(".carousel").flexslider("next"),i()}),o.on("click",function(){i()}),o.on("keydown",function(e){var t=e.keyCode||e.which,a=o.data("flexslider");function i(){a.currentSlide===a.slides.length-1&&!0!==r.keyEventLoop||(o.flexslider("next"),e.preventDefault())}function n(){0===a.currentSlide&&!0!==r.keyEventLoop||(o.flexslider("prev"),e.preventDefault())}9===t&&(o.flexslider("stop"),(e.shiftKey?n:i)()),39===t&&(o.flexslider("stop"),i()),37===t&&(o.flexslider("stop"),n())})}return t.registerComponent(t={name:"genericCarousel",selector:".genericCarousel",init:function(e){a(e)}}),t}),define("dynamicCarousel/component.dynamicCarousel",["jquery","jquery-flexslider","configurationProvider"],function(r,e,l){var t={},s=null!==document.ontouchstart?"click":"touchstart";function a(e){var e=r(e),o=e.find(".carousel"),t=!1,a=0,i={controlsContainer:o.find("> .carousel-controls"),selector:".slide-container > .carousel-slide",animation:"slide",directionNav:!1,pauseOnHover:!0,slideshow:!1,start:function(e){e.resize(),e.find(".carousel-previous").addClass("inactive")},end:function(e){a++},before:function(e){e.find(".carousel-btn").removeClass("inactive"),0==e.animatingTo&&e.find(".carousel-previous").addClass("inactive"),e.animatingTo==e.count-1&&e.find(".carousel-next").addClass("inactive")},after:function(e){!t&&0==e.currentSlide&&1<=a&&(e.vars.slideshow=!1,e.flexslider("stop"))}};function n(){t=!0,o.flexslider("stop")}o.find(".heading a").each(function(e,t){r(t).attr("tabIndex","-1")}),dataConfig=l.get(e),o.flexslider(r.extend(i,dataConfig)),o.find(".carousel-previous").on(s,function(e){r(e.target).closest(".carousel").flexslider("prev"),n()}),o.find(".carousel-next").on(s,function(e){r(e.target).closest(".carousel").flexslider("next"),n()}),o.on("click",function(){n()}),o.on("keydown",function(e){var t=e.keyCode||e.which,a=o.data("flexslider");function i(){a.currentSlide===a.slides.length-1&&!0!==dataConfig.keyEventLoop||(o.flexslider("next"),e.preventDefault())}function n(){0===a.currentSlide&&!0!==dataConfig.keyEventLoop||(o.flexslider("prev"),e.preventDefault())}9===t&&(o.flexslider("stop"),(e.shiftKey?n:i)()),39===t&&(o.flexslider("stop"),(e.shiftKey?n:i)()),37===t&&(o.flexslider("stop"),(e.shiftKey?i:n)())})}function i(e){var t=r(e),i=r(t.find(".slide-container").get(0)),n=r(t.find(".slide-template .carousel-slide").get(0)),e=t.find(".configuration");e&&e.data("endpoint")&&r.when(r.get(e.data("endpoint"),function(e){for(var t=0;t<e.beautyShot.length;t++)i.append(n.clone());var a=i.find(".billboard img");r.each(e.beautyShot,function(e,t){r(a[e]).attr("src",t)})})).then(function(){a(t)})}return t.init=function(e){void 0!==e?i(e):r(".dynamicCarousel").each(function(e,t){i(t)})},t}),define("billboard-carousel/component.billboardCarousel",["jquery","mediaQuery","jquery-flexslider","configurationProvider"],function(v,e,t,y){var a={},b=v(".common-billboardCarousel"),w=null!==document.ontouchstart?"click":"touchstart",C=!!/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent);function n(e){var t,a,e=v(e),i=e.find(".carousel"),n=!1,o=0,r=0,l=i.find(".brightcove").length<=0,l={controlsContainer:i.find("> .carousel-controls"),selector:".slide-container > .carousel-slide",animationLoop:l,animation:"slide",directionNav:!1,slideshow:!1,pausePlay:!0,pauseText:"",playText:"",start:function(e){e.resize(),k(),o=e.currentSlide+1,"true"===v(e).parents(".common-billboardCarousel").attr("data-play-control")&&v(e).parents(".common-billboardCarousel").find(".carousel .playPause").length&&(v(e).find(".carousel-controls").prepend(v(".flex-pauseplay")),v(e).find(".flex-viewport").append(v(".common-billboardCarousel .carousel-arrows")),v(e).find(".flex-viewport").append(v(".carousel-controls")));"true"==v(e).parents(".common-billboardCarousel").attr("data-include-boxshadow")&&v(e).find(".flex-viewport").addClass("includeBoxShadow");u()},end:function(e){r++},before:function(e){e.find(".carousel-btn").removeClass("inactive"),0==e.animatingTo&&e.find(".carousel-previous").addClass("inactive"),e.animatingTo==e.count-1&&e.find(".carousel-next").addClass("inactive")},keyboard:!0,after:function(e){o=e.currentSlide+1,!n&&0==e.currentSlide&&1<=r&&(e.vars.slideshow=!1);k(),!v("[data-attribute-aa=isActiveAAEnhancement]").length&&1020<!v(window).width()&&u();(()=>{var e=document.querySelectorAll(".common-billboardCarousel .carousel-slide");e&&[].slice.call(e).forEach(function(e){e.classList&&-1<[].slice.call(e.classList).indexOf("flex-active-slide")?(e.getAttribute("tabindex")<0&&p(e,!0,0),s&&p(e,!1)):p(e,!0,-1)})})(),!s||v(".teaser-cta a:visible")[o]&&v(".teaser-cta a:visible")[o].focus();"true"===v(e).parents(".common-billboardCarousel").attr("data-billboard-fds")&&(e.find("#fdsCurrentPage").html(o),1<o&&o<t?(e.find(".carousel-previous.fds-disable-arrow").removeClass("fds-disable-arrow"),e.find(".carousel-next.fds-disable-arrow").removeClass("fds-disable-arrow")):o===t?(e.find(".carousel-next").addClass("fds-disable-arrow"),e.find(".carousel-previous.fds-disable-arrow").removeClass("fds-disable-arrow")):1===o&&(e.find(".carousel-previous").addClass("fds-disable-arrow"),e.find(".carousel-next.fds-disable-arrow").removeClass("fds-disable-arrow")))}},s=!1;function c(){n=!0}a=-1,i.find(".teaser-cta a").each(function(e,t){v(t).attr("tabIndex",a)}),dataConfig=y.get(e),1===(t=i.find(".carousel-slide").length)&&(l=v.extend(l,{touch:!1,animationLoop:!1})),i.flexslider(v.extend(l,dataConfig)),i.find(".carousel-previous").on(w,function(e){v(e.target).closest(".carousel").flexslider("prev"),c()}),i.find(".carousel-next").on(w,function(e){v(e.target).closest(".carousel").flexslider("next"),c()}),i.find(".carousel-previous").on("keyup",function(e){s=!0,13===e.keyCode&&(e.preventDefault(),e.target.click())}),i.find(".carousel-next").on("keyup",function(e){s=!0,13===e.keyCode&&(e.preventDefault(),e.target.click())}),i.find(".teaser-cta a").on("keyup",function(e){s=!0;var t=document.querySelector(".flex-pause"),a=v(".flex-pauseplay a");t&&a.click(),/MSIE \d|Trident.*rv:/.test(navigator.userAgent)&&!a.hasClass("off")&&a.toggleClass("off"),13===e.keyCode&&(e.preventDefault(),e.target.click())}),i.on("click",function(e){c()});l=i.find(".flex-active-slide").find("img.lazyload");function d(){v(".flex-viewport .carousel-slide").each(function(){0<v(this).find(".brightcove-player").length&&v(this).find(".pausepl").trigger("click")}),setTimeout(function(){v(".flex-viewport .carousel-slide").each(function(){var e,t,a=v(this);a.hasClass("flex-active-slide")&&0<a.find(".brightcove-player").length&&(e=0<a.find(".brightcove-player").find(".start-image img").length,t=0<a.find(".brightcove-player").find(".end-image img").length,e&&a.find(".start-image").trigger("click"),t)&&a.find(".end-image a").trigger("click")})},2e3)}function u(){var t,e=document.querySelectorAll(".flex-control-nav a");e&&(e=[].slice.call(e),t=0,e.forEach(function(e){e.setAttribute("tabindex",0),e.setAttribute("id",t++)}))}function p(e,t,a){e=e.getElementsByTagName("a")&&e.getElementsByTagName("a")[0];e&&t&&e.setAttribute("tabindex",a)}0<l.length&&l[0].addEventListener&&l[0].addEventListener("load",function(e){k(),this.removeEventListener&&this.removeEventListener("load",function(e){e.preventDefault})}),v(window).bind("resize",function(){setTimeout(function(){k()},500)}),v(document).ready(function(){setTimeout(function(){k(),d()},500)}),v(".carousel-next, .carousel-previous, .flex-control-nav a").on("click",function(){d()}),v(".flex-control-nav li").on("click",function(e){s=!1}),v(".flex-control-nav a").on("keyup",function(e){e.preventDefault();var t=this.getAttribute("id"),t=parseInt(t);13!==e.keyCode||isNaN(t)||""===t||(v(".carousel").data("flexslider").flexslider(t),s=!0,e.target.click()),e.stopImmediatePropagation()}),i.on("keyup",function(e){console.log(e,"something"),document.querySelector(".carousel-arrows").style.right=0});var m,h,f,l=window.innerWidth,i=window.innerHeight;function g(){var e=v(window).width()<767,t=v(window).height(),a=f.find(".flex-active-slide .component-content img").height(),i=a-35;e?f.find(".indicator-visible").hide():a<t?(f.find(".indicator-visible").removeClass("indicator-fixed"),f.find(".indicator-visible").css("top",i)):f.find(".indicator-visible").addClass("indicator-fixed")}b.each(function(e){m=v(this).attr("data-indicator")}),!C&&991<l&&i<901&&"on"===m?(f=e,h=v('<div class="indicator indicator-visible"></div>'),v(window).load(function(e){var t;f.addClass("visual-indicator"),h.appendTo(f),g(),1===(t=v(".cookie-disclaimer")).length&&t.children(".close").on("click",function(e){e.preventDefault,v(".indicator-visible").removeClass("indicator-fixed")})}),v(window).resize(function(){setTimeout(function(){g()},500)}),v(window).scroll(function(){84<v(window).scrollTop()?(f.removeClass("visual-indicator"),f.children(".indicator").removeClass("indicator-visible")):(f.addClass("visual-indicator"),f.children(".indicator").addClass("indicator-visible"))})):(f=v(".billboardCarousel")).removeClass("visual-indicator"),b.each(function(e){var t=v(this).attr("data-margin-mobile"),a=v(this).attr("data-margin-desktop");768<v(window).width()?v(this).attr("style",a):v(this).attr("style",t)})}function i(){var e=b.find(".billboard-paragraph.pos-under");v(".common-billboardCarousel.is-under");e.parents(".common-billboardCarousel").addClass("is-under")}function o(){var e=b.find(".billboard-paragraph.pos-above");e.parents(".common-billboardCarousel").addClass("is-above"),e.parents(".billboardCarousel").addClass("indicator-above")}function r(){var e=b.find(".brightcove-player .outer-container"),t=e.data("style");e.attr("style",t)}function k(){v(".billboardCarousel").each(function(){var e=v(this).find(".carousel-controls"),t=v(this).find(".flex-active-slide .component-content").height();v(this).find(".common-billboard .billboard-inner").hasClass("under")?C?v(e).css("top",t-45):v(e).css("top",t-10):v(e).css("top",t-v(e).outerHeight())})}return i(),o(),r(),v(window).resize(function(){setTimeout(function(){i(),o(),r()},10)}),a.init=function(e){var t=b.attr("data-show-fds-billboard-arrow");"true"!==(C?b.attr("data-vertical-scroll-mobile-fds"):b.attr("data-vertical-scroll-desktop-fds"))?void 0!==e?n(e):v(".billboardCarousel").each(function(e,t){var a,i;0===e&&0!==v(this).find("#activateCarouselLoad").length?(a=v(".carousel").hide(),i=[],v(".carousel").find("img"),e=v(".carousel").find("picture"),v(".carousel").find("picture:first").clone().addClass("carousel-img").insertBefore(a),e.length&&e.each(function(){var e=v(this),t=e.find("source"),a="";t.length&&t.each(function(){var e=v(this),t=e.attr("media");if(window.matchMedia(t).matches)return a=e.data("srcset"),!1}),a&&(t=v.Deferred(),e.find("img").one("load",t.resolve).attr("src",a).attr("data-src",""),i.push(t.promise()))}),v.when.apply(v,i).done(function(){v(".carousel-img").remove(),a.show(),n(t)})):n(t)}):(v(".billboardCarousel .carousel-slide").css("display","block"),v(".billboardCarousel .carousel-arrows").css("display","none"),v(".billboardCarousel .carousel-slide:first-child").css("position","relative"),e='<div class="vertical-scroll-arrow-down '+t+'"><div class="vertical-scroll-arrow-line"></div><div class="vertical-scroll-icon-thin-down"></div></div>',v(".billboardCarousel .carousel-slide:first-child").append(e),v(".carousel").find(".vertical-scroll-arrow-down").on("click",function(){var e=v(this).closest(".carousel-slide").next();v("html, body").animate({scrollTop:v(this).scrollTop()+e.offset().top},700)})),v(".video-single").wrap('<div class="brightcove section"></div>')},a}),define("billboard-carousel/component.imageCarousel",["jquery","jquery-flexslider","configurationProvider","billboard-carousel/component.billboardCarousel"],function(o,e,t,a){var i={};function s(e,t,a){e=e.find(".billboard").first().outerHeight();t.css({top:e}),a.css({top:(e-a.outerHeight())/2})}function c(e,t){e=e.find(".billboard").first().outerHeight();t.css({top:e-30})}function r(e,n,o,r){var l=e.find(".flex-active-slide"),e=window.MutationObserver||window.WebKitMutationObserver;e?new e(function(){s(l,n,o),c(l,r)}).observe(l.get(0),{childList:!0,characterData:!0,attributes:!0,subtree:!1,attributeFilter:["style"]}):l.get(0).attachEvent("onpropertychange",function(){var e,t,a,i;t=n,a=o,i=(i=(e=l).find(".billboard img").get(0)).naturalHeight/i.naturalWidth,e=e.outerWidth()*i,t.css({top:e}),a.css({top:(e-a.outerHeight())/2}),c(l,r)})}return i.init=function(){o(".image-carousel").each(function(){var e,t,a,i,n;a=(e=o(e=this)).find("> .carousel-controls"),i=e.find("> .carousel-arrows"),n=e.find(".carousel-disclaimer"),s(e.find(".flex-active-slide"),a,i),t=i,a.css({visibility:"visible"}),t.css({visibility:"visible"}),r(e,a,i,n)})},i}),define("incentives-offers-billboard/component.incentivesOffersBillboard",["jquery","jquery-flexslider","configurationProvider"],function(n,e,t){var a={},i=null!==document.ontouchstart?"click":"touchstart",o=n(".nonCarouselType .nonCarousel").attr("data-non-carousel-link"),r=("nonCarouselType"===n(".nonCarouselType .nonCarousel").attr("data-iob-type")&&(n(".nonCarouselType #iobButton1 a").attr("href",o),n(".nonCarouselType #iobButton1").click(function(){n(".nonCarouselType #iobToggle1").css({left:"0"}),n(".nonCarouselType #iobToggle2").css({display:" none"}),n(".nonCarouselType #iobToggle3").css({display:" none"})})),n(".iob1 img"));r.one("load",function(){var e=r.height(),t=e+"px",a="-"+e+"px";n(".iob , #iobToggle2").css({height:t,"min-height":t}),n(".iob , #iobToggle3").css({height:t,"min-height":t}),n(".carouselType").find("#iobButton1").click(function(){n(".carouselType  #iobToggle1").css({left:"-100%"}),n(".carouselType  #iobToggle2").css({top:a,left:"0"}),n(".carouselType  #iobToggle3").css({top:a,left:"0"})})}).each(function(){this.complete&&n(this).load()}),n(".iob1").allLazyLoaded().on("containerlazyloaded",function(){n(this).find("img").each(function(){var e,t,a;this.complete&&(t=(e=n(this).height())+"px",a="-"+e+"px",n(".iob , #iobToggle2").css({height:t,"min-height":t}),n(".iob , #iobToggle3").css({height:t,"min-height":t}),n(".carouselType").find("#iobButton1").click(function(){n(".carouselType  #iobToggle1").css({left:"-100%"}),n(".carouselType  #iobToggle2").css({top:a,left:"0"}),n(".carouselType  #iobToggle3").css({top:a,left:"0"})}))})}),n(".carouselType").find("#iobButton2").click(function(){n(".carouselType").find("#iobToggle2").css({left:" 100%"}),n(".carouselType").find("#iobToggle1").css({left:"0"})}),n(".carouselType").find("#iobButton3").click(function(){n(".carouselType").find("#iobToggle3").css({left:" 100%"}),n(".carouselType").find("#iobToggle1").css({left:"0"})});var l,s,o=n(".common-incentivesOffersBillboard"),c=o.find(".carousel"),d={controlsContainer:c.find("> .carousel-controls"),selector:".slide-container > .carousel-slide",animation:"slide",directionNav:!1,pauseOnHover:!0,slideshow:!0,start:function(e){e.resize(),e.find(".carousel-previous").addClass("inactive");var t=e.find(".carousel-controls"),e=e.find(".flex-active-slide .component-content").height();n(t).css("top",e-n(t).outerHeight()-20)},end:function(e){0},before:function(e){e.find(".carousel-btn").removeClass("inactive"),0==e.animatingTo&&e.find(".carousel-previous").addClass("inactive"),e.animatingTo==e.count-1&&e.find(".carousel-next").addClass("inactive")},keyboard:!1};function u(){c.flexslider("stop")}function p(){var e=n(window).width()<767,t=n(window).height(),a=l.find(".flex-active-slide .component-content img").height(),i=a-35;e?l.find(".indicator-visible").hide():a<t?(l.find(".indicator-visible").removeClass("indicator-fixed"),l.find(".indicator-visible").css("top",i)):l.find(".indicator-visible").addClass("indicator-fixed")}return c.find(".heading a").each(function(e,t){n(t).attr("tabIndex","-1")}),dataConfig=t.get(o),1==c.find(".carousel-slide").length&&(d=n.extend(d,{touch:!1,animationLoop:!1})),c.flexslider(n.extend(d,dataConfig)),c.find(".carousel-previous").on(i,function(e){n(e.target).closest(".carousel").flexslider("prev"),u()}),c.find(".carousel-next").on(i,function(e){n(e.target).closest(".carousel").flexslider("next"),u()}),c.on("click",function(){u()}),n(window).bind("resize",function(){setTimeout(function(){var e=c.find(".carousel-controls"),t=c.find(".flex-active-slide .component-content").height();n(e).css("top",t-n(e).outerHeight()-20)},500)}),c.on("keydown",function(e){var t=e.keyCode||e.which,a=c.data("flexslider");function i(){a.currentSlide===a.slides.length-1&&!0!==dataConfig.keyEventLoop||(c.flexslider("next"),e.preventDefault())}function n(){0===a.currentSlide&&!0!==dataConfig.keyEventLoop||(c.flexslider("prev"),e.preventDefault())}9===t&&(c.flexslider("stop"),(e.shiftKey?n:i)()),39===t&&(c.flexslider("stop"),i()),37===t&&(c.flexslider("stop"),n())}),!!/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent)?(l=n(".billboardCarousel")).removeClass("visual-indicator"):(l=o,s=n('<div class="indicator indicator-visible"></div>'),n(window).load(function(e){var t;l.addClass("visual-indicator"),l.append(s),s.appendTo(l),p(),1===(t=n(".cookie-disclaimer")).length&&t.children(".close").on("click",function(e){e.preventDefault,n(".indicator-visible").removeClass("indicator-fixed")})}),n(window).resize(function(){setTimeout(function(){p()},500)}),n(window).scroll(function(){84<n(window).scrollTop()?(l.removeClass("visual-indicator"),l.children(".indicator").removeClass("indicator-visible")):(l.addClass("visual-indicator"),l.children(".indicator").addClass("indicator-visible"))})),n(".common-incentivesOffersBillboard > .indicator").hide(),n(".common-incentivesOffersBillboard .carousel .carousel-arrows").removeAttr("style"),a.init=function(e){void 0!==e?initOne(e):n(".incentivesOffersBillboard").each(function(e,t){initOne(t)})},a}),define("media-carousel/component.mediaCarousel",["jquery","jquery-flexslider","configurationProvider","mediaQuery","brightcove/component.newBrightcove"],function(m,e,h,f,o){for(var d,t={},a=document.getElementsByClassName("kba-item-center"),i=window.matchMedia("(max-width: 767px)"),g=null!==document.ontouchstart?"click":"touchstart",n=0;n<a.length;n++)a[n].addEventListener("click",function(){i.matches&&(m(this).toggleClass("active"),m(this).parents(".splitter-column").css({height:"auto"}))});function r(e){var e=m(e),a=e.find(".carousel"),i=!1,n=0,t={controlsContainer:a.find("> .carousel-controls"),selector:".media-carousel-container > .carousel-slide",animation:"slide",directionNav:!1,pauseOnHover:!0,slideshow:!1,start:function(e){e.resize(),e.find(".carousel-previous").addClass("inactive"),r(e)},end:function(e){n++},before:function(e){e.find(".carousel-btn").removeClass("inactive"),0===e.animatingTo&&e.find(".carousel-previous").addClass("inactive");e.animatingTo==e.count-1&&e.find(".carousel-next").addClass("inactive");e=m(".latestOffersBuildPriceCarousel .mediaCarousel");{var t;l&&e.find(".carousel-data-container").length&&(t=e.find(".flex-active-slide").innerHeight(),e.find(".carousel-data-container").parent().css("height",t))}},after:function(e){var t=e.find(".flex-control-nav li a.flex-active").parent().index()+1,a=e.find("#fdsTotalNumberOfPage").text();e.find(".carousel-numbers").length&&e.find(".slide-current-slides").text(t);!i&&0===e.currentSlide&&1<=n&&(e.vars.slideshow=!1,e.flexslider("stop"));r(e),"true"===m(e).parents(".common-mediaCarousel").attr("data-media-fds")&&(e.find("#fdsCurrentPage").html(t),1<t&&t<a?(e.find(".carousel-previous.fds-disable-arrow").removeClass("fds-disable-arrow"),e.find(".carousel-next.fds-disable-arrow").removeClass("fds-disable-arrow")):t==a?(e.find(".carousel-next").addClass("fds-disable-arrow"),e.find(".carousel-previous.fds-disable-arrow").removeClass("fds-disable-arrow")):1==t&&(e.find(".carousel-previous").addClass("fds-disable-arrow"),e.find(".carousel-next.fds-disable-arrow").removeClass("fds-disable-arrow")))}},o=m(".mediaCarousel"),l="mobile"===f.getMediaType();function r(e){var t=m(".latestOffersBuildPriceCarousel .mediaCarousel");if(l)t.find(".carousel-data-container").length&&(i=t.find(".flex-active-slide").innerHeight(),t.find(".carousel-data-container").parent().css("height",i));else if(t.length){for(var a,i=e.currentSlide*e.visible,n=i+e.visible,o=(e.currentSlide==e.pagingCount-1&&(i=(n=e.count)-e.visible),m(e.containerSelector).find(".carousel-slide").removeClass("active-slide"),0),r=i+1;r<=n;r++)(a=m(e.containerSelector).find(".carousel-slide:nth-child("+r+")")).addClass("active-slide"),o=a.height()>o?a.height():o;m(a).closest(".flex-viewport").css("max-height",o)}}function s(){i=!0,a.flexslider("stop")}a.find(".image-caption a").each(function(e,t){m(t).attr("tabIndex","-1")}),dataConfig=h.get(e);var c,d=e.find("article.carousel-slide").length,u=(d<4&&(t.maxItems=d),d<2&&a.find(".carousel-arrows").hide(),parseFloat(null==dataConfig.itemsToSplit?2.2:dataConfig.itemsToSplit)),d=((u=isNaN(u)||0==u?2.2:u)<=d&&!l&&(c=e.width(),767<m(window).width()&&100<c&&(c-=100),t.itemWidth=c/u,t.itemWidth=Math.ceil(t.itemWidth),t.maxItems=Math.ceil(u)),1==u&&a.addClass("max-item-1"),o.parents(".box-layout.with-media-name").length);function p(){m(".flex-viewport .carousel-slide").each(function(){0<m(this).find(".brightcove-player").length&&m(this).find(".pausepl").trigger("click")})}2===u&&d&&(c=.9*e.width(),t.minItems=2,o.find(),o.find(".split-2").css({width:c})),3===u&&d&&(c=.9*e.width(),t.minItems=3,o.find(),o.find(".split-3").css({width:c})),a.removeData("flexslider"),a.find(".flex-control-nav").remove(),a.find(".flex-direction-nav").remove(),a.flexslider(m.extend(t,dataConfig)),a.find(".carousel-previous").on(g,function(e){m(e.target).closest(".carousel").flexslider("prev"),s()}),a.find(".carousel-next").on(g,function(e){m(e.target).closest(".carousel").flexslider("next"),s()}),a.find(".flex-control-nav a").on(g,function(e){p()}),a.on("click",function(){s()}),m(".carousel-next, .carousel-previous, .flex-control-nav").on("click",function(){p()}),a.on("keydown",function(e){var e=e.keyCode||e.which,t=(a.data("flexslider"),a.find("a:focus").parents(".carousel-slide"));a.find("a").parents(".carousel-slide");switch(37===e&&0==(1+(t.index()-1))%getGridSize()&&0!==t.index()&&(p(),a.flexslider("prev")),e){case 37:t.prev().find("a").focus();break;case 39:t.next().find("a").focus()}})}var u=m(".mediaCarousel");return u.each(function(){var i=m(this),t=i.find(".configuration").data("items-to-split"),n=i.find(".common-mediaCarousel"),a=(n.find(".flex-viewport"),n.find(".is-arrows")),o=(a.outerHeight(),n.find(".carousel-slide").length),r=m(n).attr("data-media-fds");function e(){var e=i.find(".carousel-arrows.moved"),t=e.height(),a=i.find(".picture-container").height();e.css("margin-top",(a-t)/2+"px")}function l(){var e;2===o&&a.length&&1===t&&"false"===r?(n.addClass("with-arrow"),i.find(".carousel-arrows").addClass("show")):2<=o&&a.length&&"true"===r&&(n.addClass("with-arrow"),(e=m(".with-arrow").find(".carousel-arrows")).addClass("moved"),e.hasClass("moved"))&&m(".carousel-arrows.moved").each(function(){m(this).parent(".media-carousel-inner").before(m(this))})}function s(){var e=i.find(".configuration").data("items-to-split"),t=i.find(".common-mediaCarousel"),a=t.find(".carousel");a.width(),a.find(".carousel-slide"),m(".common-mediaCarousel.split-3"),m(".common-mediaCarousel.split-2");i.find(".name1, .name2").parents(".box-layout").addClass("with-media-name"),t.addClass("split-"+e)}function c(){var e=m(".common-mediaCarousel").find(".brightcove-player .outer-container"),t=e.data("style");e.attr("style",t)}mediaItem=n.find(".common-mediaCarouselItem"),(mediaCaption=mediaItem.find(".mediaCarouselItem-content")).css({"padding-left":"5px","padding-right":"5px"}),l(),e(),s(),c(),m("img").bind("load.carouselImageLoaded",function(){c()}).each(function(){this.complete&&m(this).load()}),m(window).resize(function(){clearTimeout(d),d=setTimeout(function(){l(),e(),s(),c(),u.each(function(){var e=m(this),t=("true"===m(n).attr("data-media-fds")&&(totalPages=e.find(".flex-control-nav li").length,e.find("#fdsTotalNumberOfPage").html(totalPages)),e);switch(f.getMediaType()){case"mobile":t.find(".media-carousel").hasClass("onlyMobile")||t.find(".media-carousel").hasClass("desktopAndMobile")?t.find(".flex-control-nav").show():t.find(".flex-control-nav").hide();break;case"tablet":case"desktop":t.find(".media-carousel").hasClass("onlyDesktop")||t.find(".media-carousel").hasClass("desktopAndMobile")?t.find(".flex-control-nav").show():t.find(".flex-control-nav").hide()}var a=e,e=a.find(".flex-control-nav li").length,i='<div class="carousel-numbers"><span class="slide-current-slides">'+(a.find(".flex-control-nav li a.flex-active").parent().index()+1)+'</span> / <span class="slide-total-slides">'+e+"</span></div>";switch(f.getMediaType()){case"mobile":a.find(".media-carousel").hasClass("showPagerMobile")?(a.find(".flex-viewport").find(".carousel-numbers").length&&a.find(".flex-viewport").find(".carousel-numbers").remove(),a.find(".flex-viewport").append(i)):a.find(".flex-viewport").find(".carousel-numbers").length&&a.find(".flex-viewport").find(".carousel-numbers").remove();break;case"tablet":case"desktop":a.find(".media-carousel").hasClass("showPagerDesktop")?a.find(".flex-viewport").find(".carousel-numbers").length?a.find(".flex-viewport").find(".carousel-numbers").remove():a.find(".flex-viewport").append(i):a.find(".flex-viewport").find(".carousel-numbers").length&&a.find(".flex-viewport").find(".carousel-numbers").remove()}})},500)})}),t.init=function(e){setTimeout(function(){void 0!==e?r(e):m(".mediaCarousel").each(function(e,t){var a,i,n;r(t),t=t,n=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,m(window).width()<640&&(n||(a=navigator.connection||navigator.mozConnection||navigator.webkitConnection)&&(a.downlink,i=navigator.connection.type),!n&&"wifi"!==i||m(t).find(".js-init-video-fullscreen").each(function(){var t=m(this).parent().find(".js-load-video-fullscreen"),e=t.find(".js-brightcove-player"),a=e.data("mobile-autoplay");e.data("account-id")&&(m(this).attr("href","#"),m(this).removeClass("link-overlay"),o.initialed||o.addPlayer(t,a),m(this).on("click",function(e){e.preventDefault(),t.hasClass("js-bcinit")||t.addClass("js-bcinit"),o.addPlayer(t,a)}))})),m(".media-carousel-container .clone a").attr("tabindex",-1)})},500),m(".video-single").wrap('<div class="brightcove section"></div>')},t}),define("threesixty/controllers",["angular","threesixty/services","mediaQuery"],function(e,t,i){e=e.module("threesixty.controllers",["threesixty.services"]);e.controller("ThreeSixtyController",["$rootElement","$rootScope","$scope","featuresService","analyticsDispatcher",function(t,a,e,i,n){var o={};function r(e){e&&(t.addClass("service-ok"),a.$broadcast("threesixty.data",e.data))}function l(e){t.addClass("service-error"),t.find(".messages").text("Connection Error")}function s(e){i.getFeatures(e).then(r,l)}e.$on("threesixty.featureChanged",function(e,t){o[t.featureCategoryCode]=t.featureCode}),e.$on("threesixty.featureClick",function(e,t){s(Object.keys(o).map(function(e){return o[e]}))}),s()}]),e.controller("ThreeSixtyMenuController",["$rootScope","$scope","CONFIG",function(a,e,s){var c=this,d=!0;function u(e){c.menu.selected=e.featureCode,a.$broadcast("threesixty.menuChanged",e)}c.menu={open:!1,selected:s.defaultCategory,items:[]},e.$on("threesixty.data",function(e,t){var a,i=t.featureCategories,n=[];if(s.categories&&i)for(var o=s.categories,r=0;r<o.length;r++)for(var l=0;l<i.length;l++)if(o[r]==i[l].featureCode){n.push(i[l]),i[l].featureCode==s.defaultCategory&&(a=i[l]);break}c.menu.items=n,a&&d&&(d=!1,u(a))}),c.selectMenuItem=function(e,t){e.preventDefault(),c.menu.open=i.mobile.matches&&!c.menu.open,u(t),a.$broadcast("threesixty.menuClick",t)}}]),e.controller("ThreeSixtyFeaturesController",["$scope","$rootScope",function(e,a){var i=this;function n(e){i.featureCategory.selected.code=e.code,i.featureCategory.selected.name=e.name,a.$broadcast("threesixty.featureChanged",{featureCode:e.code,featureCategoryCode:i.featureCategory.code})}i.featureCategory={code:null,selected:{code:null,name:""},items:[]},i.selectFeature=function(e,t){e.preventDefault(),n(t),a.$broadcast("threesixty.featureClick",{featureCode:t.code,featureCategoryCode:i.featureCategory.code})},e.$on("threesixty.menuChanged",function(e,t){var a=(e=>{for(var t,a=0,i=0;i<e.length;i++)"DEFAULT"==e[i].state&&(a=i),"SELECTED"==e[i].state&&(t=e[i]);return t=void 0===t?e[a]:t})(t.items);i.featureCategory.items=t.items,i.featureCategory.code=t.featureCode,n(a)})}]),e.controller("ThreeSixtyGalleryController",["$scope","$rootScope","$element","$timeout",function(e,t,o,r){var l=this,s=[];function a(e){l.gallery.mouseX=e,l.gallery.rotateActive=!0}function i(){l.gallery.rotateActive=!1}function n(e){var t=l.gallery,a=Math.round(o.width()/t.images.length);t.rotateActive&&0!==e&&(t.mouseX?e>t.mouseX+a?(t.mouseX=e,d()):e<t.mouseX-a&&(t.mouseX=e,c()):t.mouseX=e)}function c(){l.gallery.currentIndex==l.gallery.images.length-1?l.gallery.currentIndex=0:l.gallery.currentIndex++,u()}function d(){0===l.gallery.currentIndex?l.gallery.currentIndex=l.gallery.images.length-1:l.gallery.currentIndex--,u()}function u(){0<l.gallery.images.length&&t.$broadcast("threesixty.galleryRotate",{image:l.gallery.images[l.gallery.currentIndex],index:l.gallery.currentIndex})}l.gallery={images:[],currentIndex:0,rotateActive:!1,mouseX:null},l.nextSlide=function(e){c(),e.preventDefault()},l.prevSlide=function(e){d(),e.preventDefault()},l.mouseDown=function(e){a(e.offsetX),e.preventDefault()},l.mouseUp=function(e){i(),e.preventDefault()},l.touchStart=function(e){a(e.touches[0].pageX),e.preventDefault()},l.touchEnd=function(e){i(),e.preventDefault()},l.touchMove=function(e){n(e.touches[0].pageX),e.preventDefault()},l.mouseMove=function(e){n(e.offsetX),e.preventDefault()},e.$on("threesixty.data",function(e,t){s=t.imageSet}),e.$on("threesixty.featureChanged",function(e,t){var a=t.featureCode,i=[];if(s){for(var n=0;n<s.length;n++)s[n].code==a&&i.push(s[n].image);l.gallery.images=i,l.gallery.currentIndex=0}r(function(){o.find("ol li.active").addClass("fadein")},250)})}])}),define("threesixty/services",["angular"],function(e){e=e.module("threesixty.services",[]);e.factory("featuresService",["$http","CONFIG",function(a,i){return this.getFeatures=function(e){var t=i.endpoint;return e&&(t+="?selectedFeatures="+e.join(",")),a.get(t)},this}]),e.factory("analyticsDispatcher",["$rootScope",function(e){return e.$on("threesixty.menuClick",function(e,t){(dlEvent={}).eventName="vhp content:360 view "+t.label,dlEvent.eventAction="vhp:new:click",dlEvent.eventType="360",dlEvent.eventTypeId=t.featureCode,dlEvent.linkName="brand:cars_hardcoded:vehicle:content on page",void 0!==window.digitalData&&window.digitalData.createEvent(dlEvent,"360MenuClick")}),e.$on("threesixty.featureClick",function(e,t){var a,i;a=t.featureCategoryCode,i=t.featureCode,window.fordAnalytics=window.fordAnalytics||{},window.fordAnalytics.temp=window.fordAnalytics.temp||{},window.fordAnalytics.temp.colorizer=window.fordAnalytics.temp.colorizer||{},window.fordAnalytics.temp.colorizer[a]=i,(dlEvent={}).eventName="vhp content:360 view "+t.featureCategoryCode,dlEvent.eventAction="vhp:new:click",dlEvent.eventType="360",dlEvent.eventTypeId=t.featureCode,dlEvent.componentDetails=fordAnalytics.temp.colorizer,dlEvent.linkName="brand:cars_hardcoded:vehicle:content on page",void 0!==window.digitalData&&window.digitalData.createEvent(dlEvent,"360FeatureClick")}),e.$on("threesixty.galleryRotate",function(e,t){var a,i;dlEvent={eventName:"vhp content:360 rotate",eventAction:"vhp:new:click",eventType:"360",eventTypeId:"360",linkName:"brand:cars_hardcoded:vehicle:content on page"},void 0!==window.digitalData&&(a="360RotateCallPolytics",void 0===(i=_satellite.getVar(a))||"null"===i||("page"===i.toLowerCase()?(window.callPolytics=window.callPolytics||{},void 0===window.callPolytics[a]&&(window.callPolytics[a]=!0)):"session"===i.toLowerCase()&&null!==sessionStorage.getItem(a)&&(sessionStorage.setItem(a,"true"),1)))&&window.digitalData.createEvent(dlEvent,"360Rotate")}),{}}])}),define("threesixty/threesixty.app",["angular","angular-gux-touch"],function(e,t){return e.module("threesixty",["ngGuxTouch","ngAnimate"]).config(["$animateProvider",function(e){e.classNameFilter(/repeat-animation/)}])}),define("threesixty/threesixty.controllers",["threesixty/threesixty.app","threesixty/threesixty.filters","threesixty/threesixty.services","mediaQuery"],function(e,t,a,i){e.controller("mainCtrl",["$rootElement","$rootScope","$scope","featuresService","analyticsDispatcher",function(t,a,e,i,n){var o={};function r(e){e&&(t.addClass("service-ok"),a.$broadcast("threesixty.data",e.data))}function l(e){t.addClass("service-error"),t.find(".messages").text("Connection Error")}function s(e){i.getFeatures(e).then(r,l)}e.$on("threesixty.featureChanged",function(e,t){o[t.featureCategoryCode]=t.featureCode}),e.$on("threesixty.featureClick",function(e,t){s(Object.keys(o).map(function(e){return o[e]}))}),s()}]),e.controller("menuCtrl",["$rootScope","$scope","$window","CONFIG",function(a,e,t,s){var c=this,d=!0;function u(e){c.menu.selected=e.featureCode,a.$broadcast("threesixty.menuChanged",e)}c.menu={open:!1,selected:s.defaultCategory,items:[]},e.$on("threesixty.data",function(e,t){var a,i=t.featureCategories,n=[];if(s.categories&&i)for(var o=s.categories,r=0;r<o.length;r++)for(var l=0;l<i.length;l++)if(o[r]==i[l].featureCode){n.push(i[l]),i[l].featureCode==s.defaultCategory&&(a=i[l]);break}c.menu.items=n,a&&d&&(d=!1,u(a))}),c.selectMenuItem=function(e,t){e.preventDefault(),c.menu.open=i.mobile.matches&&!c.menu.open,c.menu.selected!=t.featureCode&&(u(t),a.$broadcast("threesixty.menuClick",t))},c.isMobile=function(){return"mobile"===i.getMediaType()},t.addEventListener("mediaQuery.change",function(){e.$apply()})}]),e.controller("featuresCtrl",["$scope","$rootScope",function(e,a){var i=this;function n(e){i.featureCategory.selected.code=e.code,i.featureCategory.selected.name=e.name,a.$broadcast("threesixty.featureChanged",{featureCode:e.code,featureCategoryCode:i.featureCategory.code})}i.featureCategory={code:null,selected:{code:null,name:""},items:[]},i.selectFeature=function(e,t){e.preventDefault(),n(t),a.$broadcast("threesixty.featureClick",{featureCode:t.code,featureCategoryCode:i.featureCategory.code})},e.$on("threesixty.menuChanged",function(e,t){var a=(e=>{for(var t,a=0,i=0;i<e.length;i++)"DEFAULT"==e[i].state&&(a=i),"SELECTED"==e[i].state&&(t=e[i]);return t=void 0===t?e[a]:t})(t.items);i.featureCategory.items=t.items,i.featureCategory.code=t.featureCode,n(a)})}]),e.controller("galleryCtrl",["$scope","$rootScope","$element","$timeout",function(e,t,i,a){var o=this,r=[],l=null;function n(e){o.gallery.mouseX=e,o.gallery.rotateActive=!0}function s(){o.gallery.rotateActive=!1}function c(e){var t=o.gallery,a=Math.round(i.width()/t.images.length);t.rotateActive&&0!==e&&(t.mouseX?e>t.mouseX+a?(t.mouseX=e,u()):e<t.mouseX-a&&(t.mouseX=e,d()):t.mouseX=e)}function d(){o.gallery.currentIndex==o.gallery.images.length-1?o.gallery.currentIndex=0:o.gallery.currentIndex++,p()}function u(){0===o.gallery.currentIndex?o.gallery.currentIndex=o.gallery.images.length-1:o.gallery.currentIndex--,p()}function p(){0<o.gallery.images.length&&t.$broadcast("threesixty.galleryRotate",{image:o.gallery.images[o.gallery.currentIndex],index:o.gallery.currentIndex})}o.gallery={images:[],currentIndex:0,rotateActive:!1,mouseX:null},o.nextSlide=function(e){d(),e.preventDefault()},o.prevSlide=function(e){u(),e.preventDefault()},o.mouseDown=function(e){n(e.offsetX),e.preventDefault()},o.mouseUp=function(e){s(),e.preventDefault()},o.touchStart=function(e){n(e.touches[0].pageX),e.preventDefault()},o.touchEnd=function(e){s(),e.preventDefault()},o.touchMove=function(e){c(e.touches[0].pageX),e.preventDefault()},o.mouseMove=function(e){c(e.offsetX),e.preventDefault()},e.init=function(e){l=new RegExp((e||NaN)+"$")},e.$on("threesixty.data",function(e,t){r=t.imageSet}),e.$on("threesixty.featureChanged",function(e,t){var a=t.featureCode,i=[];if(r){for(var n=0;n<r.length;n++)r[n].code!=a||r[n].image.normal.match(l)||i.push(r[n].image);o.gallery.images=i,o.gallery.currentIndex=0}})}])}),define("threesixty/threesixty.directives",["threesixty/threesixty.app"],function(e){e.directive("ngGuxGalleryResize",function(){return{restrict:"A",link:function(e,a,t){var i="preloading";function n(){var e=a.parents("ol"),t=a.height();0<t&&e.height(t)}e.$watch("ngSrc",function(){a.addClass(i)}),a.bind("load",function(){a.removeClass(i),setTimeout(n,500)}),angular.element(window).on("resize",function(){n()})}}})}),define("threesixty/threesixty.filters",["threesixty/threesixty.app","_"],function(e,i){e.filter("orderFeaturesBySelected",function(){return function(e,t,a){return a?i.sortBy(e,function(e){return e.featureCode!==t}):e}})}),define("threesixty/threesixty",["jquery","angular","angular-gux-touch","configurationProvider","threesixty/threesixty.app","threesixty/threesixty.filters","threesixty/threesixty.controllers","threesixty/threesixty.services","threesixty/threesixty.directives"],function(a,i,e,n,o,t,r,l,s){a(".threesixtyColouriser").each(function(e,t){o.constant("CONFIG",n.get(a(t))),i.bootstrap(t,["threesixty"])})}),define("threesixty/threesixty.services",["threesixty/threesixty.app"],function(e){e.factory("featuresService",["$http","CONFIG",function(a,i){var e={getFeatures:function(e){var t=i.endpoint;return e&&(t+="?selectedFeatures="+e.join(",")),a.get(t)}};return e}]),e.factory("analyticsDispatcher",["$rootScope",function(e){return e.$on("threesixty.menuClick",function(e,t){var a={};a.eventName="vhp content:360 view "+t.label,a.eventAction="vhp:new:click",a.eventType="360",a.eventTypeId=t.featureCode,a.linkName="brand:cars_hardcoded:vehicle:content on page",void 0!==window.digitalData&&window.digitalData.createEvent(a,"360MenuClick")}),e.$on("threesixty.featureClick",function(e,t){i=t.featureCategoryCode,a=t.featureCode,window.fordAnalytics=window.fordAnalytics||{},window.fordAnalytics.temp=window.fordAnalytics.temp||{},window.fordAnalytics.temp.colorizer=window.fordAnalytics.temp.colorizer||{},window.fordAnalytics.temp.colorizer[i]=a;var a,i={};i.eventName="vhp content:360 view "+t.featureCategoryCode,i.eventAction="vhp:new:click",i.eventType="360",i.eventTypeId=t.featureCode,i.componentDetails=fordAnalytics.temp.colorizer,i.linkName="brand:cars_hardcoded:vehicle:content on page",void 0!==window.digitalData&&window.digitalData.createEvent(i,"360FeatureClick")}),e.$on("threesixty.galleryRotate",function(e,t){var a,i,n={eventName:"vhp content:360 rotate",eventAction:"vhp:new:click",eventType:"360",eventTypeId:"360",linkName:"brand:cars_hardcoded:vehicle:content on page"};void 0!==window.digitalData&&(a="360RotateCallPolytics",void 0===(i=_satellite.getVar(a))||"null"===i||("page"===i.toLowerCase()?(window.callPolytics=window.callPolytics||{},void 0===window.callPolytics[a]&&(window.callPolytics[a]=!0)):"session"===i.toLowerCase()&&null!==sessionStorage.getItem(a)&&(sessionStorage.setItem(a,"true"),1)))&&window.digitalData.createEvent(n,"360Rotate")}),{}}])}),define("expand-collapse/expandCollapseSection",["jquery"],function(t){var e={};return e.init=function(){t(".expander").on("click",function(e){e.preventDefault();e=t(this).parents(".expander-section").find(".expander-body");0<t(e).height()?(e.removeClass("expanded"),e.addClass("collapsed"),t(this).removeClass("open"),t(this).addClass("closed")):(e.removeClass("collapsed"),e.addClass("expanded"),t(this).removeClass("closed"),t(this).addClass("open"))})},e}),define("features/component.singleFeature",["jquery","_","fordjs","mediaQuery","utils/utils.truncateText"],function(n,e,t,a,o){var i;return i=function(e){var t,a,i,e=n(e),e={$singleFeatureRte:e.find(".richtext-f-single"),$singleFeatureFirstRte:e.find(".richtext-f-single").first(),$singleFeatureImageWrapper:e.find(".image"),$singleFeatureImage:e.find("picture")};t=(e=(e=e).$singleFeatureRte).find("p").eq(0),a="",i=0,e.attr("data-rte-mobilemoretext"),a=e.attr("data-rte-mobilemoretext"),e.attr("data-rte-mobilemaxlength"),0<(i=e.attr("data-rte-mobilemaxlength"))&&o.truncateText(t,a,i),window.document.addEventListener("mediaQuery.change",function(){})},t.registerComponent(t={name:"singleFeature",selector:".f-single",init:function(e){i(e)}}),t}),define("features/features-trigger",["jquery"],function(i){var e,t={};function n(e,t){var e=i(e).find(t),a=Math.max.apply(null,e.map(function(){return i(this).height()}).get());e.each(function(){i(this).height(a)})}function o(t,a){i(window).on("resize",function(){var e;e=a,i(t).find(e).each(function(){i(this).removeAttr("style")}),n(t,a)})}return e=function(i){[".image picture","h3"].forEach(function(e,t,a){n(i,e),o(i,e)})},t.init=function(){i(".billboard-features-trigger").each(function(){e(this)}),i(".expanded-feature").each(function(){e(this)})},t}),define("features/single-feature",["jquery"],function(l){return function(e){var t,a,i,n,o=(e=l(e).find("p").eq(0)).text(),r=85;if(o.length>r){for(;"."!==o[r]&&","!==o[r]&&" "!==o[r];)r--;t=l("<span>").text(o.substring(0,r)),a=l("<span>").text(o.substring(r)).addClass("remaining-text"),i=l("<a>").text("more").attr("href","#").addClass("more-link"),n=l("<span>").html("&hellip; ").addClass("ellipsis"),e.empty().append(t).append(a).append(n).append(i),a.addClass("hidden"),i.on("click",function(e){e.preventDefault(),a.removeClass("hidden"),i.hide(),n.hide()})}}}),define("rte/component.ctaButton",["jquery"],function(a){var e={};function i(e){var t=Math.max.apply(null,e.map(function(){return a(this).outerWidth()}).get());e.css({"min-width":t})}function t(e){var t,e=a(e).find(".cta-button");1<e.length&&(i(e),t=e,a(window).on("resize",function(){t.removeAttr("style"),i(t)}))}return e.init=function(){a('div[class="richtext"]').each(function(){t(this)})},e}),define("rte/component.read-more",["jquery","_","fordjs","mediaQuery","utils/utils.truncateText"],function(o,e,t,a,i){return{name:"richTextReadMore",selector:".richtext-read-more",init:function(e){var t,a,i,n;t=(e=o(e=e)).find(".desktop").first(),a=e.find(".mobile").first(),i=a.find(".showmore").first(),e=a.find(".link-chevron"),n=a.find(".link-chevron-thin"),i.length&&(t.addClass("hideForMobile"),i.on("click",function(e){e.preventDefault(),a.find(".showmoreText").css("display","inline"),i.hide().parents().addClass("active-show-more")})),e.length&&e.each(function(){o(this).parents("p").length&&o(this).parents("p").addClass("link-included")}),n.length&&n.each(function(){o(this).parents("p").length&&o(this).parents("p").addClass("link-included")})},initInline:function(e){var t;(t=(e=o(e=e)).prev("p")).length&&t.append(e)}}}),define("rte/rte-flip-image",["jquery"],function(a){var e,t={},i={mobileBreakpoint:768,mobileStatus:!0};function n(){a(".splitter .flip-image-position").each(function(){var e=a(this),t=e.find("h2");t.detach(),!0===i.mobileStatus?t.prependTo(e):!1===i.mobileStatus&&t.appendTo(e)})}return e=function(e){(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)<i.mobileBreakpoint&&n(),a(window).on("resize",function(){var e=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;i.mobileStatus=e<769,n()})},t.init=function(){a(".splitter .flip-image-position").each(function(){e()})},t}),define("splitter/splitter-slider",["jquery","configurationProvider","_","marketConfigGlobal"],function(C,k,e,S){var n,x,t={},D={mediaWidths:{mobile:"(max-width: 767px)",desktop:"(min-width: 768px)",mobileStatus:!0},matchMedia:{mobile:null,desktop:null},sliderConfiguration:{selector:".slides > .carousel-slide",animation:"slide",slideshow:!1,directionNav:!1}};function a(t){t.css("height","auto");var a=parseInt(t.parent().width()/t.width()),n=new Array,o=0;t.each(function(e){if(C(this).height()>o&&(o=C(this).height()),n.push(e),(parseInt(e)+1)%a==0){for(i=0;i<n.length;i++)C(t).eq(n[i]).height(o);n=[],o=0}})}function o(e){var e=C(e),t=e.parent(".splitter");e.addClass("splitter-desktop").clone().appendTo(t)}function r(e){var e=C(e),t=e.find(".splitter-column"),a=C.extend(D.sliderConfiguration,k.get(e));e.addClass("flexslider").removeClass("splitter-desktop"),C(".follow-sticky.active-sticky").removeClass("follow-sticky"),e.hasClass("follow-sticky")?a=C.extend(a,{touch:!1,slideshow:!1,controlNav:!1,animationLoop:!1}):e.hasClass("active-sticky")&&(a=C.extend(a,{animationLoop:!1,before:function(e){var i=e.animatingTo,e=C(".follow-sticky.flexslider");C.each(e,function(e,t){var a=C(t).data("flexslider").count;a<i?C(t).flexslider(a):C(t).flexslider(i)})}})),e.hasClass("flexslider")&&(t.addClass("carousel-slide").parent("div").addClass("slides"),e.flexslider(a))}function l(e){var t=e.find(".splitter-carousel"),a=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,i=e.attr("lastDisplay");a<769?"mobile"!=i&&(D.mediaWidths.mobileStatus=!0,t.each(function(e,t){C(t).hasClass("flexslider")||(o(t),r(t))}),e.attr("lastDisplay","mobile")):"desktop"!=i&&(D.mediaWidths.mobileStatus=!1,t.each(function(e,t){t=C(t);t.hasClass("flexslider")?t.remove():t.addClass("splitter-desktop")}),e.attr("lastDisplay","desktop")),768<=C(window).width()&&C(window).width()}c(),u(),p(),m(),h(),f();document.ontouchstart;function s(){C(".common-splitter").each(function(){C(this).find("select").on("change",()=>{setTimeout(()=>{a(C(this).find(".splitter-column"))},100)})})}function c(){C(".common-splitter").each(function(){var e,t,a=C(window).width(),i=1024<a,a=767<a&&a<1024,n=C(this),o=n.find(".row.splitter"),r=o.children("div"),l=r.children(".splitter-column"),s=l.children(".sameHeightSplitter"),c=o.height(),d=(o.length,l.length,"align-top align-middle align-bottom"),u=n.data("pos-y-desktop"),p=n.data("pos-y-mobile"),m=n.data("style"),h=n.data("margin-block-desktop"),f=n.data("margin-block-mobile"),g=o.data("padding-row-desktop"),v=o.data("padding-row-mobile"),y=n.data("padding-column-desktop"),b=n.data("padding-column-mobile");function w(e){var t=e.find(".flex-control-nav li a.flex-active").parent().index()+1,a=e.find("#fdsTotalNumberOfPage").text();e.find(".carousel-numbers").length&&e.find(".slide-current-slides").text(t),e.find("#fdsCurrentPage").html(t),1<t&&t<a?(e.find(".carousel-previous.fds-disable-arrow").removeClass("fds-disable-arrow"),e.find(".carousel-next.fds-disable-arrow").removeClass("fds-disable-arrow")):t==a?(e.find(".carousel-next").addClass("fds-disable-arrow"),e.find(".carousel-previous.fds-disable-arrow").removeClass("fds-disable-arrow")):1==t&&(e.find(".carousel-previous").addClass("fds-disable-arrow"),e.find(".carousel-next.fds-disable-arrow").removeClass("fds-disable-arrow"))}x=o.data("nameplate-exp-flg"),i?(n.attr("style",h),i=S.GLOBAL_MARKET_CONF.iso3MarketCode,-1<C.inArray(i,["VNM","NZL","IND","THA","THE","PHL","KOR","AUS","TWN","AFG","BHR","IRQ","JOR","KWT","LBN","SAU","OMN","QAT","ARE","YEM"])?o.children(".splitter-box").height(""):setTimeout(function(){o.children(".splitter-box").height(c)},2e3),l.removeClass(d),l.addClass(u),o.attr("style",g),s.attr("style",y)):a?r.css("height",""):(n.attr("style",f),r.css("height",""),l.removeClass(d),l.addClass(p),o.attr("style",v),s.attr("style",b),n.addClass(m),h=C(".common-splitter.carousel"),t=x?!0:!1,h.length&&(h.addClass("flexslider"),e=C(".common-splitter.flexslider"),h=e.find(".splitter-column"),C.extend(D.sliderConfiguration,k.get(e)),e.hasClass("flexslider"))&&(h.addClass("carousel-slide").parent("div").addClass("slides"),C(".flexslider .col-mob-1").length?(C(window).load(function(){e.flexslider({selector:".slides > .splitter-column",animation:"slide",animationLoop:!1,directionNav:t,slideshow:!1,itemWidth:767,itemMargin:0,minItems:1,start:function(e){C(".flexslider").resize()},after:w})}),h.css("height","auto !important")):C(".flexslider .col-mob-2").length&&C(window).load(function(){e.flexslider({selector:".slides > .carousel-slide",animation:"slide",animationLoop:!1,directionNav:t,slideshow:!1,itemWidth:207,minItems:2,start:function(e){C(".flexslider").resize()},after:w})})),l.hasClass("carousel-slide")&&l.addClass("no-height"),x&&(i=n.find(".flex-control-nav li").length,n.find("#fdsTotalNumberOfPage").html(i)))})}function d(){480<C(window).width()&&C(".common-splitter").each(function(){var e=C(this).find(".splitter-column"),t=e.find(".button-tile"),a=320;e.each(function(){t.each(function(){C(this).css("height","auto"),C(this).height()>a&&(a=C(this).height())}),t.height(a)})})}function u(){C(".common-splitter").each(function(){var e=C(window).width(),t=C(this),a=t.find(".splitter-column"),i=t.find(".button-tile");t.find(".splitter-box.with-tile");if(i.parents(".splitter-box").addClass("with-tile"),767<e)d();else{C(".splitter-box").find(".button-tile").css("height","auto");var n=t.data("tile-no");if(t.hasClass("tile"))for(var a=t.find(".splitter-column"),o=0;o<a.length;o+=n)a.slice(o,o+n).wrapAll('<div class="splitter-item"></div>');(i=C(".common-splitter.tile")).length&&(i.addClass("flexslider"),(i=C(".flexslider")).find(".splitter-item"),i.hasClass("flexslider"))&&C(".flexslider .row.splitter").length&&C(window).load(function(){C(".flexslider").flexslider({selector:".splitter-box > div",animation:"slide",animationLoop:!1,directionNav:!1,slideshow:!1,smoothHeight:!0,itemMargin:0,minItems:1,maxItems:1})})}})}function p(){C(".common-splitter").find(".caption.pos-below").parents(".common-splitter").addClass("with-imgcap-below"),C(".common-splitter.with-imgcap-below").each(function(){var e=C(this),t=767<C(window).width(),a=e.find(".splitter-2-columns .splitter-column"),i=e.find(".splitter-3-columns .splitter-column"),n=e.find(".splitter-4-columns .splitter-column"),o=e.find(".splitter-5-columns .splitter-column"),r=e.find(".splitter-6-columns .splitter-column");if(t){for(var l=0;l<a.length;l+=2)a.slice(l,l+2).wrapAll('<div class="splitter-box-wrap"></div>');for(l=0;l<i.length;l+=3)i.slice(l,l+3).wrapAll('<div class="splitter-box-wrap"></div>');for(l=0;l<n.length;l+=4)n.slice(l,l+4).wrapAll('<div class="splitter-box-wrap"></div>');for(l=0;l<o.length;l+=5)o.slice(l,l+5).wrapAll('<div class="splitter-box-wrap"></div>');for(l=0;l<r.length;l+=6)r.slice(l,l+6).wrapAll('<div class="splitter-box-wrap"></div>');e.find(".splitter-box").css("height","auto")}})}function m(){var e=C(".common-splitter"),e=(C(".common-splitter.with-pagination"),e.find(".navigationTile").parents(".common-splitter").addClass("with-pagination"),S.getCurrentiso3MarketCode());-1<C.inArray(e,["vnm","nzl","ind","tha","phl","kor","aus","twn"])&&C(".with-pagination").each(function(){var e=C(this),t=e.find(".pagination-left"),a=e.find(".pagination-right");t.hasClass("pagination-left")&&a.hasClass("pagination-right")||e.find(".splitter-column:first-child .navigationTile").css("border-right","none")})}function h(){var e=C(".common-mediaCarouselItem.kba-item"),t=e.find(".content.mobile");t.children().length||t.parents(".kba-item").addClass("only-caption"),e.closest(".common-splitter").addClass("with-kba")}function f(){C(".common-splitter.with-grid").each(function(){var t,e=767<C(window).width(),a=C(this),i=a.find(".row.splitter"),n=i.find(".splitter-box").find(".splitter-column"),o=a.find(".splitter-2-columns"),r=a.find(".splitter-3-columns"),l=a.find(".splitter-4-columns"),s=a.find(".splitter-5-columns"),a=a.find(".splitter-6-columns"),c=i.find(".splitter-box.rows-2"),d=i.find(".splitter-box.rows-3"),u=i.find(".splitter-box.rows-4"),p=i.find(".splitter-box.rows-5"),m=i.find(".splitter-box.rows-6");function h(){function e(){for(var e=0;e<n.length;e+=t)n.slice(e,e+t).wrapAll('<div class="splitter-box-row clearfix"></div>')}(c.length||d.length||u.length||p.length||m.length)&&e()}e&&(o.length?(t=2,h()):r.length?(t=3,h()):l.length?(t=4,h()):s.length?(t=5,h()):a.length&&(t=6,h()))})}return C(window).resize(function(){setTimeout(function(){c(),p(),m(),h(),f(),u(),d(),/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&null!=typeof C(".common-splitter ol.flex-control-nav")&&"undefined"!=C(".common-splitter ol.flex-control-nav")&&null!=C(".common-splitter ol.flex-control-nav")[0]&&C(".common-splitter ol.flex-control-nav").is(":parent")&&setTimeout(function(){if(C(".flexslider").data("flexslider"))for(let e=0;e<C(".flexslider").data("flexslider").slides.length;e++){var t=C(".flexslider").data("flexslider").slides[e];0<t.children.length&&0===t.children[0].children.length&&C(".flexslider").data("flexslider").removeSlide(C(".flexslider").data("flexslider").count)}},500)},500)}),C(document).ready(function(){setTimeout(function(){c()},500)}),C(".common-splitter").each(function(){C(this).allLazyLoaded().on("containerlazyloaded",function(){a(C(this).find(".splitter-column"))})}),C(window).on("resize",e.throttle(function(){C(".common-splitter").each(function(){a(C(this).find(".splitter-column"))})},3e3)),C(window).on("onoverlayload",function(){C(".overlay-content").find(".image .is-small img").each(function(){var e,t,a=C(this);C(window).width()<768&&(e=a.data("img-width"),t=a.data("img-height"),a.css({width:e+"px",height:t+"px"}))}),s()}),C(window).load(function(){var e=!CQ||!CQ.WCM||!(CQ.WCM.isEditMode(!0)||CQ.WCM.isDesignMode(!0));setTimeout(function(){C(".common-splitter").each(function(){a(C(this).find(".splitter-column"))})},e?"500":"5000"),s()}),t.init=function(e){var t,a=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;D.matchMedia.mobile=a<769,D.matchMedia.mobile=window.matchMedia(D.mediaWidths.mobile),D.matchMedia.desktop=window.matchMedia(D.mediaWidths.desktop),n=e.parents(".section.splitter"),l(C(n)),C(n).bind("resizeChange",function(){l(C(this))}),t=C(n),C(window).on("resize",function(){var e=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;D.matchMedia.mobile=e<769,e<769&&t.trigger("resizeChange")}),(a=C(".row.splitter.active-sticky").first()).length&&(a.removeClass("active-sticky"),a.parents(".section.splitter").addClass("active-sticky")),C(window).scroll(function(){var e=C(".secondaryNavigation.section .navigation").first(),e=e.length?e.height():0,t=C(".section.splitter.active-sticky");t.length&&(C(".splitter-anchor").length||t.before('<div class="splitter-anchor"></div>'),C(this).scrollTop()>C(".splitter-anchor").offset().top?(t.addClass("sticky").css("top",e+"px"),C(".splitter-anchor").height(t.outerHeight())):(t.removeClass("sticky").css("top",0),C(".splitter-anchor").remove()))}),C(window).resize(function(){var e=C(".row.splitter.active");C(".splitter-anchor").height(e.outerHeight())})},t}),$("html").hasClass("lte9")&&$(".splitter-column").mouseenter(function(){$(this).find(".image").animate({top:"-15px"},100)}).mouseleave(function(){$(this).find(".image").animate({top:"0px"},100)}),define("rich-text/component.richText",["jquery","cookie","analytics/analyticsEventLayer"],function(i,a,n){i("body").on("click",".auto-populate-dealer",function(e){e.preventDefault();var e=i(".auto-populate-dealer").attr("href"),t=a.getCookie("dl-last-search-dealer");window.location.href=t?e+"#/search/"+t:e});var e,t=i(".richtext a.link-chevron").children("br"),t=(1<t.length&&t.parent().addClass("multi-break"),i(".richtext-read-more").each(function(){var e=i(window).height()<670,t=i(this).find(".mobile.show-mob-only").css("padding-top");400<parseInt(t,10)&&e&&i(this).find(".mobile.show-mob-only").addClass("small-devices")}),i(".richtext a.cta-button.download-brochure").each(function(){var e=i(this);null!=e.attr("_link_action")&&1<e.attr("_link_action").length&&"download-brochure"===e.attr("_link_action")&&e.attr("download","")}),i(".richtext a.download-brochure").each(function(){var e=i(this);null!=e.attr("_link_action")&&1<e.attr("_link_action").length&&"download-brochure"===e.attr("_link_action")&&e.attr("download","")}),i(".richtext table"));return t.length&&(e=t.height()||300,t.hasClass("stickyrowcolumn")||t.hasClass("stickyRow")||t.hasClass("stickyColumn"))&&t.parent("div.mobile").css({overflow:"scroll",height:e}),i(".richtext a.link-chevron.download-brochure").each(function(){var e=i(this);1<e.attr("_link_action").length&&"download-brochure"===e.attr("_link_action")&&e.attr("download","")}),i(".common-richtext .link-print").click(function(){window.print()}),i("body").on("click",".common-richtext .download-brochure",function(){var e=i(this).attr("href"),t=fordAnalytics.nameplate||"",a=fordAnalytics.modelYear||"";n.getDownloadEvents().trackPdfBrochureDownloadComplete(e,t,a)}),i("body").on("click",".common-richtext .download-e-brochure",function(){var e=i(this).attr("href"),t=fordAnalytics.nameplate||"",a=fordAnalytics.modelYear||"";n.getDownloadEvents().trackEBrochureDownload(e,t,a)}),i("body").on("click",".common-richtext .download-i-brochure",function(){var e=i(this).attr("href"),t=fordAnalytics.nameplate||"",a=fordAnalytics.modelYear||"";n.getDownloadEvents().trackIBrochureDownload(e,t,a)}),{init:function(){i(".richtext .richtext-read-more .show-mob-only").each(function(){0<i(this).find(".showmore").length&&(i(this).children("p").each(function(){0==i(this).children().length&&0==i.trim(i(this).text()).length&&i(this).addClass("hidden")}),0==i(this).children("p:not('.hidden'):last").find(".showmore").length)&&i(this).children("p:not('.hidden'):last").append(i(this).find(".showmore"))}),i(".common-richtext .richtext-read-more .show-mob-only").each(function(){i(this).find(".showmore").on("click",function(){i(this).css("display","none"),i(this).parents().eq(1).find(".showless").css("display","inline")}),i(this).find(".showless").on("click",function(){i(this).css("display","none"),i(this).parents().eq(0).find(".showmoreText").css("display","none"),i(this).parents().eq(0).find(".showmore").css("display","inline")})}),i(".common-richtext .bds-styles").parent().css("margin-bottom","0")}}}),define("rich-text/hotDealsPrice",["jquery","_"],function(i,n){var t,o=i("#isHotDealsEnabled").attr("value"),r=(i("#modelCodeForHotDeals").attr("value"),i("#currencyFormatPattern").attr("value")||""),l=0,s=n.filter(i(".richtext .gux-variable span"),function(e){return"[@offerPrice]"==i(e).html()});function e(){var a,e;t=i("#modelCodeForHotDeals").attr("value"),r=i("#currencyFormatPattern").attr("value")||"",l=0,s=n.filter(i(".richtext .gux-variable span"),function(e){return"[@offerPrice]"==i(e).html()}),"true"==o&&t&&(a=t,e=(document.location.origin+document.location.pathname).replace("html","")+"offerPrice.data",i.ajax({url:e,success:function(e){var t=e;200==(t="string"==typeof e?JSON.parse(e):t).returnCode?(l=(l=n.findWhere(t.modelPrices,{modelId:a}))?" "+updatePriceFormat(l.price,r,!0):"",n.each(s,function(e){c(l)})):c("")},error:function(){c("")}}))}function c(e){let t=encodeURIComponent(e?.trim());n.each(s,function(e){i(e).html(t)})}return{init:function(){e()}}}),define("gallery-category/gallery-category",["jquery","configurationProvider","isAuthor","overlay/component.overlay","_","mediaQuery"],function(m,e,t,a,i,n){function o(e){var t,a,i,s,c,d,n,o,u=[],e=m(h).find(e),e=m(e).find(".images-container"),r=m(e).find(".image"),l=m(r).find(".link-overlay a");function p(e,t){return e<0?t:t<e?0:e}m(window).on("baseUrlsload",function(){if(u.length)return!1;m.each(l,function(e,t){e++,void 0===(i=m(t).attr("href"))?a="no":u.push(i)})}),e.on("click",".image",function(){m(this).addClass("parKey")}),l.on("click",function(){m(window).on("onoverlayload.gcSlider",function(){t=r.index(m(".parKey")),d=m(".overlay-container");var e=u.length;e--,n=t-1,o=t+1,"no"!=a&&function e(t,a,i,n,o){m(window).off("onoverlayload.gcSlider");var r=m(".overlay-content-inner");r.css({position:"relative"});0<Number(i)&&r.append(f);g||m(".carousel-arrows").css({top:"45%"});r=m(".carousel-arrows .carousel-previous");var l=m(".carousel-arrows .carousel-next");n=p(n,i);o=p(o,i);s=u[n];c=u[o];r.attr("href",s);l.attr("href",c);r.on("click",function(){m(window).one("onoverlayload onoverlayChange",function(){setTimeout(function(){e(d,a,i,n-1,o-1)},500)})});l.on("click",function(){m(window).one("onoverlayload onoverlayChange",function(){setTimeout(function(){e(d,a,i,n+1,o+1)},500)})})}(0,t,e,n,o),m(".parKey").removeClass("parKey")})})}function r(e){var t,a,i=(e=m(e)).find(c).first(),n=e.find(".images-container").first(),o=(r=e.children(".configuration").first()).data("view-more-mobile"),r=r.data("view-more-desktop"),l=e.find(".image:nth-of-type(7n+5), .image:nth-of-type(7n+6), .image:nth-of-type(7n+7)");o||r?(t=n.children(".image").length,(o&&o<t?n.children(".image:nth-child(n+"+(o+1)+")"):i).addClass("is-initially-hidden-mobile"),(r&&r<t?n.children(".image:nth-child(n+"+(r+1)+")"):i).addClass("is-initially-hidden-desktop")):e.addClass("is-expanded"),n.find(".image.section").each(function(){0==m(this).children().length&&m(this).addClass("element_empty")}),(a=e).on("click",s,function(){event.preventDefault(),a.toggleClass("is-active")}).on("click",c+" a",function(e){e.preventDefault(),a.toggleClass("is-expanded")}),e.addClass("initialized"),l.addClass("row3Item")}var l={},h=(window.location.pathname,m("body")),s=".gallery-headline",c=".view-more-button-container",f=i.template('<div class="carousel-arrows"><div class="carousel-btn carousel-next link-overlay" tabindex="-1"><span class="icon icon-chevron-thin-right"></span></div><div class="carousel-btn darkened carousel-previous inactive link-overlay" tabindex="-1"><span class="icon icon-chevron-thin-left"></span></div></div>'),g="mobile"===n.getMediaType();return l.init=function(){m(".galleryCategory").each(function(){r(this),o(this)})},l}),define("gallery-trigger/component.galleryTrigger",["jquery","_","hammer","isAuthor","accordion/component.accordion"],function(o,a,e,t,i){var n={},r=37,l=39,s="is-active";function c(e){this.$el=o(e),this.$window=o(window),this.$body=o("body"),this.$galleryImage=this.$el.find(".image .link-overlay-image").parent(),this.$galleryImageLink=this.$galleryImage.find("a"),this.counterSeparator=this.$el.siblings(".configuration").data("gallery-page-separator"),this.slidesArray=[],this.accordionState=void 0,this.isAuthorMode=t.getAuthorStatus(),this.isReady=!0,this.fixImages(),this.bindUIEvents(),this.enumerateGalleryElements()}return c.prototype.bindOverlayElements=function(){this.$overlayContainer=this.$body.find(".overlay-container"),this.$overlayContent=this.$overlayContainer.find(".overlay-content"),this.$overlayContentInner=this.$overlayContent.find(".overlay-content-inner"),this.$overlayCarouselArrows=this.$overlayContentInner.parent().find(".carousel-arrows"),this.$overlayCounter=this.$overlayContentInner.find(".gallery-counter"),this.$counterCurrent=this.$overlayContentInner.find(".gallery-counter-current"),this.$counterTotal=this.$overlayContentInner.find(".gallery-counter-all"),this.$counterTotal.html(this.$galleryImage.length)},c.prototype.carouselArrowsTemplate=a.template('<div class="carousel-arrows"><div class="carousel-btn carousel-next" tabindex="0"><span class="icon icon-chevron-thin-right"></span></div><div class="carousel-btn darkened carousel-previous inactive" tabindex="0"><span class="icon icon-chevron-thin-left"></span></div></div>'),c.prototype.counterTemplate=a.template('<div class="gallery-counter"><span class="gallery-counter-current"></span> <%= counterSeparator %> <span class="gallery-counter-all"></span></div>'),c.prototype.bindUIEvents=function(){this.$galleryImageLink.on("click",function(e){e=o(e.target).closest(".image");this.setupCarousel(e),this.setActiveClass(e)}.bind(this))},c.prototype.enumerateGalleryElements=function(){a.each(this.$galleryImageLink,function(e,t){o(e).closest(".image").attr("data-order",t+1)})},c.prototype.getAccordionState=function(e){return e.hasClass("active")?"active":"inactive"},c.prototype.setAccordionState=function(e){this.accordionState=e.hasClass("active")?"active":"inactive"},c.prototype.toggleAccordions=function(){a.each(i.accordions,function(e){var t=e.$accordion.find(".accordion-title"),a=this.getAccordionState(t);this.accordionState!==a&&e.toggleAccordion(e.$accordion,t),this.galleryAccessibility(this.accordionState)}.bind(this))},c.prototype.galleryAccessibility=function(e){"active"===e?(o(".accordion-content .feature-container a").attr("tabindex",0),o(".gux-variable").attr("tabindex",-1),o(".accordion-content .feature-container a").on("keydown",function(e){13===e.keyCode&&(e.target.click(),e.stopImmediatePropagation(),e.preventDefault())})):"inactive"===e&&o(".accordion-content .feature-container a, .gux-variable").attr("tabindex",-1)},c.prototype.setAccordionStateOnClick=function(e){var t=e.find(".accordion-title");t.on("click",function(){this.setAccordionState(t),this.toggleAccordions()}.bind(this))},c.prototype.resetAccordionsHeight=function(){a.each(i.accordions,function(e){e.resetHeight()}.bind(this))},c.prototype.setActiveClass=function(e){var t;e.addClass(s),e.siblings().removeClass(s),e="loaded",(t=o.Event("onoverlayChange")).state=e,o(window).trigger(t)},c.prototype.addCounter=function(){var e=this.$body.find(".slide.is-active"),t=e.find(".box-image-overlay .richtext.section"),t=0<t.length?t:e.find(".accordion-handle"),e=this.counterTemplate({counterSeparator:this.counterSeparator});t.after(e),this.$counterCurrent=this.$overlayContentInner.find(".gallery-counter-current"),this.$counterTotal=this.$overlayContentInner.find(".gallery-counter-all"),this.$counterTotal.html(this.$galleryImage.length)},c.prototype.updateCounter=function(e){this.$counterCurrent.html(e)},c.prototype.handleSlide=function(e,t){var a=this.$overlayContent.width(),i=e.next().length,n=e.prev().length,o=n?e.prev():e.parent().find("> :last-child"),r=i?e.next():e.parent().find("> :first-child");this.$overlayContentInner.addClass("is-loading"),e.width(a),"next"===t?(o.addClass("is-loading"),n?(o.css({left:a+"px"}),e.css({left:a+"px"})):(o.css({left:0}),e.css({left:2*a+"px"})),this.$overlayContentInner.css({left:-2*a+"px"})):(r.addClass("is-loading"),i?(r.css({left:0}),e.css({left:0})):(r.css({left:1440}),e.css({left:-1440})),this.$overlayContentInner.css({left:0})),this.resetAccordionsHeight()},c.prototype.resetSlidePosition=function(){var e=o(".overlay-content-inner .is-active"),t=o(".overlay-container .overlay-content").width(),a=e.prev().length?e.prev():e.parent().find("> :last-child"),i=e.next().length?e.next():e.parent().find("> :first-child");o(".overlay-content .overlay-content-inner").add(i).add(a).removeClass("is-loading").css({left:-1*t+"px"}),e.css({width:t+"px",left:t+"px"})},c.prototype.getSlideContent=function(e,i){var n=o.Deferred(function(){o.ajax({type:"GET",url:e,dataType:"html",success:function(e){var e=o(e).find(".content > div"),e=(e.addClass("is-downloaded").find("script").remove(),"next"==i?this.$overlayContentInner.append(e):this.$overlayContentInner.prepend(e),this.$overlayContentInner.find(".is-downloaded")),t=(this.setActiveClass(e),this.setAccordionStateOnClick(e),e.removeClass("is-downloaded"),t="loaded",(a=o.Event("ongalleryslideload")).state=t,o(window).trigger(a),e.find(".accordion-title")),a=this.getAccordionState(t);this.galleryAccessibility(a),n.resolve()}.bind(this)})}.bind(this));return n.promise()},c.prototype.setHashRoute=function(e){window.location.hash="overlay"+e},c.prototype.getNextImage=function(e){var t,a=this.$el.find("."+s),i=a.siblings().find(".link-overlay").parent();return"prev"===e?t=a.prev(".link-overlay").length?a.prev(".link-overlay"):i.last(".link-overlay"):"next"===e&&(t=a.next(".link-overlay").length?a.next(".link-overlay"):i.first(".link-overlay")),t},c.prototype.getSlideHref=function(e){var e=this.getNextImage(e),t=e.find("a").attr("href").substring(1).split(/#overlay/g)[1];return this.setActiveClass(e),t},c.prototype.getActiveSlideContainer=function(t){var e=a.filter(this.$overlayContentInner.find(".slide"),function(e){return o(e).data("order")===t});return o(e)},c.prototype.getSlide=function(e){var t,a,i=this.getSlideHref(e),n=this.$el.find("."+s).data("order");this.isReady&&(this.isReady=!1,this.slidesArray.indexOf(n)<0?(a=this.getSlideContent(i,e),this.slidesArray.push(n),a.done(function(){(t=this.$overlayContentInner.find("."+s)).attr("data-order",n).addClass("slide"),this.handleSlide(t,e),this.onSlideLoaded(t).then(function(){this.addCounter(),this.updateCounter(n),this.checkAccordion(t),this.setCarouselArrowsHeight(),setTimeout(function(){this.resetSlidePosition(),this.isReady=!0}.bind(this),200)}.bind(this))}.bind(this))):(t=this.getActiveSlideContainer(n),n=t.data("order"),this.setActiveClass(t),this.updateCounter(n),this.handleSlide(t,e),setTimeout(function(){this.resetSlidePosition(),this.isReady=!0}.bind(this),200)),this.setHashRoute(i))},c.prototype.onSlideLoaded=function(e){var t=o.Deferred(),e=e.find("img"),a=new Image;return a.onload=function(){requestAnimationFrame(function(){t.resolve()})},a.src=e.attr("src"),t.promise()},c.prototype.checkAccordion=function(e){var t=e.find(".accordion-title"),t=this.getAccordionState(t);void 0!==this.accordionState&&this.accordionState!=[]&&this.accordionState!==t&&this.toggleAccordions(),this.setAccordionStateOnClick(e)},c.prototype.unbindEventsOnCarouselArrows=function(){this.$overlayContainer.find(".overlay-content").unbind("click")},c.prototype.bindEventsOnCarouselArrows=function(){this.$overlayContent=this.$overlayContainer.find(".overlay-content");var a=new e(this.$overlayContent[0],{dragLockToAxis:!0,dragBlockHorizontal:!0});this.$overlayContent.on("click",".carousel-next",function(){this.getSlide("next")}.bind(this)),this.$overlayContent.on("click",".carousel-previous",function(){this.getSlide("prev")}.bind(this)),a.on("panleft panright swiperight swipeleft",function(e){var t=e.direction;e.preventDefault(),2==t?this.getSlide("next"):4==t&&this.getSlide("prev"),a.stop()}.bind(this)),o(document).on("keydown",function(e){switch(e.which){case r:this.getSlide("prev");break;case l:this.getSlide("next")}}.bind(this))},c.prototype.addCarouselArrows=function(){var e=this.carouselArrowsTemplate();this.$overlayContent.append(e),this.$overlayCarouselArrows=this.$overlayContentInner.parent().find(".carousel-arrows")},c.prototype.setCarouselWidth=function(){var e=this.$overlayContent.width();this.$overlayContentInner.css({width:3*e,left:-1*e})},c.prototype.setCarouselWidthOnResize=function(){o(window).on("resize",a.throttle(function(){var e=this.$overlayContentInner.find(".slide"),t=this.$overlayContent.width();this.setCarouselWidth(),e.css({width:t+"px",left:t+"px"})}.bind(this)))},c.prototype.setCarouselArrowsHeight=function(){var e,t,a=o(".overlay-container .overlay-content-inner .slide.is-active .image img"),i=new Image;i.onload=function(){t=a.height(),e=this.$overlayCarouselArrows.height(),this.$overlayCarouselArrows.css({top:t/2-e/2+"px"})}.bind(this),i.src=a.attr("src")},c.prototype.fixImages=function(){this.$galleryImage.each(function(){var e=o(this),t=e.children().attr("class").replace("component-content",""),a=o(this).find(".component-content");e.addClass(t),e.parent().css("height",a.height()+"px")})},c.prototype.setupCarousel=function(t){o(window).on("onoverlayload",function(){var e=t.data("order");this.bindOverlayElements(),this.$overlayContainer.addClass("gallery-trigger-carousel"),this.$overlayContentInner.addClass("slides-container"),this.$overlayContentInner.find("> div").addClass("is-active slide").attr("data-order",e),this.slidesArray=[],this.slidesArray.push(e),this.updateCounter(e),this.setCarouselWidth(),this.resetSlidePosition(),this.setCarouselWidthOnResize(),0===this.$overlayCarouselArrows.length&&(this.addCarouselArrows(),this.unbindEventsOnCarouselArrows(),this.bindEventsOnCarouselArrows()),0===this.$overlayCounter.length&&(this.addCounter(),this.updateCounter(e))}.bind(this))},n.galleryTriggers=[],n.init=function(e){var t=new c(e);o(window).on("overlayOpen",function(e){t.checkAccordion(e.element),t.resetSlidePosition(),t.setCarouselArrowsHeight(),e.element&&e.element.find(".accordion-title")&&(e=t.getAccordionState(e.element.find(".accordion-title")),t.galleryAccessibility(e)),o(".carousel-btn").on("keydown",function(e){13===e.keyCode&&(e.target.click(),o(".overlay-close").focus()),9!==e.keyCode||-1===this.className.indexOf("carousel-prev")||e.shiftKey||e.preventDefault()}),o(".overlay-close").on("keydown",function(e){13===e.keyCode&&e.target.click(),9===e.keyCode&&e.shiftKey&&e.preventDefault()}),o(".accordion-title > a").on("keydown",function(e){13===e.keyCode&&e.target.click()})}),n.galleryTriggers.push(t)},n}),define("gallery-trigger/gallery-trigger",["jquery"],function(n){var e,t={};function a(e){var e=n(e).find(".image"),a=Math.max.apply(null,e.map(function(){return n(this).find("img").height()}).get()),i=Math.max.apply(null,e.map(function(){return n(this).find("img").width()}).get());e.each(function(){var e=n(this),t=e.find("img");e.height(a),/Android 4.2/i.test(navigator.userAgent)&&(e.height(i),t.height(i))})}return e=function(e){var t;a(e),t=e,n(window).on("resize.galleryTrigger",function(){a(t)})},t.init=function(){n(".gallery-trigger").each(function(){e(this)})},t}),define("image/component.fullscreenImage",["jquery","overlay/component.overlay","actions-panel/component.actionsPanel","actions-panel/shareButton","analytics/analyticsEventLayer"],function(a,e,i,t,n){var o={},r=a("body"),l=a("#global-ux");function s(e){var t=this,e=(this.$image=e,this.$body=a("body"),this.$overlayFullscreen="",this.$overlayContent=e.closest(".overlay-content"),this.isActionPanelPresent=this.$overlayContent.find(".actionsPanel").length,this.isInOverlay=e.closest(".overlay-content").length,this.isActionPanelPresent&&_.defer(function(){t.$actionPanel=i.actionsPanels[0].$elem.clone()}),document.querySelector(".button-container"));e&&("function"==typeof e.remove?e.remove():e.parentNode.removeChild(e)),this.addFullscreenBtn(),this.bindUIEvents()}return s.prototype.fullscreenBtnTemplate=_.template('<div class="button-container"><span class="button-toggle-fullscreen" tabindex="0">Toggle Fullscreen</span></div>'),s.prototype.overlayFullscreenTemplate=_.template('<div class="overlay-fullscreen-container"><div class="overlay-fullscreen"><span class="overlay-close" tabindex="0"><i class="icon-plus icon-x"></i></span><img src="<%= imageSource %>" alt="" /></div></div>'),s.prototype.fullscreenCaptionTemplate=_.template('<div class="fullscreen-caption"><h3><%= imageCaption %></h3></div>'),s.prototype.hideFullscreenOnClick=function(){var e=this.$overlayFullscreen;this.$overlayFullscreen.on("click",function(e){a(e.target).parents(".actionsPanel").length||this.hideFullscreen()}.bind(this)),e.on("click",function(e){e=e.target;this.$overlayFullscreen.is(e)||0!==this.$overlayFullscreen.has(e).length||this.hideFullscreen()}.bind(this)),r.on("keydown",function(e){27===(e.keyCode||e.which)&&this.hideFullscreen()}.bind(this))},s.prototype.bindUIEvents=function(){var e=this.$image.find(".button-container"),t=this.$body.find(".accordion.section h3").text();e.on("click",function(){e.parents().hasClass("js-panorama-overlay-content")||n.getImageVideoInteractionsEvents().trackFullSizeImageInOverlay(t),this.showFullscreen()}.bind(this)).on("keydown",function(e){13===e.which&&a(this).trigger("click")}),this.$body.on("hideFullscreen",this.hideFullscreen.bind(this))},s.prototype.addFullscreenBtn=function(){var e=this.fullscreenBtnTemplate(),e=a(e).get(0);this.$image.append(e)},s.prototype.addOverlayFullscreen=function(){var e=this.$image.find("img").attr("src"),e=this.overlayFullscreenTemplate({imageSource:e});this.$overlayFullscreen=a(e),l.append(this.$overlayFullscreen.get(0)),this.isInOverlay&&(this.addCaption(),this.isActionPanelPresent)&&this.addActionPanel(),this.hideFullscreenOnClick()},s.prototype.animateFullscreen=function(){var e;4===parseInt(!!(e=(e=(e||navigator.userAgent).toLowerCase()).match(/android\s([0-9\.]*)/))&&e[1])?this.$body.addClass("fullscreen-active"):requestAnimationFrame(function(){this.$body.addClass("fullscreen-active")}.bind(this))},s.prototype.showFullscreen=function(){r.off("keydown"),this.addOverlayFullscreen(),this.animateFullscreen();this.$body.find(".accordion.section h3").text();this.$body.trigger("viewImageFullScreen"),e.overlays[0].isFullScreenOpen=!0},s.prototype.hideFullscreen=function(){this.$body.removeClass("fullscreen-active"),this.$overlayFullscreen.remove(),e.overlays[0].isFullScreenOpen=!1,this.$overlayContent.focus(),r.on("keydown",function(t){_.each(e.overlays,function(e){e.hideOverlayOnEscapeKeydown(t)})}),r.off(".fullscreenimage")},s.prototype.addCaption=function(){var e=this.$body.find(".accordion-overlay");e.length&&(e=e.find("h3").html(),e=this.fullscreenCaptionTemplate({imageCaption:e}),e=a(e).get(0),this.$overlayFullscreen.find(".overlay-fullscreen").append(e))},s.prototype.addActionPanel=function(){this.$overlayFullscreen.find(".fullscreen-caption").append(this.$actionPanel),i.init(this.$actionPanel),t.init(this.$actionPanel.find(".share-content"))},o.images=[],o.init=function(e){e=new s(e);o.images.push(e)},o}),define("image/component.imageCaption",["jquery","mediaQuery"],function(o,t){var e={};function a(){var e=o(".common-image .caption"),t=o(".common-image .caption.pos-blockout");e.hasClass("pos-blockout")&&t.each(function(){var e=o(this),t=e.find(".image-caption p").height(),a=e.find("picture img").height();e.find(".image-caption p").css("margin-top",a/2-(t-12)+"px")})}function i(){o(".common-brandGallery").length||o(".common-image").each(function(){var e=o(this),t=o(window).width(),e=(e.find("picture"),e.find("img")),a=e.height(),i=e.width();1025<t?e.parent(".component-content").css({width:i+"px",height:a+"px"}):e.parent(".component-content").css({width:"100%"})})}function n(){o(".common-image, .mediaCarouselItem").each(function(){var e=o(this),t=o(window).width(),a=t<767,t=768<=t&&t<=1024,e=e.find(".is-small").find("img"),i=e.data("img-width"),n=e.data("img-height");a&&e.css({width:i+"px",height:n+"px"}),t&&e.css({width:i+"px",height:n+"px"})})}function r(){o(".common-image.align-inline").each(function(){o(this).parent().addClass("align-inline")})}function l(){var e=o(".common-image .image-caption.expanded");e.children("p").outerHeight(),e.children(".expand-wrap").outerHeight(),e.height();e.on({mouseenter:function(){o(this).addClass("expanded-hover")},mouseleave:function(){o(this).removeClass("expanded-hover")}})}return a(),i(),n(),r(),l(),o(window).resize(function(){setTimeout(function(){a(),i(),n(),r(),l()},500)}),e.init=function(e){e=e,"mobile"==t.getMediaType()&&e.attr("style",e.attr("data-style-mobile"))},e}),define("image/component.imageHeight",["jquery","mediaQuery"],function(n,o){var e={};n("body"),n("#global-ux");function t(e){var t,a,i=e.data("browser");void 0!==i&&(r(e,i),t=e,a=i,n(window).resize(function(){r(t,a)}))}function r(e,t){var a=o.getMediaType(),i=(e.css("height","auto"),e.height());switch(a){case"mobile":i=i*parseInt(t.mobile)/100,e.css("height",i+"px");break;case"tablet":i=i*parseInt(t.tablet)/100,e.css("height",i+"px");break;case"desktop":i=i*parseInt(t.desktop)/100,e.css("height",i+"px");break;case"xlarge":i=i*parseInt(t.xlarge)/100,e.css("height",i+"px")}}return e.init=function(e){t(e)},e}),define("common/common.images",["jquery"],function(e){var t={init:function(){}};return t}),define("common/common.location",["jquery","cookie","_","marketConfigGlobal","analytics/analyticsEventLayer"],function(k,e,S,x,D){var n,P={};return P.COOKIE_LOC="common.location.LOC",P.COOKIE_LOC_TYPE="common.location.type",P.COOKIE_LOC_URL="common.location.LOC_URL",P.addOrUpdateUrlParam=function(e,t,a){var i=new RegExp("([?&])"+t+"=[^&#]*","i");return e=i.test(e)?e.replace(i,"$1"+t+"="+a):e+(/\?/.test(e)?"&":"?")+t+"="+a},P.getParameterByName=function(e,t){t=t||window.location.href,e=e.replace(/[\[\]]/g,"\\$&");e=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return e?e[2]?decodeURIComponent(e[2].replace(/\+/g," ")):"":null},P.fillValue=function(){var e=".selectZipCity",t="l",a="u",i=P.getParameterByName(t),t=(i?k.cookie(P.COOKIE_LOC,i,{path:"/"}):i=k.cookie(P.COOKIE_LOC)||"",n=P.getParameterByName(a),k(e+' [name="'+t+'"]')),e=k(e+' [name="'+a+'"]');null!=i&&""!=i&&(t.is(":text")&&t.val(i),t.is("select"))&&(t.find('option[value="'+i+'"]').prop("selected",!0),t.closest(".select2-container").length)&&t.select2("val",i).trigger("change"),null!=n&&""!=n&&"radio"==e.attr("type")&&e.each(function(){k(this).attr("data-attr-value")===n&&k(this).prop("checked",!0)})},P.ifSubmitForm=function(t,e){k(t).on("submit",function(e){e.preventDefault();var t=k(this);if(!k("body").find(".fds-refactored-UI").length||1!=P.validatePostalCode(k("#dd").val())){e=k("#isDynamicPriceBasedLocation").val();k(this).find('input[type="hidden"]').length&&k(this).find('input[type="hidden"]').remove();var a=k('.form-radioButtons input[type="radio"]:checked').attr("data-attr-value"),i=k(this).find('.input-field input[name="l"]').val(),i=(k("body .buildPriceRefresh").length&&D.getBuildPriceRefreshEvents().trackUsageType(a),k("body .quickBnp").length&&D.getQuickBnpEvents().trackQuickBnPUsageType(a),"true"===e&&(k.cookie(P.COOKIE_LOC_TYPE,a,{path:"/"}),k.cookie(P.COOKIE_LOC,i,{path:"/"})),k.cookie(P.COOKIE_LOC)),n=k("#countryCodeISO").val(),o=window.localStorage;if(i&&o.getItem("common.location."+n+"."+i+".prices")&&o.removeItem("common.location."+n+"."+i+".prices"),k(this).attr("data-url-redirect")&&""!=k(this).attr("data-url-redirect")){"#.html"==(o=k(this).attr("data-url-redirect"))&&(o=window.location.pathname);var r="",l="",s="",c={};if(-1<window.location.href.indexOf("?")){var d=(window.location.href.slice(window.location.href.indexOf("?")+1).split("&")+"").split(","),u=d.length,p=(C=k(this).serializeArray()).length,m="",h=[];S.object(S.map(C,S.values)).u=a;for(var f=0;f<p;f++)0==u&&f==p-1?(m=m+C[f].name+"="+C[f].value,"l"==C[f].name&&(l=(c=k("#d option:selected")).text(),s=c.val(),void 0===l||""==l||null==l?m="&"+m+"c="+k("#dd").val():(m="&"+m+"c="+l,h.push("c")))):(m=m+C[f].name+"="+C[f].value+"&","l"==C[f].name&&(l=(c=k("#d option:selected")).text(),s=c.val(),void 0===l||""==l||null==l?m=m+"c="+k("#dd").val()+"&":(m=m+"c="+l+"&",h.push("c")))),h.push(C[f].name);for(var g="",f=0;f<u;f++){for(var v=!0,y=h.length,b=0;b<y;b++){var w=d[f].split("=");if(h[b]==w[0]){v=!1;break}if("c"==w[0]){v=!1;break}}v&&(f==u-1?g+=d[f]:g=g+d[f]+"&")}r=o+"?"+m+g.split("#")[0]}else{for(var C,p=(C=k(this).serializeArray()).length,m="",f=0;f<p;f++)0==u&&f==p-1?(m=m+C[f].name+"="+C[f].value,"l"==C[f].name&&(l=(c=k("#d option:selected")).text(),s=c.val(),m=void 0===l||""==l||null==l?"&"+m+"c="+k("#dd").val():"&"+m+"c="+l)):(m=m+C[f].name+"="+C[f].value+"&","l"==C[f].name&&(l=(c=k("#d option:selected")).text(),s=c.val(),m=void 0===l||""==l||null==l?m+"c="+k("#dd").val()+"&":m+"c="+l+"&"));r=o+"?"+m}"au"==x.getCurrentMarketCode()&&"true"===e&&k.cookie(P.COOKIE_LOC_URL,r,{path:"/"}),"in"==x.getCurrentMarketCode()&&"true"===e&&k.cookie(P.COOKIE_LOC,s,{path:"/"}),-1===window.location.pathname.indexOf("compare-model-old")&&setTimeout(function(){t.find(".input-field.error").length||""===t.find('[name="c"]').val()||k(".refactoredModelDetailsCompare").length||(window.location=r)},500)}else-1===window.location.pathname.indexOf("compare-model")&&setTimeout(function(){var e;t.find(".input-field.error").length||""===t.find('[name="c"]').val()||k(".refactoredModelDetailsCompare").length||(e=new URL(window.location.href),window.open(e,"_self"))},500)}}),k(document).on("keyup",function(e){13==e.which&&k(t).trigger("submit")})},P.initCityCombo=function(){k(document).ready(function(){var e=k("div.city-container-div").data("apiurl");e&&k.ajax({url:e,type:"GET",dataType:"json",success:function(e){var t;e&&(e=S.sortBy(e,function(e){return e.value}),k.each(e,function(e,t){k("select.comboSelectCity").append(new Option(t.value,t.key))}),(e=e).length)&&((t=P.getParameterByName("l"))||((e,t)=>{if(e)for(var a=0;a<t.length;a++)if(e==t[a].key)return 1})(t=k.cookie(P.COOKIE_LOC),e)||(t=e[0].key),k("select.comboSelectCity").select2("val",t).trigger("change"))}})})},P.validatePostalCode=function(e){var t,a=!1,i=k("#dd").parents(".input-field");return new RegExp(/^[0-9]{4}$/g).test(e)?(t=k("body").find(".fds-refactored-UI"),i=k("#dd").parents(".input-field"),t=t.data("current-page")+".postalcode."+e+".data",k.ajax({url:t,type:"GET",dataType:"json",async:!1,success:function(e){0==e.result&&(i.addClass("error"),k("body").find(".submitBtn").addClass("disabled"),a=!0)}})):(i.addClass("error"),k("body").find(".submitBtn").addClass("disabled"),a=!0),a},k(document).on("keyup","body #dd",function(){k("#dd").parents(".input-field").removeClass("error"),k("body").find(".submitBtn").removeClass("disabled")}),P.init=function(e,t){var a,i;P.fillValue(),P.ifSubmitForm(e,t),P.initCityCombo(),a=k.cookie(P.COOKIE_LOC_TYPE),i=k('.selectZipCity .radioButtons input[type="radio"]'),e=k(".selectZipCity .radioButtons label"),a?(i.each(function(e,t){k(t).prop("checked",!1),k(t).removeClass("checked"),k(t).val(k(t).attr("data-attr-value"))}),i.each(function(e,t){k(t).attr("data-attr-value")===a&&(k(t).addClass("checked"),k(t).prop("checked",!0))})):(i.eq(0).addClass("checked"),i.eq(0).prop("checked",!0)),e.on("click",function(){i.each(function(e,t){k(t).prop("checked",!1),k(t).removeClass("checked")}),k(this).closest("li").find("> input").addClass("checked"),k(this).closest("li").find("> input").prop("checked",!0)})},P}),define("common/common.socialShareSection",["jquery","jquery-flexslider"],function(r,e){var t={initSlider:function(){var e=".social-share-section .mobile-share .flexslider";r(e).length&&(3<r(".social-share-section .mobile-share .flexslider li").length?r(e).flexslider({animation:"slide",animationLoop:!1,controlNav:!0,directionNav:!1,minItems:3,maxItems:3,itemWidth:80,itemMargin:0}):r(e).addClass("none-slider"))},setSharedUrl:function(){r(".social-share-section .social-links a").each(function(){var e,t=r(this).attr("data-href").indexOf("u="),a=r(this).attr("data-href").indexOf("url="),i=r(this).attr("data-href").indexOf("mailto"),n=r(this).attr("data-href").indexOf("&media"),o=encodeURIComponent(window.location.href);0<=t?(e=r(this).attr("data-href").replace(r(this).attr("data-href").substring(t),"u="+o),r(this).attr("href",e)):0<=a?(e=0<=r(this).attr("data-href").indexOf("pinterest")?r(this).attr("data-href").replace(r(this).attr("data-href").substring(a,n),"url="+o):r(this).attr("data-href").replace(r(this).attr("data-href").substring(a),"url="+o),r(this).attr("href",e)):0<=i&&(e=r(this).attr("data-href").replace(r(this).attr("data-href").substring(r(this).attr("data-href").indexOf("http")),o),r(this).attr("href",e))})},init:function(){t.initSlider(),t.setSharedUrl()}};return t}),define("section-footer/section.footer",["jquery"],function(a){return{init:function(){a(".footer-links .footer-links-column").each(function(){a(this).find("ul").wrap('<div class="footer-content"></div>'),a(this).find("ul").height("auto");var e=a(".footer-links.row .show-mob-only").find("h3").first(),t=e.parent().find("ul").outerHeight();e.addClass("open"),e.next("div.footer-content").addClass("active").css("height",t),a("h3",this).on("click",function(){a(this).hasClass("open")?a(this).removeClass("open"):a(this).addClass("open"),this.currentWrapper=a(this).parent().find(".footer-content"),this.currentElement=a(this).parent().find("ul"),this.currentWrapper.hasClass("active")?(this.currentWrapper.removeClass("active"),this.currentWrapper.height(0)):(this.currentWrapper.addClass("active"),this.currentWrapper.height(this.currentElement.outerHeight()))})})}}}),define("cookie-disclaimer/component.cookieDisclaimer",["jquery","marketConfigGlobal"],function(a,i){function n(){a.cookie(s,r,{path:"/"}),o.trigger("cookieClosed"),o.slideUp("slow")}var o,r,l,e={},s="guxfoap-cookiedisclaimer";return e.init=function(){a("body").hasClass("cq-wcm-edit")||a(".cookie-disclaimer").each(function(e,t){o=a(t),o.data("country-language-check")&&(s=i.getCurrentMarketCode()+"-"+i.getCurrentLanguageCode()+"-cookiedisclaimer"),r=o.data("last-modified"),l=a.cookie(s),(o.data("always-display")||!l||l<r)&&((t=o.find(".close, .cta-button")).click(n),t.keypress(function(e){13==e.which&&n()}),o.trigger("cookieOpened"),o.slideDown("slow"))})},e}),define("disclosure/component.disclosure",["jquery","_","isAuthor","tooltip-gux/global.ux.tooltip","utils/convertKeyword"],function(c,d,e,o,n){var u,t={},p={},i=d.template('<li data-disclosure="${key}"><span>[${key}]</span>&nbsp;${value}</div></li>'),l={},s=!e.getAuthorStatus();function r(e,t){var a,i=c("html, body"),n=e.data("disclosure"),e=i.find(".disclosure-accordion"),o=i.find(".secondaryNavigation .navigation").height(),r=i.find(".disclosure-accordion li[data-disclosure]");e.hasClass("collapsed")&&e.removeClass("collapsed"),r.each(function(){var e=c(this);e.removeClass("is-active"),e.data("disclosure")===n&&(a=e.offset().top-o,e.addClass("is-active")),e.hasClass("is-active")&&"keypress"===t.type&&e.trigger("focus")}),i.animate({scrollTop:a},300)}function m(e,t){var a=c("html, body"),i=e.data("disclosure"),n="";a.find(".disclosure-accordion li[data-disclosure]").each(function(){var e=c(this);e.data("disclosure")===i&&(n=e.html())}),o.showTooltip(e,t,n)}function h(e,t,a){var n,o,i,r;i=a,r=c(".disclosure-generic"),(0<i.length||0<r.children().length)&&(n=t,i=a,o=(()=>{var e,t=0;for(e in l)l.hasOwnProperty(e)&&l[e]>t&&(t=l[e]);return t+1})(),i.each(function(){var e=c(this),t=e.data("disclosure"),a=s?o:t,i=p[t];l[t]?s&&g(e,l[t]):(f(n,a,i),s&&g(e,a),l[t]=o,o++)}),s)&&e.removeClass("hidden")}function f(e,t,a){t=i({key:t,value:a});e.append(t)}function g(e,t){e.data("disclosure",t),e.html(t),e.css({display:"inline"})}function v(e,t){var a,i,n;"box"==t?((n=e).on("click",function(e){r(n,e)}),n.on("keyup",function(e){13===e.which&&r(n,e)})):(i=u,(a=e).on("click",function(e){a.is(e.target)&&(e.stopPropagation(),m(a,i))}),a.on("keyup",function(e){13===e.which&&m(a,i)})),s&&c("body").find(".disclosure-accordion").removeClass("hidden")}return t.initOne=function(e,t){var a=c(".disclosure-list"),i=s?l[t]:t;l[t]||(i=s?a.find("li").length+1:t,f(a,i,p[t]),l[t]=i),g(e,i),v(e),console.log("Entro"),c(".gux-variable.gux-date-variable").length&&n.toDate(".gux-variable.gux-date-variable")},t.init=function(){var e,t,a,i,n,o=c("body"),r=o.find(".disclosure-accordion"),l=r.find(".disclosure-list"),s=r.find(".disclosure-heading"),o=o.find("sup[data-disclosure]:not(.clone sup[data-disclosure])");r.find("span[data-disclosures-show-mode]").data("disclosures-show-mode"),u=r.find("span[data-disclosures-overlay-heading]").data("disclosures-overlay-heading"),i=c("span[data-disclosures-json]").data("disclosures-json"),e={},c.each(i,function(){e[this.name]=this.text}),p=e,o=c(d.filter(o,function(e){var t=!0,e=c(e).data("disclosure"),e=p[e];return t=d.isUndefined(e)?!1:t})),t=s,i=c(a=r).find(".disclosure-text"),s=c(i).attr("data-disclosure-margin-dtop"),n=c(i).attr("data-disclosure-margin-mob"),640<c(window).width()?c(i).attr("style",s):c(i).attr("style",n),t.on("click",function(e){a.hasClass("collapsed")?a.removeClass("collapsed"):a.addClass("collapsed"),e.stopImmediatePropagation()}),t.on("keyup",function(e){13===e.which&&t.trigger("click")}),h(r,l,o),o.each(function(){var e=c(this).find("span[data-disclosures-show-mode]").data("disclosures-show-mode");v(c(this),e)})},t}),define("vehicleAttribute/component.vehicleAttribute",["jquery","configurationProvider","requestCacheManager","vehicleAttributeUtil","prices-display-configuration/component.prices-display-configuration","analytics/analyticsEventLayer"],function(d,l,e,t,a,s){var c={items:[],init:function(){function a(e){e=d(e);e.find(".attribute"),l.get(e);e.addClass("service-ok")}function e(){var a,e=d(".common-vehicle-attributes");e.length<1||(d(".common-vehicle-attributes .component-content").attr("data-usefds")&&e.css("border","none"),(a=d("#namePlates")).length?d.each(d(".common-vehicle-attributes input"),function(e,t){"combinedKey"===t.name&&a.val(a.val()+","+t.value)}):d.each(d(".common-vehicle-attributes input"),function(e,t){"combinedKey"===t.name&&d("body").append(d('<input type="hidden" id="namePlates" value='+t.value+">"))}),e.each(function(){var e=d(window).width(),t=d(this),a=t.children(),i=a.children(),n=a.data("margin-desktop"),o=a.data("margin-mobile"),a=(a.addClass("common-richtext"),t.find(".pricing-segment")),r=a.find(".notes").children(),l=a.find(".price > .labels").children(),s=a.find(".price > .values").children(),r=(r.length||a.addClass("no-notes"),l.length||s.length||a.addClass("no-price"),t.find(".fuel-economy-segment")),l=r.find(".fuel-1").children().children().children(),s=r.find(".fuel-2").children().children().children(),l=(l.length?r.removeClass("no-fuel1"):r.addClass("no-fuel1"),s.length?r.removeClass("no-fuel2"):r.addClass("no-fuel2"),t.find(".seating-segment")),s=l.find(".labels").children(),c=l.find(".values").children();s.length?l.removeClass("no-label"):l.addClass("no-label"),c.length?l.removeClass("no-value"):l.addClass("no-value"),a.hasClass("no-notes no-price")&&r.hasClass("no-fuel1 no-fuel2")&&l.addClass("only-seating"),767<e?(t.attr("style",n),s=t.children(".price-retail").height()-60,r.height(s),a.height(s)):(t.attr("style",o),i.css("height",""),c=t.find(".fuel-economy-segment.no-fuel1 .fuel-1"),l=t.find(".fuel-economy-segment.no-fuel2 .fuel-2"),c.find(".fuel").remove(),l.find(".fuel").remove())}))}var i,n,o;d(".section.splitter").find(".vehicle-attributes").addClass("vehicle-items"),d(".vehicle-items").each(function(){var e=d(".vehicle-items").find("> div > .splitter-column:nth-child(1)"),t=d(".vehicle-items").find("> div > .splitter-column:nth-child(2)"),e=(e.addClass("pricing-segment"),t.addClass("fuel-seating-segment"),t.find("> .sameHeightSplitter > .section.splitter > .splitter > div > .splitter-column:nth-child(1)")),t=t.find("> .sameHeightSplitter > .section.splitter > .splitter > div > .splitter-column:nth-child(2)");e.addClass("fuel-segment"),t.addClass("seating-segment"),d(".fuel-segment > div:nth-child(1) > div:nth-child(1) > div:nth-child(2) > div:nth-child(1) > div:nth-child(1)").addClass("notes"),d(".fuel-segment > div:nth-child(1) > div:nth-child(1) > div:nth-child(2) > div:nth-child(1) > div:nth-child(2)").addClass("fuels"),d(".fuels > div:nth-child(1) > div:nth-child(1) > div:nth-child(2) > div:nth-child(1) > div:nth-child(1)").addClass("fuel-1"),d(".fuels > div:nth-child(1) > div:nth-child(1) > div:nth-child(2) > div:nth-child(1) > div:nth-child(2)").addClass("fuel-2")}),e(),d(window).resize(function(){setTimeout(function(){e()},500)}),0<d(".common-vehicle-attributes").length&&d(".common-vehicle-attributes").each(function(){null==d(".common-vehicle-attributes").attr("data-update")&&("true"==d(this).find("input[name=isModel]").val()?updatePriceAjax(d("#isDynamicPrice").val(),"",d(".common-vehicle-attributes .price-retail").find("input[name=combinedKey]").val(),[".common-vehicle-attributes .pricing-segment"]):updatePriceAjax(d("#isDynamicPrice").val(),d(".common-vehicle-attributes .price-retail").find("input[name=combinedKey]").val(),"",[".common-vehicle-attributes .pricing-segment"]),d(this).attr("data-update","true"))}),0<d(".common-vehicle-attributes").length&&(n=d.cookie("common.location.LOC"),i=d.cookie("common.location.type"),o=d("#isDynamicPriceBasedLocation").val(),d(".common-vehicle-attributes").each(function(){var e=d(this),t=e.find(".location-overlay").attr("data-commercial-label"),a=e.find(".location-overlay").attr("data-personal-label");"false"!==o?e.find(".location-overlay").css("display","block"):e.find(".pricing-segment").addClass("no-notes"),n&&"false"!==o&&(e.find(".location-overlay .firstTime").css("display","none"),e.find(".location-overlay .notFirstTime").css("display","inline"),e.find(".location-overlay .prices-shown").css("display","block"),"P"===i?e.find(".location-overlay .auPostaTypeOverlay").html(a||""):"B"===i&&e.find(".location-overlay .auPostaTypeOverlay").html(t||""),e.find(".location-overlay .auPostaCodeOverlay").text(n),e.find(".location-overlay .auPostaCodeOverlay").text(n))})),0<d(".common-vehicle-attributes").length&&(n=d.cookie("common.location.LOC"),o=d("#isDynamicPriceBasedLocation").val(),n&&"false"!==o&&(d(".common-vehicle-attributes").each(function(){d(this).find(".auPostaCodeOverlay").text(n)}),d('.common-vehicle-attributes .price  span[id*="maxPrice"]').addClass("loading-price"),d('.common-vehicle-attributes .price  span[id*="startingPrice"]').addClass("loading-price"),d('.common-vehicle-attributes .price  span[id*="priceRange"]').addClass("loading-price")),d(document).on("pricesUpdated",function(e){var r;e.message?(r=e.localData,d(".common-vehicle-attributes").each(function(){var e,t,n=d(this),o=n.find('input[name="combinedKey"]').val(),a=r[o],i=getCookie("common.location.LOC"),i=localStorage.getItem("common.location."+d("#countryCodeISO").val()+"."+i+".prices"),i=d.parseJSON(i);a?(e=a.maxPrice,t=a.startingPrice,e?n.find('span[id="maxPrice'+a.id+'"]').html(e):n.find('span[id="maxPrice'+a.id+'"]').html(""),t?n.find('span[id="startingPrice'+a.id+'"]').html(t):n.find('span[id="startingPrice'+a.id+'"]').html(""),n.find('span[id="priceRange'+a.id+'"]').length&&e&&t?n.find('span[id="priceRange'+a.id+'"]').html(t+"&nbsp;-&nbsp;"+e):n.find('span[id="priceRange'+a.id+'"]').html("")):i?d.each(i,function(e,t){return d.each(t.derivatives,function(e,t){var a,i;return t.id===o&&(a=t.maxPrice,i=t.startingPrice,a?n.find('span[id="maxPrice'+t.id+'"]').html(a):n.find('span[id="maxPrice'+t.id+'"]').html(""),i?n.find('span[id="startingPrice'+t.id+'"]').html(i):n.find('span[id="startingPrice'+t.id+'"]').html(""),n.find('span[id="priceRange'+t.id+'"]').length&&a&&i?n.find('span[id="priceRange'+t.id+'"]').html(i+"&nbsp;-&nbsp;"+a):n.find('span[id="priceRange'+t.id+'"]').html("")),!1}),!1}):(n.find('span[id="maxPrice'+o+'"]').html(""),n.find('span[id="startingPrice'+o+'"]').html(""),n.find('span[id="priceRange'+o+'"]').html(""))})):e.setToNull&&d(".common-vehicle-attributes").each(function(){var e=d(this),t=e.find('input[name="combinedKey"]').val();e.find('span[id="maxPrice'+t+'"]').html(""),e.find('span[id="maxPrice'+t+'"]').closest("p").css("display","none"),e.find('span[id="startingPrice'+t+'"]').html(""),e.find('span[id="startingPrice'+t+'"]').closest("p").css("display","none"),e.find('span[id="priceRange'+t+'"]').html(""),e.find('span[id="priceRange'+t+'"]').closest("p").css("display","none")}),d('.common-vehicle-attributes .price  span[id*="maxPrice"]').removeClass("loading-price"),d('.common-vehicle-attributes .price  span[id*="startingPrice"]').removeClass("loading-price"),d('.common-vehicle-attributes .price  span[id*="priceRange"]').removeClass("loading-price"),d('.common-vehicle-attributes .price  span[id*="maxPrice"],.common-vehicle-attributes .price  span[id*="startingPrice"],.common-vehicle-attributes .price  span[id*="priceRange"],.gux-disclosure:hidden, .gux-variable').removeAttr("tabindex")})),d(".vehicle-attributes>div").find(".splitter-column:first").addClass("borderRightIE"),d(".vehicle-attributes>div").find(".splitter-column>.sameHeightSplitter").each(function(){d(this).find(".section:last").css("margin-right","0px")});var t=d(".common-vehicle-attributes .pricing-segment .notes .location-overlay"),r=t.find(".firstTime");t.find(".gux-tooltip").appendTo(r.children("p")),d(".vehicleAttribute").each(function(e,t){c.items.push(new a(t))}),d(document).ready(function(){0<d(".vehicleAttribute").length&&d(".vehicleAttribute").each(function(){null==d(".vehicleAttribute").attr("data-update")&&(updatePriceAjax(d("#isDynamicPrice").val(),"",d(".vehicleAttribute .price-retail input[name=combinedKey]").val(),[".vehicleAttribute .attribute-group"]),d(this).attr("data-update","true"))}),0<d(".show-qrcode-layer").length&&d(".show-qrcode-layer").click(function(){d(".qrcode-layer").css("display","block"),d(".qrcode-close-btn").click(function(){d(".qrcode-layer").css("display","none")})}),d(".trackPaymentCalculator").click(function(){s.getSimpleEmiCalCulatorEvents().trackPaymentCalculatorButton()})})}};return c}),define("secondary-navigation/component.secondaryNavigation",["jquery","_","mediaQuery","isAuthor","analytics/analyticsEventLayer"],function(r,t,a,i,e){var l,n={};function o(e){this.$el=r(e),this.currentUrl=location.pathname,this.expandedVerticalNav=!1,this.expandedVerticalSubNav=!1,this.expandedTertiaryNav=!1,this.pageIsTertiary=!1,this.isAuthorMode=i.getAuthorStatus(),this.setP2Class(),this.bindUIElements(),this.displaySubNav(),this.setActiveLink(),this.setTabIndex(),this.addMenu(),this.addSubmenuClass(),this.setNavByMedia(a.getMediaType()),this.bindUIEvents(),this.setNavTitle(),this.hashScrollToID()}function s(t,a){return Object.keys(a).forEach(function(e){t=t.replace(e,a[e])}),t}return o.prototype.bindUIElements=function(){this.$window=r(window),this.$body=r("body"),this.$mainNav=r(".main-nav"),this.$secNavContainer=r(".section.secondaryNavigation"),this.$cookieDisclaimer=r(".cookie-disclaimer"),this.$secNav=this.$el.find(".navigation"),this.$verticalNav=this.$el.find(".navigation-vertical"),this.$navigationVerticals=this.$el.find(".navigation-vertical,.sub-navigation-vertical"),this.$verticalNav=r([]),0<this.$navigationVerticals.length&&(this.$verticalNav=r(this.$navigationVerticals[0])),this.$verticalSubNav=r([]),1<this.$navigationVerticals.length&&(this.$verticalSubNav=r(this.$navigationVerticals[1])),this.$horizontalNav=this.$el.find(".navigation-horizontal"),this.$subVerticalNav=this.$verticalNav.find("li ul"),this.$subVerticalNav.each(function(){var e=r(this);0<e.closest(".section.secondaryNavigation").length&&(e.closest("li").addClass("parent"),e.addClass("submenu"))}),this.$subVerticalNavDesktop=this.$el.find(".navigation-vertical").find(".desktop").find(".parent"),this.$subVerticalNavMobile=this.$el.find(".navigation-vertical").find(".mobile").find(".parent");var e=r(window).height()-r(".main-nav").outerHeight(!0);this.$verticalNav.find("ul").css("max-height",e),0<this.$verticalNav.find("h1").length?this.$verticalNavHeader=this.$verticalNav.find("h1"):this.$verticalNavHeader=this.$verticalNav.find("h2"),0<this.$verticalSubNav.find("h1").length?this.$verticalSubNavHeader=this.$verticalSubNav.find("h1"):this.$verticalSubNavHeader=this.$verticalSubNav.find("h2"),this.showMenu=!1,0!==this.$secNav.find(".dropdown-navigation-button").length&&(this.showMenu=!0),this.setParentClass()},o.prototype.setParentClass=function(){this.$secNavContainer.find("ul li").has("ul")&&r(this).addClass("parent")},o.prototype.tertiaryNavTemplate=t.template('<div class="tertiary-navigation navigation-vertical columns large-2 collapsed"><h2><%= headerText %></h2><ul><%= subnav %></ul></div>'),o.prototype.bindUIEvents=function(){var e=r(window).width();r(window).on("resize",t.throttle(function(){e!==r(window).width()&&(e=r(window).width(),this.setNavByMedia(a.getMediaType()),this.$body.trigger("click"))},300).bind(this)),this.isAuthorMode||this.$window.on("scroll",t.throttle(function(){this.stickyNav()},100).bind(this)),this.$horizontalNav.find("li > a").on("click",function(e){var t=e.currentTarget.hash;"#"===t.split("")[0]&&t.slice(1).length&&-1!==t.indexOf("https")&&-1!==t.indexOf("http")&&(r("html, body").animate({scrollTop:r(".secondaryNavigation").offset().top-r(".secondaryNavigation > .navigation.row").height()},100),e.preventDefault())}),this.$verticalNavHeader.on("click",function(e){e.stopPropagation(),this.$verticalNav.find("li.parent.open").trigger("click"),this.$verticalNav.toggleClass("collapsed"),this.$verticalSubNav.addClass("collapsed"),r(".submenu.active").hide(),this.$verticalNav.hasClass("collapsed")&&this.$verticalSubNav.hasClass("collapsed")?this.$secNavContainer.removeClass("navOpen"):this.$secNavContainer.addClass("navOpen"),this.expandedTertiaryNav&&this.$secNav.find(".tertiary-navigation h2").trigger("click"),"mobile"!==a.getMediaType()&&"tablet"!==a.getMediaType()||this.$horizontalNav.toggleClass("collapsed"),this.expandedVerticalNav=!this.expandedVerticalNav,this.expandedVerticalSubNav=!1}.bind(this)),this.$verticalSubNavHeader.on("click",function(e){e.stopPropagation(),this.$verticalSubNav.toggleClass("collapsed"),this.$verticalNav.addClass("collapsed"),r(".submenu.active").hide(),this.$verticalNav.hasClass("collapsed")&&this.$verticalSubNav.hasClass("collapsed")?this.$secNavContainer.removeClass("navOpen"):this.$secNavContainer.addClass("navOpen"),this.expandedTertiaryNav&&this.$secNav.find(".tertiary-navigation h2").trigger("click"),"mobile"!==a.getMediaType()&&"tablet"!==a.getMediaType()||this.$horizontalNav.toggleClass("collapsed"),this.expandedVerticalSubNav=!this.expandedVerticalSubNav,this.expandedVerticalNav=!1}.bind(this)),r(".tertiary-navigation").on("click","h2",function(e){e.stopPropagation(),this.$secNav.find(".tertiary-navigation").toggleClass("collapsed"),this.expandedVerticalNav&&this.$verticalNavHeader.trigger("click"),this.expandedVerticalSubNav&&this.$verticalSubNavHeader.trigger("click"),this.expandedTertiaryNav=!this.expandedTertiaryNav}.bind(this)),r(".tertiary-navigation").on("keyup",function(e){e.stopPropagation(),13==(e.keyCode||e.which)&&(this.$secNav.find(".tertiary-navigation").toggleClass("collapsed"),this.expandedVerticalNav&&this.$verticalNavHeader.trigger("click"),this.expandedVerticalSubNav&&this.$verticalSubNavHeader.trigger("click"),this.expandedTertiaryNav=!this.expandedTertiaryNav)}.bind(this)),this.$subVerticalNavMobile.on("click",function(e){e.stopPropagation(),(e=r(e.target).is("li")?r(e.target):r(e.target).closest("li")).hasClass("open")||e.closest("ul").find(".open").removeClass("open"),e.toggleClass("open"),this.initMobileNavSize()}.bind(this)),this.$horizontalNav.on("keyup",function(e){this.$verticalNav.click()}.bind(this)),this.$verticalNavHeader.on("keydown",function(e){13===e.which&&e.target.click()}.bind(this)),this.$verticalSubNavHeader.on("keydown",function(e){13===e.which&&e.target.click()}.bind(this)),this.$secNav.on("click",".dropdown-navigation-button",function(e){e.preventDefault()}.bind(this)),this.$body.on("click",function(){this.expandedVerticalNav?this.$verticalNavHeader.first().trigger("click"):this.expandedVerticalSubNav?this.$verticalSubNavHeader.first().trigger("click"):this.expandedTertiaryNav&&this.$secNav.find(".tertiary-navigation h2").trigger("click")}.bind(this)),this.$subVerticalNavDesktop.on("click",function(e){r(e.currentTarget).closest("div").find(".opened").length?r(e.currentTarget).hasClass("opened")&&r(e.currentTarget).closest("div").find(">ul.submenu").is(":visible")?(r(e.currentTarget).closest("div").find(">ul.submenu").remove(),r(e.currentTarget).removeClass("opened")):(r(e.currentTarget).closest("div").find(">ul.submenu").remove(),r(e.currentTarget).closest("div").find(".opened").removeClass("opened"),r(e.currentTarget).addClass("opened"),r("html.rtl").length?r(e.currentTarget).closest("div").append(r(e.currentTarget).find("ul").css({right:e.currentTarget.getBoundingClientRect().width,"min-height":r(e.currentTarget).parents("ul").height(),height:"auto"}).clone(!0).addClass("active")):r(e.currentTarget).closest("div").append(r(e.currentTarget).find("ul").css({left:e.currentTarget.getBoundingClientRect().width,"min-height":r(e.currentTarget).parents("ul").height(),height:"auto"}).clone(!0).addClass("active"))):(r(e.currentTarget).addClass("opened"),r("html.rtl").length?r(e.currentTarget).closest("div").append(r(e.currentTarget).find("ul").css({right:e.currentTarget.getBoundingClientRect().width,"min-height":r(e.currentTarget).parents("ul").height(),height:"auto"}).clone(!0).addClass("active")):r(e.currentTarget).closest("div").append(r(e.currentTarget).find("ul").css({left:e.currentTarget.getBoundingClientRect().width,"min-height":r(e.currentTarget).parents("ul").height(),height:"auto"}).clone(!0).addClass("active"))),e.stopPropagation()}.bind(this))},o.prototype.setActiveLink=function(){var a=this.currentUrl,i=window.location.href;r.each(this.$verticalNav.find("li"),function(e,t){r(t).find("a:first-child").attr("href")===a&&r(t).addClass("active"),r(t).find("a:first-child").attr("href")===i&&r(t).addClass("active")}.bind(this))},o.prototype.setTabIndex=function(){this.$verticalNavHeader.attr("tabindex",0),r(".tertiary-navigation").find("h2").attr("tabindex",0)},o.prototype.getNavHeight=function(){return this.$mainNav.outerHeight()+this.$cookieDisclaimer.outerHeight()},o.prototype.stickyNav=function(){this.$window.scrollTop()>this.getNavHeight()?this.$secNav.addClass("fixed"):this.$secNav.removeClass("fixed")},o.prototype.addMenu=function(){this.showMenu&&this.$horizontalNav.addClass("menu-dropdown")},o.prototype.addTertiaryNav=function(){r.each(this.$subVerticalNav,function(e,t){var a,i,n;!0===this.hasTertiary(r(t).children("li"))&&(a=r(".secondaryNavigation .navigation-vertical:first"),i=r(t).parent().children("a:first-child").text(),n=r(t).html(),r(t).parent().addClass("tertiary-is-active").find("a:first").on("click",function(e){e.preventDefault()}),a.after(this.tertiaryNavTemplate({headerText:i,subnav:n})))}.bind(this))},o.prototype.hasTertiary=function(e){return r.each(e,function(e,t){if(r(t).find("a").attr("href")===this.currentUrl)return this.pageIsTertiary=!0,r(t).addClass("selected-tertiary"),!0}.bind(this)),this.pageIsTertiary},o.prototype.setNavByMedia=function(e){"mobile"===e||"tablet"===a.getMediaType()?(this.$horizontalNav.addClass("collapsed"),this.initMobileNavSize()):(this.$horizontalNav.removeClass("collapsed"),parseInt(this.$horizontalNav.css("top"))&&this.$horizontalNav.css({top:"0px"}))},o.prototype.setNavContent=function(){var e=r("#menu-page-data").html();if(void 0!==e&&0<e.length)if(0<(l=JSON.parse(e)).length)for(var t=0;t<l.length;t++)if(l[t].menuPageUrl&&l[t].subMenus){var a=l[t].menuPageUrl.split("/").pop(),a=new RegExp(a,"g"),i=r("ul.selected-submenu");if(location.href.match(a)&&(r(".navigation-vertical .desktop").find("h2>strong").text(l[t].menuName),r(".navigation-vertical .mobile").find("h2>strong").text(l[t].menuName),i.show(),l[t].subMenus.length))for(var n=0;n<l[t].subMenus.length;n++){var o=l[t].subMenus[n].menuPageUrl.split("/").pop(),o=new RegExp(o,"g");location.href.split("/").pop().match(o)&&r(".sub-navigation-vertical .desktop").find("h2").show()}}},o.prototype.setNavTitle=function(){var e=r(".secondaryNavigationTitle").data("title");e&&r(".secondaryNavigationReference").find("h2").eq(0).append("&nbsp;|&nbsp;"+e)},o.prototype.displaySubNav=function(){this.$verticalSubNav.find("ul").length&&this.$verticalSubNav.show()},o.prototype.addSubmenuClass=function(){r.each(r("li.parent").find("ul"),function(e,t){r(t).hasClass("submenu")||r(t).addClass("submenu")})},o.prototype.setP2Class=function(){r(".section.secondaryNavigation").find(".style-2").length&&r(".section.secondaryNavigation").addClass("style-2")},o.prototype.initMobileNavSize=function(){var e=r(window).height()-r(".main-nav").height()-this.$horizontalNav.height()-this.$verticalNav.height(),t=this.$verticalNav.find(".mobile").find("ul").height();this.$verticalNav.find(".mobile").find("ul").css({"max-height":e+"px"}),e<t?this.$horizontalNav.css({top:e+"px"}):this.$horizontalNav.css({top:t+"px"})},o.prototype.hashScrollToID=function(){r(".secondaryNavigation").find(".navigation-horizontal").find('a[href^="#"]').on("click",function(){var e=r(this).attr("href");"#"!=e&&""!=e&&r("html, body").animate({scrollTop:r(e).offset().top},1e3)})},n.init=function(){new o(".secondaryNavigation");var e="",t="",a="",i=("undefined"!=typeof CQ_Analytics&&void 0!==CQ_Analytics.OwnerInfoStoreMgr.data&&void 0!==CQ_Analytics.OwnerInfoStoreMgr.data.length&&(e=CQ_Analytics.OwnerInfoStoreMgr.getData().firstName,t=CQ_Analytics.OwnerInfoStoreMgr.getData().userName,a=CQ_Analytics.OwnerInfoStoreMgr.getData().lastName),"undefined"!=t&&""!=t||(t=r.cookie("OWNER_USERNAME")),r("span.loggedin"));0<i.length&&i.each(function(){0<r(this).html().indexOf("[@firstName]")&&(void 0!==e?r(this).html(s(r(this).html(),{"[@firstName]":e})):r(this).html(s(r(this).html(),{"[@firstName]":t}))),0<r(this).html().indexOf("[@lastName]")&&(void 0!==a?r(this).html(s(r(this).html(),{"[@lastName]":a})):r(this).html(s(r(this).html(),{"[@lastName]":""}))),0<r(this).html().indexOf("[@userName]")&&(void 0!==t?r(this).html(s(r(this).html(),{"[@userName]":t})):r(this).html(s(r(this).html(),{"[@userName]":e})))}),r(".secondaryNavigation .download-brochure").length&&r(".secondaryNavigation .download-brochure").attr("download",""),r(".secondaryNavigation .download-e-brochure").length&&r(".secondaryNavigation .download-e-brochure").attr("download","")},n}),define("secondary-navigation/component.secondaryNavUpdated",["jquery","_","mediaQuery","isAuthor"],function(s,t,a,i){var r,e={},n=s(".navigation-vertical.hideForMobile").attr("data-navigation-vertical-padding"),o=s(".sub-navigation-vertical.hideForMobile").attr("data-sub-navigation-vertical-padding");function l(e){this.$el=s(e),this.currentUrl=location.pathname,this.expandedVerticalNav=!1,this.expandedVerticalSubNav=!1,this.expandedTertiaryNav=!1,this.pageIsTertiary=!1,this.isAuthorMode=i.getAuthorStatus(),this.collapsibleMenu(),this.setP2Class(),this.bindUIElements(),this.displaySubNav(),this.setActiveLink(),this.setTabIndex(),this.addMenu(),this.addSubmenuClass(),this.setNavByMedia(a.getMediaType()),this.bindUIEvents(),this.setNavTitle(),this.setNavMobile(),this.newVerticalNav()}function c(t,a){return Object.keys(a).forEach(function(e){t=t.replace(e,a[e])}),t}return s(".navigation-vertical.hideForMobile").attr("style",n),s(".sub-navigation-vertical.hideForMobile").attr("style",o),l.prototype.collapsibleMenu=function(){var e=s(".navigation-collapsible.show-desktop-only, .navigation-collapsible.show-tablet-only"),t=e.find(".collapsible-title"),a=e.find(".desktop"),i=s(".navigation-horizontal.hideForMobile"),n=s(".navigation-collapsible.show-mob-only"),o=e.width();e&&(n.css("display","none"),i.css("margin-right",o-20)),t.click(function(){a.slideToggle("fast"),a.toggleClass("navigation-vertical"),e.toggleClass("expanding")})},l.prototype.bindUIElements=function(){this.$window=s(window),this.$body=s("body"),this.$mainNav=s(".main-nav"),this.$secNavContainer=s(".section.secondaryNavigationUpdated"),this.$cookieDisclaimer=s(".cookie-disclaimer"),this.$secNav=this.$el.find(".navigation"),this.$verticalNav=this.$el.find(".navigation-vertical"),this.$horizontalNav=this.$el.find(".navigation-horizontal"),this.$verticalSubNav=this.$el.find(".sub-navigation-vertical"),this.$subVerticalNav=this.$verticalNav.find("li ul"),this.$collapseNav=this.$el.find(".navigation-collapsible"),this.$collapseContent=this.$collapseNav.find(".desktop"),this.$subVerticalNav.each(function(){var e=s(this);0<e.closest(".section.secondaryNavigationUpdated").length&&(e.closest("li").addClass("parent"),e.addClass("submenu"))}),this.$subVerticalNavDesktop=this.$el.find(".navigation-vertical").find(".desktop").find(".parent"),this.$notsubVerticalNavDesktop=this.$el.find('.navigation-vertical > .desktop > ul > li:not(".parent")'),this.$subVerticalNavMobile=this.$el.find(".navigation-vertical").find(".mobile").find(".parent");var e=s(window).height()-s(".main-nav").outerHeight(!0);this.$verticalNav.find("ul").css("max-height",e),0<this.$verticalNav.find("h1").length?this.$verticalNavHeader=this.$verticalNav.find("h1"):this.$verticalNavHeader=this.$verticalNav.find("h2"),0<this.$verticalSubNav.find("h1").length?this.$verticalSubNavHeader=this.$verticalSubNav.find("h1"):this.$verticalSubNavHeader=this.$verticalSubNav.find("h2"),this.showMenu=!1,0!==this.$secNav.find(".dropdown-navigation-button").length&&(this.showMenu=!0),this.setParentClass()},l.prototype.setParentClass=function(){this.$secNavContainer.find("ul li").has("ul")&&s(this).addClass("parent")},l.prototype.tertiaryNavTemplate=t.template('<div class="tertiary-navigation navigation-vertical columns large-2 collapsed"><h2><%= headerText %></h2><ul><%= subnav %></ul></div>'),l.prototype.bindUIEvents=function(){var e=s(window).width();s(window).on("resize",t.throttle(function(){e!==s(window).width()&&(e=s(window).width(),this.setNavByMedia(a.getMediaType()),this.$body.trigger("click"))},300).bind(this)),this.isAuthorMode||this.$window.on("scroll",t.throttle(function(){this.stickyNav()},100).bind(this)),this.$horizontalNav.find("li > a").on("click",function(e){var t=e.currentTarget.hash;"#"===t.split("")[0]&&t.slice(1).length&&(s("html, body").animate({scrollTop:s(".secondaryNavigationUpdated").offset().top-s(".secondaryNavigationUpdated > .navigation.row").height()},100),e.preventDefault())}),this.$verticalNavHeader.on("click",function(e){e.stopPropagation(),this.$verticalNav.find("li.parent.open").trigger("click"),this.$verticalNav.toggleClass("collapsed"),this.$verticalSubNav.addClass("collapsed"),s(".submenu.active").hide(),this.$verticalNav.hasClass("collapsed")&&this.$verticalSubNav.hasClass("collapsed")?this.$secNavContainer.removeClass("navOpen"):(this.$secNavContainer.addClass("navOpen"),this.$collapseNav.hasClass("expanding")&&(this.$collapseNav.removeClass("expanding"),this.$collapseNav.children(".desktop").removeClass("navigation-vertical"),this.$collapseNav.children(".desktop").hide(10))),this.expandedTertiaryNav&&this.$secNav.find(".tertiary-navigation h2").trigger("click"),"mobile"!==a.getMediaType()&&"tablet"!==a.getMediaType()||this.$horizontalNav.toggleClass("collapsed"),this.expandedVerticalNav=!this.expandedVerticalNav,this.expandedVerticalSubNav=!1}.bind(this)),this.$verticalSubNavHeader.on("click",function(e){e.stopPropagation(),this.$verticalSubNav.toggleClass("collapsed"),this.$verticalNav.addClass("collapsed"),s(".submenu.active").hide(),this.$verticalNav.hasClass("collapsed")&&this.$verticalSubNav.hasClass("collapsed")?this.$secNavContainer.removeClass("navOpen"):(this.$secNavContainer.addClass("navOpen"),this.$collapseNav.hasClass("expanding")&&(this.$collapseNav.removeClass("expanding"),this.$collapseNav.children(".desktop").removeClass("navigation-vertical"),this.$collapseNav.children(".desktop").hide(10))),this.expandedTertiaryNav&&this.$secNav.find(".tertiary-navigation h2").trigger("click"),"mobile"!==a.getMediaType()&&"tablet"!==a.getMediaType()||this.$horizontalNav.toggleClass("collapsed"),this.expandedVerticalSubNav=!this.expandedVerticalSubNav,this.expandedVerticalNav=!1}.bind(this)),s(".tertiary-navigation").on("click","h2",function(e){e.stopPropagation(),this.$secNav.find(".tertiary-navigation").toggleClass("collapsed"),this.expandedVerticalNav&&this.$verticalNavHeader.trigger("click"),this.expandedVerticalSubNav&&this.$verticalSubNavHeader.trigger("click"),this.expandedTertiaryNav=!this.expandedTertiaryNav}.bind(this)),s(".tertiary-navigation").on("keyup",function(e){e.stopPropagation(),13==(e.keyCode||e.which)&&(this.$secNav.find(".tertiary-navigation").toggleClass("collapsed"),this.expandedVerticalNav&&this.$verticalNavHeader.trigger("click"),this.expandedVerticalSubNav&&this.$verticalSubNavHeader.trigger("click"),this.expandedTertiaryNav=!this.expandedTertiaryNav)}.bind(this)),this.$subVerticalNavMobile.on("click",function(e){e.stopPropagation(),(e=s(e.target).is("li")?s(e.target):s(e.target).closest("li")).hasClass("open")||e.closest("ul").find(".open").removeClass("open"),e.toggleClass("open")}.bind(this)),this.$verticalNavHeader.on("keydown",function(e){13===e.which&&this.$verticalNavHeader.trigger("click")}.bind(this)),this.$verticalSubNavHeader.on("keydown",function(e){13===e.which&&this.$verticalSubNavHeader.trigger("click")}.bind(this)),this.$secNav.on("click",".dropdown-navigation-button",function(e){e.preventDefault()}.bind(this)),this.$body.on("click",function(){this.expandedVerticalNav?this.$verticalNavHeader.first().trigger("click"):this.expandedVerticalSubNav?this.$verticalSubNavHeader.first().trigger("click"):this.expandedTertiaryNav&&this.$secNav.find(".tertiary-navigation h2").trigger("click")}.bind(this)),this.$notsubVerticalNavDesktop.on("mouseover",function(e){s(e.currentTarget).closest("div").find(">ul.submenu").remove(),s(e.currentTarget).closest("div").find(".opened").removeClass("opened"),e.stopPropagation()}.bind(this)),this.$subVerticalNavDesktop.on("mouseover",function(e){s(e.currentTarget).closest("div").find(">ul.submenu").remove(),s(e.currentTarget).closest("div").find(".opened").removeClass("opened"),s(e.currentTarget).addClass("opened"),s(e.currentTarget).closest("div").append(s(e.currentTarget).find("ul").css({left:e.currentTarget.getBoundingClientRect().width,"min-height":s(e.currentTarget).parents("ul").height(),height:"auto"}).clone(!0).addClass("active")),e.stopPropagation()}.bind(this))},l.prototype.setActiveLink=function(){var a=this.currentUrl,i=window.location.href;s.each(this.$verticalNav.find("li"),function(e,t){s(t).find("a:first-child").attr("href")===a&&s(t).addClass("active"),s(t).find("a:first-child").attr("href")===i&&s(t).addClass("active")}.bind(this))},l.prototype.setTabIndex=function(){this.$verticalNavHeader.attr("tabindex",0),s(".tertiary-navigation").find("h2").attr("tabindex",0)},l.prototype.getNavHeight=function(){return this.$mainNav.outerHeight()+this.$cookieDisclaimer.outerHeight()},l.prototype.stickyNav=function(){this.$window.scrollTop()>this.getNavHeight()?this.$secNav.addClass("fixed"):this.$secNav.removeClass("fixed")},l.prototype.addMenu=function(){this.showMenu&&this.$horizontalNav.addClass("menu-dropdown")},l.prototype.addTertiaryNav=function(){s.each(this.$subVerticalNav,function(e,t){var a,i,n;!0===this.hasTertiary(s(t).children("li"))&&(a=s(".secondaryNavigationUpdated .navigation-vertical:first"),i=s(t).parent().children("a:first-child").text(),n=s(t).html(),s(t).parent().addClass("tertiary-is-active").find("a:first").on("click",function(e){e.preventDefault()}),a.after(this.tertiaryNavTemplate({headerText:i,subnav:n})))}.bind(this))},l.prototype.hasTertiary=function(e){return s.each(e,function(e,t){if(s(t).find("a").attr("href")===this.currentUrl)return this.pageIsTertiary=!0,s(t).addClass("selected-tertiary"),!0}.bind(this)),this.pageIsTertiary},l.prototype.setNavByMedia=function(e){"mobile"===e||"tablet"===a.getMediaType()?(s(".navigation-horizontal.hideForMobile").hide(),this.$horizontalNav.addClass("collapsed")):this.$horizontalNav.removeClass("collapsed")},l.prototype.setNavContent=function(){var e=s("#menu-page-data").html();if(void 0!==e&&0<e.length)if(0<(r=JSON.parse(e)).length)for(var t=0;t<r.length;t++)if(r[t].menuPageUrl&&r[t].subMenus){var a=r[t].menuPageUrl.split("/").pop(),a=new RegExp(a,"g"),i=s("ul.selected-submenu");if(location.href.match(a)&&(s(".navigation-vertical .desktop").find("h2>strong").text(r[t].menuName),s(".navigation-vertical .mobile").find("h2>strong").text(r[t].menuName),i.show(),r[t].subMenus.length))for(var n=0;n<r[t].subMenus.length;n++){var o=r[t].subMenus[n].menuPageUrl.split("/").pop(),o=new RegExp(o,"g");location.href.split("/").pop().match(o)&&s(".sub-navigation-vertical .desktop").find("h2").show()}}},l.prototype.setNavTitle=function(){var e=s(".secondaryNavigationUpdatedTitle").data("title");e&&s(".secondaryNavigationUpdatedReference").find("h2").eq(0).append("&nbsp;|&nbsp;"+e)},l.prototype.displaySubNav=function(){this.$verticalSubNav.find("ul").length&&this.$verticalSubNav.show()},l.prototype.addSubmenuClass=function(){s.each(s("li.parent").find("ul"),function(e,t){s(t).hasClass("submenu")||s(t).addClass("submenu")})},l.prototype.setP2Class=function(){s(".section.secondaryNavigationUpdated").find(".style-2").length&&s(".section.secondaryNavigationUpdated").addClass("style-2")},l.prototype.setNavMobile=function(){var e=s(".secondaryNavigationUpdated"),a=(e.hasClass("navOpen"),e.find(".navigation-vertical.show-mob-only")),t=(a.hasClass("collapse"),a.find(".mobile > h2")),i=(a.find(".submenu").prev("a"),t.outerHeight(),a.find(".mobile > ul").height(),a.find(".mobile > ul > li.parent")),n=(a.find(".mobile > ul > li > ul.submenu").height(),s(".sub-navigation-vertical.hideForMobile")),o=e.find(".sub-navigation-vertical.show-mob-only"),r=(o.hasClass("collapse"),o.find(".mobile > h2")),l=(r.height(),o.find(".mobile > ul").height(),o.find(".mobile > ul > li > ul.submenu").height(),e.find(".navigation-horizontal.show-mob-only"));l.height(),a.find(".mobile > ul > li").length,a.find(".mobile > ul > li.parent > ul.submenu > li").length,o.find(".mobile > ul > li").length,a.find(".mobile > ul > li.parent > ul.submenu > li").length;l.attr("style",""),t.on("click",function(){var e=s(this).parents(".navigation-vertical.show-mob-only");e.find("li.parent > a");e.toggleClass("active-nv"),o.removeClass("active-snv"),a.hasClass("active-nv")?l.css({display:"block"}):(l.css({display:"none"}),i.removeClass("open"))}),r.on("click",function(){var e=s(this).parents(".sub-navigation-vertical.show-mob-only"),t=e.find("li.parent > a");e.toggleClass("active-snv"),a.removeClass("active-nv"),o.hasClass("active-snv")?l.css({display:"block"}):(l.css({display:"none"}),t.parent().removeClass("open")),t.on("click",function(){s(this).parent().hasClass("open")?t.parent().removeClass("open"):t.parent().addClass("open")})}),r.parents(".sub-navigation-vertical.show-mob-only").find("li.parent > a").on("click",function(){var e=s(this);s(this).parent().hasClass("open")?e.parent().removeClass("open"):e.parent().addClass("open")});e=n.find(".desktop > ul > li").children("ul"),t=o.find(".mobile > ul > li").children("ul"),0<e.length&&(e.closest("li").addClass("parent"),e.addClass("submenu")),0<t.length&&(t.closest("li").addClass("parent"),t.addClass("submenu")),r=n.find(".desktop > ul > li.parent");n.find('.desktop > ul > li:not("parent")').on("mouseover",function(e){s(e.currentTarget).closest("div").find(">ul.submenu").remove(),s(e.currentTarget).closest("div").find(".opened").removeClass("opened"),e.stopPropagation()}),r.on("mouseover",function(e){s(e.currentTarget).closest("div").find(">ul.submenu").remove(),s(e.currentTarget).closest("div").find(".opened").removeClass("opened"),s(e.currentTarget).addClass("opened"),s(e.currentTarget).closest("div").append(s(e.currentTarget).find("ul").css({left:e.currentTarget.getBoundingClientRect().width,"min-height":s(e.currentTarget).parents("ul").height(),height:"auto"}).clone(!0).addClass("active")),e.stopPropagation()})},l.prototype.newVerticalNav=function(){var e=s(".navigation-vertical.hideForMobile"),t=s(".sub-navigation-vertical.hideForMobile"),a=(e.data("navigation-vertical-padding"),t.data("sub-navigation-vertical-padding")),i=e.find(".desktop > ul"),n=t.find(".desktop > ul"),e=e.find(".desktop").width(),t=t.find(".desktop").width(),o=a.split(";")[0],r=a.split(";")[1],o=parseInt(o.split(":")[1]),r=parseInt(r.split(":")[1]),l=a.split(";")[0],a=a.split(";")[1],l=parseInt(l.split(":")[1]);parseInt(a.split(":")[1]);i.css({"padding-left":o-12,width:e+o+r+l}),n.css({left:l,width:t+l})},e.init=function(){new l(".secondaryNavigationUpdated");var e="",t="",a="",i=("undefined"!=typeof CQ_Analytics&&void 0!==CQ_Analytics.OwnerInfoStoreMgr.data&&void 0!==CQ_Analytics.OwnerInfoStoreMgr.data.length&&(e=CQ_Analytics.OwnerInfoStoreMgr.getData().firstName,t=CQ_Analytics.OwnerInfoStoreMgr.getData().userName,a=CQ_Analytics.OwnerInfoStoreMgr.getData().lastName),"undefined"!=t&&""!=t||(t=s.cookie("OWNER_USERNAME")),s(".secondaryNavigationUpdated h2,.secondaryNavigationUpdated h1"));0<i.length&&i.each(function(){0<s(this).html().indexOf("[@firstName]")&&(void 0!==e?s(this).html(c(s(this).html(),{"[@firstName]":e})):s(this).html(c(s(this).html(),{"[@firstName]":t}))),0<s(this).html().indexOf("[@lastName]")&&(void 0!==a?s(this).html(c(s(this).html(),{"[@lastName]":a})):s(this).html(c(s(this).html(),{"[@lastName]":""}))),0<s(this).html().indexOf("[@userName]")&&(void 0!==t?s(this).html(c(s(this).html(),{"[@userName]":t})):s(this).html(c(s(this).html(),{"[@userName]":e})))})},e}),define("brightcove/component.brightcove",["jquery","_","pubsub","mediaQuery","analytics/events/brightcoveVideoEvents"],function(l,e,t,i,s){var a={};function n(e){this.$element=e,this.$videoEl=e.find("object.BrightcoveExperience").length?e.find("object.BrightcoveExperience"):e.find("iframe"),this.$outerVidEl=e.find(".outer-container").first(),this.$startImage=this.$element.find(".start-image"),this.$endImage=this.$element.find(".end-image"),this.hasStartImage=0<this.$startImage.children().length,this.hasEndImage=0<this.$endImage.children().length,this.videoObj=null,this.isPlayerCreated=!1,this.isPlayerReady=!1,this.attachEvents(),this.hasStartImage||this.createPlayer(),this.initStartImage(),this.initEndImage(),this.initEndImageStop(),this.initVideoContainerHeight()}function o(){l(".brightcove").each(function(){var e=l(window).width(),t=l(this).children(),a=t.attr("data-style"),i=t.attr("data-style-mobile");767<e?t.attr("style",a):t.attr("style",i)})}return window.initBC=function(e){e=new n(e);a.brightcoves.push(e)},window.BCTrackVideo=function(e){var a,i,t=l("#"+e.target.experience.id),n=e.media.displayName,o=(null==(o=t).attr("timerObj")&&o.attr("timerObj",'{"timeAt0":false,"timeAt25":false,"timeAt50":false,"timeAt75":false,"timeAt100":false}'),Math.round(1e3*e.position)),e=Math.round(e.media.length),e=Math.round(o/e*100),r=((e,t)=>{e=JSON.parse(e.attr("timerObj"));return 0==t?{canBeFired:!e.timeAt0,isStart:!0}:25==t?{canBeFired:!e.timeAt25,isStart:!1}:50==t?{canBeFired:!e.timeAt50,isStart:!1}:75==t?{canBeFired:!e.timeAt75,isStart:!1}:100==t?{canBeFired:!e.timeAt100,isStart:!1}:{canBeFired:!1,isStart:!1}})(t,e);r.canBeFired&&(t=t,a=e,i="{",l.each([0,25,50,75,100],function(e,t){i+=t!=a?'"timeAt'+t+'":false,':'"timeAt'+t+'":true,'}),i+='"dummy":"dummy"}',t.attr("timerObj",i),r.isStart?s.trackVideoStart(n):s.trackVideoProgress(o,e))},n.prototype.initVideoContainerHeight=function(){var t=this.$outerVidEl,a=this;this.updateHeight(t,i.getMediaType()),l.subscribe("window:resize",function(){var e=i.getMediaType();a.updateHeight(t,e)})},n.prototype.updateHeight=function(e,t){"mobile"!=t?e.attr("style",e.attr("data-style")):e.removeAttr("style");t=e.parents(".brightcove-player").first();t.find("img").length&&t.find("img").height(t.height()+"px")},n.prototype.createPlayer=function(){},n.prototype.initPlayer=function(){this.videoObj=videojs(this.$videoEl[0]),this.$videoEl=this.$element.find("video"),this.initEndImage(),this.videoObj.on("loadedmetadata",this.onPlayerReady),this.isPlayerCreated=!0},n.prototype.disposePlayer=function(){this.videoObj.dispose(),s.disposeVideo()},n.prototype.onPlayerReady=function(){},n.prototype.initStartImage=function(){var e,t,a=this;this.hasStartImage?(this.$startImage.show(),0==(e=this.$startImage.find(".component-content")).parent("a").length&&e.wrap("<a></a>"),this.$startImage.find(".brightcove-text").length&&(t=this.$startImage.find(".brightcove-text").clone(),this.$startImage.find(".brightcove-text").remove(),e.append(t)),this.$startImage.find("a").on("click",function(){a.$startImage.hide();var e=a.$videoEl.attr("id");(null!=brightcove.api.getExperience(e)?brightcove.api:brightcove).getExperience(e).getModule(brightcove.api.modules.APIModules.VIDEO_PLAYER).play()})):this.$startImage.hide(),this.$endImage.hide()},n.prototype.initEndImage=function(){var e,t,a=this;a.hasEndImage?(0==(e=this.$endImage.find(".component-content")).parent("a").length&&e.wrap("<a></a>"),this.$endImage.find(".brightcove-text").length&&(t=this.$endImage.find(".brightcove-text").clone(),this.$endImage.find(".brightcove-text").remove(),e.append(t)),a.$endImage.find("a").on("click",function(){a.$endImage.hide();var e=a.$videoEl.attr("id");(null!=brightcove.api.getExperience(e)?brightcove.api:brightcove).getExperience(e).getModule(brightcove.api.modules.APIModules.VIDEO_PLAYER).play()})):a.$endImage.hide()},n.prototype.initEndImageStop=function(){var e=this;this.$endImage.unbind("initEndImageStop").bind("initEndImageStop",function(){e.hasEndImage?e.$endImage.show():e.hasStartImage&&e.$startImage.show()})},n.prototype.attachEvents=function(){var t=this;0<this.$element.find(".start-image").children().length&&(t.onPlayerReady=function(){t.isPlayerReady=!0,t.$videoEl.trigger("play"),t.$startImage.hide()}),this.$element.on("dispose",function(e){t.disposePlayer()})},a.brightcoves=[],o(),l(window).resize(function(){setTimeout(function(){o()},500)}),a.init=function(){brightcove.createExperiences(),l(".brightcove").each(function(e,t){t=new n(l(t));a.brightcoves.push(t)})},a}),define("brightcove/component.html5Player",["jquery","_","pubsub","mediaQuery","analytics/events/brightcoveVideoEvents","isAuthor"],function(n,e,t,a,i,o){var r={},l="",s=1,c=0,d=!1,u=!1,p=!1,m=!1,h=!1;nowPlaying=!1,reached25=!1,reached50=!1,reached75=!1,reached100=!1;function f(e,t){var a,i=v(e),e=(e=>(e=g(e)||{}).docViewTop>=e.elemBottom||e.docViewBottom<=e.elemTop)(e);!i||nowPlaying||p?e&&p&&(p=!1,t.pause(),nowPlaying=!1):(p=!0,a=t,nowPlaying||(c<=0&&!u&&(a.play(),nowPlaying=!0,a.on("ended",e=>{nowPlaying=!1}),u)&&a.on("ended",e=>{a.play(),w(a)}),0<c&&u&&(y(a),m||(m=!0,a.on("ended",e=>{nowPlaying=m=!1,s++,y(a)})))))}function g(e){var t=n(window).scrollTop(),a=t+n(window).height(),i=n("#"+e).offset().top;return{docViewTop:t,docViewBottom:a,elemTop:i,elemBottom:i+n("#"+e).height()}}function v(e){e=g(e)||{};return e.elemBottom<=e.docViewBottom&&e.elemTop>=e.docViewTop}function y(e){s<=c?nowPlaying||setTimeout(()=>{e.play(),nowPlaying=!0,m=!0,w(e)},200):nowPlaying=!1}function b(e){"muted"==n(".h5player.section").find(".vjs-tech").attr("muted")?e.muted(!0):e.muted(!1)}var w=function(a){a.on("play",function(){var e;h||(reached100=!(h=!0),e=a.mediainfo.duration,e=(a.currentTime()/e*100).toFixed(2),fordAnalytics.videoName=l,i.trackVideoStart(a.currentTime()),25<=Math.floor(e)&&!reached25&&("undefined"!=typeof digitaldata&&i.trackVideoProgress(a),reached25=!0))}),a.on("timeupdate",function(){var e=a.mediainfo.duration,t=a.currentTime(),e=(t/e*100).toFixed(2);24<=Math.ceil(e)&&!reached25&&("undefined"!=typeof digitaldata&&i.trackVideoProgress(a,t),reached25=!0),49<=Math.ceil(e)&&!reached50&&("undefined"!=typeof digitaldata&&i.trackVideoProgress(a,t),reached50=!0),74<=Math.ceil(e)&&!reached75&&("undefined"!=typeof digitaldata&&i.trackVideoProgress(a,t),reached75=!0)}),a.on("ended",function(){var e=a.mediainfo.duration,e=(a.currentTime()/e*100).toFixed(2);fordAnalytics.videoName=l,100<=Math.ceil(e)&&!reached100&&("undefined"!=typeof digitaldata&&i.trackVideoEnd(a.currentTime()),reached100=!0,reached25=!1,reached50=!1,reached75=!1,h=!1)})};return r.init=function(e){o.getAuthorStatus()||n(".HtmlFivePlayer video,.HtmlFivePlayerMobile video").parent().each(function(e,t){var a,i;-1<n(t).length&&(n(t).attr("id")||n(t).find("video").attr("id"))&&(t=(a=(n(t).attr("id")?n(t):n(t).find("video")).attr("id")).split("_"),l=t[2],videojs(a).ready(function(){var e;i=this,d=n(".setattributes").data("autoplay-enabled")||!1,u=n(".setattributes").data("numof-iterations-loop")||!1,c=n(".looptimes").val()||0,d?(i.pause(),e=v(a),nowPlaying||(document.addEventListener("scroll",function(e){f(a,i)},!0),e&&f(a,i)),i.on("loadedmetadata",function(){fordAnalytics.videoName=l})):w(i),i.on("play",function(e){b(i)}),i.on("ended",function(e){b(i)})}))})},r}),define("brightcove/component.newBrightcove",["jquery","_","pubsub","mediaQuery","analytics/events/brightcoveVideoEvents"],function(y,e,t,b,i){function o(d,e,u){var p,m=y(d).find(".start-image"),t=(y(d).find(".end-image"),y(d).find(".start-image img")),a=y(d).find(".end-image img"),h=0<t.length,f=(a.length,!1),g=!1,v=!1;loopPlayEnabled=!1,numberOfIterations=0,videoLoopNum=1,reached00=!1,reached25=!1,reached50=!1,reached75=!1,reached100=!1,h&&(m.show(),0===(t=m.find(".component-content")).parent("a").length)&&t.wrap("<a></a>"),videojs(e).ready(function(){var e,t,i=y(p=this).attr("id")+"_html5_api",a=l(i);switch(p.on("loadedmetadata",function(){fordAnalytics.videoName=p.mediainfo.name}),w=y(d).find(".js-brightcove-player").hasClass("fullScreenVdo"),C=y(d).find(".js-brightcove-player").hasClass("autoPlayVdo"),k=y(d).find(".js-brightcove-player").hasClass("autoPlayVdo fullScreenVdo"),S=y(d).find(".js-brightcove-player ").attr("id"),b.getMediaType()){case"mobile":case"tablet":loopPlayEnabled=y(".loopPlay").data("mobileloopplay")||!1,numberOfIterations=y(".loopPlay").data("mobilelooptimes")||0,/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream||((navigator.connection||navigator.mozConnection||navigator.webkitConnection).downlink,navigator.connection.type),k&&!x?(m.hide(),p.muted(!0),p.play(),e=y(d).find(".js-brightcove-player"),t=y(d).find("video"),e.addClass("fsVideoContainer"),t.addClass("fsVideo"),e.append('<a id="fsaClose" href="#" class="icon-plus icon-x"></a>'),y(".footer").hide(),y("#fsaClose").bind("click",function(){y("#fsaClose").hide(),y("#fsaClose").parents(".js-brightcove-player").remove(" .icon-plus "),y("#fsaClose").parents(".js-brightcove-player").removeClass("fsVideoContainer"),y("#fsaClose").parents(".js-brightcove-player").find("video").removeClass("fsVideo"),y(".footer").show()})):C?(h&&m.hide(),p.muted(!0),p.pause(),n()):!w||C||x||(p.pause(),y(d).addClass("launchFullScreen"),m.bind("click",function(){m.hide(),p.play();var e=y(d).find(".js-brightcove-player"),t=y(d).find("video");e.addClass("fsVideoContainer"),t.addClass("fsVideo"),e.append('<a id="new'+S+'" href="#" class="icon-plus icon-x fsclose"></a>'),y(".footer").hide(),y(".fsclose").bind("click",function(){var e=y(this).attr("id");y("#"+e).hide(),y("#"+e).parents(".js-brightcove-player").removeClass("fsVideoContainer"),y("#"+e).parents(".js-brightcove-player").find("video").removeClass("fsVideo"),y(".footer").show()})}));break;case"desktop":case"xlarge":loopPlayEnabled=y(".loopPlay").data("desktoplooplay")||!1,numberOfIterations=y(".loopPlay").data("desktoplooptimes")||0,h||"autoplay"!==u||x||(p.muted(!0),p.pause(),n()),h&&"autoplay"===u&&(m.hide(),p.muted(!0),p.pause(),n())}function n(){f||(document.addEventListener("scroll",function(e){o()},!0),a&&o())}function o(){var t,e=l(i),a=(e=>(e=r(e)||{}).docViewTop>=e.elemBottomHalf||e.docViewBottom<=e.elemTopHalf)(i);!e||f||g?a&&g&&(g=!1,p.pause(),f=!1):(g=!0,t=p,f||((numberOfIterations<=0||!loopPlayEnabled)&&(t.play(),f=!0,t.on("ended",e=>{f=!1}),loopPlayEnabled)&&t.on("ended",e=>{t.play(),D(t)}),0<numberOfIterations&&loopPlayEnabled&&(s(t),v||(v=!0,t.on("ended",e=>{f=v=!1,videoLoopNum++,s(t)})))))}function r(e){var t=y(window).scrollTop(),a=t+y(window).height(),i=y("#"+e).offset().top,e=i+y("#"+e).height(),n=(e-i)/2;return{docViewTop:t,docViewBottom:a,elemTop:i,elemBottom:e,elemBottomHalf:e-n,elemTopHalf:i+n,elmHalf:n}}function l(e){e=r(e)||{};return e.elemBottom<=e.docViewBottom&&e.elemTop>=e.docViewTop}function s(e){videoLoopNum<=numberOfIterations?f||setTimeout(()=>{e.play(),v=f=!0,D(e)},200):f=!1}function c(e){"muted"==y(d).find(".vjs-tech").attr("muted")?e.muted(!0):e.muted(!1)}h&&m.on("click",function(){m.hide(),p.play()}),y(".pausepl").on("click",function(){p.pause()}),p.on("fullscreenchange",function(e){p.isFullscreen()&&y(window).trigger("videofullscreen")}),p.on("play",function(e){c(p)}),p.on("ended",function(e){c(p)}),D(p),console.log("checkFireAnalytics")})}var w,C,k,S,x,r={},D=(window.bcinit="",r.initialed=!1,r.bcprev=null,function(a,e){a.on("play",function(){var e;reached00||(reached00=!0,reached100=!1,e=a.mediainfo.duration,e=(a.currentTime()/e*100).toFixed(2),fordAnalytics.videoName=a.mediainfo.name,i.trackVideoStart(a.currentTime()),25<=Math.floor(e)&&!reached25&&("undefined"!=typeof digitaldata&&i.trackVideoProgress(a),reached25=!0))}),a.on("timeupdate",function(){var e=a.mediainfo.duration,t=a.currentTime(),e=(t/e*100).toFixed(2);25<=Math.floor(e)&&!reached25&&("undefined"!=typeof digitaldata&&i.trackVideoProgress(a,t),reached25=!0),50<=Math.floor(e)&&!reached50&&("undefined"!=typeof digitaldata&&i.trackVideoProgress(a,t),reached50=!0),75<=Math.floor(e)&&!reached75&&("undefined"!=typeof digitaldata&&i.trackVideoProgress(a,t),reached75=!0)}),a.on("ended",function(){var e=a.mediainfo.duration,e=(a.currentTime()/e*100).toFixed(2);fordAnalytics.videoName=a.mediainfo.name,100<=Math.ceil(e)&&!reached100&&("undefined"!=typeof digitaldata&&i.trackVideoEnd(a.currentTime()),reached100=!0,reached25=!1,reached50=!1,reached75=!1,reached00=!1)})}),l=(r.init=function(e,t){var a=e,e=t,i={},t=y(a).find(".js-brightcove-player");t.attr("id"),i.accountId=t.data("account-id"),i.videoId=t.data("video-id"),i.playerId="default",i.playerName=t.data("player-name"),void 0===e&&"false"!==t.data("autoplay")?i.autoplay=t.data("autoplay"):i.autoplay=e,t.html('<video width="100%" height="100%" id="'+i.playerName+'" data-video-id="'+i.videoId+'"  data-account="'+i.accountId+'" data-player="'+i.playerId+'" data-embed="default" class="video-js" playsinline preload controls></video>'),0<document.getElementsByClassName("fds-app").length?((0,window.bc)(document.getElementById(i.playerName)),o(a,i.playerName,i.autoplay)):"undefined"==typeof videojs||""===window.bcinit?(requirejs.config({paths:{bc:"//players.brightcove.net/"+i.accountId+"/default_default/index.min"},timeout:30}),require(["bc"],function(e){window.bcinit=e,o(a,i.playerName,i.autoplay)})):(window.bcinit(document.getElementById(i.playerName)),o(a,i.playerName,i.autoplay)),y(window).on("onoverlayload",function(){x=!0}),y(window).on("onoverlayhide",function(){x=!1})},r.addPlayer=function(e,t){var a=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,i={},n=y(e).find(".js-brightcove-player");n.attr("id");i.accountId=n.data("account-id"),i.videoId=n.data("video-id"),i.playerId="default",i.playerName=n.data("player-name"),n.html(a=a?'<video width="100%" height="100%" id="'+i.playerName+'" data-video-id="'+i.videoId+'"  data-account="'+i.accountId+'" data-player="'+i.playerId+'" data-embed="default" class="video-js"   preload="auto"  controls></video>':'<video width="100%" height="100%" id="'+i.playerName+'" data-video-id="'+i.videoId+'"  data-account="'+i.accountId+'" data-player="'+i.playerId+'" data-embed="default" class="video-js"   preload="auto" playsinline controls></video>'),n.html(a),0<document.getElementsByClassName("fds-app").length?(console.log("entro"),(0,window.bc)(document.getElementById(i.playerName)),o(e,i.playerName,i.autoplay)):"undefined"==typeof videojs||""===window.bcinit?r.initialed||(r.initialed=!0,requirejs.config({paths:{bc:"//players.brightcove.net/"+i.accountId+"/default_default/index.min"},timeout:30}),require(["bc"],function(e){window.bcinit=e,videojs(i.playerName).ready(function(){(r.bcPrev=this).hide()})})):(window.bcinit(document.getElementById(i.playerName)),l(e,i.playerName,t))},function(e,t,a){y(e).find(".js-brightcove-player");var i,n,o=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;o||((navigator.connection||navigator.mozConnection||navigator.webkitConnection).downlink,n=navigator.connection.type),videojs(t).ready(function(){if((i=this).on("fullscreenchange",function(e){i.isFullscreen()?(i.show(),r.bcPrev=i,y(window).trigger("videofullscreen")):(i.pause(),i.hide(),r.bcPrev=i)}),y(window).width()<640&&(o||"wifi"===n)){if(r.bcPrev)try{r.bcPrev.dispose()}catch(e){console.log(e)}o?(i.autoplay(!0),i.play()):i.requestFullscreen(),i.show(),void 0!==a&&a&&(i.muted(),i.play()),i.on("loadedmetadata",function(){fordAnalytics.videoName=i.mediainfo.name})}D(i)}),y(window).width()<640&&(o&&"wifi"!==n||((i=videojs(t)).requestFullscreen(),setTimeout(function(){y("#"+t).append("<span class='fullScreenCloseBtn' tabindex='0' ><i class='icon-plus icon-x fullScreenCloseIcon'></i></span>"),y(".fullScreenCloseBtn").on("click",function(){i.exitFullscreen?i.exitFullscreen():i.mozCancelFullScreen?i.mozCancelFullScreen():i.msExitFullscreen?i.msExiFullscreen():i.webkitCancelFullScreen&&i.webkitCancelFullScreen()})},500)))});return r}),define("live-stream-video/component.liveStreamVideo",["jquery","mediaQuery"],function(n,i){var t={};function a(e){this.$outerVidEl=e.find(".outer-container").first(),this.$startImage=e.find(".start-image"),this.$endImage=e.find(".end-image"),this.hasStartImage=0<this.$startImage.children().length,this.hasEndImage=0<this.$endImage.children().length,this.videoObj={},this.liveStreamVideoConfigObj={};var t=e.find("input[type=hidden]#lsvContainer").val(),a=e.find("input[type=hidden]#lsvRtmpUrl").val(),i=e.find("input[type=hidden]#lsvHlsUrl").val(),n=e.find("input[type=hidden]#lsvAutostart").val(),o=e.find("input[type=hidden]#lsvBufferlength").val(),r=e.find("input[type=hidden]#lsvBufferlength").val(),l=e.find("input[type=hidden]#lsvStretching").val(),s=e.find("input[type=hidden]#lsvControlbardisplay").val(),e=e.find("input[type=hidden]#lsvIsfullscreen").val();this.initStartImage(),this.initEndImage(),this.initEndImageStop(),this.initVideoContainerHeight(),this.videoConfigObject={container:"play",rtmpUrl:"rtmp://29105.lssplay.aodianyun.com/Ford001/stream",hlsUrl:"http://29105.hlsplay.aodianyun.com/Ford001/stream.m3u8",width:"720",height:"480",autostart:!0,bufferlength:"1",maxbufferlength:"2",stretching:"1",controlbardisplay:"enable",isfullscreen:!0},this.videoConfigObject.container=t,this.videoConfigObject.rtmpUrl=a,this.videoConfigObject.hlsUrl=i,this.videoConfigObject.width="100%",this.videoConfigObject.height="100%",this.videoConfigObject.autostart="true"==n,this.videoConfigObject.bufferlength=o,this.videoConfigObject.maxbufferlength=r,this.videoConfigObject.stretching=l,this.videoConfigObject.controlbardisplay=s,this.videoConfigObject.isfullscreen="true"==e,this.initPlayer(this.videoConfigObject)}function e(){n(".liveStreamVideo").each(function(){var e=n(window).width(),t=n(this),t=n(t).find(".video-single"),a=t.attr("data-style"),i=t.attr("data-style-mobile");767<e?t.attr("style",a):t.attr("style",i)})}return t.liveStreamVideos=[],a.prototype.initVideoContainerHeight=function(){var t=this.$outerVidEl,a=this;this.updateHeight(t,i.getMediaType()),n.subscribe("window:resize",function(){var e=i.getMediaType();a.updateHeight(t,e)})},a.prototype.updateHeight=function(e,t){"mobile"!=t?e.attr("style",e.attr("data-style")):e.removeAttr("style");t=e.parents(".livestreamvideo-player").first();t.find("img").length&&t.find("img").height(t.height()+"px")},a.prototype.initPlayer=function(e){this.videoObj=new aodianPlayer(e),this.initEndImage()},a.prototype.disposePlayer=function(){this.videoObj.dispose()},a.prototype.onPlayerReady=function(){},a.prototype.initStartImage=function(){var e,t,a=this;this.hasStartImage?(this.$startImage.show(),0==(e=this.$startImage.find(".component-content")).parent("a").length&&e.wrap("<a></a>"),this.$startImage.find(".livestreamvideo-text").length&&(t=this.$startImage.find(".livestreamvideo-text").clone(),this.$startImage.find(".livestreamvideo-text").remove(),e.append(t)),this.$startImage.find("a").on("click",function(){a.$startImage.hide(),a.videoObj.startPlay()})):this.$startImage.hide(),this.$endImage.hide()},a.prototype.initEndImage=function(){var e,t,a=this;a.hasEndImage?(0==(e=this.$endImage.find(".component-content")).parent("a").length&&e.wrap("<a></a>"),this.$endImage.find(".livestreamvideo-text").length&&(t=this.$endImage.find(".livestreamvideo-text").clone(),this.$endImage.find(".livestreamvideo-text").remove(),e.append(t)),a.$endImage.find("a").on("click",function(){a.$endImage.hide()})):a.$endImage.hide()},a.prototype.initEndImageStop=function(){var e=this;this.$endImage.unbind("initEndImageStop").bind("initEndImageStop",function(){e.hasEndImage?e.$endImage.show():e.hasStartImage&&e.$startImage.show()})},e(),n(window).resize(function(){setTimeout(function(){e()},500)}),t.init=function(e){e=new a(e);t.liveStreamVideos.push(e)},t}),define("brand-gallery/component.brandGallery",["jquery","mediaQuery","pubsub","marketConfigGlobal"],function(l,s,e,o){let t={},c=l(".common-brand");l.fn.passThrough=function(e){var t=l(e);return this.each(function(){this.style;l(this).on("click mousedown mouseup mouseenter mouseleave mousemove touchstart touchend touchcancel touchmove",function(a){!/touch/.test(a.type)||a.originalEvent.touches[0]||a.originalEvent.changedTouches[0];t.each(function(){var e=this.parentNode.getBoundingClientRect(),t=l(document).scrollTop();a.pageX>e.left&&a.pageX<e.right&&a.pageY>e.top+t&&a.pageY<e.bottom+t&&l(this).trigger(a.type)})})})},l(window).width()<768?setTimeout(function(){n()},5e3):n(),c.each(function(){var e=l(this).find(".brand-mob-but");e.click(function(){l(this).addClass("btn-act"),l(this).children(".btn-act > span:visible").hasClass("view-all")?e.prev(".common-brandGallery").find("[data-order='100']").show(600):e.prev(".common-brandGallery").find("[data-order='100']").hide(200)})});var a,i=l(window).width();function n(){l(".bg-clear").css("clear","both"),c.each(function(){var e=l(this).find(".item-wrapper"),t=e.attr("data-margin-mobile"),e=e.attr("data-margin-desktop");640<l(window).width()?l(this).attr("style",e+"overflow:auto"):l(this).attr("style",t)}),c.each(function(){var e,t,a=l(this),i=a.find(".common-brandGallery .item-wrapper"),n=(767<l(window).width()&&l(window).width()<1024&&a.find(".richtext-read-more .desktop").css("transform","translate(0px, 0%)"),a.find(".common-brandGallery .item-wrapper").attr("data-style"));l(window).width()<768&&"gallery-trigger-1"!==n&&"gallery-trigger-2"!==n?(a.find(".bg-richtext").addClass("item"),a.find(".common-brand > .common-brandGallery > .item-wrapper > .item").show(),a.find(".bg-richtext").show(),0<a.find("[data-order]").length?(l(i).find("[data-order]").addClass("bg-Sort"),l(i).find("[data-order]").show(),l(i).find("[data-order='100']").hide(),l(i).find(".brand-mob-but").show()):a.find(".brand-mob-but").hide(),a.find(".bg-Sort").sort(function(e,t){return+e.getAttribute("data-order")-+t.getAttribute("data-order")}).each(function(e,t){l(t).parent().append(t)}),(t=l(this).find(".brand-mob-but")).addClass("btn-act"),e=l(".brand-mob-but span:visible").hasClass("view-all"),t.click(function(){e=e?(a.find(".common-brandGallery").find("[data-order='100']").show(600),!1):(a.find(".common-brandGallery").find("[data-order='100']").hide(200),!0)})):i.find(".item img").one("load",function(){var e=l(this).closest(".item"),t=e.parent();e.show(),t.find("[data-order]").show(),t.find(".bg-richtext").removeClass("item"),t.find(".bg-col-2l ").css("width","50%"),t.find(".bg-col-2r ").css("width","50%"),t.find(".bg-col-2r ").css("float","right"),t.find(".bg-col-1l").css("margin-left","-50%"),t.find(".bg-col-1l").css("margin-top","auto"),t.find(".bg-col-1r").css("margin-left","-25%"),t.find(".bg-col-1r").css("margin-top","auto")}).each(function(){this.complete&&l(this).load()}),l(window).width()<768&&(t=o.getCurrentMarketCode(),-1<l.inArray(t,["nz","au","mx","bz","cr","sv","gt","hn","ni","pa","ag","aw","bs","bb","ky","cw","dm","do","gd","ht","jm","lc","mf","sr","tt","ph","th","kr","vn","in","tw","cn"])&&a.find(".brand-mob-but").hide(),0<a.find("[data-order]").length&&(l(i).find("[data-order]").addClass("bg-Sort"),String(["nz","au","ph","th","kr","vn","in","tw","cn"]).match(t))&&(a.find(".brand-mob-but").show(),l(i).find("[data-order='100']").hide()),setTimeout(function(){var e="";l(".common-brandGallery .component-content .item").each(function(){"block"===l(this).css("display")&&e++}),(8<=e||"gallery-trigger-1"===l(".common-brandGallery .component-content").attr("data-style"))&&a.find(".brand-mob-but").hide()},1e3)),l(window).width()<768&&"gallery-trigger-2"===n&&(a.find(".bg-Sort").sort(function(e,t){return+e.getAttribute("data-order")-+t.getAttribute("data-order")}).each(function(e,t){l(t).parent().append(t)}),a.find(".common-brandGallery .item-wrapper .item").css({display:"table-column",float:"left","max-width":"50%"}),l(i).find("[data-order='100']").hide())}),768<=l(window).width()&&c.each(function(){var e=l(this),t=e.find(".image").eq(0).parent().parent().height()+"px";e.find(".video-js").height(t)})}return window.onresize=function(){clearTimeout(a),a=setTimeout(function(){parseFloat(i)!==parseFloat(l(window).width())&&(n(),i=l(window).width())},1e3),768<=l(window).width()&&c.each(function(){var e=l(this),t=e.find(".image").eq(0).parent().parent().height()+"px";e.find(".video-js").height(t)})},l(".rtl .brandGallery .image-caption.richtext").children("p").each(function(){var e=l(this).css("text-align");"left"===e?l(this).addClass("text-left"):"right"===e&&l(this).removeClass("text-left")}),l(".common-brandGallery .item .common-image").find(".video.link-overlay").removeClass("link-overlay-video"),t.init=function(){l(".brandGallery").each(function(e,t){function i(e){var t=o.find(".one");o.find(".three");"desktop"!==e&&"xlarge"!==e&&"tablet"!==e&&t.attr("style","")}function n(e){var e=l(e),t=o.find(".component-content"),a=t.find(".richtext-read-more"),i=t.find(".heading.richtext"),n=e.height(),t=t.find(".item").eq(0).height();e.length?a.height(n):i.height(t)}function a(e){var t=o.find(".one"),a=o.find(".two");"desktop"===e||"xlarge"===e||"tablet"===e?(a.detach(),a.insertBefore(t),window.onload=function(){n(a),i(s.getMediaType())},l(window).resize(function(){n(a)})):(a.detach(),a.insertAfter(t),(a.length?o.find(".richtext-read-more"):o.find(".heading.richtext")).height("auto"))}var o,r;o=l(t=t),(r=o.find(".view-toggle")).on("click",function(){r.toggleClass("in"),o.find(".four, .five, .six, .seven, .eight, .nine, .ten, .eleven, .twelve, .thirteen, .fourteen").slideToggle()}),a(s.getMediaType()),l.subscribe("mediaQuery:change",function(e){a(e.getMediaType())}),i(s.getMediaType()),setTimeout(function(){i(s.getMediaType())},4e3),l(window).resize(function(){i(s.getMediaType())}),(t=o.height())/2!=0&&t&&o.css("height",t-1+"px"),c.each(function(){l(this).find(".vjs-progress-holder").css("margin","0")})})},t}),define("download-bar/component.downloadBar",["jquery","_"],function(n,t){var e={},a="download"in document.createElement("a");function i(e){var e=n(e),a=e.attr("href"),i=function(){return window.navigator.msSaveBlob(this.response,a)};function t(e){var t=new XMLHttpRequest;e.preventDefault(),t.addEventListener("load",i,!1),t.open("GET",a,!0),t.responseType="blob",t.send()}e.on("click",t)}return e.init=function(){t.forEach(n(".brochureware-download"),function(e){e=n(e=e).find("a"),a?e.attr("download","").attr("target","_blank"):t.forEach(e,i)})},e}),define("table/component.table",["jquery","_"],function(n,e){var t={},o="is-transposed",r="transposed-table-container",l="<table><tbody></tbody></table>";function a(e){this.$elem=n(e),this.$content=this.$elem.children(".table-content"),"1"==this.$content.data("mobile-transposed")&&this.transpose(),n(".vehicle-price-list table tr:odd, .regular-table table tr:odd").addClass("even")}return a.prototype.transpose=function(){var e=this.$content.children("table").find("tr"),a=e.first().find("th, td"),i=n("<div></div>").addClass(r);1<e.length&&2<a.length&&(e.each(function(e){var t;0<e&&(t=n(l),n(this).find("td").each(function(e){t.append(n("<tr></tr>").append(n(a[e]).clone().attr("scope","row")).append(n(this).clone()))}),i.append(t))}),this.$content.addClass(o).append(i))},t.init=function(e){new a(e)},t}),define("showroom/showroom.app",["angular","angular-sanitize"],function(e,t){return e.module("showroom",["ngSanitize","ngGuxSlider"])}),define("showroom/showroom.config",["showroom/showroom.app"],function(e){}),define("showroom/showroom.controllers",["showroom/showroom.app","showroom/showroom.services","vehicleAttributeUtil","mediaQuery","scroll/global.ux.scroll","tooltip-gux/global.ux.tooltip","_"],function(e,t,s,n,o,r,c){e.controller("mainCtrl",["$scope","filterStateService","storeService","$window",function(t,e,a,i){t.sidebarActiveOnMobile=!1,t.sidebarActiveOnDesktop=!0,t.serviceStatus=null,t.defaultState=!0,t.saveCurrentFilterState=e.saveCurrentState,t.toggleSidebar=function(e){$(".sidebar-toggle > input").focus(),"mobile"===n.getMediaType()?(t.sidebarActiveOnMobile=!t.sidebarActiveOnMobile,t.isSidebarActiveMobile()?o.preventScrollBody():o.allowScrollBody()):t.sidebarActiveOnDesktop=!t.sidebarActiveOnDesktop},t.isSidebarActiveMobile=function(){return"mobile"===n.getMediaType()&&t.sidebarActiveOnMobile},t.isSidebarActiveDesktop=function(){return"mobile"!==n.getMediaType()&&t.sidebarActiveOnDesktop},t.resetSidebarState=function(){"mobile"!==n.getMediaType()&&"mobile"!==n.getPreviousMediaType()||!t.sidebarActiveOnMobile||(o.allowScrollBody(),t.sidebarActiveOnMobile=!1),r.applyTooltipStyles($(".gux-tooltip-overlay").attr("id"),null),t.$apply()},t.vehiclesNum=function(){return a.get("vehiclesResultsCount")},t.serviceFetchStatus=function(){return a.get("serviceFetchStatus")},t.cancelFilterChanges=function(){e.revertState()},t.isDetailedVehicleView=function(){return t.vehiclesNum()<=6},t.isDefaultState=function(){return e.isDefaultState()},i.addEventListener("mediaQuery.change",t.resetSidebarState)}]),e.controller("sortByCtrl",["$scope","sortByService",function(e,t){e.items=t.getItems,e.activeItem=t.getSelected,e.sortByActive=!1,e.onClickSortOrder=function(e){t.setSelected(e)},e.init=function(e){t.setItems(e)}}]),e.controller("filterBarCtrl",["$scope","filterStateService","storeService",function(e,i,t){function l(e,t){var a;t?(a=e.value.indexOf(t),e.label=c.without(e.label,e.label[a]),e.value=c.without(e.value,t),i.add(e)):i.resetFilter(e)}e.vehiclesNum=function(){return t.get("vehiclesResultsCount")},e.filters=i.getDiscardableFilters,e.isDefaultState=i.isDefaultState,e.resetAll=function(e){13!==(e.keyCode||e.which)&&!0!==e||i.resetFilters()},e.keyPressedResetFilter=function(e,t,a){var i,n,o=e.keyCode||e.which,r=(e=angular.element(e.target),r=e.siblings(".filter-remove"),i=e.parent().prev().find(".filter-remove"),n=e.parent().next().find(".filter-remove"),r.length?e.prev()||e.next():i.length?i.last():n.length?n.first():e.parent().next(".filter-reset"));13===o&&(r.focus(),l(t,a))},e.clickResetFilter=function(e,t,a){l(t,a)}}]),e.controller("vehicleListCtrl",["$scope","$log","$sce","nameplateService","sortByService","filterStateService","storeService","CONF",function(t,e,a,i,n,o,r,l){t.vehicles=[],t.vehiclesResults=[],t.sortBy=n.getSelected,t.filters=o.getApplicableFilters,t.displayNameplatesOnly=o.isDefaultState,t.attributes=l.vehicleAttributes,t.filterAttributes=l.filterVehicleAttributes,t.getVehicleAttribute=function(e,t){return a.trustAsHtml(s.getAttribute(e,t))},t.isFilterActive=function(e){return o.isFilterActive(s.getAttributeValueFromKey(e))},t.$watchCollection("vehiclesResults",function(){var e=c.isArray(t.vehiclesResults)?t.vehiclesResults.length:0;r.add("vehiclesResultsCount",e)}),r.add("vehiclesResultsCount",0),r.add("clickCount",0),i.getVehicles().then(function(e){t.vehicles=e,r.add("serviceFetchStatus",!0)},function(){r.add("serviceFetchStatus",!1),e.error("Failed to fetch data")})}])}),define("showroom/showroom.directives",["showroom/showroom.app","showroom/showroom.services","_","mediaQuery","disclosure/component.disclosure","scroll/global.ux.scroll","vehicleAttributeUtil"],function(e,t,m,o,i,r,d){e.directive("ngGuxOffClick",["$parse","$document",function(a,n){return{compile:function(e,t){var i=a(t.ngGuxOffClick);return function(t,e,a){e.bind("click",function(e){e.stopPropagation()}),angular.element(n[0].body).bind("click",function(e){t.$apply(function(){i(t,{$event:e})})})}}}}]),e.directive("ngGuxRadioSelectionFilter",["filterStateService",function(u){return{restrict:"A",scope:{variableName:"@",operationType:"@",displayForSegments:"@",prefix:"@",suffix:"@"},link:function(a,t,i){function n(e,t){var a=i.displayForSegments?i.displayForSegments.split(","):[];return{variable:i.variableName,type:"radio",operationType:i.operationType,value:e,label:t,displayForSegments:a,noResultsLabel:i.noResultsLabel,prefix:i.prefix,suffix:i.suffix}}function o(e,t){u.add(n(e,t)),a.$apply()}function e(e){m.isUndefined(e)?t.find("input").prop("checked",!1):r(t.find("input[value="+e.value+"]"))}function r(e){t.find("input").each(function(){$(this).prop("checked",!1)}),e.prop("checked",!0)}function l(){o($(this).val(),$(this).data("label"))}function s(){var e=$(this).prev("input");r(e),o(e.val(),e.data("label"))}var c,d;c=t.find("input:checked").val(),d=t.find("input:checked").data("label"),m.isUndefined(c)||u.addDefault(n(c,d)),t.find("input").on("change",l),t.find("label").on("click",s),a.$watch(function(){return u.getFilter(i.variableName)},e,!0)}}}]),e.directive("ngGuxCheckboxSelectionFilter",["filterStateService",function(s){return{restrict:"A",scope:{variableName:"@",operationType:"@",displayForSegments:"@",prefix:"@",suffix:"@"},link:function(e,i,n){var o=n.displayForSegments?n.displayForSegments.split(","):[];function t(){var t=[],a=[];i.find("input:checked").each(function(){var e=$(this);t.push(e.val()),a.push(e.data("label"))}),s.add({variable:n.variableName,type:"checkbox",operationType:n.operationType,value:t,label:a,noResultsLabel:n.noResultsLabel,displayForSegments:o,prefix:n.prefix,suffix:n.suffix}),e.$apply()}function a(e){i.find("input").each(function(){$(this).prop("checked",!1)}),m.isUndefined(e)||o!==e.displayForSegments||m.each(e.value,function(e){i.find("input[value="+e+"]").prop("checked",!0)})}function r(){t()}function l(){var e=$(this).prev("input");e.prop("checked",!e.prop("checked")),t()}i.find("input").on("change",r),i.find("label").on("click",l),e.$watch(function(){return s.getFilter(n.variableName)},a,!0)}}}]),e.directive("ngGuxSliderSelectionFilter",["$sce","filterStateService",function(s,c){return{restrict:"A",scope:{variableName:"@",displayForSegments:"@",min:"=",max:"=",step:"@",defaultMin:"@",defaultMax:"@",formatter:"@",prefix:"@",suffix:"@"},link:function(i,e,t){function a(){var e=t.displayForSegments?t.displayForSegments.split(","):[];return{variable:t.variableName,type:"range",value:{min:i.modelMin,max:i.modelMax},displayForSegments:e,formatter:t.formatter,noResultsLabel:t.noResultsLabel}}function n(e){m.isUndefined(e)||(e.value.min!=i.modelMin&&(i.modelMin=e.value.min),e.value.max!=i.modelMax&&(i.modelMax=e.value.max))}function o(e,t){m.isNaN(e)||m.isNaN(t)||e==t||c.add(a())}function r(e,t){m.isNaN(e)||m.isNaN(t)||e==t||c.add(a())}function l(e){var t=parseInt(i.step),a=e.keyCode||e.which;$(e.target).hasClass("ng-slider-handle-min")?37===a?i.modelMin-=t:39===a&&i.modelMin+t<i.modelMax&&(i.modelMin+=t):$(e.target).hasClass("ng-slider-handle-max")&&(37===a&&i.modelMax-t>i.modelMin?i.modelMax-=t:39===a&&(i.modelMax+=t)),i.$apply()}i.getModelMin=function(){return s.trustAsHtml(d.getAttribute(i.formatter,{data:i.modelMin}))},i.getModelMax=function(){return s.trustAsHtml(d.getAttribute(i.formatter,{data:i.modelMax}))},i.modelMin=parseInt(t.defaultMin),i.modelMax=parseInt(t.defaultMax),i.step=parseInt(i.step),i.pinHandle=null,m.isUndefined(t.defaultMin)&&(i.pinHandle="min"),m.isUndefined(t.defaultMax)&&(i.pinHandle="max"),c.addDefault(a()),i.$watch("modelMin",o),i.$watch("modelMax",r),i.$watch(function(){return c.getFilter(t.variableName)},n,!0),e.find(".ng-slider-handle").on("click",function(){this.blur()}),e.find(".ng-slider-handle").bind("keydown",l)},template:'<div class="slider-value"><span class="slider-value-left" data-ng-if="pinHandle == null || pinHandle == \'min\'">{{prefix}}<span data-ng-bind-html="getModelMin()"></span>{{suffix}}</span><span class="slider-value-right" data-ng-if="pinHandle == null || pinHandle == \'max\'">{{prefix}}<span data-ng-bind-html="getModelMax()"></span>{{suffix}}</span></div><div data-range-slider data-min="min" data-max="max" data-model-min="modelMin" data-model-max="modelMax" data-prevent-equal-min-max="true" data-step="{{step}}" data-pin-handle="{{pinHandle}}" data-show-values="false"></div>'}}]),e.directive("ngGuxDisplayForSegments",["filterStateService",function(i){return{restrict:"A",scope:{ngGuxDisplayForSegments:"@"},link:function(e,t,a){e.$watch(function(){return i.getFilters()},function(){var e=a.ngGuxDisplayForSegments?a.ngGuxDisplayForSegments.split(","):[];i.isFilterApplicable(e)?t.show():t.hide()},!0)}}}]),e.directive("ngVehicleOpenMobileOverlay",[function(){return{restrict:"A",controller:["$scope",function(e){e.scrollPosition=0}],link:function(i,n){n.on("click",function(e){var t=n.closest(".model-item"),a=angular.element("body");i.isDetailedVehicleView()||t.hasClass("model-item-overlay")||"mobile"!==o.getMediaType()||(e.preventDefault(),i.scrollPosition=a.scrollTop(),r.preventScrollBody(),t.addClass("model-item-extended model-item-overlay"))})}}}]),e.directive("ngVehicleCloseMobileOverlay",[function(){return{restrict:"A",link:function(a,i){i.on("click",function(e){e.stopPropagation();var e=i.closest(".model-item-overlay"),t=a.scrollPosition||0;r.allowScrollBody(t),e.removeClass("model-item-extended model-item-overlay")})}}}]),e.directive("ngGuxDisclosure",[function(){return{restrict:"A",scope:{disclosure:"@"},link:function(e,a,t){i.initOne(a,t.disclosure),a.on("click",function(e){var t=a.closest(".model-item-overlay");"box"===angular.element("span[data-disclosures-show-mode]").data("disclosures-show-mode")&&(r.allowScrollBody(),t.removeClass("model-item-extended model-item-overlay"))})}}}]),e.directive("ngGuxDisclosureFilter",[function(){return{restrict:"A",link:function(t,e){var e=angular.element(e.find("[data-disclosure]")),a=angular.element("span[data-disclosures-show-mode]").data("disclosures-show-mode");e.on("click",function(e){"box"===a&&t.resetSidebarState()})}}}]),e.directive("ngGuxResultsWithoutFilter",["$filter","filterStateService","storeService",function(d,u,p){return{restrict:"A",scope:!0,link:function(e){var t=[],a={},i={},n=u.getFiltersDefault(),o=0,r=0,l=!1,s=!1;function c(){t=p.get("carsData"),a=e.filter,r=e.filters().length,l="vehicleSegments"==a.variable&&"radio"==a.type,s=1==r,i=angular.copy(u.getFilters()),i=u.getObjApplicableFilters(i),n[a.variable]?m.forEach(i,function(e){e.variable==a.variable&&(e.value=n[a.variable].value)}):i=m.filter(i,function(e){return!(e.variable==a.variable)}),l&&s&&(i=[]),t=d("vehiclesFilter")(t,i),t=m.filter(t,function(e){var t=e.isNameplate==m.isEqual(i,m.values(n));return t=l||s?e.isNameplate:t}),o=m.size(t),e.vehiclesObjNum=o,e.noResultsLabel=a.noResultsLabel}c(),e.$watch(function(){return u.getFilters()},c,!0)}}}]),e.directive("ngGuxVehicleTypeLink",[function(){return{restrict:"A",link:function(e,t){angular.element(t.find(".showroom-vehicle-type a")).on("keydown",function(e){32===(e.keyCode||e.which)&&(e.preventDefault(),this.click())})}}}]),e.directive("ngGuxSortByDropdownMenu",[function(){return{restrict:"A",controller:["$scope","$element",function(t,e){t.openSortBy=function(e){t.sortByActive=!0,t.$apply(),t.focusOption(e)},t.closeSortBy=function(){t.sortByActive=!1,t.$apply(),t.focusSortBy()},t.focusSortBy=function(){e.focus()},t.focusOption=function(e){e.focus()}}],link:function(d,u){u.on("keydown",function(e){var t=13,a=27,i=32,n=37,o=38,r=39,l=40,s=e.keyCode||e.which,c=u.find(".selected");!d.sortByActive&&m.includes([i,t],s)&&(e.preventDefault(),d.openSortBy(c)),d.sortByActive&&m.includes([a],s)&&(e.preventDefault(),d.closeSortBy()),m.includes([n,o,r,l],s)&&(e.preventDefault(),d.sortByActive?(c=u.find(":focus"),m.includes([r,l],s)&&!c.is(":last-child")&&d.focusOption(c.next()),m.includes([n,o],s)&&!c.is(":first-child")&&d.focusOption(c.prev())):d.openSortBy(c))})}}}]),e.directive("ngGuxSortBySelectOption",["sortByService",function(r){return{restrict:"A",require:"^ngGuxSortByDropdownMenu",link:function(o,e){e.on("keydown",function(e){var t=9,a=13,i=32,n=e.keyCode||e.which;n!==i&&n!==a||(e.preventDefault(),e.stopPropagation(),r.setSelected(o.item),o.closeSortBy()),n===t&&(e.preventDefault(),e.stopPropagation())})}}}])}),define("showroom/showroom.filters",["showroom/showroom.app","objectUtil","_","vehicleAttributeUtil","prices-display-configuration/component.prices-display-configuration"],function(app,objectUtil,_,vehicleAttributeUtil,pricesDisplayConf){function VehiclesFilter($log){return function(vehicles,filters){var filteredVehicles=vehicles;function handlePrimitiveComparison(propertyValue,filter){var expression=propertyValue+filter.operationType+filter.value;return eval(expression)}function handleRangeComparison(e,t){return e>=t.value.min&&e<=t.value.max}function handleArrayComparison(e,t){var a=t.value;return _.isArray(e)||(e=[e]),_.isArray(a)||(a=[a]),e=_.intersection(e,a),"AND"==t.operationType?e.length==a.length:0<e.length}function handleYearPropertyComparison(e,t){var a=(new Date).getFullYear();return"previous"==t.value?e<a:e==a}function handleVehicleSegmentsPropertyComparison(e,t){t=t.value,_.isArray(t)||(t=[t]),e=arrayToLowerCase(e.group).concat(arrayToLowerCase(e.bodyType));return 0<_.intersection(e,t).length}function arrayToLowerCase(a){return _.each(a,function(e,t){a[t]=e.toLowerCase()})}return 0<filteredVehicles.length&&_.each(filters,function(i){i&&(filteredVehicles=_.filter(filteredVehicles,function(e){var t=!1,a=arrayToLowerCase(objectUtil.getPropertyByString(i.variable,e));return"vehicleSegments"==i.variable?t=handleVehicleSegmentsPropertyComparison(e,i):_.isUndefined(a)?($log.warn("Property undefined",i.variable,e),t=!0):"year"==i.variable?t=handleYearPropertyComparison(a,i):"range"==i.type?t=handleRangeComparison(a,i):"checkbox"==i.type?t=handleArrayComparison(a,i):"radio"==i.type&&(t=handlePrimitiveComparison(a,i)),t}))}),filteredVehicles}}function utilFormatter(a){return function(e,t){return a.trustAsHtml(vehicleAttributeUtil.getAttribute(t,{data:e}))}}function VehiclesAttributesFilter(){return function(e,t){return _.filter(e,function(e){return!pricesDisplayConf.isAttributeHidden(e.attribute,t.code)})}}app.filter("vehiclesFilter",["$log",VehiclesFilter]),app.filter("utilFormatter",["$sce",utilFormatter]),app.filter("vehiclesAttributesFilter",VehiclesAttributesFilter)}),define("showroom/showroom",["jquery","angular","configurationProvider","showroom/showroom.app","showroom/showroom.config","showroom/showroom.controllers","showroom/showroom.services","showroom/showroom.directives","showroom/showroom.filters"],function(a,i,n,o,e,t,r,l,s){a(".showroom").each(function(e,t){o.constant("CONF",n.get(a(t))),o.constant("GLOBAL_CONF",n.get(a("#global-market-configuration"))),i.bootstrap(t,["showroom"])})}),define("showroom/showroom.services",["showroom/showroom.app","_"],function(e,u){e.factory("nameplateService",["$http","$log","CONF","GLOBAL_CONF","storeService",function(e,i,t,n,a){var o={};function r(e){var e=e.data.nameplates,n=t.nameplates,e=u.filter(e,function(a){return u.find(n,function(e){var t=a.code==e.code;return t&&(a.path=e.path),t})});return u.each(e,function(i){i.models=u.filter(i.models,function(a){var e=!1,t=u.find(n,{code:i.code});return e=t?u.find(t.models,function(e){var t=e.code==a.code;return t&&(a.path=e.path),t}):e})}),e}function l(e){return a.add("carsData",e),e}function s(e){var a=0;return u.each(e,function(t){u.contains(n.bnpCtaDisableNameplateCodes,t.code)?t.disableBnPCta=!0:t.disableBnPCta=!1,t.isNameplate=!0,t.contentOrder=a++,t.models=u.each(t.models,function(e){u.contains(n.bnpCtaDisableNameplateCodes,t.code)?e.disableBnPCta=!0:e.disableBnPCta=!1,e.isNameplate=!1,e.contentOrder=a++,e.name=t.name+" "+e.name})})}function c(e){var a=[];return u.each(e,function(e){var t=angular.copy(e.models);delete e.models,a.push(e),a=a.concat(t)}),a}function d(e){var a=t.vehicleGroups;return u.filter(e,function(n){var e=!1,o=-1,t=u.find(a,function(e){return o++,t=n,e=e,a=0<u.intersection(t.vehicleType,e.categories).length,i=0<u.intersection(t.group,e.categories).length,t=0<u.intersection(t.bodyType,e.categories).length,a||i||t;var t,a,i});return t?(e=!0,n.category={name:t.name,index:o}):i.warn("failed to assign category",n),e})}return o.getVehicles=function(){return e.get(t.endpoint).then(r).then(s).then(c).then(d).then(l)},o}]),e.factory("sortByService",function(){var t={},a={},i=[];return t.getSelected=function(){return a},t.setSelected=function(e){u.isUndefined(e.desc)||(e.desc=!e.desc),a=e},t.getItems=function(){return i},t.setItems=function(e){i=u.each(e,function(e){"category"==e.attribute&&(e.attribute=e.attribute+".index"),e.attributes=[e.attribute,"name"],"ascending"==e.defaultSortOrder?e.desc=!0:"descending"==e.defaultSortOrder&&(e.desc=!1),delete e.attribute,delete e.defaultSortOrder}),u.isEmpty(i)||t.setSelected(i[0])},t}),e.factory("filterStateService",["storeService",function(a){var i={},n={},e={},o={};function t(e){var t=a.get("clickCount")+1||1;u.isEmpty(e.value)?delete n[e.variable]:(n[e.variable]=r(e),n[e.variable].clickCount=t,o[e.variable]&&(o[e.variable].clickCount=t),a.add("clickCount",t))}function r(e){var t,a,i;return e.value=(i=t=e.value,u.isArray(t)?(a=t,i=u.each(a,function(e,t){(u.isString(e)||u.isBoolean(e)||u.isNumber(e))&&(a[t]=e.toLowerCase())})):e.value&&(u.isString(t)||u.isBoolean(t)||u.isNumber(t))&&(i=t.toLowerCase()),i),e}return i.getFilter=function(e){return n[e]},i.getFilters=function(){return n},i.getFiltersDefault=function(){return o},i.getDiscardableFilters=function(){return u.filter(i.getApplicableFilters(),function(e){var t=!0;return t=o[e.variable]?!u.isMatch(o[e.variable].value,e.value):t})},i.getApplicableFilters=function(){return u.filter(n,function(e){return i.isFilterApplicable(e.displayForSegments)})},i.getObjApplicableFilters=function(t){return u.filter(t,function(e){return i.isObjFilterApplicable(e.displayForSegments,t)})},i.resetFilters=function(){n=angular.copy(o)},i.resetFilter=function(e){o[e.variable]?n[e.variable]=o[e.variable]:delete n[e.variable]},i.isDefaultState=function(){return u.isEqual(n,o)},i.add=function(e){t(e)},i.addDefault=function(e){o[e.variable]=r(e),t(e)},i.isFilterApplicable=function(e){var t,a=0===e.length;return 0<e.length&&n.vehicleSegments&&(t=n.vehicleSegments.value,u.isArray(t)||(t=[t]),a=0<u.intersection(t,e).length),a},i.isObjFilterApplicable=function(e,t){var a=0===e.length;return 0<e.length&&t.vehicleSegments&&(t=t.vehicleSegments.value,u.isArray(t)||(t=[t]),a=0<u.intersection(t,e).length),a},i.isFilterActive=function(e){var t=n[e]?n[e].value:null,e=o[e]?o[e].value:null;return!(!t||!e)&&t!==e},i.saveCurrentState=function(){return e=angular.copy(n)},i.revertState=function(){return n=angular.copy(e)},i.removeFilter=function(e,t){return e[t]=o[t],e},i}]),e.factory("storeService",function(){var e={},a={};return e.add=function(e,t){u.isUndefined(e)||(a[e]=t)},e.get=function(e){return a[e]},e.clear=function(){a={}},e.remove=function(e){delete a[e]},e})}),define("mini-dealer-locator/minidealerlocator.app",["angular","dealer-locator/last-search-cookie.app"],function(e,t){return e.module("minidealerlocator",["ngSanitize","lastsearchcookie"]).config(["$logProvider",function(e){e.debugEnabled(!1)}])}),define("mini-dealer-locator/minidealerlocator.controllers",["jquery","mini-dealer-locator/minidealerlocator.app","expand-collapse/expandCollapseSection","analytics/analyticsEventLayer","analytics/analyticsPageLayer","analytics/analyticsVariables","cookie","mediaQuery"],function(x,e,t,D,P,T,N,A){e.controller("MainCtrl",["$rootElement","$scope","$timeout","$window","searchService","dealerItemRenderer","urlService","CONF","ERROR_MESSAGES","LastSearchService","mapService","GLOBAL_CONF","SERVICE_CONF",function(t,i,n,o,a,r,l,s,c,d,u,e,p){var m,h=this,f=x("#select-region"),g=x("#select-province"),v={enable:!0,minimumResultsForSearch:-1,blurOnChange:!1,selectOnBlur:!1,loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",allowClear:!0},y=!1,b=T.getSiteSection();function w(){var e=navigator.userAgent.toLowerCase();return-1!=e.indexOf("msie")&&parseInt(e.split("msie")[1])}h.setMarker=a.setMarker,h.scrollToMap=a.scrollToMap,h.loading=!1,h.firstPageloading=!0,h.showResults=!1,h.expandedResults=!1,h.searchInitialized=!1,h.selectedIndex=0,h.searchType=d.searchTypeValue("location"),h.query=d.searchInputValue(""),h.dealerId="",h.suggestions="",h.dealerLocation={},h.marketHasDDLFeature=!1,h.enableDropdown=!1,h.singleDropdown=!1,h.nzMarketList=["NZL"],h.showMap=!1,h.verifyMarket=function(){-1<x.inArray(e.iso3MarketCode,["THA"])&&(h.marketHasDDLFeature=!0,h.enableDropdown=!0),x("#select-region").prev().find("span.select2-chosen").text(x("#select-region").find("option").first().text()),x("#select-province").prev().find("span.select2-chosen").text(x("#select-province").find("option").first().text())},h.verifyMarket(),h.placeholders={location:s.enterLocationText,dealername:s.enterDealerNameText};var C=document.getElementById("mini-lad-input");w()&&w()<9&&(C.onkeyup=function(){h.autocomplete()},h.query=C.value);x(".accessories-button-wrap").data("audealerbasedaccessories")&&d.searchInputValue("")&&setTimeout(function(){C.value=""},0);function k(){h.suggestions={dealers:[],locations:[]}}function S(){D.getMiniDealerLocatorEvents().trackMiniLADClick("dealer info")}h.nearestDealerLabel=function(e){return s.locationSearchResultsHeaderText+'<a href="#">'+e.PostCode+"</a>"},h.dealerLocatorURL=P.getInternalCampaignPageLoad().appendGenericLink(l.getDealerLocatorURL(h.query)),h.results=[],h.mobileAndTablet="mobile"===A.getMediaType()||"tablet"===A.getMediaType(),h.errorMessage=null,h.searchClicked=function(e){w()&&w()<9&&(h.query=C.value),0<h.query.length?(e.preventDefault(),k(),h.searchInitialized=!0,d.set(h.query,h.searchType),h.loading=!0,e="dealername"===h.searchType?a.searchByDealer(h.query,h.dealerId):a.searchByLocation(h.query),h.dealerId="",h.dealerLocatorURL=P.getInternalCampaignPageLoad().appendGenericLink(l.getDealerLocatorURL(h.query)),h.showMap=!0,e.then(r).then(function(e){h.results=e,h.loading=!1,h.showResults=!0,h.dealerId="",h.errorMessage=null,h.removeMapAccessbility(!0),t.addClass("service-ok")},function(e){switch(h.results=[],h.loading=!1,h.showResults=!1,h.dealerId="",k(),e){case"No location found":h.errorMessage=c["error-no-locations"];break;case"No results found":h.errorMessage=c["error-no-results"];break;case"Timed out":h.errorMessage=c["error-critical"];break;case"No connection":h.errorMessage=c["error-no-connection"];break;default:h.errorMessage=null}})):(h.errorMessage=c["error-empty-search"],k()),S()},h.removeMapAccessbility=function(e){setTimeout(function(){x('.dealer-info a, .dealer-info button, .dealer-info [role="button"], .dealer-info div, .dealer-info iframe, .info-window .close .icon').attr("tabindex",-1),(e?x(".dl-search-info a").first():x(".expander")).focus()},1e3)},h.addMapAccessbility=function(){setTimeout(function(){x(".dealer-info a:visible, .map-marker, .info-window .close .icon").attr("tabindex",0),x('[data-marker="active"]').focus(),x(".map-marker").on("keyup",function(e){13===e.keyCode&&e.target.click()})},1e3)},h.searchProvinceState=function(){h.loading=!0,a.searchAllDealer().then(function(e){h.dealerLocation=e,N.setCookieWithPath("dealerLoc",JSON.stringify(e),1,"/");var a=[];x.each(h.dealerLocation,function(e,t){a.push(e)}),a.sort(),x.each(a,function(e,t){x("#select-region").append(x("<option></option>").val(t).html(t))}),h.loading=!1,h.errorMessage=null,n(function(){},0)},function(e){switch(h.loading=!1,e){case"No location found":h.errorMessage=c["error-no-locations"];break;case"No results found":h.errorMessage=c["error-no-results"];break;case"Timed out":h.errorMessage=c["error-critical"];break;case"No connection":h.errorMessage=c["error-no-connection"];break;default:h.errorMessage=null}})},h.autocompleteLocationSearchClicked=function(e,t){h.query=e,h.dealerId="",h.trackSearch(!1,!0),h.searchClicked(t)},h.autocompleteDealerSearchClicked=function(e,t,a){h.query=t,h.dealerId=e,h.trackSearch(!1,!0),h.searchClicked(a)},h.backToSearchClicked=function(){var e,t;h.loading=!1,h.showResults=!1,h.searchInitialized=!1,a.clearMarkers(),e="again",(t=a.collectSearchData(h.searchType,h.query,0)).searchAgainType=e,D.getMiniDealerLocatorEvents().trackSearchAgain(t),setTimeout(function(){x(".expander-body.expanded").length&&x(".miniDealerLocator").find(".expander").trigger("click")},0)},h.canTrackSearch=!1,h.trackSearch=function(e,t){(t||h.canTrackSearch)&&("home"!==b?D.getMiniDealerLocatorEvents().trackInitiateSearch():(t=e?"dealer search - geo locate":"dealer search",D.getHomePageEvents().trackHPOnClick(t))),h.canTrackSearch=!0},h.trackContactMiniDealer=function(e){},h.goToFullLocatorClicked=function(){D.getHomePageEvents().trackHPOnClick("dealer search")},h.showHideMap=function(e){var t;h.expandedResults=!h.expandedResults,h.expandedResults?h.addMapAccessbility():(t=open,D.getMiniDealerLocatorEvents().trackExpandAndHideMap(t),h.removeMapAccessbility(!1))},h.showDirections=function(e){D.getMiniDealerLocatorEvents().trackMiniLADClick("directions")},h.showDealerInfo=function(e){S()},h.contactDealer=function(e){D.getMiniDealerLocatorEvents().trackMiniLADCallDealerClick()},h.autocomplete=function(){h.myCurrentLocationVisible=!1,w()&&w()<9&&(h.query=C.value),3<=h.query.length?("dealername"===h.searchType?a.dealerNameAutocomplete(h.query):a.locationAutocomplete(h.query)).then(function(e){h.suggestions=e,h.errorMessage=null}):""===h.query?h.myCurrentLocationVisible=!0:k()},h.searchTypeChange=function(){"dealername"===h.searchType&&(h.myCurrentLocationVisible=!1),h.query="",k()},h.searchFieldBlur=function(e){y||x(".dealer-autocomplete-list li").find(":hover").length||k(),m=n(function(){h.myCurrentLocationVisible=!1},200)},h.searchFieldFocus=function(){y=!1,"location"===h.searchType&&""===h.query&&(h.myCurrentLocationVisible=!0)},i.$on("mapPinClicked",function(e,t){n(function(){h.selectedIndex=t},0)}),h.useCurrentLocation=function(t,e){var a;return h.marketHasDDLFeature&&h.firstPageloading&&h.searchProvinceState(),!(!t.originalEvent&&e)&&(a=u.getMap(),h.marketHasDDLFeature&&h.firstPageloading?h.firstPageloading=!1:(n.cancel(m),h.searchType="location",h.currentSearchType=h.searchType,o.navigator.geolocation?o.navigator.geolocation.getCurrentPosition(function(e){a.reverseGeocode({lat:e.coords.latitude,lng:e.coords.longitude},function(e){e&&(h.marketHasDDLFeature?(d.set(h.query,h.searchType),window.location.href=P.getInternalCampaignPageLoad().appendGenericLink(l.getDealerLocatorURL(h.dealerLocatorURL))):(h.query=e,h.usingCurrentLocation=!0,h.searchClicked(t),i.$apply()))})},function(e){h.currentSearchType;n(function(){switch(e.code){case e.POSITION_UNAVAILABLE:h.errorMessage=c["error-position-unavailable"];break;case e.TIMEOUT:h.errorMessage=c["error-timeout"];break;case e.UNKNOWN_ERROR:h.errorMessage=c["error-unknown"]}},0)}):(h.errorMessage=c["error-geolocation-not-supported"],h.currentSearchType),void(h.myCurrentLocationVisible=!1)))},h.selectProvince=function(){h.singleDropdown?setTimeout(function(){""===f.val()?x(".search-input.single-dropdown .region-error").removeClass("hide"):x(".search-input.single-dropdown .region-error").addClass("hide")},150):f.on("select2-selecting",function(e){""!=e.val?(x(this).closest(".form-group-input").find(".error").addClass("hide"),x(".form-group-input .dd-loading").show(),h.loadProvince(e.val)):(x(this).closest(".form-group-input").find(".error").removeClass("hide"),h.destroyProvinceDDL(g),g.select2(v))})},h.loadProvince=function(e){h.destroyProvinceDDL(g);e=h.dealerLocation[e];e.sort(),x.each(e,function(e,t){g.append(x("<option></option>").val(t).html(t))}),g.select2(v),x(".form-group-input .dd-loading").hide()},h.destroyProvinceDDL=function(e){var t=e.find("option:eq(0)");e.select2("destroy").removeAttr("disabled").find("option").remove(),e.empty().append(t)},h.searchByRegion=function(e){e&&e.preventDefault();e=f.val()||f.select2("val");""!=e?(f.closest(".form-dropdown").find(".error").addClass("hide"),h.searchType="dropdown",h.query="AdministrativeArea="+e,d.set(h.query,h.searchType),p.seoFriendlyURL||"true"===p.seoFriendlyURL?h.dealerLocatorURL=P.getInternalCampaignPageLoad().appendGenericLink(l.getDealerLocatorURL(h.query,!0)):h.dealerLocatorURL=P.getInternalCampaignPageLoad().appendGenericLink(l.getDealerLocatorURL(h.query)),D.getHomePageEvents().trackHPOnClick("dealer search"),window.location.href=h.dealerLocatorURL):x(this).closest(".form-dropdown").find(".error").removeClass("hide")},h.dropdownSearch=function(){g.on("select2-selecting",function(e){e.preventDefault(),h.hideDropdown(),""!=e.val?(x(this).closest(".form-dropdown").find(".error").addClass("hide"),x(".form-group-input .dd-loading").show(),h.provinceSetLabel(e.val),h.searchType="dropdown",h.query=e.val+":"+f.val(),d.set(h.query,h.searchType),p.seoFriendlyURL||"true"===p.seoFriendlyURL?h.dealerLocatorURL=P.getInternalCampaignPageLoad().appendGenericLink(l.getDealerLocatorURL(h.query,!0)):h.dealerLocatorURL=P.getInternalCampaignPageLoad().appendGenericLink(l.getDealerLocatorURL(h.query)),D.getHomePageEvents().trackHPOnClick("dealer search"),window.location.href=h.dealerLocatorURL):x(this).closest(".form-dropdown").find(".error").removeClass("hide")})},h.provinceSetLabel=function(e){g.select2("val",e)},h.hideDropdown=function(e){x(".select2-container").removeClass("select2-dropdown-open select2-container-active"),x(".select2-drop, .select2-drop-mask").hide()},h.removeAutocomplete=function(e){y=!1,27===e.keyCode?k():40===e.keyCode&&(y=!0,n(function(){x(".dealer-autocomplete-list li").first().find("a").focus()},0))},h.removeAutocompleteList=function(e,t){27===t.keyCode?(y=!1,k()):-1!==[38,40].indexOf(t.keyCode)?y=!0:13===t.keyCode&&h.autocompleteLocationSearchClicked(e,t)},h.blurAutocomplete=function(e){y||k(),y=!1}}])}),define("mini-dealer-locator/minidealerlocator.directives",["mini-dealer-locator/minidealerlocator.app","credit-payment-estimator/directives/creditPaymentEstimator.directive.eventPropogation"],function(e,t){e.directive("dynamicPlaceholder",function(){return{restrict:"A",link:function(e,t,a){a.$observe("dynamicPlaceholder",function(e){t.attr("placeholder",e)})}}}),e.directive("ngGuxGoogleMap",["mapService",function(i){return{restrict:"A",link:function(e,t,a){i.initMap(t.get(0))}}}]),e.directive("eventPropogation",t)}),define("mini-dealer-locator/minidealerlocator",["jquery","_","angular","configurationProvider","mini-dealer-locator/minidealerlocator.app","mini-dealer-locator/minidealerlocator.controllers","mini-dealer-locator/minidealerlocator.directives","mini-dealer-locator/directives/angular-flexslider","mini-dealer-locator/services/DealerItemRenderer","mini-dealer-locator/services/MapService","mini-dealer-locator/services/SearchService","mini-dealer-locator/services/TimeService","mini-dealer-locator/services/AddressService","mini-dealer-locator/services/UrlService"],function(h,f,g,v,y,e,t,a,n,o,r,l,s,c){return{init:function(){function a(e){return void 0===e?"":e}function t(e){var t;document.querySelector('script[src^="https://maps.googleapis.com/maps/api/"]')?"object"==typeof google&&"object"==typeof google.maps?MiniDealerLocator.initMap():setTimeout(function(){MiniDealerLocator.initMap()},1e3):(e="https://maps.googleapis.com/maps/api/js?client=gme-fordmotorcompany2&language="+a(e.localeLowerHyphenUpper)+"&region="+a(e.marketCode)+"&libraries=places&channel="+e.marketCode+"&callback=MiniDealerLocator.initMap",(t=document.createElement("script")).setAttribute("type","text/javascript"),t.setAttribute("src",e),document.getElementsByTagName("head")[0].appendChild(t))}var n,m=v.get(h("#global-market-configuration")),e=h(window).scrollTop(),o=h(window).height();0<h(".miniDealerLocator").length&&(n=h(".miniDealerLocator").offset().top,h(".miniDealerLocator").outerHeight()),window.MiniDealerLocator={},h(window).on("load",function(){n=h(".miniDealerLocator").offset().top,0<h(".miniDealerLocator").length&&n-o<e?(t(m),h(".miniDealerLocator").addClass("loaded"),h(".miniDealerLocator .component-content").removeClass("hidden"),"NZL"!=m.iso3MarketCode&&"THA"!=m.iso3MarketCode||setTimeout(function(){h(".miniDealerLocator").find(".btn-geo-location").trigger("click")},500)):o<=n&&console.log("miniDealerLocator not in sight, wait for scroll")}),h(window).on("scroll",function(e){e.preventDefault(),n=h(".miniDealerLocator").offset().top,0<h(".miniDealerLocator").length&&!h(".miniDealerLocator").hasClass("loaded")&&h(window).scrollTop()>=n-o&&(t(m),h(".miniDealerLocator").addClass("loaded"),h(".miniDealerLocator .component-content").removeClass("hidden"),"NZL"!=m.iso3MarketCode&&"THA"!=m.iso3MarketCode||setTimeout(function(){h(".miniDealerLocator").find(".btn-geo-location").trigger("click")},500))}),MiniDealerLocator.initMap=function(){function p(e){var t={};return f.each(e,function(e){t[e.key]=e.value}),t}function e(e){e&&(e.onkeydown=function(e){13===e.keyCode&&e.target.click()})}h(".miniDealerLocator").each(function(e,t){var a,n,o=v.get(h(t)),r=p(o.serviceConfig),l=(n=[],u=p((u=o).localisationConfig),f.each(u.polygon.split("%2C"),function(e){e=e.split("+");n.push({lng:e[0],lat:e[1]})}),u.polygon=n,(e=>{var t=e.addressFormatConfig,e={},a=[];for(i=0;i<t.entries.length;i++)a[i]=t.entries[i].entry;return e.addressSeparator=t.separator,e.addressFormat=a,e})(o)),s=o.distanceConfig[0],c=o.filterConfig[0],d=(a={},h(t).find(".error-messages p").each(function(){a[h(this).attr("class")]=h(this).text()}),a),o=(o.config.dealerLocatorURL=o.dealerLocatorUrl,y.constant("CONF",o.config),y.constant("SERVICE_CONF",r),y.constant("LOCALISATION_CONF",u),y.constant("GLOBAL_CONF",m),y.constant("ADDRESS_FORMAT_CONF",l),y.constant("DISTANCE_CONF",s),y.constant("FILTER_CONF",c),y.constant("ERROR_MESSAGES",d),y.constant("_",f),g.element(document.querySelector(".miniDealerLocator"))),r=h(window).scrollTop(),u=(o.injector()||g.bootstrap(t,["minidealerlocator"]),h(window).scrollTop(r),h(document).on("keydown",".dealer-autocomplete-list",function(e){e.stopPropagation(),e.preventDefault();var t=h(".dealer-autocomplete-list").find(":focus").closest("li").index();40==e.keyCode?h(".dealer-autocomplete-list").find("a").length!==t+1&&h(".dealer-autocomplete-list").find("a").eq([t+1]).focus():38==e.keyCode&&t&&h(".dealer-autocomplete-list").find("a").eq([t-1]).focus()}),h(".miniDealerLocator .search-input .input-text input").outerHeight()),l=h(".miniDealerLocator .search-input .mdl-use-location").outerHeight(),s=h(".miniDealerLocator .search-panel .autocomplete");h(s).css("top",u+l)}),e(document.querySelector(".btn-geo-location")),e(document.querySelector(".miniDealerLocator a"))}}}}),define("mini-dealer-locator/miniDealerLocatorMobileResultsCarousel",["jquery","jquery-flexslider"],function(t,e){var a={};return a.init=function(e){t(".mobile-results-carousel"),t(".mobile-results-carousel .slides").length,t(".flexslider").flexslider({animation:"slide",directionNav:!1,keyboard:!0,useCSS:!1,touch:!0,itemMargin:0,itemWidth:0,slideshow:!1})},a}),define("mini-dealer-locator/services/AddressService",["mini-dealer-locator/minidealerlocator.app"],function(e){e.factory("addressService",["ADDRESS_FORMAT_CONF",function(l){var e={};function s(e,t,a){return"separator"==t[a]&&e&&e.hasOwnProperty(t[a+1])&&e[t[a+1]].trim()&&0!==e[t[a+1]]}return e.formatAddress=function(e){for(var t=[],a=0,i=l.addressFormat,n=l.addressSeparator,o=0;o<i.length;o++)t[a]||(t[a]=[]),"newLine"==i[o]&&0<t[a].length?a++:s(e,i,o)?t[a].push(n):e&&e.hasOwnProperty(i[o])&&t[a].push(e[i[o]]);for(var r=0;r<t.length;r++)t[r]=t[r].join(" ");return t},e.joinAddress=function(e){for(var t="",a=l.addressFormat,i=l.addressSeparator,n=0;n<a.length;n++)s(e,a,n)?t+=i+" ":e&&e.hasOwnProperty(a[n])&&(t+=e[a[n]]);return t},e}])}),define("mini-dealer-locator/services/DealerItemRenderer",["mini-dealer-locator/minidealerlocator.app","analytics/analyticsPageLayer"],function(e,C){e.factory("dealerItemRenderer",["$q","$rootScope","$rootElement","$log","$timeout","mapService","timeService","urlService","_","LOCALISATION_CONF","FILTER_CONF","SERVICE_CONF",function(n,o,e,p,m,h,f,g,v,t,y,b){var w=v.template(v.unescape(e.find(".dealer-item").html()));return function(e){var t,r,l,s,c,d,u,a=n.defer(),i=(v.isUndefined(void 0)&&p.debug("Map has not been initialized"),t=e,h.getMap(),l=[],s=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],c=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],d=new Date,u=y.filters,v.forEach(t,function(e){for(var t=0;t<s.length;t++)e["Sales"+s[t]+"OpenTime"]&&e["Sales"+s[t]+"CloseTime"]&&(e["Sales"+s[t]+"OpenTime"]=f.formatTime(e["Sales"+s[t]+"OpenTime"]),e["Sales"+s[t]+"CloseTime"]=f.formatTime(e["Sales"+s[t]+"CloseTime"]));if(r=void 0,e["Sales"+c[d.getDay()]+"CloseTime"]&&(r=e["Sales"+c[d.getDay()]+"CloseTime"]),e.serviceList="",u){for(l=[],t=0;t<u.length;t++)1==e[u[t].option]&&l.push(u[t].display);l.length&&(e.serviceList=l.join(", "))}if(e.todayClosingTime=r,r=w(e),b.seoFriendlyURL&&"true"===b.seoFriendlyURL){var a=b.addressForURLfriendly;if(a&&""!==a){for(var i="",n=a.split(","),o=0;o<n.length;o++)i+=e[n[o]]+" ";e.dealerURL=C.getInternalCampaignPageLoad().appendGenericLink(g.getDealerLocatorURLfriendly(e.DealerName+" "+i+" "+e.DealerID))}else console.log("ERROR: You need define Address for URL friendly")}else e.dealerURL=C.getInternalCampaignPageLoad().appendGenericLink(g.getDealerLocatorURL()+"/dealer/"+e.DealerID);r=$("<div>"+r+"</div>"),$(r).find(".directions").attr("href",e.directions),$(r).find(".pinboxDealerUrl").attr("href",e.dealerURL),e.PrimaryURL&&"http://-"!=e.PrimaryURL&&(0!==e.PrimaryURL.indexOf("http")&&(e.PrimaryURL="http://"+e.PrimaryURL),$(r).find(".primaryURL").attr("href",e.PrimaryURL)),e.infoWindowMarkup=$(r).html()}),h.getMap());return i.clearDealers(),p.debug("Adding pins to the map"),i.displayDealers(e),e?(i.trigger(i.map,"resize"),i.setBounds(e.concat(location)),14<i.getZoom()?i.setZoom(14):i.setZoom(i.getZoom()-2),m(function(){i.selectMarker(0),i.markers[0].showInfoWindow(),o.$broadcast("mapPinClicked",0)},500),a.resolve(e)):a.reject("No results found"),a.promise}}])}),define("mini-dealer-locator/services/MapService",["mini-dealer-locator/minidealerlocator.app","dealerlocator/google-maps"],function(e,r){e.factory("mapService",["$log","LOCALISATION_CONF","GLOBAL_CONF",function(t,e,a){var i,n={},o=new r({language:a.locale,countryCode:a.marketCode,countryCodes:e.countryCodes,imagePath:"/etc/designs/guxfoap/clientlibs/guxfoap-dealerlocator/img/dealerlocator/",countryBounds:e.polygon,autocompleteCallbackURL:"",autocompleteCallbackName:"autoCompleteDealers",keyCode:a.keyCode});return n.initMap=function(e){o?"VN"===a.marketCode?(i=new o.map(e,{disableBusinessPOI:!1})).map.setOptions({styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"poi.attraction",stylers:[{visibility:"on"}]},{featureType:"poi.government",stylers:[{visibility:"on"}]},{featureType:"poi.medical",stylers:[{visibility:"on"}]},{featureType:"poi.park",stylers:[{visibility:"on"}]},{featureType:"poi.place_of_worship",stylers:[{visibility:"on"}]},{featureType:"poi.school",stylers:[{visibility:"on"}]},{featureType:"poi.sports_complex",stylers:[{visibility:"on"}]},{featureType:"water",elementType:"geometry",stylers:[{invert_lightness:!0},{visibility:"simplified"},{color:"#97a1e8"}]},{featureType:"water",elementType:"labels",stylers:[{visibility:"simplified"},{invert_lightness:!0},{color:"#97a1e8"}]}]}):i=new o.map(e,{disableBusinessPOI:!0}):t.debug("Failed to initalized maps API")},n.getMap=function(){return i},n}])}),define("mini-dealer-locator/services/SearchService",["mini-dealer-locator/minidealerlocator.app","analytics/analyticsEventLayer"],function(e,t){e.factory("searchService",["$q","$log","$location","$anchorScroll","$rootScope","$timeout","mapService","addressService","CONF","LOCALISATION_CONF","GLOBAL_CONF","DISTANCE_CONF","SERVICE_CONF",function(s,c,e,t,i,d,u,p,m,a,h,l,f){var g,v,y={},b={Miles:1.60934,Km:1},w=a.addressformat.split(",");function C(e,t,a,i){y.collectSearchData(e,t,a).postalCode=i}function k(e){var t={};return _.each(e,function(e){t[e.dealerAttribute]=1}),t}function S(e,t,a){return function(){i.$broadcast("mapPinClicked",t),a.deselectMarkers(),a.selectMarker(t),(selectedMarker=a.markers[t]).showInfoWindow()}}return y.meaMarketList=["AFG","BHR","IRQ","JOR","KWT","LBN","OMN","QAT","SAU","ARE","YEM"],y.ccaMarketList=["ATG","ABW","BHS","BMU","CYM","CUW","DMA","DOM","GRD","HTI","JAM","LCA","MAF","SUR","TTO"],y.caMarketList=["BLZ","CRI","GTM","HND","NIC","PAN","SLV"],y.ssaMarketList=["AGO","BFA","CBV","CMR","COD","ETH","GAB","GHA","CIV","KEN","LBR","MDG","MWI","MUS","MOZ","NGA","SEN","SYC","SLE","ZAF","TZA","UGA","ZMB","ZWE"],y.arMarketList=["ARG"],y.ecMarketList=["ECU"],y.zaMarketList=["ZAF"],y.twMarketList=["TWN"],y.auMarketList=["AUS"],y.nzMarketList=["NZL"],y.otherMarketList=["PRI","PER","COL"],y.searchNameMarketList=["CHL","VEN","COL"],y.meaLocalityList=["Abha","Abu Dhabi","Al Ahssa","Al Ain","Al Hassa","Amman","Baghdad","Barka","Basra","Beirut","Bureimi","Dammam","Doha","Dubai","Duhok","Erbil","Fujairah","Ha'fr Al Batin","Hail","Hazmieh","Irbid","Jeddah","Jizan","Jubail","Kabul","Madinah","Makkah","Muscat","Najran","Nizwa","Qassim","Ras Al Khaimah","Riyadh","Salalah","Sanaa","Seeb","Sharjah","Shuwaikh","Sitra","Sohar","Sulaymaniyah","Sur","Tabuk","Yanbu","Zarqa"],y.meaCountryList=["Afghanistan","Bahrain","Iraq","Jordan","Kuwait","Lebanon","Oman","Qatar","Saudi Arabia","United Arab Emirates","Yemen"],y.searchByLocation=function(e){var a,i=s.defer(),n=k(m.googleDealerAttributes),o=u.getMap(),r=e;return _.isUndefined(o)&&c.debug("Map has not been initialized"),n.CountryCode=h.iso3MarketCode,$.inArray(h.iso3MarketCode,this.nzMarketList)<0&&(n.Language=h.languageCode),y.updateFilterLanguage(n,e),navigator&&!1===navigator.onLine?i.reject("No connection"):(a=d(function(){i.reject("Timed out")},2e4),o.geocodeLocation(e,function(e){var t=!1;!_.isEmpty(e)&&e[0].types&&(t=_.contains(e[0].types,"postal_code")),_.isEmpty(e)?(o.clearDealers(),d.cancel(a),i.reject("No location found")):(g=e[0],o.searchDealersByDistance(g,m.defaultDistance,5,function(e){C("location",r,e.length,t),_.isEmpty(e)?(o.clearDealers(),d.cancel(a),i.reject("No results found")):(v=0,_.forEach(e,function(e){var t,a,i;e.directions=o.getAddressDirectionsURL(e,w,g,f.googleMapApi),e.formattedAddress=p.formatAddress(e),e.formattedDistance=(t=e.distance/(1e3*b[l.unit]),a=l.unit,(i=(i=parseFloat(t))&&(1<=i?parseInt(t):Math.round(10*i)/10))?i+" "+a:t),e.callback=S(0,v,o),v++}),d.cancel(a),i.resolve(e))},n))})),i.promise},y.searchByDealer=function(e,t){var a,i,n=s.defer(),o=k(m.googleDealerAttributes),r=u.getMap(),l=e;return _.isUndefined(r)&&c.debug("Map has not been initialized"),o.CountryCode=h.iso3MarketCode,$.inArray(h.iso3MarketCode,this.nzMarketList)<0&&(o.Language=h.languageCode),y.updateFilterLanguage(o,e),_.isEmpty(t)?a={DealerNameSearch:e.toLowerCase()}:o.DealerID=t,navigator&&!1===navigator.onLine?n.reject("No connection"):(i=d(function(){n.reject("Timed out")},2e4),r.searchDealersByProperties(5,function(e){C("dealer",l,e.length),_.isEmpty(e)?(r.clearDealers(),d.cancel(i),n.reject("No results found")):(v=0,_.forEach(e,function(e){e.directions=r.getAddressDirectionsURL(e,w),e.formattedAddress=p.formatAddress(e),e.callback=S(0,v,r),v++}),d.cancel(i),n.resolve(e))},o,a)),n.promise},y.searchAllDealer=function(){var t,a=s.defer(),e={},i={},n=u.getMap();return _.isUndefined(n)&&c.debug("Map has not been initialized"),e.CountryCode=h.iso3MarketCode,$.inArray(h.iso3MarketCode,this.nzMarketList)<0&&(e.Language=h.languageCode),navigator&&!1===navigator.onLine?a.reject("No connection"):(t=d(function(){a.reject("Timed out")},2e4),n.searchDealersByProperties(1e3,function(e){_.isEmpty(e)?(d.cancel(t),a.reject("No results found")):(v=0,_.forEach(e,function(e){e.directions=n.getAddressDirectionsURL(e,w),e.formattedAddress=p.formatAddress(e),e.callback=S(0,v,n),v++;var t,a=e.AdministrativeArea;i[a]?(t=i[a],-1==$.inArray(e.Locality,t)&&t.push(e.Locality)):((t=[]).push(e.Locality),i[a]=t)}),d.cancel(t),a.resolve(i))},e,void 0)),a.promise},y.setMarker=function(e){var t=u.getMap();t.deselectMarkers(),t.selectMarker(e),(selectedMarker=t.markers[e]).showInfoWindow(),i.$broadcast("mapPinClicked",e)},y.scrollToMap=function(){"map-container"!==e.hash()?e.hash("map-container"):t()},y.clearMarkers=function(){u.getMap().clearDealers()},y.locationAutocomplete=function(t){var a,i=s.defer(),e=u.getMap();return 3<=t.length&&e.autocomplete(t,5,function(e){a=3<=t.length?e:{dealers:[],locations:[]},i.resolve(a)},"locations"),i.promise},y.dealerNameAutocomplete=function(t){var a,i=s.defer(),e=u.getMap();return 3<=t.length&&e.autocomplete(t,100,function(e){a=3<=t.length?e:{dealers:[],locations:[]},i.resolve(a)},"dealers"),i.promise},y.collectSearchData=function(e,t,a){return{searchType:e,searchTerm:t,totalResults:a,distance:m.defaultDistance}},y.updateFilterLanguage=function(e,t){e.Brand="Ford",-1<$.inArray(h.iso3MarketCode,this.meaMarketList)&&("en"==h.languageCode?e.Language="English":e.Language="Arabic",e.Brand="Ford",delete e.CountryCode,t)&&-1<$.inArray(t,this.meaLocalityList)&&(e.Locality=t),-1<$.inArray(h.iso3MarketCode,this.ccaMarketList)&&(e.Brand="Ford",delete e.Language,delete e.CountryCode),-1<$.inArray(h.iso3MarketCode,this.caMarketList)&&(e.Brand="Ford",delete e.Language,delete e.CountryCode),-1<$.inArray(h.iso3MarketCode,this.ssaMarketList)&&(e.Brand="Ford",delete e.Language,delete e.CountryCode),-1<$.inArray(h.iso3MarketCode,this.arMarketList)&&(e.Brand="Ford"),-1<$.inArray(h.iso3MarketCode,this.ecMarketList)&&(e.Brand="Ford",e.CountryCode="EC",delete e.Language),-1<$.inArray(h.iso3MarketCode,this.zaMarketList)&&(e.Brand="Ford",e.Language="English"),-1<$.inArray(h.iso3MarketCode,this.twMarketList)&&(e.Brand="Ford",delete e.Language,delete e.CountryCode),-1<$.inArray(h.iso3MarketCode,this.otherMarketList)&&(e.Brand="Ford",delete e.Language),-1<$.inArray(h.iso3MarketCode,this.auMarketList)&&(e.Brand="Ford",delete e.Language),-1<$.inArray(h.iso3MarketCode,this.searchNameMarketList)&&(e.Brand="Ford",delete e.Language),-1<$.inArray(h.iso3MarketCode,this.nzMarketList)&&(e.Brand="Ford",delete e.Language)},y.searchDealerNameFirst=function(){return-1<$.inArray(h.iso3MarketCode,this.ccaMarketList)||-1<$.inArray(h.iso3MarketCode,this.caMarketList)||-1<$.inArray(h.iso3MarketCode,this.ssaMarketList)||-1<$.inArray(h.iso3MarketCode,this.arMarketList)||-1<$.inArray(h.iso3MarketCode,this.ecMarketList)||-1<$.inArray(h.iso3MarketCode,this.zaMarketList)||-1<$.inArray(h.iso3MarketCode,this.twMarketList)||-1<$.inArray(h.iso3MarketCode,this.auMarketList)||-1<$.inArray(h.iso3MarketCode,this.searchNameMarketList)},y}])}),define("mini-dealer-locator/services/TimeService",["mini-dealer-locator/minidealerlocator.app"],function(e){e.factory("timeService",function(){var e={formatTime:function(e){return e=(e=e.length<4?0+e:e).substr(0,2)+":"+e.substr(2,2)}};return e})}),define("mini-dealer-locator/services/UrlService",["mini-dealer-locator/minidealerlocator.app"],function(e){e.factory("urlService",["CONF",function(l){var s={getDealerLocatorURL:function(e,t){for(var a=l.dealerLocatorURL,i=[],n=[],o=0;o<l.googleDealerAttributes.length;o++)i.push(l.googleDealerAttributes[o].dealerAttribute);i.length&&(r="filters="+i.join("|"),n.push(r)),l.defaultDistance&&(r="distance="+l.defaultDistance,n.push(r));var r=n.length&&!t?a+"?"+n.join("&"):a,n=t?"/search/":"#/search/";return r+=e?n+(s.query=e):n+s.query},getDealerLocatorURLfriendly:function(e){var t=l.dealerLocatorURL;return t.lastIndexOf("/")+1===t.length?t+s.formatURLpath(e):t+"/"+s.formatURLpath(e)},formatURLpath:function(e){return e?(e=(e=(e=e.replace(/^\s+|\s+$/g,"")).replace(/[`~!@#$%^&*()_|+\=?;:'",.<>\{\}\[\]\\\/]/gi,"")).replace(/\s+/g,"-").toLowerCase()).replace(/-{2,}/g,"-"):""}};return s}])}),define("mini-dealer-locator/directives/angular-flexslider",["angular","mini-dealer-locator/minidealerlocator.app"],function(R,e){e.directive("flexSlider",["$parse","$timeout",function(F,_){return{restrict:"A",scope:!1,replace:!0,transclude:!0,template:'<div class="flexslider-container"></div>',compile:function(e,E,r){return function(N,A){var e=(E.slide||E.flexSlide).match(/^\s*(.+)\s+in\s+(.*?)(?:\s+track\s+by\s+(.+?))?\s*$/),o=e[1],t=e[2],i=R.isDefined(e[3])?F(e[3]):F(""+o),I=null,$={},L=function(e,t){var a={};return a[o]=e,a.$index=t,i(N,a)},M=function(t,e,a){var i=L(t,e),n=N.$new();return n[o]=t,n.$index=e,r(n,function(e){e={collectionItem:t,childScope:n,element:e};return $[i]=e,"function"==typeof a?a(e):void 0})},O=function(e,t){e=L(e,t),t=$[e];if(null!==t)return delete $[e],t.childScope.$destroy(),t};return N.$watchCollection(t,function(i,e){var t,a,n,o,r,l,s,c,d,u,p,m,h,f,g,v,y;if(null!==i&&i.length||null!==e&&e.length){if(null!==I){for(c=I.data("flexslider"),o=Object.keys($).length,x=h=0,v=(i=null===i?[]:i).length;h<v;x=++h)n=i[x],L(n,x),n;if(p=(()=>{var e,t,a=[];for(x=e=0,t=i.length;e<t;x=++e)n=i[x],a.push({value:n,index:x});return a})(),m=(()=>{var e=[];for(u in $)x=$[u],e.push(x.collectionItem);return e})(),1===p.length&&0===m.length||0===p.length){for(f=0,y=m.length;f<y;f++){var b=m[f];b=O(b,e.indexOf(b)),c.removeSlide(b.element)}for(var w=function(e){return l===o&&(l=void 0),N.$evalAsync(function(){return c.addSlide(e.element,l)})},C=0,k=p.length;C<k;C++)r=p[C],l=r.index,M(r.value,l,w);return}}$={},null!==I&&I.remove(),d=R.element('<ul class="slides"></ul>'),(I=R.element('<div class="flexslider"></div>')).append(d),A.append(I);for(var S=function(e){var t=R.element('<li class="slide"></li>');return t.append(e.element),d.append(t)},x=g=0,D=i.length;g<D;x=++g)n=i[x],M(n,x,S);var P={};for(t in E)a=E[t],0!==t.indexOf("$")&&(isNaN(s=parseInt(a))?P[t]="false"===a||"true"===a?"true"===a:"start"===t||"before"===t||"after"===t||"end"===t||"added"===t||"removed"===t?(e=>{var t=F(e);return function(e){return N.$apply(function(){return t(N,{$slider:{element:e}})})}})(a):"startAt"===t?F(a)(N):a:P[t]=s);!P.sliderId&&E.id&&(P.sliderId=E.id+"-slider"),P.sliderId&&I.attr("id",P.sliderId);var T={animation:"slide",directionNav:!1,keyboard:!0,useCSS:!1,touch:1<i.length,itemMargin:100,itemWidth:0,slideshow:!1};return _(function(){return I.flexslider(T)},0)}})}}}}])}),define("formMiniDealerLocator/formMiniDealerLocator.app",["angular","dealer-locator/last-search-cookie.app"],function(e,t){return e.module("formminidealerlocator",["ngSanitize","lastsearchcookie"]).config(["$logProvider",function(e){e.debugEnabled(!1)}])}),define("formMiniDealerLocator/formMiniDealerLocator.controllers",["jquery","formMiniDealerLocator/formMiniDealerLocator.app","expand-collapse/expandCollapseSection","analytics/analyticsEventLayer","analytics/analyticsPageLayer","cookie","mediaQuery","marketConfigGlobal","utils/getParamValue"],function(L,e,t,M,O,E,F,_,R){e.controller("MainCtrl",["$rootElement","$scope","$timeout","$window","searchService","dealerItemRenderer","urlService","CONF","ERROR_MESSAGES","LastSearchService","mapService","GLOBAL_CONF",function(a,i,n,o,r,t,l,s,c,d,u,e){var p,m=this,h=L("#select-region"),f=L("#select-province"),g={enable:!0,minimumResultsForSearch:-1,blurOnChange:!1,selectOnBlur:!1,loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",allowClear:!0},v=!1,y=angular.element(document).find('.link-holder input[name="viewMapLabel"]'),b=angular.element(document).find('.link-holder input[name="closeMapLabel"]'),w=y.length?y.val():"View Map",C=b.length?b.val():"Close Map",k=(m.setMarker=r.setMarker,m.scrollToMap=r.scrollToMap,m.loading=!1,m.firstPageloading=!0,m.showResults=!1,m.searchInitialized=!1,m.selectedIndex=0,m.searchType=d.searchTypeValue("location"),m.query=d.searchInputValue(""),m.pincode="",m.autoPopulateAddress="",m.dealerId="",m.suggestions="",m.autoSuggestions="",m.dealerLocation={},m.marketHasDDLFeature=!1,m.showMap="collapsed",m.openCloseButton=w,m.searchButtonStyleClear=!1,m.enableDropdown=!1,m.singleDropdown=!1,m.nzMarketList=["NZL"],R.byName("step")),S=""!=E.getCookie("tdformdata")&&JSON.parse(E.getCookie("tdformdata")),x=$("did"),D=$("idx"),P=_.getCurrentMarketCode(),T=L("#isAccessoriesPage").val();function N(){var e=navigator.userAgent.toLowerCase();return-1!=e.indexOf("msie")&&parseInt(e.split("msie")[1])}m.autoPopulateMap=function(t){if(m.pincode&&!m.query||m.pincode&&m.query)r.locationAutocomplete(m.pincode).then(function(e){m.autoSuggestions=e,m.autoPopulateAddress=m.autoSuggestions.locations[0],m.autocompleteLocationSearchClicked(m.autoPopulateAddress,t)});else if(!m.pincode&&m.query)m.autocompleteLocationSearchClicked(m.query,t);else if(!m.pincode&&!m.query)return!1},angular.element("#mini-lad-input").ready(function(){n(function(){var t;FPS.get([{PreferredDealer:{}}],{success:function(e){console.log(e),0<e[0].PreferredDealer.length?(t=e[0].PreferredDealer[0].description,m.query=t,e=document.getElementById("initMap"),angular.element(e).triggerHandler("click")):m.query=d.searchInputValue("")},error:function(e){m.query=d.searchInputValue(""),console.log(e)}})},0)}),m.verifyMarket=function(){-1<L.inArray(e.iso3MarketCode,["THA"])&&(m.marketHasDDLFeature=!0,m.enableDropdown=!0),L("#select-region").prev().find("span.select2-chosen").text(L("#select-region").find("option").first().text()),L("#select-province").prev().find("span.select2-chosen").text(L("#select-province").find("option").first().text()),"za"!==_.getCurrentMarketCode()&&"au"!==_.getCurrentMarketCode()||setTimeout(function(){L(".form-mini-dealer-locator .search-button").hide()},100)},m.verifyMarket(),m.placeholders={location:s.enterLocationText,dealername:s.enterDealerNameText};var A=document.getElementById("mini-lad-input");N()&&N()<9&&(A.onkeyup=function(){m.autocomplete()},m.query=A.value);m.nearestDealerLabel=function(e){return s.locationSearchResultsHeaderText+'<a href="#">'+e.PostCode+"</a>"},m.dealerLocatorURL=O.getInternalCampaignPageLoad().appendGenericLink(l.getDealerLocatorURL(m.query)),m.results=[],"BRA"!==e.iso3MarketCode&&"ARG"!==e.iso3MarketCode||(m.query="",L("#mini-lad-input").attr("autocomplete","off"),m.brBtn=!0,m.searchOnEnter=function(e){m.searchClicked(e)});function I(){m.suggestions={dealers:[],locations:[]}}m.mobileAndTablet="mobile"===F.getMediaType()||"tablet"===F.getMediaType(),m.errorMessage=null,m.useCurrentLocation=function(t,e){var a;if(t.preventDefault(),!angular.element(t.currentTarget).hasClass("search-button")||!m.searchButtonStyleClear)return m.marketHasDDLFeature&&m.firstPageloading&&m.searchProvinceState(),!(!t.originalEvent&&e)&&(a=u.getMap(),m.marketHasDDLFeature&&m.firstPageloading?m.firstPageloading=!1:(n.cancel(p),m.searchType="location",m.currentSearchType=m.searchType,o.navigator.geolocation?o.navigator.geolocation.getCurrentPosition(function(e){a.reverseGeocode({lat:e.coords.latitude,lng:e.coords.longitude},function(e){e&&(m.marketHasDDLFeature?(d.set(m.query,m.searchType),window.location.href=O.getInternalCampaignPageLoad().appendGenericLink(l.getDealerLocatorURL(m.dealerLocatorURL))):(m.query=e,m.usingCurrentLocation=!0,m.searchClicked(t),i.$apply()))})},function(e){m.currentSearchType;n(function(){switch(e.code){case e.PERMISSION_DENIED:m.errorMessage=c["error-permission-denied"];break;case e.POSITION_UNAVAILABLE:m.errorMessage=c["error-position-unavailable"];break;case e.TIMEOUT:m.errorMessage=c["error-timeout"];break;case e.UNKNOWN_ERROR:m.errorMessage=c["error-unknown"]}},0)}):(m.errorMessage=c["error-geolocation-not-supported"],m.currentSearchType),void(m.myCurrentLocationVisible=!1)));m.searchButtonStyleClear=!1,m.query=""},m.searchClicked=function(e){e.preventDefault(),1<L(document).find(".form-fields-group").length&&L(document).find(".form-fields-group").each(function(e,t){var a;L(this).hasClass("group-disabled")||L(this).find(".formMiniDealerLocator").find(".configuration").attr("data-config")&&(a=JSON.parse(L(this).find(".formMiniDealerLocator").find(".configuration").attr("data-config")),s.googleDealerAttributes=a.googleDealerAttributes)}),"za"!==_.getCurrentMarketCode()&&"au"!==_.getCurrentMarketCode()||(m.selectedIndex=null,L("#selected-dealer-info").attr("data-mapon","yes"),L("#selected-dealer-info p").hide()),angular.element(e.currentTarget).hasClass("search-button")&&m.searchButtonStyleClear?(m.searchButtonStyleClear=!1,"za"!==_.getCurrentMarketCode()&&"au"!==_.getCurrentMarketCode()&&(m.query="")):(M.getHomePageEvents().trackHPOnClick("dealer search"),N()&&N()<9&&(m.query=A.value),0<m.query.length?(I(),m.searchInitialized=!0,d.set(m.query,m.searchType),m.loading=!0,e="dealername"===m.searchType?r.searchByDealer(m.query,m.dealerId):r.searchByLocation(m.query),m.dealerId="",m.dealerLocatorURL=O.getInternalCampaignPageLoad().appendGenericLink(l.getDealerLocatorURL(m.query)),m.searchButtonStyleClear=!0,e.then(t).then(function(e){var t;m.results=e,m.loading=!1,m.showResults=!0,m.dealerId="",m.errorMessage=null,"collapsed"===m.showMap&&m.showHideMap(),"au"===P&&"true"===T&&M.getAccessoriesEvents().selectDealerOverlay(),n(function(){},0),a.addClass("service-ok"),null!=k&&0!=k&&S&&S.step3.length&&n(function(){r.setMarker(S.step3[0].dealer.index)},600),"true"===L("#isAccessoriesPage").val()&&(t=sessionStorage.getItem("selectedDealerIndex"))&&n(function(){r.setMarker(t)},600),x&&x.length&&n(function(){r.setMarker(D),I()},600)},function(e){switch(m.results=[],m.loading=!1,m.showResults=!1,m.dealerId="",I(),e){case"No location found":m.errorMessage=c["error-no-locations"];break;case"No results found":m.errorMessage=c["error-no-results"];break;case"Timed out":m.errorMessage=c["error-critical"];break;case"No connection":m.errorMessage=c["error-no-connection"];break;default:m.errorMessage=null}})):(m.errorMessage=c["error-empty-search"],I()))},m.searchProvinceState=function(){m.loading=!0,r.searchAllDealer().then(function(e){m.dealerLocation=e,E.setCookieWithPath("dealerLoc",JSON.stringify(e),1,"/");var a=[];L.each(m.dealerLocation,function(e,t){a.push(e)}),a.sort(),L.each(a,function(e,t){L("#select-region").append(L("<option></option>").val(t).html(t))}),m.loading=!1,m.errorMessage=null,n(function(){},0)},function(e){switch(m.loading=!1,e){case"No location found":m.errorMessage=c["error-no-locations"];break;case"No results found":m.errorMessage=c["error-no-results"];break;case"Timed out":m.errorMessage=c["error-critical"];break;case"No connection":m.errorMessage=c["error-no-connection"];break;default:m.errorMessage=null}})},m.autocompleteLocationSearchClicked=function(e,t){t.stopPropagation(),m.query=e,m.dealerId="",m.searchClicked(t);var e=L(".miniDealerLocatorInput"),t=sessionStorage.getItem("selectedMapTrigger"),a=L(".accessories-dropdown.dealer-selection.is-new-design").data("selectdealerlabel");L(".accessories-dropdown.dealer-selection.is-new-design > a.select-dealer").hasClass("prefill-dealer-selection")&&e.val()!==t&&(console.log("new if condition"),L(".select-dealer-cta a").addClass("disable-field"),L(".accessories-dropdown.dealer-selection.is-new-design > a.select-dealer").removeClass("prefill-dealer-selection"),L(".accessories-dropdown.dealer-selection a").text(a),L(".accessories-button>div").removeClass("accessories-button-enable"),L(".accessories-button>div").addClass("accessories-button-disabled"),sessionStorage.removeItem("selectedDealerIndex"),sessionStorage.removeItem("selectedDealerCode"),sessionStorage.removeItem("selectedDealerName"),0<L(".dealer-list-block").length)&&((e=L(".dealer-box").get(0))?e.scrollIntoView({behavior:"smooth",block:"start"}):console.log("Target element not found")),sessionStorage.setItem("selectedMapTrigger",m.query)},m.autocompleteDealerSearchClicked=function(e,t,a){a.stopPropagation(),m.query=t,m.dealerId=e,m.searchClicked(a)},m.backToSearchClicked=function(){var e,t;m.loading=!1,m.showResults=!1,m.searchInitialized=!1,r.clearMarkers(),e="again",(t=r.collectSearchData(m.searchType,m.query,0)).searchAgainType=e,M.getMiniDealerLocatorEvents().trackSearchAgain(t),L(".expander-body.expanded").length&&L(".miniDealerLocator").find(".expander").trigger("click")},m.trackContactMiniDealer=function(e){},m.goToFullLocatorClicked=function(){M.getHomePageEvents().trackHPOnClick("dealer search")},m.showHideMap=function(e){"collapsed"===m.showMap?m.openMap():m.closeMap(),0<L("#selectDealerCtaAuPricing").length&&!L("#selectDealerCtaAuPricing").hasClass("mapLoaded")&&L("#selectDealerCtaAuPricing").addClass("viewMapLoaded")},m.openMap=function(){m.showMap="expanded",m.openCloseButton=C,m.addMiniMapAccessbility()},m.closeMap=function(){m.showMap="collapsed",m.openCloseButton=w,m.removeMiniMapAccessbility()},m.removeMiniMapAccessbility=function(){setTimeout(function(){L('.dealer-info a, .dealer-info button, .dealer-info [role="button"], .dealer-info div,.dealer-info iframe, .gm-style > div, .info-window .close .icon').attr("tabindex",-1),L(".gm-style > div, .gm-style > button").attr("tabindex",-1)},2e3)},m.addMiniMapAccessbility=function(){setTimeout(function(){L(".dealer-info a:visible, .map-marker, .info-window .close .icon").attr("tabindex",0),L(".gm-style > div").attr("tabindex",-1),L(".map-marker").on("keyup",function(e){13===e.keyCode&&e.target.click()})},2e3)},m.showDirections=function(e){M.getMiniDealerLocatorEvents().trackMiniLADClick("directions")},m.showDealerInfo=function(e){M.getMiniDealerLocatorEvents().trackMiniLADClick("dealer info")},m.contactDealer=function(e){M.getMiniDealerLocatorEvents().trackMiniLADCallDealerClick()},m.autocomplete=function(){m.myCurrentLocationVisible=!1,N()&&N()<9&&(m.query=A.value),3<=m.query.length?("dealername"===m.searchType?r.dealerNameAutocomplete(m.query):r.locationAutocomplete(m.query)).then(function(e){m.suggestions=e,m.errorMessage=null}):""===m.query?m.myCurrentLocationVisible=!0:I()},m.searchTypeChange=function(){"dealername"===m.searchType&&(m.myCurrentLocationVisible=!1),m.query="",I()},m.searchFieldBlur=function(e){v||L(".dealer-autocomplete-list li").find(":hover").length||I(),p=n(function(){m.myCurrentLocationVisible=!1},200)},m.searchFieldFocus=function(){v=!1,"location"===m.searchType&&""===m.query&&(m.myCurrentLocationVisible=!0)},i.$on("mapPinClicked",function(e,i){n(function(){var e,t,a;m.selectedIndex=i,d.setdealer(m.results[m.selectedIndex].DealerName),"true"===L("#isAccessoriesPage").val()&&(sessionStorage.setItem("selectedDealerCode",m.results[m.selectedIndex].DealerID),sessionStorage.setItem("selectedDealerName",m.results[m.selectedIndex].DealerName),sessionStorage.setItem("selectedDealerIndex",m.selectedIndex),L("#dealerCodeValue").text(m.results[m.selectedIndex].dealerID),L(".select-dealer-cta a").removeClass("disable-field"),L(".custom-radio-image").removeClass("selected"),L(".dealer-box").eq(m.selectedIndex).find(".custom-radio-image").addClass("selected"),L(".dealer-index").removeClass("dealer-index-selected"),L(".dealer-box").removeClass("dealer-box-border-selected"),L(".dealer-box").eq(m.selectedIndex).find(".dealer-index").addClass("dealer-index-selected"),L(".dealer-box").eq(m.selectedIndex).addClass("dealer-box-border-selected"),0<L(".dealer-list-block").length)&&(e=L(".dealer-box.dealer-box-border-selected").get(0),t=L(".dealer-box.dealer-box-border-selected").data("dealer-latitude"),a=L(".dealer-box.dealer-box-border-selected").data("dealer-longitude"),u.getMap().panTo({lat:t,lng:a}),e?e.scrollIntoView({behavior:"smooth",block:"start"}):console.log("Target element not found"))},0)}),"true"===L("#isAccessoriesPage").val()&&setTimeout(function(){L(".select-dealer-cta a").on("click",function(){var e,t=sessionStorage.getItem("selectedDealerCode");L(".accessories-dropdown.dealer-selection.is-new-design > a.select-dealer").addClass("prefill-dealer-selection"),null===t?console.log("no dealer in session"):(L(".overlay-close").click(),L(".accessories-button>div").removeClass("accessories-button-disabled").addClass("accessories-button-enable"),t=sessionStorage.getItem("selectedDealerCode"),e=sessionStorage.getItem("selectedDealerName"),t&&e&&(L(".accessories-row .select-dealer").text(e),t=L("<img>").attr("src","/etc/designs/guxfoap/clientlibs/guxfoap/img/EditPencilHolder.png").attr("alt","Edit Icon"),e=L("<span>").append(t),L(".accessories-row .select-dealer").append(e)),0<L(".dropdown-filter").length&&location.reload())})},1e3);function $(e,t){t=t||window.location.href,e=e.replace(/[\[\]]/g,"\\$&");e=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return e?e[2]?decodeURIComponent(e[2].replace(/\+/g," ")):"":null}m.selectProvince=function(){m.singleDropdown?setTimeout(function(){""===h.val()?L(".search-input.single-dropdown .region-error").removeClass("hide"):L(".search-input.single-dropdown .region-error").addClass("hide")},150):h.on("select2-selecting",function(e){""!=e.val?(L(this).closest(".form-group-input").find(".error").addClass("hide"),L(".form-group-input .dd-loading").show(),m.loadProvince(e.val)):(L(this).closest(".form-group-input").find(".error").removeClass("hide"),m.destroyProvinceDDL(f),f.select2(g))})},m.loadProvince=function(e){m.destroyProvinceDDL(f);e=m.dealerLocation[e];e.sort(),L.each(e,function(e,t){f.append(L("<option></option>").val(t).html(t))}),f.select2(g),L(".form-group-input .dd-loading").hide()},m.destroyProvinceDDL=function(e){var t=e.find("option:eq(0)");e.select2("destroy").removeAttr("disabled").find("option").remove(),e.empty().append(t)},m.searchByRegion=function(e){e&&e.preventDefault();e=h.val()||h.select2("val");""!=e?(h.closest(".form-dropdown").find(".error").addClass("hide"),m.searchType="dropdown",m.query="AdministrativeArea="+e,d.set(m.query,m.searchType),m.dealerLocatorURL=O.getInternalCampaignPageLoad().appendGenericLink(l.getDealerLocatorURL(m.query)),M.getHomePageEvents().trackHPOnClick("dealer search"),window.location.href=m.dealerLocatorURL):L(this).closest(".form-dropdown").find(".error").removeClass("hide")},m.dropdownSearch=function(){f.on("select2-selecting",function(e){e.preventDefault(),m.hideDropdown(),""!=e.val?(L(this).closest(".form-dropdown").find(".error").addClass("hide"),L(".form-group-input .dd-loading").show(),m.provinceSetLabel(e.val),m.searchType="dropdown",m.query=e.val+":"+h.val(),d.set(m.query,m.searchType),m.dealerLocatorURL=O.getInternalCampaignPageLoad().appendGenericLink(l.getDealerLocatorURL(m.query)),M.getHomePageEvents().trackHPOnClick("dealer search"),window.location.href=m.dealerLocatorURL):L(this).closest(".form-dropdown").find(".error").removeClass("hide")})},m.provinceSetLabel=function(e){f.select2("val",e)},m.hideDropdown=function(e){L(".select2-container").removeClass("select2-dropdown-open select2-container-active"),L(".select2-drop, .select2-drop-mask").hide()},m.removeAutocomplete=function(e){v=!1,27===e.keyCode?I():40===e.keyCode&&(v=!0,n(function(){L(".dealer-autocomplete-list li").first().find("a").focus()},0))},m.formMiniAccessibility=function(e){var t=event.target.parentNode;null!==t&&null!==t[e]&&null!==t[e].firstElementChild&&t[e].firstElementChild.focus()},m.removeAutocompleteList=function(e,t){27===t.keyCode?(v=!1,I()):38===t.keyCode?(v=!0,m.formMiniAccessibility("previousElementSibling")):40===t.keyCode?(m.formMiniAccessibility("nextElementSibling"),v=!0):13===t.keyCode&&m.autocompleteLocationSearchClicked(e,t)},m.blurAutocomplete=function(e){v||I(),v=!1},m.removeMiniMapAccessbility(),L("#privacyPolicy").on("keyup",function(e){13===e.keyCode&&(e.preventDefault(),e.target.click())})}])}),define("formMiniDealerLocator/formMiniDealerLocator.directives",["formMiniDealerLocator/formMiniDealerLocator.app","credit-payment-estimator/directives/creditPaymentEstimator.directive.eventPropogation"],function(e,t){e.directive("ngGuxGoogleMap",["mapService",function(i){return{restrict:"A",link:function(e,t,a){i.initMap(t.get(0))}}}]),e.directive("ngEnter",["$parse",function(o){return function(a,i,n){i.bind("keydown keypress",function(e){var t;13===e.which&&(t=o(n.ngEnter),a.$apply(function(){t(a,{$event:e,$value:i.val()})}),e.preventDefault())})}}]),e.directive("eventPropogation",t)}),define("formMiniDealerLocator/formMiniDealerLocator",["jquery","_","angular","configurationProvider","formMiniDealerLocator/formMiniDealerLocator.app","formMiniDealerLocator/formMiniDealerLocator.controllers","formMiniDealerLocator/formMiniDealerLocator.directives","formMiniDealerLocator/services/DealerItemRenderer","formMiniDealerLocator/services/MapService","formMiniDealerLocator/services/SearchService","formMiniDealerLocator/services/TimeService","formMiniDealerLocator/services/AddressService","formMiniDealerLocator/services/UrlService","analytics/analyticsEventLayer","marketConfigGlobal"],function(h,f,g,v,y,e,t,a,n,o,r,l,s,b,c){function d(e){return void 0===e?"":e}var w=c.getCurrentMarketCode();function u(e){var t;document.querySelector('script[src^="https://maps.googleapis.com/maps/api/"]')?"object"==typeof google&&"object"==typeof google.maps?FormMiniDealerLocator.initMap():setTimeout(function(){FormMiniDealerLocator.initMap()},1e3):(e="https://maps.googleapis.com/maps/api/js?client=gme-fordmotorcompany2&language="+d(e.localeLowerHyphenUpper)+"&region="+d(e.marketCode)+"&libraries=places&channel="+e.marketCode+"&callback=FormMiniDealerLocator.initMap",(t=document.createElement("script")).setAttribute("type","text/javascript"),t.setAttribute("src",e),document.body.appendChild(t))}var C=v.get(h("#global-market-configuration")),k=0;window.FormMiniDealerLocator={},h(window).on("load onoverlayload",function(){0<h(".formMiniDealerLocator").length&&(u(C),h(".miniDealerLocator .component-content").removeClass("hidden"))}),0<h(".formMiniDealerLocator").length&&(u(C),h(".miniDealerLocator .component-content").removeClass("hidden")),FormMiniDealerLocator.initMap=function(){function p(e){var t={};return f.each(e,function(e){t[e.key]=e.value}),t}var m=h("#isAccessoriesPage").val();h(".formMiniDealerLocator").each(function(e,t){"au"===w&&"true"===m&&0===k&&(k=1,b.getAccessoriesEvents().searchDealerOverlay());var a,n,o,r=v.get(h(t)),l=p(r.serviceConfig),s=(n=[],o=p((o=r).localisationConfig),f.each(o.polygon.split("%2C"),function(e){e=e.split("+");n.push({lng:e[0],lat:e[1]})}),o.polygon=n,(e=>{var t=e.addressFormatConfig,e={},a=[];for(i=0;i<t.entries.length;i++)a[i]=t.entries[i].entry;return e.addressSeparator=t.separator,e.addressFormat=a,e})(r)),c=r.distanceConfig[0],d=r.filterConfig[0],u=(a={},h(t).find(".error-messages p").each(function(){a[h(this).attr("class")]=h(this).text()}),a);r.config.dealerLocatorURL=r.dealerLocatorUrl,y.constant("CONF",r.config),y.constant("SERVICE_CONF",l),y.constant("LOCALISATION_CONF",o),y.constant("GLOBAL_CONF",C),y.constant("ADDRESS_FORMAT_CONF",s),y.constant("DISTANCE_CONF",c),y.constant("FILTER_CONF",d),y.constant("ERROR_MESSAGES",u),y.constant("_",f),g.element(t.querySelector(".form-mini-dealer-locator")).injector()||(g.bootstrap(t,["formminidealerlocator"]),h(".clear-search-button-container").hide(),h(".accessories-dropdown.dealer-selection.is-new-design > a.select-dealer").hasClass("prefill-dealer-selection")||(h(".miniDealerLocatorInput").val(""),sessionStorage.removeItem("selectedMapTrigger"),sessionStorage.removeItem("selectedDealerName"),sessionStorage.removeItem("selectedDealerIndex"),sessionStorage.removeItem("selectedDealerCode")),h(".miniDealerLocatorInput").on("input",function(){""===h(this).val()?h(".clear-search-button-container").hide():h(".clear-search-button-container").show()}),h(".clear-search-button-container").click(function(){h(".miniDealerLocatorInput").val("").trigger("change"),h(this).hide()}),h(".accessories-dropdown.dealer-selection.is-new-design > a.select-dealer").hasClass("prefill-dealer-selection")&&(h(".clear-search-button-container").show(),h("#selectDealerCtaAuPricing").addClass("mapLoaded"),h("#selectDealerCtaAuPricing").removeClass("viewMapLoaded"),h("#dealership-heading").text("Change Dealership"),r=sessionStorage.getItem("selectedMapTrigger"),l=sessionStorage.getItem("selectedDealerIndex"),(o=h(".miniDealerLocatorInput")).val(r),o.trigger("change"),0<(s=h("#initMap")).length&&s.click(),0<(c=h(".dealer-box").eq(l)).length)&&(h(".custom-radio-image").removeClass("selected"),c.find(".custom-radio-image").addClass("selected")))})}}),define("formMiniDealerLocator/services/AddressService",["formMiniDealerLocator/formMiniDealerLocator.app"],function(e){e.factory("addressService",["ADDRESS_FORMAT_CONF",function(d){var e={};return e.formatAddress=function(e){for(var t,a,i,n=[],o=0,r=d.addressFormat,l=d.addressSeparator,s=0;s<r.length;s++)n[o]||(n[o]=[]),"newLine"==r[s]&&0<n[o].length?o++:(t=e,"separator"==(a=r)[i=s]&&t&&t.hasOwnProperty(a[i+1])&&t[a[i+1]].trim()&&0!==t[a[i+1]]?n[o].push(l):e&&e.hasOwnProperty(r[s])&&n[o].push(e[r[s]]));for(var c=0;c<n.length;c++)n[c]=n[c].join(" ");return n},e}])}),define("formMiniDealerLocator/services/DealerItemRenderer",["formMiniDealerLocator/formMiniDealerLocator.app","analytics/analyticsPageLayer","marketConfigGlobal"],function(e,C,k){e.factory("dealerItemRenderer",["$q","$rootScope","$rootElement","$log","$timeout","mapService","timeService","urlService","_","LOCALISATION_CONF","FILTER_CONF",function(u,p,e,m,h,f,g,v,y,t,b){var w=y.template(y.unescape(e.find(".dealer-item").html()));return function(e){var t,a,n,o,r,l,s,c=u.defer(),d=(y.isUndefined(void 0)&&m.debug("Map has not been initialized"),t=e,f.getMap(),n=[],o=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],r=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],l=new Date,s=b.filters,y.forEach(t,function(e){for(i=0;i<o.length;i++)e["Sales"+o[i]+"OpenTime"]&&e["Sales"+o[i]+"CloseTime"]&&(e["Sales"+o[i]+"OpenTime"]=g.formatTime(e["Sales"+o[i]+"OpenTime"]),e["Sales"+o[i]+"CloseTime"]=g.formatTime(e["Sales"+o[i]+"CloseTime"]));if(a=void 0,e["Sales"+r[l.getDay()]+"CloseTime"]&&(a=e["Sales"+r[l.getDay()]+"CloseTime"]),e.serviceList="",s){for(n=[],i=0;i<s.length;i++)1==e[s[i].option]&&n.push(s[i].display);n.length&&(e.serviceList=n.join(", "))}e.todayClosingTime=a,e.dealerURL=C.getInternalCampaignPageLoad().appendGenericLink(v.getDealerLocatorURL()+"/dealer/"+e.EntityID),a=w(e),a=$("<div>"+a+"</div>"),$(a).find(".directions").attr("href",e.directions),$(a).find(".pinboxDealerUrl").attr("href",e.dealerURL),e.PrimaryURL&&"http://-"!=e.PrimaryURL&&(0!==e.PrimaryURL.indexOf("http")&&(e.PrimaryURL="http://"+e.PrimaryURL),$(a).find(".primaryURL").attr("href",e.PrimaryURL)),e.infoWindowMarkup=$(a).html()}),f.getMap());return d.clearDealers(),m.debug("Adding pins to the map"),d.displayDealers(e),e?(d.setBounds(e.concat(location)),14<d.getZoom()?d.setZoom(14):11<d.getZoom()&&d.getZoom()<=14?d.setZoom(12):d.setZoom(d.getZoom(11)),h(function(){"za"!==k.getCurrentMarketCode()&&"au"!==k.getCurrentMarketCode()&&(d.selectMarker(0),d.markers[0].showInfoWindow(),p.$broadcast("mapPinClicked",0))},500),c.resolve(e)):c.reject("No results found"),c.promise}}])}),define("formMiniDealerLocator/services/MapService",["formMiniDealerLocator/formMiniDealerLocator.app","dealerlocator/google-maps"],function(e,r){e.factory("mapService",["$log","LOCALISATION_CONF","GLOBAL_CONF",function(t,e,a){var i,n={},o=new r({language:a.locale,countryCode:a.marketCode,countryCodes:e.countryCodes,imagePath:"/etc/designs/guxfoap/clientlibs/guxfoap-dealerlocator/img/dealerlocator/",countryBounds:e.polygon,autocompleteCallbackURL:"",autocompleteCallbackName:"autoCompleteDealers",keyCode:a.keyCode});return n.initMap=function(e){o?"VN"===a.marketCode?(i=new o.map(e,{disableBusinessPOI:!1})).map.setOptions({styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"poi.attraction",stylers:[{visibility:"on"}]},{featureType:"poi.government",stylers:[{visibility:"on"}]},{featureType:"poi.medical",stylers:[{visibility:"on"}]},{featureType:"poi.park",stylers:[{visibility:"on"}]},{featureType:"poi.place_of_worship",stylers:[{visibility:"on"}]},{featureType:"poi.school",stylers:[{visibility:"on"}]},{featureType:"poi.sports_complex",stylers:[{visibility:"on"}]},{featureType:"water",elementType:"geometry",stylers:[{invert_lightness:!0},{visibility:"simplified"},{color:"#97a1e8"}]},{featureType:"water",elementType:"labels",stylers:[{visibility:"simplified"},{invert_lightness:!0},{color:"#97a1e8"}]}]}):i=new o.map(e,{disableBusinessPOI:!0}):t.debug("Failed to initalized maps API")},n.getMap=function(){return i},n}])}),define("formMiniDealerLocator/services/SearchService",["formMiniDealerLocator/formMiniDealerLocator.app","analytics/analyticsEventLayer"],function(e,n){e.factory("searchService",["$q","$log","$location","$anchorScroll","$rootScope","$timeout","mapService","addressService","CONF","LOCALISATION_CONF","GLOBAL_CONF","DISTANCE_CONF","SERVICE_CONF",function(s,c,e,t,i,d,u,p,m,a,h,f,g){var v,y,b={},w={Miles:1.60934,Km:1},C=a.addressformat.split(","),k=m.maximumResults||"5";function S(e,t,a,i){e=b.collectSearchData(e,t,a);e.postalCode=i,n.getMiniDealerLocatorEvents().trackInitiateSearch(e)}function x(e){var t={};return _.each(e,function(e){t[e.dealerAttribute]=1}),t}function D(e,t,a){return function(){i.$broadcast("mapPinClicked",t),a.deselectMarkers(),a.selectMarker(t),(selectedMarker=a.markers[t]).showInfoWindow()}}return m.googleDealerAttributes=m.googleDealerAttributes||[],b.meaMarketList=["AFG","BHR","IRQ","JOR","KWT","LBN","OMN","QAT","SAU","ARE","YEM"],b.ccaMarketList=["ATG","ABW","BHS","BMU","CYM","CUW","DMA","DOM","GRD","HTI","JAM","LCA","MAF","SUR","TTO"],b.caMarketList=["BLZ","CRI","GTM","HND","NIC","PAN","SLV"],b.ssaMarketList=["AGO","BFA","CBV","CMR","COD","ETH","GAB","GHA","CIV","KEN","LBR","MDG","MWI","MUS","MOZ","NGA","SEN","SYC","SLE","ZAF","TZA","UGA","ZMB","ZWE"],b.arMarketList=["ARG"],b.ecMarketList=["ECU"],b.zaMarketList=["ZAF"],b.twMarketList=["TWN"],b.auMarketList=["AUS"],b.nzMarketList=["NZL"],b.otherMarketList=["PRI","PER","COL"],b.searchNameMarketList=["CHL","VEN","COL"],b.meaLocalityList=["Abha","Abu Dhabi","Al Ahssa","Al Ain","Al Hassa","Amman","Baghdad","Barka","Basra","Beirut","Bureimi","Dammam","Doha","Dubai","Duhok","Erbil","Fujairah","Ha'fr Al Batin","Hail","Hazmieh","Irbid","Jeddah","Jizan","Jubail","Kabul","Madinah","Makkah","Muscat","Najran","Nizwa","Qassim","Ras Al Khaimah","Riyadh","Salalah","Sanaa","Seeb","Sharjah","Shuwaikh","Sitra","Sohar","Sulaymaniyah","Sur","Tabuk","Yanbu","Zarqa"],b.meaCountryList=["Afghanistan","Bahrain","Iraq","Jordan","Kuwait","Lebanon","Oman","Qatar","Saudi Arabia","United Arab Emirates","Yemen"],b.searchByLocation=function(e){var n,o=s.defer(),t=x(m.googleDealerAttributes),r=u.getMap(),l=e;return _.isUndefined(r)&&c.debug("Map has not been initialized"),t.CountryCode=h.iso3MarketCode,$.inArray(h.iso3MarketCode,this.nzMarketList)<0&&(t.Language=h.languageCode),b.updateFilterLanguage(t,e),navigator&&!1===navigator.onLine?o.reject("No connection"):(n=d(function(){o.reject("Timed out")},2e4),r.geocodeLocation(e,function(e){var a=!1;!_.isEmpty(e)&&e[0].types&&(a=_.contains(e[0].types,"postal_code")),_.isEmpty(e)?(r.clearDealers(),d.cancel(n),o.reject("No location found")):(v=e[0],r.searchDealersByDistance(v,m.defaultDistance,k,function(e){var t,i;S("location",l,e.length,a),_.isEmpty(e)?(r.clearDealers(),d.cancel(n),o.reject("No results found")):(y=0,_.forEach(e,function(e){var t,a,i;e.directions=r.getAddressDirectionsURL(e,C,v,g.googleMapApi),e.formattedAddress=p.formatAddress(e),e.formattedDistance=(t=e.distance/(1e3*w[f.unit]),a=f.unit,(i=(i=parseFloat(t))&&(1<=i?parseInt(t):Math.round(10*i)/10))?i+" "+a:t),e.callback=D(0,y,r),y++}),d.cancel(n),o.resolve(e),0<e.length&&"true"===$(document).find("#isAccessoriesPage").val()&&($("#selectDealerCtaAuPricing").addClass("mapLoaded"),$("#selectDealerCtaAuPricing").removeClass("viewMapLoaded"),(t=$(".dealer-list-block")).empty(),i="",e.forEach(function(e,t){var a=e.formattedAddress.join(" ");i+=`<div class="dealer-box dealer-box-border new-design" data-dealer-latitude="${e.Latitude}" data-dealer-longitude="${e.Longitude}" data-dealer-id="${e.DealerID}" data-dealer-name="${e.DealerName}">
                                                <div class="dealer-information">
                                                    <p class="dealer-code-city">
                                                        <span class="dealer-index">${t+1}</span>
                                                        <span class="dealer-details">${e.DealerName}</span>
                                                    </p>
                                                    <p class="address-line">${a}</p>
                                                </div>
                                                <span class="custom-radio-image"></span>
                                            </div>`}),t.prepend(i),t.on("click",".dealer-box.new-design",function(){var e=$(this).data("dealer-id"),t=$(this).data("dealer-name"),a=$(this).index(),i=$(this).data("dealer-latitude"),n=$(this).data("dealer-longitude"),t=(sessionStorage.setItem("selectedDealerCode",e),sessionStorage.setItem("selectedDealerName",t),sessionStorage.setItem("selectedDealerIndex",a),$(".custom-radio-image").removeClass("selected"),$(this).find(".custom-radio-image").addClass("selected"),$("#dealerCodeValue").text(e),$(".select-dealer-cta a").removeClass("disable-field"),$(".dealer-index").removeClass("dealer-index-selected"),$(".dealer-box").removeClass("dealer-box-border-selected"),$(this).find(".dealer-index").addClass("dealer-index-selected"),$(this).addClass("dealer-box-border-selected"),$('.map-marker[data-marker="active"]'));t&&t.each(function(e,t){$(t).attr("data-marker","non-active"),$(t).find("img").attr("src","/etc/designs/guxfoap/clientlibs/guxfoap-dealerlocator/img/dealerlocator/map-marker.png")}),$(".map-marker").eq(a).attr("data-marker","active"),$(".map-marker").eq(a).find("img").attr("src","/etc/designs/guxfoap/clientlibs/guxfoap-dealerlocator/img/dealerlocator/map-marker-active.png"),$(".map-marker").eq(a).css("z-index",100),r.panTo({lat:i,lng:n})})))},t))})),o.promise},b.searchByDealer=function(e,t){var a,i,n=s.defer(),o=x(m.googleDealerAttributes),r=u.getMap(),l=e;return _.isUndefined(r)&&c.debug("Map has not been initialized"),o.CountryCode=h.iso3MarketCode,$.inArray(h.iso3MarketCode,this.nzMarketList)<0&&(o.Language=h.languageCode),b.updateFilterLanguage(o,e),_.isEmpty(t)?a={DealerNameSearch:e.toLowerCase()}:o.EntityID=t,navigator&&!1===navigator.onLine?n.reject("No connection"):(i=d(function(){n.reject("Timed out")},2e4),r.searchDealersByProperties(k,function(e){S("dealer",l,e.length),_.isEmpty(e)?(r.clearDealers(),d.cancel(i),n.reject("No results found")):(y=0,_.forEach(e,function(e){e.directions=r.getAddressDirectionsURL(e,C),e.formattedAddress=p.formatAddress(e),e.callback=D(0,y,r),y++}),d.cancel(i),n.resolve(e))},o,a)),n.promise},b.searchAllDealer=function(){var t,a=s.defer(),e={},i={},n=u.getMap();return _.isUndefined(n)&&c.debug("Map has not been initialized"),e.CountryCode=h.iso3MarketCode,$.inArray(h.iso3MarketCode,this.nzMarketList)<0&&(e.Language=h.languageCode),navigator&&!1===navigator.onLine?a.reject("No connection"):(t=d(function(){a.reject("Timed out")},2e4),n.searchDealersByProperties(1e3,function(e){_.isEmpty(e)?(d.cancel(t),a.reject("No results found")):(y=0,_.forEach(e,function(e){e.directions=n.getAddressDirectionsURL(e,C),e.formattedAddress=p.formatAddress(e),e.callback=D(0,y,n),y++;var t,a=e.AdministrativeArea;i[a]?(t=i[a],-1==$.inArray(e.Locality,t)&&t.push(e.Locality)):((t=[]).push(e.Locality),i[a]=t)}),d.cancel(t),a.resolve(i))},e,void 0)),a.promise},b.setMarker=function(e){var t=u.getMap();t.deselectMarkers(),t.selectMarker(e),(selectedMarker=t.markers[e]).showInfoWindow(),i.$broadcast("mapPinClicked",e)},b.scrollToMap=function(){"map-container"!==e.hash()?e.hash("map-container"):t()},b.clearMarkers=function(){u.getMap().clearDealers()},b.locationAutocomplete=function(t){var a,i=s.defer(),e=u.getMap();return 3<=t.length&&e.autocomplete(t,5,function(e){a=3<=t.length?e:{dealers:[],locations:[]},i.resolve(a)},"locations"),i.promise},b.dealerNameAutocomplete=function(t){var a,i=s.defer(),e=u.getMap();return 3<=t.length&&e.autocomplete(t,100,function(e){a=3<=t.length?e:{dealers:[],locations:[]},i.resolve(a)},"dealers"),i.promise},b.collectSearchData=function(e,t,a){return{searchType:e,searchTerm:t,totalResults:a,distance:m.defaultDistance}},b.updateFilterLanguage=function(e,t){e.Brand="Ford",-1<$.inArray(h.iso3MarketCode,this.meaMarketList)&&("en"==h.languageCode?e.Language="English":e.Language="Arabic",e.Brand="Ford",delete e.CountryCode,t)&&-1<$.inArray(t,this.meaLocalityList)&&(e.Locality=t),-1<$.inArray(h.iso3MarketCode,this.ccaMarketList)&&(e.Brand="Ford",delete e.Language,delete e.CountryCode),-1<$.inArray(h.iso3MarketCode,this.caMarketList)&&(e.Brand="Ford",delete e.Language,delete e.CountryCode),-1<$.inArray(h.iso3MarketCode,this.ssaMarketList)&&(e.Brand="Ford",delete e.Language,delete e.CountryCode),-1<$.inArray(h.iso3MarketCode,this.arMarketList)&&(e.Brand="Ford"),-1<$.inArray(h.iso3MarketCode,this.ecMarketList)&&(e.Brand="Ford",e.CountryCode="EC",delete e.Language),-1<$.inArray(h.iso3MarketCode,this.zaMarketList)&&(e.Brand="Ford",e.Language="English"),-1<$.inArray(h.iso3MarketCode,this.twMarketList)&&(e.Brand="Ford",delete e.Language,delete e.CountryCode),-1<$.inArray(h.iso3MarketCode,this.otherMarketList)&&(e.Brand="Ford",delete e.Language),-1<$.inArray(h.iso3MarketCode,this.auMarketList)&&(e.Brand="Ford",delete e.Language),-1<$.inArray(h.iso3MarketCode,this.searchNameMarketList)&&(e.Brand="Ford",delete e.Language),-1<$.inArray(h.iso3MarketCode,this.nzMarketList)&&(e.Brand="Ford",delete e.Language)},b.searchDealerNameFirst=function(){return-1<$.inArray(h.iso3MarketCode,this.ccaMarketList)||-1<$.inArray(h.iso3MarketCode,this.caMarketList)||-1<$.inArray(h.iso3MarketCode,this.ssaMarketList)||-1<$.inArray(h.iso3MarketCode,this.arMarketList)||-1<$.inArray(h.iso3MarketCode,this.ecMarketList)||-1<$.inArray(h.iso3MarketCode,this.zaMarketList)||-1<$.inArray(h.iso3MarketCode,this.twMarketList)||-1<$.inArray(h.iso3MarketCode,this.auMarketList)||-1<$.inArray(h.iso3MarketCode,this.searchNameMarketList)},b}])}),define("formMiniDealerLocator/services/TimeService",["formMiniDealerLocator/formMiniDealerLocator.app"],function(e){e.factory("timeService",function(){var e={formatTime:function(e){return e=(e=e.length<4?0+e:e).substr(0,2)+":"+e.substr(2,2)}};return e})}),define("formMiniDealerLocator/services/UrlService",["formMiniDealerLocator/formMiniDealerLocator.app"],function(e){e.factory("urlService",["CONF",function(r){var l={getDealerLocatorURL:function(e){for(var t,a=r.dealerLocatorURL,i=[],n=[],o=0;r.googleDealerAttributes&&o<r.googleDealerAttributes.length;o++)i.push(r.googleDealerAttributes[o].dealerAttribute);return i.length&&(t="filters="+i.join("|"),n.push(t)),r.defaultDistance&&(t="distance="+r.defaultDistance,n.push(t)),t=n.length?a+"?"+n.join("&"):a,t+=e?"#/search/"+(l.query=e):"#/search/"+l.query}};return l}])}),define("modelWalkAndCompare/modelWalkAndCompare.app",["angular"],function(e){return e.module("modelWalkAndCompare",["ngGuxSlider","ngRoute","ngGuxScrollpoint"])}),define("modelWalkAndCompare/modelWalkAndCompare.config",["modelWalkAndCompare/modelWalkAndCompare.app"],function(e){e.config(["$routeProvider",function(e){e.when("/",{template:document.getElementById("initial").innerHTML,controller:"initialCtrl"}),e.when("/select",{template:document.getElementById("initial").innerHTML,controller:"initialCtrl"}),e.when("/compare",{template:document.getElementById("compare").innerHTML,controller:"compareCtrl"}),e.otherwise({redirectTo:"/"})}])}),define("modelWalkAndCompare/modelWalkAndCompare.controllers",["_","modelWalkAndCompare/modelWalkAndCompare.app","modelWalkAndCompare/modelWalkAndCompare.services","vehicleAttributeUtil","mediaQuery"],function(c,e,t,a,i){function s(r,e,l){var s={};return c.forOwn(e,function(e,o){c.forOwn(e,function(e,t){a=r,i=l,n=[],c.forOwn(e,function(e,t){e=((i,e,t)=>{var n=[],o=0,r={};return c.forOwn(e,function(e){t=e,a=null,c.forOwn(i,function(e){t===e.code&&(a=e)});var t,a,e=a;e?(n.push({name:e.value,optional:e.optional}),r[e.value+e.optional]=null):(o++,n.push({name:"-",optional:!1}),r["-"]=null)}),o===e.length||t&&1===Object.getOwnPropertyNames(r).length?null:n})(e,a,i);e&&n.push(e)});var a,i,n,e=n;0<e.length&&(s[o]=s[o]||{},s[o][t]=e)})}),s}e.constant("vehicleAttributeUtil",a),e.constant("mediaQuery",i),e.controller("mainCtrl",["$scope",function(e){}]),e.controller("initialCtrl",["$scope","$location","modelsService","CONFIG","vehicleAttributeUtil","mediaQuery",function(t,e,i,a,n,o){function r(){c.forEach(t.models,function(e){e.isSelected=!1})}function l(e){t.allowedModels="mobile"===e?2:3}t.isCompareActive="/select"===e.path(),t.models=[],t.minimumModels=2,t.allowedModels=0,t.selectedModelsCount=0,t.attributes=a.vehicleAttributes,t.priceRangeText="",t.toggleCompare=function(){t.isCompareActive=!t.isCompareActive,i.cleanSelection(),r()},t.gotoCompareView=function(){var a;t.selectedModelsCount>=t.minimumModels&&(a=[],c.forEach(t.models,function(e,t){e.isSelected&&a.push(t)}),i.setSelection(a),e.path("/compare"))},t.cancelCompare=function(){i.isInEditMode()?e.path("/compare"):t.toggleCompare()},t.canToggleSelection=function(e){return t.isCompareActive&&(e.isSelected||t.selectedModelsCount<t.allowedModels)},t.hasSelectedEnough=function(){return t.selectedModelsCount>=t.minimumModels},t.toggleSelection=function(e){t.canToggleSelection(e)&&(e.isSelected=!e.isSelected)},t.getVehicleAttribute=function(e,t){return i.getVehicleAttribute(e,t)},t.$watch("models",function(){t.selectedModelsCount=c.filter(t.models,{isSelected:!0}).length},!0),window.document.addEventListener("mediaQuery.change",function(e){l(e.detail.media),r(),t.$apply()}.bind(this)),l(o.getMediaType()),i.getModels().then(function(e){t.models=e,t.priceRangeText=i.getPrices(),r(),i.isInEditMode()&&0<i.getSelectedModelsIndexes().length&&(t.isCompareActive=!0,c.forEach(i.getSelectedModelsIndexes(),function(e){t.models[e].isSelected=!0})),t.featuresList=s([],i.getFeatureTable(),t.showOnlyDIfferences)})}]),e.controller("compareCtrl",["$scope","$location","$timeout","modelsService","CONFIG","mediaQuery",function(n,t,e,o,a,i){n.attributes=a.allModelViewAttributes,0<=o.changedModel&&o.resetChangeSelection();n.models=o.getSelectedModels(),0===n.models.length&&t.path("/");function r(){return c.map($(".accordion-title"),function(e){return e.dataset.key})}n.getSuggestionImage=function(){return o.getUnSelectedModelsImages()[0]},n.suggestionImage=n.getSuggestionImage(),n.removeModel=function(e){n.models.splice(e,1),n.suggestionImage=n.getSuggestionImage(),o.removeSelection(e),n.featuresList=s(c.pluck(n.models,"code"),o.getFeatureTable(),n.showOnlyDIfferences),($activeBody=angular.element(".accordion-body.active")).css("height","auto")},n.changeModel=function(e){o.setEditMode(!0),t.path("/")},n.addModel=function(){o.setEditMode(!0),t.path("/")},n.cancelCompare=function(){o.setEditMode(!1),t.path("/")},n.getVehicleAttribute=function(e,t){return o.getVehicleAttribute(e,t)},n.showOnlyDIfferences=!1,n.toggleShowDifferenceOnly=function(e){var t,a,i;o.getFeatureTable()&&(t=angular.element('input[name="diff"]'),a=angular.element(".accordion-body.active"),i=!1,"checked"===t.attr("checked")?n.showOnlyDIfferences=!1:n.showOnlyDIfferences=i=!0,n.models=o.getSelectedModels(),n.featuresList=s(c.pluck(n.models,"code"),o.getFeatureTable(),i),i&&n.checkAccordionSectionCollapse(e),a.css("height","auto"))},n.checkAccordionSectionCollapse=function(i){var n=r(),o=n[i];e(function(){var e,t=r(),a=0;-1===c.indexOf(t,o)&&(1<t.length&&((i+=1)>t.length&&(i-=2),e=n[i],a=c.indexOf(t,e)),angular.element(".accordion-title").eq(a).trigger("click"))},0)},o.getModels().then(function(e){n.models=o.getSelectedModels(),n.featuresList=s(c.pluck(n.models,"code"),o.getFeatureTable(),n.showOnlyDIfferences)})}])}),define("modelWalkAndCompare/modelWalkAndCompare.directives",["modelWalkAndCompare/modelWalkAndCompare.app","_","accordion/component.accordion","scroll-follow/component.scroll-follow","disclosure/component.disclosure"],function(e,t,i,n,o){e.directive("accordionInit",function(){return function(e,t,a){e.$last&&$(".accordion").each(function(){i.init($(this))})}}),e.directive("scrollFollow",function(){return function(e,t,a){e.$last&&$(".scroll-follow").each(function(){n.init($(this))})}}),e.directive("ngGuxDisclosure",function(){return{restrict:"A",scope:{disclosure:"@"},link:function(e,t,a){o.initOne(t,a.disclosure)}}})}),define("modelWalkAndCompare/modelWalkAndCompare.filters",["modelWalkAndCompare/modelWalkAndCompare.app","objectUtil","_"],function(e,t,a){e.filter("htmlDisplay",["$sce",function(t){return function(e){return t.trustAsHtml(e)}}])}),define("modelWalkAndCompare/modelWalkAndCompare",["jquery","angular","configurationProvider","modelWalkAndCompare/modelWalkAndCompare.app","modelWalkAndCompare/modelWalkAndCompare.config","modelWalkAndCompare/modelWalkAndCompare.controllers","modelWalkAndCompare/modelWalkAndCompare.services","modelWalkAndCompare/modelWalkAndCompare.directives","modelWalkAndCompare/modelWalkAndCompare.filters"],function(i,n,o,r,e,t,a,l,s){i(".modelWalkAndCompare").each(function(e,t){var a=i(t),a=o.get(a);r.constant("CONFIG",a),n.bootstrap(t,["modelWalkAndCompare"])})}),define("modelWalkAndCompare/modelWalkAndCompare.services",["modelWalkAndCompare/modelWalkAndCompare.app","_","vehicleAttributeUtil"],function(e,p,l){e.factory("nameplateService",["$http","CONFIG","$rootScope",function(e,u,t){var o={};function a(e){var a=angular.copy(e.data.models),e=p.find(u.nameplates,{code:u.nameplate}).models,i=[];return e.forEach(function(t){a.forEach(function(e){e.code==t.code&&(e.path=t.path,i.push(e))})}),i}function i(e){var t=0;return p.each(e,function(e){e.contentOrder=t++,e.name=u.nameplate+" "+e.name})}function r(e){return l.getAttributeWithoutFormatter(u.priceForRange,e)}function n(e,c,d){p.forOwn(e,function(s){s.featureGroups&&(featureGroups=s.featureGroups,p.forOwn(featureGroups,function(l){features=l.features,p.forOwn(features,function(e){var t=c,a=s,i=l,n=d,o=(t[a.name]=t[a.name]||[],t[a.name][i.name]=t[a.name][i.name]||[],t[a.name][i.name][e.id]=t[a.name][i.name][e.id]||[],e.shortDescription),r=!1;e.optional&&(r=u.optionalLabel),n={code:n,optional:r,value:o},t[a.name][i.name][e.id].push(n)})}))})}return o.featuresTable=[],o.$rootScope=t,o.getVehicles=function(){return e.get(u.endpoint+"/"+u.nameplate).then(a).then(i).then(o.setPrices).then(o.postProcessFeatures).then(o.keyFeatures)},o.keyFeatures=function(e){return p.forOwn(e,function(t){t.keyFeatures=[],t.featureCategories&&p.forOwn(t.featureCategories,function(e){e.featureGroups&&(e=e.featureGroups,p.forOwn(e,function(e){e=e.features;p.forOwn(e,function(e){if(e.keyFeature){if(u.keyFeaturesNumber&&t.keyFeatures.length>=u.keyFeaturesNumber)return!1;t.keyFeatures.push(e.shortDescription)}})}))})}),e},o.setPrices=function(e){var t,a,i,n;return u.priceRangeDisplay&&e&&0<e.length&&(i=p.max(e,r),i=l.getAttribute(u.priceForRange,i),t=p.min(e,r),t=l.getAttribute(u.priceForRange,t),a=1===e.length?u.priceRangeTextSingle:u.priceRangeText,i=i,n=e.length,a=a.replace("{minPrice}",t).replace("{maxPrice}",i).replace("{count}",n),o.prices=a),e},o.postProcessFeatures=function(e){return p.forOwn(e,function(e){e.featureCategories&&n(e.featureCategories,o.featuresTable,e.code)}),e},o}]),e.service("modelsService",["$q","nameplateService","vehicleAttributeUtil",function(t,a,i){var n={models:[],selectedModelsIndexes:[],prices:"",editMode:!1,setModels:function(e){n.models=e},setEditMode:function(e){n.editMode=e},isInEditMode:function(){return n.editMode},getVehicleAttribute:function(e,t){return"specs-engine-mpg-0"!=e&&"specs-engine-mpg-1"!=e||(e+="-standard"),i.getAttribute(e,t)},removeSelection:function(e){n.selectedModelsIndexes.splice(e,1)},getModels:function(){var e;return 0!==n.models.length?((e=t.defer()).resolve(n.models),a.postProcessFeatures(n.models),a.setPrices(n.models),e.promise):a.getVehicles().then(function(e){return n.models=e})},getPrices:function(){return a.prices},getFeatureTable:function(){return a.featuresTable},setSelection:function(e){n.selectedModelsIndexes=e},cleanSelection:function(){n.selectedModelsIndexes=[]},getSelectedModels:function(){var t=[];return p.forEach(n.selectedModelsIndexes,function(e){t.push(n.models[e])}),t},getSelectedModelsIndexes:function(){return n.selectedModelsIndexes},getUnSelectedModelsImages:function(){var a=[];return p.forEach(n.models,function(e,t){-1==n.selectedModelsIndexes.indexOf(t)&&a.push(n.models[t].image)}),a}};return n.getModels(),n}])}),define("prices-display-configuration/component.prices-display-configuration",["jquery","isAuthor","vehicleAttributeUtil"],function(t,i,n){var o,e={},r=[];return e.isAttributeHidden=function(e,t){var a,e=n.getAttributePriceFlag(e);return!i.getAuthorStatus()&&(t=a=(a=t=t)&&0<t.indexOf(".")?t.substring(0,t.indexOf(".")):a,a=_.contains(r,t),o||a)&&e},e.areAllPricesHidden=function(){return o},e.init=function(){var e=t("#prices-display-configuration").get(0);e&&(o=t(e=e).data("marketWidePricesDisplay"),r=t(e).data("nameplateCodes"))},e}),define("form-poc/form-poc",["jquery","angular","angular-route","angular-sanitize","isAuthor"],function(e,l,t,a,s){return{init:function(){l.module("FormPoc",["ngRoute"]).controller("MainPOCController",function(a,e,t,i,n,o){var r;a.model="Fiesta",a.title={possibleValues:["Mr","Miss"]},a.currentModels={possibleValues:["Fiesta","Focus","Mondeo","EcoSport","Mustang"]},a.futureModels={possibleValues:["Private","Fleet","Motability"]},a.varNames=["selectedVeh","selectedFutureVeh","selectedTitle","firstName","surname","email"],a.isFormsubmitted=!1,a.postdata=function(){for(var e=0;e<a.varNames.length;e++)console.log("Var : "+a.varNames[e]+":"+a[a.varNames[e]]);a.isFormsubmitted=!0},s.getAuthorStatus()&&(a.observeDOM=(r=window.MutationObserver||window.WebKitMutationObserver,function(e,a){r&&new r(function(e,t){(e[0].addedNodes.length||e[0].removedNodes.length)&&a()}).observe(e,{childList:!0,subtree:!0})}),a.observeDOM(document.getElementById("dynamichtml"),function(){o(l.element("#dynamichtml .row"))(a)})),a.registerVariable=function(e){a.varNames.push(e)},a.deRegisterVariable=function(e){for(var t=a.varNames.length-1;0<=t;t--)a.varNames[t]==e&&a.varNames.splice(t,1)},a.initData=function(e,t,a){n(e).assign(a,t),a.registerVariable(e)},window.testscope=a,window.rootscope=e;a.initData("dummy",["Fiesta","Focus"],a)}),l.bootstrap(document.getElementById("formPoc"),["FormPoc"])}}}),define("form/component.form.validation",["jquery","_","mediaQuery","analytics/analyticsEventLayer","utils/convertKeyword","utils/mediaTracking","cookie","utils/getParamValue","isAuthor","marketConfigGlobal","detect-ie","utils/specificValidations"],function($,_,mediaQuery,analyticsEventLayer,convertKeyword,mediaTracking,cookieUtil,getParamValue,isAuthor,marketConfigGlobal,detectIE,specificValidations){var IE=detectIE.version(),vehicleDetailsLeadGeneration="",isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),api={},isValidAbn=void 0,isPublishMode=!isAuthor.getAuthorStatus(),isMobile="mobile"===mediaQuery.getMediaType(),showAddedForm=!1,countryPlusPhoneNumber=!1,getLocation=function(e){var t=document.createElement("a"),e=(t.href=e,encodeURI(t.pathname));return 0!==e.indexOf("/")&&(e="/"+e),encodeURIComponent(e)};function triggerAddedForm(a){var i=a?"block":"none";$(".form-group-input input").each(function(e,t){(t=$(t)).attr("name")&&-1!==t.attr("name").split("_").indexOf("popForm")&&(a||t.val(""),t.parents(".textfield").css("display",i))}),$(".form-group-input select").each(function(e,t){(t=$(t)).attr("name")&&-1!==t.attr("name").split("_").indexOf("popForm")&&(!a&&t.select2&&t.select2("val",""),t.parent().parent().parent().css("display",i))})}function downloadSpecified(){$('[for="brochureBtn-download-brochure"]').trigger("click")}function downloadBrochure(){var t=$("input[name=downloadBrochurePath]").val();if(void 0!==t&&null!=t&&""!=t)if(IE)window.open(t,"_blank");else{var e=t.replace(/^.*[\\\/]/,""),a=document.createElement("a");if(a.href=t,a.target="_blank",isSafari)window.open(t);else{a.download=e;try{var i=document.createEvent("MouseEvents");i.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),a.dispatchEvent(i)}catch(e){window.open(t,"_blank")}(window.URL||window.webkitURL).revokeObjectURL(a.href)}}}function downloadBrochureNew(){var e,t,a=getParameterByName("brochuredownloadpath");"undefined"!=a&&null!=a&&""!=a&&(e=a.replace(/^.*[\\\/]/,""),(t=document.createElement("a")).href=a,t.target="_blank",t.download=e,t.style.display="none",document.body.appendChild(t),t.click(),setTimeout(()=>{URL.revokeObjectURL(t.href),t.parentNode.removeChild(t)},0))}function chkNewFormArray_2(){if(sessionStorage.specifiedModelToDisplay&&sessionStorage.selectedModel){var e=sessionStorage.specifiedModelToDisplay.split(","),t=sessionStorage.selectedModel;for(i=0;i<e.length;i++)if(t===e[i])return 1}}function populateThankYouPage(e){analyticsEventLayer.getFormWizardEvents().formComplete();var t=$(".multi-step-form"),a=t.attr("data-thankyoudetails"),i=jQuery.parseJSON(a),n=($(".thank-you",t).show(),$(".test-drive-complete",t).show(),$(".multi-stepper",t).hide(),$(".header",t).hide(),$(".form-content",t).hide(),"");if(e.bookingId&&e.bookingDate&&"OB"==$('[name="FORM_TYPE"]').val()){var a=e.bookingId,o=new Date(e.bookingDate.split(" ")[0]),r="",e=(e.braintreeTransId&&(r=e.braintreeTransId),o.getDate()),l=o.getMonth()+1,o=o.getFullYear(),s=i[0].thankyouname,c=(n+='<div class="booking-details com-mar"><h5>'+(s=s?i[0].thankyouname:"")+'</h5><div><span class="">Booking Id</span><span class="pull-right model">'+a+'</span></div><div><span class="">Booking Date</span><span class="pull-right model">'+(l+"/"+e+"/"+o)+'</span></div><div><span class="">Transaction Id</span><span class="pull-right model">'+r+"</span></div></div>",$.parseJSON(sessionStorage.getItem("BNP.MODELDATA.OBJ"))),d="";if(c){var u,d=d+'<div class="booking-details com-mar">'+("<h5>"+$(".test-drive-bnp-details").data("vehicle-info-title")+"</h5>");for(u in c)if(("modelName"==u||"engine"==u||"color"==u||"accessories"==u||"options"==u)&&1<c[u].length){var p="";switch(u){case"modelName":p=$(".test-drive-bnp-details").data("bnp-modelname");break;case"engine":p=$(".test-drive-bnp-details").data("bnp-engine");break;case"color":p=$(".test-drive-bnp-details").data("bnp-color");break;case"accessories":p=$(".test-drive-bnp-details").data("bnp-accessories");break;case"options":p=$(".test-drive-bnp-details").data("bnp-options")}d=(d=d+"<div>"+("<span>"+p+"</span>"))+('<span class="model">'+c[u]+"</span>")+"</div>"}n+=d+="</div>"}}for(var m=1;m<i.length;m++){var h=i[m].thankyouname;if(h){var n=n+'<div class="booking-details com-mar">'+("<h5>"+h+"</h5>"),f=i[m].thankyoujson;if(0!==f.length)for(var g=0;g<f.length;g++)n+='<div><span class="">'+f[g].variableValue+'</span><span class="model">'+(f[g].variableKey?$('[name="'+f[g].variableKey+'"]').val():"")+"</span></div>";n+="</div>"}}t.find(".redesign-form-details").html(n),2<t.find(".com-mar:visible").length&&$(".find-more").addClass("add-mar")}function FormValidate(e){this.$form=e,this.$formElementValidation=this.$form.find("[data-validation]"),this.config={validateOnBlur:!0},this.validators={required:function(e,t){return"checkbox"!==e.prop("type")&&0<_.trim(e.val()).length||e.prop("checked")},regExp:function(e,t){return new RegExp(t).test(e.val())},confirmValue:function(e){e=e.find("input");return e[0].value==e[1].value},confirmEleValue:function(e){return 1<e.length&&e[1].value==e[3].value},abnValue:function(t,a){t.closest(".abnCheck").find("small.error").remove(),t.closest(".abnCheck").find(".input-field").eq(0).removeClass("error"),t.closest(".abnCheck").find("input").eq(0).removeClass("error"),getABN(t,_.trim(t.val()),function(e){e="string"==typeof e?JSON.parse(e):e,e=e.name;e?(isValidAbn=!0,t.closest(".abnCheck").find("input").eq(1).val(e),t.closest(".abnCheck").find("small.error").remove(),t.closest(".abnCheck").find(".input-field").eq(0).removeClass("error").addClass("valid"),t.closest(".abnCheck").find("input").eq(0).removeClass("error").addClass("valid")):(isValidAbn=!1,t.closest(".abnCheck").find("small.error").remove(),t.closest(".abnCheck").find(".input-field").eq(0).removeClass("error"),t.closest(".abnCheck").find("input").eq(0).removeClass("error"),t.closest(".abnCheck").find("input").eq(1).val(""),t.closest(".abnCheck").find(".input-field").eq(0).removeClass("valid").addClass("error"),t.closest("label").append('<small class="error">'+a.message+"</small>"),t.closest(".abnCheck").find("input").eq(0).removeClass("valid").addClass("error"))})}};var n=getParameterByName("n");""!==n&&null!=n&&0<$("input[name=marketName]").size()&&"africa"==$("input[name=marketName]").first().val().toLowerCase()&&$("select[name=VOI_MODEL_DESCRIPTION]").each(function(e){var i,t=$(this).closest(".form-dropdown").parent().find(".configuration").attr("data-hiddenValueMapList");""!==t&&null!=t&&(t=JSON.parse(t),i=!1,$.each(t,function(a,e){if($.each(e,function(e,t){if(n===t.NAMEPLATE_CODE)return $("select[name=VOI_MODEL_DESCRIPTION]").attr("data-preselect",a),!(i=!0)}),i)return!1}))}),this.bindUIEvents()}function getABN(e,t,a){var i,n,o=$("#currentLocalePath").val();11==t.replace(/[^0-9]/g,"").length?(e.closest(".abnCheck").find("small.error").remove(),i=(n=e.closest(".abnCheck").find(".configuration")).data("abnendpoint"),n=n.data("abnguid"),["https://query.yahooapis.com/v1/public/yql","?q="+encodeURIComponent("select * from xml where url='"+(i+"/ABRSearchByABN?authenticationGuid="+n+"&includeHistoricalDetails=N&searchString="+t)+"'"),"&format=xml&callback=?"].join(""),$.ajax({type:"GET",url:o+"/.abn."+t+".data",async:!1,success:a,error:function(e){}}),setTimeout(function(){return isValidAbn},200)):(i=$(".abnCheck .form-textfield").find("input").attr("data-validation"))&&(n=JSON.parse(i).rules[0].message,e.closest(".abnCheck").find("input").eq(1).val(""),e.closest(".abnCheck").find("small.error").remove(),e.closest("label").append('<small class="error">'+n+"</small>"))}"2"===$("select[name=COMMENTS]").val()&&(showAddedForm=!0),triggerAddedForm(showAddedForm),$("select[name=COMMENTS]").change(function(e){showAddedForm="2"===e.val?(triggerAddedForm(!0),!0):(triggerAddedForm(!1),!1)}),$("input[name=purchaseDate_textBox_popForm]").blur(function(e){var e=e.target.value;!/^\d{4}-[0-1]\d-[0-3]\d$/.test(e)&&/^\d{4}[0-1]\d[0-3]\d$/.test(e)&&((e=e.split("")).splice(4,0,"-"),e.splice(7,0,"-"),e=e.join(""),$("input[name=purchaseDate_textBox_popForm]").val(e),$("input[name=purchaseDate_textBox_popForm]").blur())});var isJmcDealer=!1,urlGetDealers="";function checkIsJMC(){$("select[name=dealerName]").change(function(){var o,e=$('select[name="dealerName"]').val(),t=$('select[name="city"]').val(),a=$('select[name="province"]').val();isJmcDealer=!1,urlGetDealers&&(o=[],e?$.ajax({async:!1,url:urlGetDealers+"&city="+t+"&filter="+("AdministrativeArea:"+a+" _name:"+e),dataType:"json",type:"GET"}).done(function(e){if(0<(o=e.datas).length){for(var t=o[0].OSBFlag.split(","),a=o[0].JVFlag.split(","),i=0;i<t.length;i++)"JMC"==t[i]&&(isJmcDealer=!0);for(var n=0;n<a.length;n++)"JMC"==a[n]&&(isJmcDealer=!0)}}).fail(function(e){}):isJmcDealer=!1)})}function checkValidAbn(){$("input").each(function(e,t){var a=$(t);a.attr("data-validation")&&~a.attr("data-validation").indexOf("abnValue")&&a.on("focusout",function(){getABN(a,_.trim(a.val()),function(e){var t,a,i,n,e=$(e.results[0]);return 0<$(e).find("mainName").length&&(t=$(e).find("mainName").find("organisationName").text()),0<$(e).find("mainTradingName").length&&(a=$(e).find("mainTradingName").find("organisationName").text()),0<$(e).find("legalName").length&&(i=$(e).find("legalName").find("givenName").text()+" "+$(e).find("legalName").find("familyName").text()),t?n=t:a?n=a:i&&(n=i),!!n})})})}function setValueToElement(e,t){e.length&&((e.is("input:text")||e.is("input:hidden")||e.is("textarea")||e.is("number")||e.is("date")||e.is("email")||e.is("password")||e.is("range")||e.is("search")||e.is("tel")||e.is("time")||e.is("url"))&&e.val(t),(e.is("input:radio")||e.is("input:checkbox"))&&e.val()===t&&e.prop("checked",!0),e.is("select"))&&(e.find('option[value="'+t+'"]').length&&(e.find("option").prop("selected",!1),e.find('option[value="'+t+'"]').prop("selected",!0),isPublishMode)&&(e.select2("val",t),e.trigger("change")),e.hasClass("data-nested"))&&e.attr("data-preselect",t)}function setDefaultValue(form){var params={},mapKeys={},obj=getParamValue.getParamsObject(),mapping;!1!==obj&&(form.find(".configuration").length?(mapping=eval("("+form.find("> .configuration").attr("data-mappingfieldsdata")+")"),$.isEmptyObject(mapping)||""===mapping||null===mapping?$.each(obj,function(e,t){setValueToElement(form.find('[name="'+e+'"]'),t)}):($.each(mapping,function(e,t){mapKeys[e]=t}),$.each(mapKeys,function(e,t){isMobile||"id_data_source_desktop"!==e||setValueToElement(form.find('[name="ID_DATA_SOURCE"]'),t),isMobile&&"id_data_source_mobile"===e&&setValueToElement(form.find('[name="ID_DATA_SOURCE"]'),t)}),$.each(obj,function(a,i){$.each(mapKeys,function(e,t){t===a&&(params[e]=i)})}),$.each(params,function(e,t){var a='[name="'+e+'"]';"VOI_OPTIONS_BP"===e&&"pr".match(marketConfigGlobal.getCurrentMarketCode())&&(t=t.replaceAll(" ","%20")),setValueToElement(form.find(a),t)}))):$.each(obj,function(e,t){setValueToElement(form.find('[name="'+e+'"]'),t)}))}function bindInputEvent(e,t){e.config.validateOnBlur&&e.isInputValidationEnabled(t)&&(e.validateInput(t),e.validateCPF(t))}function getParamUrl(){for(var e=document.location.href,t=e.substring(e.indexOf("?")+1).split("&"),a=0,i={};a<t.length;a++)t[a]=t[a].split("="),i[t[a][0]]=decodeURIComponent(t[a][1]);return i}function updateParam(e,t){var a=new URLSearchParams(window.location.search);a.set(e,t),history.pushState(null,null,"?"+a.toString())}function countryCodeAndPhone(){var e=$('form [name="FORM_TYPE"]').val(),t=$('select[name="mobileCountryCode"]'),e=e&&e.toLowerCase();["t","q","kmi","ot","cus"].includes(e)&&0!==t.length&&($('form [name="MOBILE_PHONE_NUMBER"]').parents(".textfield").addClass("mobile-container"),t.parents(".common-box").addClass("country-code-container"),countryPlusPhoneNumber=!0,t.find("option").each(function(){$(this).attr("data-attr-key").toLowerCase()===marketConfigGlobal.getCurrentiso3MarketCode()&&t.val($(this).attr("value")).change()}),setTimeout(function(){$(".country-code-container .dropdown .title").height($(".country-code-container .mobile-container .title").height())},1e3),$('[name="mobileCountryCode"]').on("select2-close",function(){$("body").removeClass("country-code-dropdown-added")}),$('[name="mobileCountryCode"]').on("select2-open",function(){$("body").addClass("country-code-dropdown-added")}))}function autoSelectionModelAndSeries(){var e=$('form [name="FORM_TYPE"]').val(),a=$('select[name="VOI_MODEL_DESCRIPTION"]'),i=$('select[name="VOI_SERIES_DERIVATIVE_DESCRIPTION"]'),n=$($(".configuration-block")[0]).find("[data-nameplate]").data("nameplate"),o=$($(".configuration-block")[0]).find("[data-modelseries]").data("modelseries"),r=sessionStorage.getItem("nameplate"),l=sessionStorage.getItem("modelseries"),e=e&&e.toLowerCase().trim(),n=n&&n.toLowerCase().trim(),o=o&&o.toLowerCase().trim(),r=r&&r.toLowerCase().trim(),l=l&&l.toLowerCase().trim();"q"===e&&0!==a.length&&n&&a.find("option").each(function(){var e=$(this),t=e.attr("data-match");(t&&e.attr("data-match").toLowerCase().trim())===n&&setTimeout(function(){a.val(e.attr("value")).change(),0!==i.length&&o&&i.find("option").each(function(){var e=$(this),t=e.attr("data-match");(t&&e.attr("data-match").toLowerCase().trim())===o&&setTimeout(function(){i.val(e.attr("value")).change()},100)})},100)}),"t"!==e&&"r"!==e||0!==a.length&&r&&a.find("option").each(function(){var e=$(this),t=e.attr("data-match");(t&&e.attr("data-match").toLowerCase().trim())===r&&setTimeout(function(){a.val(e.attr("value")).change(),0!==i.length&&l&&i.find("option").each(function(){var e=$(this),t=e.attr("data-match");(t&&e.attr("data-match").toLowerCase().trim())===l&&setTimeout(function(){i.val(e.attr("value")).change(),i.attr("data-series","variantName")},100)})},1e3)})}function getEmailAndMobileConfirmation(t){var a,e;String(["za","af","bh","iq","jo","kw","lb","om","qa","sa","ae","ye"]).match(marketConfigGlobal.getCurrentMarketCode())?((a=$(".email-confirmation-wrap")).removeClass("hidden-msg"),a.parents(".overlay-content").find(".overlay-close").hide(),a.find(".cta-confirm-email-phone").unbind("click"),a.find(".cta-close-email-phone-overlay").unbind("click"),a.find(".cta-confirm-email-phone").removeClass("disabled"),a.find(".cta-close-email-phone-overlay").removeClass("disabled"),""!=$('.overlay-content [name="MOBILE_PHONE_NUMBER"]').val()?countryPlusPhoneNumber?(e=$('select[name="mobileCountryCode"]').find(":selected").val()+"-"+$('.overlay-content [name="MOBILE_PHONE_NUMBER"]').val(),a.find(".confirm-mobile-number").removeClass("hide").find("span").html(e)):a.find(".confirm-mobile-number").find("span").html($('.overlay-content [name="MOBILE_PHONE_NUMBER"]').val()):a.find(".confirm-mobile-number").addClass("hide"),""!=$('.overlay-content [name="PRIMARY_EMAIL"]').val()?a.find(".confirm-email-address").find("span").html($('.overlay-content [name="PRIMARY_EMAIL"]').val()):a.find(".confirm-email-address").addClass("hide"),a.find(".email-address-suggestion").addClass("hide"),a.find(".cta-confirm-email-phone").on("click",function(e){e.preventDefault(),a.find(".cta-confirm-email-phone").unbind("click"),a.find(".cta-close-email-phone-overlay").unbind("click"),a.find(".cta-confirm-email-phone").addClass("disabled"),a.find(".cta-close-email-phone-overlay").addClass("disabled"),t.ajaxSubmit()}),a.find(".cta-close-email-phone-overlay").on("click",function(e){e.preventDefault(),a.addClass("hidden-msg"),a.parents(".overlay-content").find(".overlay-close").show()}),(e=emailAddressSpellCheck($('.overlay-content [name="PRIMARY_EMAIL"]').val()))&&($(".email-confirmation-wrap .email-address-suggestion").removeClass("hide"),$(".email-confirmation-wrap .email-address-suggestion .js-custom-msg").html(e))):t.ajaxSubmit()}function emailAddressSpellCheck(e){for(var t=["gmail","hotmail","yahoo","ymail","live"],a=[],i=[],n=!1,o=!1,r=0;r<t.length;r++){if(t[r]+".com"==e.substring(e.lastIndexOf("@")+1)){n=!0;break}if(t[r]==getValueBetween(e)){n=!0,"com"!=e.substring(e.lastIndexOf("@")+1).substring(e.indexOf(".")+1)&&(o=t[r]+".com");break}}if(n)return o;for(r=0;r<t.length;r++){var l=t[r],s={};s.main=t[r]+".com",s.first=l.substring(0,Math.round(l.length/2)),s.second=l.substring(Math.floor(l.length/2)),a.push(s)}for(r=0;r<a.length;r++){var c=getValueBetween(e);null==c.match(a[r].first)&&null==c.match(a[r].second)||null==String(i).match(a[r].main)&&i.push(" "+a[r].main)}return 0!=i.length?String(i):void 0}function getValueBetween(e){return e=(e=e.substring(e.lastIndexOf("@")+1)).substring(0,e.indexOf("."))}function replaceVariable(e){$(".overlay-container .gux-variable.gux-date-variable").length&&convertKeyword.toDate(".overlay-container .gux-variable.gux-date-variable"),$(".overlay-container .gux-variable.url-data-variable").length&&convertKeyword.replaceVariableByParamValue(".overlay-container .gux-variable.url-data-variable",e)}function checkAuthorModeForOverlayLink(){var e=window.location.href,t=!1;return t=-1<e.indexOf("?wcmmode=disabled")||-1<e.indexOf("&wcmmode=disabled")?!0:t}function addWcmmode(e){var t,a;return checkAuthorModeForOverlayLink()?void 0!==e&&!1!==e?(a=t="",-1<e.indexOf("#")?(t=e.split("#")[0],a=e.split("#")[1],-1<t.indexOf("?")?t+"&wcmmode=disabled#"+a:t+"?wcmmode=disabled#"+a):-1<e.indexOf("?")?e+"&wcmmode=disabled":e+"?wcmmode=disabled"):void 0:e}function overlayAddBaseUrl(){0!=$(".email-confirmation-wrap").length&&$(".email-confirmation-wrap").parents(".overlay-content").find(".overlay-close").show();var i=window.location.href,e=$(".overlay-container").find("a.link-overlay:not(.popup-link-initialized), .link-overlay a:not(.popup-link-initialized)");-1<i.indexOf("#")&&(i=i.split("#")[0]),e.filter(function(e,t){t=$(t).data("deep-linking");return void 0===t||"1"==t}).each(function(e,t){var a=getLocation(t.href);isAuthor&&-1==a.indexOf("?wcmmode=disabled")&&-1==a.indexOf("&wcmmode=disabled")&&(-1!=a.indexOf("?")?a+="&wcmmode=disabled":a+="?wcmmode=disabled"),t.search&&(-1!=a.indexOf("?")?a+=t.search.replace("?","&"):a+=t.search),$(t).attr("href",encodeURI(i)+"#overlay"+encodeURI(a)),$(t).hasClass("base-url")||$(t).addClass("base-url").attr("href",encodeURI(i)+"#overlay"+encodeURI(a))})}function appendTemplateContent(e,t){var a;$(".form-popup-375-holder").length||(void 0!==(a=$(e).find(".splitter-column").html())?($(".overlay-container .overlay-content").append('<div class="overlay-msg-content-inner is-active">'+a+"</div>"),$(".overlay-container .overlay-content-inner").removeClass("is-active")):(-1===e.indexOf("Thank you")?$(".overlay-container").is(":visible")&&$(".form [data-error]").data("error")&&(void 0!==window.location.pathname?window.location=encodeURI(window.location.origin+window.location.pathname+"#overlay"+$(".form [data-error]").data("error")):window.location=encodeURI(window.location.origin+"/#overlay"+$(".form [data-error]").data("error"))):$(".overlay-container").is(":visible")&&$(".form [data-success]").data("success")&&(void 0!==window.location.pathname?window.location=encodeURI(window.location.origin+window.location.pathname+"#overlay"+$(".form [data-success]").data("success")):window.location=encodeURI(window.location.origin+"/#overlay"+$(".form [data-success]").data("success"))),window.location.reload()),replaceVariable(t),0<(a=$(".overlay-content .overlay-msg-content-inner.is-active").find(".box-data")).length&&(e=a.data("bgcolor"),a.closest(".common-box.section").addClass(e)),overlayAddBaseUrl())}function sendFile(r){var l=[],s=$("input[name=file]")[0].files.length,c=0;if("undefined"==typeof FormData)alert("您的浏览器版本过低，暂不支持该功能，请升级！");else if(0===s)alert("文件不能为空，请上传文件！");else if(""!==$(".fileUploadHint").html())alert("上传文件错误，请检查上传文件后再提交！");else for(var e=0;e<s;e++)(o=>{$.ajax({type:"POST",url:"https://guxcn.csmc-cloud.com/fordattc/key",success:function(e){var t,a,i,n;200==e.code?(l[o]={},l[o].key=e.data,t=o,a="https://guxcn.csmc-cloud.com/fordattc/upload?key="+encodeURIComponent(l[t].key),i=new FormData,n=$("input[name=file]")[0].files[t],i.append("attc",n),$.ajax({url:a,type:"POST",data:i,processData:!1,contentType:!1,success:function(e){200==e.code?(l[t].fileKey=e.data.key,l[t].fileName=e.data.orignalName,l[t].fileUrl=e.data.url,++c===s&&(console.log("all success"),r.ajaxSubmit(l))):(console.log("send fail"+t+JSON.stringify(e)),alert("上传失败，不支持文件类型"))},error:function(e){console.log("error"+e.code),alert("上传失败，请重试！")}})):console.log("getkey fail"+o+JSON.stringify(e))}})})(e)}FormValidate.prototype.bindUIEvents=function(){var e,t,a,i,n,o,r=this,l="",c="",d="",u="";"undefined"!=typeof _satellite&&(e=_satellite.getVar("prop8"),i=_satellite.getVar("prop17"),a=_satellite.getVar("banner id"),o=_satellite.getVar("search id"),0<$('input[name="Referred from"]').length&&(l=""!==e&&void 0!==e?_satellite.getVar("prop8"):$('input[name="Referred from"]').val(),$('input[name="Referred from"]').val(l)),0<$('input[name="Banner ID"]').length&&(c=""!==a&&void 0!==a?_satellite.getVar("banner id"):""!==i&&void 0!==i?_satellite.getVar("prop17"):$('input[name="Banner ID"]').val(),$('input[name="Banner ID"]').val(c)),0<$('input[name="Search ID"]').length&&(d=""!==o&&void 0!==o?_satellite.getVar("search id"):$('input[name="Search ID"]').val(),$('input[name="Search ID"]').val(d)),0<$('input[name="MCID"]').length&&null!==_satellite.getVisitorId()&&(u=""!==(u=_satellite.getVisitorId().getMarketingCloudVisitorID())&&void 0!==u?_satellite.getVisitorId().getMarketingCloudVisitorID():$('input[name="MCID"]').val(),$('input[name="MCID"]').val(u)),0<$('input[name="FAV_REF_CODE"]').length)&&/FAV_REF_CODE/g.test(window.location.search)&&(name="FAV_REF_CODE".replace(/[\[\]]/g,"\\$&"),e=window.location.href,l="",(e=new RegExp("[?&]"+name+"(=([^&#]*)|&|#|$)").exec(e))||(l=""),e[2]||(l=""),l=decodeURIComponent(e[2].replace(/\+/g," ")),$('input[name="FAV_REF_CODE"]').val(l)),this.$formElementValidation.each(function(){var t;$(this).is("select")||$(this).is("checkbox")?$(this).on("change",function(){bindInputEvent(r,$(this))}):$(this).is("input.radio-button-hidden")?(t=$(this),$(this).parent().find('li input[type="radio"]').on("click",function(){var e=$(this).val();t.val(e),bindInputEvent(r,t)})):($(this).on("blur",function(){bindInputEvent(r,$(this))}),$(this).on("keyup",function(){$(this).hasClass("valid")&&($(this).removeClass("valid"),$(this).parent().removeClass("valid"))}))}),this.$formElementValidation.on({keyup:function(e){var t,e=$(e.target);"CPF"==e.prop("name")?(t=e.val().replace(/(\d{3})\.?(\d{3})\.?(\d{3})\-?(\d{2})/,"$1.$2.$3-$4"),e.val(t)):"CNPJ"==e.prop("name")&&(t=e.val().replace(/(\d{2})\.?(\d{3})\.?(\d{3})\/?(\d{4})\-?(\d{2})/,"$1.$2.$3/$4-$5"),e.val(t))}.bind(this)}),$(".textfield-email input").focus(function(){var e=$(this);"null@null.com"===e.val()&&(e.val(""),e.closest(".textfield-email").removeClass("null-email"))}),$('.overlay-content-inner .form [value="F_COL_UL"]').length&&(specificValidations.validatePresentAndFutureDate($('[name="ShiftDay__c"]')),specificValidations.validateFutureDate($('[name="PurchaseDate__c"]')),specificValidations.validatePastDate($('[name="ExpeditionDate__c"]')),specificValidations.validatePastDate($('[name="Birthdate__c"]')),specificValidations.validatePastDate($('[name="PartnerBirthdate__c"]')),specificValidations.validateMaxInput($('select[name="PartnerDocumentType__c"]'))),"F_CHL_UL"===$('input[name="FORM_TYPE"]').val()&&(t=window.location.href,$('input[name="UTMUrl__c"]')&&""==$('input[name="UTMUrl__c"]').val()&&""!=t&&$('input[name="UTMUrl__c"]').val(t),$('input[name="MobilePhoneAreaCode__c"]').blur(function(){"569"===$('input[name="MobilePhoneAreaCode__c"]').val()?$('input[name="MobilePhone"]').attr("maxlength","8"):$('input[name="MobilePhone"]').attr("maxlength","9")}),specificValidations.validatePresentAndFutureDate($('[name="ShiftDay__c"]')),specificValidations.validatePresentAndFutureDate($('[name="PurchaseDate__c"]')),specificValidations.validatePastDate($('[name="Birthdate__c"]')),specificValidations.validateMaxInputCL($('select[name="PartnerDocumentType__c"]'),'[name="PartnerDocumentIdNumber__c"]'),specificValidations.validateMaxInputCL($('select[name="Partner2DocumentType__c"]'),'[name="Partner2DocumentIdNumber__c"]')),"F_PER_UL"===$('input[name="FORM_TYPE"]').val()&&(t=window.location.href,$('input[name="UTMUrl__c"]')&&""==$('input[name="UTMUrl__c"]').val()&&$('input[name="UTMUrl__c"]').val(t),specificValidations.validatePastDate2($('[name="Birthdate__c"]')),specificValidations.validatePresentAndFutureDate2($('[name="ShiftDay__c"]')),specificValidations.validatePresentAndFutureDate2($('[name="PurchaseDate__c"]'))),"F_COL_UL"===$('input[name="FORM_TYPE"]').val()&&(t=window.location.href,$('input[name="UTMUrl__c"]'))&&""==$('input[name="UTMUrl__c"]').val()&&""!=t&&$('input[name="UTMUrl__c"]').val(t),"F_BRA_UL"===$('input[name="FORM_TYPE"]').val()&&(t=window.location.href,$('input[name="UTM__c"]'))&&""==$('input[name="UTM__c"]').val()&&""!=t&&$('input[name="UTM__c"]').val(t),"F_ARG_UL"===$('input[name="FORM_TYPE"]').val()&&(t=window.location.href,$('input[name="utm_params"]'))&&""==$('input[name="utm_params"]').val()&&""!=t&&$('input[name="utm_params"]').val(t);String(["pr","bz","cr","sv","gt","hn","ni","pa","dom","ag","aw","bs","bb","bmu","ky","cw","dma","gd","hti","jm","lca","mf","tto","sr"]).match(marketConfigGlobal.getCurrentMarketCode())&&(a=["104","103"],i=$(".overlay-container").is(":visible"),c=$('[name="CONTACT_TYPE_CODE"]').val(),a.includes(c)&&("undefined"!=typeof s?(n=getParamUrl(),""!=s.eVar9?i?$("form").append("<input type='hidden' name='USER_CAMPAIGN_ID' value='"+s.eVar9+"'>"):$('[name="USER_CAMPAIGN_ID"]').val(s.eVar9):void 0!==n&&(i?$("form").append("<input type='hidden' name='USER_CAMPAIGN_ID' value='"+n.bannerid+"'>"):$('[name="USER_CAMPAIGN_ID"]').val(n.bannerid))):(n=getParamUrl(),i?$("form").append("<input type='hidden' name='USER_CAMPAIGN_ID' value='"+n.bannerid+"'>"):$('[name="USER_CAMPAIGN_ID"]').val(n.bannerid))),o=$('[name="FORM_TYPE"]').val(),String(["Q","T"]).match(o))&&"undefined"!=typeof s&&($('[name="Adobe_ID"]').val(s.eVar74),i?$("form").append("<input type='hidden' name='Adobe_ID' value='"+s.eVar74+"'>"):$('[name="Adobe_ID"]').val(s.eVar74)),this.$form.submit(function(e){if(this.isFormValidationEnabled()){if(e.preventDefault(),this.cancelSubmit=!1,this.$formElementValidation.each(function(e,t){t=$(t);this.isInputValidationEnabled(t)&&(this.validateInput(t),this.validateCPF(t))}.bind(this)),0<this.$form.find(".configuration").length&&this.$form.find(".configuration").data().handlecn&&0<(e=$(".textfield-email")).length&&""===e.find("input").val()&&(t="null@null.com",e.find("input").val(t),e.addClass("null-email")),0!==$('[name="VOI_MAKE_CODE"]').length&&0!==$('[name="VOI_SERIES_DERIVATIVE_CODE"]').length){if(0===Number($('[name="VOI_MAKE_CODE"]').val())+Number($('[name="VOI_SERIES_DERIVATIVE_CODE"]').val()))return void $(".error-msg-sa").show();$(".error-msg-sa").hide()}if(0!==$(".form-mini-dealer-locator").length&&!1===$(".form-mini-dealer-locator .search-block .input-field").hasClass("error")&&0==$(".seldeltitle").length)$(".form-mini-dealer-locator .search-button").trigger("click"),"za"===marketConfigGlobal.getCurrentMarketCode()||"au"===marketConfigGlobal.getCurrentMarketCode()?$(".error-msg-sa").show():$(".form-mini-dealer-locator .search-block .input-field").addClass("error"),$("#selected-dealer-info p").show();else{if("za"===marketConfigGlobal.getCurrentMarketCode()||"au"===marketConfigGlobal.getCurrentMarketCode()){var t=document.querySelector(".error-msg-sa");if(t&&(t.style.display="none"),$("#selected-dealer-info p").hide(),0!==$(".overlay-container .form-group-input .error").length?t&&(t.style.display="block"):t&&(t.style.display="none"),0!==$(".form-mini-dealer-locator").length&&!1===$(".form-mini-dealer-locator .search-block .input-field").hasClass("error")&&0==$(".seldeltitle").length)return $("#selected-dealer-info p").show(),void(t&&(t.style.display="block"))}!this.cancelSubmit&&this.specialHandlingSubmit&&(void 0!==$("input[name=recaptcha]").val()?(this.$form.find(".field-disabled").detach(),$(".fileUpload").length?sendFile(this):0===$(".email-confirmation-wrap").length?this.ajaxSubmit():getEmailAndMobileConfirmation(this)):1===$(".form-recaptchav2").length?window.verifiedHuman?this.ajaxSubmit():window.grecaptcha.execute():(this.$form.find(".field-disabled").detach(),this.$form.find(".login-form")||($(".fileUpload").length?sendFile(this):this.ajaxSubmit())))}}}.bind(this)),this.specialHandling(this.$form),setDefaultValue(this.$form)};var allowSubmit=!0;function removeEmojiChars(e){var t=e.val();void 0!==t&&""!=t&&null!==t&&(t=t.replace(new RegExp(["\ud83c[\udf00-\udfff]","\ud83d[\udc00-\ude4f]","\ud83d[\ude80-\udeff]"].join("|"),"g"),""),e.val(t))}function utf8_to_base64(e){return window.btoa(unescape(e))}function getValuesFormToRedirect(){var e=$("input[name='urlEndPointBank']").val().trim(),t=encodeURIComponent($("select[name='vehicle'] :selected").val().trim()),a=encodeURIComponent($("select[name='model'] :selected").val().trim()),i=encodeURIComponent($("select[name='year'] :selected").text().trim()),n=encodeURIComponent($("select[name='state'] :selected").val().trim()),o=encodeURIComponent($("select[name='dealerName'] :selected").text().trim()),r=encodeURIComponent($("input#price[name='price']").val().trim()),l=$("input[name='currencyBank']").val().trim(),t={marca:$("input[name='marca']").val().trim(),logourl:$("input[name='logo']").val().trim(),returnurl:$("input[name='returnurl']").val().trim(),vehiculo:t,modelo:a,anio:i,municipio:n,dealername:o,precio:r+encodeURIComponent(" ")+l};return{urlToRedirect:e,paramsBase64:utf8_to_base64(JSON.stringify(t))}}function FormToRedirectToExagono(){var e=$("select[name='NAMEPLATE']").length?$("select[name='NAMEPLATE'] :selected").text():$("input[name='NAMEPLATE']").val(),t=$("select[name='VEHICLE_OF_INTEREST']").length?$("select[name='VEHICLE_OF_INTEREST'] :selected").text():$("input[name='VEHICLE_OF_INTEREST']").val(),a=$("select[name='MODEL_COLOR']").length?$("select[name='MODEL_COLOR'] :selected").text():$("input[name='MODEL_COLOR']").val(),i=$("select[name='INTERIOR_COLOR']").length?$("select[name='INTERIOR_COLOR'] :selected").text():$("input[name='INTERIOR_COLOR']").val(),n=$("input[name='urlEndpoint']").val().trim(),o=encodeURIComponent($("input[name='Name']").val().trim()),r=encodeURIComponent($("input[name='Last_Name']").val().trim()),l=encodeURIComponent($("input[name='Second_Last_Name']").val().trim()),s=$("input[name='DEALER_CODE']").val().trim(),e=encodeURIComponent(e.trim()),t=encodeURIComponent(t.trim()),c=encodeURIComponent($("input[name='Email']").val().trim()),a=encodeURIComponent(a.trim()),i=encodeURIComponent(i.trim());return{urlToRedirect:n,paramsBase64:utf8_to_base64(JSON.stringify({customername:o,customerlastname:r,customersecondlastname:l,dealerid:s,vehicle:e,version:t,email:c,color:a,interiorcolor:i}))}}function exagonoRedirect(e,t){let a=FormToRedirectToExagono();var i=$("input[name=formSubmitDomainUrl]").val();let n;-1!=e.indexOf("?")&&(e=e.slice(1)+"&"),$.ajax({url:i+"/fordleads/leads/jwt/createSignedToken",type:"GET",async:!1,dataType:"json",data:{payload:a.paramsBase64,provider:"EXAGONO"},success:function(e){analyticsEventLayer.getCtaEvents().trackVehicleRevealCTA($('select[name="NAMEPLATE"]').val()),n=a.urlToRedirect+"?d="+encodeURIComponent(e.message)},error:function(e,t,a){console.error("Error while trying to create Exagono request: ",t)}}),n&&((i=document.createElement("a")).attributes.id="exagonoButton",i.href=n,i.target="_blank",document.body.appendChild(i),i.click(),0!==e.indexOf("/")&&(e="/"+e),window.location=e+"?urlEndpoint="+n)}function getParameterByName(e,t){t=t||window.location.href,e=e.replace(/[\[\]]/g,"\\$&");e=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return e?e[2]?decodeURIComponent(e[2].replace(/\+/g," ")):"":null}function checkForParam(){return"1234"===getParameterByName("captchaMark")&&"8U8ZdxsyiATvLaJ6eHIq4Q=="===getParameterByName("captchaMarkEncrypt")&&"true"===getParameterByName("notToDB")}function getTimeValue(e){return"h"===e?addZero((new Date).getHours()):"m"===e?addZero((new Date).getMinutes()):"s"===e?addZero((new Date).getSeconds()):""}function addZero(e){return e=e<10?"0"+e:e}function waitForIt(i,t,n,o){window.callSpecialHandlingChinaNow?($('select[name="'+i.handledealername+'"] >option').each(function(){var a=$(this),e=this.value,e=t.province+"_"+t.city+"_"+e,e=n[e];e&&$.each(e,function(e,t){t=t[i.handlehiddendealername];t&&(t.match(o)?a.prop("disabled",!1):a.prop("disabled",!0))})}),$('select[name="'+i.handledealername+'"]').select2("val","")):setTimeout(function(){waitForIt(i,t,n,o)},100)}function emailDomainValidation(e,t){for(var a=t,i=!1,n=0;n<a.length;n++){var o=e.substring(e.lastIndexOf("@")+1);if(a[n]==o||a[n].toLowerCase()==o){i=!0;break}}return i}function getTimeStamp(){var e=getLanguageRoot()+"/.serverdateconfig.data?p="+marketConfigGlobal.getTimeStampConfigPath();$.ajax({url:e,method:"GET",dataType:"json"}).success(function(e){sessionStorage.setItem("timeStamp",JSON.stringify(e))}).error(function(e){console.log("Error while fetching time stamp data",e)})}return FormValidate.prototype.ajaxSubmit=function(e){if(allowSubmit){if(allowSubmit=!1,setTimeout(function(){allowSubmit=!0},1e3),"za"!==marketConfigGlobal.getCurrentMarketCode()&&"au"!==marketConfigGlobal.getCurrentMarketCode()||0===$(".form-mini-dealer-locator").length)$("#selected-dealer-info").hide();else if(0==$(".seldeltitle").length)return $("#selected-dealer-info p").html($(".form-mini-dealer-locator input").data("validation").rules[0].message),void $("#selected-dealer-info p").show();if(!this.$form.closest(".register-wrap").length&&"partner-login-form"!=this.$form.closest(".form").attr("id")){$("input[name=lightHouseId]").length&&(t=$.cookie("lighthouseId")?$.cookie("lighthouseId"):"",$("input[name=lightHouseId]").val(t));this.submitButton(!0),$(".form-recaptcha label").find(".error").remove(),this.assignCheckboxValue();var t=$("input[name=marketName]").val(),l=$("input[name=formSubmitDomainUrl]").val(),a=$("input[name=DYNATRACE_FLAG]").val(),a=("true"==$("input[name=usePublicDomain]").val()&&("true"!=a||-1<window.location.href.indexOf("ford.com.au"))&&(l=""),$("input[name=FORM_TYPE]").val()),i=(0<a.length&&"DSTQ"===a&&(o=getParamValue.getParamsObject(),$(".overlay-content-inner form"),i=[],""!=o.ae&&i.push(o.ae),""!=o.ai&&i.push(o.ai),""!=o.ao&&i.push(o.ao),""!=o.au&&i.push(o.au),""!=o.as&&i.push(o.as),""!=o.am&&i.push(o.am),$("input[name=DST_ACCESSORIES]").val(i),$("input[name=ACTIVITY_TYPE]").val("B&P"),o="",0<(i=window.location.href.split("#overlay")).length&&0<(i=i[0].split("?")).length&&(o=i[1]),$("input[name=BUILD_AND_PRICE_PARAMS]").val(o)),$("input[name=timezone]").val()),s="true"==$("input[name=MIAO_ZHEN_TRACKING]").val(),c={},n=this.$form.serializeArray().filter(function(e){return""!=$.trim(e.value)}),o=$("input[name=captchaKey]").val(),r=$("input[name=recaptcha]").val(),d=$("input[name=smsRecaptcha]").val(),u=$("input[name=mobile]").val(),p={},m="?"+decodeURIComponent($.param(n)),h="",f="",g="",v=document.querySelector('[name="FORM_TYPE"]'),y=marketConfigGlobal.getCurrentMarketCode(),b=v&&"KMI"==v.value&&"br"===y;if($("input[type=checkbox]").each(function(){var e,t;$(this).prop("checked")||$(this).data("set-senduncheckedvalue")&&(e=$(this).attr("id"),t=$(this).data("set-uncheckedvalue"),c[e]=t&&String(t))}),countryPlusPhoneNumber)for(var w=0;w<n.length;w++)"MOBILE_PHONE_NUMBER"===n[w].name&&(n[w].value=$('select[name="mobileCountryCode"]').find(":selected").val()+n[w].value);"enq"===a.toLowerCase()&&(v={},$(".special-offer-container").attr("timeStamp")||sessionStorage.getItem("timeStamp")?(T=$(".special-offer-container").attr("timeStamp")?JSON.parse($(".special-offer-container").attr("timeStamp")):JSON.parse(sessionStorage.getItem("timeStamp")),v.name="timeStamp",void 0!==T.serverDateTime?v.value=T.serverDateTime.date+" "+T.serverDateTime.time:v.value=""):T=JSON.parse($(".special-offer-container").attr("timeStamp")),n.push(v)),n=mediaTracking.mergeSerialize(n),$.each(n,function(){var e;void 0!==c[this.name]?(c[this.name].push||(c[this.name]=[c[this.name]]),c[this.name].push(this.value||"")):this.name&&"CPF"==this.name||this.name&&"CNPJ"==this.name?c[this.name]=this.value.replace(/\.?\-?\/?/g,""):this.name&&"brFirstNameField"==this.name?b?(f=this.value,c.brFirstNameField=this.value):(f=this.value,c[this.name]=this.value||""):this.name&&"brLastNameField"==this.name?b?(g=this.value,c.brLastNameField=this.value):(g=this.value,c[this.name]=this.value||""):this.name&&"brTelephoneField"==this.name&&b?(e=this.value.indexOf(")")+1,c.NB_AREA_CODE=this.value.substring(0,e).replace(/\(+|\)+/gm,""),c.NB_TELEPHONE=this.value.substring(e).replace(/^\s+|\-+|\s+$/gm,"")):this.name&&"CD_TMA_OF_INTEREST"==this.name?this.value&&3<this.value.length?c.CD_TMA_OF_INTEREST=this.value.substring(0,3):c.CD_TMA_OF_INTEREST=this.value:this.value&&(c[this.name]=this.value||""),$("input[name=FORM_TYPE]").val(),/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&(c.CotEsMovil=1)}),(getParameterByName("scap")||checkForParam())&&(delete c.captchaKey,delete c.recaptcha,c.captchaMark=1234,c.captchaMarkEncrypt="8U8ZdxsyiATvLaJ6eHIq4Q==",c.notToDB=!0);var C,k,S,x,D,P,y=new Date,v=($("#timezone_offset").length&&$("#timezone_offset").data("timezone-offset")&&(T=60*(new Date).getTimezoneOffset()*1e3,v=(new Date).getTime(),N=new Number($("#timezone_offset").data("timezone-offset")),y=new Date(v+T+N)),String(y.getFullYear()).substr(2,2)),T=String(y.getMonth()+1),N=String(y.getDate()),A=(T=1===T.length?"0"+T:T,N=1===N.length?"0"+N:N,c.submitDate=y.getFullYear()+"-"+T+"-"+N,$("input[name=UNIQUE_ID]").val());if(A&&A.trim()?(I=12-A.length,C=String(Math.floor(Math.random()*Math.pow(10,I))),c.memo5=A=v+T+N+"-"+A+"-"+C):delete c.memo5,s?null!=(A=null!=(A=a)?A.trim():A)&&0<A.length&&(y=new Date,v=String(y.getFullYear()).substr(2,2),T=String(y.getMonth()+1),N=String(y.getDate()),I=12-A.length,C=String(Math.floor(Math.random()*Math.pow(10,I))),T=1===T.length?"0"+T:T,N=1===N.length?"0"+N:N,c.memo5=A=v+T+N+"-"+A+"-"+C):delete c.memo5,(h=f&&g?f+" "+g:f||g)&&(c.NM_PERSON=h),e){c.file=[];for(w=0;w<e.length;w++)c.file[w]={fileUrl:e[w].fileUrl,fileKey:e[w].key}}if(urlGetDealers&&(c.isJmcDealer=isJmcDealer),"B"===$('[name="FORM_TYPE"]').val()&&chkNewFormArray_2()&&(delete c.CUSTOMER_ADDRESS_DIVISION_1,delete c.CUSTOMER_ADDRESS_DIVISION_2,delete c.CUSTOMER_ADDRESS_LINE_1,delete c.CUSTOMER_ADDRESS_LINE_2,delete c.CUSTOMER_POSTAL_CODE),"ar"===marketConfigGlobal.getCurrentMarketCode()&&($("#vehicleNameplateKey").data("nameplatekey")&&0<$("#vehicleNameplateKey").data("nameplatekey").length&&(c.modelo_desc=$("#vehicleNameplateKey").data("nameplatekey")),$("#vehicleNameplatePage").data("pagename"))&&0<$("#vehicleNameplatePage").data("pagename").length&&(c.modelo_id=$("#vehicleNameplatePage").data("pagename")),"co"===marketConfigGlobal.getCurrentMarketCode()&&($("#vehicleNameplateKey").data("nameplatekey")&&0<$("#vehicleNameplateKey").data("nameplatekey").length&&($("#VehicleModelLatam__c span")?$("#VehicleModelLatam__c span").each(function(){$("#vehicleNameplateKey").data("nameplatekey")==$(this).data("key")&&(c.VehicleModelLatam__c=$(this).data("value"))}):c.VehicleModelLatam__c=$("#vehicleNameplateKey").data("nameplatekey")),$("#vehicleNameplatePage").data("pagename"))&&0<$("#vehicleNameplatePage").data("pagename").length&&(c.TMA__c=$("#vehicleNameplatePage").data("pagename")),"pe"===marketConfigGlobal.getCurrentMarketCode()&&$("#vehicleNameplateKey").data("nameplatekey")&&0<$("#vehicleNameplateKey").data("nameplatekey").length&&($("#VehicleModelLatam__c span")?$("#VehicleModelLatam__c span").each(function(){$("#vehicleNameplateKey").data("nameplatekey")==$(this).data("key")&&(c.VehicleModelLatam__c=$(this).data("value"))}):c.VehicleModelLatam__c=$("#vehicleNameplateKey").data("nameplatekey")),$("input[name=recaptcha]").length?getParameterByName("scap")||checkForParam()?(console.log("here"),p={type:a,timezone:i,information:JSON.stringify(c),marketName:t,captchaMark:1234,captchaMarkEncrypt:"8U8ZdxsyiATvLaJ6eHIq4Q==",notToDB:!0}):(0<$("textarea[name=COMMENTS]").length&&0<$("textarea[name=COMMENTS]").val().length&&(c.COMMENTS=$("textarea[name=COMMENTS]").val().replaceAll("\\r","").replaceAll("\\n","").replaceAll("\\","").replaceAll(/[\r\n]/g,"")),p={type:a,timezone:i,information:JSON.stringify(c),marketName:t,recaptcha:r,captchaKey:o},$(".SMSVerification").length&&"none"!=$(".SMSVerification").css("display")&&(p.phoneNumber=u,p.smsCode=d)):p={type:a,timezone:i,information:JSON.stringify(c),marketName:t},this.$form.attr("data-customform")&&null!==this.$form.data("customform")&&""!==this.$form.data("customform"))return k=this.$form.data("customform"),S=addWcmmode(this.$form.data("error")),x=addWcmmode(this.$form.data("success")),(-1<k.indexOf("reporting.xperience-us")||-1<k.indexOf("www.changanfordclub.com"))&&(S=x),delete(y=c)._charset_,delete c.CAMPAIGN_ID,delete c.marketName,delete c.FORM_TYPE,delete c.LEADS_TYPE,delete c.ACTIVITY_TYPE,delete c.CONTACT_TYPE_CODE,delete c.COUNTRY,delete c.LANGUAGE,delete c.CHANNEL,delete c.timezone,delete c.formSubmitDomainUrl,delete c.recaptcha,delete c.captchaKey,delete c.domainurl,delete c[":cq_csrf_token"],$("input[name=recaptcha]").length?void $.ajax({type:"POST",url:l+"/fordleads/leads/PreDelivery/verifyCaptcha",data:p,dataType:"json",xhrFields:{withCredentials:!0},params:y,errorPage:addWcmmode(this.$form.data("error")),successPage:addWcmmode(this.$form.data("success")),submitButton:this.$form.find(".form-submit button"),success:function(e,t){if(500===e.returnCode)return this.submitButton.attr("disabled",!1),$(".form-recaptcha label").append('<small class="error">'+$(".errRecaptcha").html()+"</small>"),$("#imgRecaptcha").click(),!1;200===e.returnCode&&$.ajax({url:k,type:"POST",dataType:"json",data:c,errorPage:S,successPage:x,success:function(e,t){e.isBrazilPartRecall&&(e.vincode?window.location=this.successPage:window.location=this.errorPage)},error:function(e,t,a){window.location=this.errorPage}})},error:function(e,t){return!1}}):void $.ajax({url:k,type:"POST",crossDomain:!0,headers:{"Access-Control-Allow-Origin":"*","cache-control":"no-cache"},data:c,errorPage:S,successPage:x,success:function(e,t){var a=$(".overlay-container").is(":visible");e.isBrazilPartRecall&&(a?$.ajax({type:"GET",url:e.vincode?this.successPage:this.errorPage,dataType:"html",success:function(e){appendTemplateContent(e,m)},error:function(e){}}):window.location=e.vincode?this.successPage:this.errorPage)},error:function(e,t,a){$(".overlay-container").is(":visible")?$.ajax({type:"GET",url:this.errorPage,dataType:"html",success:function(e){appendTemplateContent(e,m)},error:function(e){}}):window.location=this.errorPage}});if($(".form-popup-375").length)return!0;if(0<$("[data-recall-update-profile]").length)return!0;p.emailKey=getEmailKeyUrl(a),$("input[name=read]").length&&(p.read=$("input[name=read]").val()),"KMI"===$('[name="FORM_TYPE"]').val()&&(D=getEmailKeyUrl(a="KMI-"+c.CAMPAIGN_ID),$.ajax({url:D,type:"get",async:!1,success:function(e){p.emailKey=D}})),localStorage.getItem("userCacheId")&&(p.userCacheId=localStorage.getItem("userCacheId")),0<$('input[name="CAMPAIGN_ID"]').val().length&&(p.campaignId=$('input[name="CAMPAIGN_ID"]').val()),0<$('input[name="fordCrcEmail"]').length&&0<$('input[name="fordCrcEmail"]').val().length&&(p.fordCrcEmail=$('input[name="fordCrcEmail"]').val()),0<$('input[name="VOI_ENGINE/TRANSMISSION_DESCRIPTION_BP"]').length&&0<$('input[name="VOI_ENGINE/TRANSMISSION_DESCRIPTION_BP"]').val().length&&(p["VOI_ENGINE/TRANSMISSION_DESCRIPTION_BP"]=$('input[name="VOI_ENGINE/TRANSMISSION_DESCRIPTION_BP"]').val()),0<$('input[name="VOI_EXTERIOR_COLOUR_DESCRIPTION_BP"]').length&&0<$('input[name="VOI_EXTERIOR_COLOUR_DESCRIPTION_BP"]').val().length&&(p.VOI_EXTERIOR_COLOUR_DESCRIPTION_BP=$('input[name="VOI_EXTERIOR_COLOUR_DESCRIPTION_BP"]').val()),0<$('input[name="VOI_ACCESSORIES_BP"]').length&&0<$('input[name="VOI_ACCESSORIES_BP"]').val().length&&(p.VOI_ACCESSORIES_BP=$('input[name="VOI_ACCESSORIES_BP"]').val()),0<$('input[name="VOI_OPTIONS_BP"]').length&&0<$('input[name="VOI_OPTIONS_BP"]').val().length&&(p.VOI_OPTIONS_BP=$('input[name="VOI_OPTIONS_BP"]').val()),0<$('select[name="nameplateName"] :selected').length&&(0<$('select[name="nameplateName"] :selected').val().length&&(P=$('select[name="nameplateName"] :selected').val()),cookieUtil.setCookie("formNameplateName",P,1,"/"));var I;String(["pr","bz","cr","sv","gt","hn","ni","pa","dom","ag","aw","bs","bb","bmu","ky","cw","dma","gd","hti","jm","lca","mf","tto","sr"]).match(marketConfigGlobal.getCurrentMarketCode())&&(I=$('[name="FORM_TYPE"]').val(),String(["Q","T"]).match(I))&&(void 0!==$('input[name="USER_CAMPAIGN_ID"]').val()&&0<$('input[name="USER_CAMPAIGN_ID"]').val().length&&(p.USER_CAMPAIGN_ID=$('input[name="USER_CAMPAIGN_ID"]').val()),void 0!==$('input[name="Adobe_ID"]').val())&&0<$('input[name="Adobe_ID"]').val().length&&(p.Adobe_ID=$('input[name="Adobe_ID"]').val());$(".overlay-container").is(":visible");$.ajax({url:l+"/fordleads/leads/leadInfo/saveLeadInfo",type:"POST",data:p,dataType:"json",xhrFields:{withCredentials:!0},params:c,errorPage:addWcmmode(this.$form.data("error")),successPage:addWcmmode(this.$form.data("success")),submitButton:this.$form.find(".form-submit button"),success:function(t,e){var a,i;if("001"===t.status)return $(".form-recaptcha label .reCapErr").remove(),$(".form-recaptcha label").append('<small class="error reCapErr">'+$(".errRecaptcha").html()+"</small>"),$("#imgRecaptcha").click(),"OB"===$('[name="FORM_TYPE"]').val()&&$(".multi-step-form .form-splitter.form_splitter_payment .back.section").trigger("click"),$(".overlay-container .email-confirmation-wrap").length&&String(["za","af","bh","iq","jo","kw","lb","om","qa","sa","ae","ye"]).match(marketConfigGlobal.getCurrentMarketCode())&&($(".email-confirmation-wrap").hasClass("hidden-msg")||$(".email-confirmation-wrap").addClass("hidden-msg")),this.submitButton.attr("disabled",!1),!1;if("002"===t.status){if("true"==$("input[name='isActivateEncodeBank']").val()&&(a=getValuesFormToRedirect(),$.ajax({url:l+"/fordleads/leads/jwt/createSignedToken",type:"GET",dataType:"json",data:{payload:a.paramsBase64,provider:"BANCOPOPULAR"}}).done(function(e){e=a.urlToRedirect+"?d="+e.message;window.open(e,"_blank")}).fail(function(e,t,a){console.log("Uncaught Error: "+e)})),document.querySelector('[name="FORM_TYPE"]')&&"T"===document.querySelector('[name="FORM_TYPE"]').value&&"mx"===marketConfigGlobal.getCurrentMarketCode()&&(document.cookie="emailid=;path=/",document.cookie="bannerid=path=/",document.cookie="searchid=path=/"),"B"===$('[name="FORM_TYPE"]').val()&&chkNewFormArray_2()&&downloadSpecified(),void 0!==$('[name="redesignForms"]').val()&&"redesignForms"===$('[name="redesignForms"]').val()){var n=window.location.href,n=encodeURIComponent(n.includes("?")?n+"&isSubmit=true":n+"?isSubmit=true"),o=$('[name="VOI_MODEL_DESCRIPTION"]').val()||$('[name="nameplateName"]').val();try{FPS.set([FPS.lib.ActionNameplate("","Ford",o,FPS.actions.ScheduleTestDrive,n)],{success:function(){populateThankYouPage(t),cookieUtil.eraseCookie("tdformdata")},error:function(e){populateThankYouPage(t),console.warn(e)}})}catch(e){console.warn(e)}return!0}"ENQ"==$('[name="FORM_TYPE"]').val()&&"za"===marketConfigGlobal.getCurrentMarketCode()&&analyticsEventLayer.getSpecialOfferEvents().trackGlobalOverlay("thankYou"),"FN_DAC"==$('[name="FORM_TYPE"]').val()&&"cn"===marketConfigGlobal.getCurrentMarketCode()&&(n=(o=JSON.parse(cookieUtil.getCookie("OWNER_USERINFO")))?o.userName:"",r=o?o.email:"",o=o?o.nickName:"",i={},""!==r?i={email:r}:""!==o?i={nickName:o}:""!==n&&(i={user_name:n}),$.ajax({type:"POST",url:l+"/ford-lighthouse/vehicle/lh/user/archive",contentType:"application/json",dataType:"json",data:JSON.stringify(i),success:function(e){console.log("archive success!")},error:function(e){console.log("archive fail!")}}));var r,o=(r=$(".overlay-container")).is(":visible");s&&"undefined"!=typeof stm_clicki&&c.memo5?(stm_clicki("send","event",{customActionId:1,customActionLabel1:c.memo5,customActionValue1:1}),_smq.push(["custom","预约试驾","提交",c.memo5]),analyticsEventLayer.getFormWizardEvents().formComplete(!1,c.memo5)):analyticsEventLayer.getFormWizardEvents().formComplete(),o?$.ajax({type:"GET",url:this.successPage,dataType:"html",success:function(e){appendTemplateContent(e,m),$(".close-overlay").on("click",function(e){$(".overlay-close").trigger("click")}),document.querySelector(".email-confirmation-wrap")&&document.querySelector(".email-confirmation-wrap").remove()},error:function(e){}}):"F_EPB"==$('[name="FORM_TYPE"]').val()?exagonoRedirect(this.successPage,m):(this.successPage.indexOf("?"),window.location=this.successPage),"B"===$('[name="FORM_TYPE"]').val()&&"BRL"==$('[name="Broucher_Lead_Form_Type"]').val()&&downloadBrochure(),"B"===$('[name="FORM_TYPE"]').val()&&$(".fdsFormDownload").length&&downloadBrochureNew()}else if("003"===t.status){if(void 0!==$('[name="redesignForms"]').val())if("T"===$('[name="FORM_TYPE"]').val()&&"redesignForms"===$('[name="redesignForms"]').val())return n=encodeURIComponent(t.message),i=$(".multi-step-form"),$(".test-drive-error .columns",i).html(n).show(),void this.submitButton.attr("disabled",!1);(o=(r=$(".overlay-container")).is(":visible"))?$.ajax({type:"GET",url:this.errorPage,dataType:"html",success:function(e){appendTemplateContent(e,m)},error:function(e){}}):window.location=this.errorPage}else{if("004"===t.status)return $(".textfield-mobile label").append('<small class="error">'+$("#phoneNumberNotFound").val()+"</small>"),this.submitButton.attr("disabled",!1),!1;if("005"===t.status)return $(".smsInput label").append('<small class="error">'+$("#smsErrRecaptcha").val()+"</small>"),this.submitButton.attr("disabled",!1),!1;if("006"===t.status)return $(".smsInput label").append('<small class="error">'+$("#smsCodeExpired").val()+"</small>"),this.submitButton.attr("disabled",!1),!1;{if("007"===t.status)return $(".payment-error-message").show(),$(".js-submit-payment").removeAttr("disabled"),this.submitButton.attr("disabled",!1),!1;(o=r.is(":visible"))?$.ajax({type:"GET",url:this.errorPage,dataType:"html",success:function(e){appendTemplateContent(e,m)},error:function(e){}}):window.location=this.errorPage}}},error:function(e,t,a){var i;if(("B"===$('[name="FORM_TYPE"]').val()&&"BRL"==$('[name="Broucher_Lead_Form_Type"]').val()&&downloadBrochure(),"B"===$('[name="FORM_TYPE"]').val()&&$(".fdsFormDownload").length&&downloadBrochureNew(),void 0!==$('[name="redesignForms"]').val())&&("T"===$('[name="FORM_TYPE"]').val()&&"redesignForms"===$('[name="redesignForms"]').val()))return i=$(".multi-step-form"),$(".test-drive-error .columns",i).html(t).show(),void this.submitButton.attr("disabled",!1);$(".overlay-container").is(":visible")?$.ajax({type:"GET",url:this.errorPage,dataType:"html",success:function(e){appendTemplateContent(e,m)},error:function(e){}}):window.location=this.errorPage}})}}},FormValidate.prototype.assignCheckboxValue=function(){_.forEach(this.$form[0],function(e,t){"checkbox"===e.type&&e.checked&&"on"===e.value&&(e.value=!0)})},FormValidate.prototype.isFormValidationEnabled=function(){return 0<this.$formElementValidation.length},FormValidate.prototype.isInputValidationEnabled=function(e){return e.data("validation")&&!e.hasClass("field-disabled")},FormValidate.prototype.addErrorMessage=function(e,t){"checkbox"===e.attr("type")?e.closest("fieldset").append('<small class="error">'+t+"</small>"):e.hasClass("radio-button-hidden")?e.closest("div").append('<small class="error">'+t+"</small>"):e.closest(".hidden-field-validation").length?$('<small class="error">'+t+"</small>").insertAfter(e):e.closest("label").append('<small class="error">'+t+"</small>")},FormValidate.prototype.validateInput=function(i){var t,e,a,n=this,o=(removeEmojiChars(i),i.data("validation")),r=i.data("server-validation"),l={check:function(e,t,a,i){var n=!0;s.clearSymbol(e),"required"===t.type?n=this.validators.required(e,t):_.trim(e.val())&&"regexp"===t.type?n=this.validators.regExp(e,t.regexp):"confirmValue"===t.type?n=this.validators.confirmValue(e.closest("div.form-emailfield")):"confirmPasswordValue"===t.type?n=this.validators.confirmEleValue(this.$form.find("[type=password]")):"abnValue"===t.type&&(this.validators.abnValue(e,t),n=isValidAbn),"AppointmentDate__c"!==e.prop("name")&&"APPOINTMENT_DATE"!==e.prop("name")||!this.checkTodaysDate(e.val())||(n=!1);t=$(".form.section").find("form .configuration.fcongform").data("handledomains");return n=""!==t&&null!=t&&emailDomainValidation($('.input-field [name="Email"]').val(),t)?!1:n}.bind(this)},s={invalid:function(e,t){e.hasClass("error")||e.parent().siblings("small.error").length||(e.removeClass("valid").addClass("error"),n.addErrorMessage(e,t.message),e.parent().removeClass("valid").addClass("error"))},valid:function(e){e.hasClass("valid")||(e.removeClass("error").addClass("valid"),e.parent().removeClass("error").addClass("valid").find("small.error").remove(),e.parent().siblings("small.error").length&&e.parent().siblings("small.error").remove(),e.parent().siblings("#errRecaptcha.invalid").length&&e.parent().siblings("#errRecaptcha").removeClass("invalid").html(""))},clearSymbol:function(e){e.hasClass("valid")&&(e.removeClass("valid"),e.parent().removeClass("valid")),e.hasClass("error")&&(e.removeClass("error"),e.parent().removeClass("error").find("small.error").remove(),e.parent().siblings("small.error").length&&e.parent().siblings("small.error").remove(),e.parent().siblings("#errRecaptcha.invalid").length)&&e.parent().siblings("#errRecaptcha").removeClass("invalid").html("")}},c=!0;if(i.attr("data-server-validation")&&i.hasClass("valid")&&""!==i.val()&&null!==i.val())return!(this.cancelSubmit=!1);i.removeClass("error"),s.valid(i),_.forEach(o.rules,function(e){if(!l.check(i,e)&&("abnValue"!==e.type||void 0!==l.check(i,e))&&(!i.attr("name")||showAddedForm||-1===i.attr("name").split("_").indexOf("popForm")))return c=!1,s.invalid(i,e),!(this.cancelSubmit=!0)}.bind(this)),null!=r&&""!=r&&1==c&&(r.value=i.val(),o={},"vincode"==i.attr("name")?(o.countryCodeISO=$("#countryCodeISO").val(),o[i.attr("name")]=r.value.replace(/\s/g,"").toUpperCase(),t=i.closest("form").find("[name=vehicleName]"),(_.isEmpty(t)||_.isEmpty(t.val()))&&(e=i.closest("form").find("[name=model]"),_.isEmpty(e)||(t=e)),e=t.val(),a=t.data("validation"),t.removeClass("error"),s.valid(t),_.forEach(a.rules,function(e){if(!l.check(t,e))return c=!1,s.invalid(t,e),!(this.cancelSubmit=!0)}.bind(this)),o.vehicleName=e):("userName"==i.attr("name")&&"true"==$("#isLightHouse").val()&&(o.isLightHouse=!0,o.make=$("#make").val(),o.countryCodeIso2=$("#countryCodeIso2").val(),o.countryCodeISO=$("#countryCodeISO").val()),o[i.attr("name")]=r.value),c)&&(o=mediaTracking.mergeObject(o),c=!1,$.ajax({type:"POST",url:$("#serviceLayerUrl").val()+r.url,dataType:returnJsonTypeBaseonBrowser(),data:o,async:!1,success:function(e){var t=e;switch(t.returnCode){case 200:case 201:return s.valid(i),this.cancelSubmit=!1,c=!0;default:var a={};return a.message=getErrorMessageByCode(t.errorCode),a.type="server_validate",s.invalid(i,a),this.cancelSubmit=!0,c=!1}},error:function(e){var t={};return t.message=getErrorMessageByCode(e.errorCode),t.type="server_validate",s.invalid(i,t),this.cancelSubmit=!0,c=!1}}))},FormValidate.prototype.validateCPF=function(e){var t=!1,a=($("input[name=marketName]").length&&""!=$("input[name=marketName]").val()&&(t="brazil"==$("input[name=marketName]").first().val().toLowerCase()),"CPF"==e.attr("name"));if(t&&a){var t=e.attr("name","CPF").val().replace(/[^0-9]/gi,""),i=[],n=t.toString(),a=0,o=0,r=!1,l=!1;if(""!=t||"undefined"!=t)for(var s=0,c=n.length;s<c;s+=1)i.push(+n.charAt(s));a+=+Number(i[0])+2*Number(i[1])+3*Number(i[2])+4*Number(i[3])+5*Number(i[4])+6*Number(i[5])+7*Number(i[6])+8*Number(i[7])+9*Number(i[8]),a=a%11%10,o+=+Number(i[1])+2*Number(i[2])+3*Number(i[3])+4*Number(i[4])+5*Number(i[5])+6*Number(i[6])+7*Number(i[7])+8*Number(i[8])+9*Number(a),(o=o%11%10)==i[10]&&(l=!0),1==(r=a==i[9]?!0:r)&&1==l||($(".textfield-CPF").find("label").find("small").remove(),e.removeClass("valid"),e.addClass("invalid"),e.addClass("error"),$(".textfield-CPF").find(".input-field").removeClass("valid"),$(".textfield-CPF").find(".input-field").addClass("error"),$(".textfield-CPF").find("label").append('<small class="error">'+e.data("validation").rules[0].message+"</small>"))}},FormValidate.prototype.checkTodaysDate=function(e){var t=new Date,e=new Date(e.replace(/(\d{2})\/(\d{2})\/(\d{4})/,"$2/$1/$3"));return!(t.setHours(0,0,0,0)<=e.setHours(0,0,0,0))},FormValidate.prototype.submitButton=function(e){e?$(this.$form).find(".form-submit button").attr("disabled",!0):$(this.$form).find(".form-submit button").attr("disabled",!1)},FormValidate.prototype.specialHandling=function(form){var config,maplist;this.specialHandlingSubmit=!0,form.find(".configuration").length&&(config=form.find(".configuration").data(),config.handlecn&&(form.find(".configuration").each(function(index){var mapping=form.find(".configuration").eq(index).attr("data-hiddenvariablenamelist");!$.isEmptyObject(mapping)&&""!==mapping&&null!==mapping&&mapping.match(config.handlehiddendealername)&&(maplist=eval("("+form.find(".configuration").eq(index).attr("data-hiddenvaluemaplist")+")"))}),this.specialHandlingChina(config,maplist)),config.handlesk&&this.specialHandlingPhone(config),config.handlecb&&this.specialHandlingCheckbox(config),config.handledate&&this.specialHandlingDate(config),config.handleuniqid)&&this.uniqueIDHandling(config)},FormValidate.prototype.specialHandlingChina=function(o,r){o.handlehiddenmodelname&&$('input[name="'+o.handlehiddenmodelname+'"]').on("change",function(){var t,i=$(this).val(),n=$('select[name="'+o.handlecityname+'"]').val();n&&""!==n&&(t=$('select[name="'+o.handleprovincename+'"]').val(),$('select[name="'+o.handledealername+'"] >option').each(function(){var a=$(this),e=this.value,e=r[t+"_"+n+"_"+e];e&&$.each(e,function(e,t){t=t[o.handlehiddendealername];t&&(t.match(i)?a.prop("disabled",!1):a.prop("disabled",!0))})}),$('select[name="'+o.handledealername+'"]').select2("val",""))}),o.handlecityname&&($('select[name="'+o.handledealername+'"]').unbind(),$('select[name="'+o.handlecityname+'"]').on("change",function(){window.callSpecialHandlingChinaNow=!1;var e,t=$('input[name="'+o.handlehiddenmodelname+'"]').val(),a=$(this).val();t&&""!==t&&a&&""!==a&&(e=$('select[name="'+o.handleprovincename+'"]').val(),waitForIt(o,{province:e,city:a},r,t))}))},FormValidate.prototype.specialHandlingPhone=function(a){this.$form.submit(function(e){e.preventDefault();var e=0,t=(a.handlehomename&&(t=$('input[name="'+a.handlehomename+'"]').val())&&""!==t&&e++,a.handleofficename&&(t=$('input[name="'+a.handleofficename+'"]').val())&&""!==t&&e++,a.handlemobilename&&(t=$('input[name="'+a.handlemobilename+'"]').val())&&""!==t&&e++,$('input[name="'+a.handlehomename+'"]').closest("label"));if(t.find("small.error").remove(),t.find(".input-field").removeClass("error"),0===e)return t.append('<small class="error">'+a.handlephonevalidate+"</small>"),t.find(".input-field").addClass("error"),this.specialHandlingSubmit=!1;this.specialHandlingSubmit=!0}.bind(this))},FormValidate.prototype.specialHandlingCheckbox=function(l){this.$form.submit(function(e){var t,a,i,n=!1,o=(l.handlecheckbox1name&&(t=$('input[name="'+l.handlecheckbox1name+'"]').is(":checked")),l.handlecheckbox2name&&(a=$('input[name="'+l.handlecheckbox2name+'"]').is(":checked")),l.handlecheckbox3name&&(i=$('input[name="'+l.handlecheckbox3name+'"]').is(":checked")),l.handlecheckbox4name&&(n=$('input[name="'+l.handlecheckbox4name+'"]').is(":checked")),$('input[name="'+l.handlecheckbox3name+'"]').closest("fieldset")),r=$('input[name="'+l.handlecheckbox4name+'"]').closest("fieldset");return o.find("small.error").remove(),o.find(".input-field").removeClass("error"),r.find("small.error").remove(),r.find(".input-field").removeClass("error"),$('input[name="'+l.handlecheckboxdataname+'"]').remove(),i&&!n?(r.append('<small class="error">'+l.handlecheckboxvalidate+"</small>"),r.find(".input-field").addClass("error"),this.specialHandlingSubmit=!1):!i&&n?(o.append('<small class="error">'+l.handlecheckboxvalidate+"</small>"),o.find(".input-field").addClass("error"),this.specialHandlingSubmit=!1):(t&&a&&i&&n?this.$form.append('<input type="hidden" name="'+l.handlecheckboxdataname+'" value="'+l.handlecheckboxvaluetrue+'">'):this.$form.append('<input type="hidden" name="'+l.handlecheckboxdataname+'" value="'+l.handlecheckboxvaluefalse+'">'),this.specialHandlingSubmit=!0,void e.preventDefault())}.bind(this))},FormValidate.prototype.specialHandlingDate=function(e){var t=$.datepicker.formatDate(e.handledateformat,new Date)+getTimeValue(e.handletime1)+getTimeValue(e.handletime2)+getTimeValue(e.handletime3);this.$form.append('<input type="hidden" name="'+e.handledatesubmitname+'" value="'+t+'">')},FormValidate.prototype.uniqueIDHandling=function(e){var t=String(Date.now()).slice(-7)+String(Math.abs(Math.random()*Math.random()*Math.random()*Math.random()*Date.now())).slice(-3),a=this.$form.attr("data-success");return this.$form.append('<input type="hidden" name="'+e.variablenameuniqueid+'" value="'+t+'">'),this.$form.attr("data-success",a+"&id="+t),t},api.init=function(e){(vehicleDetailsLeadGeneration=""===vehicleDetailsLeadGeneration?sessionStorage.getItem("vehicleDetailsLeadGeneration"):"")&&(getTimeStamp(),$(vehicleDetailsLeadGeneration).appendTo($("form")));new FormValidate(e);$(".form-textfield input").blur(function(e){var t,a=$(this);a.hasClass("error")?0==a.parent().children(".closeIcon").length&&((t=$("<div></div>")).addClass("closeIcon"),t.css({position:"absolute",height:"1.15rem",width:"1.15rem",bottom:"50%","margin-bottom":"-9px",right:".75rem",cursor:"pointer","z-index":"99"}),a.parent().append(t),t.click(function(e){a.val("").change(),e.stopPropagation()})):0<a.parent().children(".closeIcon").length&&$(".form-textfield .closeIcon").remove(),e.stopPropagation()}),this.$form=e,(urlGetDealers=this.$form.find(".configuration").attr("data-handleUrl"))&&checkIsJMC(),"F_EPB"==$('[name="FORM_TYPE"]').val()&&analyticsEventLayer.getVehicleRevealEvents().trackVehicleRevealLoad($('select[name="NAMEPLATE"]').val()),$(".form-group-input a").on("keyup",function(e){13===e.keyCode&&e.target.click()}),$(".submit button").on("keyup",function(e){13===e.keyCode&&e.target.click()}),$(document).on("click","#click2call",function(e){$('input[name="dealerTel"]').val()&&(window.location.href="tel:+"+$('input[name="dealerTel"]').val(),setTimeout(()=>{analyticsEventLayer.getFormWizardEvents().formClicktoCall()},300))}),$(document).on("click","#testDrive",function(){var e,t=$('input[name="CUSTOMER_ADDRESS_DIVISION_2"]').val()||"",a=$('input[name="CUSTOMER_ADDRESS_DIVISION_1"]').val()||"",i=$('input[name="dealerName"]').val()||"";i&&(e=(e=$("a.test-drive-link").attr("href"))+"?s="+encodeURIComponent(t)+"&c="+encodeURIComponent(a)+"&d="+encodeURIComponent(i),window.location.href=e)}),countryCodeAndPhone(),autoSelectionModelAndSeries()},api}),define("form/component.form.dropdown",["jquery"],function(u){var e={};function p(e,t,a){var i=[],a=a.data("match");return""===u.trim(e)?t:a?-1<a.toLowerCase().indexOf(e.toLowerCase())?(i.push(t),i):void 0:null}function m(n){var e=n.data("months"),o=["January","February","March","April","May","June","July","August","September","October","November","December"],e=(e=>{for(var t,a=[],i=new Date,n=i.getFullYear(),o=i.getMonth(),r=i.getDate(),l=0;l<=e;l++)t=new Date(n,o,r),diff=t.getDate(),t.setMonth(t.getMonth()+ +l),t.getDate()!==diff&&t.setDate(0),a.push(t);return a})(e-1);u.each(e,function(e,t){var a=t.getMonth(),t=t.getFullYear(),i=a+1;n.append(u('<option value="01'+(i=i<10?"0"+i:i)+t+'">'+o[a]+" "+t+"</option>"))})}return e.init=function(e){u(e).each(function(e,t){var a,i,n,o,r,l,s,c,d;void 0!==u(this).find("select").data("months")&&u(this).find("select").data("enable-custom-months")&&m(u(this).find("select")),t=u(a=t).find("select"),i=u(a).hasClass("js-custom-data"),n="input[type=hidden]",o=t.data("min-results"),r=t.data("error-msg"),l=t.data("hide-search"),s={},void 0!==t&&void 0!==t.select2&&(s={minimumResultsForSearch:void 0!==o?o:10,blurOnChange:!1,selectOnBlur:!1,loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:l?"hide-search":"",formatNoMatches:function(e){if(void 0!==r)return r},escapeMarkup:function(e){return e}},i&&(s.matcher=p),t.each(function(){u(this).select2(s).on("select2-focus",function(){}).on("change",function(){u(a).find(n).length&&u(a).find(n).val(u(a).find("select").find(":selected").data("hiddenvariable"))}),"dropdown"==u(this).parent().parent().parent().attr("class")&&(u(this).find(".dropdown option").length<10?u(this).prev().find("input").attr("readonly","readonly"):u(this).prev().find("input").removeAttr("readonly"))}),u(a).find("input").unbind("foucs blur"),u(a).find(".select2-drop").unbind("mousedown touchstart"),u(a).on("select2-open select2-close",function(e){var t=u(this).find(".select2-chosen").attr("id").replace("chosen","results");u(this).find("input").attr("readonly","readonly"),u("#"+t).parent().find("input").blur(),u(".fdsForm").parents("#global-ux").siblings(".select2-drop").addClass("fdsDropDown")})),c=u("select[name='PURCHASE_INTENTION_TIMEFRAME_CODE']"),(d=sessionStorage.getItem("product-type"))!=c.children("option:checked").val()&&c.children("option[data-match]").each(function(e,t){d==u(t).val()&&c.val(d).trigger("change")})})},e}),define("form/component.form.dropdowncustomize",["jquery","cookie","isAuthor"],function(f,e,t){var a={},i=!t.getAuthorStatus(),l="",r="",s=f("#global-market-configuration .configuration").attr("data-iso3-market-code");function g(e){return void 0!==e&&!1!==e&&""!==e}function v(e,t,a){e=f(e).parent().find(".configuration");if(e.length){e=e.attr(t);if(g(e)){if(void 0!==a&&!1!==a)return parseInt(e);t=JSON.parse(decodeURIComponent(e));if(!f.isEmptyObject(t))return t}}return!1}function c(e,t){e=f(e).parent().find(".configuration");if(e.length)return"true"==e.attr(t)}function d(n,e){var a,t=".form-first-dropdown select",i=".form-second-dropdown select",o=".form-third-dropdown select",r=(1===e?0:2===e?0:3===e&&0,v(n,"data-hiddenvariablenamelist")),l=v(n,"data-hiddenvaluemaplist"),t=f(n).parent().find(t).val(),i=f(n).parent().find(i).val(),o=f(n).parent().find(o).val();1===e?a=t:2===e?a=t+"_"+i:3===e&&(a=t+"_"+i+"_"+o),f.each(l,function(e,t){var i;null!=a&&a===e&&null!=(i=t)&&f.each(r,function(e,a){f.each(i,function(e,t){t=t[a];t&&("price"==a?f("input#price[name='price']").val(t):(f(n).parent().find("input[name="+a+"]").val(t),f(n).parent().find("input[name="+a+"]").change()))})})})}function u(e,a){""===f(a).find("option").eq(0).val()?f(a).find("select").html(f(a).find("option").eq(0)):f(a).find("select").html(""),f.each(e,function(e,t){p(a,t)}),f(a).find("select").select2("val",""),f("input#price[name='price']").val("")}function p(e,t){var a,i=t.term+" "+t.value;"year"===f(e).find("select").attr("name")?(a=t.value.trim().slice(-4),f(e).find("select").append('<option value="'+t.value+'" data-match="'+i+'" >'+a+"</option>")):"MODEL_COLOR"===f(e).find("select").attr("name")?f(e).find("select").append('<option value="'+t.value+'" data-match="'+i+'" >'+t.value.slice(t.value.indexOf("-")+1).trim()+"</option>"):f(e).find("select").append('<option value="'+t.value+'" data-match="'+i+'" >'+t.value+"</option>")}function m(e,t){f(e).find('select option[value="'+t+'"]').length&&(f(e).find("option").prop("selected",!1),f(e).find('select option[value="'+t+'"]').prop("selected",!0),i)&&(f(e).find("select").select2("val",t),f(e).find("select").trigger("change"))}function n(e,t){t=t||window.location.href,e=e.replace(/[\[\]]/g,"\\$&");e=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return e?e[2]?decodeURIComponent(e[2].replace(/\+/g," ")):"":null}function h(e){var t,a,i;"THA"===s&&(a=e.find("option").eq(0).val(),i=e.find("option").eq(0).text(),(t="")!==a&&"NA"!==a||(t='<option value="'+a+'">'+i+"</option>",e.find("option").get(0).remove()),i=(a=e).val(),(e=a.find("option")).sort(function(e,t){return f(e).text()>f(t).text()?1:-1}),a.html("").append(t).append(e),a.val(i))}return a.initDropdown=function(){f(".form-first-dropdown").unbind(),f(".form-second-dropdown").unbind(),f(".form-third-dropdown").unbind(),f(".dropdownCustomize input").unbind("foucs blur"),f(".dropdownCustomize .select2-drop").unbind("mousedown touchstart"),f(".dropdownCustomize .form-dropdown").on("select2-open select2-close",function(e){var t=f(this).find(".select2-chosen").attr("id").replace("chosen","results");f(this).find("input").attr("readonly","readonly"),f("#"+t).parent().find("input").blur()}),f(".form-first-dropdown").each(function(e,t){var i,a,n,o=v(t,"data-matchdropdown",!0);0===f(t).parent().find(".form-second-dropdown").length&&(o&&1===o&&(d(t,o),"ZAF"===f("#global-market-configuration .configuration").attr("data-iso3-market-code"))&&(v(i=t,"data-hiddenvariablenamelist"),a=v(i,"data-hiddenvaluemaplist"),n=analyticsGetParameterByName("n"),f.each(a,function(a,e){null!=e&&f.each(e,function(e,t){void 0!==t.NAMEPLATE_CODE&&(t=t.NAMEPLATE_CODE.toLowerCase(),null!=n)&&""!=n&&t==(n=n.toLowerCase())&&f(i).find("select").attr("data-preselect",a)})})),f(t).find("select").on("change",function(){o&&1===o&&d(t,o)}))}),f(".form-second-dropdown").each(function(e,o){var t=v(o,"data-secondleveldatalist"),i=v(o,"data-matchdropdown",!0),r=c(o,"data-extendedfilter");i&&1===i&&d(o,i),f(o).parent().find(".form-first-dropdown select").change(function(){var e,n,a=f(this).val();r&&(l=a),t&&(f.each(t,function(e,t){e===a&&(""===f(o).find("option").eq(0).val()?f(o).find("select").html(f(o).find("option").eq(0)):f(o).find("select").html(""),f.each(t,function(e,t){p(o,t)}),f("input#price[name='price']").val(""))}),0<f(o).parent().find(".form-second-dropdown select").length&&(e=c(o,"data-modelavailabilityfilter"),n=((e,t)=>{if((e=f(e).parent().find(".configuration")).length)return e.attr(t)})(o,"data-modelavailabilitymsg"),e?f(o).parent().find(".form-second-dropdown select").change(function(){var e,t,a,i;t=v(e=o,"data-hiddenvaluemaplist"),a=f(e).parent().find(".form-first-dropdown select").val()+"_"+f(e).parent().find(".form-second-dropdown select").val(),i=!1,f.each(t,function(e,t){null!=a&&a===e&&null!=(e=t)&&f.each(e,function(e,t){t=t.availability;t&&(i="N"==t)})}),i?f("#filtermsg").html(n):f("#filtermsg").html("")}):f("#filtermsg").html(""),""===a&&(""===f(o).parent().find(".form-second-dropdown select option").eq(0).val()?f(o).parent().find(".form-second-dropdown select").html(f(o).parent().find(".form-second-dropdown select option").eq(0)):f(o).parent().find(".form-second-dropdown select").html("")),f(o).parent().find("form-second-dropdown select").select2("val","")),0<f(o).parent().find(".form-third-dropdown select").length&&(""===f(o).parent().find(".form-third-dropdown select option").eq(0).val()?f(o).parent().find(".form-third-dropdown select").html(f(o).parent().find(".form-third-dropdown select option").eq(0)):f(o).parent().find(".form-third-dropdown select").html(""),f(o).parent().find(".form-third-dropdown select").select2("val","")),f(o).find("select").select2("val","")),"THA"===s&&(h(f(o).parent().find(".form-second-dropdown").find("select")),f(o).parent().find(".form-second-dropdown select").select2("val","")),void 0===f(o).find("select").data("validation")&&(f(o).find("select").find("option").eq(0).prop("selected",!0),f(o).find("select").trigger("change")),i&&1===i&&d(o,i)}),0===f(o).parent().find(".form-third-dropdown").length&&(i&&2===i&&d(o,i),f(o).find("select").on("change",function(){i&&2===i&&d(o,i)}))}),f(".form-third-dropdown").each(function(e,i){var t=v(i,"data-thirdleveldatalist"),n=v(i,"data-matchdropdown",!0),o=c(i,"data-extendedfilter");n&&2===n&&d(i,n),f(i).parent().find(".form-second-dropdown select").change(function(){var a=f(this).val();o&&(r=a),0<f(i).parent().find(".form-third-dropdown select").length&&(""===a&&(""===f(i).parent().find(".form-third-dropdown select option").eq(0).val()?f(i).parent().find(".form-third-dropdown select").html(f(i).parent().find(".form-third-dropdown select option").eq(0)):f(i).parent().find(".form-third-dropdown select").html("")),f(i).parent().find(".form-third-dropdown select").select2("val","")),t&&f.each(t,function(e,t){o?""!=l&&""!=r&&e==l+"_"+r&&u(t,i):e===a&&u(t,i)}),window.callSpecialHandlingChinaNow=!0,n&&2===n&&d(i,n),"THA"===s&&(h(f(i).parent().find(".form-third-dropdown").find("select")),f(i).parent().find(".form-third-dropdown select").select2("val",""))}),n&&3===n&&d(i,n),f(i).parent().find(".form-third-dropdown select").change(function(){n&&3===n&&d(i,n)})})},a.setPreSelectValue=function(){var a,i,r="",l="",s="",c="",d="",u=n("m"),p=n("s"),m=n("c"),h=n("d");f(".form-first-dropdown").each(function(e,t){a=v(t,"data-hiddenvaluemaplist")}),f.each(a,function(o,e){null!=e&&f.each(e,function(e,t){var a,i=t.vdmkey,i=(i&&i==u&&(r=o.split("_")[0]?o.split("_")[0]:"",l=o.split("_")[1]?o.split("_")[1]:""),t.CUSTOMER_ADDRESS_DIVISION_1||""),n=t.dealerName||"";p==(t.CUSTOMER_ADDRESS_DIVISION_2||"")&&(s=o.split("_")[0]?o.split("_")[0]:""),m&&m==i&&(a=p?1:0,c=o.split("_")[a]?o.split("_")[a]:""),n==h&&(a=m?2:1,d=o.split("_")[a]?o.split("_")[a]:"")})}),(g(r)||g(s)||g(c))&&(i=g(r)?r:g(s)?s:c,f(".form-first-dropdown").each(function(e,t){f(t).find("select").attr("data-preselect",i)})),(g(l)||g(c)||g(d))&&(i=g(l)?l:g(c)?c:d,f(".form-second-dropdown").each(function(e,t){f(t).find("select").attr("data-preselect",i)})),g(c)&&g(d)&&f(".form-third-dropdown").each(function(e,t){f(t).find("select").attr("data-preselect",d)})},a.setDealerPreSelectValue=function(){var s="",c="",d="",u=n("did"),e=n("reg"),t=n("pr"),e=e&&e.replace(/\s/g,"").toLowerCase(),t=t&&t.replace(/\s/g,"").toLowerCase();f(".dropdownCustomize").each(function(e,t){var a,i=f(t).find(".form-first-dropdown"),n=f(t).find(".form-second-dropdown"),t=f(t).find(".form-third-dropdown"),o=v(i,"data-hiddenvariablenamelist"),r=v(i,"data-hiddenvaluemaplist"),l=[];f.each(o,function(e,t){l.push(t.toString())}),(l.includes("CUSTOMER_ADDRESS_DIVISION_1")||l.includes("CUSTOMER_ADDRESS_DIVISION_2")||l.includes("OTHER_DEALER_CODE"))&&(f.each(r,function(a,e){null!=e&&f.each(e,function(e,t){var t=t.OTHER_DEALER_CODE||"";l.includes("OTHER_DEALER_CODE")&&t==u&&(l.includes("CUSTOMER_ADDRESS_DIVISION_1")&&(s=a.split("_")[0]),l.includes("CUSTOMER_ADDRESS_DIVISION_2")&&(t=s?1:0,c=a.split("_")[t]),t=c?2:s?1:0,d=a.split("_")[t]?a.split("_")[t]:"")})}),(g(s)||g(c)||g(d))&&(a=g(s)?s:g(c)?c:d,f(i).find("select").attr("data-preselect",a)),(g(c)||g(d))&&(a=g(c)?c:d,f(n).find("select").attr("data-preselect",a)),g(c))&&g(d)&&f(t).find("select").attr("data-preselect",d)})},a.preSelectDropdown=function(){setTimeout(function(){f(".form-first-dropdown").each(function(e,t){f(t).find("select").select2("val","");var a=f(t).find("select").attr("data-preselect");g(a)&&m(t,a)})},500),setTimeout(function(){f(".form-second-dropdown").each(function(e,a){h(f(a).find("select"));var t,i,n=f(a).parent().find(".form-first-dropdown select").attr("data-preselect"),o=f(a).find("select").attr("data-preselect");g(n)&&g(o)&&(!f(a).find('select option[value="'+o+'"]').length&&(i=f(a).find("option").eq(0).val(),t=f(a).find("option").eq(0).text(),""===i||"NA"===i?(f(a).find("option").remove(),f(a).find("select").append('<option value="'+i+'">'+t+"</option>")):f(a).find("option").remove(),i=v(a,"data-secondleveldatalist"))&&f.each(i,function(e,t){e===n&&f.each(t,function(e,t){p(a,t)})}),m(a,o))})},850),setTimeout(function(){f(".form-third-dropdown").each(function(e,a){h(f(a).find("select"));var t,i,n=f(a).parent().find(".form-second-dropdown select").attr("data-preselect"),o=f(a).find("select").attr("data-preselect");g(n)&&g(o)&&(!f(a).find('select option[value="'+o+'"]').length&&(i=f(a).find("option").eq(0).val(),t=f(a).find("option").eq(0).text(),""===i||"NA"===i?(f(a).find("option").remove(),f(a).find("select").append('<option value="'+i+'">'+t+"</option>")):f(a).find("option").remove(),i=v(a,"data-thirdleveldatalist"))&&f.each(i,function(e,t){e===n&&f.each(t,function(e,t){p(a,t)})}),m(a,o))})},1150)},a.init=function(){window.callfuntion=0,this.initDropdown(),this.setPreSelectValue(),this.setDealerPreSelectValue(),this.preSelectDropdown()},a}),define("form/component.form.dropdowncustomizev2",["jquery","cookie","isAuthor"],function(u,e,t){var a={};t.getAuthorStatus(),""!=e.getCookie("dealerformdata")&&JSON.parse(e.getCookie("dealerformdata")),u("#global-market-configuration .configuration").attr("data-iso3-market-code");function d(e,t,a){if((e=u(e).parent().find(".configuration")).length){e=e.attr(t);if(void 0!==(t=e)&&!1!==t&&""!==t){if(void 0!==a&&!1!==a)return parseInt(e);t=JSON.parse(decodeURIComponent(e));if(!u.isEmptyObject(t))return t}}return!1}function p(n,e){var a=d(n,"data-hiddenvariablenamelist"),t=d(n,"data-hiddenvaluemaplist"),o=((e,t)=>{var a="",i=d(e,"data-numberOfDropdowns",!0);if("undefined"!==i&&0<i)for(var n=0;n<i;n++){var o=n+1,r=".form-"+(e=>{switch(e%100){case 11:case 12:case 13:return e+"th";default:return e+["th","st","nd","rd","th","th","th","th","th","th"][e%10]}})(o)+"-dropdown select",r=u(e).parent().find(r).val();if(a=1==o?r:a+"_"+r,t===o)break}return null==a||a.includes("null")?"":a})(n,e);u.each(t,function(e,t){var i;null!=o&&o===e&&null!=(i=t)&&u.each(a,function(e,a){u.each(i,function(e,t){t=t[a];t&&(u(n).parent().find("input[name="+a+"]").val(t),u(n).parent().find("input[name="+a+"]").change())})})})}function m(e,t){t=t||window.location.href,e=e.replace(/[\[\]]/g,"\\$&");e=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return e?e[2]?decodeURIComponent(e[2].replace(/\+/g," ")):"":null}return a.v2=function(){setTimeout(function(){var e=u(".dropdownCustomize-v2 .form-dropdown");u(e).on("change",function(r){var l,s,e,c,t=r.currentTarget.id,a=t.substr(t.length-1),d=parseInt(a),a=u(r.currentTarget).parent().find(".configuration").data("datalists");d<a.length+1&&(u(r.currentTarget).find(":selected").val(),e=d-1,l=u(r.currentTarget).parent().find("#form-dropdown-v2-"+e+" :selected").val(),e=u(r.currentTarget).parent().find("#form-dropdown-v2-"+d+" :selected").val(),a[d-1],a=a[d-1][e],s=u(r.currentTarget).parent().find(".form-dropdown-v2"),u.each(s,function(e,t){d<=e&&0<u(t).find("option").length&&(u(t).find("option").each(function(e,t){u(t).hasClass("blank")||u(t).remove()}),u(t).find("select").select2("val",""))}),null!=a)&&(e=d+1,c=t.substr(0,t.length-1)+e,u.each(a,function(e,a){var t=new Option(a.value,a.value),i=!1,n=d+1,o=u(r.currentTarget).parent().find("#form-dropdown-v2-"+n+" option");0<o.length&&n<=s.length&&u(o).each(function(e,t){t.value===a.value&&(i=!0)}),i||2<=d&&l!==a.fatherKey||u(r.currentTarget).parent().find("#"+c+" select").append(t)}),u(r.currentTarget).parent().find("#form-dropdown-v2-"+(d+1)).trigger("change"))}),0<e.length&&u.each(e,function(e,t){0===u(t).find(".blank").length&&u(t).find("select").select2("val","")}),u(".form-dropdown-v2").each(function(e,t){u(t).find("select").on("click",function(){var e=d(t,"data-matchdropdown",!0);p(t,e)}),a=t,r=o=n="",l=m("did"),c=m("reg"),i=m("pr"),c=c&&c.replace(/\s/g,"").toLowerCase(),i=i&&i.replace(/\s/g,"").toLowerCase(),c=d(a,"data-hiddenvariablenamelist"),i=d(a,"data-hiddenvaluemaplist"),s=[],u.each(c,function(e,t){s.push(t.toString())}),(s.includes("CUSTOMER_ADDRESS_DIVISION_1")||s.includes("CUSTOMER_ADDRESS_DIVISION_2")||s.includes("OTHER_DEALER_CODE"))&&(u.each(i,function(i,e){null!=e&&u.each(e,function(e,t){var a;s.includes("OTHER_DEALER_CODE")&&(t.OTHER_DEALER_CODE||"")==l&&(s.includes("CUSTOMER_ADDRESS_DIVISION_1")&&(n=i.split("_")[0]),s.includes("CUSTOMER_ADDRESS_DIVISION_2")&&(a=n?1:0,o=i.split("_")[a]),t=s.includes("CUSTOMER_ADDRESS_DIVISION_2")?2:s.includes("CUSTOMER_ADDRESS_DIVISION_1")?1:0,r=i.split("_")[t]?i.split("_")[t]:"",a=n?1:0)})}),"CUSTOMER_ADDRESS_DIVISION_1"==u(a).find("select").attr("name")&&n&&u(a).find("select").attr("data-preselect",n),"CUSTOMER_ADDRESS_DIVISION_2"==u(a).find("select").attr("name")&&o&&u(a).find("select").attr("data-preselect",o),"OTHER_DEALER_CODE"==u(a).find("select").attr("name"))&&r&&u(a).find("select").attr("data-preselect",r);var a,n,o,r,l,i,s,c=u(t).find("select");c.attr("data-preselect")&&(c.val(c.attr("data-preselect")),c.trigger("change"),c.trigger("click"))})},1e3)},a.init=function(){this.v2()},a}),define("form/component.form.dropdowncustomizemap",["jquery","isAuthor"],function(s,e){var t,i,l,c,d,n={},a=!e.getAuthorStatus();function u(e){return void 0!==e&&!1!==e&&""!==e}function p(e,t,a){e=s(e).parent().find(".configuration");if(e.length){e=e.attr(t);if(u(e)){if(void 0!==a&&!1!==a)return parseInt(e);t=JSON.parse(decodeURIComponent(e));if(!s.isEmptyObject(t))return t}}return!1}function r(n,e){var a,t=".first-dropdown  select",i=".second-dropdown  select",o=".third-dropdown  select",r=(1===e?0:2===e?0:3===e&&0,p(n,"data-hiddenvariablenamelist")),l=p(n,"data-hiddenvaluemaplist"),t=s(n).parent().find(t).val(),i=s(n).parent().find(i).val(),o=s(n).parent().find(o).val();1===e?a=t:2===e?a=t+"_"+i:3===e&&(a=t+"_"+i+"_"+o),s.each(l,function(e,t){var i;null!=a&&a===e&&null!=(i=t)&&s.each(r,function(e,a){s.each(i,function(e,t){t=t[a];t&&(s(n).parent().find("input[name="+a+"]").val(t),s(n).parent().find("input[name="+a+"]").change())})})})}function m(e,t){var a=t.term+" "+t.value;s(e).find("select").append('<option value="'+t.value+'" data-match="'+a+'" >'+t.value+"</option>")}function h(e,t){s(e).find('select option[value="'+t+'"]').length&&(s(e).find("option").prop("selected",!1),s(e).find('select option[value="'+t+'"]').prop("selected",!0),a)&&(s(e).find("select").select2("val",t),s(e).find("select").trigger("change"))}return s(window).on("onoverlayload",function(){s(".first-dropdown").length&&(i=s(".dropdownCustomizemap span").attr("data-firstleveldata"),(t=s(".overlay-container select[name='modelName']")).addClass("mappingParent"),t)&&s(".mappingParent").change(function(){var a=this.value;s.each(s.parseJSON(i),function(e,t){t.mapkey==a&&(l=t)}),l&&(c=l.drop1,d=l.drop2),n.initDropdownMap(l)})}),n.initDropdownMap=function(){s(".first-dropdown ").unbind(),s(".second-dropdown ").unbind(),s(".third-dropdown ").unbind(),s(".first-dropdown ").each(function(e,a){c&&(s(a).find("option").remove(),s.each(c,function(e,t){m(a,t)}));var t=p(a,"data-matchdropdown",!0);0===s(a).parent().find(".second-dropdown ").length&&s(a).find("select").on("change",function(){t&&1===t&&r(a,t)})}),s(".second-dropdown ").each(function(e,i){var t=p(i,"data-matchdropdown",!0);s(i).parent().find(".first-dropdown  select").change(function(){var e,a=s(this).val();(e=c?c:e)&&s.each(e,function(e,t){t.key===a&&(""===s(i).find("option").eq(0).val()?s(i).find("select").html(s(i).find("option").eq(0)):s(i).find("select").html(""),""===s(i).parent().find(".third-dropdown  select option").eq(0).val()?s(i).parent().find(".third-dropdown  select").html(s(i).parent().find(".third-dropdown  select option").eq(0)):s(i).parent().find(".third-dropdown  select").html(""),s.each(t.child,function(e,t){m(i,t)}),s(i).find("select").select2("val",""),s(i).parent().find(".third-dropdown  select").select2("val",""))}),void 0===s(i).find("select").data("validation")&&(s(i).find("select").find("option").eq(0).prop("selected",!0),s(i).find("select").trigger("change")),t&&1===t&&r(i,t)}),0===s(i).parent().find(".third-dropdown ").length&&s(i).find("select").on("change",function(){t&&2===t&&r(i,t)})}),s(".third-dropdown ").each(function(e,o){var t=p(o,"data-matchdropdown",!0);s(o).parent().find(".second-dropdown  select").change(function(){var e,i,n=s(this).val();(e=d?d:e)&&(i=s(o).find(".select2-choice span").html(),s.each(e,function(e,t){var a;t.key===n&&(""===s(o).find("option").eq(0).val()?s(o).find("select").html(s(o).find("option").eq(0)):s(o).find("select").html(""),s.each(t.child,function(e,t){m(o,t),setTimeout(function(){s(o).find("select option").prop("disabled",!1),a=s(o).find("select option:eq(0)").html()},100)}),setTimeout(function(){i?s(o).find(".select2-choice .select2-chosen").html(i):s(o).find(".select2-choice .select2-chosen").html(a)},150))})),window.callSpecialHandlingChinaNow=!0,t&&2===t&&r(o,t)}),s(o).parent().find(".third-dropdown  select").change(function(){t&&3===t&&r(o,t)})})},n.preSelectDropdownMap=function(){setTimeout(function(){s(" .first-dropdown ").each(function(e,t){var a=s(t).find("select").attr("data-preselect");u(a)&&h(t,a)})},500),setTimeout(function(){s(".second-dropdown ").each(function(e,a){var t,i,n,o=s(a).parent().find(" .first-dropdown  select").attr("data-preselect"),r=s(a).find("select").attr("data-preselect");u(o)&&u(r)&&(!s(a).find('select option[value="'+r+'"]').length&&(t=s(a).find("option").eq(0).val(),i=s(a).find("option").eq(0).text(),""===t||"NA"===t?(s(a).find("option").remove(),s(a).find("select").append('<option value="'+t+'">'+i+"</option>")):s(a).find("option").remove(),n=l?c:n)&&s.each(n,function(e,t){t.key===o&&s.each(t.child,function(e,t){m(a,t)})}),h(a,r))})},850),setTimeout(function(){s(".third-dropdown ").each(function(e,a){var t,i,n,o=s(a).parent().find(".second-dropdown  select").attr("data-preselect"),r=s(a).find("select").attr("data-preselect");u(o)&&u(r)&&(!s(a).find('select option[value="'+r+'"]').length&&(t=s(a).find("option").eq(0).val(),i=s(a).find("option").eq(0).text(),""===t||"NA"===t?(s(a).find("option").remove(),s(a).find("select").append('<option value="'+t+'">'+i+"</option>")):s(a).find("option").remove(),n=l?d:n)&&s.each(n,function(e,t){t.key===o&&s.each(t.child,function(e,t){m(a,t)})}),h(a,r))})},1150)},n.init=function(){window.callfuntion=0,this.initDropdownMap(),this.preSelectDropdownMap()},n}),define("form/component.form.postcode",["jquery","isAuthor","marketConfigGlobal"],function(c,e,d){var t={};function i(e,t,a){e=c(e).find(".configuration");if(e.length){e=e.attr(t);if(void 0!==(t=e)&&!1!==t&&""!==t){if(void 0!==a&&!1!==a)return e;t=JSON.parse(decodeURIComponent(e));if(!c.isEmptyObject(t))return t}}return!1}function u(r,l,e){var s=[];return c.each(e,function(e,t){var a,i,n,o=e.substring(0,4);o=o,a=r,i=l,n=Math.min.apply(Math,[a,i]),a=Math.max.apply(Math,[a,i]),n<=o&&o<=a&&s.push({key:e,value:t[0]})}),s}return t.init=function(){c(".postcodeCheck").each(function(e,r){var o=i(r,"data-secondleveldatalist"),l=i(r,"data-noresultoptionlabel",!0),s=i(r,"data-secondblankoptionlabel",!0);if(!o)return!1;c(r).find("input[type=text]").on("change",function(){s?c(r).find("select").html('<option value="">'+s+"</option>"):c(r).find("select").html(""),c(r).find("select").select2("val","");var e=c(this).val(),t=0;if("au"===d.getCurrentMarketCode()&&(e=e.substring(0,2)+"00",t=1),4<=e.length){for(var a,i,n=3;t<n;n--)if(3===n?i=e.substring(0,3)+9:2===n?i=e.substring(0,2)+99:1===n&&(i=e.substring(0,1)+999),1<(a=u(e,i,o)).length&&0==t)break;1<a.length?c.each(a,function(e,t){c(r).find("select").append('<option value="'+t.key+'">'+t.value+"</option>")}):(c(r).find("select").html('<option value="">'+l+"</option>"),c(r).find("select").select2("val",""))}}),c(r).find("select").on("change",function(){var n,a,e,o;a=i(n=r,"data-hiddenvariablenamelist"),e=i(n,"data-hiddenvaluemaplist"),o=c(n).find("select").val(),c.each(e,function(e,t){var i;null!=o&&o===e&&null!=(i=t)&&c.each(a,function(e,a){c.each(i,function(e,t){t=t[a];t&&c(n).find("input[name="+a+"]").val(t)})})})})})},t}),define("form/component.form.fieldsgroup",["jquery","_","marketConfigGlobal"],function(i,n,o){var e={},a=["input","select"];function r(e){this.$fieldsGroup=e.find(".form-fields-group");var t=this.$fieldsGroup.data();t&&!t.conditionalVisibility||(this.conditionalVisibility=t.conditionalVisibility,this.matchingValues=t.matchingValues.toString().split(","),this.referencedVariable=t.referencedVariable),this.referencedVariableSelector='[name="#"]'.replace("#",this.referencedVariable),this.parentForm=this.$fieldsGroup.closest("form"),this.$referencedFields=i(this.parentForm).find(this.referencedVariableSelector),this.$childInputs=e.find(a.join(", ")),n.each(this.$referencedFields,function(e){e=i(e);this.bindUIEvents(e)}.bind(this))}function l(e,t,a){t?e.removeClass(a):e.addClass(a)}return r.prototype.isEnabled=function(e){var t=0<=this.matchingValues.indexOf(e.val());return e.is(":checkbox")||e.is(":radio")?(e=e.is(":checked"),t&&e):t},r.prototype.setVisible=function(e,t){l(this.$fieldsGroup,e,"group-disabled"),this.setChildrenVisibility(e);var a=i("#acknowledge").prop("checked");"acknowledge"===t[0].id?!1===a?(this.$fieldsGroup.show(),this.setChildrenVisibility(!0),this.parentForm.find("#MANUAL").remove()):(this.$fieldsGroup.hide(),this.setChildrenVisibility(!1),this.parentForm.append('<input type="hidden" id="MANUAL" name="CONTACT_PERMISSION_CODE" value="1">')):e?(this.$fieldsGroup.show(),(t=this.$fieldsGroup.find(".form-fields-group"))&&t.hide()):!1!==a||"th"===o.getCurrentMarketCode()?this.$fieldsGroup.hide():(this.$fieldsGroup.show(),this.setChildrenVisibility(!0))},r.prototype.setChildrenVisibility=function(a){n.each(this.$childInputs,function(e,t){l(i(e),a,"field-disabled")})},r.prototype.bindUIEvents=function(e){this.updateView(e),e.on("change",this.updateView.bind(this,e))},r.prototype.updateView=function(e){this.conditionalVisibility&&this.setVisible(this.isEnabled(e),e)},e.init=function(){"au"===o.getCurrentMarketCode()&&i("#acknowledge").prop("checked",!1),i(".fieldsGroup").each(function(){new r(i(this))});-1!=navigator.userAgent.indexOf("Firefox")&&((e=i(".form-radioButtons").find(".config")).data("name"),e.find("input[value=get-by-email]").next("label").on("click",function(){i(this).closest(".fieldsGroup").next().find(".form-fields-group").css("display","block")})),i(document).ready(function(){i(".form .fieldsGroup").length&&(i(".form").each(function(){i(this).find(".fieldsGroup").last().addClass("last")}),i(".form-edit-account-container .action-change-account").click(function(){var e=i("#CONTACT_PERMISSION_CODE");i(this).hasClass("save")?(i("#acknowledge").prop("checked")&&i(".form-edit-account-container .form-fields-group").hide(),i(".form-edit-account-container input").prop("disabled",!0),i(".form-edit-account-container .action-change-account").show(),i(this).hide()):(e.prop("checked")?e.prop("disabled",!0):e.prop("disabled",!1),i("#acknowledge").prop("disabled",!1),"true"===i("#CONTACT_PERMISSION_OPTION1_CODE").attr("data-set-copylink")&&!i("#CONTACT_PERMISSION_OPTION1_CODE").prop("checked")||i("#CONTACT_PERMISSION_OPTION1_CODE").prop("disabled",!1),"true"===i("#CONTACT_PERMISSION_OPTION2_CODE").attr("data-set-copylink")&&!i("#CONTACT_PERMISSION_OPTION2_CODE").prop("checked")||i("#CONTACT_PERMISSION_OPTION2_CODE").prop("disabled",!1),"true"===i("#CONTACT_PERMISSION_OPTION3_CODE").attr("data-set-copylink")&&!i("#CONTACT_PERMISSION_OPTION3_CODE").prop("checked")||i("#CONTACT_PERMISSION_OPTION3_CODE").prop("disabled",!1),"true"===i("#CONTACT_PERMISSION_OPTION4_CODE").attr("data-set-copylink")&&!i("#CONTACT_PERMISSION_OPTION4_CODE").prop("checked")||i("#CONTACT_PERMISSION_OPTION4_CODE").prop("disabled",!1),i(".form-edit-account-container .action-change-account").hide(),i(".form-edit-account-container .action-change-account.save").show(),i(".form-edit-account-container .form-fields-group").show(),i(".form-edit-account-container .form-fields-group").closest(".fieldsGroup").show())}),i(".form-edit-account-container input").prop("disabled",!0))});var e,t=-1!=navigator.userAgent.indexOf("Firefox");i(".form-radioButtons .config input[value=get-by-mail]").waitUntilExists(function(){t&&i(".form-radioButtons .config input[value=get-by-mail]").next("label").on("click",function(){i(this).closest(".radioButtons").next(".fieldsgroup.last").find(".form-fields-group").css("display","block")})})},e}),define("form/component.form.recaptcha",["jquery"],function(s){var e={},c={};function d(e,t){return t&&t.data.length&&(e+="?key="+t.data),e}function u(e,t){return t&&t.message.length&&(e+=t.message),e}function t(e){var a,e=s(e).find("[data-service]"),t=s("#isImgSlEnabled")&&s("#isImgSLEnabled").val()&&"true"===s("#isImgSLEnabled").val().toLowerCase(),i=s('[name="recaptcha"]').data("service"),n=e.data("service")||i,o=null,r=(t?(n=s("#apigeeDomain").val(),o=n+"/api/shop/captcha/key",a=n+"/api/shop/captcha/key-image",e=sessionStorage.getItem("imgSlToken"),c.Authorization="Bearer "+e):(o=(n=n||s("#serviceLayerUrl").val())+"/fordleads/leads/captcha/captchaJsonKey",a=n+"/fordleads/leads/captcha/captcha.jpg/"),'<i class="gux-icon-360-outline-50px captcha-refresh" tabindex="0"></i>');function l(e){var t=sessionStorage.getItem("imgSlToken"),a={};return t&&(a.Authorization="Bearer "+t),fetch(e,{method:"GET",headers:a})}"true"==s("#isLightHouseApi").val()&&"true"==s("#isLightHouse").val()&&(o+="?isLightHouse=true"),t?s.ajax({type:"GET",url:"/bin/oauth/token.shop.data",contentType:"application/json"}).then(function(e){var e=("string"==typeof e?JSON.parse(e):e).token;sessionStorage.setItem("imgSlToken",e),c.Authorization="Bearer "+e,e=o,s.ajax({type:"GET",url:e,headers:c,dataType:"json",contentType:"application/json",success:function(e){}}).then(function(e){var t=e.data,e=(sessionStorage.setItem("secretKey",t),d(a,e));s(".form-recaptcha .input-field .captcha-wrap ").remove(),s("input[name=captchaKey]").remove(),s("input[name=domainurl]").remove(),l(e).then(function(e){if(e.ok)return e.blob();throw new Error("Error to get image data from server")}).then(function(e){e=URL.createObjectURL(e);s(".form-recaptcha .input-field").append('<div class="captcha-wrap"><img id="imgRecaptcha" style="-webkit-user-select: none" src="'+e+'">'+r+"</div>"),s("#imgRecaptcha, .captcha-refresh").on("click",function(){s.ajax({type:"GET",url:o,headers:c,contentType:"application/json",success:function(e){sessionStorage.setItem("secretKey",e.data),l(d(a,e)).then(function(e){if(e.ok)return e.blob();throw new Error("Error to get image data from server")}).then(function(e){e=URL.createObjectURL(e);s("#imgRecaptcha").attr("src",e)}),s("#recaptchaval").val(e.data)},error:function(){}})})}),0==s(".form-recaptcha #recaptchaval").length&&(s(".form-recaptcha").append('<input id="recaptchaval" type="hidden" name="captchaKey" ng-model="formData.captchaKey" value="'+t+'" readonly/>'),s(".form-recaptcha").append('<input type="hidden" name="domainurl" value="'+n+'" readonly/>')),1<s('input[name="SUBMISSION_DATE"]').length&&s('input[name="SUBMISSION_DATE"]').not(":last").remove(),s("#imgRecaptcha, .captcha-refresh").on("keyup",function(e){13===e.keyCode&&e.target.click()})})}):(i=o,s.ajax({type:"POST",url:i,dataType:"json",contentType:"application/json",data:{},success:function(e){}}).then(function(e){var t=e.message,e=(sessionStorage.setItem("secretKey",t),u(a,e));s(".form-recaptcha .input-field .captcha-wrap ").remove(),s("input[name=captchaKey]").remove(),s("input[name=domainurl]").remove(),s(".form-recaptcha .input-field").append('<div class="captcha-wrap"><img id="imgRecaptcha" style="-webkit-user-select: none" src="'+e+'" crossorigin="anonymous">'+r+"</div>"),0==s(".form-recaptcha #recaptchaval").length&&(s(".form-recaptcha").append('<input id="recaptchaval" type="hidden" name="captchaKey" value="'+t+'" readonly/>'),s(".form-recaptcha").append('<input type="hidden" name="domainurl" value="'+n+'" readonly/>')),1<s('input[name="SUBMISSION_DATE"]').length&&s('input[name="SUBMISSION_DATE"]').not(":last").remove(),s("#imgRecaptcha, .captcha-refresh").on("click",function(){s.ajax({type:"POST",url:o,dataType:"json",contentType:"application/json",data:{},success:function(e){sessionStorage.setItem("secretKey",e.message);var t=u(a,e);s("#imgRecaptcha").attr("src",t),s("#recaptchaval").val(e.message)},error:function(){}})}),s("#imgRecaptcha, .captcha-refresh").on("keyup",function(e){13===e.keyCode&&e.target.click()})}))}return e.init=function(){s(".form-recaptcha").each(function(e){t(e)})},e}),define("form/component.form.recaptchav2",["jquery","configurationProvider"],function(e,t){var a={init:function(){a.GLOBAL_MARKET_CONF=t.get(e("#global-market-configuration")),window.onRecaptchaPreRender=function(){var e=document.querySelector("#captchaDiv");e&&a.GLOBAL_MARKET_CONF&&a.GLOBAL_MARKET_CONF.sitekey&&(e.setAttribute("data-sitekey",a.GLOBAL_MARKET_CONF.sitekey),e.setAttribute("data-size","invisible"),e.setAttribute("data-badge","inline"))},window.onRecaptchaRender=function(){window.verifiedHuman=!1},window.onRecaptchaExpiredOrErrored=function(){window.verifiedHuman=!1},window.verifyCaptchaCallback=function(e){window.verifiedHuman=!0;var t=document.querySelectorAll(".form-group-input");[].slice.call(t).forEach(function(e){e.querySelector(".recaptchaV2")&&e.querySelector(".form-submit .cta-button")?e.querySelector(".form-submit .cta-button").click():e.querySelector(".recaptchaV2")&&e.querySelector(".form-submit .fds-submit-button")&&e.querySelector(".form-submit .fds-submit-button").click()})}}};return a}),define("form/component.form.checkboxcarousel",["jquery","jquery-flexslider","marketConfigGlobal"],function(h,e,n){var t={};function o(e){var t,i=h(e).find(".carousel"),a=h(e).find(".carousel-slide"),n=!1,o=0;function r(e){o++,e.closest(".checkbox-carousel-wrap").removeClass("end")}function l(e){e.resize(),e.find(".carousel-previous").addClass("inactive")}function s(e){e.find(".carousel-btn").removeClass("inactive"),0===e.animatingTo&&e.find(".carousel-previous").addClass("inactive"),e.animatingTo==e.count-1&&e.find(".carousel-next").addClass("inactive")}function c(e){!n&&0===e.currentSlide&&1<=o&&(e.vars.slideshow=!1,e.flexslider("stop")),e.find(".flex-control-nav li:last-child a").hasClass("flex-active")?e.find(".flex-viewport").addClass("end"):e.find(".flex-viewport").removeClass("end")}function d(){n=!0,i.flexslider("stop")}function u(){var e=h(window).width(),e=e<=480?i.closest(".form-checkbox-carousel").hasClass("full-image")?1:2:480<e&&e<900?3:4;return e}t=0<h(".rtl").length?{controlsContainer:i.find("> .carousel-controls"),selector:".slide-container > .carousel-slide",animation:"slide",animationLoop:!1,directionNav:!1,pauseOnHover:!0,slideshow:!1,itemWidth:310,itemMargin:0,start:l,end:r,rtl:!0,before:s,after:c,useCSS:!1,minItems:u(),maxItems:u()}:{controlsContainer:i.find("> .carousel-controls"),selector:".slide-container > .carousel-slide",animation:"slide",animationLoop:!1,directionNav:!1,pauseOnHover:!0,slideshow:!1,itemWidth:310,itemMargin:0,start:l,end:r,before:s,after:c,useCSS:!1,minItems:u(),maxItems:u()},i.flexslider(t),h(window),t=i.parents(".overlay-content"),i.find(".carousel-previous").unbind("click").click(function(e){e.preventDefault(),h(this).closest(".carousel").flexslider("prev"),d()}),i.find(".carousel-next").unbind("click").click(function(e){e.preventDefault(),h(this).closest(".carousel").flexslider("next"),d()}),t.off("click").find(".carousel-previous").unbind("click").click(function(e){e.preventDefault(),h(this).closest(".carousel").flexslider("prev"),d()}),t.off("click").find(".carousel-next").unbind("click").click(function(e){e.preventDefault(),h(this).closest(".carousel").flexslider("next"),d()}),i.on("click",function(){d()}),i.on("keydown",function(e){var t=e.keyCode||e.which,a=i.data("flexslider");9===t&&(i.flexslider("stop"),e.shiftKey?0!==a.currentSlide&&(i.flexslider("prev"),e.preventDefault()):a.currentSlide===a.pagingCount-1||e.target.classList.contains("item-content")||(i.flexslider("next"),e.preventDefault()))}),(t=h(window)).width()<=480&&a.length<=2&&h(e).addClass("not-hidden-item"),480<t.width()&&t.width()<900&&a.length<=3&&h(e).addClass("not-hidden-item"),900<=t.width()&&a.length<=4&&h(e).addClass("not-hidden-item")}function a(){h(".form-checkbox-carousel .item-content").on("click",function(e){e.preventDefault(),e.stopImmediatePropagation();var e=h(this).closest(".form-checkbox-carousel"),t=h(this).find('input[type="checkbox"]'),a=h(this).find("label"),i=e.find(".allcheckbox"),n=e.find(".checkboxAllVal"),e=e.find("input[name=downloadBrochurePath]"),o=h(this).find(".hiddenModelDesc"),r=navigator.userAgent.toLowerCase(),l="ipad"==r.match(/ipad/i),s="iphone os"==r.match(/iphone os/i),c="midp"==r.match(/midp/i),d="rv:1.2.3.4"==r.match(/rv:1.2.3.4/i),u="ucweb"==r.match(/ucweb/i),p="android"==r.match(/android/i),m="windows ce"==r.match(/windows ce/i),r="windows mobile"==r.match(/windows mobile/i),l=((l||s||c||d||u||p||m||r)&&h(this).find(".hiddenMobileInput").val().trim()?h(this).find(".hiddenMobileInput"):h(this).find(".hiddenInput")).val(),s=(t.prop("checked")?(t.prop("checked",!1),a.removeClass("checked"),o.prop("disabled",!0),e.length&&e.val("")):(i.removeClass("checked"),n.prop("checked",!1),t.prop("checked",!0),a.addClass("checked"),o.removeAttr("disabled"),e.length&&e.val(l)),t);h("input[name=downloadBrochurePath]").length&&void 0!==(c=h("body").find(".checkboxCarousel .hidden-field-validation input").attr("data-validation"))&&(c=JSON.parse(c).rules[0].message,h(".config").find("#brochureError").remove(),h("input[name=downloadBrochurePath]").closest(".input-field").hide(),s.prop("checked")||(h(".config").append("<div id='brochureError' style='color:red; display:block'>"+c+" </div>"),h("input[name=downloadBrochurePath]").closest(".input-field").show()))})}function f(e,t,a){var i=document.querySelectorAll(t),n=0;if(e=parseInt(e),i.length)for(;n<i.length;n++){var o=i[n];"none"!==window.getComputedStyle(o).display&&(a&&(e+=1),o.setAttribute("tabindex",e))}return e}function r(e){var t,a,i,r=h(e).find(".carousel").data("flexslider"),l=!1,e=".overlay-content",s=".form-checkbox-carousel .item-content",n=".form-checkbox-carousel .carousel .carousel-controls a",o='label[for="brochureBtn-download-brochure"], label[for="brochureBtn-home-delivery"], label[for="COMMENTS-download-brochure"]',c=h(e),d=h(".form-checkbox-carousel"),u=h(o),p=h(n),m=h(s),c=!!c.length;f(-1,".overlay-content",!1),f(-1,s,!1),f(-1,".form-checkbox-carousel .item-content .checkboxAllVal",!1),t=f(100,".overlay-content .overlay-close",c),t=f(t,n,c),f(t,o,c),c&&(n='[tabindex]:not([tabindex="-1"]',h(t=e).off("keydown"),o=h(".overlay-container"),a=(n=n?o[0].querySelectorAll(n):o[0].querySelectorAll('button, [href], input, select, textarea, li, a,[tabindex]:not([tabindex="-1"])'))[0],i=n[n.length-1],h(t).on("keydown",function(e){"Tab"===e.key&&(e.shiftKey&&e.target===a&&(e.preventDefault(),i.focus()),e.shiftKey||e.target!==i||(e.preventDefault(),a.focus()))}),l={first:a,last:i}),d.on("keydown",function(e){e.target.classList.contains("item-content")&&"Enter"===e.key&&e.target.click()}),p.on("keydown",function(e){var t,i,n,o;"Tab"!==e.key&&"Enter"!==e.key||(f(-1,s,!1),!e.shiftKey&&r.currentSlide<r.pagingCount-1?p[r.currentSlide+1].focus():e.shiftKey&&0<r.currentSlide&&p[r.currentSlide-1].focus()),"Enter"===e.key&&(t=parseInt(e.target.getAttribute("tabindex")),e=m.length,i=Math.min(e-1,4*(r.currentSlide+1)-1),o=n=i-3,m.off("keydown"),m.each(function(a){n<=a&&a<=i&&(h(this)[0].setAttribute("tabindex",t+1),h(this).on("keydown",function(e){var t;e.shiftKey||"Tab"!==e.key?e.shiftKey&&"Tab"===e.key&&(e.preventDefault(),e.stopImmediatePropagation(),(a===n&&l?(f(-1,s,!1),l.first):m[--o]).focus()):(o++,a===i&&(e.preventDefault(),e.stopImmediatePropagation(),t=p[r.currentSlide+1],("Tab"===e.key&&t?t:u[0]).focus()))}))}),m[n].focus())}),u.on("keydown",function(e){"Enter"===e.key&&e.target.click()})}function l(e,t){t=t||window.location.href,e=new RegExp("[?&]"+e+"=([^&#]*)","i").exec(t);return e?e[1]:null}return t.init=function(i){var e=h(".form-checkbox-carousel");e.length&&(a(),e.each(function(){var e,t,a;t=i?l("nameplate",i):l("nameplate"),o(this),e=this,t=t,a=n.getCurrentMarketCode(),void 0!==t&&!1!==t&&null!==t&&""!==t?h(e).find("."+t).closest(".item-content").length&&!h(e).find("."+t).closest(".item-content").find(".allcheckbox.checked").length&&h(e).find("."+t).closest(".item-content").trigger("click"):"th"==a||h(e).find(".item-content .checked").length||h(e).find(".item-content").first().trigger("click"),h("[data-attribute-aa=isActiveAAEnhancement]").length&&1020<h(window).width()&&r(this)}))},t}),define("form/component.form.radiobuttonsbrochure",["jquery","analytics/analyticsEventLayer","isAuthor","detect-ie","overlay/component.overlay","marketConfigGlobal"],function(u,p,r,e,a,m){var t={},h=e.version();function f(e,t,a,i){var n=(e=>{var t,a;return r?void 0!==e&&!1!==e?(a=t="",-1<e.indexOf("#")?(t=e.split("#")[0],a=e.split("#")[1],-1<t.indexOf("?")?t+"&wcmmode=disabled#"+a:t+"?wcmmode=disabled#"+a):-1<e.indexOf("?")?e+"&wcmmode=disabled":e+"?wcmmode=disabled"):void 0:e})(u("input[name=downloadSuccessPage]").val()+".html?brochureLinkPath="+e),o=u(".overlay-container").is(":visible"),e=window.location.origin+(a?a.split(".")[0]+".html?imgsrc="+i:""),a=encodeURIComponent(e);try{FPS.set([FPS.lib.ActionNameplate("Year","Ford",t,FPS.actions.RequestBrochure,a)],{success:function(){o?l(n):window.location=n},error:function(e){console.warn(e),o?l(n):window.location=n}})}catch(e){console.warn(e)}p.getFormWizardEvents().formComplete(!0)}function l(e){var t="#/overlay"+e;a.overlays[a.overlays.length-1].hideOverlay(),a.overlays[a.overlays.length-1].showInitPreloader(),setTimeout(function(){window.location.hash=t,a.overlays[a.overlays.length-1].getHashUrl()},1e3)}function i(e){var d,e=u(e).find(".config");e.data();(d=e).find("label").off("click").on("click",function(){var e=!0,t=u("body").find(".checkboxCarousel .item-content .checked "),a=u("body .overlay-content-inner .checkboxCarousel"),i=u("body").find(".checkboxCarousel .hidden-field-validation input").attr("data-validation");if(void 0!==i&&(n=JSON.parse(i).rules[0].message),0<!t.length&&0<a.length)u(".config").find("#brochureError").remove(),u(".config").append("<div id='brochureError' style='color:red; display:block'>"+n+" </div>");else{i=u("input[name=downloadBrochurePath]").val();if(void 0!==i&&null!=i&&""!=i){u(this).attr("disabled",!0),u(".config").find("#brochureError").remove();var a=d.find(".radio-button-hidden").attr("name"),n=u("#"+a+"-download-brochure"),o=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);if(void 0!==n&&null!=n)if(u(this).closest("li").find('input[type="radio"]').attr("id")==a+"-download-brochure"){var n=t.find(".nameplateDetails"),a=n.data("nameplatelabel"),r=n.data("nameplatepath"),n=n.data("nameplateimage");if(h)window.open(i,"_blank");else{var l=i.replace(/^.*[\\\/]/,""),s=document.createElement("a");if(s.href=i,s.target="_blank",o)window.open(i);else{s.download=l;try{var c=document.createEvent("MouseEvents");c.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),s.dispatchEvent(c)}catch(e){window.open(i,"_blank")}(window.URL||window.webkitURL).revokeObjectURL(s.href)}}f(i,a,r,n)}else{o=m.getCurrentMarketCode();-1<u.inArray(o,["au","nz","vn"])&&(e=!1)}l=t.find("[analytics-nameplate]").attr("analytics-nameplate"),c=t.find("[analytics-modelyear]").attr("analytics-modelyear");e&&p.getDownloadEvents().trackPdfBrochureDownload(i,l,c)}}})}return t.init=function(){u(".form-radioButtons.buttons").each(function(e,t){i(t)})},t}),define("form/component.form.radiobuttons",["jquery"],function(a){var e={};_.template('<% if (items.length) { %>\t<ul>    \t<% _.forEach(items, function (item) { %>  \t\t<li>       \t <input type="radio"\t            value="<%- item.value %>"               name="<%- name %>"               id="<%- name %>-<%- item.value %>">\t        <label for="<%- name %>-<%- item.value %>"><%- item.label %></label>   \t </li>  \t \t <% }); %>\t</ul><% } %>');return e.init=function(){a(".form-radioButtons.radio-button").each(function(e,t){a(t).find(".config").find('input[type="radio"]').on("click",function(){var e=a(this).val();a(this).closest(".radioButtons .radio-button").find('> .config input[type="hidden"]').val(e)})})},e}),define("form/component.form.checkbox",["jquery","_"],function(o,e){var t={};function a(){var e=navigator.userAgent.toLowerCase();return-1!=e.indexOf("msie")&&parseInt(e.split("msie")[1])}function i(e){var t=o("#CONTACT_PERMISSION_CODE");if(1==e){t.prop("checked",!1);for(var a=!0,i=1;i<5;i++)o("#CONTACT_PERMISSION_OPTION"+i+"_CODE").prop("checked")||(a=!1);a&&o("#acknowledge").prop("checked",!0),t.prop("disabled",!1)}else{for(var n=!0,i=1;i<5;i++)o("#CONTACT_PERMISSION_OPTION"+i+"_CODE").prop("checked")&&(n=!1);n&&(t.prop("checked",!0),t.prop("disabled",!0)),o("#acknowledge").prop("checked",!1)}}return t.initOnIE=function(){a()&&a()<9&&(o('.form-checkbox input[type="checkbox').each(function(){o(this).prop("checked")&&o(this).siblings("label").addClass("checked")}),o(".form-checkbox label").on("click",function(){o(this).toggleClass("checked")}))},t.init=function(){var n,e;o(".checkbox .form-checkbox").each(function(){var a=o(this).find("input[type=checkbox]").attr("name"),e=o(this).find("input[type=checkbox]"),t=o(this).find("input[type=checkbox]").attr("data-set-defaultchecked");(t="false"!=t)&&e.prop("checked",!0),""==e.attr("data-parent")&&(t?o(".form-fields-group").each(function(){o(this).attr("data-referenced-variable")==a&&o(this).closest(".fieldsGroup").hide()}):o(".checkbox .form-checkbox").each(function(){o(this).find("input[type=checkbox]").attr("data-parent")==a&&o(this).find("input[type=checkbox]").prop("checked",!1)})),""!=e.attr("data-parent")&&(t=e.attr("data-parent"),n=o("input[name='"+t+"']").val()),o(this).find("input[type=checkbox]").click(function(){var e,t;""==o(this).attr("data-parent")&&(e=o(this).is(":checked"),t=o(this).hasClass("checked-parent"),o(this).removeClass("checked-parent"),e?(n&&o(this).val(n),o(".form-fields-group").each(function(){o(this).attr("data-referenced-variable")==a&&o(this).closest(".fieldsGroup").hide()})):t?(o(".form-fields-group").each(function(){o(this).attr("data-referenced-variable")==a&&o(this).closest(".fieldsGroup").hide()}),n&&o(this).val(n),o(this).prop("checked",!0)):o(".form-fields-group").each(function(){o(this).attr("data-referenced-variable")==a&&(o(this).closest(".fieldsGroup").show(),o(".checkbox .form-checkbox").each(function(){o(this).find("input[type=checkbox]").attr("data-parent")==a&&(o(this).find("input[type=checkbox]").prop("checked",!1),o(this).find("input[type=checkbox]").removeAttr("disabled"),o(this).find("input[type=checkbox]").removeClass("un-checked-parent"))}))}))})}),o(".fieldsGroup .checkbox .form-checkbox").each(function(){o(this).find("input[type=checkbox]").click(function(){var e,t,a=o(this).attr("data-parent"),i=o(this).attr("data-set-parent-value"),i=(o(this).attr("name"),"false"!=i);""!=a&&(e=o(".checkbox").find("input[name="+a+"]"),t=o(this).hasClass("un-checked-parent"),i)&&(t?(o(this).prop("checked",!1),n&&e.attr("value",n),e.prop("checked",!1),e.removeClass("checked-parent"),o(this).removeClass("un-checked-parent"),o(".checkbox .form-checkbox").each(function(){o(this).find("input[type=checkbox]").attr("data-parent")==a&&o(this).find("input[type=checkbox]").removeAttr("disabled")})):(e.attr("value",o(this).attr("value")),e.prop("checked",!0),e.addClass("checked-parent"),o(this).addClass("un-checked-parent"),o(".checkbox .form-checkbox").each(function(){o(this).find("input[type=checkbox]").attr("data-parent")==a&&(o(this).find("input[type=checkbox]").prop("checked",!1),o(this).find("input[type=checkbox]").attr("disabled","disabled"))}),o(this).prop("checked",!1)),o(this).removeAttr("disabled"))})}),o(".checkbox .form-checkbox").each(function(){"true"===o(this).find("input[type=checkbox]").attr("data-set-copylink")&&(0<o(this).find("a").length&&!o(this).find("input[type=checkbox]").is(":checked")&&(o(this).find("input[type=checkbox]").attr("disabled","disabled"),o(this).find("label").addClass("disabled")),o(this).find("a").click(function(){"false"===o(this).closest("fieldset").find("input[type=checkbox]").attr("data-always-disabled")&&(o(this).closest(".checkbox .form-checkbox").find("input[type=checkbox]").removeAttr("disabled"),o(this).closest(".checkbox .form-checkbox").find("label").removeClass("disabled"),o(this).closest("fieldset").find("input[type=checkbox]").is(":checked")?o(this).closest("fieldset").find("input[type=checkbox]").prop("checked",!1):o(this).closest("fieldset").find("input[type=checkbox]").prop("checked",!0))}))}),(e=o("#CONTACT_PERMISSION_CODE").attr("data-send-contact-permission-code"))&&"false"!==e||o("#CONTACT_PERMISSION_CODE").on("click",function(){1==o(this).prop("checked")?(o(this).prop("disabled",!0),o("#acknowledge").prop("checked",!1),o("#CONTACT_PERMISSION_OPTION1_CODE").prop("checked",!1),o("#CONTACT_PERMISSION_OPTION2_CODE").prop("checked",!1),o("#CONTACT_PERMISSION_OPTION3_CODE").prop("checked",!1),o("#CONTACT_PERMISSION_OPTION4_CODE").prop("checked",!1)):o("#acknowledge").prop("checked")||o("#CONTACT_PERMISSION_CODE").prop("checked",!0)}),o("#acknowledge").on("click",function(){var e=o(this).prop("checked");o("#CONTACT_PERMISSION_OPTION1_CODE").prop("checked",e),o("#CONTACT_PERMISSION_OPTION2_CODE").prop("checked",e),o("#CONTACT_PERMISSION_OPTION3_CODE").prop("checked",e),o("#CONTACT_PERMISSION_OPTION4_CODE").prop("checked",e),o("#CONTACT_PERMISSION_CODE").prop("checked",!e)}),o("#CONTACT_PERMISSION_OPTION1_CODE").on("click",function(){i(o(this).prop("checked"))}),o("#CONTACT_PERMISSION_OPTION2_CODE").on("click",function(){i(o(this).prop("checked"))}),o("#CONTACT_PERMISSION_OPTION3_CODE").on("click",function(){i(o(this).prop("checked"))}),o("#CONTACT_PERMISSION_OPTION4_CODE").on("click",function(){i(o(this).prop("checked"))}),this.initOnIE()},t}),define("form/component.form.paymentDetails",["jquery","_","marketConfigGlobal"],function(c,e,t){var a={},i=c("#payment_form-container").data("clienttoken"),n=(c("#payment-form"),c("#braintree__card-view-input__cardholder-name")),o=angular.element(".js-submit-payment"),r=angular.element(".js-purchase-payment"),d=(angular.element(".js-back"),o.hide(),r.show(),require({paths:{braintreeAPI:"https://js.braintreegateway.com/web/dropin/1.9.2/js/dropin.min"}}),void 0!==i&&0<i.length?require(["braintreeAPI"],function(e){e.create({authorization:i,container:"#bt-dropin",card:{cardholderName:{selector:n,required:!0}},paypal:{flow:"vault"}},function(e,t){t.on("noPaymentMethodRequestable",function(){o.hide(),r.show()}),r.on("click",function(e){e.preventDefault(),t.requestPaymentMethod(function(e,t){void 0!==t.nonce&&(document.querySelector("#nonce").value=t.nonce,navigator.userAgent.match(/Trident.*rv\:11\./)?setTimeout(function(){r.hide(),o.show(),c("html, body").animate({scrollTop:0},"slow")},300):setTimeout(function(){r.hide(),o.show(),c("html, body").animate({scrollTop:0},"slow")},100))}),c("[data-error-payment]").remove(),0<c('.braintree-sheet--has-error[data-braintree-id="sheet-container"]').length&&0===c("[data-error-payment]").length&&""!==c('[data-braintree-id="methods-container"]').text()&&c('[data-braintree-id="sheet-container"]').prepend('<p data-error-payment style="color: #CA2A2A; margin: 0 15px 0 12px; font-size: 16px;font-weight: 300;">Please either click <b> Paying with Card </b> (above) to use your existing card details or </br> <b>Enter Your Credit Card Details</b> (below)</p>'),c('.braintree-sheet--has-error[data-braintree-id="sheet-container"]').length&&c('[data-braintree-id="sheet-error"]').remove()})})}):(c("#testDriveFormId").css("margin","0 auto"),c("#buttonBox").find(".js-purchase-payment").css({background:"#f4f4f3",border:"#f4f4f3",color:"#1b394e",cursor:"no-drop"}),c("#bt-dropin").html('<h3 style="text-align:center;margin:50px 0">Unable to proceed due to payment gateway issue, try again later</h3>')),c("#buttonBox button").click(function(){c(".payment-error-message").hide()}),c("input[name=formSubmitDomainUrl]").val());function u(e,t,a,i){c.ajax({url:d+"/fordleads/leads/onlineBooking/holdBooking",type:"GET",async:!0,dataType:"json",data:{campaignId:e,modelKey:t,marketName:a,userCacheId:i},success:function(e){window.localStorage.getItem("userCacheId")!=e.userCacheId&&window.localStorage.setItem("userCacheId",e.userCacheId)},error:function(e){console.log(e)}})}return c("body").on("click","#testDriveFormId .summary-sub-sec .form-next .cta-button",function(){"au"!==t.getCurrentMarketCode()&&"nz"!==t.getCurrentMarketCode()||0<c('input[name="INDIVIDUAL_CUST_FIRST_NAME"]').length&&0<c('input[name="INDIVIDUAL_CUST_LAST_NAME"]').length&&(e=c('input[name="INDIVIDUAL_CUST_FIRST_NAME"]').val()+" "+c('input[name="INDIVIDUAL_CUST_LAST_NAME"]').val(),c("#braintree__card-view-input__cardholder-name").val(e));var e,n=c('input[name="n"]').val(),o=c("#global-market-configuration span").data("iso3-market-code"),r=c('input[name="CAMPAIGN_ID"]').val(),l=window.localStorage.getItem("userCacheId"),s=window.location.origin+c(".online-booking-model-details-wrapper").data("out-of-stock-path")+".html";c.ajax({url:d+"/fordleads/leads/onlineBooking/stockAvailable",type:"GET",async:!0,dataType:"json",data:{modelKey:n,marketName:o},success:function(e){var t,a,i;"023"===e.status&&e.stock<=0?window.location.replace(s):l?u(r,n,o,l):(e={campaignId:t=r,modelKey:a=n,marketName:i=o},c.ajax({url:d+"/fordleads/leads/onlineBooking/holdBooking",type:"GET",async:!0,dataType:"json",data:e,success:function(e){e.userCacheId&&(window.localStorage.setItem("userCacheId",e.userCacheId),u(t,a,i,e.userCacheId))},error:function(e){console.log(e)}}))},error:function(e){console.log(e)}})}),a.init=function(){},a}),define("form/component.form.rangeslider",["jquery","range-slider","isAuthor"],function(m,e,t){var a={},h=t.getAuthorStatus();function l(e,t,a,i,n,o,r){var l=m(e).find(".rs-wrap"),e=m(e).find(".range-slider-wrap"),s=e.siblings(".range-amount"),c=e.siblings(".rs-txt"),d="",u="",p="";!0===i&&(d=a),!0===o&&(u=n),h||(p=(void 0!==r?(e.slider({range:!0,min:r,max:t,values:[r,t],slide:function(e,t){s.val(d+t.values[0]+u+" - "+d+t.values[1]+u),c.html(a+t.values[0]+n+" - "+a+t.values[1]+n)}}),s.val(d+e.slider("values",0)+u+" - "+d+e.slider("values",1)+u),c.html(a+e.slider("values",0)+n+" - "+a+e.slider("values",1)+n)):(e.slider({range:!0,max:t,slide:function(e,t){s.val(d+t.value+u),c.html(a+t.value+n)}}),s.val(d+e.slider("value")+u),c.html(a+e.slider("value")+n)),c.width()+35),c.css("min-width",p),l.css("padding-right",p))}return a.init=function(){m(".form-range-slider").each(function(){var e=m(this).data("slide-type"),t=m(this).data("slide-symbol"),a=m(this).data("fill-symbol-to-value"),i=m(this).data("slide-unit"),n=m(this).data("fill-unit-to-value"),o=m(this).data("slide-min"),r=m(this).data("slide-max");"single-slider"===e&&""!==r&&"NaN"!=parseInt(r)&&(m(this).addClass("single-slider"),l(m(this),r,t,a,i,n)),"ranger-slider"===e&&""!==o&&"NaN"!=parseInt(o)&&""!==r&&"NaN"!=parseInt(r)&&l(m(this),r,t,a,i,n,o)})},a}),define("form/component.form.modelservicedropdown",["jquery","isAuthor"],function(s,e){var t={},c=!e.getAuthorStatus();return t.init=function(e){s(e).each(function(e,t){var n,o,a,i,r,l;a=s(n=t).find(".configuration").data(),i=".form-model-dropdown select",r=".form-series-dropdown select",a&&(o=a.serieslist),c?s(n).find(i).on("change",function(e){var i=e.val;""===i||"NA"===i?(""===s(r).find("option").eq(0).val()?s(n).find(r).html(s(r).find("option").eq(0)):s(n).find(r).html(""),s(n).find(r).trigger("change"),s(n).find(r).select2("enable",!1)):s.each(o,function(e,t){var a;t.key===i&&(s(n).find(r).select2("enable",!0),""===s(r).find("option").eq(0).val()?s(n).find(r).html(s(r).find("option").eq(0)):s(n).find(r).html(""),a=t.city.length,s.each(t.city,function(e,t){s(n).find(r).append('<option value="'+t.key+'" data-match="'+t.key+" "+t.value+'">'+t.value+"</option>"),e===a-1&&s(n).find(r).trigger("change")}))})}):s(n).find(i).change(function(){var a=s(this).val();s.each(o,function(e,t){t.key===a&&(s(n).find(r).prop("disabled",!1),""===s(r).find("option").eq(0).val()?s(n).find(r).html(s(r).find("option").eq(0)):s(n).find(r).html(""),s.each(t.city,function(e,t){s(n).find(r).append(new Option(t.value,t.key))}))})}),l=t,setTimeout(function(){var e,t,a=".form-series-dropdown select",i=s(l).find(".form-model-dropdown select").attr("data-preselect"),n=s(l).find(a).attr("data-preselect");""!==i&&((e=s(l).find(".configuration").data())&&(t=e.serieslist),s.each(t,function(e,t){t.key===i&&s.each(t.city,function(e,t){s(l).find(a).append(new Option(t.value,t.key))})}),s(l).find(a).prop("disabled",!1),s(l).find(a).find("option").prop("selected",!1),s(l).find(a).find("option[value="+n+"]").length)&&(s(l).find(a).find('option[value="'+n+'"]').prop("selected",!0),c)&&(s(l).find(a).select2("enable",!0),s(l).find(a).select2("val",n),s(l).find(a).trigger("change"))},1e3)})},t}),define("form/component.form.preferreddealerdropdown",["jquery","isAuthor","marketConfigGlobal"],function(d,e,i){var t={},u=!e.getAuthorStatus();function p(e,t,a){d(e).find(t).append('<option value="'+a.key+'" data-match="'+a.term+" "+a.value+'">'+a.value+"</option>")}return t.init=function(){d(".preferredDealerdropdown").each(function(e,t){var n,o,r,l,s,c,a;(a=d(n=t).find(".configuration").data())&&(o=a.dealerlist),d(n).find(".form-province-dropdown select").change(function(){var a=d(this).val();d.each(o,function(e,t){t.key===a&&(d(n).find(".form-city-dropdown select").prop("disabled",!1),""===d(".form-city-dropdown select").find("option").eq(0).val()?d(n).find(".form-city-dropdown select").html(d(".form-city-dropdown select").find("option").eq(0)):d(n).find(".form-city-dropdown select").html(""),""===d(".form-preferred-dealer-dropdown select").find("option").eq(0).val()?d(n).find(".form-preferred-dealer-dropdown select").html(d(".form-preferred-dealer-dropdown select").find("option").eq(0)):d(n).find(".form-preferred-dealer-dropdown select").html(""),d.each(t.city,function(e,t){p(n,".form-city-dropdown select",t)}))}),0<d(n).find(".form-city-dropdown select").length&&d(n).find(".form-city-dropdown select").select2("val",""),""==a&&d(n).find(".form-city-dropdown select").prop("disabled",!0),0<d(n).find(".form-preferred-dealer-dropdown select").length&&d(n).find(".form-preferred-dealer-dropdown select").select2("val",""),d(n).find(".form-preferred-dealer-dropdown select").prop("disabled",!0)}),d(n).find(".form-city-dropdown select").change(function(){var a=d(n).find(".form-province-dropdown select").val(),i=d(this).val();d.each(o,function(e,t){t.key===a&&d.each(t.city,function(e,t){t.key===i&&(d(n).find(".form-preferred-dealer-dropdown select").prop("disabled",!1),""===d(".form-preferred-dealer-dropdown select").find("option").eq(0).val()?d(n).find(".form-preferred-dealer-dropdown select").html(d(".form-preferred-dealer-dropdown select").find("option").eq(0)):d(n).find(".form-preferred-dealer-dropdown select").html(""),d.each(t.dealer,function(e,t){p(n,".form-preferred-dealer-dropdown select",t)}))})}),0<d(n).find(".form-preferred-dealer-dropdown select").length&&d(n).find(".form-preferred-dealer-dropdown select").select2("val",""),""==i&&d(n).find(".form-preferred-dealer-dropdown select").prop("disabled",!0)}),"th"===i.getCurrentMarketCode()&&(r=!0,FPS.get([{PreferredDealer:{}}],{success:function(e){if(console.log(e),0<e[0].PreferredDealer.length){l=e[0].PreferredDealer[0]._paCode;for(var t=0;t<o.length;t++){for(var a=0;a<o[t].city.length;a++){for(var i=0;i<o[t].city[a].dealer.length;i++){if(l==o[t].city[a].dealer[i].key){d(n).find(".form-province-dropdown select").val(o[t].key).trigger("change"),d(n).find(".form-city-dropdown select").val(o[t].city[a].key).trigger("change"),d(n).find(".form-preferred-dealer-dropdown select").val(o[t].city[a].dealer[i].key).trigger("change"),r=!1;break}if(!1===r)break}if(!1===r)break}if(!1===r)break}}},error:function(e){console.log(e)}})),(a=d(s=t).find(".configuration").data())&&(c=a.dealerlist),setTimeout(function(){var a=d(s).find(".form-province-dropdown select").attr("data-preselect"),i=d(s).find(".form-city-dropdown select").attr("data-preselect");d.each(c,function(e,t){t.key===a&&(d(s).find(".form-city-dropdown select").prop("disabled",!1),d.each(t.city,function(e,t){d(s).find(".form-city-dropdown select").append(new Option(t.value,t.key))}),d(s).find('.form-city-dropdown option[value="'+i+'"]').length)&&(d(s).find(".form-city-dropdown").find("option").prop("selected",!1),d(s).find('.form-city-dropdown option[value="'+i+'"]').prop("selected",!0),u)&&(d(s).find(".form-city-dropdown select").select2("val",i),d(s).find(".form-city-dropdown select").select2("enable",!0),d(s).find(".form-city-dropdown select").trigger("change"))})},500),setTimeout(function(){var a=d(s).find(".form-province-dropdown select").attr("data-preselect"),i=d(s).find(".form-city-dropdown select").attr("data-preselect"),n=d(s).find(".form-preferred-dealer-dropdown select").attr("data-preselect");d.each(c,function(e,t){t.key===a&&d.each(t.city,function(e,t){t.key===i&&(d(s).find(".form-preferred-dealer-dropdown select").prop("disabled",!1),d.each(t.dealer,function(e,t){d(s).find(".form-preferred-dealer-dropdown select").append(new Option(t.value,t.key))}),d(s).find('.form-preferred-dealer-dropdown option[value="'+n+'"]').length)&&(d(s).find(".form-preferred-dealer-dropdown").find("option").prop("selected",!1),d(s).find('.form-preferred-dealer-dropdown option[value="'+n+'"]').prop("selected",!0),u)&&(d(s).find(".form-preferred-dealer-dropdown select").select2("val",n),d(s).find(".form-preferred-dealer-dropdown select").select2("enable",!0),d(s).find(".form-preferred-dealer-dropdown select").trigger("change"))})})},1e3)})},t}),define("form/component.form.addressfield",["jquery","_"],function(o,e){var t={},r=".addressfield",l=".daum_post_wrap",s=".zipcode_autocomplete",c=".zipcode_autocomplete_addr1",d=".zipcode_autocomplete_addr2",n=".address-hidden-field";function u(e){var t=o(e).closest(r).find(s).val(),a=o(e).closest(r).find(c).val(),i=o(e).closest(r).find(d).val();""!==a&&(a=" - "+a),""!==i&&(i=" - "+i),o(e).closest(r).find(n).val(t+a+i)}function a(e){o(e).on("keyup",function(){u(this)})}function i(){o(".zip_search a").on("click",function(e){var i,n;e.preventDefault(),i=o(this).closest(r),n=Math.max(document.body.scrollTop,document.documentElement.scrollTop),new daum.Postcode({oncomplete:function(e){var t=e.address,a="";"R"===e.addressType&&(""!==e.bname&&(a+=e.bname),""!==e.buildingName&&(a+=""!==a?", "+e.buildingName:e.buildingName),t+=""!==a?" ("+a+")":""),i.find(s).val(e.zonecode),i.find(c).val(t),i.find(d).trigger("focus"),u(i),i.find(l).hide(),document.body.scrollTop=n},onresize:function(e){i.find(l).height(e.height)},width:"100%",height:"100%"}).embed(i.find(l)[0]),i.find(l).show()}),o(".btnFoldWrap").on("click",function(){o(this).closest(l).hide()}),o(r).each(function(){var e,t,a,i;e=o(this),t=e.find(s).val(),a=e.find(c).val(),i=e.find(d).val(),""!==a&&(a=" - "+a),""!==i&&(i=" - "+i),e.find(n).val(t+a+i)})}return a(s),a(c),a(d),o(window).on("onoverlayload",function(){a(s),a(c),a(d)}),t.init=function(){i()},t}),define("form/component.form.autofleetlevel",["jquery","_"],function(r,e){var t={init:function(){var n=0,e=r("input[name='VOI_MAKE_CODE']"),t=r("input[name='VOI_SERIES_DERIVATIVE_CODE']"),o=r(".dropdown select[name='CURRENT_MODEL_CODE_CV']");function a(e){var t=-1!=navigator.userAgent.search("Firefox")?48<=e.charCode&&e.charCode<=57||8===e.which||0===e.which:48<=e.charCode&&e.charCode<=57;t||e.preventDefault()}function i(e,t){var a=0,i=0;e&&(a=parseInt(e)),t&&(i=parseInt(t)),n=a+i,""!==e&&""!==t&&(a="Blue",25<=n?a="Gold":n<=24&&5<=n?a="Silver":n<=4&&0<=n&&(a="Blue"),o.select2("val",a).trigger("change"))}setTimeout(function(){o.select2("readonly",!0)},1e3),e.on("keypress",function(e){a(e)}),t.on("keypress",function(e){a(e)}),e.on("blur",function(){i(e.val(),t.val())}),t.on("blur",function(){i(e.val(),t.val())})}};return t}),define("form/component.form.printButton",["jquery","isAuthor"],function(a,e){var t={init:function(){a(".print-button-form input").on("click",function(){a("html").addClass("print-form"),a("select").each(function(e,t){t=a(t);t.val()||t.parent().find(".select2-container").addClass("select-print-hide")}),setTimeout(function(){window.focus(),window.print()},500)});var e=new Date,t=e.getMonth()<10?"0"+(+e.getMonth().toString()+1):+e.getMonth()+1,t=(e.getDate()<10?"0"+e.getDate().toString():e.getDate())+"/"+t+"/"+e.getFullYear();a(".print-date")[0].innerHTML=t}};return t}),define("form/component.form.fileupload",["jquery"],function(r){var e={init:function(){var o=r("#fileupload");o.change(function(){var e,t=o[0].files.length,a=r(".fileUploadHint"),i=0;if(0===t)a.html("文件不能为空"),r(".fileName").html("");else if(9<t)a.html("最多上传9个文件"),r(".fileName").html("");else{for(var n=0;n<t;n++)if(e=o[0].files[n].size,i+=o[0].files[n].size,5<e/1048576)return a.html("单文件大小不能超过5MB"),void r(".fileName").html("");if(30<i/1048576)a.html("总文件大小不能超过30MB"),r(".fileName").html("");else{r(".fileName").html(""),a.html("");for(n=0;n<t;n++)r(".fileName").append('<p style="margin-bottom:0.3rem">'+o[0].files[n].name+"</p>")}}})}};return e}),define("form/component.form.SMSVerification",["jquery"],function(m){var e={};return e.init=function(){m(".SMSVerification ").css({display:"none"});var a=m(".smsInput .input-field input"),i=m(".recaptcha .input-field input"),n=m(a).data("validation"),o=m(i).data("validation"),r=m("#initialWords").val(),l=m("#reprint").val(),s=m("#countdown").val(),c=m("#sendFailure").val(),d=m("#invalidPhoneNumber").val(),u=s,p=m(".smsInput").data("smsmodeldata"),e=m("input[name=formSubmitDomainUrl]").val();"true"==m("input[name=usePublicDomain]").val()&&(e=""),m(".sms-button").click(function(){var t=m(".smsInput label");m(t).find("small.error").remove(),m("input[name=mobile]").val()&&0==m(".textfield-mobile .error").length?(m(".sms-button").attr("disabled",!0),m.ajax({type:"GET",url:e+"/fordleads/leads/leadInfo/getSms/"+m("input[name=mobile]").val(),dataType:"json",success:function(e){"002"===e.status?function e(t){{if(0==u)return t.attr("disabled",!1),t.html(r),void(u=s);t.attr("disabled",!0),t.html(l+"("+u+" S)"),u--}setTimeout(function(){e(t)},1e3)}(m(".sms-button")):"003"===e.status?m(".textfield-mobile label").append('<small class="error">'+d+"</small>"):"001"===e.status&&m(t).append('<small class="error">'+c+"</small>"),m(".sms-button").attr("disabled",!1)},error:function(){m(t).append('<small class="error">'+c+"</small>"),m(".sms-button").attr("disabled",!1)}})):(m("input[name=mobile]").trigger("blur"),m("html, body").animate({scrollTop:m("input[name=mobile]").offset().top-100},1e3))}),m("select[name=modelName]").on("change",function(){var e,t=!1;for(e in p)if(m("select[name=modelName]").val()===p[e]){m(".form-recaptcha label").find("small.error").remove(),m(".form-recaptcha label").find(".error").removeClass("error"),m(".SMSVerification").css({display:"block"}),m(".recaptcha").css({display:"none"}),m(i).data("validation",""),m(a).data("validation",n),t=!0;break}t||(m(".smsInput label").find("small.error").remove(),m(".smsInput label").find(".error").removeClass("error"),m(".SMSVerification").css({display:"none"}),m(".recaptcha").css({display:"block"}),m(a).data("validation",""),m(i).data("validation",o))}),m("select[name=modelName]").val()&&m("select[name=modelName]").trigger("change")},e}),define("service-history-Verification/component.serviceHistoryVerification",["jquery","marketConfigGlobal"],function(r,l){var e={};function s(e,t){t?r(".serviceHistory-message").show().find("span").text(e):r(".serviceHistory-message").hide().find("span").text("")}function c(t,a){return Object.keys(a).forEach(function(e){t=t.replace(e,a[e])}),t}return e.init=function(e){e.unbind().on("submit",function(e){var t,a,i,n,o;e.preventDefault(),r(this).find("input").trigger("blur"),r(this).find("input").hasClass("error")||(s("",!1),e=r("#serviceLayerUrl").val(),e=(e="true"==r(this).find('input[name="enablePublicDomain"]').val()?"":e)+"/fordowner/vehicle/users/profiles/serviceHistory",n=r(this),e=e,t=(t=require("cookie").getCookie("OWNER_USERINFO"))&&JSON.parse(t),a=n.find('input[name="firstName"]').val(),i=n.find('input[name="lastName"]').val(),n=n.find('input[name="email"]').val(),r('input[name="popUpFirstName"]').val(a),r('input[name="popUpLastName"]').val(i),r('input[name="popUpEmail"]').val(n),(o={}).firstName=a,o.lastName=i,o.email=n,o.sessionToken=t.sessionToken,o.countryCodeIso2=l.getCurrentMarketCode(),o.vin=t.vehicle[0].vincode,o.pageSize=4,o.currentPage=1,r(".overlay-container .serviceHistory").attr("data-index-value")&&(o.vin=t.vehicle[r(".overlay-container .serviceHistory").attr("data-index-value")].vincode),r.ajax({type:"POST",url:e,dataType:returnJsonTypeBaseonBrowser(),data:o,success:function(e){if(e.result){if(0<r(".history-content").length){var t=r(".history-content")[0].outerHTML,a="",i=e.data;if(i&&i.details){for(var n=0;n<i.details.length;n++){var o=t;a+=o=0<(o=0<(o=0<(o=0<o.indexOf("[@ServiceType]")?c(o,{"[@ServiceType]":i.details[n].serviceType||"-"}):r(".history-content")[n].outerHTML).indexOf("[@Odometer]")?c(o,{"[@Odometer]":i.details[n].odometer||"-"}):r(".history-content")[n].outerHTML).indexOf("[@serviceData]")?c(o,{"[@serviceData]":i.details[n].serviceDate||"-"}):r(".history-content")[n].outerHTML).indexOf("[@serviceDealer]")?c(o,{"[@serviceDealer]":i.details[n].dealerName||"-"}):r(".history-content")[n].outerHTML}r(".history-content").parent().html(a),r(".service-history").css("display","block"),r(".service-history-no-data").hide(),r(".overlay-close").click(),e.dataCount<5?r(".service-history-view-more").hide():r(".service-history-view-more").show()}}}else"SERVICE_HISTORY_NOT_FOUND"!=e.code||e.data?s(e.message,!0):(r(".overlay-close").click(),r(".service-history-no-data").show())},error:function(e){s(e.message,!0)}}))})},e}),define("service-history-search-result/component.serviceHistorySearchResult",["jquery","isAuthor","analytics/analyticsEventLayer","utils/utils.search","marketConfigGlobal"],function(m,e,t,a,c){var i={},n={pageSize:10,prevPage:"Prev",nextPage:"Next",firstPage:"First",lastPage:"Last",degeCount:4,ellipsis:!0};function o(t,n){this.pageSize=t.pageSize||10,this.pageIndex=t.pageIndex||1,this.totalCount=t.totalCount||0,this.totalPage=Math.ceil(t.totalCount/t.pageSize)||0,this.prevPage=t.prevPage||"<",this.nextPage=t.nextPage||">",this.firstPage=t.firstPage||"<<",this.lastPage=t.lastPage||">>",this.degeCount=t.degeCount||3,this.ellipsis=t.ellipsis,this.ellipsisBtn=1==t.ellipsis||null==t.ellipsis?'<li><span class="ellipsis">…</span></li>':"";var o=this;n&&n(this.pageIndex,this.pageSize),m("#page_size").val(this.pageSize),this.initPage=function(e,t,a){this.totalCount=e,this.totalPage=t,this.pageIndex=a;var i=this.degeCount,n="",o="",r="",l="",s="";if(i-1<=a-i&&i+1<=t-a){for(var l='<li><a id="first_page" href="javascript:;">'+this.firstPage+'</a></li><li><a id="prev_page" href="javascript:;">'+this.prevPage+"</a></li>",s='<li><a id="next_page" href="javascript:;">'+this.nextPage+'</a></li><li><a id="last_page" href="javascript:;">'+this.lastPage+"</a></li>",c=i,d=0;d<c;d++)1!=a&&(o+='<li><a href="javascript:;" class="page-number">'+(a-(c-d))+"</a></li>"),r+='<li><a href="javascript:;" class="page-number">'+(+a+d+1)+"</a></li>";n=l+this.ellipsisBtn+o+'<li><a href="javascript:;" class="active">'+a+"</a></li>"+r+this.ellipsisBtn+s}else if(i-1<=a-i&&t-a<i+1){l='<li><a id="first_page" href="javascript:;">'+this.firstPage+'</a></li><li><a id="prev_page" href="javascript:;">'+this.prevPage+"</a></li>",s=a==t?'<li><span id="next_page" href="javascript:;">'+this.nextPage+'</span></li><li><span id="last_page" href="javascript:;">'+this.lastPage+"</span></li>":'<li><a id="next_page" href="javascript:;">'+this.nextPage+'</a></li><li><a id="last_page" href="javascript:;">'+this.lastPage+"</a></li>";var c=i,u=t-a;if(1!=a)for(d=0;d<c;d++)o+='<li><a href="javascript:;" class="page-number">'+(a-(c-d))+"</a></li>";for(d=0;d<u;d++)r+='<li><a href="javascript:;" class="page-number">'+(+a+d+1)+"</a></li>";n=l+this.ellipsisBtn+o+'<li><a href="javascript:;" class="active">'+a+"</a></li>"+r+s}else if(a-i<i-1&&i+1<=t-a){l=1==a?'<li><span id="first_page" href="javascript:;">'+this.firstPage+'</span></li><li><span id="prev_page" href="javascript:;">'+this.prevPage+"</span></li>":'<li><a id="first_page" href="javascript:;">'+this.firstPage+'</a></li><li><a id="prev_page" href="javascript:;">'+this.prevPage+"</a></li>",s='<li><a id="next_page" href="javascript:;">'+this.nextPage+'</a></li><li><a id="last_page" href="javascript:;">'+this.lastPage+"</a></li>";var p=a-1,c=i;if(1!=a)for(d=0;d<p;d++)o+='<li><a href="javascript:;" class="page-number">'+(a-(p-d))+"</a></li>";for(d=0;d<c;d++)r+='<li><a href="javascript:;" class="page-number">'+(+a+d+1)+"</a></li>";n=l+o+'<li><a href="javascript:;" class="active">'+a+"</a></li>"+r+this.ellipsisBtn+s}else if(a-i<i-1&&t-a<i+1){l='<li><a id="first_page" href="javascript:;">'+this.firstPage+'</a></li><li><a id="prev_page" href="javascript:;">'+this.prevPage+"</a></li>",s='<li><a id="next_page" href="javascript:;">'+this.nextPage+'</a></li><li><a id="last_page" href="javascript:;">'+this.lastPage+"</a></li>",1==t?(l='<li><span id="first_page" href="javascript:;">'+this.firstPage+'</span></li><li><span id="prev_page" href="javascript:;">'+this.prevPage+"</span></li>",s='<li><span id="next_page" href="javascript:;">'+this.nextPage+'</span></li><li><span id="last_page" href="javascript:;">'+this.lastPage+"</span></li>"):1==a?(l='<li><span id="first_page" href="javascript:;">'+this.firstPage+'</span></li><li><span id="prev_page" href="javascript:;">'+this.prevPage+"</span></li>",s='<li><a id="next_page" href="javascript:;">'+this.nextPage+'</a></li><li><a id="last_page" href="javascript:;">'+this.lastPage+"</a></li>"):a==t&&(l='<li><a id="first_page" href="javascript:;">'+this.firstPage+'</a></li><li><a id="prev_page" href="javascript:;">'+this.prevPage+"</a></li>",s='<li><span id="next_page" href="javascript:;">'+this.nextPage+'</span></li><li><span id="last_page" href="javascript:;">'+this.lastPage+"</span></li>");p=a-1,u=t-a;if(1!=a)for(d=0;d<p;d++)o+='<li><a href="javascript:;" class="page-number">'+(a-(p-d))+"</a></li>";for(d=0;d<u;d++)r+='<li><a href="javascript:;" class="page-number">'+(+a+d+1)+"</a></li>";n=l+o+'<li><a href="javascript:;" class="active">'+a+"</a></li>"+r+s}m("#page_ul").html(n),m("#total_count").html(e)},m("#page_ul").on("click","a",function(e){var t=m(this),a=t.attr("id"),i=t.attr("class");"first_page"==a?o.pageIndex=1:"prev_page"==a?o.pageIndex=1==o.pageIndex?o.pageIndex:o.pageIndex-1:"next_page"==a?o.pageIndex=o.pageIndex==o.totalPage?o.pageIndex:parseInt(o.pageIndex)+1:"last_page"==a?o.pageIndex=o.totalPage:"page-number"==i&&(o.pageIndex=t.html()),n&&n(o.pageIndex,o.pageSize)}),m("#page_size").change(function(){var e=m(this);o.pageIndex=t.pageIndex=1,o.pageSize=t.pageSize=+e.val(),n&&n(o.pageIndex,o.pageSize)})}return i.init=function(){var s;s=new o(n,function(i,n){m("#servicePage tbody").html("");var e=(e=require("cookie").getCookie("OWNER_USERINFO"))&&JSON.parse(e),t=JSON.parse(sessionStorage.getItem("OWNER_SELECTEDVEHICLE_COOKIE")),a=m('input[name="popUpFirstName"]').val(),o=m('input[name="popUpLastName"]').val(),r=m('input[name="popUpEmail"]').val(),l={};l.firstName=a,l.lastName=o,l.email=r,l.sessionToken=e.sessionToken,l.countryCodeIso2=c.getCurrentMarketCode(),l.vin=t.vincode,l.pageSize=n,l.currentPage=i,m.ajax({url:m("#serviceLayerUrl").val()+"/fordowner/vehicle/users/profiles/serviceHistory",type:"post",dataType:returnJsonTypeBaseonBrowser(),data:l,success:function(e){var a,t;e.result&&(t=e.data)&&t.details?(a="",t.details.forEach(function(e,t){a+='<tr><td width="180">'+e.serviceDate+'</td><td width="150">'+e.serviceType+'</td><td width="150">'+e.odometer+"</td><td >"+e.dealerName+"</td></tr>"}),m("#servicePage tbody").html(a),t=e.dataCount,e=Math.ceil(t/n),s.initPage(t,e,i),m(".service-history-no-data").hide(),m(".main-nav").css("z-index",1),m(".section.secondaryNavigation").css("z-index",1),m("#servicePage").css("display","block")):(m("#data_list").html(""),m(".service-history-no-data").show())}})})},i}),define("search/component.search",["jquery","_","typeahead.js","bloodhound","analytics/analyticsEventLayer","utils/utils.search"],function(i,e,t,a,n,o){var r={},l=2;function s(e){this.$searchComponent=e,this.$searchForm=this.$searchComponent.find(".search-form"),this.$searchInput=this.$searchForm.find(".typeahead"),this.$searchForm.unbind(),this.$searchForm.submit(function(e){if("en_ZA"!==i("[data-locale]").data("locale")&&0==i.trim(i(this).find(".typeahead").val()).length)return!1;e.preventDefault(),this.submit()}),this.searchResultsPagePath=null,this.$searchForm.get(0)&&(this.searchResultsPagePath=this.$searchForm.get(0).action),this.bloodhoundTerms=null,this.data={},this.bindUiEvents(),this.configureBloodhound(),this.bindAnalytics(),i(".overlay-content-inner.is-active").find(".search.section").height()&&l%2==0&&(n.getSearchEvents().searchLoaded(),l++)}return s.prototype.bindUiEvents=function(){var e=this.$searchForm.closest(".search-header"),a=(this.$searchForm,this);this.$searchInput.on({focus:function(){e.addClass("focused")},blur:function(){e.removeClass("focused")}}),this.$searchForm.find("input[id=search-field]").keydown(function(e){var t={searType:"Q"};t.queryTerm=o.getRealInputSearch(i(this).val()),13==e.keyCode&&a.forwardPage(a.$searchForm,t)}),this.$searchForm.find(".search-button").on("click",function(e){var t;"en_ZA"===i("[data-locale]").data("locale")&&((t={searType:"Q"}).queryTerm=o.getRealInputSearch(a.$searchForm.find("input[id=search-field]").val()),a.forwardPage(a.$searchForm,t))}),this.$searchForm.find("input[id=footer-search-input-q]").keydown(function(e){var t={searType:"Q"};t.queryTerm=o.getRealInputSearch(i(this).val()),13==e.keyCode&&a.forwardPage(a.$searchForm,t)})},s.prototype.forwardPage=function(e,t){e=-1!=(e=e.attr("action")).indexOf(".html")?e.replace(".html",".supportSearchResult."+t.searType+"."+t.queryTerm+".html"):e+".supportSearchResult."+t.searType+"."+t.queryTerm+".html";i.cookie("cookietxtSearch",i("input[type=search]").val(),{path:"/"}),window.location.href=e},s.prototype.supportsPlaceholder=function(){jQuery.support.placeholder="placeholder"in document.createElement("input"),i(function(){i.support.placeholder||i("[placeholder]").focus(function(){i(this).val()==i(this).attr("placeholder")&&(i(this).val(""),i(this).removeClass("cusPlaceholder"))}).blur(function(){""==i(this).val()&&(i(this).val(i(this).attr("placeholder")),i(this).addClass("cusPlaceholder"))}).blur()})},s.prototype.bindAnalytics=function(){var e=i(".search-results"),t=e.length;this.$searchComponent.hasClass("footer-search")&&this.configureFooterSearchAnalytics(),t&&this.configureSearchPageAnalytics(e)},s.prototype.configureFooterSearchAnalytics=function(){this.$searchComponent.find(".footer-search-terms a").on("click",function(e){this.data.searchTerm=e.target.text,n.getSearchEvents().trackSearchPopularTermSelection(this.data)}.bind(this))},s.prototype.configureSearchPageAnalytics=function(e){var t=e.find(".configuration").data("resultscount"),a=e.hasClass(".no-results")?"0:0":"0:"+t;this.$searchForm.on("submit",function(){this.initSearchPageAnalytics(this.$searchInput.get(0).value,a)}.bind(this)),this.$searchForm.on("click",".tt-suggestion a",function(){this.initSearchPageAnalytics(this.$searchInput.get(0).value,a)}.bind(this))},s.prototype.initSearchPageAnalytics=function(e,t){this.data.searchTerm=e,this.data.searchDepth=digitaldata.page.searchDepth||t,n.getSearchEvents().trackSearchRepeat(this.data)},s.prototype.configureBloodhound=function(){var e=(document.location.origin+document.location.pathname).replace("html","")+"predictions.json?q=%QUERY";this.bloodhoundTerms=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.whitespace,queryTokenizer:Bloodhound.tokenizers.whitespace,remote:{url:e,wildcard:"%QUERY"}})},r.init=function(e){new s(e)},r}),define("search/component.searchResults",["jquery","_","typeahead.js","bloodhound","analytics/analyticsEventLayer"],function(o,e,t,a,r){var i={};function n(e){this.$searchResultsComponent=e,this.bindAnalytics()}return n.prototype.bindAnalytics=function(){var a=this.$searchResultsComponent,e=a.find(".search-results-item"),i=a.find(".configuration").data("resultscount"),n={};e.on("click",function(){var e=o(this),t=a.find(".pagination-numbers .page-current").text(),e=e.index(".search-results-item")+1+10*(t-1);n.resultsCount=i,n.resultOrder=e,r.getSearchEvents().trackSearchResultSelection(n)})},i.init=function(e){new n(e)},i}),define("search/component.search-vin",["jquery","isAuthor","utils/mediaTracking","marketConfigGlobal","analytics/analyticsEventLayer"],function(l,e,t,s,a){var i={},c=l("#vin-search-lang").text();function d(e){var t=getErrorMessageByCode(e),a=l(".search.alert-box.alert");"nz"===s.getCurrentMarketCode()&&"ERROR_DATA_NOT_FOUND"===e&&a.addClass("greycaption"),a.show().text(t)}function u(e){a.getSearchVinEvents().searchLoadedVin(e)}function p(e,t,a){l("#search-accordion").length&&(a=a,t=t,e=void 0!==(e=e)&&void 0!==a&&'<li class="accordion-item"><div class="accordion-title '+encodeURI((t?"has-description":"").trim())+'" style=" background: #f7f7f7; border-color: #dedede;"><a href="#"><h3 style="color: #2d96cd">'+e+'</h3><div class="desc" style="color: #616161">'+t+'</div><div class="accordion-handle"><span class="accordion-details-button" style="color: #2d96cd;"></span><i class="accordion-indicator icon-chevron-thin-right" style="color: #2d96cd"></i></div></a></div><div class="accordion-body" style="background: #fff;"><div class="accordion-content"><div class="accordion-content-inner"><p>'+a+"<p></div></div></div></li>")&&(l(".how-find-vehicle").hide(),l(".error-msg").hide(),l(".search.alert-box.alert").hide(),l("#search-accordion").append(e))}function n(r){r.find("input[name=vincode]").on("keyup blur",function(){l(".search.alert-box.alert").hide().text("")}),l("#vin-search-form").unbind().on("submit",function(e){e.preventDefault();var t,a,i,n,e=l("#serviceLayerUrl").val(),o=e+"/fordowner/vehicle/users/vehiclerecall";r.find("input[name=vincode]").val()?("ve"===s.getCurrentMarketCode()?(a=o,0<l(".search-vin .input-field.error").length||(l(".search.alert-box.alert").hide().text(""),i=l(".search-vin").find("input[name=vincode]").val().toUpperCase().replace(/\s/g,""),require("cookie").getSessionCookie(),n={vincode:i,countryCodeISO:c},u(i),l.ajax({type:"GET",url:a,dataType:returnJsonTypeBaseonBrowser(),data:n,success:function(e){if(l("#search-accordion").empty(),l(".search.alert-box.alert").removeClass("greycaption"),"00"===e.status.code){if(0<e.fsas.count){var t,a=e.fsas.items;for(t in a)p(a[t].local_fsa_r,"",a[t].description_eng)}}else d(e.status.description)},error:function(e){l(".error-msg").show()}}))):"ar"===s.getCurrentMarketCode()?(i=o=e+"/fordowner/vehicle/users/gcampRecallWithMarket",0<l(".search-vin .input-field.error").length||(l(".search.alert-box.alert").hide().text(""),a=l(".search-vin").find("input[name=vincode]").val().toUpperCase().replace(/\s/g,""),require("cookie").getSessionCookie(),n={vin:a,country:c},u(a),l.ajax({type:"GET",url:i,dataType:"json",data:n,success:function(e){if(l("#search-accordion").empty(),l(".search.alert-box.alert").removeClass("greycaption"),0===e.statusCode||"00"===e.return_code){if(0<Number(e.fsa_count)){var t,a=e.recalls;for(t in a)a[t].local_fsa_desc_local?p(a[t].local_fsa,"",a[t].local_fsa_desc_local):p(a[t].local_fsa,"",a[t].local_fsa_desc_in_english)}}else d(e.exceptionMessage)},error:function(e){l(".error-msg").show()}}))):(e=o,0<l(".search-vin .input-field.error").length||(l(".search.alert-box.alert").hide().text(""),o=l(".search-vin").find("input[name=vincode]").val().toUpperCase().replace(/\s/g,""),require("cookie").getSessionCookie(),t={vincode:o,countryCodeISO:c},u(o),l.ajax({type:"POST",url:e,dataType:returnJsonTypeBaseonBrowser(),data:t,success:function(e){l("#search-accordion").empty();var t=l(".search.alert-box.alert");if(t.removeClass("greycaption"),200===e.returnCode){if(e.result)if(-1<["za","ph","nz","th","vn"].indexOf(s.getCurrentMarketCode())&&null==e.user)e.errorCode="ERROR_DATA_NOT_FOUND",d(e.errorCode);else if("nz"==s.getCurrentMarketCode()&&e.user[0]&&e.user[0].recalls&&0<e.user[0].recalls.length){e.errorCode||(e.errorCode="SUCCESS_RECALL_OK");var a=getErrorMessageByCode(e.errorCode);t.show().text(a)}else if("mx"===s.getCurrentMarketCode()&&"The VIN doesn't have any recall"===e.errorCode){a=l("input[name=VINNotFoundErrorMsg]").val();""!==a&&t.show().text(a)}else{var i,n=e.user[0].recalls;for(i in n){var o="recall"+(parseInt(i)+parseInt(1));p(n[i][o].title,n[i][o].body,n[i][o].desc)}}}else d(e.errorCode)},error:function(e){l(".error-msg").show()}}))),l("#vin-code").closest(".input-field").addClass("valid"),l("#vin-code").closest(".input-field").removeClass("error")):(l("#vin-code").closest(".input-field").removeClass("valid"),l("#vin-code").closest(".input-field").addClass("error"))})}return i.init=function(){var e,t,a,i=l(".search-vin");t=(e=i).find("input[name=mobilePlaceholderText]").val(),a=e.find("input[name=placeholderText]").val(),(e=e.find("input[name=vincode]")).attr("type","search"),t&&e.attr("placeholder-mobile",t),a&&(e.attr("placeholder-desktop",a),e.attr("placeholder",a)),n(i)},i}),define("actions-panel/component.actionsPanel",["jquery","_","overlay/component.overlay","image/component.fullscreenImage"],function(t,e,a,i){var n={},s="share-overlay-active";function o(e){this.$elem=t(e),this.url=window.location.href,this.bindUIElements(),this.bindEvents()}return o.prototype.bindUIElements=function(){this.$body=t("body"),this.$shareToggleButton=this.$elem.find(".action-share"),this.$shareOverlay=this.$elem.find(".share-overlay"),this.$shareUrlInput=this.$shareOverlay.find('input[name="url"]'),this.shareOverlayBackground=".share-overlay-bg",this.shareSocialUrls=this.$elem.find(".share-overlay .social-links a")},o.prototype.bindEvents=function(){var a=this;t.each(document.querySelectorAll(".action-share"),function(e,t){t.addEventListener("click",function(e){e.preventDefault(),this.showShareBox()}.bind(a),!1)}),this.$shareOverlay.on("click",this.shareOverlayBackground,function(){this.hideShareBox()}.bind(this)),t(window).on("closeShareBox",function(){t(this.shareOverlayBackground).trigger("click")}.bind(this))},o.prototype.showShareBox=function(){this.$body.off("keydown"),0<this.shareSocialUrls.length&&this.$shareOverlay.removeClass("hide"),this.$body.addClass(s),this.$shareOverlay.find("a:first").focus(),this.setSharedUrl();for(var e=0;e<this.shareSocialUrls.length;e++){var t,a=this.shareSocialUrls[e],i=a.getAttribute("href").indexOf("u="),n=a.getAttribute("href").indexOf("url="),o=a.getAttribute("href").indexOf("mailto"),r=a.getAttribute("href").indexOf("&media"),l=encodeURIComponent(window.location.href);0<=i?(t=a.getAttribute("href").replace(a.getAttribute("href").substring(i),"u="+l),a.setAttribute("href",t)):0<=n?(t=0<=a.getAttribute("href").indexOf("pinterest")?a.getAttribute("href").replace(a.getAttribute("href").substring(n,r),"url="+l):a.getAttribute("href").replace(a.getAttribute("href").substring(n),"url="+l),a.setAttribute("href",t)):0<=o&&(t=a.getAttribute("href").replace(a.getAttribute("href").substring(a.getAttribute("href").indexOf("http")),l),a.setAttribute("href",t))}this.$body.on("keydown",function(e){27===(e.keyCode||e.which)&&this.hideShareBox()}.bind(this))},o.prototype.setSharedUrl=function(){this.$shareUrlInput.val(this.url)},o.prototype.hideShareBox=function(){this.$body.removeClass(s),this.$body.on("keydown",function(t){e.each(a.overlays,function(e){e.hideOverlayOnEscapeKeydown(t)})}),this.$shareOverlay.addClass("hide"),this.$shareToggleButton.focus()},n.actionsPanels=[],n.init=function(e){e=new o(e);n.actionsPanels.push(e)},n}),define("actions-panel/shareButton",["jquery"],function(u){var e={};function t(e){this.$elem=u(e),this.bindEvents(),this.decodeEmailURL("[@date]")}return t.prototype.decodeEmailURL=function(e){var t,a,i,n=u(this.$elem).find(".icon-share-email").attr("href"),o=[],o=decodeURIComponent(n).split("&"),r=(n=new Date,a=n.getDate(),i=n.getMonth()+1,n=n.getFullYear(),(a=a<10?"0"+a:a)+"/"+(i=i<10?"0"+i:i)+"/"+n),l=[];try{for(var s=0;s<o.length;s++)0<=o[s].indexOf("2526")&&(o[s]=decodeURIComponent(decodeURIComponent(o[s]))),l.push(o[s]);if(1!=e.indexOf("[@")){for(var c=e.replace("[@","\\[\\@").replace("]","\\]"),s=1;s<l.length;s++){var d=l[s].split("=");d[1]=encodeURIComponent(d[1].replace(new RegExp("("+c+")","g"),r)),l[s]=d.join("=")}t=l.join("&")}}catch(e){console.log("Issue in Share Button ")}u(this.$elem).find(".icon-share-email").attr("href",t)},t.prototype.bindEvents=function(){this.$elem.on("click","a",function(e){u(this).hasClass("icon-share-email")||(e.preventDefault(),window.open(u(this).attr("href"),"ShareWindow","height=450, width=550, top="+(u(window).height()/2-275)+", left="+(u(window).width()/2-225)+", toolbar=0, location=0, menubar=0, directories=0, scrollbars=0"),u(window).trigger("closeShareBox"))})},e.init=function(e){new t(e)},e}),define("page-module/modules-init",["auth-service/component.authService","releaseVersion/component.releaseVersion","jquery","cookie/global.ux.cookie","lightbox/global.ux.lightbox","responsive/global.ux.imageInterchange","tabs/component.tabs","tabs/component.tabPanel","tabs/component.myProfileTab","scrolling-visual-indicator/component.scrolling-visual-indicator","main-navigation/component.mainNavigation","main-navigation/component.vehicleMenu","accessories/accessoriesMain","accessories/nameplateAccessoriesMain","box/component.box","generic-carousel/component.genericCarousel","billboard-carousel/component.billboardCarousel","billboard-carousel/component.imageCarousel","incentives-offers-billboard/component.incentivesOffersBillboard","media-carousel/component.mediaCarousel","dynamicCarousel/component.dynamicCarousel","threesixty/threesixty","features/single-feature","rte/rte-flip-image","splitter/splitter-slider","features/component.singleFeature","gallery-category/gallery-category","gallery-trigger/gallery-trigger","gallery-trigger/component.galleryTrigger","section-footer/section.footer","fps/fps","puwyl/component.puwyl","puwyl/pickup-where-you-left","pwyl-nudge-popup-js/pwyl-nudge-popup","return_popup/return_popup","disclosure/component.disclosure","vehicleAttribute/component.vehicleAttribute","expand-collapse/expandCollapseSection","features/features-trigger","secondary-navigation/component.secondaryNavigation","secondary-navigation/component.secondaryNavUpdated","brand-gallery/component.brandGallery","rte/component.ctaButton","showroom/showroom","modelWalkAndCompare/modelWalkAndCompare","tooltip-gux/global.ux.tooltip","models-display/component.modelsDisplay","model-details-accordion/component.modelDetailsAccordion","model-details-accordion/component.modelDetailsAccordionPoC","also-like/component.youMightAlsoLike","dynamic-key-features/component.dynamicKeyFeatures","back-to-top/component.backToTop","accordion/component.accordion","accordion/component.common.accordion","accordionModelDetails/component.accordionModelDetails","cookie-disclaimer/component.cookieDisclaimer","overlay/component.overlay","scroll/global.ux.scroll","form-poc/form-poc","prices-display-configuration/component.prices-display-configuration","mini-dealer-locator/minidealerlocator","dealer-locator-china/component.dealerLocatorChina","mini-dealer-locator-china/component.miniDealerLocatorChina","image/component.fullscreenImage","search/component.search","search/component.searchResults","search/component.search-vin","form/component.form.validation","form/component.form.dropdown","form/component.form.dropdowncustomize","form/component.form.dropdowncustomizev2","form/component.form.dropdowncustomizemap","form/component.form.postcode","form/component.form.modelservicedropdown","form/component.form.preferreddealerdropdown","form/component.form.checkboxcarousel","form/component.form.radiobuttonsbrochure","form/component.form.radiobuttons","form/component.form.recaptcha","form/component.form.recaptchav2","form/component.form.fieldsgroup","form/component.form.checkbox","form/component.form.paymentDetails","form/component.form.rangeslider","form/component.form.addressfield","form/component.form.autofleetlevel","form/component.form.printButton","hotspots/hotspots","hotspotsAmp/hotspotsAmp","credit-payment-estimator/component.creditPaymentEstimator","finance-calculator/component.financeCalculator","multi-finance-calculator/component.multiFinanceCalculator","rte/component.read-more","rich-text/component.richText","rich-text/hotDealsPrice","utils/convertKeyword","actions-panel/component.actionsPanel","table/component.table","actions-panel/shareButton","brightcove/component.brightcove","brightcove/component.newBrightcove","brightcove/component.html5Player","download-bar/component.downloadBar","model-details/component.modelDetails","model-details-compare/component.modelDetailsCompare","showroom-vehicle-card/component.showRoomVehicleCard","select-vehicle/component.selectVehicle","select-a-path/component.selectapath","common/common.location","common/common.socialShareSection","dealer-locator-layout/component.dealerLocatorLayout","model-compare/component.modelCompare","model-specification/component.modelSpecification","compare-model-across-vehicle/component.compareModelAcrossVehicle","sync-usb-download/component.syncUsbDownload","accessories/component.accessories","colorizer/component.colorizer","colorizerthreesixty/component.colorizerthreesixty","expanded-feature/component.expandedFeature","feature-icon/component.featureIcon","analytics/analyticsPageLayer","analytics/analyticsEventLayer","image/component.imageHeight","language-selector-roadblock/component.languageSelectorRoadblock","billboard-showroom/component.billboardShowroom","recently-viewed/component.recentlyViewed","news/component.news","news-list/component.newsList","slider-feature/component.sliderFeature","billboard-owner/component.billboardOwner","mini-dashboard/component.miniDashboard","interiorExteriorColorizer/interiorExteriorColorizer","jelly-bean/component.jellyBean","language-landing/component.languageLanding","footer/component.footer","image/component.imageCaption","overlay/component.overlaySearch","zebraChartTile/component.zebraChartTile","vehicleBox/component.vehicleBox","vehicleTitle/component.vehicleTitle","add-vehicle/component.addVehicle","update-sync/component.updateSync","update-sync/component.scrollViewContent","download-sync/component.downloadSync","contact-bar/component.contactBar","logout/component.logout","edit-account-info/component.editAccountInfo","my-profile/component.myProfile","credit-online-apply/component.creditOnlineApply","download-sync-history/component.downloadSyncHistory","delete-vehicle/component.deleteVehicle","accessories-tile/component.accessoriesTile","credit-options/component.creditOptions","credit-options-addon/component.creditOptionsAddon","credit-summary/component.creditSummary","credit-shoppers-guide-new/component.creditShoppersGuideNew","build-and-price/component.buildAndPrice","build-and-price-v2/component.buildAndPriceV2","build-and-price-dual/component.buildAndPriceDual","build-price-review-savepage/component.buildPriceReviewSavePage","build-price-review-savepage-dual/component.buildPriceReviewSavePageDual","owner-download-manual/component.ownerDownloadManual","owner-download-manual/component.ownerDownloadManualOverlay","report-sync/component.reportSync","cascading-dropdown/component.cascadingDropdown","support-search/component.supportSearch","support-search-result/component.supportSearchResult","sync-compatibility-chart/component.syncCompatibilityChart","single-dropdown/component.single-dropdown","finance-option-tool/component.financeOptionTool","activate-user/component.activate-user","analytics/analyticsTarget","newsArticle/component.newsArticle","billboard-common/component.billboardCommon","get-image-by-url-param/component.getImageByUrlParam","feature-slider/component.featureSlider","latest-offers/component.latestOffers","latest-offers-detail/component.latestOffersDetail","latest-offers-build-price-carousel/component.latestOffersBuildPriceCarousel","formMiniDealerLocator/formMiniDealerLocator","service-price-calculator/component.servicePriceCalculator","brazil-service-price-calculator/component.brazilServicePriceCalculator","service-booking/component.serviceBooking","partner-login-form/component.partnerLoginForm","refactored-model-details-compare/component.refactoredModelDetailsCompare","pre-delivery-manual-form/component.preDeliveryManualForm","live-stream-video/component.liveStreamVideo","pre-delivery-manual-data-form/component.preDeliveryManualForm","pre-delivery-manual-data-refresh/component.preDeliveryManualForm","threesixtyPanoExperience/component.threesixtyPanoExperience","vehicledisplay/component.vehicledisplay","stickybar/component.stickybar","form/component.form.fileupload","countdown/component.countdown","vehiclemodel/component.vehiclemodel","smart-redirect/component.smartRedirect","home-popup/component.homePopup","destinations-popularity/destinationsPopularity","destinations-popularity-items-config/destinationsPopularityItemsConfig","common-carousel/commonCarousel","u375/header/header","u375/form/u375form","form/component.form.SMSVerification","panoramic/component.panoramic","pannellum/component.pannellum","iframe-component/component.iframe","qrredirect/component.qrredirect","recall/component.recall","recall-status/component.recallStatus","recall-lookup/component.recallLookup","proactive-chat/component.proactivechat","service-history-Verification/component.serviceHistoryVerification","service-history-search-result/component.serviceHistorySearchResult","twoCalculatorService/component.twoCalculatorService","maintenanceService/component.maintenanceService","secondary-navigation-pass/component.secondaryNavigationPass","iframePass/component.iframePass","special-offers/component.specialOffers","simpleEmiCalculator/component.monthlyPaymentCalculator","climes-config/component.climesConfig","help-me-choose/component.helpMeChoose","help-me-choose-latam/component.helpMeChooseLatam","dealer-locator-review/component.dealerLocatorReview","dealer-locator-review-page/component.dealerLocatorReviewPage","redesign-forms/component.bookTestDrive","paymentCalculator/component.paymentCalculator","quick-build-and-price/component.quickBuildAndPrice","service-calculator/component.serviceCalculator","esb-calculator/esb.Calculator","secondary-navigation-sticky/component.secondaryNavigationSticky","tableHistory/component.tableHistory","tabPanelNameplateExp/component.tabPanelNameplateExp","esbwarrantyInfo/component.esbwarrantyInfo","aaEnhancement/component.aaEnhancement","brand-card/component.brandCard","fds-dropdown/component.fdsDropdown","youtube-player/component.youtubePlayer","geolocation-validation/component.geolocationValidation","commonVehicleAtribute/commonVehicle"],function(V,B,i,U,q,j,H,n,K,z,G,W,Y,J,Q,e,o,Z,X,r,ee,t,te,ae,ie,a,l,s,c,ne,oe,re,le,se,ce,d,de,ue,u,pe,me,p,he,fe,ge,ve,ye,be,we,Ce,ke,Se,m,xe,De,Pe,Te,Ne,Ae,Ie,$e,Le,Me,h,f,Oe,Ee,g,v,y,b,w,C,k,S,Fe,x,D,P,T,N,A,I,_e,$,L,M,Re,Ve,Be,Ue,qe,O,je,He,E,F,Ke,_,ze,Ge,We,Ye,Je,Qe,Ze,Xe,et,tt,at,it,nt,ot,rt,lt,st,ct,dt,ut,pt,mt,R,ht,ft,gt,vt,yt,bt,wt,Ct,kt,St,xt,Dt,Pt,Tt,Nt,At,It,$t,Lt,Mt,Ot,Et,Ft,_t,Rt,Vt,Bt,Ut,qt,jt,Ht,Kt,zt,Gt,Wt,Yt,Jt,Qt,Zt,Xt,ea,ta,aa,ia,na,oa,ra,la,sa,ca,da,ua,pa,ma,ha,fa,ga,va,ya,ba,wa,Ca,ka,Sa,xa,Da,Pa,Ta,Na,Aa,Ia,$a,La,Ma,Oa,Ea,Fa,_a,Ra,Va,Ba,Ua,qa,ja,Ha,Ka,za,Ga,Wa,Ya,Ja,Qa,Za,Xa,ei,ti,ai,ii,ni,oi,ri,li,si,ci,di,ui,pi,mi,hi,fi,gi,vi,yi,bi,wi,Ci,ki){return{init:function(){Ha.init(),CQ_Analytics.OwnerInfoStoreMgr.init(),V.init();"true"==i("body").find("#global-market-configuration span").attr("data-isredirect")&&Ma.init();var e=i("body").find("#homePagePopup").attr("data-ishomepopup"),e=(void 0!==e&&"true"==e&&Oa.init(),i("body").find("#global-market-configuration span.configuration").attr("data-market-code")),e=(void 0!==e&&"AR"==e&&i("body").find(".image-loader-svg")&&i("body").find(".image-loader-svg").remove(),Wa.init(),B.init(),U.init(),j.init(),z.init(),i(".component-panaromaview").length&&qa.init(),Dt.init(),i(".myProfileTabOwner").length&&(i(".myProfileTabOwner").each(function(){K.init(i(this))}),R.getOwnerMyProfileEvents().init()),i(".zebraChartTile").length&&i(".zebraChartTile").each(function(){At.init(i(this))}),i(".panorama").length&&Ua.init(),i(".vehicleTile").length&&$t.init(),i(".component-iframe").length&&ja.init(),It.init(),Nt.init(),Ee.init(),ra.init(),i(".activateUser").length&&sa.init(),Ft.init(),R.getSocialEvents().trackContactBarSocial(),i(".creditShoppersGuideNew").length&&Gt.init(),i(".recall-main-container").length&&Ka.init(),i(".recall-status-main-container").length&&za.init(),i(".recallLookup").length&&Ga.init(),i(".tabPanelNameplateExp").length&&fi.init(),i(".esbwarrantyInfo").length&&gi.init(),i(".main-nav").length&&G.init(),i(".vehicle-menu").length&&W.init(),i(".accessories.section").length&&Y.init(),i(".nameplateAccessories.section").length&&J.init(),i(".box").length&&Q.init(),i("#prices-display-configuration").length&&Ie.init(),i(".footer").length&&ne.init(),i(".billboardCarousel").length&&o.init(),i(".image-carousel").length&&Z.init(),i(".media-carousel").length&&r.init(),i(".incentivesOffersBillboard").length&&X.init(),i(".dynamicCarousel").length&&ee.init(),i(".common-carousel").length&&_a.init(),i(".accordion-item").length&&Ea.init(),i(".u375Header").length&&Ra.init(),i(".content-holder").length&&Fa.init(),i(".billboardCarousel, .image-carousel, .media-carousel, .dynamicCarousel").length&&(i(".media-carousel").length?setTimeout(function(){R.getCarouselEvents().init(),R.getGalleryEvents().trackGalleryActionVideoPlay()},750):R.getCarouselEvents().init(),fordAnalytics)&&"home-load"===fordAnalytics.variantName&&ca.init(),i(".jelly-bean").length&&xt.init(),i(".youMightAlsoLike").length&&Ce.init(),i(".modelsDisplay").length&&(ye.init(),R.getGalleryEvents().trackGalleryActionModelSelect()),i(".modelDetailsAccordion").length&&be.init(),i(".modelDetailsAccordionPoC").length&&we.init(),i("#gux-lightbox").length&&q.init(),i(".single-feature").length&&i(".single-feature").each(function(){te(this)}),i(".servicePriceCalculator").length&&ya.init(),i(".brazilServicePriceCalculator").length&&ba.init(),i(".serviceBooking").length&&wa.init(),i(".partner-login").length&&Ca.init(),i(".printButton").length&&M.init(),i(".video-single").each(function(){ze.init(this)}),i(".js-init-brightcove").each(function(){Ge.init(this)}),i(".h5player.section").length&&i(".h5player.section").each(function(){We.init(this)}),i(".splitter .flip-image-position").length&&ae.init(),i(".splitter-carousel").length&&i(".splitter-carousel").each(function(){ie.init(i(this))}),i(".galleryCategory").length&&l.init(),i(".language-landing-page").length&&Dt.init(),i(".gallery-trigger").length&&(i(".gallery-trigger").each(function(){c.init(i(this))}),s.init()),(i(".vehicleAttribute").length||i(".common-vehicle-attributes").length)&&de.init(),i(".disclosure-accordion").length&&d.init(),i(".expander-section").length&&ue.init(),i(".billboard-showroom").length&&gt.init(),i(".billboard-features-trigger").length&&u.init(),i(".expanded-feature").length&&u.init(),i(".secondaryNavigation").length&&pe.init(),i(".secondaryNavigationUpdated").length&&me.init(),i(".brandGallery").length&&p.init(),i(".gallery-trigger, .galleryCategory, .brandGallery").length&&R.getGalleryEvents().init(),i(".cta-button").length&&he.init(),ve.init(),i(".dynamicKeyFeatures")&&ke.init(),i("#back-to-the-top")&&Se.init(),i(".cookie-disclaimer").length&&Pe.init(),i(".accordion").length&&i(".accordion").find(".common-accordion").length&&i(".accordion").each(function(){m.init(i(this))}),i(".accordionModelDetails").length?i(".accordionModelDetails").each(function(){De.init(i(this))}):i(".accordion").each(function(){xe.init(i(this))}),i(".tabs").length&&i(".tabs").each(function(){H.init(i(this))}),i(".tabPanel").length&&i(".tabPanel").each(function(){n.init(i(this))}),i(".image-fullscreen").length&&i(".image-fullscreen").each(function(){h.init(i(this))}),i(".image-fullscreen").length&&i(".image-fullscreen").each(function(){h.init(i(this))}),i(".section.sliderFeature").length&&(i(".section.sliderFeature").each(function(){wt.init(i(this))}),R.getSliderEvents().init()),i(".recentlyViewed.section").each(function(){vt.init(i(this))}),i('.image.section picture img[data-browser != "{}"]')&&i('.image.section picture img[data-browser != "{}"]').each(function(){""!=i(this).data("browser")&&ht.init(i(this))}),i(".image-caption[data-style-mobile]").each(function(){""!=i(this).data("style-mobile")&&Tt.init(i(this))}),i(".news.section").length&&yt.init(i(".news.section")),i(".news-article").length&&da.init(i(".news-article")),i.each(i(".buildPriceReviewSavePage.section"),function(){Qt.init(i(this))}),i.each(i(".buildPriceReviewSavePageDual.section"),function(){Zt.init(i(this))}),Re.init(),i.each(i(".hotspotsAmp.section"),function(){Ve.init(i(this))}),R.getHotspotsEvents().init(),i(".payment-estimator-wrap").length&&Be.init(),i(".multi-finance-calculator-wrap").length&&qe.init(),i(".table").length&&i(".table").each(function(){Ke.init(i(this))}),i("#formPoc").length&&Ae.init(),i(".search").length&&i(".search").each(function(){f.init(i(this))}),i(".searchResults").length&&i(".searchResults").each(function(){Oe.init(i(this))}),i("form").length&&i("form").each(function(){g.init(i(this))}),i(".fileUpload").length&&Ia.init(),0<i(".count-down").length&&$a.init(i(".count-down")),i(".form-dropdown").length&&v.init(".form-dropdown"),i(".form-first-dropdown").length&&y.init(),i(".form-1st-dropdown").length&&b.init(),i(".first-dropdown").length&&w.init(),i(".postcodeCheck").length&&C.init(),i(".modelSeriesdropdown").length&&k.init(".modelSeriesdropdown"),i(".form-province-dropdown").length&&S.init(),i(".form-checkbox-carousel").length&&Fe.init(),i(".fieldsGroup").length&&N.init(),i(".form-radioButtons").length&&D.init(),i("input[name=downloadBrochurePath]").length&&x.init(),i(".form-recaptcha").length&&P.init(),i(".form-recaptchav2").length&&T.init(),i(".SMSVerification").length&&Ba.init(),i(".form-checkbox").length&&A.init(),i(".form-payment-details").length&&I.init(),i(".form-range-slider").length&&_e.init(),i(".serviceHistory").length&&i(".serviceHistory").each(function(){Ya.init(i(this))}),i(".richtext-read-more").length&&i(".richtext-read-more").each(function(){O.init(i(this))}),i(".actionsPanel").length&&i(".actionsPanel").each(function(){F.init(i(this)),_.init(i(this).find(".share-content")),R.getShareEvents().init()}),i(".editAccountInfo").length&&i(".editAccountInfo").each(function(){Rt.init(i(this))}),i(".brochureware-download").length&&Ye.init(),i(".featureSlider").length&&ma.init(),i(".model-details-compare").length&&(Qe.init(),R.getModelWalkAndCompareEvents().trackCompareChangeAdd()),i(".showroom-vehicle-card").length&&Ze.init(),i(".overlay-select-vehicle").length&&tt.init(".overlay-select-vehicle form",!0),i(".social-share-section").length&&at.init(),i("#select-vehicle").length&&Xe.init(),i(".store-locator-wrapper").length&&it.init(),0);0<i(".groupContentBoxes").length&&(e=6e3),setTimeout(function(){i(".miniDealerLocator").length&&$e.init()},e),i("#dealer-locator-china").length&&Le.init(),i("#mini-dealer-locator-china").length&&Me.init(),i(".model-compare").length&&nt.init(),i(".model-specification").length&&ot.init(),i(".compareModelAcrossVehicle").length&&rt.init(),i(".syncUsbDownload").length&&lt.init(),i(".accessories").length&&(st.init(),R.getVehicleAccessoriesEvents().init()),i(".colorizer").length&&(ct.init(),R.getThreesixtyColouriserEvents().init()),i(".colorizerthreesixty").length&&(dt.init(),R.getColorizerThreesixtyEvents().init()),i(".interiorExterior360").length&&St.init(),i(".expanded-feature-section").length&&ut.init(),i(".syncCompatibilityChart").length&&oa.init(),i(".splitter-column-mobile").length&&i(".splitter-column-mobile").each(function(){pt.init(i(this))}),(i(".language-selector-wrap").length||i(".language-btn-wrap").length||i(".language-wrap").length)&&(ft.init(),R.getGlobalEvents().trackCountryLanguageSelectorOverlay()),i("#fpsModelKey").length&&oe.init(),i(".pickup-where-you-left").length&&(re.init(),function e(){i(".pickup-list > .item").is(":visible")||i(".slides > .item").is(":visible")?d.init():setTimeout(e,50)}()),i(".nudgeRepeatUserPopUp").length&&se.init(),(i("#vehicleModelKey").length||i("#vehicleNameplateKey").length||i("#build-and-price-wrap").length||i("#build-price-review-container").length)&&le.init(),ce.init(),i(".billboardOwner").length&&(Ct.init(),R.getOwnerMyProfileEvents().ownerDashboardload()),i(".billboard-content.common-billboard").length&&(i(".billboard-content.common-billboard").each(function(){ua.init(i(this))}),R.getCarouselEvents().trackBillboardClick()),i(".miniDashboard-carousel").length&&kt.init(),i(".cascadingDropdown").length&&i(".cascadingDropdown").each(function(){aa.init(i(this))}),i(".supportSearch").length&&(i(".supportSearch").each(function(){ia.init(i(this))}),R.getCreditSupportEvents().init()),i(".supportSearchResult").length&&i(".supportSearchResult").each(function(){na.init(i(this))}),i(".footer").length&&Pt&&Pt.init(),i(".addvehicle-form-wrap form").length&&Lt.init(),i(".credit-online-apply-section-wrap").each(function(){Bt.init(i(this))}),Te.init(),R.getFormWizardEvents().init(),i(".mobile.show-mob-only .showmore.txt-inline").each(function(){O.initInline(i(this))}),i(".gux-variable.gux-date-variable").length&&E.toDate(".gux-variable.gux-date-variable"),i(".gux-variable.url-data-variable").length&&E.replaceVariableByParamValue(".gux-variable.url-data-variable"),i(".get-image-by-url-param").length&&pa.init(),i(".addressfield").length&&$.init(),(i("input[name='VOI_MAKE_CODE']").length||i("input[name='VOI_SERIES_DERIVATIVE_CODE']").length)&&L.init(),i(".news-listing-wrap").length&&i(".news-listing-wrap").each(function(){bt.init(i(this))}),0<i(".threesixty-component").length&&Ta.init(i(".threesixty-component")),0<i(".sticky-sidebar-component").length&&Aa.init(i(".sticky-sidebar-component")),i(window).on("onoverlayload onoverlayChange",function(){var e=i(".overlay-content");window.picturefill(e[0]),e.find(".accordion").each(function(){m.init(i(this))}),i(".finaceplan").length&&ci.init(),i(".addressfield").length&&$.init(),(i("input[name='VOI_MAKE_CODE']").length||i("input[name='VOI_SERIES_DERIVATIVE_CODE']").length)&&L.init(),i(".overlay-content .news-listing-wrap").length&&bt.init(".overlay-content .news-listing-wrap"),i(".get-image-by-url-param").length&&pa.init(),i(".gux-variable.gux-date-variable").length&&E.toDate(".gux-variable.gux-date-variable"),i(".gux-variable.url-data-variable").length&&E.replaceVariableByParamValue(".gux-variable.url-data-variable"),e.find(".image-fullscreen").each(function(){h.init(i(this))}),e.find(".actionsPanel").each(function(){F.init(i(this))}),e.find(".share-overlay").each(function(){_.init(i(this)),R.getShareEvents().init()}),e.find(".search").each(function(){f.init(i(this))}),0<i(".updateYourSync").length&&Mt.init(),0<i(".updatesync-scrollviewcontent").length&&Ot.init(),0<i(".reportYourSync").length&&ta.init(),0<i(".downloadSync").length&&Et.init(),0<i(".downloadSyncHistory").length&&Ut.init(),i(".ownerDownloadManualOverlay").length&&ea.init(),i(".overlay-container .form-dropdown").length&&v.init(".overlay-container .form-dropdown"),i("form").length&&(i("form").each(function(){g.init(i(this))}),i(".form-recaptcha").length&&!i(".preDeliveryManualForm").length&&P.init(),i(".form-recaptchav2").length&&T.init(),i(".SMSVerification").length&&Ba.init(),i(".serviceHistory").length&&i(".serviceHistory").each(function(){Ya.init(i(this))}),i(".form-radioButtons").length&&D.init(),i("input[name=downloadBrochurePath]").length&&x.init(),i(".printButton").length&&M.init(),i(".fieldsGroup").length&&N.init(),i(".form-checkbox").length&&A.init(),i(".form-payment-details").length&&I.init(),i(".form-first-dropdown").length&&y.init(),i(".form-1st-dropdown").length&&b.init(),i("first-dropdown").length&&w.init(),i(".postcodeCheck").length&&C.init(),i(".overlay-container .modelSeriesdropdown").length&&k.init(".overlay-container .modelSeriesdropdown"),i(".form-province-dropdown").length&&S.init(),i(".mobile.show-mob-only .showmore.txt-inline").length&&i(".mobile.show-mob-only .showmore.txt-inline").each(function(){O.initInline(i(this))}),i(".form-popup-375").length&&Va.init(),i(document).find(".fds-dropdown__select").length)&&bi.init(),i(".overlay-container .multi-step-form").length&&si.init(),i(".overlay-select-vehicle").length&&tt.init(".overlay-select-vehicle form"),i(".overlay-content-inner .recall-block").length&&lt.initOverlay(),i(".selectZipCity").length&&0==i(".selectZipCity").parents(".postalcode-overlay-container").length&&i(window).trigger("buildpriceLocation"),i(".selectZipCity").length&&0==i(".selectZipCity").parents(".postalcode-overlay-container").length&&i(window).trigger("buildpriceLocation"),i(".overlay-container .tabPanel").length&&i(".overlay-container .tabPanel").each(function(){n.init(i(this))}),i(".overlay-container .billboardCarousel").length&&o.init(),i(".overlay-container .brandGallery").length&&p.init(),i(".overlay-container.galleryCategory").length&&l.init(),i(".overlay-container .gallery-trigger").length&&(i(".gallery-trigger").each(function(){c.init(i(this))}),s.init()),i(".gallery-trigger, .galleryCategory, .brandGallery").length&&R.getGalleryEvents().init(),i(".overlay-container .video-single").each(function(){ze.init(this)}),i(".overlay-container .js-init-brightcove").each(function(){Ge.init(this)}),i(".overlay-container .colorizerthreesixty").length&&(dt.init(),R.getColorizerThreesixtyEvents().init()),i(".overlay-container .media-carousel").length&&r.init(),i(".overlay-container .youtubePlayer.section").length&&i(".overlay-container .youtubePlayer.section").each(function(){wi.init(i(this))})}),i(".my-profile").length&&Vt.init(),i(".richtext").length&&(je.init(),He.init()),i(window).on("ongalleryslideload",function(){var e=i(".gallery-trigger-carousel .slides-container").find(".is-active");e.find(".accordion").each(function(){m.init(i(this))}),e.find(".image-fullscreen").each(function(){h.init(i(this))}),e.find(".actionsPanel").each(function(){F.init(i(this))}),e.find(".share-overlay").each(function(){_.init(i(this)),R.getShareEvents().init()})}),i(window).on("onmodelsdisplayload onyoumightalsolikeload",function(){i(".disclosure-accordion").length&&d.init()}),i(".logout").length&&_t.init(),i(".delete-vehicle").length&&qt.init(),i(".accessoriesTile").length&&i(".accessoriesTile").children().length&&jt.init(),i(".creditOptions").length&&Ht.init(),i(".creditSummary").length&&(zt.init(),R.getCreditFinanceOptionsEvents().trackReturn()),i(".financeOptionTool").length&&la.init(),i(".build-and-price").length&&Wt.init(i(".build-and-price")),i(".build-and-price-v2").length&&Yt.init(i(".build-and-price-v2")),i(".build-and-price-dual").length&&Jt.init(i(".build-and-price-dual")),i(".owner-container").length&&Xt.init(),i(".latestOffers").length&&ha.init(),i(".specialOffers").length&&ti.init(),i(".monthly-payment-calculator").length&&ai.init(),i(".help-me-choose, .help-me-choose-fds, .advance-help-me-choose").length&&ni.init(),i(".help-me-choose-latam").length&&oi.init(),i(".dealer-locator-review").length&&ri.init(),i(".dealer-locator-review-full-page").length&&li.init(),i(".multi-step-form").length&&si.init(),i(".latestOffersModelDetails").length&&fa.init(),i(".latestOffersBuildPriceCarousel").length&&ga.init(),i(".refactoredModelDetailsCompare").length&&ka.init(),!i(".preDeliveryManualForm").length||i(".preDeliveryManualDataForm").length||i(".preDeliveryManualDataReferesh").length||Sa.init(),i(".preDeliveryManualDataForm").length&&i(".preDeliveryManualForm").length&&Da.init(),i(".preDeliveryManualDataReferesh").length&&i(".preDeliveryManualForm").length&&Pa.init(),i(".vehicledisplay").length&&Na.init(),i(".liveStreamVideo").each(function(e,t){xa.init(i(t))}),i(".vehiclemodel").length&&La.init(),i(".show-qrcode-layer").length&&R.getVehicleAttributeEvents().init(),i(".calContainer").length&&Qa.init(),i(".maintencaceContainer").length&&Za.init(),i(".trackDownloadVehiclePdfButton").length&&R.getServiceManualEvents().init(),i("#termsAndConditions").length&&ii.init(),i(".quickBnpContent").length&&di.init(),i(".service-calculator").length&&ui.init(),i(".esb-calculator").length&&pi.init(),i(".secondary-navigation-sticky").length&&mi.init(),i("#tableHistory").length&&hi.init(),i("[data-attribute-aa=isActiveAAEnhancement]").length&&1020<i(window).width()&&vi.init(),i(".brandcard").length&&yi.init(),i(document).find(".fds-dropdown__select").length&&bi.init(),i(".youtubePlayer.section").length&&i(".youtubePlayer.section").each(function(){wi.init(i(this))}),"true"===i('input[name="priceGeolocalizationEnable"]').val()&&Ci.init(),"true"===i('input[name="priceAccessoryState"]').val()&&"false"===i('input[name="priceGeolocalizationEnable"]').val()&&Ci.init(),i(".common-vehicle-attributes").length&&ki.init(),updateLocationPriceAjax(),i(".gux-variable.gux-date-variable").length&&setTimeout(function(){E.toDate(".gux-variable.gux-date-variable")},780);var t,a,e=window.location.search,e=new URLSearchParams(e);e.has("id")&&e.has("name")&&(t=e.get("id"),e=e.get("name"),(a=document.createElement("input")).type="hidden",a.id=e,a.value=t,document.body.appendChild(a)),R.init(),mt.init()}}}),define("model-details/component.modelDetails.app",["angular","angular-sanitize","angular-route"],function(e){return e.module("modelDetailPage",["ngRoute","ngSanitize"])}),define("model-details/component.modelDetails.controller",["model-details/component.modelDetails.app","model-details/controllers/component.modelDetails.controller.main"],function(e,t){e.controller("MainCtrl",["$scope",t])}),define("model-details/component.modelDetails",["jquery","_","angular","model-details/component.modelDetails.app","model-details/component.modelDetails.controller"],function(e,t,a,i,n){var o={init:function(){e(".model-details-page").each(function(e,t){a.bootstrap(t,["modelDetailPage"])})}};return o}),define("model-details/controllers/component.modelDetails.controller.main",["jquery","_"],function(n,o){return function(e,t){var i=this,a=".model-details-page .configuration";i.testAttrData=function(e){return void 0!==e&&!1!==e&&""!==e},i.getConfig=function(e,t,a){if(n(e).length){e=n(e).attr("data-"+t);if(i.testAttrData(e)){if(e=decodeURIComponent(e),void 0!==a&&"number"===a)return parseInt(e);if(void 0===a||"object"!==a)return e;t=JSON.parse(e);if(!n.isEmptyObject(t))return t}}return!1},i.modelDetailCode=i.getConfig(a,"modelDetailCode"),i.selectOtherModelsToCompareLabel=i.getConfig(a,"selectOtherModelsToCompareLabel"),i.addModelsToCompareLabel=i.getConfig(a,"addModelsToCompareLabel"),i.toCompareLabel=i.getConfig(a,"toCompareLabel"),i.viewAllOfferPath=i.getConfig(a,"viewAllOfferPath"),i.viewAllOfferLabel=i.getConfig(a,"viewAllOfferLabel"),i.openViewAllOfferAsOverlay=i.getConfig(a,"openViewAllOfferAsOverlay"),i.bookATestDrivePath=i.getConfig(a,"bookATestDrivePath"),i.bookATestDriveLabel=i.getConfig(a,"bookATestDriveLabel"),i.openBookATestDriveAsOverlay=i.getConfig(a,"openBookATestDriveAsOverlay"),i.buildYourFordPath=i.getConfig(a,"buildYourFordPath"),i.buildYourFordLabel=i.getConfig(a,"buildYourFordLabel"),i.openBuildYourFordAsOverlay=i.getConfig(a,"openBuildYourFordAsOverlay"),i.showDiffOnly=i.getConfig(a,"showDiffOnly"),i.overviewPath=i.getConfig(a,"overviewPath"),i.overviewLabel=i.getConfig(a,"overviewLabel"),i.selectModelLabel=i.getConfig(a,"selectModelLabel"),i.confirmLabel=i.getConfig(a,"confirmLabel"),i.cancelLabel=i.getConfig(a,"cancelLabel"),i.allModel=i.getConfig(a,"modelAttribute","object"),i.models=[],i.modelFeatures=null,i.fixedModelClass="model-fixed",i.modelClassPrefix="model-key-",i.modelAddedClass="added-to-compare",i.isMobile=!1,n(window).width()<768&&(i.isMobile=!0),i.addModelToCompare=function(t,e){e&&e.preventDefault();e="."+i.modelClassPrefix+t;if(!n(e).hasClass(i.fixedModelClass))if(n(e).hasClass(i.modelAddedClass))i.models=o.without(i.models,o.findWhere(i.models,{key:t})),n(e).removeClass(i.modelAddedClass);else{if(n(window).width()<768){if(2<=i.models.length)return}else if(3<=i.models.length)return;o.each(i.allModel,function(e){e.key===t&&i.models.push(e)}),n(e).addClass(i.modelAddedClass)}},i.getFeatures=function(t){o.each(i.allModel,function(e){e.key===t&&(e=o.uniq(e.featuresList,function(e){return e.categoryName}),i.modelFeatures=e)})},i.getFeatures(i.modelDetailCode),i.addModelToCompare(i.modelDetailCode)}}),define("model-details-compare/component.modelDetailsCompare",["jquery","_","hammer","cookie","mediaQuery","disclosure/component.disclosure","tooltip-gux/global.ux.tooltip","analytics/analyticsEventLayer"],function(I,$,o,v,y,r,L,s){var l={},b=I("#compare-container").data("compareattribute"),i=I("#compare-container").data("nameplate-key"),w=I("#compare-container").data("pathjson"),h=I(".model-details-compare").find("input[name=isBuildAndPrice]").val(),f=1===$.size(b)?" btn-disabled ":"",d="",C=[],k=[],M=[],S=[],u="",x=[],g="this-page-of-this-model",D=I("#compare-container").attr("data-carName"),n=I("#vehicleModelPage").attr("data-pagename");if(I("#compare-container").length&&b)for(var e=0;e<b.length;e++){var t=b[e].featuresList;if(void 0!==t)for(var a=0;a<t.length;a++){var c=t[a].categoryName,p=t[a].desc;t[a].categoryName=c.toString().replace(/^\s+|\s+$/g,""),t[a].desc=p.toString().replace(/^\s+|\s+$/g,"")}}function P(e){(P.prototype._singletonInstance=this).opts=I.extend({bpDesktop:1200,bpTablet:768,bpSmall:640,btnAddToCompare:".btn.addto-compare",dataToggle:"data-toggle",btnOpenPopup:".btn.select-to-compare",popupClass:".popup-select-other-model",bgOverlayPopup:".model-popup-background",btnClosePopup:".popup-wrapper > .close",btnCancelPopup:".popup-wrapper > #popup-content >.action > .cancel",btnConfirmPopup:".popup-wrapper > #popup-content >.action > .confirm",scrollWrapper:".scroll-wrapper > ul",scrollSpeed:5,syncScroll:!0,equalHeightItems:".equal-height",equalHeightAttr:"data-equal",modelNameClass:".compare-header .model-name",modelImageClass:".image",stickyHeader:".compare-header",stickyFooter:".compare-footer",stickyWrapper:".sticky-wrapper",stickyContainer:".grid-container",stickyNav:".navigation.fixed",stickyDesktopHeight:400,stickyTableHeight:400,stickyMobileHeight:120},e=e||{}),this.init()}function m(){I('.modelDetailsCompare span[id*="maxPrice"]').html(""),I('.modelDetailsCompare span[id*="maxPrice"]').closest("li").css("display","none"),I('.modelDetailsCompare span[id*="startingPrice"]').html(""),I('.modelDetailsCompare span[id*="startingPrice"]').closest("li").css("display","none"),I('.modelDetailsCompare span[id*="priceRange"]').html(""),I('.modelDetailsCompare span[id*="priceRange"]').closest("li").css("display","none"),I('.modelDetailsCompare .store-popuphtml p[class*="maxPrice"]').css("display","none"),I('.modelDetailsCompare .store-popuphtml p[class*="startingPrice"]').css("display","none"),I('.modelDetailsCompare .store-popuphtml p[class*="priceRange"]').css("display","none")}function T(l){l&&I(".modelDetailsCompare .compare-container").each(function(){var e=I(this),t=e.attr("data-nameplate-key").split(",");if(t.length)for(var a=0;a<t.length;a++)if(l[t[a]])for(var i=l[t[a]].derivatives,n=0;n<i.length;n++){var o=i[n].maxPrice,r=i[n].startingPrice;o?e.find('span[id="maxPrice'+i[n].id+'"]').html(o):e.find('span[id="maxPrice'+i[n].id+'"]').html(""),r?e.find('span[id="startingPrice'+i[n].id+'"]').html(r):e.find('span[id="startingPrice'+i[n].id+'"]').html(""),e.find('span[id="priceRange'+i[n].id+'"]').length&&o&&r?e.find('span[id="priceRange'+i[n].id+'"]').html(r+"&nbsp;-&nbsp;"+o):e.find('span[id="priceRange'+i[n].id+'"]').html("")}})}return P.prototype.init=function(){var e,t,a;this.initHtml(),this.selectOtherModel(),this.toggleContent(),this.swipeScroll(),this.equalHeightAttributes(),this.stickyHeader(),this.stickyFooter(),this.onMobile(),fordAnalytics&&(e=fordAnalytics.nameplate,t=fordAnalytics.modelSeries,a=n||fordAnalytics.modelCode,s.getModelWalkAndCompareEvents().initModelSeriesNameplate(e,t,a)),I(".sticky-wrapper").hasClass("stick")&&I(".main-nav").show(),I(window).load(function(){updatePriceAjax(I("#isDynamicPrice").val(),I(".model-details-compare").find("input[name=combinedKey]").val(),"",[".model-details-compare .vehicleAttr"])})},P.prototype.compareModelKey=function(){var e=!0;if(""!==v.getCookie("modelCompare"))for(var t=v.getCookie("modelCompare").split(":"),a=I('.model-details-compare input[name="combinedKey"]').val().split(","),i=0;i<t.length;i++)$.contains(a,t[i])||(e=!1);else e=!1;return e},P.prototype.initHtml=function(){w&&w.modelDetailCode&&(""===(f=v.getCookie("modelCompare"))||f.indexOf(w.modelDetailCode)<0?v.setCookieWithPath("modelCompare",w.modelDetailCode,1,"/"):0<f.indexOf(w.modelDetailCode+":")?(l=(a=w.modelDetailCode+":")+f.replace(new RegExp(a,"g"),""),v.setCookieWithPath("modelCompare",l,1,"/")):0<f.indexOf(":"+w.modelDetailCode)&&(a=":"+w.modelDetailCode,l=w.modelDetailCode+":"+f.replace(new RegExp(a,"g"),""),v.setCookieWithPath("modelCompare",l,1,"/"))),f=v.getCookie("modelCompare");var e,t,a=this.compareModelKey();if(!f||!b||!a)return w&&w.overviewPath&&(window.location=w.overviewPath),!1;t=f.split(":"),0;var i=[],n=[],o=[],r=0,l="mobile"===y.getMediaType(),a={};if(0<b.length&&0<t.length){for(var s=0;s<t.length;s++)for(var c=0;c<b.length;c++)b[c].key===t[s]&&i.push(b[c]);a.vehicleName="",a.key="",a.imgUrl=i[0].imgUrl,l?i.length<2&&i.push(a):(1===i.length&&i.push(a,a),2===i.length&&i.push(a)),k=[];for(var d=0;d<i.length;d++){for(var u=i[d],r=0,p=0;p<t.length;p++)if(u.key==t[p]){var m=!0;if(0<n.length)for(var h in n)if(u.key==n[h].key){m=!1;break}m&&(n.push(u),k.push(u),r=1)}0==r&&o.push(u)}}var f=(M=n).length%3,g=3-f;if(0!=f)for(d=0;d<o.length;d++)d<g&&n.push(o[d]);C=n,S=o,l=P.prototype.formHeader(n,w,x),a=P.prototype.formDetails(n,0,x),f=P.prototype.formFooter(n,w),e=P.prototype.formPopup(n,w,o,x),I("#compare-container").html(""),I("#compare-container").append(l),I("#compare-container").append(a),1<b.length&&I("#compare-container").append(f),I(".store-popuphtml").html(""),I(".store-popuphtml").append(e)},P.prototype.clickModel=function(){},P.prototype.formHeader=function(e,t,a){var i="",n=I('.model-details-compare input[name="dualCurrency"]').val();if(0<e.length){i=(i=(i=i+"<div class='compare-grid compare-header'>"+"<div class='sticky-wrapper'>")+"<div class='grid-container'>"+("<div class ='clearfix'><a href='"+t.overviewPath+"'class='btn btn-white back-to-overview'>"+t.overviewLabel+"</a></div>"))+"<div class='group-label'>&nbsp;</div>"+"<div class='scroll-wrapper'>",t.showDiffOnly&&(i+="<div class ='compare-bot show-diff' style='display: block;'><div class='input-checkbox'><input type='checkbox' value='' class='show-differences-only' name='show-differences-only'><span></span></div>Show Differences Only</div>"),i+="<ul>";for(var o=0;o<e.length;o++){var r=o+1,l="li-id-"+r,s=e[o],c="model-id-0"+r,d="model-group-id-0"+r,u=(t&&t.modelDetailCode&&t.modelDetailCode===s.key?i+="<li id='"+l+"' class='"+g+"'>":i+="<li id='"+l+"'>",i+="<h2 class='model-name'>"+s.vehicleName+"</h2><div class='image'><img src='"+s.imgUrl+"' alt='"+s.imgAltTxt+"'/></div><div data-toggle='"+c+"'>",s.vehicleAttributes);if(u){var p="";i+="<ul class='vehicleAttr'>";for(var m=0;m<u.length;m++)p=void 0!==u[m].attributeDisclosure?'<sup data-disclosure="'+u[m].attributeDisclosure+'" tabindex="0" style="display: inline;">'+u[m].attributeDisclosure+"</sup>":"",i+="<li><label>"+u[m].attributeName+"</label>","true"==n&&u[m].attribute.startsWith("startingPrice")&&(i+="<div style='margin-top:-20px'>"),"true"==n&&u[m].attribute.startsWith("maxPrice")&&(i+="<div style='margin-top:-20px'>"),u[m].prefix&&(i+=u[m].prefix),u[m].attribute.startsWith("startingPrice")&&s.Zone0StartingPrice&&(i+=" <span class='zonePriceYes' >"+s.Zone0StartingPrice+"</span>"),i+=" <span  class='zonePriceBuilding' id="+u[m].attribute+">"+u[m].attributeValue+"</span>",u[m].suffix&&(i+=u[m].suffix),i+=p+"</li>";i+="</ul>"}t.viewAllOfferPath&&t.viewAllOfferLabel&&(i+="<a href='"+t.viewAllOfferPath+"'class ='"+N(t.openViewAllOfferAsOverlay,"btn")+"'>"+t.viewAllOfferLabel+"</a>"),t.bookATestDrivePath&&t.bookATestDriveLabel&&(i+="true"==h?"<a href='"+A(t.bookATestDrivePath,s)+"'class ='"+N(t.openBookATestDriveAsOverlay,"btn")+"'data-autopopulate ='true' data-nameplate ='"+D+"' data-modelname='"+s.vehicleName+"'>"+t.bookATestDriveLabel+"</a>":"<a href='"+t.bookATestDrivePath+"'class ='"+N(t.openBookATestDriveAsOverlay,"btn")+" testDriveCTA' data-autopopulate ='true'  data-nameplate ='"+D+"' data-modelName='"+s.vehicleName+"'>"+t.bookATestDriveLabel+"</a>"),t.buildYourFordPath&&t.buildYourFordLabel&&(i+="<a href='"+t.buildYourFordPath+"'class = '"+N(t.openBuildYourFordAsOverlay,"btn")+" trackPaymentCalculator'>"+t.buildYourFordLabel+"</a>"),i=i+("<a href='#"+d+"' data-key='"+e[o].key+"' class='btn btn-white select-to-compare "+f+"'>"+t.selectOtherModelsToCompareLabel+"<span class='hidden-mobile'> "+t.toCompareLabel+"</span></a>")+"</div>",r<=b.length&&(i+=" <a href='javascript:void(0);' class='btn btn-white addto-compare "+f+"' data-toggle='"+c+"'>"+t.addModelsToCompareLabel+" <span class='hidden-mobile'> "+t.toCompareLabel+"</span></a>"),i+="</li>"}i=(i=(i+="</ul>")+"</div>"+"</div>")+"</div>"+"</div>"}return i},P.prototype.formHeaderHtml=function(e){for(var t="",a=0;a<e.length;a++){var i=a+1,n=e[a],o="model-id-0"+i,r="model-group-id-0"+i,l=(t=(t+="<li id='"+("li-id-"+i)+"'>")+("<h2 class='model-name'>"+n.vehicleName+"</h2><div class='image'><img src='"+n.imgUrl+"' alt='"+n.imgAltTxt+"'/></div><div data-toggle='"+o+"'>"),n.vehicleAttributes);if(l){var s="";t+="<ul>";for(var c=0;c<l.length;c++)void 0!==l[c].attributeDisclosure&&(s='<sup data-disclosure="'+l[c].attributeDisclosure+'" tabindex="0">'+l[c].attributeDisclosure+"</sup>"),t+="<li><label>"+l[c].attributeName+"</label>",l[c].prefix&&(t+=l[c].prefix),t+="<span id="+l[c].attribute+">"+l[c].attributeValue+"</span>",l[c].suffix&&(t+=l[c].suffix),t+=s+"</li>";t+="</ul>"}w.viewAllOfferPath&&w.viewAllOfferLabel&&(t+="<a href='"+w.viewAllOfferPath+"'class ='btn'>"+w.viewAllOfferLabel+"</a>"),w.bookATestDrivePath&&w.bookATestDriveLabel&&(t+="true"==h?"<a href='"+A(w.bookATestDrivePath,n)+"'class ='btn'>"+w.bookATestDriveLabel+"</a>":"<a href='"+w.bookATestDrivePath+"'class ='btn'>"+w.bookATestDriveLabel+"</a>"),w.buildYourFordPath&&w.buildYourFordLabel&&(t+="<a href='"+w.buildYourFordPath+"'class ='btn'>"+w.buildYourFordLabel+"</a>"),t=t+("<a href='#"+r+"' data-key='"+e[a].key+"' class='btn btn-white select-to-compare "+f+"'>"+w.selectOtherModelsToCompareLabel+" <span class='hidden-mobile'> "+w.toCompareLabel+"</span></a>")+"</div>",i<=b.length&&(t+=" <a href='javascript:void(0);' class='btn btn-white addto-compare "+f+"' data-toggle='"+o+"'>"+w.addModelsToCompareLabel+" <span class='hidden-mobile'> "+w.toCompareLabel+"</span></a>"),t+="</li>"}return t},P.prototype.refreshHeader=function(e,t,a,i,n){var o="",r=(o=(o=o+("<li id='"+n+"'>")+("<h2 class='model-name active'   style='min-height: 29px;'>"+e.vehicleName+"</h2>"))+("<div class='image active'><img src='"+e.imgUrl+"' alt='"+e.imgAltTxt+"'></div>")+("<div data-toggle='"+a+"' class='show'>"),e.vehicleAttributes);if(r){var l="";o+="<ul>";for(var s=0;s<r.length;s++)void 0!==r[s].attributeDisclosure&&(l='<sup data-disclosure="'+r[s].attributeDisclosure+'" tabindex="0">'+r[s].attributeDisclosure+"</sup>"),o+="<li><label>"+r[s].attributeName+"</label>"+r[s].prefix+"<span id="+r[s].attribute+">vehicleAttribute[i].attributeValue</span>"+r[s].suffix+l+"</li>";o+="</ul>"}return t.viewAllOfferPath&&t.viewAllOfferLabel&&(o+="<a href='"+t.viewAllOfferPath+"'class ='btn'>"+t.viewAllOfferLabel+"</a>"),t.bookATestDrivePath&&t.bookATestDriveLabel&&(o+="<a href='"+t.bookATestDrivePath+"'class ='btn'>"+t.bookATestDriveLabel+"</a>"),t.buildYourFordPath&&t.buildYourFordLabel&&(o+="<a href='"+t.buildYourFordPath+"'class ='btn'>"+t.buildYourFordLabel+"</a>"),o=(o=o+("<a href='#"+i+"' data-key='"+e.key+"' class='btn btn-white select-to-compare "+f+"'>"+t.selectOtherModelsToCompareLabel+" <span class='hidden-mobile'> "+t.toCompareLabel+"</span></a>")+"</div>")+(" <a href='javascript:void(0);' class='btn btn-white addto-compare show "+f+"' data-toggle='"+a+"'  style='display: none;'>"+t.addModelsToCompareLabel+" <span class='hidden-mobile'> "+t.toCompareLabel+"</span></a>")+"</li>"},P.prototype.formDetails=function(e,t){for(var a="",i="",n=(I('input[name="separatorStyle"]').length&&(i=I('input[name="separatorStyle"]').val()),{}),o=0;o<e.length;o++){var r=e[o].featuresList;if(r)for(var l=0;l<r.length;l++){var s=r[l].categoryName,c=r[l].desc,d="";if(r[l].value&&(d+=r[l].value),n[s]){if(n[s].featuresList){if(n[s].featuresList[c])(u=n[s].featuresList[c])[o]=d;else{for(var u=[],p=0;p<3;p++)u.push(0);u[o]=d}n[s].featuresList[c]=u}}else{for(var m=[],u=[],p=0;p<3;p++)u.push(0);u[o]=d,m[c]=u,n[s]=[],n[s].featuresList=m}}}for(var h=[],o=0;o<e.length;o++)e[o].featuresList&&(h=h.concat(e[o].featuresList));if(h){var f={},g={},v=[],y=[];for(o in h)void 0===f[h[o].desc]&&v.push(h[o].desc),void 0===g[h[o].groupName]&&y.push(h[o].groupName)}a+="<div id='detailsSection'>";for(var b=$.sortBy($.keys(n),function(e){return e}),o=0;o<b.length;o++){a=(a=(a+="<div class='compare-grid compare-details'>")+"<div class='grid-container'>"+("<div class='group-label'>"+(s=b[o])+"</div>"))+"<div class='scroll-wrapper'>"+"<ul>";for(var w=0;w<e.length;w++){for(var C,k="model-id-0"+(w+1),S=(1==t?w<=M.length&&(a+="<li data-toggle='"+k+"' class='show'>"):a+="<li data-toggle='"+k+"'>",a+="<ul>",0),x=(void 0!==(P=I(".compare-container").attr("data-disclosure-feature-mapping"))&&(C=JSON.parse(P)),$.keys(n[s].featuresList)),D=0;D<x.length;D++){var P,c=x[D],T=(S++,n[s].featuresList[c]),N="",N=S<10?"attribute-id-0"+S:"attribute-id-"+S,A="";if(void 0===T[w])break;0!=T[w]?A=c+" "+i+" "+T[w]:"0"!=T[w]&&(A=c),void 0!==C&&void 0!==C[c]?(P=C[c],a+="<li><span class='equal-height' data-equal='"+N+"'>"+A+" "+(""==A?"":'<span class="gux-tooltip" data-gux-tooltip-text="'+P+'" tabindex="0"></span>')+"</span></li>",L.init()):a+="<li><span class='equal-height' data-equal='"+N+"'>"+A+"</span></li>",0}a=a+"</ul>"+"</li>"}a=(a=a+"</ul>"+"</div>")+"</div>"+"</div>"}return a+="</div>"},P.prototype.formFooter=function(e,t){var a="";if(0<e.length){for(var a=(a=(a+="<div class='compare-grid compare-footer'>")+"<div class='grid-cointainer'>"+"<div class='group-label'>&nbsp;</div>")+"<div class='scroll-wrapper'>"+"<ul>",i=0;i<e.length;i++){var n=i+1,o="model-id-0"+n;t&&t.modelDetailCode&&t.modelDetailCode===e[i].key?a+="<li class='"+g+"'>":a+="<li>",a=(a+="<div data-toggle='"+o+"'>")+("<a href='#"+("model-group-id-0"+n)+"' class='btn btn-white select-to-compare' data-key='"+e[i].key+"'>"+t.selectOtherModelsToCompareLabel+" <span class='hidden-mobile'> "+t.toCompareLabel+"</span></a>")+"</div>",n<=b.length&&(a+=" <a href='javascript:void(0);' class='btn btn-white addto-compare' data-toggle='"+o+"'>"+t.addModelsToCompareLabel+" <span class='hidden-mobile'> "+t.toCompareLabel+"</span></a>"),a+="</li>"}a=(a=a+"</ul>"+"</div>")+"</div>"+"</div>"}return a},P.prototype.formPopup=function(e,t,a){for(var i="",n=0;n<b.length;n++)i=(i=(i=(i=(i=(i=i+"<div id='"+("model-group-id-0"+(n+1))+"' class='popup-select-other-model' style='display:none;'><div class='popup-wrapper'>")+"<a href='javascript:void(0);' class='close'>"+t.cancelLabel+"</a><div id='popup-content'>")+"<h2>"+t.selectModelLabel+"</h2><div class='list-model'><ul>")+P.prototype.formPopupCars(b,!1)+"</ul></div><div class='action'>")+"<a href='javascript:void(0);' class='btn btn-white cancel'>"+t.cancelLabel+"</a>")+"<a href='javascript:void(0);' class='btn confirm'>"+t.confirmLabel+"</a></div></div></div></div>";return i+="<div class='model-popup-background' style='opacity: 0; display: none;'>&nbsp;</div>"},P.prototype.formPopupCars=function(e,t){for(var a=I('.model-details-compare input[name="dualCurrency"]').val(),i="",n=0;n<e.length;n++){i+="<li>",i=t?(i+="<div class='desc'><div class='input-checkbox'>")+"<input type='checkbox' name='model-input-name' class='"+e[n].key+"' value='"+e[n].key+"' checked='checked' disabled='disabled' />":(i+="<div class='desc'><div class='input-checkbox'>")+"<input type='checkbox' name='model-input-name' class='"+e[n].key+"' value='"+e[n].key+"' />";var i=(i=(i+="</div>")+("<h3>"+e[n].vehicleName+"</h3>"))+("<div class='img'><img src='"+e[n].imgUrl+"' alt='"+e[n].imgAltTxt+"'></div>"),o=e[n].vehicleAttributes;if(null!=o)for(var r=0;r<o.length;r++){var l=o[r].attributeName,s=o[r].prefix,c=o[r].attribute,d=o[r].attributeValue,u=o[r].suffix;null==d&&(d=""),null==s&&(s=""),null==u&&(u=""),i+="<p "+('class="'+(o[r].attribute||"")+'"')+" >"+(l=null==l?"":l),"true"==a&&(c.startsWith("startingPrice")||c.startsWith("maxPrice"))&&(i+="<br>"),i+=" "+s+d+u+"</p>"}}return i=i+"</div>"+"</li>"},P.prototype.replaceListModel=function(e,t,a){var i="";return i+"<div class='list-model'>"+"<ul>"+P.prototype.formPopupCars(b,!1)+"</ul>"+"</div>"},P.getInstance=function(){return P.prototype._singletonInstance=null==P.prototype._singletonInstance?new P:P.prototype._singletonInstance},P.prototype.checkboxes=function(e,t){var a=I(".input-checkbox"),i=v.getCookie("modelCompare").split(":");I(e).find("input").each(function(){for(var e=0;e<i.length;e++){var t=i[e];I(this).hasClass(t)&&(I(this).parent().addClass("checked"),I(this).addClass("disabled checked"),I(this).attr("disabled","disabled"),I(this).attr("checked","checked"))}}),a.on("click",function(e){e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation();var t,e=I(this).find("input");return e.is(":disabled")||(t=I(this).closest(".popup-select-other-model").find(".list-model .desc").not(".disabled"),d=d===e.val()?(I(this).removeClass("checked"),e.prop("checked",!1),""):(t.find("input").prop("checked",!1),t.find(".input-checkbox").removeClass("checked"),I(this).addClass("checked"),e.prop("checked",!0),e.val())),!1})},P.prototype.onMobile=function(){var e=this;function t(){var e="mobile"===y.getMediaType();""!==v.getCookie("modelCompare")&&e?1===(e=v.getCookie("modelCompare").split(":")).length?I(".model-details-compare .compare-grid").addClass("single-model"):1<e.length&&I(".model-details-compare .compare-grid").removeClass("single-model"):I(".model-details-compare .compare-grid").removeClass("single-model")}t(),I(window).on("resize",$.throttle(function(){t(),e.equalHeightAttributes()},500))},P.prototype.stickyHeader=function(){var a,i,n=this.opts.stickyHeader,o=this.opts.stickyWrapper,r=this.opts.stickyContainer,l=this.opts.stickyNav,e=this.opts.stickyDesktopHeight,t=this.opts.stickyTableHeight,s=this.opts.stickyMobileHeight,c=this.opts.bpDesktop,d=this.opts.bpTablet,u=this,p=0,m=!1;function h(){I(window).width();m=!!I(n).length&&(a=I(n).offset().top+I(n).outerHeight(),!0)}function f(){var e=I(window).scrollTop(),t=I(window).width();i=I(l).length?I(l).outerHeight():i=0,a<=e?I(r).parent(o).hasClass("stick")&&p==i||(p=i,I(n).css("min-height",a),I(r).parent(o).css("top",i).addClass("stick"),u.equalHeight(u.opts.modelNameClass)):(I(n).css("min-height","auto"),I(r).parent(o).removeClass("stick").css("top","auto"),u.equalHeight(u.opts.modelNameClass))}h(),f(),I(window).on("scroll",$.throttle(function(){m||h(),f()},50)),I(window).resize(function(){I(n).css("min-height","auto"),h(),f()})},P.prototype.stickyFooter=function(){var t=this.opts.stickyFooter,a=I(".model-details-compare"),i=0;I(window).on("scroll",$.throttle(function(){var e;e=I(window).scrollTop(),I(".stickyNavAPO").find(".stickybar-mobile-component")&&(i=I(".stickyNavAPO").find(".stickybar-mobile-component").height()),e>a.height()-380?(I(t).css("position","relative"),I(t).css("bottom","0")):(I(t).css("position","fixed"),I(t).css("bottom",i+"px"))},50))},P.prototype.reinitBtns=function(){var i=I(".input-checkbox");I(".btn.select-to-compare").on("click",function(e){e.preventDefault();var t=I(this).attr("href"),a=I(this).data("key"),e=P.prototype.replaceListModel(C,w,S);I(t+" > .popup-wrapper > #popup-content > .list-model").replaceWith(e),I(t+",.model-popup-background").addClass("before-show").show().animate({opacity:1}).promise().done(function(){I(this).addClass("active").removeClass("before-show"),P.prototype.checkboxes(t,a),i.length&&i.each(function(){I(this).find("input").is(":disabled")&&I(this).closest(".desc").length&&I(this).closest(".desc").addClass("disabled")})})})},P.prototype.selectOtherModel=function(){var i=this,e=this.opts.btnOpenPopup,n=this.opts.bgOverlayPopup,t=this.opts.btnClosePopup,a=this.opts.btnCancelPopup,o=this.opts.btnConfirmPopup,r=this.opts.popupClass,l=I(".input-checkbox");I(e).on("click",function(e){if(e.preventDefault(),I(this).hasClass("fromAddButton")?I(this).removeClass("fromAddButton"):s.getModelWalkAndCompareEvents().trackCompareChangeAdd("analyticsCompareSelect"),I(this).closest("."+g).length)return!1;var t=I(this).attr("href"),a=I(this).data("key");u=a,P.prototype.replaceListModel(C,w,S);I(t+","+n).addClass("before-show").show().animate({opacity:1}).promise().done(function(){I(this).addClass("active").removeClass("before-show"),i.checkboxes(t,a),l.length&&l.each(function(){I(this).find("input").is(":disabled")&&I(this).closest(".desc").length&&I(this).closest(".desc").addClass("disabled")})})}),I(o).on("click",function(e){var t=I("#fpsDomainName").data("domainname"),a=window.location.href,i=encodeURIComponent(a),n=I("#compare-container").attr("data-nameplatekey"),a=I(this).closest(".popup-select-other-model").attr("id"),o=a.replace("model-group-id-0","")-1;if(d){for(var r=0;r<S.length;r++)if(S[r].key&&d==S[r].key){t&&FPS.set([FPS.lib.ActionTrim("Year","Ford",n,d,FPS.actions.ViewModelDetail,i)],{success:function(e){console.log(e)},error:function(e){console.log(e)}});var l=S[r];S[r]=C[o],C[o]=l;break}var s="";I("#"+a).find("input").each(function(){this.checked&&this.value!=u&&(s=s?s+":"+this.value:this.value)}),v.setCookieWithPath("modelCompare",s,1,"/")}new P;var a="mobile"===y.getMediaType(),a=(I(".compare-header .scroll-wrapper > ul > li .addto-compare").length&&(I(".compare-header .scroll-wrapper > ul > li .addto-compare").each(function(e){e<k.length&&I(this).trigger("click")}),I(".compare-header .scroll-wrapper > ul > li .addto-compare").unbind("click"),I(".compare-header .scroll-wrapper > ul > li .addto-compare").each(function(){var e;I(this).hasClass("show")||(e=this.parentNode.id,I("#"+e).find(".select-to-compare").data("key","")),I(this).on("click",function(){I(this).parent().find(".select-to-compare").click()})}),a)&&(I("#li-id-3").remove(),I('li[data-toggle="model-id-03"]').remove(),I('a[data-toggle="model-id-03"]').parent().remove()),I.cookie("common.location.LOC")),c=I("#isDynamicPriceBasedLocation").val();return a||"true"!==c||m(),a&&"true"===c&&(a=window.localStorage.getItem("common.location."+I("#countryCodeISO").val()+"."+I.cookie("common.location.LOC")+".prices"))&&T(JSON.parse(a)),require("disclosure/component.disclosure").init(),require("overlay/component.overlay").overlays[0].addBaseUrl(),!1}),I(a).on("click",function(){var e=I(this).parent(".action").prev(".list-model").find(".input-checkbox.checked");e.length&&e.each(function(){I(this).find("input").is(":disabled")||I(this).find("input").attr("checked",!1)}),I(this).parent(".action").prev(".list-model").find(".input-checkbox.checked").removeClass("checked"),d=""}),I(n+","+t+","+a).on("click",function(e){I();return I(r+","+n).addClass("before-close").fadeOut(250,function(){I(this).css("opacity",0).hide().removeClass("active before-close")}),!1})},P.prototype.toggleContent=function(){var t=this,a=(this.opts.btnOpenPopup,this.opts.btnAddToCompare),i=this.opts.dataToggle,n=this.opts.modelImageClass,o=this.opts.modelNameClass;I(a).on("click",function(){var e=I(this).attr(i);d="",I(this).hide(),I(a+"["+i+'="'+e+'"]').hide(),I("["+i+'="'+e+'"]');I("["+i+'="'+e+'"]').toggleClass("show"),l.showDifferencesOnly(),I(this).siblings(o).length&&I(this).siblings(o).addClass("active"),I(this).siblings(n).length&&I(this).siblings(n).addClass("active"),t.equalHeightAttributes()})},P.prototype.swipeScroll=function(){var t=this.opts.scrollWrapper,a=this.opts.scrollSpeed,i=this.opts.syncScroll,n={dragLockToAxis:!0,dragBlockHorizontal:!0};I(t).each(function(){var e=new o(I(this)[0],n);e.on("panleft swipeleft",function(e){!0===i?I(t).scrollLeft(I(t).scrollLeft()+a):I(this).scrollLeft(I(this).scrollLeft()+a)}),e.on("panright swiperight",function(e){!0===i?I(t).scrollLeft(I(t).scrollLeft()-a):I(this).scrollLeft(I(this).scrollLeft()-a)})})},P.prototype.toUnique=function(e,t,a){for(t=e.length;a=--t;)for(;a--;)e[t]===e[a]&&e.splice(a,1);return e},P.prototype.equalHeight=function(e){var t=0;I(e).css("min-height","auto"),I(e).each(function(){var e=I(this).outerHeight();t<e&&(t=e)}),I(e).css("min-height",t)},P.prototype.getVehiceAttributes=function(){var e=[],t=[],a=this.opts.equalHeightItems,i=this.opts.equalHeightAttr;return I(a).each(function(){e.push(I(this).attr(i))}),t=0<e.length?this.toUnique(e):t},P.prototype.equalHeightAttributes=function(){var o=this,r=(this.getVehiceAttributes(),this.opts.equalHeightAttr),e=this.opts.modelNameClass;I("#detailsSection .compare-grid.compare-details").each(function(){var e,i=I(this).find("ul").first().find(".equal-height"),t=[],a=[],n=(i.each(function(){t.push(I(this).attr(r))}),0<t.length&&(a=o.toUnique(t)),[]);for(e in I.each(a,function(e,t){var a=0;i.each(function(){var e;I(this).css("min-height","auto"),I(this).attr(r)==t&&(e=I(this).outerHeight(),a<e)&&(a=e,n[t]=a)})}),n)i.each(function(){e==I(this).attr("data-equal")&&I(this).css("min-height",n[e])})}),I(e).length&&o.equalHeight(e)},l.init=function(){var e,t,a,i,n=I("#namePlates"),n=(n.length?n.val(n.val()+","+I("#compare-container").attr("data-nameplate-key")):I("body").append(I('<input type="hidden" id="namePlates" value='+I("#compare-container").attr("data-nameplate-key")+">")),new P,I("#compare-container").on("click",".trackPaymentCalculator",function(){s.getSimpleEmiCalCulatorEvents().trackPaymentCalculatorButton()}),"mobile"===y.getMediaType()),n=(I(".compare-header .scroll-wrapper > ul > li .addto-compare").length&&(I(".compare-header .scroll-wrapper > ul > li .addto-compare").each(function(e){e<k.length&&I(this).trigger("click")}),I(".compare-header .scroll-wrapper > ul > li .addto-compare").unbind("click"),I(".compare-header .scroll-wrapper > ul > li .addto-compare").each(function(){var e;I(this).hasClass("show")||(e=this.parentNode.id,I("#"+e).find(".select-to-compare").data("key","")),I(this).on("click",function(){s.getModelWalkAndCompareEvents().trackCompareChangeAdd("analyticsCompareAdd"),I(this).parent().find(".select-to-compare").addClass("fromAddButton").click()})}),I(".compare-footer .scroll-wrapper li .addto-compare").on("click",function(){I(this).parent().find(".select-to-compare").click()}),this.showDifferencesOnly(),n&&(I("#li-id-3").remove(),I('li[data-toggle="model-id-03"]').remove(),I('a[data-toggle="model-id-03"]').parent().remove()),I(".modelDetailsCompare").addClass("resultsPage")),I("#compare-container").find("sup[data-disclosure]")),o=[];I.each(n,function(e,t){o.push(I(t).attr("data-disclosure"))}),o=$.uniq(o),I.each(o,function(e,a){var t=I("#compare-container").find('sup[data-disclosure="'+a+'"]');I.each(t,function(e,t){r.initOne(I(t),a)})}),n=I.cookie("common.location.LOC"),e=I.cookie("common.location.type"),t=I(".modelDetailsCompare .location-overlay").attr("data-commercial-label"),i=I(".modelDetailsCompare .location-overlay").attr("data-personal-label"),a=I("#isDynamicPriceBasedLocation").val(),I(".modelDetailsCompare .location-overlay .prices-shown").css("display","none"),"false"!==a&&I(".modelDetailsCompare .location-overlay").css("display","block"),n&&"false"!==a&&(I(".modelDetailsCompare .location-overlay .firstTime").css("display","none"),I(".modelDetailsCompare .location-overlay .prices-shown").css("display","inline"),I(".modelDetailsCompare .location-overlay .notFirstTime").css("display","inline"),I(".modelDetailsCompare .location-overlay .notFirstTime").css("clear","both"),"P"===e?I(".modelDetailsCompare  .location-overlay .auPostaTypeOverlay").html(i||""):"B"===e&&I(".modelDetailsCompare  .location-overlay .auPostaTypeOverlay").html(t||""),I(".modelDetailsCompare .location-overlay .auPostaCodeOverlay").text(n)),a=I.cookie("common.location.LOC"),i=I("#isDynamicPriceBasedLocation").val(),a&&"false"!==i&&(I(".model-details-compare .auPostaCodeOverlay").text(a),I(".modelDetailsCompare .vehicleAttr li > span").addClass("loading-price")),a||"true"!==i||I(".modelDetailsCompare .popup-select-other-model .action").waitUntilExists(function(){m()}),I(document).on("pricesUpdated",function(e){e.message?T(e.localData):e.setToNull&&(I('span[id*="maxPrice"]').html(""),I('span[id*="maxPrice"]').closest("li").css("display","none"),I('span[id*="startingPrice"]').html(""),I('span[id*="startingPrice"]').closest("li").css("display","none"),I('span[id*="priceRange"]').html(""),I('span[id*="priceRange"]').closest("li").css("display","none")),I(".modelDetailsCompare .vehicleAttr li > span").removeClass("loading-price")}),I('input[name="validationZone"]')&&"true"===I('input[name="validationZone"]').val()&&(I(".zonePriceBuilding").css("display","none"),I(".zonePriceYes").css("display","contents"),I(".zonePriceYes").css("visibility","visible")),I(document).ready(function(){I('input[name="validationZone"]').on("change",function(){"true"===I('input[name="validationZone"]').val()&&(I(".zonePriceBuilding").css("display","none"),I(".zonePriceYes").css("display","contents"),I(".zonePriceYes").css("visibility","visible"))})})},l.showDifferencesOnly=function(){I(".show-differences-only").click(function(){var u;I(this).is(":checked")?(I(this).parent().addClass("checked"),I(".grid-container").each(function(){var e=I(this).find("li.show"),t=(u=e.length,0);if(2==u&&0<(t=e.eq(0).find("li").length))for(var a=0;a<t;a++){var i=e.eq(0).find("ul li:eq("+a+")"),n=e.eq(1).find("ul li:eq("+a+")"),o=e.eq(0).find("ul li:eq("+a+") span"),r=e.eq(1).find("ul li:eq("+a+") span");(c=o.text())==(d=r.text())&&(i.hide(),n.hide(),e.eq(1).next().hide())}if(3==u&&0<(t=e.eq(0).find("li").length))for(a=0;a<t;a++){var i=e.eq(0).find("ul li:eq("+a+")"),n=e.eq(1).find("ul li:eq("+a+")"),l=e.eq(2).find("ul li:eq("+a+")"),o=e.eq(0).find("ul li:eq("+a+") span"),r=e.eq(1).find("ul li:eq("+a+") span"),s=e.eq(2).find("ul li:eq("+a+") span"),c=o.text(),d=r.text(),s=s.text();c==d&&c==s&&(i.hide(),n.hide(),l.hide())}})):(I(this).parent().removeClass("checked"),I(".grid-container").each(function(){var e=I(this).find("li.show");e.each(function(){I(this).find("li").show()}),e.eq(1).next().show()}))})},l;function N(e,t){return e&&(t+=" link-overlay"),t}function A(e,t){var a=e;return a=t?e+"?v="+t.vehicleName+"&m="+t.key+"&n="+i:a}}),define("showroom-vehicle-card/component.showRoomVehicleCard",["jquery","disclosure/component.disclosure","_","analytics/analyticsEventLayer"],function(d,u,p,n){var e={};function i(e){var a,t;(i.prototype._singletonInstance=this).opts=d.extend({dropdownClass:".dropdown-vehicle-sort",dropdownBtn:"label",dropdownStatus:".by",dropdownLink:"li a"},e=e||{}),this.init(),(a=d("#namePlates")).length?d.each(d(".showRoomVehicleCard input"),function(e,t){"combinedKey"===t.name&&a.val(a.val()+","+t.value.split(",")[0])}):d.each(d(".showRoomVehicleCard input"),function(e,t){"combinedKey"===t.name&&d("body").append(d('<input type="hidden" id="namePlates" value='+t.value.split(",")[0]+">"))}),e=d.cookie("common.location.LOC"),t=d("#isDynamicPriceBasedLocation").val(),e&&"false"!==t&&d(".showroom-vehicle-card .item .desc p > span").addClass("loading-price"),d(document).on("pricesUpdated",function(e){var r;e.message?(r=e.localData,d(".showroom-vehicle-card .vehicle-card-group").each(function(){var e=d(this),t=e.find('input[name="combinedKey"]').val().split(",");if(t.length){for(var a=0;a<t.length;a++){var i,n,o=r[t[a]];o&&(i=o.maxPrice,n=o.startingPrice,i&&e.find('span[id="maxPrice'+o.id+'"]').html(i),n&&e.find('span[id="startingPrice'+o.id+'"]').html(n),e.find('span[id="priceRange'+o.id+'"]').length)&&i&&n&&e.find('span[id="priceRange'+o.id+'"]').html(n+"&nbsp;-&nbsp;"+i)}d('.showroom-vehicle-card .vehicle-card-group span[id*="starting"]').removeAttr("style"),d('.showroom-vehicle-card .vehicle-card-group span[id*="max"]').removeAttr("style")}})):e.setToNull&&(d('span[id*="maxPrice"]').html(""),d('span[id*="maxPrice"]').closest("p").css("display","none"),d('span[id*="startingPrice"]').html(""),d('span[id*="startingPrice"]').closest("p").css("display","none"),d('span[id*="priceRange"]').html(""),d('span[id*="priceRange"]').closest("p").css("display","none")),d(".showroom-vehicle-card .item .desc p > span").removeClass("loading-price")})}function t(){d(document).ready(function(){var e=d(".showroom-vehicle-card").hasClass("fds"),t=window.matchMedia("(max-width: 767px)"),a=d(".showroom-vehicle-card").hasClass("isBrochureDownload");if(!e||t.matches||a||d("#showroom-vehicle-card.fds .vehicle-card-group dd").each(function(){var i,e,t,a,n=d(this);4<n.find(".item").length?(a=(i=n).outerWidth(),t=d("html").hasClass("rtl")?(e='<div class="carousel-btn carousel-next"><span class="icon icon-chevron-thin-left"></span></div>','<div class="carousel-btn carousel-previous"><span class="icon icon-chevron-thin-right"></span></div>'):(e='<div class="carousel-btn carousel-next"><span class="icon icon-chevron-thin-right"></span></div>','<div class="carousel-btn carousel-previous"><span class="icon icon-chevron-thin-left"></span></div>'),i.flexslider({selector:".vehicle-card-grid > .item",animation:"slide",directionNav:!0,slideshow:!1,animationLoop:!1,minItems:4,itemWidth:a/4,nextText:e,prevText:t,start:function(e){d(e).resize(),d(e).find(".flex-control-nav").hide(),d(e).find(".flex-direction-nav li:nth-child(1)").after(d("<li>").html('<span class="page-num"> </span>'));var t=e.currentSlide,a=e.pagingCount;d(e).find(".flex-prev").css({"background-color":"#75787b","pointer-events":"none"}),d(e).find(".page-num").text(t+1+" / "+a),i.find(".item-content").css("height",i.find(".item").height()),i.find(".action").addClass("bottomfix")},after:function(e){var t=e.currentSlide,a=e.pagingCount,i=e.last;d(e).find(".flex-prev").css({"background-color":"#00095B","pointer-events":"visible"}),d(e).find(".flex-next").css({"background-color":"#00095B","pointer-events":"visible"}),0==t&&d(e).find(".flex-prev").css({"background-color":"#75787b","pointer-events":"none"}),t==i&&d(e).find(".flex-next").css({"background-color":"#75787b","pointer-events":"none"}),d(e).find(".page-num ").text(t+1+" / "+a)}})):(n.find(".item-content").css("height",n.find(".item").height()),n.find(".action").addClass("bottomfix"))}),a){{let e=d(".showroom-vehicle-card .item .item-actions"),i=[];e.each((e,t)=>{var a=d(t).attr("data-code");i.includes(a)?d(t).closest(".item").addClass("hide-in-all"):i.push(a)}),d(".hide-in-all").hide()}if(d(document).on("click",".vehicle-card-list__filter li",function(){var e=d(this).data("category");d(".vehicle-card-list__filter li").removeClass("active"),d(this).addClass("active"),e==d(".vehicle-card-list__filter li").eq(0).data("category")?(d(".vehicle-card-list__items .item").show(),d(".hide-in-all").hide()):(d(".vehicle-card-list__items .item").hide(),d(".vehicle-card-list__items .item."+e).show())}),e=document.querySelectorAll(".isBrochureDownload .download-brochure-fds:not(.fds-down-link-overlay)"),t=document.querySelectorAll(".isBrochureDownload .download-brochure-fds.fds-down-link-overlay"),a=document.querySelectorAll(".isBrochureDownload .price-list"),e.length&&r(e),t.length){var i=t;setTimeout(function(){d(i).each(function(e,t){var a=d(t).attr("href"),i=d(t).parents(".item-actions"),i=(-1!==a.indexOf("?")?"&":"?")+"Model="+i.data("voicode")+"&modeldesc="+i.data("voidescription")+"&analyticsnameplate="+i.data("nameplate")+"&analyticsmodelyear="+i.data("modelyear")+"&brochuredownloadpath="+d(t).children('input[type="hidden"]').val();d(this).attr("href",a+i)})},200)}a.length&&r(a),d(document).on("click",".isBrochureDownload .download-brochure-fds",function(){if(!d(this).hasClass("fds-down-link-overlay")){var e=o(d(this)),t=(n.getDownloadEvents().trackFDSBrochureDownload(e.nameplate,e.modelyear,e.hreflink),window.location.origin+e.nameplatePath.split(".")[0]+".html?imgsrc="+e.nameplateImage),t=encodeURIComponent(t),a=null!=e.modelyear?e.modelyear:"";try{FPS.set([FPS.lib.ActionNameplate(a,"Ford",e.nameplateLabel,FPS.actions.RequestBrochure,t)],{success:function(){},error:function(e){console.warn(e)}})}catch(e){console.warn(e)}}}),d(document).on("click",".isBrochureDownload .price-list",function(){var e=o(d(this));n.getDownloadEvents().trackFDSPricelistDownload(e.nameplate,e.modelyear)}),d(document).on("click",".isBrochureDownload .interactive-brochure",function(){var e=o(d(this));n.getDownloadEvents().trackFDSInteractiveBrochure(e.nameplate,e.modelyear,e.hreflink)})}})}function o(e){var t=e.parents(".item-actions");return{nameplate:t.data("nameplate"),modelyear:t.data("modelyear"),hreflink:e.attr("href"),nameplatePath:t.data("nameplatepath"),nameplateImage:t.data("nameplateimage"),nameplateLabel:t.data("nameplatelabel")}}function r(i){i.forEach(function(e,t){var a;i[t].href&&(a=i[t].href.split("/"),i[t].setAttribute("download",a[a.length-1]))})}return i.prototype.init=function(){this.dropdownStyle(),d(document).ready(function(){updatePriceAjax(d("#isDynamicPrice").val(),"",d(".showroom-vehicle-card").find("input[name=combinedKey]").val(),[".showroom-vehicle-card .vehicle-card-grid"])})},i.getInstance=function(){return i.prototype._singletonInstance=null==i.prototype._singletonInstance?new i:i.prototype._singletonInstance},i.prototype.dropdownStyle=function(){var a=this.opts.dropdownClass,e=this.opts.dropdownBtn,i=this.opts.dropdownStatus,t=this.opts.dropdownLink,n=this;d(a+" "+e).on("click",function(){d(this).parent(a).hasClass("active")?d(this).parent(a).removeClass("active"):d(this).parent(a).addClass("active")}),d(a+" "+t).on("click",function(e){e.preventDefault();var e=d(this).text(),t=d(this).attr("sortBy");d(this).closest(a).removeClass("active").find(i).empty().text(e),n.sortByOption(t)})},i.prototype.sortByOption=function(n){var e=d("#showroom-vehicle-card dl"),t=d(e).not(".showroom-vehicle-card-sorted"),a=d(".showroom-vehicle-card-sorted");switch(d(a).find(".vehicle-card-grid").html(""),n){case"body":d(t).show(),d(a).hide(),d(t).each(function(e,t){var a=d(t).find(".item"),i=d(t).find(".vehicle-card-grid"),n=[];d(a).each(function(e,t){var a=parseFloat(d(t).find(".price").html()),i=parseFloat(d(t).find(".index").html());isNaN(a)&&(a=1/0),isNaN(i)&&(i=1/0),n.push({price:a,order:i,html:'<div class="item">'+d(t).html()+"</div>"})}),n.sort(function(e,t){return e.price<t.price?-1:e.price>t.price?1:e.order<t.order?-1:e.order>t.order?1:0}),d(i).html(""),d.each(n,function(e,t){d(i).append(t.html)})});break;case"price":d(t).hide(),d(a).show();var i=d(t).find(".item"),o=d(a).find(".vehicle-card-grid"),r=[];d(i).each(function(e,t){var a=parseFloat(d(t).find("."+n).html()),i=parseFloat(d(t).find(".index").html());isNaN(a)&&(a=1/0),isNaN(i)&&(i=1/0),r.push({option:a,order:i,html:'<div class="item">'+d(t).html()+"</div>"})}),r.sort(function(e,t){return e.option<t.option?-1:e.option>t.option?1:e.order<t.order?-1:e.order>t.order?1:0}),d(o).html(""),d.each(r,function(e,t){d(o).append(t.html)});break;case"fuel":d(t).hide(),d(a).show();var i=d(t).find(".item"),o=d(a).find(".vehicle-card-grid"),r=[],l=this.opts.dropdownClass,s=d(l+" span.fuelorder").html();d(i).each(function(e,t){var a=parseFloat(d(t).find("."+n).html()),i=parseFloat(d(t).find(".index").html());isNaN(a)&&(a="asc"==s?1/0:-1/0),isNaN(i)&&(i="asc"==s?1/0:-1/0),r.push({option:a,order:i,html:'<div class="item">'+d(t).html()+"</div>"})}),"asc"==s?r.sort(function(e,t){return e.option<t.option?-1:e.option>t.option?1:e.order<t.order?-1:e.order>t.order?1:0}):r.sort(function(e,t){return e.option>t.option?-1:e.option<t.option?1:e.order>t.order?-1:e.order<t.order?1:0}),d(o).html(""),d.each(r,function(e,t){d(o).append(t.html)})}var e=d(".showRoomVehicleCard.section").find("sup[data-disclosure]"),c=[];d.each(e,function(e,t){c.push(d(t).attr("data-disclosure"))}),c=p.uniq(c),d.each(c,function(e,a){var t=d(".showRoomVehicleCard.section").find('sup[data-disclosure="'+a+'"]');d.each(t,function(e,t){u.initOne(d(t),a)})})},e.init=function(){new i;t()},e}),define("select-vehicle/component.selectVehicle",["jquery","disclosure/component.disclosure","_","angular","angular-route","angular-sanitize","analytics/analyticsEventLayer","marketConfigGlobal"],function(d,u,i,a,e,t,p,n){var o={};function r(e){var t=0;d(e).css("min-height","auto"),d(e).each(function(){var e=d(this).outerHeight();t<e&&(t=e)}),d(e).css("min-height",t)}function m(){setTimeout(function(){r("#select-vehicle-wrap .vehicle-card-group .item .item-content .img")},500),setTimeout(function(){r("#select-vehicle-wrap .vehicle-card-group .item .item-content")},1e3)}function l(e){(l.prototype._singletonInstance=this).opts=d.extend({dropdownClass:".dropdown-vehicle-sort",dropdownBtn:"label",dropdownBtnTxt:".txt",dropdownStatus:".by",dropdownLink:"li a"},e=e||{}),this.init()}var s=d("#countryCodeISO").attr("value"),c=a.module("selectVehicleApp",["ngRoute","ngSanitize"]);c.filter("unsafe",["$sce",function(t){return function(e){return t.trustAsHtml(e)}}]),c.controller("SelectVehicleCtrl",["$scope","$http","$window","$timeout",function(o,t,e,a){e=new URL(e.location);o.urlParams=i.object(i.compact(i.map(e.search.slice(1).split("&"),function(e){if(e)return i.map(e.split("="),function(e){return decodeURIComponent(e)})}))),o.locationNew=o.urlParams.l||"_",o.cityName=o.urlParams.c||o.locationNew,o.usageType=o.urlParams.u||"P",o.isEmptyVehicleData=!1,o.hasLoaded=!1,o.removeIdxPrefix=function(e){var t;return e&&(1<(t=e.split("@|@")).length?t[1]:e)},o.loadData=function(){var e=o.apiUrl;e=(e=e.replace("{LOCATION}",o.locationNew)).replace("{USAGETYPE}",o.usageType),o.locationNew||"AUS"!==s?t.get(e).then(function(e){o.hasLoaded=!0,o.allVehicleData=e.data,o.allVehicleData&&(o.isEmptyVehicleData=i.isEmpty(o.allVehicleData.vehicleCardMap),"cn"==n.getCurrentMarketCode())&&d.each(o.allVehicleData.vehicleCardMap,function(e,t){d.each(t,function(e,t){t.noWrapGroupName=(e=>{var t,a="";if(null!=e&&""!=e){new Array;if(!(1<(t=e.split(/\s+/)).length))return e;for(var i=0;i<t.length;i++)a+="<span style='white-space:nowrap;'>"+t[i]+"</span> "}return a})(t.name)})}),d("#select-vehicle-wrap").attr("data-view-latest-offers")&&o.loadLatestOffersData(),a(function(){var e=d(".selectVehicle.section").find("sup[data-disclosure]"),a=[];d.each(e,function(e,t){t=d(t).attr("data-disclosure");t&&a.push(t)}),a=_.uniq(a),d.each(a,function(e,a){var t=d(".selectVehicle.section").find('sup[data-disclosure="'+a+'"]');d.each(t,function(e,t){u.initOne(d(t),a)})}),m()},500)}):(o.hasLoaded=!1,o.cityName="",o.isEmptyVehicleData=!0,d(".your-location p a").trigger("click"))},o.loadLatestOffersData=function(){var e=d("#select-vehicle-wrap").attr("data-offers-data-url");d.ajax({type:"GET",url:e,dataType:"json",async:!1,success:function(e){o.latestOffersData=e,o.addOffersUrlToVehiclesJson()}.bind(this),error:function(e){}.bind(this)})},o.addOffersUrlToVehiclesJson=function(){var e,t=o.allVehicleData.vehicleCardMap;for(e in t)if(t.hasOwnProperty(e))for(var a=t[e],i=0;i<a.length;i++)a[i].offersPageUrl=o.getDynamicUrl(a[i].code)},o.getDynamicUrl=function(e){var t=d("#select-vehicle-wrap").attr("data-latest-offers-landing-page")+"?model=";if(e)for(var a=0;a<o.latestOffersData.length;a++)if(o.latestOffersData[a].nameplateCode==e)for(var i=o.latestOffersData[a].modelDetails.length,n=0;n<i;n++)if(o.verifyOfferExpiry(o.latestOffersData[a].modelDetails[n].offerExpiry))return t+o.latestOffersData[a].modelDetails[n].nameplateName;return""},o.verifyOfferExpiry=function(e){var t=new Date,e=new Date(o.parseDate(e));return e.getYear()>=t.getYear()&&e.getMonth()+1>=t.getMonth()+1&&e.getDate()>=t.getDate()},o.parseDate=function(e){e=e.split("/");return new Date(e[2],e[1]-1,e[0])},o.trackSelectedVehicle=function(e){p.getBuildAndPriceSelectVehicleEvents().trackSelectedVehicle(e)},o.sanitize=function(e){return e.replace(/ /g,"_")},setTimeout(function(){o.loadData()},1e3)}]),d("#select-vehicle-wrap").each(function(e,t){a.bootstrap(t,["selectVehicleApp"])});return l.prototype.init=function(){this.dropdownStyle(),this.popup()},l.getInstance=function(){return l.prototype._singletonInstance=null==l.prototype._singletonInstance?new l:l.prototype._singletonInstance},l.prototype.popup=function(){var t,a,e=d(".sv-open-overlay"),i=d(".overlay-select-vehicle.overlay-default"),n=d(".overlay-select-vehicle.overlay-style-2"),o=d(".overlay-select-vehicle .overlay-close"),r=d(".overlay-select-vehicle .cancel-btn"),l=this;function s(e,t){d(".content > .overlay-container").length&&d(".content > .overlay-container").remove(),e.find('input[name="postCode"]').val(t),e.addClass("show").find(".overlay-container").removeClass("overlay-hide").addClass("visible"),d("html").addClass("is-overlay-open"),d("body").on("keydown.overlay",l.hideOverlayOnEscapeKeydown.bind(l)).addClass("is-overlay-open select-vehicle-overlay")}d(e).on("click",function(e){return e.preventDefault(),t=d(this).attr("data-postcode"),"default"===(a=d(this).attr("data-overlay-type"))&&s(i,t),"remove-usage"===a&&s(n,t),!1}),o.on("click touchstart",function(){l.hideOverlay()}),r.on("click touchstart",function(){l.hideOverlay()}),d(".overlay-container:not(.not-overlay)").on("click",function(e){e=e.target;0===d(this).find(e).length&&l.hideOverlay()})},l.prototype.hideOverlay=function(){d(".overlay-select-vehicle").removeClass("show"),d("body").off("keydown.overlay").removeClass("is-overlay-open select-vehicle-overlay"),d("html").removeClass("is-overlay-open")},l.prototype.hideOverlayOnEscapeKeydown=function(e){e=e.keyCode||e.which;13===e&&d('.overlay-select-vehicle.show [type="submit"]').trigger("click"),27===e&&this.hideOverlay()},l.prototype.dropdownStyle=function(){var a=this.opts.dropdownClass,e=this.opts.dropdownBtn,t=this.opts.dropdownBtnTxt,i=this.opts.dropdownStatus,n=this.opts.dropdownLink,o=this;d(a+" "+t).on("click",function(){d(e).parent(a).hasClass("active")?d(e).parent(a).removeClass("active"):d(e).parent(a).addClass("active")}),d(a+" "+n).on("click",function(e){e.preventDefault();var e=d(this).text(),t=d(this).attr("sortBy");d(this).closest(a).removeClass("active").find(i).empty().text(e),o.sortByOption(t)})},l.prototype.sortByOption=function(n){var e=d("#select-vehicle dl"),t=d(e).not(".select-vehicle-sorted"),a=d(".select-vehicle-sorted");switch(d(a).find(".vehicle-card-grid").html(""),n){case"body":d(t).show(),d(a).hide(),d(t).each(function(e,t){var a=d(t).find(".item"),i=d(t).find(".vehicle-card-grid"),n=[];d(a).each(function(e,t){var a=parseFloat(d(t).find(".price").html()),i=parseFloat(d(t).find(".index").html());isNaN(a)&&(a=1/0),isNaN(i)&&(i=1/0),n.push({price:a,order:i,html:'<div class="item">'+d(t).html()+"</div>"})}),n.sort(function(e,t){return e.price<t.price?-1:e.price>t.price?1:e.order<t.order?-1:e.order>t.order?1:0}),d(i).html(""),d.each(n,function(e,t){d(i).append(t.html)})}),m();break;case"price":d(t).hide(),d(a).show();var i=d(t).find(".item"),o=d(a).find(".vehicle-card-grid"),r=[];d(i).each(function(e,t){var a=parseFloat(d(t).find("."+n).html()),i=parseFloat(d(t).find(".index").html());isNaN(a)&&(a=1/0),isNaN(i)&&(i=1/0),r.push({option:a,order:i,html:'<div class="item">'+d(t).html()+"</div>"})}),r.sort(function(e,t){return e.option<t.option?-1:e.option>t.option?1:e.order<t.order?-1:e.order>t.order?1:0}),d(o).html(""),d.each(r,function(e,t){d(o).append(t.html)}),m();break;case"fuel":d(t).hide(),d(a).show();var i=d(t).find(".item"),o=d(a).find(".vehicle-card-grid"),r=[],l=this.opts.dropdownClass,s=d(l+" span.fuelorder").html();d(i).each(function(e,t){var a=parseFloat(d(t).find("."+n).html()),i=parseFloat(d(t).find(".index").html());isNaN(a)&&(a="asc"==s?1/0:-1/0),isNaN(i)&&(i="asc"==s?1/0:-1/0),r.push({option:a,order:i,html:'<div class="item">'+d(t).html()+"</div>"})}),"asc"==s?r.sort(function(e,t){return e.option<t.option?-1:e.option>t.option?1:e.order<t.order?-1:e.order>t.order?1:0}):r.sort(function(e,t){return e.option>t.option?-1:e.option<t.option?1:e.order>t.order?-1:e.order<t.order?1:0}),d(o).html(""),d.each(r,function(e,t){d(o).append(t.html)}),m()}p.getBuildAndPriceSelectVehicleEvents().trackFilter(n);var e=d(".selectVehicle.section").find("sup[data-disclosure]"),c=[];d.each(e,function(e,t){c.push(d(t).attr("data-disclosure"))}),c=_.uniq(c),d.each(c,function(e,a){var t=d(".selectVehicle.section").find('sup[data-disclosure="'+a+'"]');d.each(t,function(e,t){u.initOne(d(t),a)})})},d(window).on("resize",i.throttle(function(){m()},500)),o.init=function(){new l;d(document).ready(function(){d('input[name="validationZone"]').on("change",function(){"true"===d('input[name="validationZone"]').val()&&d(".priceZoneCal").each(function(e,t){var a=d(this).children("p").html(),t=a.search("R"),i=a.search("<"),a=a.substring(t,i),t=d(this).children(".priceZone").text();null!=t&&""!=t&&(d(this).children("p").html().replace(a,t),i=d(this).children("p").html().replace(a,t),d(this).children("p").html(i))})})})},o}),define("select-a-path/component.selectapath",["jquery","_","angular","angular-route","angular-sanitize"],function(e,i,t,a,n){var o={};return t.module("selectPathApp",["ngRoute"]).controller("selectPathCtrl",["$scope","$http","$window",function(e,t,a){a=new URL(a.location);e.urlParams=i.object(i.compact(i.map(a.search.slice(1).split("&"),function(e){if(e)return i.map(e.split("="),function(e){return decodeURIComponent(e)})}))),e.cityName=e.urlParams.c||"",e.locationNew=e.urlParams.l,e.usageType=e.urlParams.u,e.year=e.urlParams.y,e.vehicleName=e.urlParams.v,e.nameplate=e.urlParams.n}]),o.init=function(){},o}),define("dealer-locator-layout/component.dealerLocatorLayout",["jquery"],function(n){function t(e){(t.prototype._singletonInstance=this).opts=n.extend({searchFormClass:".store-locator-search-form"},e=e||{}),this.init()}var e={};return t.prototype.init=function(){this.showSuggestion()},t.prototype.showSuggestion=function(){var e=this.opts.searchFormClass;n(e).find('.locator-input input[type="text"]').focusin(function(){n(e).find(".suggestion-block").show()}).focusout(function(){n(e).find(".suggestion-block").hide()})},t.getInstance=function(){return t.prototype._singletonInstance=null==t.prototype._singletonInstance?new t:t.prototype._singletonInstance},t.prototype.dropdownStyle=function(){var t=this.opts.dropdownClass,e=this.opts.dropdownBtn,a=this.opts.dropdownStatus,i=this.opts.dropdownLink;n(t+" "+e).on("click",function(){n(this).parent(t).hasClass("active")?n(this).parent(t).removeClass("active"):n(this).parent(t).addClass("active")}),n(t+" "+i).on("click",function(){var e=n(this).text();n(this).closest(t).removeClass("active").find(a).empty().text(e)})},e.init=function(){new t},e}),define("model-compare/component.modelCompare",["jquery","cookie","analytics/analyticsEventLayer"],function(l,n,o){var i={desktopMode:!0,compareStatus:!1},s=l(".modelCompare .model-compare"),t=s.find('.select-all-wrap input[name="selectAllCheckbox"]'),e=s.find(".select-model"),c=s.find(".models-list"),a=s.find(".cancel-compare-btn"),r=s.find(".additional-options-model"),d=s.find("input[name=sortingFeatureRequired]").val(),u=parseInt(c.attr("selected-models")),p=parseInt(e.length),m=s.find(".compare-models-sort"),h="",f=c.data("price-sorting-dom-id")||"startingPrice",g=c.data("fuel-sorting-dom-id")||"fuelEfficiencyFrom",v=/\d+\.*\d*/g;function y(){r.toggleClass("active inactive")}function b(e){e?t.is(":checked")||t.trigger("click"):t.attr("checked",!1)}function w(t){e.each(function(){var e=l(this);e.hasClass("on is-checked")!=t&&e.trigger("click")})}function C(a,i){return c.find(".item").sort(function(e,t){e=e.getAttribute(a),t=t.getAttribute(a);if("up"==i&&(e=""==e?1/0:+e,t=""==t?1/0:+t),"down"==i&&(e=""==e?0:+e,t=""==t?0:+t),t<e){if("up"==i)return 1;if("down"==i)return-1}if(e<t){if("up"==i)return-1;if("down"==i)return 1}return 0})}return i.init=function(){try{m.select2({minimumResultsForSearch:1/0,dropdownCssClass:"model-compare-dropdown"})}catch(e){}function e(n,o,r){c.find(".item").each(function(){var e,t,a,i=l(this);t=(e=i).attr("data-starting-fuel")?e.attr("data-starting-fuel").match(v)[0]:"",a=e.attr("data-max-fuel")?e.attr("data-max-fuel").match(v)[0]:"",e.attr("data-starting-fuel",t),e.attr("data-max-fuel",a),i.find('[id^="'+n+'"]').length?i.attr(o,i.attr(r)):i.attr(o,"")})}"startingPrice"==f&&e("startingPrice","data-price","data-starting-price"),"maxPrice"==f&&e("maxPrice","data-price","data-max-price"),"fuelEfficiencyFrom"==g&&e("fuelEfficiencyFrom","data-fuel","data-starting-fuel"),"fuelEfficiencyTo"==g&&e("fuelEfficiencyTo","data-fuel","data-max-fuel"),i.initDisplay(),i.setViewMode(),0<l(".group-btn").length&&i.prepareCompare(),0<".select-model".length&&i.initCheckboxCompare();var t=l("#namePlates"),a=l(".model-compare").attr("data-nameplate-key"),t=(t.length?t.val(t.val()+","+a):l("body").append(l('<input type="hidden" id="namePlates" value='+a+">")),i.getMaxHeightOfItems(".models-list",".name-item"));i.adjustHeightItem(".models-list",".name-item",t),i.initSorting(),i.checLocationPrices(),i.updateLocationData(),l(window).on("resize",function(){var e;l(window).width()<768&&i.desktopMode?(e=!l(".desktop-heading .active-compare-btn").hasClass("active"),i.compareStatus&&e&&(l(".bottom-content .one-btn").hide(),l(".bottom-content .two-btn").show()),i.compareStatus||e||(l(".bottom-content .one-btn").show(),l(".bottom-content .two-btn").hide())):i.unblockItem(),i.setViewMode(),i.resizeNameItemBlock(),i.resizeItemBlock(),2<u&&(w(!1),i.blockItem())}),l(document).ready(function(){var e;s.attr("data-skip-step1")&&void 0!==(e=s.attr("data-models-list-count"))&&(1==e?void 0!==s.attr("data-one-model-id")&&i.redirectToModelDetailsCompare():i.skipStep1()),console.log("Value "+l('input[name="validationZone"]').val()),"true"===l('input[name="validationZone"]').val()&&(l(".zonePriceBuilding").css("display","none"),l(".zonePriceYes").css("display","contents"),l(".zonePriceYes").css("visibility","visible")),l('input[name="validationZone"]').on("change",function(){"true"===l('input[name="validationZone"]').val()&&(l(".zonePriceBuilding").css("display","none"),l(".zonePriceYes").css("display","contents"),l(".zonePriceYes").css("visibility","visible"))}),updatePriceAjax(l("#isDynamicPrice").val(),s.find("input[name=combinedKey]").val(),"",[".model-compare .specs-item"])}),setTimeout(function(){l(".one-btn a").on("keydown",function(e){13===e.keyCode&&e.target.href&&e.target.click()})},2e3)},i.initDisplay=function(){},i.skipStep1=function(){l(".active-compare-btn").removeClass("active").addClass("inactive"),l(".compare-models-btn").removeClass("inactive").addClass("active"),y(),a.removeClass("inactive").addClass("active"),l(".item .name-item").toggleClass("on-select-mode"),e.toggleClass("on off"),s.find(".title .location-overlay").css("opacity",0),l(".name-item span").each(function(){var e=l(this).text();l(this).html(e)}),i.changeTitle(),l(this).parent().hasClass("one-btn")&&(l(this).parent().siblings().show(),l(this).parent().hide()),i.compareStatus=!0,i.resizeNameItemBlock(),i.resizeItemBlock(),a.hide()},i.redirectToModelDetailsCompare=function(){var e=s.attr("data-redirection-path");i.queryToHash(window.location.search).wcmmode&&(e+="?wcmmode=disabled"),e&&(n.setCookieWithPath("modelCompare",s.attr("data-one-model-id"),1,"/"),o.getModelWalkAndCompareEvents().trackCompareBtnClick(),window.location.assign(e))},i.queryToHash=function(e){var e=e.replace(/\?/,"").split("&"),a={};return l.each(e,function(e,t){return t=t.split("="),a[t[0]]=t[1]}),a},i.prepareCompare=function(){l("#isDynamicPriceBasedLocation").val();l(".active-compare-btn").on("click",function(){y(),l(".active-compare-btn").removeClass("active").addClass("inactive"),l(".compare-models-btn").removeClass("inactive").addClass("active"),a.removeClass("inactive").addClass("active"),l(".item .name-item").toggleClass("on-select-mode"),e.toggleClass("on off"),s.find(".title .location-overlay").css("opacity",0),l(".name-item span").each(function(){var e=l(this).text();l(this).html(e)}),i.changeTitle(),l(this).parent().hasClass("one-btn")&&(l(this).parent().siblings().show(),l(this).parent().hide()),i.compareStatus=!0,i.resizeNameItemBlock(),i.resizeItemBlock()}),l(".compare-models-btn").on("click",function(){var e,t,a="",i=[];l(".is-checked").each(function(){var e=l(this).find("input[type='checkbox']");i.push(e.val()),a=a?a+":"+e.val():e.val()}),void 0!==l(this).attr("data-url-qs")&&(e=i.join(","),t=l(this).attr("href"),l(this).attr("href",t+"?m="+e)),n.setCookieWithPath("modelCompare",a,1,"/"),o.getModelWalkAndCompareEvents().trackCompareBtnClick()}),a.on("click",function(){y(),t.prop("checked",!1),l(".active-compare-btn").toggleClass("active inactive"),l(".compare-models-btn").toggleClass("active inactive"),a.toggleClass("active inactive"),l(".item .name-item").toggleClass("on-select-mode"),e.removeClass("is-checked").removeClass("on").addClass("off"),s.find(".title .location-overlay").css("opacity",1),i.changeTitle(),i.deactiveCompare(),l(".name-item span").each(function(){var e=l(this).text(),t=l("<a>");t.attr("href",l(this).data("vehicleobj")),t.text(e),l(this).html(t)}),l(".item").removeClass("selected"),l(this).parent().hasClass("two-btn")&&(l(this).parent().siblings().show(),l(this).parent().hide()),i.compareStatus=!1,c.attr("selected-models","0"),u=0})},i.initCheckboxCompare=function(){e.on("keyup",function(e){13===e.keyCode&&e.target.click()}),e.on("click",function(){var e=l(this).index(".select-model"),e=l(".item").eq(e);l(this).toggleClass("is-checked"),e.toggleClass("selected"),e.hasClass("selected")?p==++u&&b(!0):(u--,b(!1)),c.attr("selected-models",u),u<2?i.deactiveCompare():i.activeCompare(),3<=u&&!d||!i.desktopMode&&2<=u?i.blockItem():i.unblockItem()}),t.change(function(){l(this).is(":checked")?w(!0):w(!1)})},i.initSorting=function(){m.on("change",function(){var e=l(this).find("option:selected").val();if(h!=e)switch(h=e){case"priceDown":C("data-price","down").detach().appendTo(c);break;case"priceUp":C("data-price","up").detach().appendTo(c);break;case"fuelDown":C("data-fuel","down").detach().appendTo(c);break;case"fuelUp":C("data-fuel","up").detach().appendTo(c);break;case"default":C("data-order-id","up").detach().appendTo(c)}})},i.updateLocationData=function(){var e=l.cookie("common.location.LOC"),t=l.cookie("common.location.type"),a=s.find(".location-overlay").attr("data-commercial-label"),i=s.find(".location-overlay").attr("data-personal-label"),n=l("#isDynamicPriceBasedLocation").val();s.find(".location-overlay .prices-shown").css("display","none"),"false"!==n&&s.find(".location-overlay").css("display","block"),e&&"false"!==n&&(s.find(".desktop-heading .location-overlay .firstTime").css("display","none"),s.find(".desktop-heading .location-overlay .prices-shown").css("display","inline"),s.find(".desktop-heading .location-overlay .notFirstTime").css("display","inline"),s.find(".desktop-heading .location-overlay .notFirstTime").css("clear","both"),"P"===t?(s.find(".desktop-heading  .location-overlay .auPostaTypeOverlay").html(i||""),s.find(".mobile-heading  .location-overlay .auPostaTypeOverlay").html(i||"")):"B"===t&&(s.find(".desktop-heading  .location-overlay .auPostaTypeOverlay").html(a||""),s.find(".mobile-heading  .location-overlay .auPostaTypeOverlay").html(a||"")),s.find(".mobile-heading  .location-overlay .firstTime").css("display","none"),s.find(".mobile-heading .location-overlay .prices-shown").css("display","inline"),s.find(".mobile-heading  .location-overlay .notFirstTime").css("display","inline"),s.find(".mobile-heading .location-overlay .notFirstTime").css("clear","both"),s.find(".desktop-heading .location-overlay .auPostaCodeOverlay").text(e),s.find(".mobile-heading .location-overlay .auPostaCodeOverlay").text(e))},i.checLocationPrices=function(){var e=l.cookie("common.location.LOC"),t=l("#isDynamicPriceBasedLocation").val();e&&"false"!==t&&(s.find('.item span[id*="maxPrice"]').addClass("loading-price"),s.find('.item span[id*="startingPrice"]').addClass("loading-price"),s.find('.item span[id*="priceRange"]').addClass("loading-price")),l(document).on("pricesUpdated",function(e){var r;e.message?(r=e.localData,s.each(function(){var e=l(this),t=e.attr("data-nameplate-key");if(r[t])for(var a=r[t].derivatives,i=0;i<a.length;i++){var n=a[i].maxPrice,o=a[i].startingPrice;n&&e.find('span[id="maxPrice'+a[i].id+'"]').html(n),o&&e.find('span[id="startingPrice'+a[i].id+'"]').html(o),e.find('span[id="priceRange'+a[i].id+'"]').length&&n&&o&&e.find('span[id="priceRange'+a[i].id+'"]').html(o+"&nbsp;-&nbsp;"+n)}})):e.setToNull&&s.each(function(){var e=l(this);e.attr("data-nameplate-key");e.find('span[id*="maxPrice"]').html(""),e.find('span[id*="maxPrice"]').closest("p").css("display","none"),e.find('span[id*="startingPrice"]').html(""),e.find('span[id*="startingPrice"]').closest("p").css("display","none"),e.find('span[id*="priceRange"]').html(""),e.find('span[id*="priceRange"]').closest("p").css("display","none")}),s.find('.item span[id*="maxPrice"]').removeClass("loading-price"),s.find('.item span[id*="startingPrice"]').removeClass("loading-price"),s.find('.item span[id*="priceRange"]').removeClass("loading-price")})},i.blockItem=function(){l(".item:not(.selected)").find(".block-item").addClass("overlay")},i.unblockItem=function(){l(".item:not(.selected)").find(".block-item").removeClass("overlay")},i.activeCompare=function(){l(".compare-models-btn").removeClass("block-btn").addClass("cta-button-primary")},i.deactiveCompare=function(){l(".compare-models-btn").addClass("block-btn").removeClass("cta-button-primary"),l(".item").find(".block-item").removeClass("overlay")},i.changeTitle=function(){l(".main-title").toggleClass("active inactive")},i.setViewMode=function(){i.desktopMode=768<=l(window).width()},i.adjustHeightItem=function(e,t,a){l(e+" "+t).outerHeight(a)},i.getMaxHeightOfItems=function(e,t){var a=0,e=l(e).find(l(t));return l.each(e,function(){l(this).height("auto")}),l.each(e,function(){var e=l(this).outerHeight();a<=e&&(a=e)}),a},i.resizeNameItemBlock=function(){var e=i.getMaxHeightOfItems(".models-list",".name-item");i.adjustHeightItem(".models-list",".name-item",e)},i.resizeItemBlock=function(){var e=i.getMaxHeightOfItems(".models-list",".item");i.adjustHeightItem(".models-list",".item",e)},i}),define("model-specification/component.modelSpecification",["jquery","cookie","analytics/analyticsEventLayer","disclosure/component.disclosure","isAuthor"],function(d,e,t,l,i){var a={desktopMode:!0,compareStatus:!1},n=d("#value").attr("data-vehList"),o=d("#checkForFds").attr("data-enablefds"),s=[],r=d("select[name='modelSpecCategory']").children("option:selected").val(),c=d("select[name='modelSpecCategoryFds']").children("option:selected").val(),u=[],p=[],m=window.matchMedia("(max-width: 767px)"),h=window.matchMedia("(max-width: 1280px)"),f=window.matchMedia("(min-width: 1281px)"),g=d("#value").data("addbuttonlabel")||"Add",v=d("#value").data("addmodelcancellabel")||"Cancel",y=d("#value").data("addmodelconfirmlabel")||"Confirm",b=d(document).find("#selectedCategory");if(n){for(var w=jQuery.parseJSON(n),C=jQuery.parseJSON(n),S=0;S<w.length;S++)s.push(w[S].key);"true"!==o?r&&(b.val(r),D(r)):c&&P(c)}function x(){var e="",t="",a=d("#filterTemplate").html(),e='<th class="fixedDiv" rowspan="2">';m.matches||(e+='<div class="hideForMobileDevice" id="modelSpecificationDesktopInfo">'+a+"</div> "),e+="</th>";for(var i=0;i<w.length;i++)w[i].hasOwnProperty("isAddButtonEnabled")?(e+='<td class="model-spec-details"><span class="icon-emergency-call-number-rev-50px addModelToCompare"></span></td>',t+='<td valign="top" class="fixedDiv model-spec-details"><h6 class="addModelToCompare">'+g+"</h6></a>"):(e+='<td class="model-spec-details"><a href="'+w[i].imgRedirectPath+'.html"><img src="'+w[i].imgUrl+'" />',2<s.length&&(e+='<span class="icon-close2 removeModel" data-key='+w[i].key+"></span>"),e+="</a></td>",t+='<td valign="top" class="fixedDiv model-spec-details"><a href="'+w[i].imgRedirectPath+'.html"><h6>'+w[i].vehicleName+"</h6></a>",w[i].vehicleAttributes&&0<w[i].vehicleAttributes.length&&(t+='<div class="displayPrice">',w[i].vehicleAttributes[0].attributeName&&(t+='<span class="attributeName">'+w[i].vehicleAttributes[0].attributeName+"</span>\n"),w[i].vehicleAttributes[0].prefix&&(t+='<span class="attributePrefix">'+w[i].vehicleAttributes[0].prefix+"</span>\n"),w[i].vehicleAttributes[0].attributeValue&&(t+='<span class="attributeValue">'+w[i].vehicleAttributes[0].attributeValue+"</span>\n"),w[i].vehicleAttributes[0].suffix&&(t+='<span class="attributeSuffix">'+w[i].vehicleAttributes[0].suffix+"</span>\n"),w[i].vehicleAttributes[0].attributeDisclosure&&(t+='<sup data-disclosure="'+w[i].vehicleAttributes[0].attributeDisclosure+'">&nbsp;</sup> '),t+=" </div>"),t+=" </td>");d(".modelImagePanel").html(e),d(".modelNamePanel").html(t)}function D(e){choosenCategory=[];var t="",e=e.split(";");choosenCategory=e;for(var a,i,n,o,r=0;r<choosenCategory.length;r++){for(u=[],p=[],aa=0;aa<w.length;aa++)if(!w[aa].hasOwnProperty("isAddButtonEnabled"))for(p.push(-1),bb=0;bb<w[aa].featuresList.length;bb++)if((categoryMatch=w[aa].featuresList[bb].categoryName)==choosenCategory[r])for(p[aa]=bb,cc=0;cc<w[aa].featuresList[bb].features.length;cc++)-1===u.indexOf(w[aa].featuresList[bb].features[cc].desc)&&u.push(w[aa].featuresList[bb].features[cc].desc);for(5<=w.length&&h.matches&&u.length?t+="<tr id=title"+r+'><th class="fixedDiv" colspan="'+5+'"><h6 style="text-align:center;"><b>'+choosenCategory[r]+'</b></h6></th><td class="greybg" colspan="'+w.length+'"></td></tr>':3<=w.length&&m.matches&&u.length?t+="<tr id=title"+r+'><th class="fixedDiv" colspan="'+(3===w.length?3:4)+'"><h6 style="text-align:center;"><b>'+choosenCategory[r]+'</b></h6></th><td class="greybg" colspan="'+w.length+'"></td></tr>':5<=w.length&&f.matches&&u.length?t+="<tr id=title"+r+'><th class="fixedDiv" colspan="'+(5===w.length?5:6)+'"><h6 style="text-align:center;"><b>'+choosenCategory[r]+'</b></h6></th><td class="greybg" colspan="'+w.length+'"></td></tr>':w.length<5&&!m.matches&&u.length?t+="<tr id=title"+r+'><th class="fixedDiv"  style="border-right-width: 1px;" colspan="'+(w.length+1)+'"><h6 style="text-align:center;"><b>'+choosenCategory[r]+"</b></h6></th>/tr>":w.length<3&&m.matches&&u.length&&(t+="<tr id=title"+r+'><th class="fixedDiv"  style="border-right-width: 1px;" colspan="'+(w.length+1)+'"><h6 style="text-align:center;"><b>'+choosenCategory[r]+"</b></h6></th></tr>"),j=0;j<u.length;j++){for(t+='<tr><th class="fixedDiv">'+u[j]+"</th>",k=0;k<w.length;k++)if(w[k].hasOwnProperty("isAddButtonEnabled"))t+="<td>&nbsp;</td>";else{for(featureValue='<i class="icon-close2 red"></i>',kk=0;kk<u.length;kk++)-1==p[k]?featureValue='<i class="icon-close2 red"></i>':void 0!==w[k].featuresList[p[k]].features[kk]&&w[k].featuresList[p[k]].features[kk].desc===u[j]&&(featureValue=(featureValue=w[k].featuresList[p[k]].features[kk].value)||'<i class="icon-checkmark green"></i>');t+="<td>"+featureValue+"</td>"}t+="<tr>"}}d(".modelSpecCategoryTable").html(t),d.fn.hasScrollBar=function(){return this.get(0).scrollWidth>this.width()},d(".model-spec-comparison-table").hasScrollBar()||d(".model-spec-arrows").hide(),d(".modelSpecCategoryTable")[0].scrollHeight<400?d(".table-scrollbar").hide():d(".table-scrollbar").show(),d(".model-spec-comparison-table")[0].scrollWidth<=d(".table-scrollbar-holder")[0].scrollWidth&&(d(".model-specification-container-wrapper .model-spec-next").hide(),d(".model-specification-container-wrapper .model-spec-previous").hide()),-1<navigator.userAgent.toLowerCase().indexOf("firefox")?(d(".table-scrollbar").height(d(".modelSpecCategoryTable").height()+27),a=0,i=!1,e=d(".model-spec-comparison-table"),n=d(".model-spec-comparison-table-wrapper .model-spec-comparison-table tbody"),o=n.find("> tr").width(),n.css("overflow","visible"),e.find("tbody-wrapper").length||n.wrap('<div class="tbody-wrapper" style="overflow-x: hidden; overflow-y: auto; width: '+o+'px"></div>'),e.scroll(function(e){a=e.target.scrollLeft,i||(window.requestAnimationFrame(()=>{var e;e=a,d(".model-spec-comparison-table-wrapper .model-spec-comparison-table tbody tr th.fixedDiv").css({position:"relative",left:e}),i=!1}),i=!0)})):d(".table-scrollbar").height(d(".modelSpecCategoryTable").height()+20),d(".table-scrollbar > div").height(d(".modelSpecCategoryTable")[0].scrollHeight);var l=null,s=d(".table-scrollbar"),c=d(".model-spec-comparison-table");s.on("mouseover",function(){l=!0}),s.on("mouseout",function(){l=!1}),s.on("touchmove",function(){l=!0}),c.on("mouseover",function(){l=!1}),c.on("mouseout",function(){l=!0}),c.on("touchmove",function(){l=!1}),s.scroll(function(){var e;!0===l&&(e=(c[0].scrollHeight-c.height())/(d(".table-scrollbar > div").height()-s.height()),c.scrollTop(s.scrollTop()*e))}),c.scroll(function(){var e;!1===l&&(e=c[0].scrollHeight-c.height(),e=(d(".table-scrollbar > div").height()-s.height())/e,s.scrollTop(c.scrollTop()*e))})}function P(e){for(var t=[],a="",t=e.split(";"),i=0;i<t.length;i++){a+='<div class="model-spec-fds-category-title"><span class="model-spec-fds-category-title-txt body1-bold-blue-ttNone">'+t[i]+'</span></div><div class="model-spec-fds-category-content"><ul class="model-spec-fds-item">';for(var n=0;n<w[0].featuresList.length;n++)if((categoryMatch=w[0].featuresList[n].categoryName)==t[i])for(var o=0;o<w[0].featuresList[n].features.length;o++)a+='<li class="model-spec-fds-item-list"><span class="item-list-lbl body2-regular-gray-ttNone">'+w[0].featuresList[n].features[o].desc+"</span>",""!==w[0].featuresList[n].features[o].value?a+='<span class="item-list-txt body2-regular-gray-ttNone">'+w[0].featuresList[n].features[o].value+"</span>":a+='<span class="item-list-txt"><i class="icon-checkmark"></i></span>',a+="</li>";a+="</ul></div>"}d(".model-spec-fds-content").html(a)}function T(){var e=d("html,body"),t=d(".model-spec-comparison-table").offset().top,a=d("#modelSpecificationMobileInfo").height(),i=d(".navigation").height();m.matches?e.animate({scrollTop:t-a-i},500):e.animate({scrollTop:t-i},500)}return d("body").on("change","select[name='modelSpecCategoryFds']",function(e){e.preventDefault();e=d("body .quickBnpContent").data("nameplate");e&&t.getQuickBnpEvents().quickBnPContentAction(e,"model specification"),P(d(this).children("option:selected").val()),d(".model-spec-fds-content").scrollTop(0)}),d(".model-spec-next").click(function(){var e=parseFloat(d(".model-spec-details").innerWidth()),e=parseFloat(d(".model-spec-comparison-table").scrollLeft())+e;d(".model-spec-comparison-table").animate({scrollLeft:e},800)}),d(".model-spec-previous").click(function(){var e=parseFloat(d(".model-spec-details").width()),e=parseFloat(d(".model-spec-comparison-table").scrollLeft())-e;d(".model-spec-comparison-table").animate({scrollLeft:e},800)}),d("body").on("click",".removeModel",function(e){e.preventDefault();var t=d(this).attr("data-key");s.includes(t)&&(e=s.indexOf(t),s.splice(e,1));for(var a,i=0;i<w.length;i++)w[i].key===t&&(w.splice(i,1),w.push({isAddButtonEnabled:!0}),x(),d("select[name='modelSpecCategory']").val(b.val()).trigger("change"),D(b.val()),l.init(),T(),a=d("#title0").offset().top,d(window).scrollTop(a))}),d("body").on("click",".addModelToCompare",function(){var r=d("#addModelPopup"),e=d(window).width()<768?"80%":"840px";content="",contentList=r.find(".modelList"),d("body").addClass("addmodel-popup-open"),layer.open({type:1,title:!1,scrollbar:!1,closeBtn:1,area:[e,""],btn:[v,y],success:function(e){d("body").hasClass("addmodel-popup-open")||d("body").addClass("addmodel-popup-open");for(var t=0;t<C.length;t++){var a=s.includes(C[t].key);content+=`<li class="form-checkbox">
                        <input type="checkbox" class="custom-checkbox" name="${C[t].key}" id="${C[t].key}" ${a&&"checked"} ${a&&"disabled"}>
                        <label for="${C[t].key}">
                            <div class="modelContent">
                                <p>${C[t].vehicleName}</p>
                                <img src="${C[t].imgUrl}" alt="${C[t].vehicleName}" />
                            </div>
                          </label>
                      </li>`}contentList.append(content)},yes:function(e){r.hide(),layer.close(e)},btn2:function(e){r.hide(),layer.close(e);var t=0,a=[];r.find(".form-checkbox").each(function(){var e=d(this).find('input[type="checkbox"]:checked').attr("id");null==e||s.includes(e)||(s.push(e),a.push(e))});for(var i=0;i<w.length;i++)if(w[i].hasOwnProperty("isAddButtonEnabled")){t=i;break}for(var n=0;n<C.length;n++)a.includes(C[n].key)&&(w.splice(t,0,C[n]),w.pop());x(),d("select[name='modelSpecCategory']").val(b.val()).trigger("change");for(var o=0;o<w.length;o++)D(b.val()),l.init()},end:function(){d("body").removeClass("addmodel-popup-open"),contentList.html("")},shadeClose:!1,content:r})}),d("body").on("change","select[name='modelSpecCategory']",function(e){e.preventDefault();e=d(this).children("option:selected").val(),b.val(e).trigger("change"),D(e),T(),e=d("#title0").offset().top;d(window).scrollTop(e)}),a.init=function(){var e=d("#value").attr("data-allfeatures"),t=window.matchMedia("(max-width: 767px)"),a=i.getAuthorStatus();"AR"==d(".lang-links span.active").text()&&d(".model-specification-container-wrapper").addClass("model-specification-container-wrapper-ar"),"true"==e&&(e=Math.max(document.documentElement.clientHeight,window.innerHeight||0)-d(".model-spec-comparison-table thead").height(),t.matches)&&(t=d("#modelSpecificationDesktopInfo").height,d(".model-spec-comparison-table tbody").css("max-height",e-t)),"true"!==o||a||d("#modelSpecFdsCategorySelect").select2({dropdownCssClass:"model-spec-category-dropdown-fds"})},a}),(()=>{for(var e,t=["assert","cd","clear","count","countReset","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","select","table","time","timeEnd","timeStamp","timeline","timelineEnd","trace","warn"],a=t.length,i=window.console=window.console||{},n=function(){};a--;)i[e=t[a]]||(i[e]=n)})(),requirejs.config({waitSeconds:60}),require(["jquery","fordjs","page-module/modules-init"],function(a,i,n){var o=document;o.createEvent("Event").initEvent("initFordjs",!0,!0),window.console||(console={log:function(){}}),a(o).ready(function(){var e,t;!(window.ActiveXObject||"ActiveXObject"in window)&&"undefined"!=typeof adobe&&adobe.target&&adobe.target.event?(a(".mboxContainer").length?(e=setInterval(function(){a(".mboxDefault").length<=0&&(clearTimeout(t),clearInterval(e),console.log("mbox render success"),n.init(),i.init())},0),t=setTimeout(function(){1<=a(".mboxDefault").length&&(clearTimeout(t),clearInterval(e),console.log("mbox render failed"),n.init(),i.init())},2e4)):(n.init(),i.init()),o.addEventListener(adobe.target.event.REQUEST_SUCCEEDED,function(e){o.addEventListener(adobe.target.event.CONTENT_RENDERING_SUCCEEDED,function(e){}),o.addEventListener(adobe.target.event.CONTENT_RENDERING_FAILED,function(e){mboxUpdate(a("input[name=mboxTitle]").val(),a("input[name=mboxTitle]").val(),"")})}),o.addEventListener(adobe.target.event.REQUEST_FAILED,function(e){})):(n.init(),i.init()),a('a[target="_blank"]').attr("rel","noopener")})}),define("main",[],function(){}),define("hotspots/hotspots",["jquery","_","mediaQuery","overlay/component.overlay"],function(d,e,u,t){var a={},i="rtl"===d("html").attr("dir");function n(s){var c=s.find(".configuration").data("hotspots"),e=("mobile"===u.getMediaType()&&(c=s.find(".configuration").data("mobilehotspots")),d(".hotspot-trigger.isShowOnHover").length,s.find(".content-hotspots").data("background-image"));null!=e&&""!=e&&s.find(".content-hotspots").attr("style",'background-image: url("'+e+'");background-repeat: no-repeat'),d.each(c,function(e,t){e=e,o=t,i=(r=s).find(".component-content"),o.overlayImagePath?(n=void 0!==o.text?"hotspot-trigger number isShowOnHover":"hotspot-trigger isShowOnHover",(a=d("<a/>",{href:o.overlayPath,class:n,text:void 0!==o.text?o.text:"",order:e})).css({left:o.coordinateX+"%",top:o.coordinateY+"%"}),a.appendTo(i),r=r.find(".prepopulate-imgs"),d("<img />",{src:o.overlayImagePath,alt:""}).appendTo(r)):(a=o.overlayVideoPath?(n=void 0!==o.text?"hotspot-trigger number  link-overlay link-overlay-video":"hotspot-trigger  link-overlay link-overlay-video",d("<a/>",{href:o.overlayVideoPath,class:n,text:void 0!==o.text?o.text:"",order:e})):(n=void 0!==o.text?"hotspot-trigger number ":"hotspot-trigger ",d("<a/>",{href:o.overlayPath,class:n,text:void 0!==o.text?o.text:"",order:e}))).css({left:o.coordinateX+"%",top:o.coordinateY+"%"}),a.appendTo(i);var a,i,n,o,r=s.find(".popup-carousel-mobile .slides");n=d(r),o=void 0!==(e=t).overlayContent?e.overlayContent:"",d("<li/>",{html:'<div class="title">'+e.overlayTitle+'</div><div class="description">'+o+"</div>",class:"item"}).appendTo(n)});i&&c.length,1<s.find(".popup-carousel-mobile .item").length&&(s.$slider=s.find(".popup-carousel-mobile").flexslider({animation:"slide",directionNav:!1,slideshow:!1,reverse:i,start:function(e){e=e.currentSlide;s.find(".hotspot-trigger").removeClass("active"),s.find('.hotspot-trigger[order="'+e+'"]').addClass("active")},after:function(e){e=e.currentSlide;s.find(".hotspot-trigger").removeClass("active"),s.find('.hotspot-trigger[order="'+e+'"]').addClass("active")}})),s.on("mouseover",".hotspot-trigger.isShowOnHover",function(e){var t,a=s.find(".popup"),i=d(this).offset().top,n=d(this).offset().left,o="left",r=!1,l=(s.find(".hotspot-trigger").removeClass("active"),d(this).addClass("active"),d(this).attr("order"));"mobile"!==u.getMediaType()&&(d(a).removeClass("right left"),t=d(this).attr("style").replace(" ","").split(";"),d.each(t,function(e,t){t.match("left:")&&!r&&(50<=parseInt(t.replace("left:",""))&&(o="right"),r=!0)}),d(a).find(".content-popup .title").html(c[l].overlayTitle),""==c[l].overlayContent||null==c[l].overlayContent?d(a).find(".content-popup .txt-content").html(""):d(a).find(".content-popup .txt-content").html(c[l].overlayContent),d(a).find(".content-popup img").attr("src",c[l].overlayImagePath),""==c[l].overlayImagePath||null==c[l].overlayImagePath?d(a).find(".content-popup img").hide():d(a).find(".content-popup img").show(),d(a).addClass(o),t=d(a).height()/2,l="left"===o?45+d(this).width()/2:-d(a).width()-(45+d(this).width()/2),d(a).show().offset({top:i-t+("tablet"===u.getMediaType()?5:0),left:e.pageX>=s.offset().left+s.width()/2?n+l+-15:n+l+15}))}).on("mouseout",".hotspot-trigger.isShowOnHover",function(){var e="mobile"===u.getMediaType(),t=s.find(".popup");e||(s.find(".hotspot-trigger").removeClass("active"),d(t).hide())}).on("click",".hotspot-trigger.isShowOnHover",function(e){e.preventDefault()}).on("touchstart",".hotspot-trigger",function(e){var t=d(this);"mobile"===u.getMediaType()&&(s.find(".hotspot-trigger").removeClass("active"),d(t).addClass("active"),t=parseInt(d(t).attr("order")),1<s.find(".hotspot-trigger").length)&&s.find(".popup-carousel-mobile").flexslider(t)}).on("keydown",".hotspot-trigger",function(e){"Enter"===e.key&&e.target.click()}),d(window).resize(function(){var e,t,a,i,n,o,r;s.find(".active").length&&("mobile"===u.getMediaType()?(e=0,s.find(".active").length&&(e=parseInt(s.find(".active").attr("order"))),s.find(".popup-carousel-mobile").flexslider(e),s.find(".popup").hide()):(e=s.find(".popup"),r=s.find(".active"),t=d(r).offset().top,a=d(r).offset().left,n=!(i="left"),o=d(r).attr("style").replace(" ","").split(";"),d.each(o,function(e,t){t.match("left:")&&!n&&(50<=parseInt(t.replace("left:",""))&&(i="right"),n=!0)}),d(e).addClass(i),o=d(e).height()/2,r="left"===i?45+d(r).width()/2:-d(e).width()-(45+d(r).width()/2),d(e).show().offset({top:t-o+("tablet"===u.getMediaType()?5:0),left:a+r}))),s.find(".popup").hide()})}return a.init=function(){d(".hotspots.section").each(function(){n(d(this))})},a}),define("hotspotsAmp/hotspotsAmp",["jquery","_","mediaQuery"],function(d,e,u){var t={},a="rtl"===d("html").attr("dir");function i(s){var c=s.find(".configuration").data("hotspots"),e=("mobile"===u.getMediaType()&&(c=s.find(".configuration").data("mobilehotspots")),d(".hotspot-trigger.isShowOnHover").length,s.find(".content-hotspots").data("background-image"));null!=e&&""!=e&&s.find(".content-hotspots").attr("style",'background-image: url("'+e+'");background-repeat: no-repeat'),d.each(c,function(e,t){e=e,a=t,n=(r=s).find(".component-content"),a.overlayImagePath?(o=void 0!==a.text?"hotspot-trigger number isShowOnHover":"hotspot-trigger isShowOnHover",(i=d("<a/>",{href:a.overlayPath,class:o,text:void 0!==a.text?a.text:"",order:e})).css({left:a.coordinateX+"%",top:a.coordinateY+"%"}),i.appendTo(n),r=r.find(".prepopulate-imgs"),d("<img />",{src:a.overlayImagePath,alt:""}).appendTo(r)):(i=a.overlayVideoPath?(o=void 0!==a.text?"hotspot-trigger number  link-overlay link-overlay-video":"hotspot-trigger  link-overlay link-overlay-video",d("<a/>",{href:a.overlayVideoPath,class:o,text:void 0!==a.text?a.text:"",order:e})):(o=void 0!==a.text?"hotspot-trigger number ":"hotspot-trigger ",d("<a/>",{href:a.overlayPath,class:o,text:void 0!==a.text?a.text:"",order:e}))).css({left:a.coordinateX+"%",top:a.coordinateY+"%"}),i.appendTo(n);var a,i,n,o,r=s.find(".popup-carousel-mobile .slides");o=d(r),e='<div class="title">'+(e=t).overlayTitle+'</div><div class="description">'+t.overlayContent+"</div>",d("<li/>",{html:e,class:"item"}).appendTo(o)});a&&c.length,1<s.find(".popup-carousel-mobile .item").length&&(s.$slider=s.find(".popup-carousel-mobile").flexslider({animation:"slide",directionNav:!1,slideshow:!1,reverse:a,start:function(e){e=e.currentSlide;s.find(".hotspot-trigger").removeClass("active"),s.find('.hotspot-trigger[order="'+e+'"]').addClass("active")},after:function(e){e=e.currentSlide;s.find(".hotspot-trigger").removeClass("active"),s.find('.hotspot-trigger[order="'+e+'"]').addClass("active")}})),s.on("mouseover",".hotspot-trigger.isShowOnHover",function(e){var t,a=s.find(".popup"),i=d(this).offset().top,n=d(this).offset().left,o="left",r=!1,l=(s.find(".hotspot-trigger").removeClass("active"),d(this).addClass("active"),d(this).attr("order"));"mobile"!==u.getMediaType()&&(d(a).removeClass("right left"),t=d(this).attr("style").replace(" ","").split(";"),d.each(t,function(e,t){t.match("left:")&&!r&&(50<=parseInt(t.replace("left:",""))&&(o="right"),r=!0)}),d(a).find(".content-popup .title").html(c[l].overlayTitle),d(a).find(".content-popup .txt-content").html(c[l].overlayContent),d(a).find(".content-popup img").attr("src",c[l].overlayImagePath),""==c[l].overlayImagePath||null==c[l].overlayImagePath?d(a).find(".content-popup img").hide():d(a).find(".content-popup img").show(),d(a).addClass(o),t=d(a).height()/2,l="left"===o?45+d(this).width()/2:-d(a).width()-(45+d(this).width()/2),d(a).show().offset({top:i-t+("tablet"===u.getMediaType()?5:0),left:e.pageX>=s.offset().left+s.width()/2?n+l+-15:n+l+15}))}).on("mouseout",".hotspot-trigger.isShowOnHover",function(){var e="mobile"===u.getMediaType(),t=s.find(".popup");e||(s.find(".hotspot-trigger").removeClass("active"),d(t).hide())}).on("click",".hotspot-trigger.isShowOnHover",function(e){e.preventDefault()}).on("touchstart",".hotspot-trigger.isShowOnHover",function(e){var t=d(this);"mobile"===u.getMediaType()&&(s.find(".hotspot-trigger").removeClass("active"),d(t).addClass("active"),t=parseInt(d(t).attr("order")),1<s.find(".hotspot-trigger").length)&&s.find(".popup-carousel-mobile").flexslider(t)}),d(window).resize(function(){var e,t,a,i,n,o,r;s.find(".active").length&&("mobile"===u.getMediaType()?(e=0,s.find(".active").length&&(e=parseInt(s.find(".active").attr("order"))),s.find(".popup-carousel-mobile").flexslider(e),s.find(".popup").hide()):(e=s.find(".popup"),r=s.find(".active"),t=d(r).offset().top,a=d(r).offset().left,n=!(i="left"),o=d(r).attr("style").replace(" ","").split(";"),d.each(o,function(e,t){t.match("left:")&&!n&&(50<=parseInt(t.replace("left:",""))&&(i="right"),n=!0)}),d(e).addClass(i),o=d(e).height()/2,r="left"===i?45+d(r).width()/2:-d(e).width()-(45+d(r).width()/2),d(e).show().offset({top:t-o+("tablet"===u.getMediaType()?5:0),left:a+r}))),s.find(".popup").hide()})}return t.init=function(){d(".hotspotsAmp.section").each(function(){i(d(this))})},t}),define("colorizer/component.colorizer",["jquery","jquery-flexslider","hammer","configurationProvider","_","mediaQuery"],function(m,e,h,f,g,i){var v=".colorizer",y={init:function(){m(v).each(function(){var a=m(this),t=(a.find(".color-items .item").length&&y.colorSwatch.init(a),f.get(a)),e=m("#exterioTab").attr("data-exteriorArrowsColor"),i=m("#interiorTab").attr("data-interiorArrowsColor"),n="/etc/designs/guxfoap/clientlibs/guxfoap/img/colorizer/360arrows/",o="",r="",l=(e&&(o=n+e+".png"),i&&(r=n+i+".png"),a.find(".tab-content #exterio .slides")),s=a.find(".tab-content #interio .slides"),c=a.find(".tab-content #tb3 .slides"),d=a.find(".tab-content #tb4 .slides"),u=g.template('<li class="item"><noscript><picture><source srcset="${renditions0}" media="(min-width: 1200px)"><source srcset="${renditions1}" media="(min-width: 992px)"><source srcset="${renditions2}" media="(min-width: 768px)"><source srcset="${renditions3}" media="(min-width: 480px)"><source srcset="${renditions4}" media="(min-width: 0px)"><img src="${defaultRendition}" alt="${defaultRenditionAltTitle}" title="${defaultRenditionAltTitle}" draggable="false"/></picture></noscript></li>'),p=a.find(".tab").first().attr("id");"exterio"==p&&(t.exterior&&0<t.exterior.length&&m.each(t.exterior,function(e,t){t=u({renditions0:t.renditions[0].path,renditions1:t.renditions[1].path,renditions2:t.renditions[2].path,renditions3:t.renditions[3].path,renditions4:t.renditions[4].path,defaultRenditionAltTitle:t.fallbackRendition.altTitle,defaultRendition:t.fallbackRendition.path});l.append(t)}),w(l.find("li:first-of-type")),a.find("#interiorTab").on("click",function(){var e;s.html().length<1&&(t.interior&&0<t.interior.length&&m.each(t.interior,function(e,t){t=u({renditions0:t.renditions[0].path,renditions1:t.renditions[1].path,renditions2:t.renditions[2].path,renditions3:t.renditions[3].path,renditions4:t.renditions[4].path,defaultRenditionAltTitle:t.fallbackRendition.altTitle,defaultRendition:t.fallbackRendition.path});s.append(t)}),a.find(".image-360").length&&a.find(".image-360").each(function(){var t=this;y.image360.init(this,a),new h(this).on("panright",function(e){b(m(t)),m(t).flexslider("prev")}).on("panleft",function(e){b(m(t)),m(t).flexslider("next")}),r&&m("#interio .image-360").find(".flex-next,.flex-prev").css({"background-image":"url("+r+")"})}),e=m(this).attr("href"),m(this).closest(v).find(e).addClass("active"),m(this).closest(v).find(e).siblings(".tab").removeClass("active"),m(this).parent("li").addClass("active").siblings().removeClass("active")),s.find("li:first-of-type").find("noscript").replaceWith(function(){return this.textContent||this.innerText})}),a.find("#Tab3").on("click",function(){var e;c.html().length<1&&(t.tab3&&0<t.tab3.length&&m.each(t.tab3,function(e,t){t=u({renditions0:t.renditions[0].path,renditions1:t.renditions[1].path,renditions2:t.renditions[2].path,renditions3:t.renditions[3].path,renditions4:t.renditions[4].path,defaultRenditionAltTitle:t.fallbackRendition.altTitle,defaultRendition:t.fallbackRendition.path});c.append(t)}),a.find(".image-360").length&&a.find(".image-360").each(function(){var t=this;y.image360.init(this,a),new h(this).on("panright",function(e){b(m(t)),m(t).flexslider("prev")}).on("panleft",function(e){b(m(t)),m(t).flexslider("next")})}),e=m(this).attr("href"),m(this).closest(v).find(e).addClass("active"),m(this).closest(v).find(e).siblings(".tab").removeClass("active"),m(this).parent("li").addClass("active").siblings().removeClass("active")),c.find("li:first-of-type").find("noscript").replaceWith(function(){return this.textContent||this.innerText})}),a.find("#Tab4").on("click",function(){var e;d.html().length<1&&(t.tab4&&0<t.tab4.length&&m.each(t.tab4,function(e,t){t=u({renditions0:t.renditions[0].path,renditions1:t.renditions[1].path,renditions2:t.renditions[2].path,renditions3:t.renditions[3].path,renditions4:t.renditions[4].path,defaultRenditionAltTitle:t.fallbackRendition.altTitle,defaultRendition:t.fallbackRendition.path});d.append(t)}),a.find(".image-360").length&&a.find(".image-360").each(function(){var t=this;y.image360.init(this,a),new h(this).on("panright",function(e){b(m(t)),m(t).flexslider("prev")}).on("panleft",function(e){b(m(t)),m(t).flexslider("next")})}),e=m(this).attr("href"),m(this).closest(v).find(e).addClass("active"),m(this).closest(v).find(e).siblings(".tab").removeClass("active"),m(this).parent("li").addClass("active").siblings().removeClass("active")),d.find("li:first-of-type").find("noscript").replaceWith(function(){return this.textContent||this.innerText})}),a.find(".flex-next, .flex-prev").on("click",function(){b(m(this).closest(v).find("#interiorTab .image-360"))})),"interio"==p&&(t.interior&&0<t.interior.length&&m.each(t.interior,function(e,t){t=u({renditions0:t.renditions[0].path,renditions1:t.renditions[1].path,renditions2:t.renditions[2].path,renditions3:t.renditions[3].path,renditions4:t.renditions[4].path,defaultRenditionAltTitle:t.fallbackRendition.altTitle,defaultRendition:t.fallbackRendition.path});s.append(t)}),w(s.find("li:first-of-type")),a.find("#Tab3").on("click",function(){var e;c.html().length<1&&(t.tab3&&0<t.tab3.length&&m.each(t.tab3,function(e,t){t=u({renditions0:t.renditions[0].path,renditions1:t.renditions[1].path,renditions2:t.renditions[2].path,renditions3:t.renditions[3].path,renditions4:t.renditions[4].path,defaultRenditionAltTitle:t.fallbackRendition.altTitle,defaultRendition:t.fallbackRendition.path});c.append(t)}),a.find(".image-360").length&&a.find(".image-360").each(function(){var t=this;y.image360.init(this,a),new h(this).on("panright",function(e){b(m(t)),m(t).flexslider("prev")}).on("panleft",function(e){b(m(t)),m(t).flexslider("next")})}),e=m(this).attr("href"),m(this).closest(v).find(e).addClass("active"),m(this).closest(v).find(e).siblings(".tab").removeClass("active"),m(this).parent("li").addClass("active").siblings().removeClass("active")),c.find("li:first-of-type").find("noscript").replaceWith(function(){return this.textContent||this.innerText})}),a.find("#Tab4").on("click",function(){var e;d.html().length<1&&(t.tab4&&0<t.tab4.length&&m.each(t.tab4,function(e,t){t=u({renditions0:t.renditions[0].path,renditions1:t.renditions[1].path,renditions2:t.renditions[2].path,renditions3:t.renditions[3].path,renditions4:t.renditions[4].path,defaultRenditionAltTitle:t.fallbackRendition.altTitle,defaultRendition:t.fallbackRendition.path});d.append(t)}),a.find(".image-360").length&&a.find(".image-360").each(function(){var t=this;y.image360.init(this,a),new h(this).on("panright",function(e){b(m(t)),m(t).flexslider("prev")}).on("panleft",function(e){b(m(t)),m(t).flexslider("next")})}),e=m(this).attr("href"),m(this).closest(v).find(e).addClass("active"),m(this).closest(v).find(e).siblings(".tab").removeClass("active"),m(this).parent("li").addClass("active").siblings().removeClass("active")),d.find("li:first-of-type").find("noscript").replaceWith(function(){return this.textContent||this.innerText})}),a.find(".flex-next, .flex-prev").on("click",function(){b(m(this).closest(v).find("#Tab3 .image-360"))})),"tb3"==p&&(t.tab3&&0<t.tab3.length&&m.each(t.tab3,function(e,t){t=u({renditions0:t.renditions[0].path,renditions1:t.renditions[1].path,renditions2:t.renditions[2].path,renditions3:t.renditions[3].path,renditions4:t.renditions[4].path,defaultRenditionAltTitle:t.fallbackRendition.altTitle,defaultRendition:t.fallbackRendition.path});c.append(t)}),w(c.find("li:first-of-type")),a.find("#Tab4").on("click",function(){var e;d.html().length<1&&(t.tab4&&0<t.tab4.length&&m.each(t.tab4,function(e,t){t=u({renditions0:t.renditions[0].path,renditions1:t.renditions[1].path,renditions2:t.renditions[2].path,renditions3:t.renditions[3].path,renditions4:t.renditions[4].path,defaultRenditionAltTitle:t.fallbackRendition.altTitle,defaultRendition:t.fallbackRendition.path});d.append(t)}),a.find(".image-360").length&&a.find(".image-360").each(function(){var t=this;y.image360.init(this,a),new h(this).on("panright",function(e){b(m(t)),m(t).flexslider("prev")}).on("panleft",function(e){b(m(t)),m(t).flexslider("next")})}),e=m(this).attr("href"),m(this).closest(v).find(e).addClass("active"),m(this).closest(v).find(e).siblings(".tab").removeClass("active"),m(this).parent("li").addClass("active").siblings().removeClass("active")),d.find("li:first-of-type").find("noscript").replaceWith(function(){return this.textContent||this.innerText})}),a.find(".flex-next, .flex-prev").on("click",function(){b(m(this).closest(v).find("#Tab4 .image-360"))})),"tb4"==p&&(t.tab4&&0<t.tab4.length&&m.each(t.tab4,function(e,t){t=u({renditions0:t.renditions[0].path,renditions1:t.renditions[1].path,renditions2:t.renditions[2].path,renditions3:t.renditions[3].path,renditions4:t.renditions[4].path,defaultRendition:t.fallbackRendition.path});d.append(t)}),w(d.find("li:first-of-type"))),a.find(".image-360").length&&a.find(".image-360").each(function(){var t=this;y.image360.init(this,a),new h(this).on("panright",function(e){b(m(t)),m(t).flexslider("prev")}).on("panleft",function(e){b(m(t)),m(t).flexslider("next")}),"exterio"==p?o&&m("#exterio .image-360").find(".flex-next,.flex-prev").css({"background-image":"url("+o+")"}):"interio"==p&&r&&m("#interio .image-360").find(".flex-next,.flex-prev").css({"background-image":"url("+r+")"})}),a.find(".tabs .tab-links a").length&&y.tabs.init(!1,a),a.find(".flex-next, .flex-prev").on("click",function(){b(m(this).closest(v).find(".image-360"))}),m("body").on("click",".colorizer.section .image-360-guide",function(){m(this).parent().hide(),m(this).parent().siblings(".colorizer-image-360-guide-light").show()})})},colorSwatch:{init:function(e){m(".color-items .item").on("click keydown",function(e){var t=m(this).index();if("keydown"===e.type)switch(e.which){case 13:m(this).closest(v).find(".main-picture .item").hide(),m(this).closest(v).find(".main-picture .item").eq(t).show(),m(this).addClass("active").siblings().removeClass("active");break;case 37:m(this).prev().focus();break;case 39:m(this).next().focus()}else m(this).closest(v).find(".main-picture .item").hide(),m(this).closest(v).find(".main-picture .item").eq(t).show(),m(this).addClass("active").siblings().removeClass("active")}),e.find(".color-items .item").on("trigger")}},tabs:{init:function(e,o){m(".colorizer .tabs .tab-links a").on("click",function(e){var t=m(this).attr("href");return e.preventDefault(),m(this).closest(v).find(t).addClass("active"),m(this).closest(v).find(t).siblings(".tab").removeClass("active"),m(this).parent("li").addClass("active").siblings().removeClass("active"),!1}),m(".colorizer .tabs .tab-content .mobile-nav").on("click",function(e){var t=m(this).attr("tab-index");m(this).closest(v).find('.tabs .tab-links a[id="'+t+'"]').trigger("click")}),o.find(".tabs .tab-links a").first().trigger("click"),o.find("#colorizerMainImg li:first").addClass("active"),o.find(".colorizerMainTab li:first").addClass("active"),o.find("#colorizerBtn li:first").addClass("active"),1===o.find(".tabs .tab-links li").length&&(o.find(".tabs .tab-content .mobile-nav").addClass("centered"),o.find(".tabs .tab-content .mobile-nav span.icon").hide()),void 0!==e&&0!=e&&m(e).flexslider({animation:"fade",slideshow:!1,useCss:!1,slideshowSpeed:1,animationSpeed:1}),m("[data-attribute-aa=isActiveAAEnhancement]").length&&m(".colorizerMainTab").on("keyup",function(e){var t,a,i,n;m(this)&&m(this).parent()&&(a=(t=m(this).parent().closest(o)).find("#exterio"),i=t.find("#interio"),n=t.find("#colorizer"),"Enter"===e.key&&t.length?e.target.getAttribute("id").includes("colorizer")?(r(a,".flex-direction-nav li a",!0,!0,"exterio"),r(n,"#colorizerBtn.color-items li.item",!1,!1,"colorizer")):e.target.getAttribute("id").includes("interio")?(r(i,".flex-direction-nav li a",!1,!1,"exterio"),r(a,".flex-direction-nav li a",!0,!0,"exterio")):i.length?(r(a,".flex-direction-nav li a",!1,!1,"exterio"),r(i,".flex-direction-nav li a",!0,!0,"interio")):(r(n,"#colorizerBtn.color-items li.item",!0,!0,"colorizer"),r(a,".flex-direction-nav li a",!1,!1,"exterio")):"Tab"===e.key&&t.length&&a.length&&(r(n,"#colorizerBtn.color-items li.item",!0,!0,"colorizer"),r(a,".flex-direction-nav li a",!1,!1,"exterio")))})}},image360:{init:function(t,e){e.find("#colorizerMainImg li:first").addClass("active"),e.find(".colorizerMainTab li:first").addClass("active"),e.find("#colorizerBtn li:first").addClass("active");var a;m(t).flexslider({animation:"fade",slideshow:!1,useCss:!1,slideshowSpeed:1,animationSpeed:1,before:function(e){r(t,".flex-direction-nav li a",!0,!1,"exterio"),b(m(e))},after:function(){r(t,".flex-direction-nav li a",!1,!1,"exterio")}});"mobile"===i.getMediaType()||"tablet"===i.getMediaType()?(m(t).on("touchstart",".flex-next",function(e){e.preventDefault();e=m(this).parents(".image-360");a=n(e,"next")}),m(t).on("touchstart",".flex-prev",function(e){e.preventDefault();e=m(this).parents(".image-360");a=n(e,"prev")}),m(t).on("touchend",".flex-next, .flex-prev",function(e){clearInterval(a)}),m(":not(.image-360)").on("click mouseup mouseout",".flex-next, .flex-prev",function(e){clearInterval(a)})):(m(t).on("mousedown",".flex-next",function(e){var t=m(this).parents(".image-360");a=n(t,"next")}),m(t).on("mousedown",".flex-prev",function(e){var t=m(this).parents(".image-360");a=n(t,"prev")}),m(":not(.image-360)").on("click mouseup mouseout",".flex-next, .flex-prev",function(e){clearInterval(a)}))}}};function r(e,t,a,i,n){var o;m("[data-attribute-aa=isActiveAAEnhancement]").length&&1020<m(window).width()&&(e=m(e).find(t),o="aaTabIndexTempStore",window[o]=a&&!window[o]?{}:window[o],e.length)&&e.each(function(e){var t;a?((t=this.getAttribute("tabIndex"))&&"-1"!==t.toString()&&(window[o][this.className+n+e]=t),i&&this.setAttribute("tabIndex",-1)):window[o]&&window[o][this.className+n+e]&&this.setAttribute("tabIndex",window[o][this.className+n+e])})}function n(e,t){return setInterval(function(){e.flexslider(t)},100)}function b(e){m(".imageLoaderCTA").hide(),e.find("noscript").length&&(e.find("noscript").replaceWith(function(){return m(this).parent().addClass("checking-loading"),this.textContent||this.innerText}),e=e.find(".checking-loading img"),m.each(e,function(e,t){m(t).parents(".checking-loading").removeClass("checking-loading"),m(".imageLoader").show(),m(t).load(function(){m(".imageLoader").hide()})}))}function w(e){e.find("noscript").replaceWith(function(){return this.textContent||this.innerText});e=e.find("img");m(".imageLoader").show(),e.load(function(){m(".imageLoader").hide()})}return m(".imageLoaderCTA").on("click",function(){b(m(".image-360"))}),y}),define("colorizerthreesixty/component.colorizerthreesixty",["jquery","jquery-flexslider","hammer","configurationProvider","_","mediaQuery"],function(l,e,s,c,d,n){var u=".colorizerthreesixty",p=new function(){this.curSlide=0,this.setCurSlide=function(e){this.curSlide=e},this.getCurSlide=function(){return this.curSlide}},m={init:function(){l(u).each(function(){var e=l(this),t=(e.find(".color-items .item").length&&m.colorSwatch.init(e),($activecolor=e.find(".color-items .item.active")).data("items"));m.createDom.init(this,e,t)})},createDom:{init:function(e,a,t){var i=p.getCurSlide(),n=c.get(a),o=a.find("#exterio .slides"),r=(o.html(""),d.template('<li class="item"><noscript><picture><source srcset="${renditions0}" media="(min-width: 1200px)"><source srcset="${renditions1}" media="(min-width: 992px)"><source srcset="${renditions2}" media="(min-width: 768px)"><source srcset="${renditions3}" media="(min-width: 480px)"><source srcset="${renditions4}" media="(min-width: 0px)"><img src="${defaultRendition}" alt="" title="" draggable="false"/></picture></noscript></li>'));n.exterior[t]&&0<n.exterior[t].length&&l.each(n.exterior[t],function(e,t){t=r({renditions0:t.renditions[0].path,renditions1:t.renditions[1].path,renditions2:t.renditions[2].path,renditions3:t.renditions[3].path,renditions4:t.renditions[4].path,defaultRendition:t.fallbackRendition.path});o.append(t)});n=o.find("li:eq("+i+")");n.find("noscript").replaceWith(function(){return this.textContent||this.innerText}),n=n.find("img"),l(".imageLoader").show(),n.load(function(){l(".imageLoader").hide()}),a.find(".image-360").length&&a.find(".image-360").each(function(){var t=this;m.image360.init(this,a,i),new s(this).on("panright",function(e){h(l(t)),l(t).flexslider("prev")}).on("panleft",function(e){h(l(t)),l(t).flexslider("next")})}),a.find(".flex-next, .flex-prev").on("click",function(){h(l(this).closest(u).find(".image-360"))})}},colorSwatch:{init:function(e){e.find(".color-items .item").on("click",function(){l(this).index();l(this).addClass("active").siblings().removeClass("active");var e=l(this).parents(u),t=l(this).data("items");m.createDom.init(this,e,t)}),e.find(".color-items .item").on("trigger")}},image360:{init:function(e,t,a){l(e).find(".flex-control-nav").remove(),l(e).find(".flex-direction-nav").remove(),l(e).removeData("flexslider");var i;l(e).flexslider({startAt:a,animation:"fade",slideshow:!1,useCss:!1,slideshowSpeed:1,animationSpeed:1,before:function(e){h(l(e))},after:function(e){p.setCurSlide(e.currentSlide)}});"mobile"===n.getMediaType()||"tablet"===n.getMediaType()?(l(e).on("touchstart",".flex-next",function(e){e.preventDefault();e=l(this).parents(".image-360");i=o(e,"next")}),l(e).on("touchstart",".flex-prev",function(e){e.preventDefault();e=l(this).parents(".image-360");i=o(e,"prev")}),l(e).on("touchend",".flex-next, .flex-prev",function(e){clearInterval(i)}),l(":not(.image-360)").on("click mouseup mouseout",".flex-next, .flex-prev",function(e){clearInterval(i)})):(l(e).on("mousedown",".flex-next",function(e){var t=l(this).parents(".image-360");i=o(t,"next")}),l(e).on("mousedown",".flex-prev",function(e){var t=l(this).parents(".image-360");i=o(t,"prev")}),l(":not(.image-360)").on("click mouseup mouseout",".flex-next, .flex-prev",function(e){clearInterval(i)}))}}};function o(e,t){return setInterval(function(){e.flexslider(t)},100)}function h(e){e.find("noscript").length&&(e.find("noscript").replaceWith(function(){return l(this).parent().addClass("checking-loading"),this.textContent||this.innerText}),e=e.find(".checking-loading img"),l.each(e,function(e,t){l(t).parents(".checking-loading").removeClass("checking-loading"),l(".imageLoader").show(),l(t).load(function(){})}))}return m}),define("accessories/accessoriesMain",["jquery","configurationProvider","overlay/component.overlay","_","marketConfigGlobal","mediaQuery","analytics/loads/internalCampaignPageLoad","analytics/analyticsEventLayer"],function(b,w,y,e,t,a,i,l){var n={},C=(window.location.pathname,[]),k=b(".accessories-dropdown.dealer-selection.is-new-design.showing-prices").data("aupricingforrangerandeverest"),S=b(".accessories-dropdown.dealer-selection.is-new-design.showing-prices").data("selectdealertoshowpriceslabel"),s=(dropdownFilterSelector=".dropdown-filter .selections",dropdownFilterTemplate=e.template('<li accessory-type="${pageName}"><a href="javascript:void(0);" data-filter="${pageName}">${pageTitle}</a></li>'),listItemsSelector=".list-items",listItemsTemplateWithLink=e.template('<li class="item filtered ${copyColor} targetClass" data-open-new-window="${targetBlank}" accessory-type="${pageName}" data-sku="${sku}"><a href="${link}" class="link-overlay  target-class-link ${ifFdsClass} ${copyColor}"><img src="${image}" alt="${alttext}"/></a><span class="name-item subtitle1-regular-gray-ttNone">${title}</span><p><span class="price-label-acc">${priceLabel} </span><span class="accessory-price"><span>${accPrice}</span></span></p></li>'),listItemsTemplateWithoutLink=e.template('<li class="item filtered ${copyColor}" accessory-type="${pageName}" data-sku="${sku}"><img src="${image}" alt="${alttext}"/><span class="name-item">${title}</span><p><span class="price-label-acc">${priceLabel} </span><span class="accessory-price"><span>${accPrice}</span></span></p></li>'),mobileAccordionSelector=".mobile-content",mobileAccordionTemplate=e.template('<div class="mobile-nav ${auPricingClass}"><div class="item-header">${pageTitle}</div><span class="icon"></span></div><div class="${pageName} accessories-slide"><ul id="${pageName}" class="slides clearfix"><li class="item"></li></ul></div>'),olCaruselArrowTemplate=e.template('<div class="carousel-arrows"><div class="carousel-btn carousel-next link-overlay" tabindex="-1"><span class="icon icon-chevron-thin-right"></span></div><div class="carousel-btn darkened carousel-previous inactive link-overlay" tabindex="-1"><span class="icon icon-chevron-thin-left"></span></div></div>'),mobPageNav=e.template('<div class="nav-carousel"><a class="btn flex-left flex-prev"><span class="icon icon-chevron-thin-left"></span></a><span class="page-num"> </span><a class="btn flex-right flex-next"><span class="icon icon-chevron-thin-right"></span></a></div>'),keys={enter:13,escape:27,leftArrow:37,rightArrow:39},activeClass="is-active",prefix="overlay",marketCode=t.getCurrentMarketCode(),isMobile="mobile"===a.getMediaType(),0),x=function(e){var i,a,f,g,n,o,r,v=[],t=(b(e),b(".accessories ul"),isMobile?b(e).find(".accessories .mobile-content .slides li.item"):b(e).find(".accessories .filter-content .list-items li.item"));t.find("a");setTimeout(function(){b.each(t,function(e,t){e++;e=t.innerHTML;a=b(e).attr("href"),v.push(a),void 0===a&&(i="no")})},700),t.bind("click touchstart",function(){"au"===marketCode&&k&&0===s&&(s=1,l.getAccessoriesEvents().accessoriesTileClick()),n=b(this).index();var t=b(this).attr("accessory-type"),a=b(this).data("sku");b(window).on("onoverlayload.accSlider",function(){setTimeout(function(){var e=v.length;e--,o=n-1,r=n+1,"no"!=i&&function c(e,d,u,p,m,h,t){"au"===marketCode&&k&&1===s&&(s=2,l.getAccessoriesEvents().vehicleAccessoryOverlay(t));b(window).off("onoverlayload.accSlider");b.each(e.overlays,function(e,t){var a=t.$overlayContent,t=t.$overlayContentInner,t=(a.addClass("olCarusel"),t.addClass("olCaruselInner"),olCaruselArrowTemplate),a=(a.append(t),b(".carousel-arrows").css({position:"absolute",top:"45%",right:"0"}),b(".carousel-arrows .carousel-previous")),t=b(".carousel-arrows .carousel-next");p<0?(f=v[p=u],a.attr("href",f),g=v[m],t.attr("href",g)):m<0?(g=v[m=u],t.attr("href",g),f=v[p],a.attr("href",f)):u<m?(g=v[m=0],t.attr("href",g),f=v[p],a.attr("href",f)):(u<p?(f=v[p=0],a.attr("href",f),g=v[m]):(f=v[p],g=v[m],a.attr("href",f)),t.attr("href",g));let i=b(".overlay-acc-price"),n=b(".overlay-acc-price-label"),o=isMobile?b(`.mobile-content #${h} .accessory-price`):b(".filter-content .accessory-price"),r=isMobile?b(`.mobile-content #${h} .price-label-acc`):b(".filter-content .price-label-acc"),l=o[d].textContent,s=r[d].textContent;i.text(l),n.text(s),a.on("click",function(){setTimeout(function(){c(y,d,u,p-1,m-1,h),b(".overlay-content").css({transition:"3s",right:"0"})},700)}),t.on("click",function(){setTimeout(function(){c(y,d,u,p+1,m+1,h),b(".overlay-content-inner").css({transition:"3s",left:"0"})},700)})});s=0}(y,n,e,o,r,t,a)},501)})})};function D(e,t){"au"===marketCode&&((e=e).sort(function(e,t){e=e.title.substr(3),t=t.title.substr(3);return e<t?-1:t<e?1:0}),P(t,e),isMobile)&&setTimeout(function(){b(".accessories.section").each(function(){x(this)})})}function o(e){var a,i;if(void 0!==(t=b(e).find(".accessories.mob-pagination"))&&0<t.length&&setTimeout(function(){b(e).find(".mobile-content .accessories-slide").append(mobPageNav),b(e).find(".mobile-content .accessories-slide").each(function(){var e=b(this).data("flexslider"),t=b(this).find(".flex-next"),a=b(this).find(".flex-prev");t.bind("click",function(){e.flexAnimate(e.getTarget("next"))}),a.bind("click",function(){e.flexAnimate(e.getTarget("previous"))})})},100),e){var t=b(e),n=t.find(dropdownFilterSelector).first(),o=t.find(mobileAccordionSelector).first(),r=t.find(listItemsSelector).first(),l=w.get(t),s=l.pageslist,c=l.itemslist,d=l.accessorieslist,l=l.pricelabel,t=t.find(".sortSelections").first();if(s&&c&&(u=s,(i=n).empty(),b.each(u,function(e,t){t=dropdownFilterTemplate({pageName:t.pageName,pageTitle:t.pageTitle});i.append(t)}),n=s,(a=o).empty(),b.each(n,function(e,t){0!=e&&"All"!==t.pageName&&(e=mobileAccordionTemplate({pageName:t.pageName,pageTitle:t.pageTitle,auPricingClass:k?"auPricing"+t.pageName:""}),a.append(e))}),P(r,c),D(c,t),k)){var u=d,s=c,o=r,n=t,d=l,c=sessionStorage.getItem("selectedDealerCode");{var p=c,m=s,h=o,f=n,g=d;let e=(c=u).postal_code,t=Object.values(e),a=[],i=(t.forEach(function(e,t){e.dealers.forEach(function(e){a.push(e[p])})}),a=a.filter(function(e){return void 0!==e}),[]);a.forEach(function(e){e.forEach(function(e){i.push(e)})}),i.forEach(function(a,e){var i,t=m.filter(function(e,t){if(b(e.sku).text().trim()===a.skuId)return e.price=a.price,e.pageNameBasedOnDealer=e.pageName,b(e.sku).text().trim()===a.skuId}),t=(C.push(t[0]),0<C.length);t?P(h,C,g):b(".accessories .filter-content").append("<div>No items to be shown for this combination</div>"),D(C,f),b(".accessories.section").each(function(){x(this)}),i=(()=>{var e=window.location.href,t=!1;return t=-1<e.indexOf("?wcmmode=disabled")||-1<e.indexOf("&wcmmode=disabled")?!0:t})(),b(".filter-content a.link-overlay:not(.popup-link-initialized), .link-overlay a:not(.popup-link-initialized)").filter(function(e,t){t=b(t).data("deep-linking");return void 0===t||"1"==t}).each(function(e,t){var a=(e=>{var t=document.createElement("a");return t.href=e,e=0!==(e=t.pathname).indexOf("/")?"/"+e:e})(t.href);i&&-1==a.indexOf("?wcmmode=disabled")&&-1==a.indexOf("&wcmmode=disabled")&&(-1!=a.indexOf("?")?a+="&wcmmode=disabled":a+="?wcmmode=disabled"),t.search&&(-1!=a.indexOf("?")?a+=t.search.replace("?","&"):a+=t.search),b(t).hasClass("base-url")||b(t).addClass("base-url").attr("href",window.url+"#overlay"+a)})});var v=C.map(e=>e&&e.pageNameBasedOnDealer?e.pageNameBasedOnDealer:null).filter(e=>null!==e);b(".dropdown-filter ul.selections li").each(function(){var e=b(this).attr("accessory-type");0===v.length||"all"===e||void 0===e||v.includes(e)||(b(this).remove(),b(".auPricing"+e).remove(),b("."+e).remove())})}C=[];var u=sessionStorage.getItem("selectedDealerCode"),y=sessionStorage.getItem("selectedDealerName");u&&y?b(".accessories-dropdown.dealer-selection").each(function(){b(this).find("a").text(y),b(this).find("a").removeClass("disable-field")}):(b(".showingPricesLabel").remove(),b(".displayOverlayWhenDealerDetailsNotPresent.is-new-design").text(S),b("a.displayOverlayWhenDealerDetailsNotPresent.is-new-design").removeClass("prefill-dealer-selection"),setTimeout(()=>{b("a.displayOverlayWhenDealerDetailsNotPresent.is-new-design").trigger("click")},0))}}}var P=function(o,e,r){o.empty();var l=b(".fds-bg-accessories")?"fds-link-overlay":"";b.each(e,function(e,t){var a,i=void 0===t,n=i?"":t.price;i||(t.link?(a=listItemsTemplateWithLink({pageName:t.pageName,link:t.link,alttext:t.altText,image:t.image,title:t.title,targetBlank:t.targetBlank,copyColor:t.copyColor,ifFdsClass:l,priceLabel:n?r:"",accPrice:n?t.price:"",sku:b(t.sku).text().trim()}),t.targetBlank):a=listItemsTemplateWithoutLink({pageName:t.pageName,image:t.image,title:t.title,copyColor:t.copyColor,priceLabel:n?r:"",accPrice:n?t.price:"",sku:b(t.sku).text().trim()}),o.append(a))})};return n.init=function(){b(".accessories.section").each(function(){o(this),x(this)}),b(".targetClass").each(function(){b(this).data("open-new-window")&&b(this).find("a.target-class-link").attr("target","_blank").removeClass("link-overlay")})},n}),define("accessories/component.accessories",["jquery","jquery-flexslider","analytics/analyticsEventLayer","marketConfigGlobal"],function(s,e,n,c){var d={init:function(){var e=d.getListTypes();s.each(e,function(){d.initSlider("."+this,this.toString())}),d.initAccordion(),d.initFilter()},initFilter:function(){s(".allAccessories .filtered").sort(d.ascending_sort).appendTo(".allAccessories"),d.addClearLeft(s(".list-items li.filtered:visible")),s(".selections li").on("click",function(){var e=s(this).attr("accessory-type"),t=s(this).text(),a=s(".accessories .filter-content .allAccessories"),i=s(".accessories .filter-content .sortSelections");"all"===e?(s(".allAccessories li").removeClass("clearl").addClass("filtered").show(),s(".allAccessories .filtered").sort(d.ascending_sort).appendTo(".allAccessories"),d.addClearLeft(s(".allAccessories li.filtered:visible")),i.addClass("hide"),a.removeClass("hide")):(i.addClass("hide"),a.removeClass("hide"),s(".allAccessories li").removeClass("clearl").removeClass("filtered").hide(),s('.allAccessories li[accessory-type="'+e+'"]').addClass("filtered").show(),s(".allAccessories .filtered").sort(d.ascending_sort).appendTo(".allAccessories"),d.addClearLeft(s('.allAccessories li[accessory-type="'+e+'"].filtered')),n.getVehicleAccessoriesEvents().trackAccessoriesFilter(e)),s(".selected-type").find(".name-type").text(t)})},addClearLeft:function(e){s.each(e,function(e,t){e%4==0&&s(t).addClass("clearl")})},ascending_sort:function(e,t){return s(t).text().toUpperCase()<s(e).text().toUpperCase()?1:-1},initAccordion:function(){s(".mobile-nav").on("click",function(){var e=s(this).index(".mobile-nav");s(".mobile-content .accessories-slide").css("height","0"),s(this).hasClass("active")?(s(this).removeClass("active"),d.closeTab(s(this),e)):(s(".mobile-nav").removeClass("active"),s(this).addClass("active"),d.openTab(s(this),e))}),s(".mobile-nav").first().trigger("click")},closeTab:function(e,t){s(e).css("margin-bottom","0"),s(".mobile-content .accessories-slide").css("margin-bottom","0"),s(".mobile-content .accessories-slide .flex-control-nav").hide(),s(".mobile-content .accessories-slide .flex-viewport").css("height",0)},openTab:function(e,t){s(".mobile-nav").css("margin-bottom","0"),s(e).css("margin-bottom","22.5px"),s(".mobile-content .accessories-slide").css("margin-bottom",0),s(".mobile-content .accessories-slide").eq(t).css("height","auto").css("padding-top","0").css("margin-bottom","0"),s(".mobile-content .accessories-slide .flex-viewport").css("height",0),s(".mobile-content .accessories-slide").eq(t).siblings().find(".flex-control-nav").hide(),s(".mobile-content .accessories-slide .flex-viewport").eq(t).css("height","auto"),s(".mobile-content .accessories-slide").eq(t).css("margin-bottom","25px"),s(".mobile-content .accessories-slide").eq(t).find(".flex-control-nav").show()},initSlider:function(e,l){s(e).each(function(){var e=s(this);e.find("li.item").first().remove();d.getItemsByType(l).each(function(){e.find(".slides").append(s(this).clone())});var t="",a=s(".slides .filtered"),i=[];s(a).each(function(){var e=s(this).text();-1==t.indexOf("|"+e+"|")?t+="|"+e+"|":i.push(s(this))});"in"!==c.getCurrentMarketCode()&&s(i).each(function(){s(this).remove()});var n,o,r,a=e.find(".slides").attr("id");s("#"+a+" .filtered").sort(d.ascending_sort).appendTo("#"+a),e.flexslider({useCSS:!1,animation:"fade",directionNav:!1,slideshow:!1,start:function(e){n=e.currentSlide,o=e.pagingCount,s(e).find(".flex-left ").addClass("first-last-slide"),s(e).find(".page-num ").text(n+1+" / "+o)},after:function(e){n=e.currentSlide,o=e.pagingCount,r=e.last,s(e).find(".flex-left ").removeClass("first-last-slide"),s(e).find(".flex-right ").removeClass("first-last-slide"),0==n&&s(e).find(".flex-left ").addClass("first-last-slide"),n==r&&s(e).find(".flex-right ").addClass("first-last-slide"),s(e).find(".page-num ").text(n+1+" / "+o)}})})},hiddenSlider:function(e){s(e).hide()},hiddenFilterContent:function(){s(".filter-content").css("height","0"),s(".filter-content .list-items .item").css("height","0"),s(".filter-content .list-items .item img").css("height","0"),s(".filter-content .list-items .item span").css("display","none")},getItemsByType:function(e){return s('.filter-content .list-items li[accessory-type="'+e+'"]')},getListTypes:function(){var t=[];return s(".selections li").each(function(){var e=s(this).find("a").attr("data-filter");"all"!==e&&t.push(e)}),t}};return s("body").on("click",".dropdown-filter",function(e){e.stopPropagation(),s(this).toggleClass("open"),0==s(".selections:visible").length?(s(this).find(".selections").show(),s(this).find(".selections li:first-child a").focus(),s(".dropdown-filter .selections li a").mouseover(function(){console.log(this),s(this).focus()})):s(this).find(".selections").hide()}),d}),define("accessories/nameplateAccessoriesMain",["jquery","configurationProvider","overlay/component.overlay","_","isAuthor","marketConfigGlobal"],function(g,d,v,e,l,t){function a(e){var i,a,p,m,n,o,r,h=[],t=(g(e),g(".accessories ul"),g(e).find(".accessories  .filter-content .allAccessories li.item")),f=[];g(".selections").on("click",function(){switch(g(".selected-type .name-type")[0].innerText){case"Exterior":f=g('.allAccessories [accessory-type="exterior"]');break;case"Interior":f=g('.allAccessories [accessory-type="interior"]');break;case"Safety":f=g('.allAccessories [accessory-type="utilitySafety"]');break;default:f=g(e).find(".accessories  .filter-content .allAccessories li.item")}}),t.sort(function(e,t){e=e.innerText,t=t.innerText;return e<t?-1:t<e?1:0}),t.find("a"),setTimeout(function(){g.each(t,function(e,t){e++;e=t.innerHTML;a=g(e).attr("href"),h.push(a),void 0===a&&(i="no")})},700),t.bind("click",function(){var t=g(".selected-type .name-type")[0].innerText,a=g(".allAccessories .filtered").index();n=g(this).index(),g(window).on("onoverlayload.accSlider",function(){setTimeout(function(){var e=h.length;e--,o=n-1,r=n+1,"Exterior"!=t&&"Interior"!=t&&"Safety"!=t||(e=f.length,o=n-a-1,r=n-a+1),"no"!=i&&function l(e,s,c,d,u){g(window).off("onoverlayload.accSlider");g.each(e.overlays,function(e,t){var a=t.$overlayContent,t=t.$overlayContentInner,t=(a.addClass("olCarusel"),t.addClass("olCaruselInner"),y),t=(a.append(t),"45%"),a=a.find(".overlay-content-inner .common-overlay .image picture img"),i=(a.length&&(t=Math.round(a.outerHeight()/2)+"px"),g(".carousel-arrows").css({position:"absolute",top:t,right:"0"}),g(".carousel-arrows .carousel-previous")),n=g(".carousel-arrows .carousel-next"),a=g(".selected-type .name-type")[0].innerText;function o(){var e="",t="";c<=u?u=0:u<0&&(u=c-1),d<0?d=c-1:c<=d&&(d=0),e=f[d].innerHTML,t=f[u].innerHTML,p=g(e).attr("href"),m=g(t).attr("href"),i.attr("href",p),n.attr("href",m)}function r(){d<0?(p=h[d=c],i.attr("href",p),m=h[u],n.attr("href",m)):u<0?(m=h[u=c],n.attr("href",m),p=h[d],i.attr("href",p)):c<u?(m=h[u=0],n.attr("href",m),p=h[d],i.attr("href",p)):(c<d?(p=h[d=0],i.attr("href",p),m=h[u]):(p=h[d],m=h[u],i.attr("href",p)),n.attr("href",m))}("Exterior"==a||"Interior"==a||"Safety"==a?o:r)(),i.on("click",function(){setTimeout(function(){l(v,s,c,d-1,u-1),g(".overlay-content").css({transition:"3s",right:"0"})},700)}),n.on("click",function(){setTimeout(function(){l(v,s,c,d+1,u+1),g(".overlay-content-inner").css({transition:"3s",left:"0"})},700)})})}(v,n,e,o,r)},501)})})}function i(e){var t,a,i,n,o,r,l,s,c=g(e).find(".accessories.mob-pagination");void 0!==c&&0<c.length&&setTimeout(function(){g(e).find(".mobile-content .accessories-slide").append(f),g(e).find(".mobile-content .accessories-slide").each(function(){var e=g(this).data("flexslider"),t=g(this).find(".flex-next"),a=g(this).find(".flex-prev");t.bind("click",function(){e.flexAnimate(e.getTarget("next"))}),a.bind("click",function(){e.flexAnimate(e.getTarget("previous"))})})},100),e&&(t=(c=g(e)).find(".configuration").first().attr("data-overlayTemplate"),r=c.find(".dropdown-filter .selections").first(),a=c.find(".mobile-content").first(),i=c.find(".list-items").first(),o=d.get(c),n=o.categorieslist,o=o.itemslist,c=c.find(".sortSelections").first(),n)&&o&&(s=r,g.each(n,function(e,t){t=m({categoryType:t.categoryType,categoryLabel:t.categoryLabel});s.append(t)}),l=a,g.each(n,function(e,t){0!=e&&"ALL"!==t.categoryType.toUpperCase()&&(e=h({categoryType:t.categoryType,categoryLabel:t.categoryLabel}),l.append(e))}),p(i,o,t),"au"===S)&&((r=o).sort(u),p(c,r,t))}function u(e,t){return e=e.featureName.substr(0,6),t=t.featureName.substr(0,6),e<t?-1:t<e?1:0}function p(o,e,r){g.each(e,function(e,t){var a=new Object,i=(a.image=t.derivativeFeatureImage,a.featureName=t.featureName,a.featureDescription=t.featureDescription,a.disclaimer=t.disclaimer,a.partNumber=t.partNumber,a.cost=updatePriceFormat(t.cost,c,!0),a.partNumberTitle=b,a.partPricePrefix=C,a.costTitle=w,a.disclaimer=t.disclaimer,a.isHideFeatureDescription=t.hideFeatureDescription,a.isHideDisclaimer=t.hideDisclaimer,a.isHidePartNumber=t.hidePartNumber,a.accPartPriceSuffix=k,window.location.pathname),n=r+".html",i=(l?(i+="?wcmmode=disabled",n+="?wcmmode=disabled&param="):n+="?param=",i+"#overlay"+n+encodeURIComponent(JSON.stringify(a))),n=encodeURI(i),a=s({categoryType:t.categoryType,image:t.derivativeFeatureImage,title:t.featureName,featureID:t.id,link:n});o.append(a)})}var n={},m=e.template('<li accessory-type="${categoryType}"><a href="javascript:void(0);" data-filter="${categoryType}">${categoryLabel}</a></li>'),s=e.template('<li class="item filtered" accessory-type="${categoryType}"><a href="${link}" class="link-overlay base-url "><img src="${image}" alt="image-item"/></a><span class="name-item"><p>${title}</p></span></li>'),h=e.template('<div class="mobile-nav">${categoryLabel}<span class="icon"></span></div><div class="${categoryType} accessories-slide"><ul id="${categoryType}" class="slides clearfix"><li class="item"></li></ul></div>'),y=e.template('<div class="carousel-arrows"><div class="carousel-btn carousel-next link-overlay" tabindex="-1"><span class="icon icon-chevron-thin-right"></span></div><div class="carousel-btn darkened carousel-previous inactive link-overlay" tabindex="-1"><span class="icon icon-chevron-thin-left"></span></div></div>'),f=e.template('<div class="nav-carousel"><a class="btn flex-left flex-prev"><span class="icon icon-chevron-thin-left"></span></a><span class="page-num"> </span><a class="btn flex-right flex-next"><span class="icon icon-chevron-thin-right"></span></a></div>'),c=g("#currencyFormatPattern").val(),b=g("#partNumberTitle").val(),w=g("#partPriceTitle").val(),C=g("#partPricePrefix").val(),k=g("#partPriceSuffix").val(),S=t.getCurrentMarketCode();return n.init=function(){g(".nameplateAccessories.section").each(function(){i(this),a(this)})},n}),define("expanded-feature/component.expandedFeature",["jquery","jquery-flexslider","configurationProvider","hammer"],function(e,t,a,i){var n={init:function(){e(".expanded-feature-slider-mobile").flexslider({animation:"slide",directionNav:!1,animationLoop:!0})}};return n}),define("feature-icon/component.featureIcon",["jquery","jquery-flexslider","configurationProvider","hammer"],function(e,t,a,i){var n={init:function(e){e.flexslider({animation:"slide",directionNav:!1,animationLoop:1<e.find(".item").length,touch:1<e.find(".item").length,smoothHeight:!0})}};return n}),define("language-selector-roadblock/component.languageSelectorRoadblock",["jquery","mediaQuery"],function(t,e){function a(e){(a.prototype._singletonInstance=this).opts=t.extend({languageSelector:".language-selector-wrap .language-selector",languageBtn:".language-btn-wrap .language-btn a",languageBlock:".language-wrap"},e=e||{}),this.init()}var i={};return a.getInstance=function(){return a.prototype._singletonInstance=null==a.prototype._singletonInstance?new a:a.prototype._singletonInstance},a.prototype.init=function(){"mobile"==e.getMediaType()&&t(this.opts.languageSelector).show()},i.init=function(){new a},i}),define("billboard-showroom/component.billboardShowroom",["jquery","jquery-flexslider","configurationProvider","hammer","mediaQuery","pubsub"],function(c,e,t,a,r,i){var n={};function o(){c(".common-billboard").each(function(){var t=c(this),e=c(window).width()<767,a=(l(r.getMediaType(),t),c.subscribe("mediaQuery:change",function(e){l(e.getMediaType(),t)}),t.find(".billboard-paragraph.pos-above")),i=t.find(".billboard-paragraph.pos-mobile-above"),n=t.find(".billboard-paragraph.pos-under"),o=t.find(".billboard-paragraph.pos-mobile-under");(e?(i.parent(".billboard-inner").addClass("above"),o):(a.parent(".billboard-inner").addClass("above"),n)).parent(".billboard-inner").addClass("under")})}function l(e,t){var a=c(t).find(".billboard-paragraph").first(),i=a.attr("data-style-desktop"),n=a.attr("data-style-mobile"),o=c(t).attr("data-margin-mobile"),r=c(t).attr("data-margin-desktop"),l=a.attr("data-padding-mobile"),s=a.attr("data-padding-desktop");"desktop"==e||"xlarge"==e||"tablet"==e?(a.hasClass("pos-mobile-above")&&c(t).append(a.detach()),c(t).find(".billboard-paragraph").removeClass(n).addClass(i).attr("style",s),c(t).attr("style",r)):(c(t).find(".billboard-paragraph").addClass(n).removeClass(i).attr("style",l),c(t).attr("style",o),a.hasClass("pos-mobile-above")&&c(t).prepend(a.detach()))}return n.init=function(){c(".billboard-showroom").flexslider({animation:"slide",directionNav:!0,animationLoop:!0,smoothHeight:!0})},o(),c(window).resize(function(){setTimeout(function(){o()},500)}),n}),define("recently-viewed/component.recentlyViewed",["jquery","jquery-flexslider","configurationProvider","mediaQuery"],function(g,e,t,a){var i={};function v(u){location.pathName;var e=u.find(".recently-viewed-section").first(),p=(e.data("prefix"),e.data("suffix"),e.data("title"),g("#recentlyViewed").data("prefix")),m=g("#recentlyViewed").data("suffix"),h=g("#recentlyViewed").data("title"),f=g("#recentlyViewed").data("homepagepath"),e=g("#recentlyViewed").data("fpsdomain"),t=g("#recentlyViewed").data("fpsconfigpath");"https:"==location.protocol&&/^((http):\/\/)/.test(e)&&(e=e.replace("http://","https://"),t=t.replace("http://","https://")),g.ajaxSetup({async:!1}),jQuery.getScript(e).done(function(){var e;void 0!==window.FPS&&(t&&(FPS.config.path=t),FPS.config.timeout=1e4,e=new Date(g.now()),FPS.get([{ViewedVehicle:{before:e,max:"3"}}],{success:function(e,t,a){var i=p,n=m,o=h,r=f,l=u,s="";if(e&&e[0])for(var c=e[0].ViewedVehicle,d=0;d<c.length;d++)c[d]._key&&(s=""==s?c[d]._key:s+","+c[d]._key);g.ajax({url:"/bin/fps.html",data:{derivativeKey:s,homepagePath:r},async:!1,success:function(e){v.prototype.renderRecentlyViewed(e,i,n,o,l)},error:function(e){}})},error:function(e,t,a){}}))}).fail(function(){}),g.ajaxSetup({async:!0})}return v.prototype.renderRecentlyViewed=function(e,t,a,i,n){var o="",r="",l="",s="";0<e.length&&(r+="<ul class='slides'>");for(var c=0;c<e.length;c++){var d=e[c];d&&(s="ok",t&&(d.startingPrice=t+d.startingPrice),a&&(d.startingPrice=d.startingPrice+a),o=(o=(o=(o+="<div class='item'>")+"<a href='"+d.pagePath+"'>")+"<img src='"+d.imgURL+"' alt='' />")+"<span class='name'>"+d.vehicleName+"</span></a>",d.startingPrice&&(o+="<span class='title'>"+d.startingPrice+"</span>"),o+="</div>",r=(r=(r=(r=(r+="<li class='item'>")+"<a href='"+d.pagePath+"'>")+"<img src='"+d.imgURL+"' alt='' />")+"<span class='name'>"+d.vehicleName+"</span></a>")+"<span class='title'>"+d.startingPrice+"</span></li>")}0<e.length&&(r+="</ul>"),s&&(l+="<h2 class='title'>"+i+"</h2>",n.find(".recentlyViewedTitle").first().html(l)),n.find(".recently-viewed-desktop").first().html(o);var u=n.find(".recently-viewed-slider-mobile");u.html(r),1<u.find(".item").length&&(i=u.width(),u.flexslider({animation:"slide",directionNav:!1,itemWidth:i/1.5,slideshow:!1}),g(window).resize(function(){u.removeData("flexslider"),u.find(".flex-control-nav.flex-control-paging").remove();var e=u.width();u.flexslider({animation:"slide",directionNav:!1,slideshow:!1,itemWidth:e/1.5}),u.find(".flex-viewport:empty").remove()}))},i.init=function(e){v(e)},i}),define("slider-feature/component.sliderFeature",["jquery","mediaQuery"],function(e,t){var a={init:function(e){var t=e.find(".link-more-mob"),a=e.find(".description-txt"),i=(t.on("click",function(e){e.preventDefault(),a.addClass("show"),t.hide()}),e.find(".slider-block").first()),n={animation:i.data("animation"),directionNav:!1,pauseOnHover:!0,controlNav:!1,slideshow:!1,direction:"vertical",reverse:!0,smoothHeight:!0},o=(i.flexslider(n),e.find(".up")),r=e.find(".down");o.on("click",function(){o.addClass("active"),r.removeClass("active"),i.flexslider(0)}),r.on("click",function(){r.addClass("active"),o.removeClass("active"),i.flexslider(1)})}};return a}),define("fps/fps",["jquery"],function(n){var e={};function t(){var e,t,a,i;e=n("#fpsModelKey").data("modelkey"),t=n("#fpsPageName").data("pagename"),a=n("#fpsDomainName").data("domainname"),i=n("#fpsConfigPath").data("configpath"),(new Date).getFullYear(),"https:"==location.protocol&&/^((http):\/\/)/.test(a)&&(a=a.replace("http://","https://"),i=i.replace("http://","https://")),e&&jQuery.getScript(a).done(function(){i&&(FPS.config.path=i),FPS.config.timeout=1e4,FPS.set([{ViewedVehicle:{pageName:t,_key:e}}],{success:function(e,t,a){},error:function(e,t,a){}})}).fail(function(){})}return e.init=function(){t()},e}),define("puwyl/component.puwyl",["jquery","jquery-flexslider"],function(v,e){function l(e,t){var a=JSON.stringify(e),i=v(".pickup-section"),r=null!=i.data("nameplatelabel")&&"undefined"!=i.data("nameplatelabel")?i.data("nameplatelabel"):"",l=i.data("shownameplate"),s=i.data("nameplatepricelabel"),c=i.data("nameplatebuttonlabel"),d=i.data("nameplateofferpagepath"),u=i.data("modelpricelabel"),p=i.data("modelbuttonlabel"),m=i.data("modelofferpagepath"),h=i.data("bnppricelabel"),f=i.data("bnpbuttonlabel"),g=i.data("bnpofferpagepath"),t="fpsScript"==t?i.data("currentpage")+".puwylfps.data?q="+a:i.data("currentpage")+".puwyl.data?q="+a;null!=e&&0<e.length?v.ajax({url:t,method:"GET",dataType:"json"}).success(function(e){0<e.length?(v.each(e,function(e,t){var a=document.querySelector(".pickup-template"),i=document.querySelector("ul.pickup-list"),n=document.querySelector(".pickup-where-left-slider-mobile ul.browsingHistoryItems"),o=a.content.cloneNode(!0),a=a.content.cloneNode(!0);o.querySelector("h5.modelNameValue").textContent=t.name,o.querySelector("img").src=t.imgUrl,o.querySelector("img").alt=t.key,o.querySelector(".cta-one-container a").href=decodeURIComponent(t.pagePath),a.querySelector("h5.modelNameValue").textContent=t.name,a.querySelector("img").src=t.imgUrl,a.querySelector("img").alt=t.key,a.querySelector(".cta-one-container a").href=decodeURIComponent(t.pagePath),l&&null!=t.nameplateName&&"undefined"!=t.nameplateName&&(o.querySelector("h5.nameplateValue").textContent=r+" "+t.nameplateName,a.querySelector("h5.nameplateValue").textContent=r+" "+t.nameplateName),"viewNameplate"===t.suffix?(o.querySelector(".pricingWrapper")&&(null!=t.startingPrice&&"undefined"!=t.startingPrice?(o.querySelector(".pricingWrapper").textContent=s+" "+t.currency+t.startingPrice,a.querySelector(".pricingWrapper").textContent=s+" "+t.currency+t.startingPrice):(o.querySelector(".gux-disclosure").remove(),a.querySelector(".gux-disclosure").remove())),o.querySelector(".cta-one-container a").textContent=c,a.querySelector(".cta-one-container a").textContent=c,null!=d&&"undefined"!=d?(o.querySelector(".cta-two-container a").href=d,a.querySelector(".cta-two-container a").href=d):(o.querySelector(".cta-two-container").remove(),a.querySelector(".cta-two-container").remove())):"viewModel"===t.suffix?(o.querySelector(".pricingWrapper")&&(null!=t.startingPrice&&"undefined"!=t.startingPrice?(o.querySelector(".pricingWrapper").textContent=u+" "+t.currency+t.startingPrice,a.querySelector(".pricingWrapper").textContent=u+" "+t.currency+t.startingPrice):(o.querySelector(".gux-disclosure").remove(),a.querySelector(".gux-disclosure").remove())),o.querySelector(".cta-one-container a").textContent=p,a.querySelector(".cta-one-container a").textContent=p,null!=m&&"undefined"!=m?(o.querySelector(".cta-two-container a").href=m,a.querySelector(".cta-two-container a").href=m):(o.querySelector(".cta-two-container").remove(),a.querySelector(".cta-two-container").remove())):"BuildandPrice"!==t.suffix&&"BuildandPrice-RNS"!==t.suffix||(o.querySelector(".pricingWrapper")&&(null!=t.startingPrice&&"undefined"!=t.startingPrice?(o.querySelector(".pricingWrapper").textContent=h+" "+t.currency+t.startingPrice,a.querySelector(".pricingWrapper").textContent=h+" "+t.currency+t.startingPrice):(o.querySelector(".gux-disclosure").remove(),a.querySelector(".gux-disclosure").remove())),o.querySelector(".cta-one-container a").textContent=f,a.querySelector(".cta-one-container a").textContent=f,null!=g&&"undefined"!=g?(o.querySelector(".cta-two-container a").href=g,a.querySelector(".cta-two-container a").href=g):(o.querySelector(".cta-two-container").remove(),a.querySelector(".cta-two-container").remove())),i.appendChild(o),n.appendChild(a)}),n()):i.hide()}).error(function(e){i.hide(),console.log("Error while fetching data from VDM for 'Pickup Where you Left'.",e)}):i.hide()}var t={},n=function(){var e=v("body").find(".pickup-where-left-slider-mobile"),t=e.find(".browsingHistoryItems > .item").length,a=v(".pickup-where-left-slider-mobile").outerWidth();1<t?v(".fdsSlider").length?(e.find(".browsingHistoryItems > .item .fds-primary-button").addClass("small-fds-button"),e.find(".browsingHistoryItems > .item .body1-bold-blue-ttNone").addClass("body2-bold-blue-ttNone").removeClass("body1-bold-blue-ttNone"),e.find(".browsingHistoryItems > .item .pricingWrapper").addClass("caption-regular-gray-ttNone").removeClass("body2-regular-gray-ttNone"),e.find(".browsingHistoryItems > .item .fds-Secondary").addClass("noPadding"),2<t?v(".pickup-where-left-slider-mobile").flexslider({selector:".browsingHistoryItems > .item",animation:"slide",directionNav:!0,itemWidth:a/2,slideshow:!1,nextText:'<div class="carousel-btn carousel-next"><span class="icon icon-chevron-thin-right"></span></div>  ',prevText:'<div class="carousel-btn carousel-previous"><span class="icon icon-chevron-thin-left"></span></div>',start:function(e){v(e).find(".flex-control-nav").hide(),v(e).find(".flex-direction-nav li:nth-child(1)").after(v("<li>").html('<span class="page-num"> </span>')),curSlide=e.currentSlide,totSlide=e.pagingCount,v(e).find(".flex-prev").css({"background-color":"#6e6e6e","pointer-events":"none"}),v(e).find(".page-num").text(curSlide+1+" / "+totSlide)},after:function(e){curSlide=e.currentSlide,totSlide=e.pagingCount,lastSlide=e.last,v(e).find(".flex-prev").css({"background-color":"#00095B","pointer-events":"visible"}),v(e).find(".flex-next").css({"background-color":"#00095B","pointer-events":"visible"}),0==curSlide&&v(e).find(".flex-prev").css({"background-color":"#6e6e6e","pointer-events":"none"}),curSlide==lastSlide&&v(e).find(".flex-next").css({"background-color":"#6e6e6e","pointer-events":"none"}),v(e).find(".page-num ").text(curSlide+1+" / "+totSlide)}}):(e.find(".item").css("width","calc(100% / 2 - 5px)"),e.find(".item:first-child").css({"padding-left":".5rem","padding-right":".25rem"}),e.find(".item:last-child").css({"padding-right":".5rem","padding-left":".25rem"}))):v(".pickup-where-left-slider-mobile").flexslider({selector:".browsingHistoryItems > .item",animation:"slide",directionNav:!1,itemWidth:+a,slideshow:!1}):(e.find(".make-info").css("min-height","2rem"),e.find(".fds-primary-button").css("font-size","1rem"))};return t.init=function(){var e,t,a,i,n,o;function r(e){var t=localStorage.getItem(e);return t?(t=JSON.parse(t),(new Date).getTime()>t.expiry?(localStorage.removeItem(e),null):t.value):null}v("#fpsDomainName").data("domainname")?(t=[],a=[],i=[],n=[],o=[],FPS.get([{ActionNameplate:{suffixFilter:["ViewPage"]}},{ActionTrim:{suffixFilter:["ViewModelDetail","BPStart"]}},{SpecificVehicleView:{suffixFilter:["SVVBPComplete"]}}],{success:function(e){0<e[0].ActionNameplate.length&&t.push(e[0].ActionNameplate),0<e[1].ActionTrim.length&&t.push(e[1].ActionTrim),0<e[2].SpecificVehicleView.length&&t.push(e[2].SpecificVehicleView),0<(a=[].concat.apply([],t)).length&&(i=a.sort(function(e,t){return new Date(t.on)-new Date(e.on)}),n=3<i.length?i.splice(0,3):i,v.each(n,function(e,t){t={key:t._nameplate,returnURL:encodeURIComponent(t.returnURL),nameplateModelKey:t._trim,suffix:t.suffix};o.push(t)})),l(o,"fpsScript")},error:function(e){console.log(e)}})):null!=(e=r("FPSDATA"))&&0<e.length?l(r("FPSDATA")):v(".pickup-section").hide()},t}),define("puwyl/pickup-where-you-left",["jquery","cookie"],function(c,e){function i(){d=(e=>{var t=localStorage.getItem(e);return t?(t=JSON.parse(t),(new Date).getTime()>t.expiry?(localStorage.removeItem(e),null):t.value):null})("FPSDATA");var e,o,t,a=new URL(window.location.href),a=encodeURIComponent(a),i=c("#build-and-price-wrap").length?c("#build-and-price-wrap"):"",n=c("#build-price-review-container").length?c("#build-price-review-container"):"";function r(e,t,a){var i=new Date,t={value:t,expiry:i.setDate(i.getDate()+a)};localStorage.setItem(e,JSON.stringify(t))}function l(e){for(var t,a=window.location.search.substring(1).split("&"),i=0;i<a.length;i++)if((t=a[i].split("="))[0]===e)return void 0===t[1]||decodeURIComponent(t[1])}function s(e,t,a){d&&(h=d);var i={};i.key=e,i.returnURL=t,i.suffix=a,o&&(i.nameplateModelKey=o);for(var n=0;n<h.length;n++)h[n],null!==h[n]&&(h[n].key===e&&h[n].suffix===a?f=!0:p&&h[n].key===p&&"BuildandPrice"===h[n].suffix&&(h[n].key=e,h[n].returnURL=t,h[n].suffix=a,h[n].nameplateModelKey=o,f=!0));f||(2<h.length&&h.shift(),h.push(i))}c("#vehicleModelKey").length&&(e=c("#vehicleModelKey").attr("data-modelkey")),c("#compare-container").length&&(o=c("#compare-container").attr("data-nameplatekey")),c("#vehicleNameplateKey").length&&(t=c("#vehicleNameplateKey").attr("data-nameplatekey")),i?u=l("n"):n&&(p=l("n"),m=l("m"),o=p),t?(s(t,a,"viewNameplate"),r("FPSDATA",h,5)):e?(s(e,a,"viewModel"),r("FPSDATA",h,5)):u?(s(u,a,"BuildandPrice"),r("FPSDATA",h,5)):m&&(s(m,a,"BuildandPrice-RNS"),localStorage.setItem("FPSDATA",JSON.stringify(h)),r("FPSDATA",h,5))}var d,u,p,m,t={},h=[],f=!1;return t.init=function(){var e,t,a;c("#fpsDomainName").data("domainname")?(a=new URL(window.location.href),a=encodeURIComponent(a),c("#compare-container").length&&(t=c("#compare-container").attr("data-nameplatekey"),e=c("#vehicleModelKey").attr("data-modelkey"),"undefined"!=typeof FPS)&&FPS.set([FPS.lib.ActionTrim("Year","Ford",t,e,FPS.actions.ViewModelDetail,a)],{success:function(e){console.log(e)},error:function(e){console.log(e)}}),c("#vehicleNameplateKey").length&&(t=c("#vehicleNameplateKey").attr("data-nameplatekey"),"undefined"!=typeof FPS)&&FPS.set([FPS.lib.ActionNameplate("Year","Ford",t,FPS.actions.ViewPage,a)],{success:function(e){console.log(e)},error:function(e){console.log(e)}})):i()},t}),define("return_popup/return_popup",["jquery","overlay/component.overlay","marketConfigGlobal"],function(h,f,e){var g,t={},v="",y=parseInt(h("#fpsScore").data("fpsscore")),b=h("#fpsDomainName").data("domainname"),w=window.location.origin,C=h("#currentpage").data("currentpage")+".fpsoverlay.",k=[],S={},x=0;function a(){FPS.get([{ActionNameplate:{suffixFilter:["ViewPage"]}},{ActionTrim:{suffixFilter:["ViewModelDetail","BPStart"]}},{SpecificVehicleView:{suffixFilter:["SVVBP","SVVBPComplete"]}}],{success:function(e){var t=[],a=[],i=0;if(0<e[0].ActionNameplate.length)for(var n=0;n<e[0].ActionNameplate.length;n++){t.push(e[0].ActionNameplate[n]),c=s=l=r=o=void 0;var o=e[0].ActionNameplate[n]._nameplate,r=localStorage.getItem("Page_Visit_Counter");if(r){for(var l=(k=JSON.parse(r)).length,s=!1,c=0;c<l;c++)if(o===k[c].nmPlate){s=!0;break}!1===s&&o&&(S={nmPlate:o,popup_displayed:!1},k.push(S)),localStorage.setItem("Page_Visit_Counter",JSON.stringify(k))}else o&&(S={nmPlate:o,popup_displayed:!1},k.push(S),localStorage.setItem("Page_Visit_Counter",JSON.stringify(k)))}if(0<e[1].ActionTrim.length)for(n=0;n<e[1].ActionTrim.length;n++)a.push(e[1].ActionTrim[n]);if(0<(mergedDataLength=t.length))for(n=0;n<mergedDataLength;n++){var d=t[n]._nameplate;if(0<a.length)for(var i=t[n].score,u=a.filter(function(e){return e._nameplate==d}),p=0;p<u.length;p++)i+=u[p].score;else i=t[n].score;if(d&&y<i){for(var m=(g=JSON.parse(localStorage.getItem("Page_Visit_Counter"))).length,p=0;p<m;p++)g[p].nmPlate!==d||!1!==g[p].popup_displayed||!b||"home"!==fordAnalytics.analyticsPageNameId&&void 0===fordAnalytics.nameplateCode?!0===g[p].popup_displayed&&(x=1):(x=0,((e,a)=>{h.ajax({url:e,async:!1,cache:!1,method:"GET",dataType:"json",crossDomain:!0}).done(function(e){var t;(v=e).checkResExist&&(e=document.getElementsByTagName("body")[0],(t=document.createElement("a")).innerText="hidden Overlay Link",t.href=v.path+".html",t.style.display="none",t.classList.add("link-overlay","fps_latest_offer_popup"),e.appendChild(t),f.init(),h(".fps_latest_offer_popup").trigger("click"),g[a].popup_displayed=!0,localStorage.setItem("Page_Visit_Counter",JSON.stringify(g)))}).fail(function(e){console.dir(e)})})(w+C+d+".data",p));if(0==x)break}}},error:function(e){console.log(e)}})}return t.init=function(){(latestOfferPopup=h("#fpsOverlayPagePath").data("overlay-page-path"))&&a()},t}),define("simpleEmiCalculator/component.monthlyPaymentCalculator",["jquery","range-slider","_","mediaQuery","isAuthor","angular","analytics/analyticsEventLayer","marketConfigGlobal"],function(ve,e,t,a,ye,i,be,we){var n={};function o(){var F,_,R,i,V=ye.getAuthorStatus(),g=parseInt(ve("#depositeSlider").attr("data-minvalue")),v=parseInt(ve("#depositeSlider").attr("data-maxvalue")),n=Math.round((parseInt(g)+parseInt(v))/2),y=ve("#interestRateSlider").attr("data-minvalue"),b=ve("#interestRateSlider").attr("data-maxvalue"),B=Math.round((parseInt(y)+parseInt(b))/2),w=parseInt(ve("#balloonPaySlider").attr("data-minvalue"))||0,C=parseInt(ve("#balloonPaySlider").attr("data-maxvalue"))||0,r=Math.round((parseInt(w)+parseInt(C))/2),e=ve("#loanTermPaymentSlider").attr("data-minvalue"),U=ve("#loanTermPaymentSlider").attr("data-maxvalue"),q=ve("#loanTermPaymentSlider").attr("data-loantermdiff"),j=Math.floor((parseInt(e)+parseInt(U))/2),t=JSON.parse(sessionStorage.getItem("financeCalcObj")),k=ve(".vehicle-price").attr("data-currencyEMI"),H=ve(".vehicle-price").attr("data-repay-Label")?ve(".vehicle-price").attr("data-repay-Label"):"Payment",K=ve(".vehicle-price").attr("data-loan-terms-in")?ve(".vehicle-price").attr("data-loan-terms-in"):"Year(s)",z=ve(".heading-img-container").attr("data-show-vehicle"),S=ve(".repay-container .repay_check:first-child").attr("data-repay-frequecy"),l=0,x=0,G=0,D=parseInt(w),W=ve('input[name="repayFreqLabel"]').val().length,Y=(ve('input[name="balloonPaymentLabel"]').val().length,ve(".repay-container .repay_check:first-child label").text()),J="true"==ve('input[type="hidden"][name="rightsideofprice"]').val(),Q="",Z=ve("#serviceLayerUrl").val(),P="true"==ve(".vehicle-price").attr("data-use-gfc"),X="true"==ve("#showDepositSliderBalloonValue").val(),ee="true"==ve("#showBalloonSliderBalloonValue").val(),te="za"==we.getCurrentMarketCode(),T="true"==ve("#isTradeinamountEnabled").val(),ae=T?ve(".tradeInAmountPriority").data("min-finance-amount"):null,N=T?ve(document).find("#tradeInAmount"):null,A=T?ve(document).find("#tradeInAmountSummary"):null,s=0,c=!1,d=!1,I=T?ve(document).find("#total_interest_payable"):null,ie=ve(document).find("#isReorderEnabled").val(),ne=ve(document).find("#isDisclaimerEnabled").val(),oe=""!=ve(document).find("#disclaimerData").val()?JSON.parse(ve(document).find("#disclaimerData").val()):[],re=""!=ve(document).find("#reorderJsonValues").val()?JSON.parse(ve(document).find("#reorderJsonValues").val()):[],le=window.matchMedia("(max-width: 767px)"),se=ve("#loanTermPayment"),u={},a=0,o=0,ce=0,de=ve(".preloader"),ue=ve(".result_preloader"),$=1,p=("true"==ie&&5==re.length&&re.forEach(function(e,t){ve(".column_group ."+e.inputPriority).css("order",Number(e.priorityOrder)||"initial")}),"true"==ne&&oe.length&&(F="",oe.forEach(function(e){"Vehicle Price Label"==e?.mappingField?E(".vehicle-price-dc",e.disclaimerText,e.disclaimerSymbol):"Calculator Title"==e?.mappingField?E(".calc-title-dc",e.disclaimerText,e.disclaimerSymbol):"Total Loan Repayments"==e?.mappingField?E(".total-loan-repayments-dc",e.disclaimerText,e.disclaimerSymbol):"Total Interest Payable"==e?.mappingField?E(".total-interest-payable-dc",e.disclaimerText,e.disclaimerSymbol):"Summary Heading"==e?.mappingField&&E(".summary-heading-dc",e.disclaimerText,e.disclaimerSymbol),F+=`<div class="item">${e.disclaimerSymbol} ${e.disclaimerText}</div>`}),ve(document).find(".disclaimer-text-section").append(F)),W<4&&(S=ve(".repay-container .repay_check:nth-child(2)").attr("data-repay-frequecy")||12),t?(x=t.estimatedPrice,G=x,Q=t.modelKey,ve("#headingImgText").text(t.modelName),ve("span.vehicle-model-name").text(t.modelName),ve(".finance-calc-img").attr("src",t.imgScrFianceCalc),ve(".finance-calc-img").attr("alt",t.imgAltFianceCalc)):(x=Number(ve(".vehicle-price").attr("data-vehicle-total-price")),G=x,ve(".finance-calc-img").attr("src","/etc/designs/guxfoap/clientlibs/guxfoap/img/car-grayscale.png"),ve(".finance-calc-img").attr("alt","")),ve("#vehiclePrice").val(L(Number(x))),P?(de.show(),ve(".monthly-payment-summary").hide(),ve.ajax({url:Z+"/fordowner/vehicle/buildandprice/credit/models/calculatePaymentForZA?",dataType:"json",data:{defaultRequest:!0,sellingPrice:x,derivativeKey:Q},success:function(e){de.hide(),200!=e.returnCode&&400==e.errorCode||(u=e.data.displayValues.plans,a=e.data.defaultValues.calculator[0].planCd,e=e.data.defaultValues.calculator[0].term,u.forEach(function(e){var t=ve("<span></span>").addClass("finance-plan-pill").attr("data-plancode",e.planCode),e=(a==e.planCode&&(t.addClass("active"),ve(".finance-plan-name").text(e.planName)),ve("<label></label>").addClass("btnCond-regular-blue-ttNone-ls1").text(e.planName));t.append(e),ve(".finance-plan-container").append(t)}),ve("#financePlan").val(a).trigger("change"),ve(".offer-rate-info").css("visibility","hidden"),0==(o=parseInt(a))?(ve(".balloon-row").hide(),ve(".mileage-row").show()):(ve(".balloon-row").show(),ve(".mileage-row").hide()),fe(o),he(o),M(o,e))},error:function(){}})):(ve("#loanTermMeanVal").text(j),ve("#interestRateMeanVal").text(B+"%"),_=ve("#loanTermPaymentSlider").slider({range:"min",min:parseInt(e),max:parseInt(U),value:parseInt(e),step:parseInt(q),slide:function(e,t){t=t.value;se.val(t).trigger("change"),f()}}),ve("#loanTermPayment").on("change",function(){$=ve("#loanTermPayment").val(),f(),_.slider("value",ve(this).val())}),R=ve("#interestRateSlider").slider({range:"min",min:parseInt(y),max:parseInt(b),value:parseInt(y),slide:function(e,t){ve("#interestRateAmount").val(t.value),f()}}),ve("#interestRateAmount").on("input",function(e){var t=ve("#interestRateAmount").val();setTimeout(f,1500),R.slider("value",t)}),i=ve("#balloonPaySlider").slider({range:"min",min:parseInt(w),max:parseInt(C),value:parseInt(w),slide:function(e,t){var a,i;D=t.value,T?(a=Math.round(x*t.value/100),i=ve("#balloonPaySlider").slider("option","max"),x<a+l+s&&(a=Math.round(x-(s+l))),i=(a=d&&t.value==i?Math.round((x-(l+s))/2):a)<Math.round(x/2)?a:Math.round(x*t.value/100),ve("#balloonPayAmount").val(L(i))):ve("#balloonPayAmount").val(L(Math.round(x*t.value/100))),f(),ee&&m(ve(this),t.value,t.handle,parseInt(w),parseInt(C),r)},change:function(e,t){ee&&m(ve(this),t.value,t.handle,parseInt(w),parseInt(C),r)}}),ve("#balloonPayAmount").on("input",function(e){var t,a=Math.round(ve("#balloonPayAmount").val().replace(",","").trim());x/2<a&&(a=x/2),T?c?ve("#balloonPayAmount").val(L(0)):(t=x-(l+s),d&&(t=Math.round((x-(l+s))/2)),D=(a=t<a?t:a)/x*100,ve("#balloonPayAmount").val(L(a)),setTimeout(f,2500),i.slider("value",Math.round(D))):(D=a/x*100,ve("#balloonPayAmount").val(L(a)),setTimeout(f,2500),i.slider("value",D))})),ve("#depositeMeanVal").text(n+"%"),ve("#ballonMeanVal").text(r+"%"),l=x*parseInt(g)/100,ve("#depositeAmount").val(L(Math.round(l))),ve("#balloonPayAmount").val(L(Math.round(x*parseInt(w)/100))),N&&N.val(0),f(),be.getSimpleEmiCalCulatorEvents().trackPaymentCalculatorButton(),V||(ve("#loanTermPayment").select2({dropdownCssClass:"loan-payment-dropdown-fds"}),P&&(ve("#mileagePerAnnum").select2({dropdownCssClass:"loan-payment-dropdown-fds"}),ve("#financePlan").select2({dropdownCssClass:"loan-payment-dropdown-fds"}))),ve("img.finance-calc-img").error(function(){ve(this).unbind("error").attr("src","/etc/designs/guxfoap/clientlibs/guxfoap/img/car-grayscale.png")}),ve("#financePlan").on("change",function(){O(),0==(o=parseInt(ve(this).val()))?(ve(".balloon-row").hide(),ve(".mileage-row").show(),fe(o)):(ve(".balloon-row").show(),ve(".mileage-row").hide()),he(o),M(o,ve("#loanTermPayment").val())}),ve("body").on("click",".finance-plan-pill",function(){O(),ve(this).hasClass("active")||(ve(this).addClass("active"),ve(this).siblings().removeClass("active")),o=parseInt(ve(this).data("plancode"));var e=u[o].planName;ve(".finance-plan-name").text(e),0==o?(ve(".balloon-row").hide(),ve(".mileage-row").show(),fe(o)):(ve(".balloon-row").show(),ve(".mileage-row").hide()),he(o),M(o,ve("#loanTermPayment").val())}),ve("#depositeSlider").slider({range:"min",min:parseInt(g),max:parseInt(v),value:parseInt(g),slide:function(e,t){var a;P&&O(),T?(l=Math.round(x*t.value/100),a=ve("#depositeSlider").slider("option","max"),(x<l+s||t.value==a)&&(l=x-s),pe(t.value)):l=x*t.value/100,ve("#depositeAmount").val(L(Math.round(l))),f(),X&&m(ve(this),t.value,t.handle,parseInt(g),parseInt(v),n)},change:function(e,t){T&&pe(t.value),X&&m(ve(this),t.value,t.handle,parseInt(g),parseInt(v),n)}}));function pe(e){var t,a,i,n,o;c=l+s<x?(t=ve("#depositeSlider").slider("option","max"),i=a=0,n=Math.round(ve("#balloonPayAmount").val().replaceAll(",","").trim()),o=(o=x-(s+l))>Math.round(x/2)?Math.round(x/2):o,d=!1,e>Math.round(t/2)&&(o=Math.round(o/2),d=!0),C=Math.round(100*o/x),r=Math.round((w+C)/2),i=n<o?(a=n,Math.round(100*n/x)):a=0,ve("#balloonPayAmount").val(L(a)),h({target:"#balloonPaySlider",sliderVal:i,min:w,max:C,maxElement:"#ballonMaxVal",mean:r,meanElement:"#ballonMeanVal"}),!1):(me({target:"#balloonPaySlider",maxTarget:"#ballonMaxVal",meanTarget:"#ballonMeanVal",inputTarget:"#balloonPayAmount",resetVal:0}),!0)}function m(e,t,a,i,n,o){var r=ve(a).find(".range-bubble-val");r.length||ve(a).append('<span class="range-bubble-val body1-regular-blue-ttNone"/>'),i<t&&t<n&&t!=o?r.text(t+"%"):r.html("")}function h(e){ve(e.target).slider({min:e.min,max:e.max,value:e.sliderVal}),ve(e.meanElement).text(e.mean+"%"),ve(e.maxElement).text(e.max+"%")}function me(e){h({target:e.target,sliderVal:e.resetVal,min:e.resetVal,max:e.resetVal,maxElement:e.maxTarget,mean:e.resetVal,meanElement:e.meanTarget}),ve(e.inputTarget).val(e.resetVal)}function f(){var e,t,a,i,n,o,r,l,s,c,d,u,p,m,h,f;"true"==z?(ve(".heading-img-container").show(),ve(".heading-text").hasClass("add-mar-heading")&&(ve(".heading-text").removeClass("add-mar-heading"),ve(".heading-img-text").removeClass("add-mar-img-text"))):(ve(".heading-img-container").hide(),ve(".heading-text").addClass("add-mar-heading"),ve(".heading-img-text").addClass("add-mar-img-text")),P||(e=ve("#depositeAmount").val(),e=parseInt(e.replace(/\,/g,"")),a=x*parseInt(g)/100,(t=x*parseInt(v)/100)<=e?(ve("#depositeAmount").val(L(Math.round(t))),e=Math.round(t)):e<=a&&(ve("#depositeAmount").val(L(Math.round(a))),e=Math.round(a)),(a=(t=ve("#interestRateAmount").val()).split("."))[0]>=parseInt(b)?(t=parseInt(b),ve("#interestRateAmount").val(parseInt(b))):a[0]<parseInt(y)&&(t=parseInt(y),ve("#interestRateAmount").val(parseInt(y))),a=ve("#balloonPayAmount").val()||"0",o=x*parseInt(w)/100,(i=x*parseInt(C)/100)<=a?(ve("#balloonPayAmount").val(L(Math.round(i))),a=L(Math.round(i)),D=parseInt(C)):a<=o&&(ve("#balloonPayAmount").val(L(Math.round(o))),a=L(Math.round(o)),D=parseInt(w)),a=parseInt(a.replace(/\,/g,"")),i=x*(D/100),o=0,n=N&&Math.round(N.val().replaceAll(",","").trim())||0,o=x-e-n,r=ve(".show-decimal-val").data("show-decimal")||!1,u=ve(".show-decimal-val").data("simpleemi-th")||!1,W<4&&(S=ve(".repay-container .repay_check:nth-child(2)").attr("data-repay-frequecy")||12),s=$*(l=T?12:S),c=l*$,d=t/(100*l),f=Math.pow(1+t/(100*l),c),m=(p=(m=p=0)!=d&&u?($*(t/100*o)+o)/c:0==d||u?o/c:d/(f-1)*(o*f-i))*c,te&&(p=((e,t,a,i,n)=>{let o,r;return i=i||0,n=n||0,0===e?-(a+i)/t:(r=Math.pow(1+e,t),o=-e*(a*r+i)/(r-1),1===n&&(o/=1+e),o)})(d=t/100/12,u=Number(ve("#loanTermPayment").val()),-Number(o),a,0),m=Number(p)*u+a),T&&(r&&0<String(p).indexOf(".")&&(p=Number(p).toFixed(2)),h=0,h=Number(p)*Number(s)+a-o,S!=l)&&(p=Number(p)*l/S),r?(0<String(s).indexOf(".")&&(s=s.toFixed(2)),0<String(p).indexOf(".")&&(p=Number(p).toFixed(2)),0<String(m).indexOf(".")&&(m=Number(m).toFixed(2)),T&&0<String(h).indexOf(".")&&(h=Number(h).toFixed(2))):(0<String(s).indexOf(".")&&(s=s.toFixed()),0<String(p).indexOf(".")&&(p=Number(p).toFixed()),0<String(m).indexOf(".")&&(m=Number(m).toFixed()),T&&0<String(h).indexOf(".")&&(h=Number(h).toFixed())),T&&(0==Number(o)&&(p=h=m=0),Number(o)>Number(0)&&Number(o)<Number(ae)?ve("#min-fin-error, #loan_amount").addClass("isError"):ve("#min-fin-error, #loan_amount").removeClass("isError")),ve("#vehiclePrice").val(L(Number(x))),ve("#depositeAmtFinal").text(k+L(e)),ve("#interestRateFinal").text(t+"%"),ve("#balloonPayAmtFinal").text(k+L(a)),ve("#loan_amount").text(k+L(Number(o))),A&&A.text(k+L(n)),te&&((f=ve("#loanTermPayment")).hasClass("monthly")?s=ve("#loanTermPayment").val():f.hasClass("annually")&&(s=(12*Number(ve("#loanTermPayment").val())).toString())),ve("#month_num_repay").text(s),ve("#payCycleAmount, #monthlyPaymentVal").text(k+L(Number(p))),ve("#payCycleTitle span.text, #monthlyPaymentLbl span.text").text(Y+" "+H),ve("#month_final_payments").text(k+L(Number(m))),ve("#loanTermPayment").hasClass("monthly")?ve("#loanTermFinal").text(ve("#loanTermPayment").val()+" "+K):ve("#loanTermFinal").text($+" "+K),I&&I.text(k+L(Number(h))),J&&(k=" "+k,ve("#depositeAmtFinal").text(L(e)+k),ve("#balloonPayAmtFinal").text(L(a)+k),ve("#loan_amount").text(L(Number(o))+k),ve("#payCycleAmount, #monthlyPaymentVal").text(L(Number(p))+k),ve("#month_final_payments").text(L(Number(m))+k),A&&A.text(L(n)+k),I)&&I.text(L(Number(h))+k))}function L(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function M(e,a){var i,e=u[e].termValues,n={},o={},r=(e.forEach(function(e){var t;e.term==a&&(t=null!=e.defaultRate?e.defaultRate:e.offerRate,null!=e.offerRate&&(ce=e.offerRate),n={minInterestRate:e.minRate,maxInterestRate:e.maxRate,defaultInterestRate:t},o={minResidualValue:e.minResidual,maxResidualValue:e.maxResidual})}),ve(".interestSliderLabels .left-slider-no").text(n.minInterestRate+"%"),ve(".interestSliderLabels .active-slider-no").text(Math.round((parseInt(n.minInterestRate)+parseInt(n.maxInterestRate))/2)+"%"),ve(".interestSliderLabels .right-slider-no").text(n.maxInterestRate+"%"),ve("#interestRateAmount").val(n.defaultInterestRate),ge(n.defaultInterestRate),ve("#interestRateSlider").slider({range:"min",step:.1,min:parseFloat(n.minInterestRate),max:parseFloat(n.maxInterestRate),value:parseFloat(n.defaultInterestRate),slide:function(e,t){O(),ve("#interestRateAmount").val(t.value),ge(t.value)}}));ve("#interestRateAmount").on("input",function(e){O();var t=ve("#interestRateAmount").val();ge(t),r.slider("value",t)}),null!=o.minResidualValue&&null!=o.maxResidualValue&&(ve(".balloonPaySliderLabels .left-slider-no").text("0%"),ve(".balloonPaySliderLabels .active-slider-no").text(Math.round((0+parseInt(o.maxResidualValue))/2)+"%"),ve(".balloonPaySliderLabels .right-slider-no").text(o.maxResidualValue+"%"),ve("#balloonPayAmount").val(0),i=ve("#balloonPaySlider").slider({range:"min",min:0,max:parseInt(o.maxResidualValue),value:0,slide:function(e,t){O(),D=t.value,ve("#balloonPayAmount").val(L(Math.round(x*t.value/100)))}}),ve("#balloonPayAmount").on("input",function(e){O();var t=Math.round(ve("#balloonPayAmount").val().replace(",","").trim());x/2<t&&(t=x/2),ve("#balloonPayAmount").val(L(t)),D=t/x*100,i.slider("value",D)}))}function he(a){var t=ve("#loanTermPayment"),e=u[a].termValues,i=[],e=(t.empty(),e.forEach(function(e){i.push(e.term),1==e.defaultFlag&&(loanTermDefaultVal=parseInt(e.term)),t.append('<option value="'+e.term+'"'+(1==e.defaultFlag?'selected="selected"':"")+">"+e.term+"</option>")}),Math.min.apply(null,i)),n=Math.max.apply(null,i),o=Math.round((parseInt(e)+parseInt(n))/2),r=(ve(".loanTermSliderLabels .left-slider-no").text(e),ve(".loanTermSliderLabels .active-slider-no").text(o),ve(".loanTermSliderLabels .right-slider-no").text(n),ve("#loanTermPayment").val(loanTermDefaultVal).trigger("change"),ve("#loanTermPaymentSlider").slider({range:"min",min:0,max:parseInt(i.length-1),value:parseInt(i.indexOf(loanTermDefaultVal)),slide:function(e,t){O(),ve("#loanTermPayment").val(i[t.value]).trigger("change"),M(a,i[t.value])}}));ve("#loanTermPayment").on("change",function(){O();var e=i.indexOf(parseInt(ve(this).val()));r.slider("value",e),M(a,ve(this).val())})}function fe(e){var a,i,t,n,o,r=ve("#mileagePerAnnum"),e=u[e].mileageValues;null!=e&&(a=[],i=0,e.forEach(function(e,t){a.push(parseInt(e.mileage)),1==e.defaultFlag&&(i=parseInt(e.mileage)),r.append('<option value="'+e.mileage+'"'+(1==e.defaultFlag?'selected="selected"':"")+">"+e.mileage+"</option>")}),e=Math.min.apply(null,a),t=Math.max.apply(null,a),n=Math.round((parseInt(e)+parseInt(t))/2),ve(".mileageSliderLabels .left-slider-no").text(e),ve(".mileageSliderLabels .active-slider-no").text(n),ve(".mileageSliderLabels .right-slider-no").text(t),ve("#mileagePerAnnum").val(i).trigger("change"),o=ve("#mileageSlider").slider({range:"min",min:0,max:parseInt(a.length-1),value:parseInt(a.indexOf(i)),slide:function(e,t){O(),ve("#mileagePerAnnum").val(a[t.value]).trigger("change")}}),ve("#mileagePerAnnum").on("change",function(){O();var e=a.indexOf(parseInt(ve(this).val()));o.slider("value",e)}))}function O(){ve(".empty-summary-section").show(),ve(".monthly-payment-summary").hide(),ve(".gfc-summary-content-txt .gfc-summary-list .item").find("span.price, span.price-bld").text(""),ve("#payCycleAmount").text(""),ve(".payment-detail-error").hide()}function ge(e){o==a&&e==ce?ve(".offer-rate-info").css("visibility","visible"):ve(".offer-rate-info").css("visibility","hidden")}function E(e,t,a){ve(e).attr("data-disclaimer-text",t),ve(e).addClass("isDisclaimerActive"),1<ve(e).length?ve(e).each(function(e,t){ve(t).find("> span").append(`<sup>${a}</sup>`)}):ve(e).find("span").append(`<sup>${a}</sup>`)}ve("#depositeAmount").on("input",function(e){P&&O();var t,a=Math.round(ve("#depositeAmount").val().replaceAll(",","").trim()),i=a=x<a?x:a;T?c?ve("#depositeAmount").val(L(0)):((t=x-s)<a&&(a=t),ve("#depositeAmount").val(L(a)),pe(Math.round(100*a/x)),setTimeout(f,2500),p.slider("value",i/x*100)):(ve("#depositeAmount").val(L(a)),setTimeout(f,2500),p.slider("value",i/x*100))}),N&&N.on("input",function(e){var t,a,i=Math.round(ve(this).val().replaceAll(",","").trim());c=x<=(s=i)?(s=i=x,me({target:"#depositeSlider, #balloonPaySlider",maxTarget:"#depositeMaxVal, #ballonMaxVal",meanTarget:"#depositeMeanVal, #ballonMeanVal",inputTarget:"#depositeAmount, #balloonPayAmount",resetVal:0}),!0):(t=x-i,a=0,l=Math.round(ve("#depositeAmount").val().replaceAll(",","").trim()),v=Math.round(100*t/x),n=Math.round((g+v)/2),a=l+i<x?(t=l,Math.round(100*l/x)):t=0,ve("#depositeAmount").val(L(Math.round(t))),h({target:"#depositeSlider",sliderVal:a,min:g,max:v,maxElement:"#depositeMaxVal",mean:n,meanElement:"#depositeMeanVal"}),0<l&&l<x-s?(a=(t=x-(s+l))>Math.round(x/2)?Math.round(x/2):t,C=Math.round(100*a/x),r=Math.round((w+C)/2),h({target:"#balloonPaySlider",sliderVal:0,min:w,max:C,maxElement:"#ballonMaxVal",mean:r,meanElement:"#ballonMeanVal"}),ve("#balloonPayAmount").val(0)):me({target:"#balloonPaySlider",maxTarget:"#ballonMaxVal",meanTarget:"#ballonMeanVal",inputTarget:"#balloonPayAmount",resetVal:0}),0<l&&x-l<=i&&me({target:"#balloonPaySlider",maxTarget:"#ballonMaxVal",meanTarget:"#ballonMeanVal",inputTarget:"#balloonPayAmount",resetVal:0}),!1),ve(this).val(L(i)),A&&A.val(0),setTimeout(f,500)}),ve("#vehiclePrice").on("input",function(e){x=Math.round(ve("#vehiclePrice").val().replaceAll(",","").trim()),ve("#vehiclePrice").val(L(x)),p.slider("value",parseInt(g)),setTimeout(function(){l=x*parseInt(g)/100,ve("#depositeAmount").val(L(Math.round(l)))},1e3),setTimeout(f,2e3)}),ve("#financeReset").on("click",function(){ve(".payment-detail-error").hide(),p.slider("value",parseInt(g)),l=x*parseInt(g)/100,ve("#depositeAmount").val(L(Math.round(l))),N&&N.val(0),A&&A.val("$0"),x=G,P?(O(),he(o),M(o,ve("#loanTermPayment").val()),fe(o)):(i.slider("value",parseInt(w)),R.slider("value",parseInt(y)),i.slider("value",parseInt(w)),_.slider("value",parseInt(e)),ve("#interestRateAmount").val(parseInt(y)),ve("#balloonPayAmount").val(L(Math.round(x*parseInt(w)/100))),D=parseInt(w),ve("#loanTermPayment").val(parseInt(e)).trigger("change"),ve(".repay-container").find(".active").removeClass("active"),ve(".repay_check:first-child").addClass("active"),S=ve(".repay-container .repay_check:first-child").attr("data-repay-frequecy"),Y=ve(".repay-container .repay_check:first-child label").text()),f()}),ve("#calculatePayment").on("click",function(){ue.show(),ve(".empty-summary-section").hide(),ve(".monthly-payment-summary").show();var e=0==o?0:D,t=Math.round(ve("#depositeAmount").val().replaceAll(",","").trim()),a=Math.round(ve("#balloonPayAmount").val().replaceAll(",","").trim());ve.ajax({url:Z+"/fordowner/vehicle/buildandprice/credit/models/calculatePaymentForZA?",dataType:"json",data:{defaultRequest:!1,deposit:t,term:ve("#loanTermPayment").val(),milesOrKMPerAnnum:ve("#mileagePerAnnum").val(),derivativeKey:Q,sellingPrice:x,optionTotalPrice:0,interestRate:ve("#interestRateAmount").val(),residualValue:e,financePlan:o},success:function(e){var t;ue.hide(),200==e.returnCode?(ve(".payment-detail-error").hide(),0==o?(ve(".final-balloon-item").hide(),ve(".gf-value-item").show()):(ve(".final-balloon-item").show(),ve(".gf-value-item").hide()),t=e.data.paymentDetail,ve("#payCycleAmount").text(k+L(t.monthlyPayment)),ve("#s-monthlyPayment").text(L(t.monthlyPayment)),ve("#s-financeTerm").text(t.financeTerm),ve("#s-amountOfCredit").text(L(t.amountOfCredit)),ve("#s-totalInterestCharges").text(t.totalInterestCharges),ve("#s-totalAmountPayable").text(L(t.totalAmountPayable)),ve("#s-gauranteedFutureValue").text(L(t.gauranteedFutureValue)),ve("#s-finalBalloonPayment").text(L(a)),ve("#s-fixedInterestRate").text(t.fixedInterestRate+"%"),ve("#s-summary-monthlyPayment").text(k+L(t.monthlyPayment)),ve("#s-summary-totalAmountPayable").text(k+L(t.totalAmountPayable))):502==e.returnCode&&ve(".payment-detail-error").show()},error:function(){}})}),ve("body").on("click",".repay_check",function(){ve(this).hasClass("active")||(ve(this).addClass("active"),ve(this).siblings().removeClass("active")),Y=ve(this).find("label").text(),S=ve(this).attr("data-repay-frequecy"),f()}),ve("body").on("keydown",".restrict-text",function(e){1==e.shiftKey&&e.preventDefault(),48<=e.keyCode&&e.keyCode<=57||96<=e.keyCode&&e.keyCode<=105||8==e.keyCode||9==e.keyCode||37==e.keyCode||39==e.keyCode||46==e.keyCode||190==e.keyCode||e.preventDefault(),-1!==ve(this).val().indexOf(".")&&190==e.keyCode&&e.preventDefault()}),ve(document).on("click",".isDisclaimerActive sup",function(){var e=ve(this).offset(),t=!le.matches&&ve(window).width()-Math.round(e.left)<500,a=!le.matches&&Math.round(e.left)<250,a=(ve(".disclaimer-overlay").length&&ve(".disclaimer-overlay").remove(),`<div class="disclaimer-overlay"><div class="disclaimer-content ${a?"isLeftAlign":""} ${t?"isRightAlign":""}" style="left: calc(${Math.round(e.left)}px - 30px); top: calc(${Math.round(e.top)}px + 40px);"><span class="disclaimer-close icon icon-close2"></span><div class="disclaimer-content_inner">${ve(this).parents(".isDisclaimerActive").attr("data-disclaimer-text")}</div></div></div>`);ve("body").append(a)}),ve(document).on("click",".disclaimer-overlay .disclaimer-close",function(e){ve(this).parents(".disclaimer-overlay").remove(),e.stopPropagation()}),ve(document).on("click",".disclaimer-overlay .disclaimer-content",function(e){e.stopPropagation()}),ve(document).on("click",".disclaimer-overlay",function(){ve(this).find(".disclaimer-close").trigger("click")})}return n.init=function(){o()},n}),define("simpleEmiCalculator/component.simpleEmiCalculator",["jquery","jquery-flexslider","analytics/analyticsEventLayer"],function(c,e,d){var t={};c("#currencySymbol").val();function a(e){var t,a,i,n,o,r;(0<c(".addCurrency").length||e&&0<e.length)&&(currencyFormatPatternEMI=c("#currencyFormatPatternEMI").val(),t=e||c(".addCurrency").val(),t=Number(t.replace(/[^0-9.-]+/g,"")),a=parseInt(c("#depositPrice").attr("data-minvalue")),i=parseInt(c("#depositPrice").attr("data-maxvalue")),n=updatePriceFormat(t*a/100,currencyFormatPatternEMI,!0),o=updatePriceFormat(t*i/100,currencyFormatPatternEMI,!0),r=c(".vechile_price_min_max").html(),e&&0<e.length&&0<c("#vehiclePrice").length&&c("#vehiclePrice").val(updatePriceFormat(t,currencyFormatPatternEMI,!0)),n='<span id="minVprice">'+updatePriceFormat(t*a/100,currencyFormatPatternEMI,!0)+"</span>",o='<span id="maxVprice">'+updatePriceFormat(t*i/100,currencyFormatPatternEMI,!0)+"</span>",e='<span id="maxdepositPrice">'+i+"</span>",r=(r=(r=(r=r.replace("{{minDepositPrice}}",'<span id="mindepositPrice">'+a+"</span>")).replace("{{maxDepositPrice}}",e)).replace("{{minVprice}}",n)).replace("{{maxVprice}}",o),"vehiclePrice"===c(".addCurrency").attr("id"))&&c(".vechile_price_min_max").html(r)}c("body").on("blur",".form-control",function(e){e.preventDefault(),(null==c(this).val()||""==c(this).val()||null==c(this).val()?(c(this).parents(".form-group").find(".form-error").css("display","block"),c(".resultWrapper")):c(this).parents(".form-group").find(".form-error")).hide()}),c(window).load(function(){a()}),c("body").on("click",".calculate",function(e){var t,a,i,n,o,r,l,s;e.preventDefault(),c(".formFieldWrapper .form-control").trigger("focusout"),0==c(".formFieldWrapper").find(".form-error:visible").length?(e=c("#vehiclePrice").val(),e=Number(e.replace(/[^0-9.-]+/g,"")),n=c("#depositPrice").val(),n=Number(n.replace(/[^0-9.-]+/g,"")),o=parseInt(c("#depositPrice").attr("data-minvalue"))/100*parseInt(e),e=parseInt(c("#depositPrice").attr("data-maxvalue"))/100*parseInt(e),r=parseInt(c("#interestRate").val()),l=parseInt(c("#interestRate").attr("data-minvalue")),s=parseInt(c("#interestRate").attr("data-maxvalue")),0<c("#depositPrice").attr("data-minvalue")&&e<n||0<c("#depositPrice").attr("data-maxvalue")&&n<o?c("#depositPrice").parents(".form-group").find(".minMax-error").css("display","block"):c("#depositPrice").parents(".form-group").find(".minMax-error").hide(),0<c("#interestRate").attr("data-minvalue")&&s<r||0<c("#interestRate").attr("data-maxvalue")&&r<l?c("#interestRate").parents(".form-group").find(".minMax-error").css("display","block"):c("#interestRate").parents(".form-group").find(".minMax-error").hide(),0==c(".formFieldWrapper").find(".minMax-error:visible").length&&(e=c("#vehiclePrice").val(),e=Number(e.replace(/[^0-9.-]+/g,"")),n=c("#depositPrice").val(),n=Number(n.replace(/[^0-9.-]+/g,"")),o=parseFloat(c("#emiMonth").val()),s=parseFloat(c("#interestRate").val()),e=parseFloat(e)-parseFloat(n),n=c("#currencyFormatPatternEMI").val(),o=o,r=s/1200,l=Math.pow(1+s/1200,o),i=c(".show-decimal-val").data("simpleemi-th")||!1,s=o/12*(s/100*e)+e,t=(t=0)!=r&&i?s/o:0==r||i?e/o:r/(l-1)*(e*l),c(".show-decimal-val").data("show-decimal")||!1?([a,s]=t.toString().split("."),i=s.slice(0,2),c(".monthlyInstallment").text(updatePriceFormat(t,n,!0)+"."+i)):c(".monthlyInstallment").text(updatePriceFormat(t,n,!0)),c(".resultWrapper").fadeIn(),c(".calculate").prop("disabled",!0),c(".helpText").css("display","block"))):c(".resultWrapper").hide(),d.getSimpleEmiCalCulatorEvents().trackOverlayCalculator()}),c("body").on("keydown",".form-control",function(e){c(".resultWrapper").fadeOut(),c(".calculate").prop("disabled",!1)}),c("body").on("change","select.form-control",function(e){c(".resultWrapper").fadeOut(),c(".calculate").prop("disabled",!1)}),c("body").on("keyup",".addCurrency",function(e){currencyFormatPatternEMI=c("#currencyFormatPatternEMI").val();var t=c(this).val(),t=Number(t.replace(/[^0-9.-]+/g,"")),a=updatePriceFormat(t,currencyFormatPatternEMI,!0),i=parseInt(c("#depositPrice").attr("data-minvalue")),n=parseInt(c("#depositPrice").attr("data-maxvalue")),o=updatePriceFormat(t*i/100,currencyFormatPatternEMI,!0),t=updatePriceFormat(t*n/100,currencyFormatPatternEMI,!0);"vehiclePrice"===c(this).attr("id")&&(c(".vechile_price_min_max").find("span#minVprice").html(o),c(".vechile_price_min_max").find("span#maxVprice").html(t),c(".vechile_price_min_max").find("span#mindepositPrice").html(i),c(".vechile_price_min_max").find("span#maxdepositPrice").html(n)),c(this).val(a)}),c("body").on("keydown",".addCurrency",function(e){1==e.shiftKey&&e.preventDefault(),48<=e.keyCode&&e.keyCode<=57||96<=e.keyCode&&e.keyCode<=105||8==e.keyCode||9==e.keyCode||37==e.keyCode||39==e.keyCode||46==e.keyCode||190==e.keyCode||e.preventDefault(),-1!==c(this).val().indexOf(".")&&190==e.keyCode&&e.preventDefault()});return t.init=function(){var e;(e=sessionStorage.getItem("EmiDisplayPrice"))&&a(e)},t}),define("news/component.news",["jquery","utils/utils.date","analytics/analyticsEventLayer"],function(g,v,y){var e={};return e.init=function(s){function c(e){g(this).css("height","auto");var t=e.map(function(){return g(this).css("min-height","inherit"),g(this).height()}).get(),t=Math.max.apply(null,t);e.css("height",t)}var a,e,t,d=g("#newsroom-fds").attr("data-enablefds"),i=s.find("form.search-form"),n=(0<i.length&&(e=i.find("button"),a={searType:"Q"},e.on("click",function(e){var t;e.preventDefault(),a.queryTerm=i.find("input[name=q]").val(),e=a,t=-1!=(t=(t=i).attr("action")).indexOf(".html")?t.replace(".html",".supportSearchResult."+e.searType+"."+e.queryTerm+".html"):t+".supportSearchResult."+e.searType+"."+e.queryTerm+".html",window.location.href=t})),s.find(".dropdown-vehicle-sort")),o=g("html").attr("lang"),u=s.find(".sameHeightNews");function p(){var e;s.find(".container-news .year .row .item[data-category=extra]").length&&(e=s.find(".year"),g.each(e,function(e,t){g(t).find(".row");var a=g(t).find(".item[data-category=extra]").sort(function(e,t){e=parseInt(g(e).attr("data-timestamp")),t=parseInt(g(t).attr("data-timestamp"));return t<e?-1:e<t?1:0});g(t).find(".hidden-item").html(a),g(t).find(".view-more").show()})),s.find(".view-more").unbind().on("click",function(){n.find(".by").attr("sortmonth"),n.find(".by").attr("sortyear");var e=g(this).parent().attr("data-date");e=s.find(".year[data-date="+e+"] .hidden-item .item"),g.each(e,function(e,t){var a,i=parseInt(g(t).data("timestamp"));isNaN(i)||(i=new Date(i),s.find(".container-news .year[data-date="+i.getFullYear()+"]").length||(a='<div data-date="'+(a=i.getFullYear())+'" class="year"><div class="title-year">'+a+'</div><div class="row"></div></div>',s.find(".container-news").append(a)),s.find(".container-news .year[data-date="+i.getFullYear()+"] .row").append(g(t)[0].outerHTML),g(t).remove())}),r(o),g(this).hide()})}function r(e){var t=g(".container-news").find(".item[data-timestamp]");t&&v.setDateFormat(e,t,".date-year")}function l(e,t){var a,i,n,o,r,l;null!=e&&null!=t?(startMonth=parseInt(e),endMonth="true"!==d?parseInt(e):12,t=parseInt(t),s.find(".container-news .year").hide(),(a=s.find(".container-news .year[data-date="+t+"]").first()).show(),s.find(".no-results").hide(),n=(i=a.find(".item")).length,o=0,n&&(r=new Date(t,startMonth-1,1,0,0,0,0),l=new Date(t,endMonth,1,0,0,0,0),r=r.getTime(),l=l.getTime()-1,i.each(function(e,t){var a=parseInt(g(t).attr("data-timestamp"));r<=a&&a<=l?(g(t).show(),o++):g(t).hide()}),0!=o)||(a.hide(),s.find(".no-results").show()),y.getNewsEvents().trackSort(e,t),"true"!==d?s.find(".container-news .year[data-date="+t+"] .view-more").hide():p()):(s.find(".no-results").hide(),s.find(".container-news .year").show(),s.find(".container-news .year").find(".item").show(),p()),c(u)}function m(){var e=s.find(".container-news > .year").sort(function(e,t){e=parseInt(g(e).attr("data-date")),t=parseInt(g(t).attr("data-date"));return t<e?-1:e<t?1:0}),t=s.find(".no-results").first().clone();s.find(".container-news").html(e),s.find(".container-news").prepend(t)}function h(){var e=s.find(".year");g.each(e,function(e,t){var a=g(t).find(".row"),t=g(t).find(".item").sort(function(e,t){e=parseInt(g(e).attr("data-timestamp")),t=parseInt(g(t).attr("data-timestamp"));return t<e?-1:e<t?1:0});a.html(t)})}function f(){g(".year").each(function(){"block"===g(this).css("display")&&g(this).find(".fds-news-img").each(function(){g(this).parents(".year").find(".fds-news-card").addClass("with-image")})})}c(u),r(o),e=o,(t=g(".dropdown-vehicle-sort").find("li>a[sortyear]")).length&&v.setDateLang(e,t),g(window).resize(function(){u.height("auto"),c(u)}),n.find("label").on("click",function(){g(this).parent(".dropdown-vehicle-sort").hasClass("active")?g(this).parent(".dropdown-vehicle-sort").removeClass("active"):g(this).parent(".dropdown-vehicle-sort").addClass("active")}),n.find("a").on("click",function(){var e=g(this).text(),t=g(this).attr("sortyear"),a=g(this).attr("sortmonth");"true"!==d?n.removeClass("active").find(".by").empty().text(e):(a=1,n.find(".txt").empty().text(e),n.removeClass("active").find(".by").empty()),n.find(".by").attr("sortmonth",a).attr("sortyear",t),h(),m(),l(a,t),f(),console.log("yearSorted")}),p(),"true"===d&&(t=n.find("a").first().attr("sortyear"),n.find(".txt").empty().text(t),n.removeClass("active").find(".by").empty(),h(),m(),l(1,t)),f()},e}),define("news-list/component.newsList",["jquery"],function(c){var d={},u=c("input[name='emptySearchLabel']").val(),n=c(".newsList").find(".header-search .component-content"),o=!1;function p(e){n.append('<div class="news-list-empty-message">'+e+"</div>")}return d.setStyle=function(e){c(e).find(".item-warp.first-item").length||c(e).find(".item-warp").first().find(".post-img").length&&c(e).find(".item-warp").first().addClass("first-item"),c(e).find(".item-warp").removeClass("last-item"),c(e).find(".item-warp").last().addClass("last-item")},d.viewAction=function(t){var a,i,n=".listing-wrap > .item-warp";c(t).find(n).length&&(d.defaultItem=parseInt(c(t).find('[name="numberArticle"]').val()),d.step=parseInt(c(t).find('[name="numberAddArticleMore"]').val()),a=c(t).find(".view-more-btn"),i=c(t).find(".view-less-btn"),d.totalItem=c(t).find(n).length,d.x=d.defaultItem,c(t).find(n).length>d.defaultItem?a.show():a.hide(),a.find("a").on("click",function(e){e.preventDefault(),d.startItem=d.x,d.x=d.x+d.step,d.endItem=d.x,d.endItem<d.totalItem?c(t).find(n).slice(d.startItem,d.endItem).show():(c(t).find(n).slice(d.startItem,d.totalItem).show(),d.endItem=d.totalItem,a.hide(),i.length&&i.show()),c("html, body").animate({scrollTop:c(t).find(n).eq(d.startItem).offset().top},1500)}),i.find("a").on("click",function(e){e.preventDefault(),d.x=d.endItem-d.step,x<=d.defaultItem?c("html, body").animate({scrollTop:c(t).find(d.item).eq(0).offset().top},1500,function(){c(t).find(n).slice(d.defaultItem,d.endItem).hide(),d.x=d.endItem=d.defaultItem,i.hide(),a.length&&a.show()}):c("html, body").animate({scrollTop:c(t).find(n).eq(d.x-d.step+1).offset().top},1500,function(){c(t).find(d.item).slice(d.x,d.endItem).hide(),d.endItem=d.x})}))},d.init=function(a){a?(d.setStyle(a),d.viewAction(a),a.find("#searchNewsList").on("click",function(e){var t;e.preventDefault(),o||(o=!0,e=a.find("#select-year").val(),t=a.find("#news-list-search").val(),d.getResult(a,e,t))})):c(".news-listing-wrap").each(function(e,t){d.setStyle(t),d.viewAction(t)})},d.getResult=function(e,t,a){var i=window.location.pathname,i=(i=(i=-1!=i.indexOf(".")?i.substring(0,i.indexOf(".")):i).length==i.lastIndexOf("/")+1?i.substring(0,i.lastIndexOf("/")):i)+".newsListSearch."+t+"."+a+".data";c(".listing-wrap .item-warp").remove(),c(".js-get-title").html(""),n.find(".news-list-empty-message").remove(),c.ajax({type:"GET",url:i,data:{},dataType:"json",success:function(e){d.loadNewsList(e,a),o=!1},error:function(e,t,a){p(u),o=!1}})},d.loadNewsList=function(e,t){if(e){var a=c(".news-list-template"),i=parseInt(c("input[name='numberArticle']").val()),n=c(".view-more-btn"),o=c(".js-get-title");d.defaultItem=i,d.step=parseInt(c('[name="numberAddArticleMore"]').val()),d.totalItem=e.length,d.x=d.defaultItem,i<e.length?n.show():n.hide(),0==e.length?p(u):void 0!==o.data("title-content")&&(o.append("<h2>"+o.data("title-content")+" <strong>&quot;"+t+"&quot;</strong></h2>"),c(".listing-wrap").append(o));for(var r=0;r<e.length;r++){var l=e[r],s=a.clone();r<i?s.show():s.hide(),e.length,s.prop("data-timestamp",l.timestamp),l.neHeadImage&&l.pagePath?(s.find(".post-img-without-link").remove(),s.find(".post-img-with-link a").prop("href",l.pagePath+".html"),s.find(".post-img-with-link a img").prop("src",l.neHeadImage)):l.neHeadImage?(s.find(".post-img-with-link").remove(),s.find(".post-img-without-link img").prop("src",l.neHeadImage)):(s.find(".post-img-without-link").remove(),s.find(".post-img-with-link").remove()),l.formattedDate?s.find(".date-and-location strong").append(l.formattedDate):s.find(".date-and-location strong").remove(),l.neLocation?s.find(".date-and-location span").append(l.neLocation):s.find(".date-and-location span").remove(),l.pagePath?(s.find(".post-title a:eq(0)").append(l.pageTitle),s.find(".post-title a:eq(0)").prop("href",l.pagePath+".html"),s.find(".post-title a:eq(1)").append(l.pageTitle),s.find(".post-title a:eq(1)").prop("href",l.pagePath+".html"),s.find(".post-title a:eq(1)").append(s.find("moreDetailsLabel").val())):(s.find(".post-title a:eq(0)").remove(),s.find(".post-title a:eq(1)").remove()),s.find(".post-txt").prepend(l.neExcerpt),s.find(".post-txt a").prop("href",l.pagePath+".html"),s.find(".post-txt a span").append(l.moreDetailsLabel),s.appendTo(".listing-wrap")}}},d}),define("billboard-owner/component.billboardOwner",["jquery","_","jquery-flexslider","configurationProvider","utils/mediaTracking","marketConfigGlobal","isAuthor"],function(m,h,e,s,t,f,a){var g={};function v(e,t){var a=0;m(window).width()<768&&(void 0===t||0==t)?m(e).css("min-height","auto"):(m(e).css("min-height","auto"),m(e).each(function(){var e=m(this).outerHeight();a<e&&(a=e)}),m(e).css("min-height",a))}function y(e){var i,e=m(e),o=e.find(".carousel"),a=!1,n=0,t={controlsContainer:o.find("> .carousel-controls"),selector:".slide-container > .carousel-slide",animation:"slide",directionNav:!1,pauseOnHover:!0,slideshow:!1,start:function(e){e.resize(),e.find(".carousel-previous").addClass("inactive");var t=e.find(".carousel-controls"),e=e.find(".flex-active-slide .component-content").height();m(t).css("top",e-m(t).outerHeight()-20)},end:function(e){n++},before:function(e){e.find(".carousel-btn").removeClass("inactive"),0==e.animatingTo&&e.find(".carousel-previous").addClass("inactive"),e.animatingTo==e.count-1&&e.find(".carousel-next").addClass("inactive")},keyboard:!1,after:function(e){!a&&0==e.currentSlide&&1<=n&&(e.vars.slideshow=!1,e.flexslider("stop"));var t=e.find(".carousel-controls"),e=e.find(".flex-active-slide .component-content").height();m(t).css("top",e-m(t).outerHeight()-20)}};function r(){a=!0,o.flexslider("stop")}function l(){var e=m(window).height(),t=i.find(".flex-active-slide .component-content img").height(),a=t-35;t<e?(i.find(".indicator-visible").removeClass("indicator-fixed"),i.find(".indicator-visible").css("top",a)):i.find(".indicator-visible").addClass("indicator-fixed")}o.find(".heading a").each(function(e,t){m(t).attr("tabIndex","-1")}),dataConfig=s.get(e),o.flexslider(m.extend(t,dataConfig)),o.find(".carousel-previous").on(touchOrClick,function(e){m(e.target).closest(".carousel").flexslider("prev"),r()}),o.find(".carousel-next").on(touchOrClick,function(e){m(e.target).closest(".carousel").flexslider("next"),r()}),o.on("click",function(){r()}),m(window).bind("resize",function(){setTimeout(function(){var e=o.find(".carousel-controls"),t=o.find(".flex-active-slide .component-content").height();m(e).css("top",t-m(e).outerHeight()-20)},500)}),o.on("keydown",function(e){var t=e.keyCode||e.which,a=o.data("flexslider");function i(){a.currentSlide===a.slides.length-1&&!0!==dataConfig.keyEventLoop||(o.flexslider("next"),e.preventDefault())}function n(){0===a.currentSlide&&!0!==dataConfig.keyEventLoop||(o.flexslider("prev"),e.preventDefault())}9===t&&(o.flexslider("stop"),(e.shiftKey?n:i)()),39===t&&(o.flexslider("stop"),i()),37===t&&(o.flexslider("stop"),n())}),!!/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent)?(i=m(".billboardOwner")).removeClass("visual-indicator"):(i=e,t=m('<div class="indicator indicator-visible"></div>'),i.addClass("visual-indicator"),t.appendTo(i),m(window).load(function(){l();var e=m(".cookie-disclaimer");1===e.length&&e.children(".close").on("click",function(e){e.preventDefault,m(".indicator-visible").removeClass("indicator-fixed")})}),m(window).resize(function(){setTimeout(function(){l()},500)}),m(window).scroll(function(){84<m(window).scrollTop()?(i.removeClass("visual-indicator"),i.children(".indicator").removeClass("indicator-visible")):(i.addClass("visual-indicator"),i.children(".indicator").addClass("indicator-visible"))}))}function b(e,t,a,i,n){var o,r={userName:"",vincode:e,sessionToken:""},e={derivativeKey:t,colorCode:a},t=(r.sessionToken=m.cookie("OWNER_SESSION"),r.userName=m.cookie("OWNER_USERNAME"),i.closest(".tabs-content")),a=t.find("input[name=vincode]").val(),l=t.find("input[name=modelKey]").val(),t=t.find("input[name=color]").val(),a=("undefined"!=a&&null!=a&&""!=a&&(r.vincode=a),"undefined"!=l&&null!=l&&""!=l&&(e.derivativeKey=l),"undefined"!=t&&null!=t&&""!=t&&(e.colorCode=t),e),s=i,l=window.location.pathname;-1!=l.indexOf(".html")&&(l=l.substring(0,l.indexOf(".html"))),m.ajax({type:"GET",url:l+".billboardImagePath.html",data:a,dataType:"html",success:function(e){s.find("div.billboard-content-wrap div.billboard").html(m(e).html())},error:function(e){k(e)}}),(C(i).length?m.when(d(r,i),u(r,i),(t=r,o=i,e=g.SERVICE_LAYER_URL+"/fordowner/vehicle/users/lastServiceDate",m.ajax({type:"POST",url:e,dataType:returnJsonTypeBaseonBrowser(),data:t,success:function(e){200!=e.returnCode&&201!=e.returnCode||null==e.user?k(e):m.each(e.user,function(){var e=this.vehicle,t={"[@serviceDate]":"-"};null!=e[0].lastServiceDate?(t["[@serviceDate]"]=e[0].lastServiceDate,w(t,o)):(e=C(e=o)).length&&e.hide()})},error:function(e){k(e)}}))):m.when(d(r,i),u(r,i))).done(function(){p(i),m(".checkServiceHistory").length&&c(r,i,n)})}function r(t,a){return Object.keys(a).forEach(function(e){t=t.replace(e,a[e])}),t}function c(a,e,t){m(".ownerVehicleTitle").unbind("click"),m(".ownerVehicleTitle").on("click",function(){null!==t&&""!==t&&m(".history-content").parent().html(t),m(".service-history").css("display",""),m(".service-history-no-data").css("display","")}),m(".checkServiceHistory",e).bind("click",function(e){m(".serviceHistory-disclaimer").show(),g.vinIndexValue=String(m(this).parents(".ownerVehicleContent").attr("id")).match(/\d+/)[0],sessionStorage.setItem("OWNER_SELECTEDVEHICLE_COOKIE",JSON.stringify(a));var t={};a&&(t.firstName="",t.lastName="",t.email="",t.sessionToken=a.sessionToken,t.countryCodeIso2=f.getCurrentMarketCode(),t.vin=a.vincode,t.pageSize=4,t.currentPage=1),m.ajax({type:"POST",url:m("#serviceLayerUrl").val()+"/fordowner/vehicle/users/profiles/serviceHistory",dataType:returnJsonTypeBaseonBrowser(),data:t,async:!0,success:function(e){if("USER_LOCKED"===e.code)alert(e.message);else if(g.isCompareOverlayAlreadyOpen)if(e.result){if(0<m(".history-content").length){var t=m(".history-content")[0].outerHTML,a="",i=e.data;if(i&&i.details){for(var n=0;n<i.details.length;n++){var o=t;a+=o=0<(o=0<(o=0<(o=0<o.indexOf("[@ServiceType]")?r(o,{"[@ServiceType]":i.details[n].serviceType||"-"}):o).indexOf("[@Odometer]")?r(o,{"[@Odometer]":i.details[n].odometer||"-"}):o).indexOf("[@serviceData]")?r(o,{"[@serviceData]":i.details[n].serviceDate||"-"}):o).indexOf("[@serviceDealer]")?r(o,{"[@serviceDealer]":i.details[n].dealerName||"-"}):o}m(".history-content").parent().html(a),m(".service-history-no-data").hide(),m(".service-history").css("display","block")}}}else"SERVICE_HISTORY_NOT_FOUND"!=e.code||e.data?l():m(".service-history-no-data").show();else g.isCompareOverlayAlreadyOpen=!0,l()},error:function(e){}})})}function l(){var e=window.location.pathname,t=m("input[name=serviceHistoryVerificationPage]").val()+".html",e=(a&&(e+="?wcmmode=disabled",t+="?wcmmode=disabled"),e+"#overlay"+t);m("input[name=serviceHistoryVerificationPage]").val()&&(m("#serviceHistoryVerification")[0].href=e,m("#serviceHistoryVerification")[0].click())}function d(e,a){var t=g.SERVICE_LAYER_URL+"/fordowner/vehicle/users/vehicle";return m.ajax({type:"POST",url:t,dataType:returnJsonTypeBaseonBrowser(),data:e,success:function(e){200!=e.returnCode&&201!=e.returnCode||null==e.user?k(e):m.each(e.user,function(){var e=this.vehicle,t={"[@vin]":"-","[@vehicleName]":"-","[@syncStatus]":"-"};null!=e[0].vincode&&(t["[@vin]"]=e[0].vincode),null!=e[0].vehicleName&&(t["[@vehicleName]"]=e[0].vehicleName),null!=e[0].syncFordTouchVersion&&(t["[@syncStatus]"]=e[0].syncFordTouchVersion),w(t,a)})},error:function(e){k(e)}})}function u(e,a){var t=g.SERVICE_LAYER_URL+"/fordowner/vehicle/users/vehicle/warranty";return m.ajax({type:"POST",url:t,dataType:returnJsonTypeBaseonBrowser(),data:e,success:function(e){200!=e.returnCode&&201!=e.returnCode||null==e.user?k(e):m.each(e.user,function(){var e=this.vehicle,t={"[@warranty]":"-","[@expDate]":"-","[@endOdometer]":"-"};null!=e[0].warranty&&(t["[@warranty]"]=e[0].warranty),null!=e[0].expDate&&(t["[@expDate]"]=e[0].expDate),null!=e[0].endOdoMeter&&(t["[@endOdometer]"]=e[0].endOdoMeter),w(t,a)})},error:function(e){k(e)}})}function p(e){(e=e).html(((e,t)=>{var a,i=e.html();for(a in t)if(t.hasOwnProperty(a))for(i=i.replace(a,t[a]);0<=i.indexOf(a);)i=i.replace(a,t[a]);return i})(e,{"[@vin]":"-","[@vehicleName]":"-","[@serviceDate]":"-","[@syncStatus]":"-","[@warranty]":"-","[@expDate]":"-","[@endOdometer]":"-"})),e.find(".loading-icon").remove()}function w(e,t){var a,i=e,n=t.find(".gux-variable span");for(a in i)i.hasOwnProperty(a)&&n.each(function(){-1!=m(this).text().indexOf(a)&&(m(this).closest(".gux-variable").show(),m(this).closest(".gux-variable").parent().find(".loading-icon").remove())});t.html(((e,t)=>{var a,i,n=t.html();for(a in e)e.hasOwnProperty(a)&&(n=1!=a.indexOf("[@")?(i=a.replace("[@","\\[\\@").replace("]","\\]"),n.replace(new RegExp("("+i+")","g"),e[a])):n.replace(a,e[a]));return n})(e,t))}function C(e){return e.find('p:contains("[@serviceDate]")')}function k(e){e.returnCode&&e.msg}function S(e,t,a,i){var n,o=e.vehicle;if(o&&0<o.length)for(var r=0;r<o.length;r++)n=o[r],t.push(n.vincode),null!=n.derivativeKey?a.push(n.derivativeKey):a.push(n.modelKey),i.push(n.color)}return g.SERVICE_LAYER_URL=m("#serviceLayerUrl").val(),g.isCompareOverlayAlreadyOpen=!1,g.vinIndexValue=0,touchOrClick=null!==document.ontouchstart?"click":"touchstart",g.init=function(e){m(".billboardOwner .slide-container").each(function(){m(this).find("article").each(function(){(t=m(this).find(".gux-variable")).length&&(t.hide(),t.parent().append('<img class="loading-icon" src="/etc/designs/guxfoap/clientlibs/guxfoap/img/load.gif" style="width:30px;"/>'))})});var t,a,i=[],n=[],o=[],r="",l=(0<m(".history-content").length&&"in"===f.getCurrentMarketCode()&&(r=m(".history-content")[0].outerHTML),m("#serviceLayerUrl").val()),s="",c=m.cookie("OWNER_SESSION"),d=m.cookie("OWNER_USERINFO"),u=((d=d&&JSON.parse(d))?S(d,i,n,o):(d={userName:s=void 0!==s&&""!=s?s:m.cookie("OWNER_USERNAME"),sessionToken:c},"true"==m("#isLightHouse").val()&&(d.make=m("#make").val(),d.isLightHouse=!0,d.countryCodeIso2=m("#countryCodeIso2").val(),d.countryCodeISO=m("#countryCodeISO").val()),m.ajax({type:"POST",url:l+"/fordowner/vehicle/users/profiles/accountinfo",dataType:returnJsonTypeBaseonBrowser(),data:d,async:!1,success:function(e){var t=e.returnCode;if(null!=t)switch(t){case 201:case 200:S(e,i,n,o)}},error:function(e){k(e)}})),0==i.length&&(i=[""],n=[""],o=[""]),m(".billboardOwner .slide-container article").size());if(u<i.length)for(var p=u;p<i.length;p++)m(".billboardOwner .slide-container").append('<article class="carousel-slide slider-model-detail">'+m(".billboardOwner .slide-container article:last").html()+"</article>");else if(u>i.length)for(p=i.length;p<u;p++)m(".billboardOwner .slide-container article:last").remove();m(".billboardOwner .slide-container").each(function(){m(this).find("article").each(function(e){b(i[e],n[e],o[e],m(this),r)}),1<m(this).find("article").size()&&m(this).parent().find(".carousel-arrows").removeClass("deactivate").addClass("activate")}),m(".billboardOwner").closest(".myProfileTabOwner").length<1&&(void 0!==e?y(e):m(".billboardOwner").each(function(e,t){y(t)})),s=1500,c=m(".miniDashboard-wrap .miniDashboard-carousel-wrap"),m(a=".miniDashboard-wrap .mini-db-equal-height").length&&!c.length&&(setTimeout(function(){v(a)},s),m(window).on("resize",h.throttle(function(){v(a)},s))),m(window).on("onoverlayhide",function(){g.isCompareOverlayAlreadyOpen=!1}),m(window).on("onoverlayload",function(){m(".overlay-container .serviceHistory").attr("data-index-value",g.vinIndexValue)})},g}),define("billboard-common/component.billboardCommon",["jquery","cookie","marketConfigGlobal","brightcove/component.newBrightcove"],function(d,u,p,m){var e={COOKIE_LOC_URL:"common.location.LOC_URL"};function h(i,n){var e=window.location.pathname;-1!=e.indexOf(".html")&&(e=e.substring(0,e.indexOf(".html"))),d.ajax({type:"GET",url:e+".formBillboardImages.data",dataType:"html",success:function(e){var t,a;t=i,a=n,1<=d(e=e).find(".component-content").length&&(e=d(e).find(".component-content"),d(e).each(function(){if(d(this).attr("data-model-name")===a)return d(t).find(".billboard-image").html(d(this).html()),!1})),e=f("nameToken")||"Title",d(".billboard-inner .regular:first .desktop.hideForMobile p span, .billboard-inner .regular:first .mobile.show-mob-only p span").html(e)},error:function(e){errorReturn(e)}})}function f(e){for(var t=e+"=",a=document.cookie.split(";"),i=0;i<a.length;i++){for(var n=a[i];" "==n.charAt(0);)n=n.substring(1,n.length);if(0==n.indexOf(t))return n.substring(t.length,n.length)}return null}e.init=function(e){var t,a,i=p.getCurrentiso3MarketCode(),i=("arg"!==i&&d(".billboardCarousel .image-loader-svg").css("display","block"),"arg"==i&&(i=document.querySelector(".billboard"))&&i.classList.remove("section"),d(".billboard-paragraph .vehicledisplaytitle").closest(".billboard-paragraph").addClass("billboard-paragraph-relative"),0<d(".billboard-paragraph .vehicledisplaytitle").closest(".billboard-paragraph-relative").length&&d(".billboard-image").addClass("vehdisplaymodel-image"),d(".billboard-paragraph-relative").find(".vehicledisplaytitle").parent("a").on("click",function(e){e.preventDefault();var t,a,e=d(this).attr("href");t=f("nameplateKey")||"",a=f("categoryTocken")||"",e+="?mkey="+t+"&ct="+a,window.location.href=e}),window.location.href),i=new RegExp("[?&]Model=([^&#]*)","i").exec(i),n=i?i[1]:null;{var o,i,r,l,s,c;window.location.hash?(t=d(".overlay-content-inner .form .common-billboard"),d(t).each(function(){var e=d(this);e.attr("data-dynamicbillboardimage")&&n&&(h(e,n),640<d(window).width()&&e.attr("data-margin-desktop")?e.attr("style",e.attr("data-margin-desktop")):e.attr("data-margin-mobile")&&e.attr("style",e.attr("data-margin-mobile")))})):(t=d(".common-billboard"),d(t).each(function(){d(this).attr("data-dynamicbillboardimage")&&n&&h(d(this),n)})),t=(i=e).find("input[name=enabledDynamicPricing]").val(),i=d(i).find(".billboard-paragraph"),t&&"true"==t&&i&&(o=i,i=d("#serviceLayerUrl").val()+"/fordowner/vehicle/model/getAllModelByKeys",r=d("#modelCodeForHotDeals").attr("value"),l=(e=>{var t=[];return(e=d(e).find(".gux-variable"))&&0<e.length&&d(e).each(function(){t.push(d(this).text())}),_.uniq(t)})(o),s=(e=>{var t=[];return e&&0<e.length&&_.each(e,function(e){e=/\[@([\w]+)\]/gm.exec(e);e&&t.push(e[1].toLowerCase())}),_.uniq(t)})(l),c={countryCodeISO:d("#countryCodeISO").val(),attributes:s,modelKeys:[r]},r&&0<s.length&&d.ajax({method:"POST",url:i,processData:!1,contentType:"application/json",data:JSON.stringify(c)}).done(function(e){var a,t,i;1==e.result&&200==e.returnCode?(e=e.vehicles[0].attribute,e=_.map(e,g),a=s,t=o,i={},_.each(e,function(e){var t;-1!=_.indexOf(a,e.key)&&(t=(t=e.value)||" - ",i["[@"+e.key+"]"]=t)}),t&&i&&t.html(y(i,t))):v(l,o)}).fail(function(e,t){v(l,o)}).always(function(){}))}r=e,i=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,d(window).width()<640&&(i||(c=navigator.connection||navigator.mozConnection||navigator.webkitConnection)&&(c.downlink,a=navigator.connection.type),!i&&"wifi"!==a||d(r).find(".js-init-video-fullscreen").each(function(){var t=d(this).parent().find(".js-load-video-fullscreen"),e=t.find(".js-brightcove-player"),a=e.data("mobile-autoplay");e.data("account-id")&&(d(this).attr("href","#"),d(this).removeClass("link-overlay"),m.initialed||m.addPlayer(t,a),d(this).on("click",function(e){e.preventDefault(),t.hasClass("js-bcinit")||t.addClass("js-bcinit"),m.addPlayer(t,a)}))})),d(".download-recall-pdf").length&&d("select.download-recall-pdf").each(function(){d(this).on("click",function(e){document.querySelector(".download-recall-pdf.select2-offscreen")[0].setAttribute("disabled","true");e=e.target.value;void 0!==e&&(""!=u.getCookie("cq-authoring-mode")&&-1==e.indexOf("?wcmmode=disabled")&&-1==e.indexOf("&wcmmode=disabled")&&(-1!=e.indexOf("?")?e+="&wcmmode=disabled":e+="?wcmmode=disabled"),e=window.location.pathname+"#overlay"+e,d("body").append('<a href="'+e+'" class="download-recall-overlay link-overlay"></a>'),d(".download-recall-overlay").trigger("click"),d(".download-recall-pdf.select2-offscreen")[0].selectedIndex=0,setTimeout(function(){d(".download-recall-overlay").remove()},1e3))})}),d("body").find(".image-loader-svg").remove()},d(".billboard-paragraph .close-btn").on("click",function(){d(".billboard.section").find(".billboard-content.common-billboard.banner-hide").hide(),u.setCookieWithPath("closeBanner","true",1,"/")}),u.getCookie("closeBanner")&&d(".billboard.section").find(".billboard-content.common-billboard.banner-hide").hide();var g=function(e){return{key:e.key.toLowerCase(),value:e.value}};function v(e,t){var a={};_.each(e,function(e){a[e]=" - "}),t&&a&&t.html(y(a,t))}function y(e,t){var a,i,n=t.html();for(a in e)e.hasOwnProperty(a)&&(n=1!=a.indexOf("[@")?(i=a.replace("[@","\\[\\@").replace("]","\\]"),n.replace(new RegExp("("+i+")","ig"),e[a])):n.replace(a,e[a]));return n}return e}),define("mini-dashboard/component.miniDashboard",["jquery","_","jquery-flexslider","configurationProvider"],function(i,a,e,n){var t={};function o(e,t){var a=0;i(window).width()<768&&(void 0===t||0==t)?i(e).css("min-height","auto"):(i(e).css("min-height","auto"),i(e).each(function(){var e=i(this).outerHeight();a<e&&(a=e)}),i(e).css("min-height",a))}return t.init=function(){var e=i(".miniDashboard-wrap .db-vehicle-category"),t=".miniDashboard-wrap .mini-db-equal-height";e.length&&e.find("> div:last-child").addClass("last"),i(t).length&&(setTimeout(function(){o(t)},1500),i(window).on("resize",a.throttle(function(){o(t)},1500))),i(".miniDashboard-carousel-wrap").each(function(){var e,t;e=i(e=this),t=n.get(e),e.flexslider(i.extend({selector:".miniDashboard-carousel > .item",animation:"slide",directionNav:!1,pauseOnHover:!0,slideshow:!1,keyboard:!1},t))})},t}),define("newsArticle/component.newsArticle",["jquery","utils/utils.date"],function(a,i){var e={};return e.init=function(e){768<=a(window).width()&&!function(e){a(this).css("height","auto");var t=e.map(function(){return a(this).css("min-height","inherit"),a(this).height()}).get(),t=Math.max.apply(null,t);e.css("min-height",t)}(e.find(".sameHeightNews"));var e=a("html").attr("lang"),t=a(".news-article").find(".date-time-article[data-timestamp]");t&&i.setDateFormat(e,t,null),a(".news-article").data("bds-style")&&(a(".author-publisher-article").addClass("secondaryHeadline3-regular-grey-cap"),a(".date-time-article").addClass("caption-regular-grey-tt_none-ls1"))},e}),define("stickybar/component.stickybar",["jquery","analytics/analyticsEventLayer"],function(l,e){function t(){var t,a,i,e=l(".stickynavAPO").attr("data-hideme"),n=l(".stickynavAPO").attr("data-hideMeTxt"),o=l(".stickynavAPO").attr("data-stickyside"),r=(o="left-side"==o?"left":"right","true"==e&&(l(".stickynavAPO").hide(),l("#unHideMe").show(),l("#unHideMe").addClass("active"),l(".stickynavAPO").append('<li id="hideMe"><span><a href="javascript:;">'+n+'</a></span> <a href="javascript:;" tabindex="0"> <div class="icon icon-chevron-thin-'+o+'"></div></a>  </li>')),c(),l(".sticky-sidebar-component li").mouseenter(function(){l(".left-sticky").length?l(".sticky-sidebar-component").removeClass("open"):l(".sticky-sidebar-component").addClass("open")}).mouseleave(function(){l(".left-sticky").length?l(".sticky-sidebar-component").addClass("open"):l(".sticky-sidebar-component").removeClass("open")}),e=l(".share-button"),i=a=t="",e.each(function(){var e=l(this);t=e.data("social-service"),l(".social-links li a").each(function(){a=l(this).data("social-service"),t===a&&(i=l(this).attr("href"),e.attr("href",i))})}),s(),l(".chat-bot"));r.length&&(r.parents("li").css("pointer-event","none"),document.addEventListener("botHasLoaded",function(e){r.parents("li").removeAttr("style"),r.on("click",function(){window.chatbot.show()})},!1)),l("#hideMe").click(function(){l("#unHideMe").show(),l("#unHideMe").addClass("active"),l(".stickynavAPO").hide()}),l("#unHideMe").click(function(){l("#unHideMe").hide(),l(".stickynavAPO").show()})}l(window).load(function(){c()}),l(window).resize(function(){s()});var s=function(){var e,t=l(".stickybar-mobile-component .sameHeightSplitter");l(window).width()<640?(e=0,t.each(function(){l(this).height()>e&&(e=l(this).height())}),t.css("height",e)):t.removeAttr("style")},c=function(){var e,t=l(".sticky-sidebar-component").height()/2,a=l(".sticky-sidebar-component");l(".cookie-disclaimer").length&&!l(".cookie-disclaimer").is(":hidden")?(e=0,t=l(".cookie-disclaimer").outerHeight()+l(".main-nav").outerHeight()+(e=l(".secondaryNavigation").length?l(".secondaryNavigation").outerHeight():e)+20,a.css("top","0"),a.css("margin-top",t)):a.css("margin-top",-t)};l(".sticky-sidebar-component li").click(function(){e.getStickyNavEvents().trackStickyNav(l(this).find("span a").text())});return{init:function(){t()}}}),define("analytics/analyticsEventLayer",["analytics/events/accordionEvents","analytics/events/buildAndPriceSelectLocationEvents","analytics/events/buildAndPriceBuildEvents","analytics/events/buildAndPriceReviewEvents","analytics/events/buildAndPriceSelectVehicleEvents","analytics/events/brightcoveVideoEvents","analytics/events/carouselEvents","analytics/events/contactUsEvents","analytics/events/commonDealerLocatorEvents","analytics/events/stickyNavEvents","analytics/events/helpMeChooseEvents","analytics/events/cookieMessageEvents","analytics/events/creditFinanceOptionsEvents","analytics/events/creditFinanceOptionsToolEvents","analytics/events/creditInvestorCentreEvents","analytics/events/creditPaymentEstimatorEvents","analytics/events/creditShoppingGuideEvents","analytics/events/creditSupportEvents","analytics/events/ctaEvents","analytics/events/downloadEvents","analytics/events/dealerLocatorEvents","analytics/events/formWizardEvents","analytics/events/galleryEvents","analytics/events/globalEvents","analytics/events/homePageEvents","analytics/events/hotspotsEvents","analytics/events/imageVideoInteractionsEvents","analytics/events/liveChatEvents","analytics/events/latestOffersEvents","analytics/events/miniDealerLocatorEvents","analytics/events/modelWalkAndCompareEvents","analytics/events/newsEvents","analytics/events/ownerMyProfileEvents","analytics/events/ownerMyVehicleEvents","analytics/events/ownerServiceMaintenanceEvents","analytics/events/ownerVehicleSupportEvents","analytics/events/ownerWarrantyInsuranceEvents","analytics/events/promotionsShowroomEvents","analytics/events/searchEvents","analytics/events/searchVinEvents","analytics/events/selectLanguageEvents","analytics/events/selectVehiclesEvents","analytics/events/shareEvents","analytics/events/serviceBookingEvents","analytics/events/servicePriceCalculatorEvents","analytics/events/serviceCalculatorEvents","analytics/events/showroomEvents","analytics/events/sliderEvents","analytics/events/socialEvents","analytics/events/specQuickViewEvents","analytics/events/tabsEvents","analytics/events/threesixtyColouriserEvents","analytics/events/colorizerThreesixtyEvents","analytics/events/unsupportedBrowserEvents","analytics/events/vehicleAccessoriesEvents","analytics/events/vehicleAttributeEvents","analytics/events/vehicleFeaturesEvents","analytics/events/vehicleHomePageEvents","analytics/events/vehicleRevealEvents","analytics/events/predeliveryEvents","analytics/events/predeliveryRefreshEvents","analytics/events/serviceManualEvents","analytics/events/trackCustomerServiceCharterClickAnalytics","analytics/events/fordPassEvents","analytics/events/specialOfferEvents","analytics/events/nameplateExperienceEvents","analytics/events/simpleEmiCalculatorEvents","analytics/events/quickBnpEvents","analytics/events/nudgePopupEvents","analytics/events/youtubePlayerEvents","analytics/events/buildAndPriceMotionEvents","analytics/events/buildAndPriceFDSEvents","analytics/events/accessoriesEvents"],function(e,t,a,i,n,o,r,l,s,c,d,u,p,m,h,f,g,v,y,b,w,C,k,S,x,D,P,T,N,A,I,L,_,M,O,E,R,V,B,U,q,j,H,K,z,G,W,Y,J,Q,Z,X,ee,te,ae,ie,ne,oe,re,le,se,ce,de,ue,pe,me,he,fe,ge,ve,ye,be,we){var F={init:function(){S.init(),h.init(),r.trackMediaCarouselItemContent(),g.init(),v.supportPDFDownload(),"undefined"!=typeof fordMarketingTags&&fordMarketingTags.liveChatMarker&&T.init(),L.init(),M.init(),O.init(),E.init(),R.init(),p.init()},getAccordionEvents:function(){return e},getSimpleEmiCalCulatorEvents:function(){return he},getNameplateExperienceEvents:function(){return me},getBuildAndPriceBuildEvents:function(){return a},getBuildAndPriceReviewEvents:function(){return i},getBuildAndPriceSelectVehicleEvents:function(){return n},getBrightcoveVideoEvents:function(){return o},getCarouselEvents:function(){return r},getCommonDealerLocatorEvents:function(){return s},getStickyNavEvents:function(){return c},getHelpMeChooseEvents:function(){return d},getContactUsEvents:function(){return l},getCookieMessageEvents:function(){return u},getCreditFinanceOptionsEvents:function(){return p},getCreditFinanceOptionsToolEvents:function(){return m},getCreditInvestorCentreEvents:function(){return h},getCreditPaymentEstimatorEvents:function(){return f},getCreditShoppingGuideEvents:function(){return g},getCreditSupportEvents:function(){return v},getCtaEvents:function(){return y},getDealerLocatorEvents:function(){return w},getDownloadEvents:function(){return b},getFormWizardEvents:function(){return C},getGalleryEvents:function(){return k},getGlobalEvents:function(){return S},getHomePageEvents:function(){return x},getHotspotsEvents:function(){return D},getImageVideoInteractionsEvents:function(){return P},getLiveChatEvents:function(){return T},getLatestOffersEvents:function(){return N},getMiniDealerLocatorEvents:function(){return A},getModelWalkAndCompareEvents:function(){return I},getNewsEvents:function(){return L},getOwnerMyProfileEvents:function(){return _},getOwnerMyVehicleEvents:function(){return M},getOwnerServiceMaintenanceEvents:function(){return O},getOwnerVehicleSupportEvents:function(){return E},getPromotionsShowroomEvents:function(){return V},getSearchEvents:function(){return B},getSearchVinEvents:function(){return U},getSelectLanguageEvents:function(){return q},getSelectVehiclesEvents:function(){return j},getShareEvents:function(){return H},getServiceBookingEvent:function(){return K},getServicePriceCalculatorEvents:function(){return z},getServiceCalculatorEvents:function(){return G},getShowroomEvents:function(){return W},getSliderEvents:function(){return Y},getSocialEvents:function(){return J},getSpecQuickViewEvents:function(){return Q},getTabsEvents:function(){return Z},getThreesixtyColouriserEvents:function(){return X},getColorizerThreesixtyEvents:function(){return ee},getUnsupportedBrowserEvents:function(){return te},getVehicleAccessoriesEvents:function(){return ae},getVehicleAttributeEvents:function(){return ie},getVehicleFeaturesEvents:function(){return ne},getVehicleHomePageEvents:function(){return oe},getVehicleRevealEvents:function(){return re},getPredeliveryEvents:function(){return le},getPredeliveryRefreshEvents:function(){return se},getServiceManualEvents:function(){return ce},getTrackCustomerServiceCharterClickAnalytics:function(){return trackCustomerServiceCharterClickAnalytics}};return $(window).on("buildpriceLocation",function(e){return t}),F.getFordPassEvents=function(){return ue},F.getSpecialOfferEvents=function(){return pe},F.getQuickBnpEvents=function(){return fe},F.getNudgePopupEvents=function(){return ge},F.getYoutubePlayerEvents=function(){return ve},F.getBuildAndPriceMotionEvents=function(){return ye},F.getBuildAndPriceFDSEvents=function(){return be},F.getAccessoriesEvents=function(){return we},F}),define("analytics/analyticsPageLayer",["analytics/analyticsVariables","analytics/loads/errorPagesLoad","analytics/loads/internalCampaignPageLoad","analytics/loads/unsupportedPageLoad"],function(t,a,i,n){var e={init:function(){window.digitaldata=window.digitaldata||{};var e={"brand:error:unsupported browser":n.fillData,"brand:error:404":a.fillData("404"),"brand:error:500":a.fillData("500")};digitaldata&&digitaldata.page&&e.hasOwnProperty(digitaldata.page.pageName)&&e[digitaldata.page.pageName](),t.setPreviousSiteSection(),i.init()},getInternalCampaignPageLoad:function(){return i}};return e}),define("analytics/analyticsTarget",["_","jquery","jquery-flexslider","analytics/analyticsUtilities","analytics/analyticsVariables","analytics/loads/internalCampaignPageLoad","billboard-carousel/component.billboardCarousel"],function(o,r,e,l,t,s,a){var i={},c=t.getVehicleNameplate(),d=t.getTemplate();function u(e){return e.replace(/({|\()template(\)|})/gi,d)}function p(e,t,a){var i=e.indexOf("#"),n=-1===i?"":e.substr(i),i=(e=-1===i?e:e.substr(0,i),new RegExp("([?&])"+t+"=.*?(&|$)","i")),o=-1!==e.indexOf("?")?"&":"?";return a?e=e.match(i)?e.replace(i,"$1"+t+"="+a+"$2"):e+o+t+"="+a:"?"===(e=e.replace(new RegExp("([&]?)"+t+"=.*?(&|$)","i"),"")).slice(-1)&&(e=e.slice(0,-1)),e+n}return i.unhideHomePageCarousels=function(){var e=(t=>{try{return Array.prototype.slice.call(t)}catch(e){for(var a=[],i=0;i<t.length;++i)a.push(t[i]);return a}})(document.querySelectorAll(".carousel")),t=e.shift();o.forEach(e,function(e){e.style.opacity=1}),o.delay(function(){t.style.opacity=1},500)},i.homepageCarouselPersonalisation=function(e,n){e||(e=r("div[data-analyticstargetcampaigncode]"),o.forEach(e,function(e){var t,a=u(r(e).data("analyticstargetcampaigncode")),i="intcmp="+a;o.forEach(r(e).find("a"),function(e){var t=r(e).attr("href");t&&(t.includes("/forms/")||(t+=(t.match(/\?/)?"&":"?")+i),r(e).attr("href",t),r(e).data("analyticstargetcampaigncode",a),r(e).on("click.analyticsHomePageCarouselTargetClick",function(){window.s_eVar68=r(this).data("analyticstargetcampaigncode"),digitaldata.onclick.onclickLinkName="home:content:onpage",digitaldata.onclick.onclick="hp content:personalised experience banner",digitaldata.onclick.contentType="hp:"+d+":click",l.trackAndReset("hp-target-onclick")}))}),n||(t=r(e).parents("article").html(),r(e).parents("article").siblings().last().html(r.parseHTML(t)))})),document.querySelector(".carousel").style.opacity=1},i.personalisation=function(n){var e,t,a;return n=Object.assign({intcmp:!1,gmbxtid:!1,operation:"replace",replacementType:"single",component:"carousel",selector:!1},n),l.notify("personalisation target: "+JSON.stringify(n)),!(!n.selector&&!n.component)&&("carousel"===n.component?(e=r(n.selector).parents('div[style="visibility:hidden"]').find(".carousel-slide"),t=r(n.selector).parents(".billboardCarousel, .mediaCarousel, .youMightAlsoLike, .modelsDisplay").find(".carousel"),(void 0!==(a=r(n.selector).parents(".billboardCarousel, .mediaCarousel, .youMightAlsoLike, .modelsDisplay").find(".carousel").data("flexslider"))||void 0!==t)&&("full"===n.replacementType&&"replace"===n.operation&&a.slides.each(function(e){a.removeSlide(e)}),e.each(function(e){var t,i=e,e=!0;if(void 0!==r(this).data("targetPosition")&&parseInt(r(this).data("targetPosition"))&&(t=parseInt(r(this).data("tagetPosition")),isNaN(t)?e=!1:t<0&&(t=a.count+t),t<=a.count&&0<t&&e?i=t-1:e=!1),void 0!==r(this).data("targetOperation"))switch(r(this).data("target-operation")){case"replace":n.operation="replace";break;case"insert":n.operation="insert"}r(this).find("a").attr("href",function(){var e,t,a=this.href,a=n.intcmp?p(a,s.getCampaignCode(a),u(n.intcmp)):r(this).parents(".billboardCarousel, .mediaCarousel, .youMightAlsoLike, .modelsDisplay").hasClass("billboardCarousel")?s.appendGenericLink(a):s.generateBillboardLinkWithParam(a);return a=n.gmbxtid?p(a,"gmbxtid",(e=n.gmbxtid,t=i+1,c=""!==c?c:"na",e.replace(/({|\()slide(\)|})/gi,"slide"+t).replace(/({|\()nameplate(\)|})/gi,c))):a}),r(this).find("a").on("click.analyticsHomePageCarouselTargetClick",function(){digitaldata.onclick.onclickLinkName="home:content:onpage",digitaldata.onclick.onclick="hp content:personalised experience banner",digitaldata.onclick.contentType="hp:"+d+":click",l.trackAndReset("hp-target-onclick")}),"replace"!==n.operation&&"insert"!==n.operation||!e||("replace"===n.operation&&"full"!==n.operation&&a.removeSlide(i),a.addSlide(this,i))}),document.querySelector(".carousel").style.opacity=1,!0)):void 0)},i.init=function(){i.unhideHomePageCarousels()},i}),define("analytics/analyticsUtilities",["common"],function(e){var t={notify:function(e,t){"undefined"!=typeof _satellite&&_satellite.notify(e,t=t||1)},track:function(e){t.notify("datalayer for "+e+": "+JSON.stringify(digitaldata),1),digitaldata.onclick.contentType&&digitaldata.onclick.contentType.includes(":impress")&&(digitaldata.onclick.contentType=""),"undefined"!=typeof _satellite&&"standalone"!==fordAnalytics.formType&&_satellite.track(e)}};return t.resetDatalayer=function(){var e;(e=window.location.pathname).includes("/shop/")||e.includes("shop.html")||window.setTimeout(function(){digitaldata=JSON.parse(JSON.stringify(prevDigitaldata))},2e3),prevDigitaldata=JSON.parse(JSON.stringify(digitaldata))},t.updateDatalayer=function(){prevDigitaldata=JSON.parse(JSON.stringify(digitaldata))},t.trackAndReset=function(e){t.track(e),t.resetDatalayer()},t.trackAndUpdate=function(e){t.track(e),t.updateDatalayer()},t}),define("analytics/analyticsVariables",["analytics/analyticsUtilities","common"],function(e,t){var a={},i=t.localeStorage(),n="guxfoap.previousSiteSection",o="guxfoap.previousHierarchy",r="guxfoap.previousPagenameNoVehicle",l="guxfoap.previousPageName";return a.getContentSubType=function(){return digitaldata.onclick.contentSubType||""},a.getCurrentCountry=function(){return fordAnalytics.country?fordAnalytics.country.trim():"nocountry"},a.getLincolnSites=function(){return fordAnalytics.dictionary.lincolnSites||[]},a.getPage=function(){return fordAnalytics.pg?fordAnalytics.pg.trim():""},a.getPageTitle=function(){return fordAnalytics.pageTitle||""},a.getPageCategory=function(){return fordAnalytics.category?fordAnalytics.category.trim():""},a.getPageModelYear=function(){return digitaldata.page.modelYear||""},a.getPageName=function(){return digitaldata&&digitaldata.page&&digitaldata.page.pageName||""},a.getPageNameNoVehicle=function(){return digitaldata.page.pageNameNoVehicle||""},a.getPageNameplate=function(){return digitaldata&&digitaldata.page&&digitaldata.page.nameplate||""},a.getPageNamePrefix=function(){return fordAnalytics.prefix||""},a.getPageSubcategory=function(){return fordAnalytics.subcategory||""},a.getPreviousSiteSection=function(){return"undefined"!=typeof Modernizr&&void 0!==Modernizr.localstorage?localStorage.getItem(n)||"site entry":(e.notify("No Web Storage support. Returning current site section.",1),digitaldata.page.siteSection)},a.setPreviousSiteSection=function(){"undefined"!=typeof Modernizr&&void 0!==Modernizr.localstorage&&i?digitaldata.page.siteSection&&localStorage.setItem(n,digitaldata.page.siteSection):e.notify("No Web Storage support.",1)},a.getPreviousPageName=function(){return"undefined"!=typeof Modernizr&&void 0!==Modernizr.localstorage?localStorage.getItem(l)||"site entry":(e.notify("No Web Storage support. Returning current site section.",1),digitaldata.page.pageName)},a.setPreviousPageName=function(){"undefined"!=typeof Modernizr&&void 0!==Modernizr.localstorage&&i?digitaldata.page.pageName&&localStorage.setItem(l,digitaldata.page.pageName):e.notify("No Web Storage support.",1)},a.getPreviousPagenameNoVehicle=function(){return"undefined"!=typeof Modernizr&&void 0!==Modernizr.localstorage?localStorage.getItem(r)||"site entry":(e.notify("No Web Storage support. Returning current pageNameNoVehicle.",1),digitaldata.page.pageNameNoVehicle)},a.setPreviousPagenameNoVehicle=function(){"undefined"!=typeof Modernizr&&void 0!==Modernizr.localstorage&&i?digitaldata.page.pageNameNoVehicle&&localStorage.setItem(r,digitaldata.page.pageNameNoVehicle):e.notify("No Web Storage support.",1)},a.getPreviousHeirarchy=function(){return"undefined"!=typeof Modernizr&&void 0!==Modernizr.localstorage?localStorage.getItem(o)||"site entry":(e.notify("No Web Storage support. Returning current heirarchy.",1),digitaldata.page.heirarchy)},a.setPreviousHeirarchy=function(){"undefined"!=typeof Modernizr&&void 0!==Modernizr.localstorage&&i?digitaldata.page.siteSection&&localStorage.setItem(o,digitaldata.page.heirarchy):e.notify("No Web Storage support.",1)},a.getSite=function(){return fordAnalytics.dictionary.sites||{}},a.getSiteBusinessUnit=function(){return fordAnalytics.siteBusinessUnit||""},a.getTemplate=function(){return fordAnalytics.template||"unknown"},a.getTool=function(){return digitaldata.page.tool||""},a.setTool=function(e){digitaldata.page.tool=e},a.getToolDescriptor=function(){return digitaldata.page.toolDescriptor||""},a.setToolDescriptor=function(e){digitaldata.page.toolDescriptor=e},a.getVariantName=function(){return digitaldata&&digitaldata.page&&digitaldata.page.variantName||""},a.getVehicleCategory=function(){return fordAnalytics.vehicleCategory||""},a.getVehicleCategoryMappingByMarket=function(e){return fordAnalytics.dictionary.vehicleCategoryMappingByMarket[e]||{}},a.getVehicleNavCategory=function(){return"vehicleNavCategory"},a.getVehicleModel=function(){return digitaldata.vehicle.bodyModelTrim||""},a.getVehicleModelYear=function(){return digitaldata&&digitaldata.modelYear&&digitaldata.vehicle.modelYear||""},a.getVehicleNameplate=function(){return digitaldata&&digitaldata.vehicle&&digitaldata.vehicle.nameplate||""},a.getSiteSection=function(){return digitaldata.page&&digitaldata.page.siteSection?digitaldata.page.siteSection:""},a.getUserLanguage=function(){return fordAnalytics.userLanguage||""},a.getRadUIVersion=function(){return fordAnalytics.radUIVersion||""},a.getLoginStatus=function(){return fordAnalytics.user.loginStatus||""},a.getRegisteredStatus=function(){return fordAnalytics.user.registeredStatus||""},a.getFileName=function(e){return((e=e.substring(e.lastIndexOf("/")+1)).match(/[^.]+(\.[^?#]+)?/)||[])[0]},a.getParameterByName=function(e,t){t=t||window.location.href,e=e.replace(/[\[\]]/g,"\\$&");e=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return e?e[2]?decodeURIComponent(e[2].replace(/\+/g," ")):"":null},a}),define("analytics/loads/errorPagesLoad",["jquery","analytics/analyticsVariables"],function(e,t){var a={fillData:function(e){return function(){digitaldata.event.action="errorTracking",digitaldata.page.pageType="errorPage",digitaldata.page.pageNameNoVehicle="brand:error:"+e,digitaldata.page.errorTracking="site wide:"+t.getPreviousSiteSection(null)+":"+e}}};return a}),define("analytics/loads/internalCampaignPageLoad",["_","jquery","analytics/analyticsVariables"],function(E,i,e){var t={},n=e.getPage(),a=e.getSite(),o=e.getTemplate(),r=e.getVariantName(),l={accessories:["accessories","accesorios","acessorios"],brochures:["request-a-brochure","e-brochure"],"build-and-price":["build-and-price","build-your-ford","selecciona-un-vehiculo"],campaign:["sot","built-ford-tough","science-of-tough"],"compare-models":["compare-models"],features:["caracteristica","features"],featureList:["advanced-technologies","ambitious","big-on-space","capabilities","capability","capable","capacidad","clever-comforts","comfort","comodo","confidence","connection","control","convenience","desempeno","design","diseno","diseno-estilizado","drive-with-confidence","driving","durabilidad","durability","ecoboost","efficiency","engine","energized-ride","espacio-inteligente","experiencia-provocativa","green","handling","iconico","innovacion","innovation","inteligente","interior","legado","legendario","manejo","manejo-audaz","maximo-rendimiento","nuevo-diseno","nueva-tecnologia","performance","potencia","power","premium-fuel","productividad","productivity","proteccion-inteligente","quality","racingpackage","raza-fuerte","refinements","safety","security","sensacion-manejo","seguranca","seguridad","seguridad-y-desempeno","signature-edition","smart","smart-focus","sophistication","style","sustainability","technologia","tecnologia-que-va-contigo","technologia-vanguardia","tec-1","technology","tough","versatilidad","versatility"],gallery:["gallery","galeria","fotos"],lad:["distribuidores","locate-a-dealer","locate-dealer","localize-um-distribudor","concesionarios"],models:["models"],offers:["hot-deal","offer","promotion","sales","hot-deals"],showroom:["vehicles","todos","todos-os-veiculos","todos-los-vehiculos","all-vehicles"],technology:["engineering","technology","technologia","tecnologia"],"test-drive":["testdrive","test-drive","raptor-form-test"],vehicleCategories:["cars","carros","autos","trucks","performance","crossovers","suvs","commercial","mpvs","suvs-e-crossovers","caminhoes","camionetas","pickups","pick-ups","car","carro","auto","truck","crossover","suv","mpv","pickup","utilitarios","crossovers-suvs-4x4","camiones"]},s="brand-gallery",c="show",d="model",u="recently-viewed",p="io",m="td",h="bp",f="brochures",g="comp",v="similar-interest",y="lad",b="features",w="[a-z-0-9 ]+",C={accessories:new RegExp("("+l.vehicleCategories.join("|")+")/"+w+"/("+l.accessories.join("|")+")(/|.html)"),brochures:new RegExp("("+l.brochures.join("|")+")"),"build-and-price":new RegExp("("+l["build-and-price"].join("|")+")"),campaign:new RegExp("("+l.campaign.join("|")+")"),"compare-models":new RegExp("("+l.vehicleCategories.join("|")+")/"+w+"/("+l["compare-models"].join("|")+")(/|.html)"),features:new RegExp("("+l.vehicleCategories.join("|")+")/"+w+"/("+l.features.join("|")+"/)?("+l.featureList.join("|")+")"),gallery:new RegExp("("+l.vehicleCategories.join("|")+")/"+w+"/("+l.gallery.join("|")+")(/|.html)"),lad:new RegExp("("+l.lad.join("|")+")"),models:new RegExp("("+l.vehicleCategories.join("|")+")/"+w+"/("+l.models.join("|")+"/)"),offers:new RegExp("("+l.offers.join("|")+")"),showroom:new RegExp("("+l.showroom.join("|")+")(/|.html)"),technology:new RegExp("("+l.technology.join("|")+")"),"test-drive":new RegExp("("+l["test-drive"].join("|")+")"),vhp:new RegExp("(/)+("+l.vehicleCategories.join("|")+")+(/)+("+w+")+(/|.html)")},k=i("a:not(\".main-nav a, .footer a, .secondaryNavigation a, a[href*='fmccmp'], a[href*='intcmp'], a[data-analytics='nocampaigntag']\")");function S(e){e=(e=e||window.location.hostname).replace("www.","");return-1<Object.keys(a).indexOf(e)}function x(e){return/intcmp|fmccmp/g.test(e)}function D(e){var t=N(),e=A(e);return t!==e&&""!==e?"fmccmp":"intcmp"}function P(){return e.getPageNameplate()}function T(e){e=O(e).path.split("/").filter(Boolean);return 1<e.length&&-1<l.vehicleCategories.indexOf(e[0])?"ford "+e[1].replace("-"," ").replace(".html",""):""}function N(){var e=window.location.hostname.replace("www.","");return a[e]||""}function A(e){e=O(e).host.replace("www.","");return a[e]||""}function I(){return e.getPage()}function $(e){var e=O(e),t=O(i("a.logo").attr("href")),a=e.path;a.split("/").filter(Boolean);return e.host===t.host&&a===t.path?"hp":a.match(C["test-drive"])?m:a.match(C["build-and-price"])?h:a.match(C.lad)?y:a.match(C.brochures)?f:a.match(C.campaign)?"campaign":a.match(C.offers)?"offers":a.match(C["compare-models"])?g:a.match(C.models)?d:a.match(C.gallery)?"gallery":a.match(C.accessories)?"acc":a.match(C.features)?"features":a.match(C.technology)?"tech":a.match(C.vhp)?"vhp":a.match(C.showroom)?c:""}function L(e,t,a){var i=e.indexOf("#"),n=-1===i?"":e.substr(i),i=(e=-1===i?e:e.substr(0,i),new RegExp("([?&])"+t+"=.*?(&|$)","i")),o=-1!==e.indexOf("?")?"&":"?";return a?e=e.match(i)?e.replace(i,"$1"+t+"="+a+"$2"):e+o+t+"="+a:"?"===(e=e.replace(new RegExp("([&]?)"+t+"=.*?(&|$)","i"),"")).slice(-1)&&(e=e.slice(0,-1)),e+n}function M(e,t){t=t||window.location.href,e=e.replace(/[\[\]]/g,"\\$&");e=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return e?e[2]?decodeURIComponent(e[2].replace(/\+/g," ")):"":null}function O(e){var e={source:(o=document.createElement("a")).href=e,protocol:o.protocol.replace(":",""),host:o.hostname,port:o.port,query:o.search,params:(()=>{for(var e,t={},a=o.search.replace(/^\?/,"").split("&"),i=a.length,n=0;n<i;n++)a[n]&&(t[(e=a[n].split("="))[0]]=e[1]);return t})(),file:(o.pathname.match(/\/([^\/?#]+)$/i)||[,""])[1],hash:o.hash.replace("#",""),path:o.pathname.replace(/^([^\/])/,"/$1"),relative:(o.href.match(/tps?:\/\/[^\/]+(.+)/)||[,""])[1],segments:o.pathname.replace(/^\//,"").split("/")},o=null;return e}return t.swapInternalCampaignTemplate=function(){i("a[href*='intcmp='][href*='{template}'], a[href*='fmccmp='][href*='{template}'], a[href*='fmccmp='][href*='(template)'], a[href*='intcmp='][href*='(template)']").attr("href",function(){return this.href.replace(/({|\()template(\)|})/gi,o)})},t.appendShowroomLinks=function(){k.filter(function(){return this.href.match(C.showroom)}).attr("href",function(){if(!x(this.href))return L(this.href,D(this.href),n+"-"+o+"-"+c)})},t.appendBrandGalleryLinks=function(){i('.brandGallery a[data-analytics!="nocampaigntag"]').attr("href",function(){if(!x(this.href))return L(this.href,D(this.href),n+"-"+o+"-"+s)})},t.appendRecentlyViewedLinks=function(){i('recentlyViewed a[data-analytics!="nocampaigntag"]').attr("href",function(){if(!x(this.href))return L(this.href,D(this.href),n+"-"+o+"-"+u)})},t.appendModelDisplayLinks=function(){i('.modelsDisplay .carousel-slide a[data-analytics!="nocampaigntag"], .modelCompare .model-list a[data-analytics!="nocampaigntag"]').attr("href",function(){if(!x(this.href))return L(this.href,D(this.href),n+"-"+o+"-"+d)})},t.appendModelCompareLinks=function(){k.filter(function(){return this.href.match(C["compare-models"])}).attr("href",function(){if(!x(this.href))return L(this.href,D(this.href),n+"-"+o+"-"+g)})},t.appendAlsoLikeLinks=function(){i('.also-like .carousel-slide a[data-analytics!="nocampaigntag"]').attr("href",function(){if(!x(this.href))return L(this.href,D(this.href),n+"-"+o+"-"+v)})},t.appendBuildAndPriceLinks=function(){k.filter(function(){return this.href.match(C["build-and-price"])}).attr("href",function(){if(!x(this.href))return L(this.href,D(this.href),n+"-"+o+"-"+h)})},t.appendTestDriveLinks=function(){k.filter(function(){return this.href.match(C["test-drive"])}).attr("href",function(){if(!x(this.href))return L(this.href,D(this.href),n+"-"+o+"-"+m)})},t.appendBrochureLinks=function(){k.filter(function(){return this.href.match(C.brochures)}).attr("href",function(){if(!x(this.href))return L(this.href,D(this.href),n+"-"+o+"-"+f)})},t.appendIncentivesOffersBillboardLinks=function(){k.filter(function(){return this.href.match(C.offers)}).attr("href",function(){if(!x(this.href))return L(this.href,D(this.href),n+"-"+o+"-"+p)})},t.appendFeaturesLinks=function(){k.filter(function(){return this.href.match(C.features)}).attr("href",function(){if(!x(this.href))return L(this.href,D(this.href),n+"-"+o+"-"+b)})},t.appendBillboardLinks=function(){i('.billboardCarousel:first .carousel-slide a[data-analytics!="nocampaigntag"]').attr("href",function(){return t.generateBillboardLinkWithParam(this.href)})},t.generateBillboardLinkWithParam=function(e){var t;return x(e)?e:(t="bb-"+N()+"-"+I()+"-",""!==P()&&(t+=P()+"-"),t+=A(e)+"-"+$(e)+"-",""!==T(e)&&(t+=T(e)+"-"),t+=o,L(e,D(e),t))},t.appendFindDealerLinks=function(){k.filter(function(){return this.href.match(C.lad)}).attr("href",function(){if(!x(this.href))return L(this.href,D(this.href),n+"-"+o+"-"+y)})},t.appendGenericLink=function(e,t,a,i){if(i)return L(e,"fmccmp",""),L(e,"intcmp","");if(n&&!x(e)){i=$(e);if(i)return L(e,D(e),n+"-"+o+"-"+i)}if(t&&x(e)){i=M(D(e),e);if(i){t=i.spilt("-");if(a&&t[0]!==n)return L(e,D(e),"")}}return e},t.replaceHtmlInLinks=function(){i('a[href*=".html"]').prop("pathname",function(){if(this.pathname.endsWith(".html")&&S(this.hostname))return this.pathname.replace(".html","/")})},t.init=function(){var e=parseInt(M("analytics_testIntCmp"));1===e&&_analytics_createCookie("analytics_testIntCmp","1"),0===e&&_analytics_eraseCookie("analytics_testIntCmp"),t.swapInternalCampaignTemplate(),(S()||_analytics_readCookie("analytics_testIntCmp"))&&("home-load"==r?(t.appendBillboardLinks(),t.appendBrandGalleryLinks(),t.appendShowroomLinks(),t.appendModelDisplayLinks(),t.appendRecentlyViewedLinks(),t.appendIncentivesOffersBillboardLinks(),t.appendTestDriveLinks(),t.appendBuildAndPriceLinks(),t.appendBrochureLinks(),t.appendModelCompareLinks(),t.appendAlsoLikeLinks(),t.appendFeaturesLinks(),t.appendFindDealerLinks()):"vehicle-load"===r?(t.appendBillboardLinks(),t.appendModelDisplayLinks(),t.appendModelCompareLinks(),t.appendIncentivesOffersBillboardLinks(),t.appendTestDriveLinks(),t.appendBuildAndPriceLinks(),t.appendBrochureLinks(),t.appendAlsoLikeLinks(),t.appendFeaturesLinks(),t.appendFindDealerLinks()):I()&&(t.appendBillboardLinks(),t.appendIncentivesOffersBillboardLinks(),t.appendTestDriveLinks(),t.appendBuildAndPriceLinks(),t.appendBrochureLinks(),t.appendModelCompareLinks(),t.appendAlsoLikeLinks(),t.appendFeaturesLinks(),t.appendFindDealerLinks())),S()&&t.replaceHtmlInLinks()},t.getCampaignCode=D,t}),define("analytics/loads/unsupportedPageLoad",["jquery","analytics/analyticsVariables"],function(e,t){var a={fillData:function(){var e=t.getPreviousSiteSection();digitaldata.page.errorTracking="site wide:"+e+":unsupported browser",digitaldata.page.pageType="errorPage",digitaldata.page.pageNameNoVehicle="brand:error:unsupported browser",digitaldata.event=digitaldata.event||{},digitaldata.event.action="errorTracking"}};return a}),define("analytics/events/accessoriesEvents",["jquery","analytics/analyticsVariables","analytics/analyticsUtilities"],function(e,t,u){var a,p={},m=t.getCurrentCountry().toLowerCase(),h=t.getPageName(),f=t.getPageNameplate(),g=t.getPageModelYear(),v=t.getVehicleCategory(),y=t.getUserLanguage(),i=t.getRadUIVersion(),n=t.getLoginStatus(),o=t.getRegisteredStatus(),b=t.getSiteBusinessUnit(),w=t.getSiteSection(),C=(t.getPreviousHeirarchy(),t.getVariantName());function r(e){digitaldata.onclick.onclickLinkName=e,digitaldata.onclick.onclick=e,u.track("global-onclick")}function l(e,t,a,i,n,o,r,l,s){digitaldata.page.pageName=i,digitaldata.page.siteSection=e,digitaldata.page.hierarchy=t,digitaldata.page.userLanguage=a,digitaldata.page.pageNameNoVehicle=i,digitaldata.page.client=n,digitaldata.page.site=o,digitaldata.page.nameplate=r,digitaldata.vehicle.nameplate=r,digitaldata.vehicle.modelYear=l,digitaldata.user.loginStatus=p.setLoggedStatus(),digitaldata.user.registeredStatus=p.setRegisteredStatus(),digitaldata.page.radUIVersion=p.setRadUIVersion(),digitaldata.page.variantName=s,u.trackAndReset("global-overlay")}return p.setModelSelected=function(e){e=e.toLowerCase(),a="ford "+e},p.searchClick=function(){r("vehicle:accessories:search button")},p.filterClick=function(){r("vehicle:accessories:filter click")},p.searchDealerOverlay=function(){void 0===a&&"accessories-load"===C&&"vehicle"===w?l(""+w,`vehicle:accessories:${g}:${v}:`+f,""+y,"vehicle:accessories:search dealer","ford-"+m,""+b,""+f,""+g,""+C):0<a?.length&&"accessories-load"===C&&"accessories"===w&&l(""+w,"vehicle:accessories:"+a,""+y,"vehicle:accessories:search dealer","ford-"+m,""+b,""+a,"",""+C)},p.selectDealerOverlay=function(){void 0===a&&"accessories-load"===C&&"vehicle"===w?l(""+w,`vehicle:accessories:${g}:${v}:`+f,""+y,"vehicle:accessories:select dealer","ford-"+m,""+b,""+f,""+g,""+C):0<a?.length&&"accessories-load"===C&&"accessories"===w&&l(""+w,"vehicle:accessories:"+a,""+y,"vehicle:accessories:select dealer","ford-"+m,""+b,""+a,"",""+C)},p.accessoriesTileClick=function(){r("vehicle:accessories:select accessory")},p.vehicleAccessoryOverlay=function(e){var t,a,i,n,o,r,l,s,c,d;0<f?.length&&"accessories-load"===C&&"vehicle"===w&&(t=h+":accessory popup",a=""+w,i=`vehicle:accessories:${g}:${v}:`+f,n=""+y,o="vehicle:accessories:accessory popup",r="ford-"+m,l=""+b,s=""+f,c=""+g,e=""+e,d=""+C,digitaldata.page.pageName=t,digitaldata.page.siteSection=a,digitaldata.page.hierarchy=i,digitaldata.page.userLanguage=n,digitaldata.page.pageNameNoVehicle=o,digitaldata.page.client=r,digitaldata.page.site=l,digitaldata.vehicle.nameplate=s,digitaldata.vehicle.modelYear=c,digitaldata.user.loginStatus=p.setLoggedStatus(),digitaldata.user.registeredStatus=p.setRegisteredStatus(),digitaldata.page.radUIVersion=p.setRadUIVersion(),digitaldata.vehicle.accessoriesPicked=e,digitaldata.page.variantName=d,u.trackAndUpdate("vehicleaccessory-overlay"))},p.setRadUIVersion=function(){return i||""},p.setLoggedStatus=function(){return n||"logged out"},p.setRegisteredStatus=function(){return o||""},p}),define("analytics/events/accordionEvents",["jquery","analytics/analyticsUtilities","analytics/analyticsVariables"],function(e,n,a){var t={},i=a.getCurrentCountry(),o=a.getPageNameplate(),r=a.getVariantName(),l=a.getPageName(),s=a.getPageNamePrefix(),c=a.getSiteBusinessUnit();function d(e,t,a,i){digitaldata.onclick.onclickLinkName=e,digitaldata.onclick.onclick=t,i?n.trackAndReset(a):n.track(a)}return t.trackExpandAccordion=function(e){var t=e.trim().toLowerCase();digitaldata.onclick.contentType=a.getPage()+":"+a.getTemplate()+":features accordion",digitaldata.onclick.contentSubType=e.trim(),-1<c.indexOf("ford-brand")&&("gallery-load"===r?d("vehicle:gallery:content:action:"+o,"gallery content:more expand","gallery-onclick",!1):"vehicle-load"===r?d("vehicle:content:action:"+o,"vhp content:more expand","vhp-onclick",!1):"home-load"===r?d("home:content:action:"+o,"hp content:more expand","hp-onclick",!1):"model-details-load"===r?d("vehicle:models:detail:content action:"+o,"models content:detail:more expand","models-accordion-onclick",!1):"model-compare-load"===r?d("vehicle:compare:content action:"+o,"models content:compare:more expand","models-accordion-onclick",!1):"help:contact us"===l&&d("home:content:action:"+o,"hp content:more expand","global-onclick",!1)),"ford-credit"===c&&("fc-financing-load"===r&&d(s+":finance options:landing:expand:"+t,"finance options:landing:expand:"+t,"finance-onclick",!1),l.includes("finance options:buy lease tool:start")&&d(s+":finance options:buy lease tool:result:expand","finance options:buy lease tool:result:expand","finance-onclick",!1),l.includes("support:credit faq"))&&(t=e.substring(e.indexOf(".")+1).trim().toLowerCase(),d(s+":support:credit:faq:accordion:"+t,"support:credit:faq:accordion:"+t,"support-question-onclick",!1)),"ford-owner"===c&&("flmo:portal:service:faq"===l&&d("flmo:portal:service:faq:accordion expand","portal:service:faq:accordion expand:"+t,"accordion-onclick",!1),"flmo:portal:vehicle support:faq"===l&&d("flmo:portal:vehicle support:faq:accordion expand:"+t,"portal:vehicle support:faq:accordion expand:"+t,"ford-faq-onclick",!1),"flmo:portal:vehicle support:userguide"===l&&d("flmo:portal:vehicle support:userguide:accordian expand:"+t,"portal:vehicle support:userguide:accordian expand:"+t,"ford-faq-onclick",!1),("flmo:portal:warranty:faq"===l||"Australia"===i&&-1<l.indexOf("flmo:portal:warranty:about:"))&&d("flmo:portal:warranty:faq:accordian expand:"+t,"portal:warranty:faq:accordion expand:"+t,"faq-accordion-onclick",!1),"flmo:portal:service:happy pocket"===l&&d("flmo:portal:service:happy pocket:accordian expand:"+t,"portal:service:happy pocket:accordian expand:"+t,"accordion-onclick",!1),"Taiwan"===i?"flmo:portal:vehicle support:car maintenance"===l&&d("flmo:portal:vehicle support:car maintenance:cta","portal:vehicle support:car maintenance:accordion expand:"+t,"ford-faq-onclick",!1):"Philippines"===i&&("flmo:portal:warranty:premium extended"===l?d("flmo:portal:warranty:premium extended:accordian expand","portal:warranty:premium extended:accordian expand:"+t,"faq-accordion-onclick",!1):"flmo:portal:service:roadside assistance"===l&&d("flmo:portal:service:roadside assistance:cta","portal:service:roadside assistance:accordian expand:"+t,"accordion-onclick"))),n.resetDatalayer()},t}),define("analytics/events/brightcoveVideoEvents",["jquery","marketConfigGlobal","analytics/analyticsUtilities","analytics/analyticsVariables"],function(e,t,n,a){var i,o={},r=a.getSiteBusinessUnit(),l=t.GLOBAL_MARKET_CONF.marketCode,s=(null!=l&&(l=l.toLowerCase()),e("#startingPrice"+fordAnalytics.nameplateCode+" #startingPrice"+fordAnalytics.nameplateCode).text().trim().split(" ").pop()||e(".txt-billboard .txt-price").text().trim().split(" ").pop()),c=fordAnalytics.nameplate||"null";function d(e){return Math.round(1e3*e.position)}function u(e,t,a,i){digitaldata.onclick.onclickLinkName=e,digitaldata.onclick.onclick=t,i?n.trackAndReset(a):n.track(a)}return i={records:[{namplate:"null",code:null},{namplate:"ford fiesta hatch",code:"FAD"},{namplate:"ford focus",code:null},{namplate:"ford mustang",code:"MPA"},{namplate:"ford fiesta sedan",code:"BFA"},{namplate:"ford ka",code:"KHC"},{namplate:"ford ka sedan",code:"KFA"},{namplate:"ford new fiesta hatch",code:"FAD"},{namplate:"ford new fiesta sedan",code:"BFA"},{namplate:"ford focus hatch",code:"CHC"},{namplate:"ford focus fastback",code:"CFA"},{namplate:"ford fusion",code:"FFB"},{namplate:"ford fusion hybrid",code:"FFB"},{namplate:"ford ecosport",code:"BUA"},{namplate:"ford edge",code:"EMA"},{namplate:"ford ranger",code:"7BC"}].filter(function(e){return-1<c.indexOf(e.namplate)})},e(window).on("load",function(){fordAnalytics.nameplate&&"br"===l&&(digitaldata.vehicle.contentId=i.records&&i.records[0]&&i.records[0].code,digitaldata.vehicle.price=s)}),e(window).on("onoverlayload",function(){setTimeout(function(){e("div.vjs-big-play-button").click(function(){"br"==l&&u("video:scroll","video:scroll:"+location,"video-onclick",!1)})},500)}),fordAnalyticsActions.videos={},o.trackVideoScroll=function(e){"ford-brand"===r&&u("video:scroll","video:scroll:"+e,"video-onclick",!0)},o.trackVideoStart=function(e){digitaldata.video.videoName=fordAnalytics.videoName,digitaldata.video.segmentTime=d(e),fordAnalyticsActions.videos[fordAnalytics.videoName]={0:1,25:0,50:0,75:0,100:0},digitaldata.event.action="video start",r.startsWith("ford-brand")||"ford-owner"===r?n.track("video-segment-0"):"ford-credit"===r&&(digitaldata.video.videoTrack="video",n.track("video-start")),n.resetDatalayer()},o.trackVideoEnd=function(e){fordAnalyticsActions.videos[fordAnalytics.videoName][100]||(fordAnalyticsActions.videos[fordAnalytics.videoName][100]=1,digitaldata.video.videoName=fordAnalytics.videoName,digitaldata.video.segmentTime=d(e),digitaldata.event.action="video complete",r.startsWith("ford-brand")||"ford-owner"===r?n.track("video-segment-100"):"ford-credit"===r&&n.track("video-complete"),n.resetDatalayer())},o.triggerVideoTracking=function(e,t){digitaldata.video.segmentTime=e,digitaldata.event.action=t+"% complete",n.track("video-segment-"+t)},o.trackVideoProgress=function(e,t){var a,t=void 0!==e.type?(a=d(e),e.media.length):(a=t,e.mediainfo.duration),e=5*Math.round(a/t*100/5);[25,50,75].includes(e)&&(digitaldata.video.videoName=fordAnalytics.videoName,digitaldata.video.segmentTime=a,"ford-credit"===r&&(digitaldata.video.videoTrack="video"),fordAnalyticsActions.videos[fordAnalytics.videoName][e]||(fordAnalyticsActions.videos[fordAnalytics.videoName][e]=1,digitaldata.event.action=e+"% complete",25==e||75==e?o.triggerVideoTracking(a,e):50==e&&(digitaldata.vehicle.nameplate=fordAnalytics.nameplate,o.triggerVideoTracking(a,e))),n.resetDatalayer())},o.disposeVideo=function(){fordAnalyticsActions.videos[fordAnalytics.videoName]&&(delete fordAnalyticsActions.videos[fordAnalytics.videoName],delete fordAnalytics.videoName)},o}),define("analytics/events/buildAndPriceBuildEvents",["jquery","analytics/analyticsUtilities","analytics/analyticsVariables"],function(e,i,t){var a={},n=t.getCurrentCountry(),o=t.getVehicleNameplate(),r=t.getPageNamePrefix(),l=(t.getSiteBusinessUnit(),t.getVariantName(),{}),s="";return a.load=function(e,t,a,i){""==n||"Mexico"!=n||null!=t&&""!=t||("undefined"!=typeof bnpNameplateKey&&null!==bnpNameplateKey&&(t=bnpNameplateKey),"undefined"!=typeof bnpNameplateCategory&&null!==bnpNameplateCategory&&(e=bnpNameplateCategory),"undefined"!=typeof bnpNameplateYear&&null!==bnpNameplateYear&&(a=bnpNameplateYear));a=encodeURIComponent(JSON.stringify({nameplate:t,modelYear:a,category:e}));_analytics_createCookie("aa."+t.toLowerCase(),a,7)},a.price=function(){l.price||(l.price=!0,"fcla"!==r?(digitaldata.onclick.onclickLinkName="bp:build:price:"+o,digitaldata.onclick.onclick="bp:build:price content:net price",s!==digitaldata.onclick.onclick&&(i.trackAndReset("bp-onclick"),s=JSON.parse(JSON.stringify(digitaldata.onclick.onclick)))):(digitaldata.onclick.onclickLinkName="bp:build vehicle:content:action:"+o,digitaldata.onclick.onclick="bp:build vehicle:content:price overlay",s!==digitaldata.onclick.onclick&&(i.trackAndReset("global-onclick"),s=JSON.parse(JSON.stringify(digitaldata.onclick.onclick)))))},a.gallery=function(e,t){"fcla"!==r?(digitaldata.onclick.onclickLinkName="bp:build:gallery:"+o,digitaldata.onclick.onclick="bp:build:gallery:"+e+":"+t,s!==digitaldata.onclick.onclick&&(i.trackAndReset("bp-onclick"),s=JSON.parse(JSON.stringify(digitaldata.onclick.onclick)))):"expand"===t&&(digitaldata.onclick.onclickLinkName="bp:build vehicle:content:action:"+o,digitaldata.onclick.onclick="bp:build vehicle:content:view full screen",s!==digitaldata.onclick.onclick)&&(i.trackAndReset("global-onclick"),s=JSON.parse(JSON.stringify(digitaldata.onclick.onclick)))},a.menu=function(e,t,a){"fcla"!==r?(digitaldata.onclick.onclickLinkName="bp:build:menu:"+o,digitaldata.onclick.onclick="bp:build:content menu:"+e,t&&(digitaldata.onclick.onclick+=":"+t),a&&(digitaldata.onclick.onclick+=":"+a),digitaldata.onclick.onclick=digitaldata.onclick.onclick.toLowerCase(),s!==digitaldata.onclick.onclick&&(i.trackAndReset("bp-onclick"),s=JSON.parse(JSON.stringify(digitaldata.onclick.onclick)))):(digitaldata.onclick.onclickLinkName="bp:build vehicle:content:action:"+o,digitaldata.onclick.onclick="bp:build vehicle:content:","info"===e&&(digitaldata.onclick.onclick="bp:build vehicle:content:specs",s!==digitaldata.onclick.onclick)&&(i.track("global-onclick"),s=JSON.parse(JSON.stringify(digitaldata.onclick.onclick))),"Color & Trim"===e&&(digitaldata.onclick.onclick+="colorizer",t&&(digitaldata.onclick.onclick+="exterior"===t?":ext":"interior"===t?":int":":"+t),a&&(digitaldata.onclick.onclick+=":"+a),digitaldata.onclick.onclick=digitaldata.onclick.onclick.toLowerCase(),s!==digitaldata.onclick.onclick)&&(i.track("global-onclick"),s=JSON.parse(JSON.stringify(digitaldata.onclick.onclick))),i.resetDatalayer())},a}),define("analytics/events/buildAndPriceFDSEvents",["jquery","analytics/analyticsUtilities","analytics/analyticsVariables"],function(e,o,t){var r={},l=t.getCurrentCountry(),a=(t.getPageNameplate(),t.getVehicleNameplate()),i=t.getVehicleCategory(),n=t.getVehicleModelYear(),s=t.getUserLanguage(),c=t.getRadUIVersion(),d=t.getLoginStatus(),u=t.getRegisteredStatus(),p=(t.getPageNamePrefix(),t.getSiteBusinessUnit(),t.getVariantName(),"build and price");return r.load=function(e,t,a,i,n){prevDigitaldata=JSON.parse(JSON.stringify(digitaldata)),r.setMainVehicleDataToAnalytics(e,t,a,i,n),r.saveCookie()},r.setMainVehicleDataToAnalytics=function(e,t,a,i,n){!l&&e&&r.setCountryToAnalytics(e),r.setNameplateToAnalytics(t),a&&r.setCategoryToAnalytics(a),i&&r.setModelYearToAnalytics(i),!s&&n&&r.setUserLanguageToAnalytics(n)},r.saveCookie=function(){var e={country:l,...a?{nameplate:a}:{},...n?{modelYear:n}:{},...i?{category:i}:{},...s?{userLanguage:s}:{},...c?{radUIVersion:c}:{},...d?{loginStatus:d}:{},...u?{registeredStatus:u}:{}},e=encodeURIComponent(JSON.stringify(e));_analytics_createCookie("bnp.fds."+a.toLowerCase(),e,7)},r.cookieExist=function(e){return!!JSON.parse(decodeURIComponent(_analytics_readCookie("bnp.fds."+e.toLowerCase())))},r.deleteCookie=function(e){JSON.parse(decodeURIComponent(_analytics_readCookie("bnp.fds."+e.toLowerCase())))&&_analytics_eraseCookie("bnp.fds."+e.toLowerCase())},r.updateCookie=function(e,t,a){r.getNameplateFromSessionStorage();var i="bnp.fds."+e.toLowerCase();JSON.parse(decodeURIComponent(_analytics_readCookie(i)))&&_analytics_eraseCookie(i),r.setMainVehicleDataToAnalytics(null,e,t,a,null),r.saveCookie()},r.replaceValues=function(e,t,a,i,n){return null!=t&&""!==t&&(e=e.replace("{nameplate}",t)),null!=a&&""!==a&&(e=e.replace("{model}",a)),null!=i&&""!==i&&(e=e.replace("{category}",i)),e=null!=n&&""!==n?e.replace("{subcategory}",n):e},r.setCountryToAnalytics=function(e){e&&"nocountry"!==e?(fordAnalytics.country=e,l=e):console.log(">> value received is invalid {country}")},r.setNameplateToAnalytics=function(e){e?(digitaldata.page.nameplate=e,a=e):console.log(">> value received is invalid {nameplate}")},r.setCategoryToAnalytics=function(e){e?(fordAnalytics.vehicleCategory=e,i=i||e):console.log(">> value received is invalid {category}")},r.setModelYearToAnalytics=function(e){e?(digitaldata.page.modelYear=e,n=e):console.log(">> value received is invalid {nameplate}")},r.setUserLanguageToAnalytics=function(e){e?(digitaldata.page.userLanguage=e,fordAnalytics.userLanguage=e,s=e):console.log(">> value received is invalid {userLanguage}")},r.getNameplateFromSessionStorage=()=>{var e=r.getDataModelFromSessionStorage();return e&&e.nameplate||{}},r.getModelYearFromSessionStorage=()=>{var e=r.getDataModelFromSessionStorage();return e&&e.year||""},r.getVehicleCategoryFromLocalStorage=()=>{var e=r.getDataModelFromSessionStorage();return e&&e.vehicleCategory||""},r.getAnalyticsStandardNameFromSessionStorage=()=>{var e=r.getDataModelFromSessionStorage();return e&&e.analyticsStandardName||""},r.getDigitalDataNameplateIfExists=e=>""!==r.getAnalyticsStandardNameFromSessionStorage()?r.getAnalyticsStandardNameFromSessionStorage():"ford "+e,r.getIdModelFromLocalStorage=()=>{var e=r.getDataModelFromSessionStorage();return e&&(e.model[0]||e.model[0].idModel)?e.model[0].idModel||{}:""},r.getDataModelFromSessionStorage=()=>{var e=sessionStorage.getItem("buildAndPriceDataModel");if(!e)return null;try{return JSON.parse(e)}catch(e){return null}},r.modelSelect=function(){var e=r.getNameplateFromSessionStorage(),e=JSON.parse(decodeURIComponent(_analytics_readCookie("bnp.fds."+e.toLowerCase())));e&&(digitaldata.page.pageName="build:model select:"+r.getDigitalDataNameplateIfExists(e.nameplate),digitaldata.page.siteSection=p,digitaldata.page.hierarchy="shopping tools:bp:"+r.getDigitalDataNameplateIfExists(e.nameplate),digitaldata.page.pageNameNoVehicle="bp:model select",digitaldata.page.tool="event:bp start",digitaldata.page.toolDescriptor="bp start:fds",digitaldata.page.client="ford-"+e.country,digitaldata.page.site="ford-brand",digitaldata.page.nameplate=r.getDigitalDataNameplateIfExists(e.nameplate),digitaldata.page.modelYear=e.modelYear,o.track("bp-fds-start-load"))},r.driveSelect=function(){var e=r.getNameplateFromSessionStorage(),t=r.getIdModelFromLocalStorage(),e=JSON.parse(decodeURIComponent(_analytics_readCookie("bnp.fds."+e.toLowerCase())));e&&(digitaldata.page.pageName="bp:3:drive select:"+r.getDigitalDataNameplateIfExists(e.nameplate),digitaldata.page.siteSection=p,digitaldata.page.hierarchy="shopping tools:bp:"+r.getDigitalDataNameplateIfExists(e.nameplate),digitaldata.page.pageNameNoVehicle="bp:drive select",digitaldata.page.tool="event:bp start",digitaldata.page.toolDescriptor="bp start:fds",digitaldata.page.client="ford-"+e.country,digitaldata.page.site="ford-brand",digitaldata.page.nameplate=r.getDigitalDataNameplateIfExists(e.nameplate),digitaldata.vehicle.bodyModelTrim=t,digitaldata.page.modelYear=e.modelYear,o.track("bp-fds-build-drive-load"))},r.colorSelect=function(e,t){var a=r.getNameplateFromSessionStorage(),i=r.getIdModelFromLocalStorage(),a=JSON.parse(decodeURIComponent(_analytics_readCookie("bnp.fds."+a.toLowerCase())));if(a&&e){switch(t){case"colorButton":digitaldata.onclick.onclick="bp:content:action:colour:"+e;break;case"carousel":digitaldata.onclick.onclick="bp:content:action:carousel";break;case"fullscreenButton":digitaldata.onclick.onclick="bp:content:action:full screen";break;default:digitaldata.onclick.onclick="bp:content:action:colour:"+e}digitaldata.page.pageName="bp:4:colour select:"+r.getDigitalDataNameplateIfExists(a.nameplate),digitaldata.page.siteSection=p,digitaldata.page.hierarchy="shopping tools:bp:"+r.getDigitalDataNameplateIfExists(a.nameplate),digitaldata.page.pageNameNoVehicle="bp:colour select",digitaldata.page.client="ford-"+a.country,digitaldata.page.site="ford-brand",digitaldata.page.nameplate=r.getDigitalDataNameplateIfExists(a.nameplate),digitaldata.vehicle.bodyModelTrim=i,digitaldata.page.modelYear=a.modelYear,digitaldata.vehicle.extIntColorCode=e,o.track("bp-fds-build-color-load")}},r.accessoriesSelect=function(e,t){var a=r.getNameplateFromSessionStorage(),i=r.getIdModelFromLocalStorage(),a=JSON.parse(decodeURIComponent(_analytics_readCookie("bnp.fds."+a.toLowerCase())));if(a&&e){switch(t){case"add":digitaldata.onclick.onclick="bp:content:action:accessories:add";break;case"remove":digitaldata.onclick.onclick="bp:content:action:accessories:remove";break;case"carousel":digitaldata.onclick.onclick="bp:content:action:carousel";break;default:digitaldata.onclick.onclick="bp:content:action:accessories:"+t}digitaldata.page.pageName="bp:5: accessories select:"+r.getDigitalDataNameplateIfExists(a.nameplate),digitaldata.page.siteSection=p,digitaldata.page.hierarchy="shopping tools:bp:"+r.getDigitalDataNameplateIfExists(a.nameplate),digitaldata.page.pageNameNoVehicle="bp:accessories select ",digitaldata.page.client="ford-"+a.country,digitaldata.page.site="ford-brand",digitaldata.page.nameplate=r.getDigitalDataNameplateIfExists(a.nameplate),digitaldata.vehicle.bodyModelTrim=i,digitaldata.page.modelYear=a.modelYear,digitaldata.vehicle.extIntColorCode=e,o.track("bp-fds-build-accessories-load")}},r.vehicleSummary=function(e,t,a){var i=r.getNameplateFromSessionStorage(),n=r.getIdModelFromLocalStorage(),i=JSON.parse(decodeURIComponent(_analytics_readCookie("bnp.fds."+i.toLowerCase())));i&&e&&(digitaldata.page.pageName="bp:summary:"+r.getDigitalDataNameplateIfExists(i.nameplate),digitaldata.page.siteSection=p,digitaldata.page.hierarchy="shopping tools:bp:"+r.getDigitalDataNameplateIfExists(i.nameplate),digitaldata.page.pageNameNoVehicle="bp:summary vehicle",digitaldata.page.client="ford-"+i.country,digitaldata.page.site="ford-brand",digitaldata.page.nameplate=r.getDigitalDataNameplateIfExists(i.nameplate),digitaldata.vehicle.bodyModelTrim=n,digitaldata.page.modelYear=i.modelYear,digitaldata.vehicle.extIntColorCode=e,digitaldata.vehicle.accessoriesPicked=t,digitaldata.vehicle.price=a,digitaldata.page.tool="event:bp finish",digitaldata.page.toolDescriptor="bp finisht:fds",digitaldata.event.action="Event2 B&P: Finished",o.track("bp-fds.complete-load"))},r.formInteraction=function(e){"submit"===e?(digitaldata.page.pageName="bp:vrfq;thank you:ford "+r.getDigitalDataNameplateIfExists(a),o.track("request-quote-complete")):(digitaldata.page.pageName="bp:vrfq:ford"+r.getDigitalDataNameplateIfExists(a),o.track("request-quote-start"))},r}),define("analytics/events/buildAndPriceMotionEvents",["jquery","analytics/analyticsUtilities","analytics/analyticsVariables"],function(e,s,t){var c={},o=t.getCurrentCountry(),r=(t.getPageNameplate(),t.getVehicleNameplate()),l=t.getVehicleCategory(),a=t.getVehicleModelYear(),d=t.getUserLanguage(),i=t.getRadUIVersion(),n=t.getLoginStatus(),u=t.getRegisteredStatus(),p=(t.getPageNamePrefix(),t.getSiteBusinessUnit(),t.getVariantName(),"{nameplate}"),m="{category}",h="{subcategory}",f="{accordion_name}",g="{start_build}",v=["wheels","tires","mirrors","seats"],y=["exteriorOptions","interiorOptions"],b=["equipmentGroups","packagesOptions"],w=["engine","drive","axles","transmission"];return c.load=function(e,t,a,i,n){prevDigitaldata=JSON.parse(JSON.stringify(digitaldata)),null!=o&&""!==o&&console.log(">> current country from analytics variables: "+o),null!=r&&""!==r&&console.log(">> nameplate from analytics variables: "+r),null!=l&&""!==l&&console.log(">> vehicle category from analytics variables: "+l),c.setMainVehicleDataToAnalytics(e,t,a,i,n),c.saveCookie()},c.onClickSave=function(e){var t=c.getNameplateFromSessionStorage(),a=JSON.parse(decodeURIComponent(_analytics_readCookie("bnp.motion."+t.toLowerCase())));a?(digitaldata.onclick.onclickLinkName=c.replaceValues("fv:fbc:save:content:action:{nameplate}",t,null,null,null),digitaldata.vehicle.modelYear=a.modelYear,digitaldata.vehicle.nameplate=t,digitaldata.onclick.onclick=((e,t)=>{var a="";switch(t){case"delete":a=c.replaceActionValue(e,t);break;case"update":a=c.replaceActionValue(e,"update existing");break;case"save":a=c.replaceActionValue(e,"save as new");break;case"continue":a=c.replaceActionValue(e,"continue without saving");break;case"cancel":a=c.replaceActionValue(e,t);break;default:a.replaceActionValue(C5,"save as new")}return a})("fbc:save:{action}",e),s.track("global-onclick")):console.log(">> error getting cookie val")},c.onClickChangeVehicle=function(){var e=c.getNameplateFromSessionStorage(),t=c.getVehicleCategoryFromLocalStorage(),a=c.getModelYearFromSessionStorage(),a=(c.updateCookie(e,a,t),JSON.parse(decodeURIComponent(_analytics_readCookie("bnp.motion."+e.toLowerCase()))));a?(digitaldata.onclick.onclickLinkName=c.replaceValues("fv:fbc:change vehicle:{nameplate}",e,null,null,null),digitaldata.vehicle.modelYear=a.modelYear,digitaldata.vehicle.nameplate=a.nameplate,digitaldata.onclick.onclick="fbc:change vehicle",s.track("global-onclick")):console.log(">> error getting cookie val")},c.onClickChangeDealer=function(){var e=c.getNameplateFromSessionStorage(),t=JSON.parse(decodeURIComponent(_analytics_readCookie("bnp.motion."+e.toLowerCase())));t?(digitaldata.onclick.onclickLinkName=c.replaceValues("fv:fbc:change dealer:{nameplate}",e,null,null,null),digitaldata.vehicle.modelYear=t.modelYear,digitaldata.vehicle.nameplate=t.nameplate,digitaldata.onclick.onclick="fbc:change dealer",s.track("global-onclick")):console.log(">> error getting cookie val")},c.onClickModelCustomize=function(){var e,t=c.getNameplateFromSessionStorage(),a=JSON.parse(decodeURIComponent(_analytics_readCookie("bnp.motion."+t.toLowerCase())));a?(e=`fbc:model:customize:content:{door:{''}|cab size:{''}|drive:{${(e=c.getSelectedFeaturesForDigitalData().powertrain).drive[0].featureName}|${h}:{''}|show all| clear all| clear last session|clear all selection|engine:{${e.engine[0].featureName} }`,digitaldata.onclick.onclickLinkName=c.replaceValues("fv:fbc:model:customize:content:action:{nameplate}",t,null,null,null),digitaldata.vehicle.modelYear=a.modelYear,digitaldata.vehicle.nameplate=a.nameplate,digitaldata.onclick.onclick=e,s.track("global-onclick")):console.log(">> error getting cookie val")},c.onClickVehicleDetails=function(t,a){var i=c.getNameplateFromSessionStorage(),n=JSON.parse(decodeURIComponent(_analytics_readCookie("bnp.motion."+i.toLowerCase())));if(n){var o=`fbc:vehicle details:content:{accordion click:${f} | start build:${g}}`;digitaldata.onclick.onclickLinkName=c.replaceValues("fv:fbc:vehicle details:content:action:{nameplate}",i,null,null,null),digitaldata.vehicle.modelYear=n.modelYear,digitaldata.vehicle.nameplate=n.nameplate;let e=o.replace(f,t);e=e.replace(g,a),digitaldata.onclick.onclick=o,s.track("global-onclick")}else console.log(">> error getting cookie val")},c.onClickFullScreen=function(t,a,i){var n=c.getModelFromLocalStorage(),o=c.getNameplateFromSessionStorage(),r=c.getSelectedFeaturesForDigitalData(),o=JSON.parse(decodeURIComponent(_analytics_readCookie("bnp.motion."+o.toLowerCase())));if(o){var l=c.getDealerForDigitalData();let e=`fbc: ${m} + ':content:{full screen | {' ${h} }:{''} | change enviorment |door:{''} |roof:{''}|360}|accordion:' + ${f} + '|eyeball:{''}|net price}'`;digitaldata.onclick.onclickLinkName=c.replaceValues("fv:fbc:{category}:content:action:{nameplate}",o.nameplate,null,t,null),digitaldata.vehicle.modelYear=o.modelYear,digitaldata.vehicle.client="ford-"+o.country,digitaldata.vehicle.site="ford-brand",digitaldata.vehicle.nameplate=o.nameplate,e=(e=c.replaceValues(e,o.nameplate,null,t,a)).replace(f,i),digitaldata.onclick.onclick=e,c.c2SetCommonDigitalData(o.nameplate,n,r,l),s.track("bp-config-onclick")}},c.onClickPhotoAccordion=function(t,a){var i=c.getModelFromLocalStorage(),n=c.getSelectedFeaturesForDigitalData(),o=c.getNameplateFromSessionStorage(),o=JSON.parse(decodeURIComponent(_analytics_readCookie("bnp.motion."+o.toLowerCase())));if(o){var r=c.getDealerForDigitalData();let e=`fbc:equipment:vehicle features:content:{photo click| accordion click:${f} | {${h}:{''}}`;digitaldata.onclick.onclickLinkName=c.replaceValues("fv:fbc:equipment:vehicle features:content:action:{nameplate}",o.nameplate,null,null,null),digitaldata.vehicle.modelYear=o.modelYear,digitaldata.vehicle.client="ford-"+o.country,digitaldata.vehicle.site="ford-brand",digitaldata.vehicle.nameplate=o.nameplate,e=(e=c.replaceValues(e,o.nameplate,null,null,a)).replace(f,t),digitaldata.onclick.onclick=e,c.c2SetCommonDigitalData(o.nameplate,i,n,r),s.track("bp-config-onclick")}},c.onExpandDetails=function(t){var a=c.getNameplateFromSessionStorage(),a=JSON.parse(decodeURIComponent(_analytics_readCookie("bnp.motion."+a.toLowerCase()))),i=c.getModelFromLocalStorage();if(a){var n=c.getSelectedFeaturesForDigitalData(),o=c.getDealerForDigitalData();let e=`fbc:vehicle summary:content:{full screen | ${h}:{''}| save|zipcode|print |reserve|door:{''}|roof:{''}|{reserve now:{''}:{continue| cancel}|360|how ordering works|{review order:{''} |net price}`;digitaldata.onclick.onclickLinkName=c.replaceValues("fv:fbc:vehicle summary:content:action:{nameplate}",a.nameplate,null,null,null),digitaldata.vehicle.modelYear=a.modelYear,digitaldata.vehicle.client="ford-"+a.country,digitaldata.vehicle.site="ford-brand",digitaldata.vehicle.nameplate=a.nameplate,e=e.replace(h,t),digitaldata.onclick.onclick=e,c.c2SetCommonDigitalData(a.nameplate,i,n,"",o),s.track("bp-config-onclick")}},c.vehicleDetails=function(){var e,t=c.getModelFromLocalStorage(),a=c.getNameplateFromSessionStorage(),i=c.getSelectedFeaturesForDigitalData(),a=JSON.parse(decodeURIComponent(_analytics_readCookie("bnp.motion."+a.toLowerCase())));a&&(e=c.getDealerForDigitalData(),digitaldata.page.pageName=c.replaceValues("fv:fbc:vehicle details:{nameplate}",a.nameplate,null,null,null),digitaldata.page.siteSection="bp",digitaldata.page.hierarchy=c.replaceValues("shopping tools:build-price:{vehicleCategory}:{nameplate}",a.nameplate,null,a.category,null),digitaldata.page.userLanguage=a.userLanguage,digitaldata.page.pageNameNoVehicle="fv:fbc:vehicle details",c.setRadUIVersion(),digitaldata.onclick.onclickLinkName="",digitaldata.vehicle.modelYear=a.modelYear,digitaldata.vehicle.client="ford-"+a.country,digitaldata.vehicle.site="ford-brand",digitaldata.vehicle.nameplate=a.nameplate,digitaldata.onclick.onclick="",c.c2SetCommonDigitalData(a.nameplate,t,i,"",e),digitaldata.user.errorTracking="",s.track("bp-config-build"))},c.vehicleFeaturesOverlay=function(){var e,t=c.getModelFromLocalStorage(),a=c.getSelectedFeaturesForDigitalData(),i=c.getNameplateFromSessionStorage(),i=JSON.parse(decodeURIComponent(_analytics_readCookie("bnp.motion."+i.toLowerCase())));i&&(e=c.getDealerForDigitalData(),digitaldata.page.pageName=c.replaceValues("fv:fbc:fast or full:{nameplate}",i.nameplate,null,null,null),digitaldata.page.siteSection="bp",digitaldata.page.hierarchy=c.replaceValues("shopping tools:build-price:{vehicleCategory}:{nameplate}",i.nameplate,null,i.category,null),digitaldata.page.userLanguage=i.userLanguage,digitaldata.page.pageNameNoVehicle="fv:fbc:equipment:vehicle features",c.setRadUIVersion(),digitaldata.onclick.onclickLinkName="",digitaldata.vehicle.modelYear=i.modelYear,digitaldata.vehicle.client="ford-"+i.country,digitaldata.vehicle.site="ford-brand",digitaldata.vehicle.nameplate=i.nameplate,digitaldata.onclick.onclick="",c.c2SetCommonDigitalData(i.nameplate,t,a,"",e),digitaldata.user.errorTracking="",s.track("bp-config-build"))},c.customizeYourModel=function(){c.getModelFromLocalStorage();var e,t=c.getNameplateFromSessionStorage(),t=JSON.parse(decodeURIComponent(_analytics_readCookie("bnp.motion."+t.toLowerCase())));t&&(e=c.getDealerForDigitalData(),digitaldata.page.pageName=c.replaceValues("fv:fbc:model:customize:{nameplate}",t.nameplate,null,null,null),digitaldata.page.siteSection="bp",digitaldata.page.hierarchy=c.replaceValues("shopping tools:build-price:{vehicleCategory}:{nameplate}",t.nameplate,null,t.category,null),digitaldata.page.userLanguage=t.userLanguage,digitaldata.page.pageNameNoVehicle="fv:fbc:model:customize",digitaldata.page.tool="",digitaldata.page.toolDescriptor="{bp start:{customize | adventure:{adventureType}}| pop builds:{buildType}}} |{bp:{customize | adventure:{adventureType}|  pop builds:{buildType}}|bp start:oreo",c.setRadUIVersion(),digitaldata.onclick.onclickLinkName="",digitaldata.vehicle.modelYear=t.modelYear,digitaldata.vehicle.client="ford-"+t.country,digitaldata.vehicle.site="ford-brand",digitaldata.vehicle.nameplate=t.nameplate,digitaldata.onclick.onclick="",digitaldata.user.paCode=e.dealerCode,digitaldata.user.fordRegion=e.dealerRegion,digitaldata.user.fdafCode="",c.setLoggedStatus(),c.setRegisteredStatus(),digitaldata.event.action="bp start |tool",s.track("bp-config-start"))},c.getUpdatesStartOverlay=function(){var e,t=c.getModelFromLocalStorage(),a=c.getNameplateFromSessionStorage(),a=JSON.parse(decodeURIComponent(_analytics_readCookie("bnp.motion."+a.toLowerCase())));a&&(e=c.getDealerForDigitalData(),digitaldata.page.pageName="",digitaldata.page.siteSection="bp",digitaldata.page.hierarchy="",digitaldata.page.userLanguage=a.userLanguage,digitaldata.page.pageNameNoVehicle="",c.setRadUIVersion(),digitaldata.vehicle.modelYear=a.modelYear,digitaldata.vehicle.nameplate=a.nameplate,digitaldata.vehicle.bodyModelTrim=t,digitaldata.user.paCode=e.dealerCode,digitaldata.user.fordRegion=e.dealerRegion,digitaldata.user.fdafCode="",c.setLoggedStatus(),s.track("get-updates-start"))},c.getUpdatesFinishForm=function(){var e=c.getModelFromLocalStorage(),t=c.getNameplateFromSessionStorage(),t=JSON.parse(decodeURIComponent(_analytics_readCookie("bnp.motion."+t.toLowerCase())));t&&(digitaldata.page.pageName="",digitaldata.page.siteSection="bp",digitaldata.page.hierarchy="",digitaldata.page.userLanguage=t.userLanguage,digitaldata.page.pageNameNoVehicle="",digitaldata.page.tool="",digitaldata.page.toolDescriptor="",c.setRadUIVersion(),digitaldata.page.variantName="",digitaldata.vehicle.modelYear=t.modelYear,digitaldata.vehicle.nameplate=t.nameplate,digitaldata.vehicle.bodyModelTrim=e,digitaldata.user.leadOptIn="",digitaldata.user.leadType="",c.setLoggedStatus(),digitaldata.event.action="lead submitted|updates opt-in|tool",s.track("get-updates"))},c.download=function(){var e=c.getNameplateFromSessionStorage(),e=JSON.parse(decodeURIComponent(_analytics_readCookie("bnp.motion."+e.toLowerCase())));e&&(digitaldata.onclick.onclickLinkName="",digitaldata.onclick.onclick="",digitaldata.vehicle.modelYear=e.modelYear,digitaldata.vehicle.nameplate=e.nameplate,s.track("global-download"))},c.customOrderStart=function(){var e=c.getNameplateFromSessionStorage(),e=JSON.parse(decodeURIComponent(_analytics_readCookie("bnp.motion."+e.toLowerCase())));e&&(digitaldata.page.pageName="",digitaldata.page.siteSection="bp",digitaldata.page.hierarchy="",digitaldata.page.userLanguage=e.userLanguage,digitaldata.page.pageNameNoVehicle="",c.setRadUIVersion(),digitaldata.vehicle.modelYear=e.modelYear,digitaldata.vehicle.nameplate=e.nameplate,digitaldata.onclick.onclick="",s.track("bp-custom-start"))},c.customOrderComplete=function(){var e=c.getModelFromLocalStorage(),t=c.getSelectedFeaturesForDigitalData(),a=c.getNameplateFromSessionStorage(),a=JSON.parse(decodeURIComponent(_analytics_readCookie("bnp.motion."+a.toLowerCase())));a&&(digitaldata.page.pageName="",digitaldata.page.siteSection="bp",digitaldata.page.hierarchy="",digitaldata.page.userLanguage=a.userLanguage,digitaldata.page.pageNameNoVehicle="",digitaldata.page.tool="",digitaldata.page.toolDescriptor="",c.setRadUIVersion(),digitaldata.vehicle.modelYear=a.modelYear,digitaldata.vehicle.nameplate=a.nameplate,digitaldata.vehicle.bodyModelTrim=e,c.setColorsToDigitalData(t),c.setFeaturesToDigitalData(t,"v20",v),c.setFeaturesToDigitalData(t,"v21",y),c.setFeaturesToDigitalData(t,"v23",b),c.setFeaturesToDigitalData(t,"v24",w),digitaldata.vehicle.price="",digitaldata.user.cksVisitID="",digitaldata.user.leadOptIn="",digitaldata.user.leadType="",digitaldata.onclick.onclick="",digitaldata.event.action="lead submitted|vehicle quote|tool|updates opt-in",s.track("bp-custom-complete"))},c.c2SetCommonDigitalData=function(e,t,a,i){digitaldata.vehicle.bodyModelTrim=t,c.setColorsToDigitalData(a),c.setFeaturesToDigitalData(a,"v20",v),c.setFeaturesToDigitalData(a,"v21",y),c.setFeaturesToDigitalData(a,"v23",b),c.setFeaturesToDigitalData(a,"v24",w),digitaldata.vehicle.price="",digitaldata.user.paCode=i.dealerCode,digitaldata.user.fordRegion=i.dealerRegion,digitaldata.user.fdafCode="",c.setLoggedStatus(),c.setRegisteredStatus()},c.saveCookie=function(){var e={country:o,...r?{nameplate:r}:{},...a?{modelYear:a}:{},...l?{category:l}:{},...d?{userLanguage:d}:{},...i?{radUIVersion:i}:{},...n?{loginStatus:n}:{},...u?{registeredStatus:u}:{}},e=encodeURIComponent(JSON.stringify(e));_analytics_createCookie("bnp.motion."+r.toLowerCase(),e,7)},c.cookieExist=function(e){return!!JSON.parse(decodeURIComponent(_analytics_readCookie("bnp.motion."+e.toLowerCase())))},c.deleteCookie=function(e){JSON.parse(decodeURIComponent(_analytics_readCookie("bnp.motion."+e.toLowerCase())))&&_analytics_eraseCookie("bnp.motion."+e.toLowerCase())},c.updateCookie=function(e,t,a){var i=c.getNameplateFromSessionStorage();JSON.parse(decodeURIComponent(_analytics_readCookie("bnp.motion."+e.toLowerCase())))&&_analytics_eraseCookie("bnp.motion."+i.toLowerCase()),c.setMainVehicleDataToAnalytics(null,e,t,a,null),c.saveCookie()},c.replaceValues=function(e,t,a,i,n){return null!=t&&""!==t&&(e=e.replace(p,t)),null!=a&&""!==a&&(e=e.replace("{model}",a)),null!=i&&""!==i&&(e=e.replace(m,i)),e=null!=n&&""!==n?e.replace(h,n):e},c.replaceActionValue=function(e,t){return e=null!=t&&""!==t?e.replace("{action}",t):e},c.setMainVehicleDataToAnalytics=function(e,t,a,i,n){!o&&e&&c.setCountryToAnalytics(e),c.setNameplateToAnalytics(t),a?c.setCategoryToAnalytics(a):console.log(">> no valid vehicle category received"),i?c.setModelYearToAnalytics(i):console.log(">> no valid year received"),!d&&n&&c.setUserLanguageToAnalytcis(n)},c.setCountryToAnalytics=function(e){e&&"nocountry"!==e?(fordAnalytics.country=e,o=e):console.log(">> value received is invalid {country}")},c.setNameplateToAnalytics=function(e){e?(digitaldata.page.nameplate=e,r=e):console.log(">> value received is invalid {nameplate}")},c.setModelYearToAnalytics=function(e){e?(digitaldata.page.modelYear=e,a=e):console.log(">> value received is invalid {nameplate}")},c.setUserLanguageToAnalytcis=function(e){e?(digitaldata.page.userLanguage=e,fordAnalytics.userLanguage=e,d=e):console.log(">> value received is invalid {userLanguage}")},c.setCategoryToAnalytics=function(e){e?(fordAnalytics.vehicleCategory=e,l=l||e):console.log(">> value received is invalid {category}")},c.setColorsToDigitalData=function(i){if(i){let e,t,a=(i.colorTrim&&(e=i.colorTrim),i.interior&&Array.isArray(i.interior.color)&&0<i.interior.color.length&&(t=i.interior.color[0]),"");e&&e.featureName&&(a+=e.featureName),t&&t.featureName&&(a?a+=":"+t.featureName:a=t.featureName),digitaldata.vehicle.extIntColorCode=a}},c.setFeaturesToDigitalData=function(t,e,a){let i=[];a.forEach(function(e){e=t.exterior[e]||t.interior[e]||t.powertrain[e]||t.packages[e];Array.isArray(e)&&0<e.length&&e.forEach(function(e){e&&e.featureName&&i.push(e.featureName)})});var n=i.join(":");switch(e){case"v20":digitaldata.vehicle.accessoriesPicked=n;break;case"v21":digitaldata.vehicle.optionsPicked=n;break;case"v23":digitaldata.vehicle.optionsPkgsPicked=n;break;case"v24":digitaldata.vehicle.engineTrans=n}},c.getNameplateFromSessionStorage=()=>{var e=JSON.parse(sessionStorage.getItem("buildAndPriceDataModel"));return e?e.nameplate:{}},c.getSelectedFeaturesForDigitalData=()=>{var e=JSON.parse(sessionStorage.getItem("buildAndPriceDataModel"));return e?{colorTrim:e.color,powertrain:e.powertrain,exterior:e.exterior,interior:e.interior,packages:e.packages}:{}},c.getDealerForDigitalData=()=>{var e=JSON.parse(sessionStorage.getItem("buildAndPriceDataModel"));return e?{dealerCode:e.dealerSearchObject.dealer,dealerRegion:e.dealerSearchObject.search}:{}},c.getModelYearFromSessionStorage=()=>JSON.parse(sessionStorage.getItem("buildAndPriceDataModel")).year,c.getVehicleCategoryFromLocalStorage=()=>JSON.parse(sessionStorage.getItem("buildAndPriceDataModel")).vehicleCategory,c.getModelFromLocalStorage=()=>{var e=JSON.parse(sessionStorage.getItem("buildAndPriceDataModel")).model[0].idModel;return e||{}},c.setRadUIVersion=function(){digitaldata.user.radUIVersion=i||""},c.setLoggedStatus=function(){digitaldata.user.loginStatus=n||"logged out"},c.setRegisteredStatus=function(){digitaldata.user.registeredStatus=u||""},c}),define("analytics/events/buildAndPriceReviewEvents",["jquery","analytics/analyticsUtilities","analytics/analyticsVariables"],function(e,a,i){var t={},n=(i.getCurrentCountry(),i.getPageNamePrefix(),i.getSiteBusinessUnit(),i.getVariantName(),i.getVehicleCategory()),o=i.getPageNameplate();return t.load=function(e,t,a,i,n,o,r,l,s,c){a=encodeURIComponent(JSON.stringify({nameplate:t,modelYear:a,category:e}));_analytics_createCookie("aa."+t.toLowerCase(),a,7)},t.contentAction=function(e,t){digitaldata.onclick.onclickLinkName="bp:vehicle summary:content action:"+o,digitaldata.onclick.onclick="bp:vehicle:content summary:"+e,t&&(digitaldata.onclick.onclick+=":"+t),digitaldata.onclick.contentType="bp:"+i.getTemplate()+":click",a.trackAndReset("bp-content-onclick")},t.quoteFormLoad=function(){fordAnalytics.formStart="bp-request-a-qoute",digitaldata.page.pageNameNoVehicle="bp:vrfq",digitaldata.page.pageName=digitaldata.page.pageNameNoVehicle+":"+o,digitaldata.page.siteSection="get quote",digitaldata.page.hierarchy="shopping tools:get quote:"+n+":"+o,digitaldata.page.variantName="bp-vrfq-start",digitaldata.page.tool="",digitaldata.page.toolDescriptor="",digitaldata.event.action="",a.trackAndReset("bp-overlay")},t.pdfDownload=function(){digitaldata.onclick.onclickLinkName="bp:vehicle summary:pdf download:"+o,digitaldata.onclick.onclick="bp:vehicle:summary:pdf download",a.trackAndReset("download")},t}),define("analytics/events/buildAndPriceSelectLocationEvents",["jquery","analytics/analyticsUtilities","analytics/analyticsVariables","marketConfigGlobal"],function(e,t,a,i){fordAnalytics.nameplate==digitaldata.page.pageName||void 0===i.GLOBAL_MARKET_CONF.marketCode||"mx"!==i.GLOBAL_MARKET_CONF.marketCode.toLowerCase()||-1==digitaldata.page.pageName.toLowerCase().indexOf("hybrid")&&-1==digitaldata.page.pageName.toLowerCase().indexOf("hibrid")||(digitaldata.page.pageName=digitaldata.page.pageNameNoVehicle+":"+fordAnalytics.nameplate);return e(window).on("buildpriceLocation",function(e){digitaldata.page.pageName="bp:select location",digitaldata.page.siteSection="bp",digitaldata.page.hierarchy="shopping tools:build-price",digitaldata.page.pageNameNoVehicle="bp:select location",digitaldata.page.site="ford-brand",t.trackAndReset("global-overlay")}),{}}),define("analytics/events/buildAndPriceSelectVehicleEvents",["jquery","analytics/analyticsUtilities","analytics/analyticsVariables"],function(e,t,a){var i={},n=(a.getPageNamePrefix(),a.getSiteBusinessUnit(),a.getVariantName(),{});return i.trackFilter=function(e){n[e]||(n[e]=!0,digitaldata.onclick.onclickLinkName="bp:select vehicle:content:action",digitaldata.onclick.onclick="bp:select vehicle:content:filter:"+e,t.trackAndReset("bp-onclick"))},i.trackSelectedVehicle=function(e){var t;e&&(t={nameplate:e.code,modelYear:e.nameplateYear,category:e.category},t=encodeURIComponent(JSON.stringify(t)),_analytics_createCookie("aa."+e.code.toLowerCase(),t,7))},i}),define("analytics/events/buildPriceRefreshEvents",["jquery","analytics/analyticsUtilities","analytics/analyticsVariables","marketConfigGlobal"],function(e,n,t,a){var c=a.getCurrentMarketCode(),i={};function d(e){var t="",e=((e,t,a,i)=>{for(var n={version:"0.0.1"},y=(e=e||[],n.gramSizeLower=a||2,n.gramSizeUpper=i||3,n.useLevenshtein="boolean"!=typeof t||t,n.exactSet={},n.matchDict={},n.items={},function(e,t){if(null===e&&null===t)throw"Trying to compare two null values";var a;return null===e||null===t?0:(a=((e,t)=>{for(var a,i,n=[],o=0;o<=t.length;o++)for(var r=0;r<=e.length;r++)i=o&&r?e.charAt(r-1)===t.charAt(o-1)?a:Math.min(n[r],n[r-1],a)+1:o+r,a=n[r],n[r]=i;return n.pop()})(e=String(e),t=String(t)),e.length>t.length?1-a/e.length:1-a/t.length)}),r=/[^a-zA-Z0-9\u00C0-\u00FF, ]+/,b=function(e,t){for(var a={},i=((e,t)=>{t=t||2;var a="-"+e.toLowerCase().replace(r,"")+"-",i=t-a.length,n=[];if(0<i)for(var o=0;o<i;++o)e+="-";for(o=0;o<a.length-t+1;++o)n.push(a.slice(o,o+t));return n})(e,t=t||2),n=0;n<i.length;++n)i[n]in a?a[i[n]]+=1:a[i[n]]=1;return a},o=(n.get=function(e,t){e=this._get(e);return e||void 0===t?e:t},n._get=function(e){var t=this._normalizeStr(e),t=this.exactSet[t];if(t)return[[1,t]];for(var a,i=this.gramSizeUpper;i>=this.gramSizeLower;--i)if(a=this.__get(e,i))return a;return null},n.__get=function(e,t){var a,i,n,o,r=this._normalizeStr(e),l={},s=b(r,t),c=this.items[t],d=0;for(a in s)if(i=s[a],d+=Math.pow(i,2),a in this.matchDict)for(v=0;v<this.matchDict[a].length;++v)n=this.matchDict[a][v][0],o=this.matchDict[a][v][1],n in l?l[n]+=i*o:l[n]=i*o;if((e=>{for(var t in e)if(e.hasOwnProperty(t))return;return 1})(l))return null;var u,p=Math.sqrt(d),m=[];for(u in l)m.push([l[u]/(p*c[u][0]),c[u][1]]);function h(e,t){return e[0]<t[0]?1:e[0]>t[0]?-1:0}if(m.sort(h),this.useLevenshtein){for(var f=[],g=Math.min(50,m.length),v=0;v<g;++v)f.push([y(m[v][1],r),m[v][1]]);(m=f).sort(h)}for(f=[],v=0;v<m.length;++v)m[v][0]==m[0][0]&&f.push([m[v][0],this.exactSet[m[v][1]]]);return f},n.add=function(e){if(this._normalizeStr(e)in this.exactSet)return!1;for(var t=this.gramSizeLower;t<this.gramSizeUpper+1;++t)this._add(e,t)},n._add=function(e,t){var a,i,n=this._normalizeStr(e),o=this.items[t]||[],r=o.length,l=(o.push(0),b(n,t)),s=0;for(a in l)i=l[a],s+=Math.pow(i,2),a in this.matchDict?this.matchDict[a].push([r,i]):this.matchDict[a]=[[r,i]];var c=Math.sqrt(s);o[r]=[c,n],this.items[t]=o,this.exactSet[n]=e},n._normalizeStr=function(e){if("[object String]"!==Object.prototype.toString.call(e))throw"Must use a string as argument to FuzzySet functions";return e.toLowerCase()},n.length=function(){var e,t=0;for(e in this.exactSet)this.exactSet.hasOwnProperty(e)&&(t+=1);return t},n.isEmpty=function(){for(var e in this.exactSet)if(this.exactSet.hasOwnProperty(e))return!1;return!0},n.values=function(){var e,t=[];for(e in this.exactSet)this.exactSet.hasOwnProperty(e)&&t.push(this.exactSet[e]);return t},n.gramSizeLower);o<n.gramSizeUpper+1;++o)n.items[o]=[];for(o=0;o<e.length;++o)n.add(e[o]);return n})(Object.keys(fordAnalytics.dictionary.vehicles)).get(e);return t=null!==e&&0<e.length&&.4<e[0][0]&&(e=e[0][1],t=fordAnalytics&&fordAnalytics.country&&"Mexico"==fordAnalytics.country?"ford "+i.getNameplateKeyForAnalytics(e):fordAnalytics&&fordAnalytics.country&&"Thailand"==fordAnalytics.country?"all new everest"==e?"ford everest":"fx4 max 2021"==e?"ford ranger fx4-max":"ford "+e:"ford "+e,fordAnalytics.country)&&(e=fordAnalytics.country,-1<["Australia","India","Vietnam","Philippines","Thailand","Mexico","South Africa"].indexOf(e))?("Mexico"==e?t.replace(/_c_mex|_mex|\d{4}_|_\d{4}|\d{4}/gi,""):"South Africa"==e?t.replace(/new|\d{4}_|_\d{4}|\d{4}/gi,""):t.replace(/\d{4}_|_\d{4}|\d{4}/gi,"")).trim():t}function u(e,t,a,i){digitaldata.onclick.onclickLinkName=e,digitaldata.onclick.onclick=t,i?n.trackAndReset(a):n.track(a)}return i.trackChangeZip=function(e){e=d(e);u("bp:change zip:"+(digitaldata.vehicle.nameplate=e),"bp:change zip","global-onclick",!0)},i.trackBnPstartLoad=function(){"za"==c?(digitaldata.page.pageName="bp:select vehicle",digitaldata.page.pageNameNoVehicle="bp:select vehicle"):(digitaldata.page.pageName="bp:1:select vehicle",digitaldata.page.pageNameNoVehicle="bp:1:select vehicle"),digitaldata.page.siteSection="bp",digitaldata.page.hierarchy="shopping tools:build-price",digitaldata.page.variantName="bp-build-load",n.trackAndReset("bp-build-load")},i.trackFilterVehicle=function(e){u("bp:select vehicle:content:action","bp:select vehicle:content:filter:"+e,"global-onclick",!0)},i.trackSelectLocationPage=function(){digitaldata.page.pageName="bp:zip code",digitaldata.page.siteSection="bp",digitaldata.page.hierarchy="shopping tools:build-price",n.trackAndReset("global-overlay")},i.trackModelSeriesEvar18=function(e,t,a){"nodata"==t?digitaldata.vehicle.bodyModelTrim=a:(e=d(e),digitaldata.vehicle.bodyModelTrim=e+":"+t+":"+a)},i.trackUsageType=function(e){digitaldata.page.pageName="bp:select vehicle:usage type:submit",digitaldata.page.siteSection="bp",digitaldata.page.hierarchy="shopping tools:build-price",u("bp:select vehicle:usage type:submit","bp:select vehicle:"+e,digitaldata.page.variantName="bp-vehicle-type",!1)},i.trackSelectModelPage=function(e,t=""){e=d(e);"za"==c?(digitaldata.page.hierarchy="shopping tools:build-price:"+t+":"+e,digitaldata.page.toolDescriptor="bp start"):(digitaldata.page.hierarchy="shopping tools:build-price",digitaldata.page.toolDescriptor="bp start: gux"),digitaldata.page.siteSection="bp",digitaldata.page.pageName="bp:model select:"+e,digitaldata.page.pageNameNoVehicle="bp:model select",digitaldata.page.variantName="bp-start-load",digitaldata.page.nameplate=e,digitaldata.page.tool="event: bp start",digitaldata.event.action="bp start|tool",n.trackAndReset("bp-start-load")},i.trackSelectModelContentAction=function(e){u("bp:model select:content action","bp:model select:content action:"+e,"global-onclick",!0)},i.trackBnPConfiguratorLoad=function(e,t,a,i,n=""){var o=analyticsGetParameterByName("m")?analyticsGetParameterByName("m").toLowerCase():"",a=d(a);"drive"==t?"za"==c?(digitaldata.page.siteSection="bp",digitaldata.page.hierarchy="shopping tools:build-price:"+e+":"+a,digitaldata.page.pageName="bp:engine:"+a,digitaldata.page.pageNameNoVehicle="bp:engine",digitaldata.vehicle.bodyModelTrim=a+":"+n+":"+o,digitaldata.page.variantName="build-load",digitaldata.page.nameplate=a,digitaldata.page.modelYear=i,u(digitaldata.page.pageName,"build-load","build-load",!1)):(digitaldata.page.siteSection="bp",digitaldata.page.hierarchy="shopping tools:build-price:"+e+":"+a,digitaldata.page.pageName="bp:2:engine:"+a,digitaldata.page.pageNameNoVehicle="bp:2:engine",digitaldata.page.variantName="bp-build-load",digitaldata.page.nameplate=a,digitaldata.page.modelYear=i,digitaldata.page.tool="event: bp start",digitaldata.page.toolDescriptor="bp start: gux",u(digitaldata.page.pageName,"bp-build-load","bp-build-load",!1)):"exterior"==t?"za"==c?(digitaldata.page.siteSection="bp",digitaldata.page.hierarchy="shopping tools:build-price:"+e+":"+a,digitaldata.page.pageName="bp:exterior:"+a,digitaldata.page.pageNameNoVehicle="bp:exterior",digitaldata.vehicle.bodyModelTrim=a+":"+n+":"+o,digitaldata.page.variantName="build-load",digitaldata.page.nameplate=a,digitaldata.page.modelYear=i,u(digitaldata.page.pageName,"build-load","build-load",!1)):(digitaldata.page.siteSection="bp",digitaldata.page.hierarchy="shopping tools:build-price:"+e+":"+a,digitaldata.page.pageName="bp:3:exterior:"+a,digitaldata.page.pageNameNoVehicle="bp:3:exterior",digitaldata.page.variantName="bp-build-load",digitaldata.page.nameplate=a,digitaldata.page.modelYear=i,digitaldata.page.tool="event: bp start",digitaldata.page.toolDescriptor="bp start: gux",u(digitaldata.page.pageName,"bp-build-load","bp-build-load",!1)):"interior"==t?"za"==c?(digitaldata.page.siteSection="bp",digitaldata.page.hierarchy="shopping tools:build-price:"+e+":"+a,digitaldata.page.pageName="bp:interior:"+a,digitaldata.page.pageNameNoVehicle="bp:interior",digitaldata.vehicle.bodyModelTrim=a+":"+n+":"+o,digitaldata.page.variantName="build-load",digitaldata.page.nameplate=a,digitaldata.page.modelYear=i,u(digitaldata.page.pageName,"build-load","build-load",!1)):(digitaldata.page.siteSection="bp",digitaldata.page.hierarchy="shopping tools:build-price:"+e+":"+a,digitaldata.page.pageName="bp:4:interior:"+a,digitaldata.page.pageNameNoVehicle="bp:4:interior",digitaldata.page.variantName="bp-build-load",digitaldata.page.nameplate=a,digitaldata.page.modelYear=i,digitaldata.page.tool="event: bp start",digitaldata.page.toolDescriptor="bp start: gux",u(digitaldata.page.pageName,"bp-build-load","bp-build-load",!1)):"utilitySafety"==t?"za"==c?(digitaldata.page.siteSection="bp",digitaldata.page.hierarchy="shopping tools:build-price:"+e+":"+a,digitaldata.page.pageName="bp:safety and security:"+a,digitaldata.page.pageNameNoVehicle="bp:safety and security",digitaldata.vehicle.bodyModelTrim=a+":"+n+":"+o,digitaldata.page.variantName="build-load",digitaldata.page.nameplate=a,digitaldata.page.modelYear=i,u(digitaldata.page.pageName,"build-load","build-load",!1)):(digitaldata.page.siteSection="bp",digitaldata.page.hierarchy="shopping tools:build-price:"+e+":"+a,digitaldata.page.pageName="bp:5:safety and security:"+a,digitaldata.page.pageNameNoVehicle="bp:5:safety and security",digitaldata.page.variantName="bp-build-load",digitaldata.page.nameplate=a,digitaldata.page.modelYear=i,digitaldata.page.tool="event: bp start",digitaldata.page.toolDescriptor="bp start: gux",u(digitaldata.page.pageName,"bp-build-load","bp-build-load",!1)):"optionPackage"==t&&("za"==c?(digitaldata.page.siteSection="bp",digitaldata.page.hierarchy="shopping tools:build-price:"+e+":"+a,digitaldata.page.pageName="bp:option packages:"+a,digitaldata.page.pageNameNoVehicle="bp:option packages",digitaldata.vehicle.bodyModelTrim=a+":"+n+":"+o,digitaldata.page.variantName="build-load",digitaldata.page.nameplate=a,digitaldata.page.modelYear=i,u(digitaldata.page.pageName,"build-load","build-load",!1)):(digitaldata.page.siteSection="bp",digitaldata.page.hierarchy="shopping tools:build-price:"+e+":"+a,digitaldata.page.pageName="bp:option packages:"+a,digitaldata.page.pageNameNoVehicle="bp:option packages",digitaldata.page.variantName="bp-build-load",digitaldata.page.nameplate=a,digitaldata.page.modelYear=i,digitaldata.page.tool="event: bp start",digitaldata.page.toolDescriptor="bp start: gux",u(digitaldata.page.pageName,"bp-build-load","bp-build-load",!1)))},i.trackBnPConfiguratorContentAction=function(e,t,a){e=d(e);"za"==c?"drive"==t?u("bp:cta:engine:"+e,"bp content:engine","global-onclick",!0):"exterior"==t?u("bp:cta:colorizer:"+e,"bp content:colorizer","global-onclick",!0):"interior"==t?u("bp:cta:features:"+e,"bp content:interior","global-onclick",!0):"utilitySafety"==t?u("bp:cta:component:"+e,"bp content:safety and security","global-onclick",!0):"optionPackage"==t&&u("bp:cta:component:"+e,"bp content:option packages","global-onclick",!0):"drive"==t?u("bp:engine:content action:"+e,"bp:engine:content action:"+a,"global-onclick",!0):"exterior"==t?u("bp:exterior:content action:"+e,"bp:exterior:content action:"+a,"global-onclick",!0):"interior"==t?u("bp:interior:content action:"+e,"bp:interior:content action:"+a,"global-onclick",!0):"utilitySafety"==t?u("bp:safety and security:content action:"+e,"bp:safety and security:content action:"+a,"global-onclick",!0):"optionPackage"==t&&u("bp:option packages:content action:"+e,"bp:option packages:content action:"+a,"global-onclick",!0)},i.trackBnPConfiguratorAccesoriesSelection=function(e,t,a){e=d(e);"za"==c?"drive"==t?u("bp:cta:engine:"+e,"bp content:engine","global-onclick",!0):"exterior"==t?u("bp:cta:colorizer:"+e,"bp content:colorizer","global-onclick",!0):"interior"==t?u("bp:cta:features:"+e,"bp content:interior","global-onclick",!0):"utilitySafety"==t?u("bp:cta:component:"+e,"bp content:safety and security","global-onclick",!0):"optionPackage"==t&&u("bp:cta:component:"+e,"bp content:option packages","global-onclick",!0):"drive"==t?u("bp:engine:content action:"+e,"bp:engine:content action:accessories:"+a,"global-onclick",!0):"exterior"==t?u("bp:exterior:content action:"+e,"bp:exterior:content action:accessories:"+a,"global-onclick",!0):"interior"==t?u("bp:interior:content action:"+e,"bp:interior:content action:accessories:"+a,"global-onclick",!0):"utilitySafety"==t?u("bp:safety and security:content action:"+e,"bp:safety and security:content action:accessories:"+a,"global-onclick",!0):"optionPackage"==t&&u("bp:option packages:content action:"+e,"bp:option packages:content action:option packages"+a,"global-onclick",!0)},i.trackBnPConfiguratorCompleteLoad=function(e,t,a=""){var t=d(t),i=analyticsGetParameterByName("m")?analyticsGetParameterByName("m").toLowerCase():"",n=analyticsGetParameterByName("d")?analyticsGetParameterByName("d").toLowerCase():"",o=analyticsGetParameterByName("p")?analyticsGetParameterByName("p"):"",r=analyticsGetParameterByName("e")?analyticsGetParameterByName("e"):"",l=(analyticsGetParameterByName("t")&&analyticsGetParameterByName("t"),analyticsGetParameterByName("y")?analyticsGetParameterByName("y"):""),s=[];["ae","ai","ao","au","as","am"].forEach(function(e){e=analyticsGetParameterByName(e);e&&(s=s.concat(e.split(",")))}),"za"==c?(digitaldata.page.pageName="bp:summary:"+t,digitaldata.page.pageNameNoVehicle="bp:summary",digitaldata.vehicle.bodyModelTrim=t+":"+a+":"+i):(digitaldata.page.pageName="bp:6:summary:"+t,digitaldata.page.pageNameNoVehicle="bp:6:summary"),digitaldata.page.siteSection="bp",digitaldata.page.hierarchy="shopping tools:build-price:"+e+":"+t,digitaldata.page.nameplate=t,digitaldata.page.modelYear=l,digitaldata.vehicle.extIntColorCode=r.toLowerCase(),digitaldata.vehicle.accessoriesPicked=0<s.length?s.join(",").toLowerCase():"",digitaldata.vehicle.vehicleOptionsPicked=i,digitaldata.vehicle.optionsPkgsPicked=i,digitaldata.vehicle.engineTrans=n,digitaldata.vehicle.price=o,digitaldata.page.tool="event:bp finished",digitaldata.page.toolDescriptor="bp finish",digitaldata.page.variantName="bp-complete-load",digitaldata.event.action="bp finish|tool",u(digitaldata.page.pageName,"bp-complete-load","bp-complete-load",!0)},i.trackSummaryPageContentAction=function(e,t){u("bp:summary:content action:"+d(e),"bp:summary:content action:"+t,"global-onclick",!0)},i.trackSummaryPageStartSave=function(e){u("bp:save:start:"+d(e),"save:start","global-onclick",!0)},i.trackSummaryPageSaveComplete=function(e){u("bp:save:complete:"+d(e),"save:complete","global-onclick",!0)},i}),define("analytics/events/carouselEvents",["jquery","analytics/analyticsUtilities","analytics/analyticsVariables"],function(a,n,e){var t={},i={},o=e.getCurrentCountry(),r=e.getPageNameplate(),l=e.getPage(),s=e.getPageName(),c=e.getPageNamePrefix(),d=e.getSiteBusinessUnit(),u=e.getTemplate(),p=e.getVariantName();function m(e,t,a,i){digitaldata.onclick.onclickLinkName=e,digitaldata.onclick.onclick=t,i?n.trackAndReset(a):n.track(a)}return i.clicks=i.clicks||{},t.trackMediaCarouselItemContent=function(){a(".mediaCarouselItem-content .cta-button").on("click.analyticsMediaCarouselItemAction",function(){var e;"pdf-select-load"===p&&(e=[],a(this).siblings("span").each(function(){e.push(a(this).text().trim())}),digitaldata.event.action="pdf brochure",m("vehicle:brochures:my ford magazine:pdf:download","pdf:download:"+e.join(" "),"ford-mag-brochure-download",!0))})},t.trackBillboardClick=function(){a(".billboard .cta-button").on("click.analyticsBillboardClick",function(){"ford-credit"===d&&("fc-home-load"===p&&m(c+":home:billboard","home:billboard click","hp-onclick",!0),p.includes("fc-financing-"))&&m(c+":finance options:take quiz:billboard","finance options:take quiz:billboard","finance-onclick",!0),"ford-owner"===d&&"dashboard-all pages"===p&&"flmo:portal:dashboard"===s&&m("flmo:portal:dashboard:cta","portal:dashboard:billboard click","vehicle-actions-onclick",!0)})},t.trackCarouselScroll=function(){a(".carousel-next, .carousel-previous, .carousel-controls > ol > li > a, .carousel > ol > li > a ").on("click.analyticsCarouselScroll",function(){var e,t="generic";a(this).parents(".mediaCarousel").length&&(a(this).parents(".analytics-social-module").length?(t="social",digitaldata.onclick.contentType="vhp:"+u+":social content",(e=a(this).parents(".mediaCarousel")).hasClass("analytics-social-module-news")?digitaldata.onclick.contentSubType="ford news":e.hasClass("analytics-social-module-reviews")?digitaldata.onclick.contentSubType="customer comments":e.hasClass("analytics-social-module-feed")&&(digitaldata.onclick.contentSubType="social feed")):t="video"),l&&"social"!==t&&(digitaldata.onclick.contentType=l+":"+u+":click",a(this).parents(".billboardCarousel").length&&(digitaldata.onclick.contentType=l+":"+u+":billboard",digitaldata.onclick.contentSubType="billboard"),a(this).parents(".mediaCarousel").length&&a(this).parents(".mediaCarousel").find(".video").length&&(digitaldata.onclick.contentType=l+":"+u+":video"),a(this).parents(".incentiveOffersBillboard").length)&&(digitaldata.onclick.contentType=l+":"+u+":latest offers"),a(this).parents(".models-display").length&&"social"!==t&&(digitaldata.onclick.contentSubType="model carousel"),"video"===(e=t)?(-1<d.indexOf("ford-brand")&&("science-load"===p?m("vehicle:science of truck:content:action:"+r,"science of truck content:carousel scroll","video-onclick",!1):"special-load"===p||"campaign-load"===p?m(digitaldata.page.pageNameNoVehicle+":content:action:"+r,"campaign content:carousel scroll","video-onclick",!1):m("video scroll","video scroll:carousel","video-onclick",!1)),"flmo:portal:vehicle support:userguide"===s&&m("flmo:portal:vehicle support:userguide:cta","portal:vehicle support:userguide:carousel click","ford-faq-onclick",!1),"Taiwan"===o?"flmo:portal:service:bsqc"===s?m("flmo:portal:service:bsqc:cta","portal:service:bsqc:carousel click","accordion-onclick",!1):"flmo:portal:service:commitments"===s?m("flmo:portal:service:commitments:cta","portal:service:commitments:carousel click","accordion-onclick",!1):"flmo:portal:service:set time table"===s&&m("flmo:portal:service:set time table:cta","portal:service:set time table:carousel click","accordion-onclick",!1):"Philippines"===o&&"flmo:portal:service"===s&&m("flmo:portal:service:cta","portal:service:carousel click","accordion-onclick",!1)):"social"===e?-1<d.indexOf("ford-brand")&&"vehicle-load"===p&&m("vehicle:social content action:"+r,"social content:carousel scroll","vhp-360-onclick",!1):"generic"===e&&(-1<d.indexOf("ford-brand")&&("home-load"===p?m("home:content:onpage","hp content:carousel scroll","hp-onclick",!1):"vehicle-load"===p?-1<s.indexOf("vehicle:models:detail:design:")?m("vehicle:models:detail:design:content action:"+r,"detail design content:carousel scroll","global-onclick",!1):m("vehicle:content:action:"+r,"vhp content:carousel scroll","vhp-onclick",!1):"model-details-load"===p?m("vehicle:models:detail:content action:"+r,"model content:detail:carousel scroll","models-details-onclick",!1):"features-cat-load"===p?m("vehicle:features:category:content action:"+r,"features category content:carousel scroll","feat-onclick",!1):"reveal-home"===p?m("reveal:content:action:"+r,"reveal content:carousel scroll","reveal-onclick",!1):"legend-load"===p?m("vehicle legend:content:action:"+r,"vehicle legend:content:carousel scroll","legend-onclick",!1):"accessories-load"===p?m("vehicle accessories:content:action:"+r,"accessories content:carousel scroll","access-onclick",!1):"science-load"===p?m("vehicle:science of truck:content:action:"+r,"science of truck content:carousel scroll","science-onclick",!1):m(digitaldata.page.pageNameNoVehicle+":content:action:"+r,"special-load"===p||"campaign-load"===p?"campaign content:carousel scroll":"content:carousel scroll","global-onclick",!1)),"ford-credit"===d&&"fc-home-load"===p&&m(c+":home:carousel","home:carousel click","hp-onclick",!1),"ford-owner"===d)&&("dashboard-all pages"===p&&"flmo:portal:dashboard"===s&&m("flmo:portal:dashboard:cta","portal:dashboard:carousel click","vehicle-actions-onclick",!1),"Taiwan"===o)&&"flmo:portal:vehicle support:tvc"===s&&m("flmo:portal:vehicle support:tvc:cta","portal:vehicle support:tvc:carousel click","ford-faq-onclick",!1),n.resetDatalayer()})},t.determineSocialModule=function(){0<a('a[id^="social-module"]').length&&a.each(a('a[id^="social-module"]'),function(){var e="analytics-"+a(this).attr("id");a(this).parents().eq(1).addClass("analytics-social-module "+e)})},t.trackRWDBrochureDownload=function(){a(".js-rwd-brochure-download").on("click.downloadrwdbrochure",function(){var e=digitaldata.page.nameplate,t=a(this).attr("href").split(".pdf"),t=(t=(t=t[0]).split("/"))[t.length-1];digitaldata.onclick.onclickLinkName="vehicle:brochures:rwd:pdf:download:"+e,digitaldata.onclick.onclick="pdf:download:"+t,digitaldata.event.action="pdf brochure",_satellite.track("ford-mag-brochure-download")})},t.init=function(){t.determineSocialModule(),t.trackRWDBrochureDownload(),setTimeout(function(){t.trackCarouselScroll()},2e3)},t}),define("analytics/events/colorizerThreesixtyEvents",["jquery","analytics/analyticsUtilities"],function(a,n){var e={};function i(e,t,a,i){digitaldata.onclick.onclickLinkName=e,digitaldata.onclick.onclick=t,i?n.trackAndReset(a):n.track(a)}return e.trackColorizerThreesixtyActions=function(){var e="content-onclick",t="vehicle :content:action:"+digitaldata.page.nameplate;pageFragment="vhp ",threeSixtyRotateSwitch="rotate",a("div.colorizer #exterio").on("click",function(){i(t,pageFragment+"content:"+threeSixtyRotateSwitch,e,!1)}),a("div.colorizer ul#colorizerBtn").on("click",function(){i(t,pageFragment+"content:colorizer",e,!1)})},e.init=function(){e.trackColorizerThreesixtyActions()},e}),define("analytics/events/commonDealerLocatorEvents",["_","jquery","analytics/analyticsUtilities","analytics/analyticsVariables","analytics/events/miniDealerLocatorEvents"],function(a,e,i,t,n){var o={},r=t.getSiteBusinessUnit(),l=t.getPage(),s=t.getTemplate();return window.commonDealerLocatorEvents=window.commonDealerLocatorEvents||{},window.commonDealerLocatorEvents.trackMakeMyDealer=function(e,t){digitaldata.onclick.onclickLinkName="dealer locater:my selected dealer",digitaldata.onclick.onclick="make this my dealer:"+t,i.track("global-onclick"),i.resetDatalayer()},window.commonDealerLocatorEvents.trackVisitDealersWebsiteFromMap=function(e){e&&n.trackMiniLADClick("visit dealer site")},window.commonDealerLocatorEvents.trackGetDirectionsFromMap=function(e){e&&n.trackMiniLADClick("directions")},o.trackDealerActionClick=function(e){digitaldata.onclick.contentType=l?l+":"+s+":find dealer":"",e.miniDealer&&digitaldata.vehicle.nameplate?digitaldata.onclick.onclickLinkName=t.getPageNameNoVehicle()+":dealer locator:dealer:referral:exit:"+digitaldata.vehicle.nameplate:digitaldata.onclick.onclickLinkName="dealer locator:dealer:info:cta",e.directionsClicked&&(digitaldata.onclick.onclick="dealer info:directions","ford-brand"===r)&&i.track("fd-onclick"),i.resetDatalayer()},o.trackError=function(e){},o.getFilterName=function(e){var t="";return a.forEach(e,function(e){t?t+=","+e:t=e}),t},o.setContentNameID=function(e){"location"===e.searchType?digitaldata.onclick.contentNameID="dealer location search:"+(e.usingCurrentLocation?"current location":"manual search"):digitaldata.onclick.contentNameID="dealer name search:manual search"},o.setSearchData=function(e){e.searchTerm=void 0===e.searchTerm?"":e.searchTerm,"location"===e.searchType?(digitaldata.page.toolDescriptor="dealer search:dealer location search:"+(e.usingCurrentLocation?"current location":"manual search"),digitaldata.page.siteSearchString="",digitaldata.page.searchLocationTerm=e.searchTerm):(digitaldata.page.toolDescriptor="dealer search:dealer name search:manual search",digitaldata.page.siteSearchString="dealer name search:"+e.searchTerm,digitaldata.page.searchLocationTerm=""),digitaldata.page.searchRadius=e.distance,o.setSearchDepth(e)},o.setSearchDepth=function(e){e.resultPosition?digitaldata.page.searchDepth=e.resultPosition+":"+e.totalResults:digitaldata.page.searchDepth="0:"+e.totalResults},o.trackInitiateContactFullDealerLocator=function(e){digitaldata.onclick.onclickLinkName="dealer locator:dealer:info:cta",digitaldata.onclick.onclick="dealer info:click to call","ford-brand"===r&&i.track("fd-call"),i.resetDatalayer()},o.trackInitiateContactMiniDealerLocator=function(e){},o}),define("analytics/events/contactUsEvents",["jquery","analytics/analyticsUtilities","analytics/analyticsVariables"],function(e,n,t){var a={};t.getSiteBusinessUnit();function i(e,t,a,i){digitaldata.onclick.onclickLinkName=e,digitaldata.onclick.onclick=t,i?n.trackAndReset(a):n.track(a)}return a.trackClickToChat=function(){i("click to chat","click to chat","click-to-chat",!0)},a.trackInitiateContactUs=function(e){i("help:contact us:content:action","contact us content:"+e,"global-onclick",!0)},a}),define("analytics/events/cookieMessageEvents",["jquery","analytics/analyticsUtilities","analytics/analyticsVariables"],function(e,t,a){var i={trackCookieMessageClosed:function(){}};return i}),define("analytics/events/creditFinanceOptionsEvents",["jquery","analytics/analyticsUtilities","analytics/analyticsVariables"],function(e,n,t){var a={},i=t.getPageName(),o=t.getPageNamePrefix();function r(e,t,a,i){digitaldata.onclick.onclickLinkName=e,digitaldata.onclick.onclick=t,i?n.trackAndReset(a):n.track(a)}return a.trackStepOne=function(){digitaldata.page.tool="compare:start",digitaldata.event.action="tool",r(o+":finance options:compare:step 1","finance options:compare:step 1","finance-compare-onclick",!0)},a.trackCompare=function(){r(o+":finance options:compare","finance options:compare","finance-onclick",!0)},a.trackCompareAction=function(e){r(o+":finance options:compare:"+e,"finance options:compare:"+e,"finance-onclick",!0)},a.trackReturn=function(){e(".back-button-holder .cta-button").on("click.creditFianceOptionReturn",function(){a.trackCompareAction("return")})},a.trackPDFDownload=function(){i.includes("finance options:market discipline landing")&&e('a[href*=".pdf"]').on("click.analyticsCreditFinanceOptionPDF",function(){var e=this.href.substring(this.href.lastIndexOf("/")+1,this.href.lastIndexOf(".pdf")).toLowerCase().replace(/-/g," ");r(o+":finance options:market discipline:download:"+e,"pdf download","market-discipline-download",!0)})},a.init=function(){a.trackPDFDownload()},a}),define("analytics/events/creditFinanceOptionsToolEvents",["jquery","analytics/analyticsUtilities","analytics/analyticsVariables"],function(e,n,t){var a={},i=t.getPageNamePrefix();t.getSiteBusinessUnit();function o(e,t,a,i){digitaldata.onclick.onclickLinkName=e,digitaldata.onclick.onclick=t,i?n.trackAndReset(a):n.track(a)}return a.trackQuestionNumber=function(e){o(i+":finance options:buy lease tool:question "+e,"finance options:buy lease tool:question "+e,"finance-onclick",!0)},a.trackResultLoad=function(e){digitaldata.page.tool="buy lease tool:result",digitaldata.page.toolDescriptor="buy lease tool:"+e.trim().toLowerCase(),digitaldata.event.action="tool",o(i+":finance options:buy lease tool:result","finance options:buy lease tool:result","finance-tool-onclick",!0)},a.trackStartOver=function(){o(i+":finance options:take quiz:start over","finance options:take quiz:start over","finance-onclick",!0)},a}),define("analytics/events/creditInvestorCentreEvents",["jquery","analytics/analyticsUtilities","analytics/analyticsVariables"],function(t,n,e){var a={},i=e.getPageName(),o=e.getPageNamePrefix(),r=e.getVariantName();function l(e,t,a,i){digitaldata.onclick.onclickLinkName=e,digitaldata.onclick.onclick=t,i?n.trackAndReset(a):n.track(a)}return a.downloadPDF=function(){t('a[href*=".pdf"], a[href*=".doc"]').on("click.analyticsDownloadInvestorCentrePDF",function(){var e=t(this).text().toLowerCase().trim();l(o+":investor center:"+i.substring(i.lastIndexOf(":")+1)+":download:"+e,"pdf download","investor-download",!0)})},a.trackCategoryClicks=function(){t("#investor-center-category").parents(".richtext").find('a:not("#investor-center-category")').on("click.analyticsInvestorCenterCategoryClick",function(){var e=t(this).text().toLowerCase().trim();l(o+":investor center:"+e,"investor center:"+e,"investor-onclick",!0)}),t("#investor-center-box").parents(".section.splitter").find('a:not("#investor-center-box")').on("click.analyticsInvestorCenterCategoryClick",function(){var e="",e=(t(this).hasClass("picture-container")?t(this).siblings(".mediaCarouselItem-content").find(".desktop a"):t(this)).text().toLowerCase().trim();l(o+":investor center:"+e,"investor center:"+e,"investor-onclick",!0)})},a.init=function(){"fc-investor-center-load"===r&&(a.downloadPDF(),a.trackCategoryClicks())},a}),define("analytics/events/creditPaymentEstimatorEvents",["jquery","analytics/analyticsUtilities","analytics/analyticsVariables"],function(e,s,t){var a={},c=t.getCurrentCountry(),d=t.getPageNamePrefix(),u=(t.getSiteBusinessUnit(),t.getVariantName(),/®/gi),p=/_/gi;return a.action=function(e,t,a){if(["change vehicle","mini showroom","change model","change terms","change down payment","payment details","compare plans","save","email","print","ext warranty","state"].indexOf(e)<0)return!1;t=t||"",a=a||"";var i=d+":ovf:pay est:"+e+":",n="pay est:"+e,o=e,r=fordAnalytics.onclick.modelYear||"",l=fordAnalytics.onclick.nameplate||"";"China"===c?l="ford "+(l=-1<l.lastIndexOf("_IMPT")?l.substring(0,l.lastIndexOf("_IMPT")):l).replace(p," ").replace(u,"").trim().toLowerCase():"Argentina"===c&&(l=(l=-1<l.lastIndexOf("_FAR")?l.substring(0,l.lastIndexOf("_FAR")):l).trim().toLowerCase().replace(/_/g," ")),"change vehicle"===e?"bnp"===t&&(i=d+":ovf:pay est:bnp:"+e+":"):"change terms"===e?o="change terms:"+t:"change down payment"===e?o="down payment":"compare plans"===e?(o="compare",-1<["add","remove"].indexOf(t)&&(i+=t+":",o+=":"+t,n+=":"+t)):"ext warranty"===e?o="ext warranty:"+t:"mini showroom"===e?(o="pay est:mini showroom",-1<["sort"].indexOf(t)&&(i+=t,o=e+":"+t,n+=":"+t+":"+a)):"state"===e&&(o="state",n="pay est:"+t.toLowerCase()),digitaldata.onclick.onclickLinkName=i,digitaldata.onclick.onclick=n,digitaldata.page.modelYear=r,digitaldata.page.nameplate=l,digitaldata.page.tool="payment estimator",digitaldata.page.toolDescriptor=o,digitaldata.event.action="tool","payment details"===e&&(digitaldata.onclick.onclickLinkName=i.lastIndexOf(":")===i.length-1?i+l:i),s.trackAndReset("pay-est-onclick")},a.init=function(){},a}),define("analytics/events/creditShoppingGuideEvents",["_","jquery","analytics/analyticsUtilities","analytics/analyticsVariables"],function(e,t,a,i){var n={},o=(i.getCurrentCountry(),i.getLincolnSites(),i.getPageNamePrefix()),r=(i.getSiteBusinessUnit(),i.getVariantName());function l(e){digitaldata.onclick.onclickLinkName=o+"shopping guide:"+e,digitaldata.onclick.onclick="shopping guide:"+e,a.trackAndReset("shopping-onclick")}return n.action=function(){"fc-shopping-load"===r&&(t('a[href*=".pdf"]').on("click.analyticsDownloadShoppingGuideNEducationPDF",function(){digitaldata.onclick.onclickLinkName=o+":finance options:shopping guide:download:"+e.compact(this.href.split("/")).pop().replace(".pdf","").toLowerCase().trim(),digitaldata.onclick.onclick="pdf download",a.trackAndReset("download-onclick")}),i.getPageName().includes("shopping guide"))&&(t(".payment-save a").on("click",function(){l("save")}),t(".send-mail a").on("click",function(){l("email")}),t(".print-pdf a").on("click",function(){l("print")}))},n.init=function(){n.action()},n}),define("analytics/events/creditSupportEvents",["jquery","analytics/analyticsUtilities","analytics/analyticsVariables"],function(a,i,e){var n={},o=e.getPageNamePrefix(),t=(e.getSiteBusinessUnit(),e.getVariantName());return n.supportSearchSubmit=function(e,t,a){digitaldata.onclick.onclickLinkName=o+":support:credit faq:submit",digitaldata.page.faqSubCategory=e&&t?e.toLowerCase()+":"+t.toLowerCase():e?e.toLowerCase():"",digitaldata.page.tool="event:faq searches",digitaldata.page.toolDescriptor="faq:"+a,digitaldata.onclick.onclick="support:faq submit",digitaldata.action.event="tool | faq searches",i.trackAndReset("support-submit-onclick")},n.supportSearchByCategory=function(){a('.search-form button[type="submit"][form="casForm"]').on("click.analyticsSupportSearchByCategory",function(){var e=a(this).parents(".search-form").find("#select2-chosen-2").text().trim(),t=a(this).parents(".search-form").find("#select2-chosen-4").text().trim();t.includes("--")&&(t=!1),e.includes("--")&&(e=""),n.supportSearchSubmit(e,t,"dropdown")})},n.supportSearchResult=function(e,t,a,i,n){},n.supportPDFDownload=function(){"fc-support-faq-article"===t&&a('a[href*=".pdf"]').on("click.analyticsSupportPDF",function(){var e=a(this).text().toLowerCase();digitaldata.onclick.onclickLinkName=o+":support:credit faq:"+fordAnalytics.articleName+":download:"+e,digitaldata.onclick.onclick="pdf download",i.trackAndReset("support-download")})},n.init=function(){n.supportSearchByCategory()},n}),define("analytics/events/crossNameplateCompareModelEvents",["jquery","analytics/analyticsUtilities","analytics/analyticsVariables"],function(e,n,t){var a={};t.getCurrentCountry(),t.getPageNameplate(),t.getVariantName(),t.getPageName(),t.getPageNamePrefix(),t.getSiteBusinessUnit();function i(e,t,a,i){digitaldata.onclick.onclickLinkName=e,digitaldata.onclick.onclick=t,i?n.trackAndReset(a):n.track(a)}return a.trackVehicleSelection=function(e){i("model compare:landing page:content action","compare:homepage:content action:"+e,"global-onclick",!0)},a.trackCompareModelStart=function(){digitaldata.page.pageName="model compare:landing page",digitaldata.page.siteSection="model compare",digitaldata.page.hierarchy="model compare:landing page",digitaldata.page.pageNameNoVehicle="model compare:landing page",n.trackAndReset("global-load")},a.trackSelectModel=function(){digitaldata.page.pageName="model compare:select model",digitaldata.page.siteSection="model compare",digitaldata.page.hierarchy="model compare:select model",digitaldata.page.pageNameNoVehicle="model compare:select model",n.trackAndReset("global-load")},a.trackSelectModelClick=function(e){digitaldata.page.siteSection="model compare",digitaldata.page.hierarchy="model compare:select model",digitaldata.page.pageNameNoVehicle="model compare:select model",i("model compare:select model:content action","select model:content action:"+e,"global-onclick",!0)},a.trackModelCompareResults=function(e){var t="";if(0<e.length)for(var a=0;a<e.length;a++)t+=e[a].nameplate+":"+e[a].model+" | ";digitaldata.page.pageName="model compare:compare result",digitaldata.page.siteSection="model compare",digitaldata.page.hierarchy="model compare:compare result",digitaldata.page.pageNameNoVehicle="model compare:compare result",digitaldata.page.variantName="compare-result",digitaldata.page.tool="event:compare",digitaldata.page.toolDescriptor=t,digitaldata.event.action="tool",n.trackAndReset("compare-result")},a.trackModelCompareResultsClick=function(e,t){var a="";t&&(a=t.nameplateTitle+":"+t.key),digitaldata.page.siteSection="model compare",digitaldata.page.hierarchy="model compare:compare result",digitaldata.page.pageNameNoVehicle="model compare:compare result",digitaldata.event.action="tool",i("model compare:compare result:content action",""!==a?"compare result:content action:"+e+":"+a:"compare result:content action:"+e,"global-onclick",!0)},a}),define("analytics/events/ctaEvents",["jquery","analytics/analyticsUtilities","analytics/analyticsVariables","analytics/events/galleryEvents"],function(a,n,i,e){var o={};function t(e,t,a,i){digitaldata.onclick.onclickLinkName=e,digitaldata.onclick.onclick=t,i?n.trackAndReset(a):n.track(a)}return o.trackCTA=function(e){},o.trackPromotionsShowroomCTA=function(e){},o.bindCTAInSplitter=function(e){var t,a=e.data("cta-name"),i=e.parents(".row.splitter"),e=e.closest(".splitter-column").find("img").first().data("meta-title"),i=i.attr("class"),i=(-1!==i.indexOf("vehicle-attributes")&&(t="vehicle attributes"),-1!==i.indexOf("f-single")&&(t="single feature"),{contentSubType:t=-1!==i.indexOf("next-steps")?"kba next steps":t,assetName:e,ctaName:a});void 0!==t&&this.trackCTA(i)},o.trackShowroomCTA=function(e){},o.init=function(){o.bindCTA()},o.bindCTA=function(){a(".billboard a.cta-button, .billboard a.cta-button-phone").on("click",function(){var e=a(this),t=e.closest(".billboard-content").find("img[data-meta-title]"),e=0<e.parents(".billboard-features-trigger").length;o.trackCTA({contentSubType:e?"features trigger":"billboard",assetName:t?t.data("meta-title"):null})}),a(".billboardCarousel .heading a.cta-button, .billboardCarousel a.cta-button-phone").on("click",function(){var e=a(this).closest(".carousel-slide").find("img[data-meta-title]");o.trackCTA({contentSubType:"billboard",assetName:e?e.data("meta-title"):null})}),a(".brandGallery .image a").on("click",function(e){e=e.target.getAttribute("data-meta-title");o.trackCTA({contentSubType:"brand gallery",assetName:e})}),a(".specification-quick-view a.cta-button, .specification-quick-view a.cta-button-phone").on("click",function(){var e=a(this).closest(".tabs-content").find("img[data-meta-title]");o.trackCTA({contentSubType:"spec quick view",assetName:e?e.data("meta-title"):null})}),a(".secondaryNavigation .navigation-horizontal a").on("click",o.bindNavigationSmartNextSteps)},a(".directBrochureDownloadLink").click(function(){var e,t=a(this).attr("href");t&&(e=i.getFileName(t)),digitaldata.onclick.onclickLinkName="vehicle:special edition:brochure download:"+fordAnalytics.nameplate,digitaldata.onclick.onclick="special edition:pdf download:"+e,digitaldata.vehicle.modelYear=fordAnalytics.modelYear,digitaldata.vehicle.nameplate=fordAnalytics.nameplate,digitaldata.page.tool="event:pdf brochure",digitaldata.user.leadType="brochure:anonymous:pdf",digitaldata.event.action="pdf brochure|tool",n.track("brochure-pdf-download")}),a(".syncSupportCtaApplink").click(function(){var e,t,a=fordAnalytics.pageTitle.split("_"),i=fordAnalytics.pageName.split("<")[0];a&&(e=a[0],t=a[1].toLowerCase()),i&&(digitaldata.onclick.onclickLinkName=i+"applink:",digitaldata.onclick.onclick=i+"applink:download"),t&&e&&(digitaldata.onclick.onclickLinkName+=t+":"+e+":download"),n.track("download")}),o.bindNavigationSmartNextSteps=function(){var e={contentSubType:"secondary nav next steps",ctaName:a(this).data("cta-name")};o.trackCTA(e)},o.trackVehicleRevealCTA=function(e){t("reveal:reservation explained:content:action:"+e,"reveal:reservation explained:content:action:"+e,"global-onclick",!1)},a("#we-listen").click(function(){digitaldata.page.pageName="flmo:portal:ffg:listen",digitaldata.page.siteSection="ffg:listen",digitaldata.page.hierarchy="flmo:portal:ffg:listen",t(digitaldata.page.pageNameNoVehicle="flmo:portal:ffg:listen","flmo:portal:ffg:listen","global-overlay",!1)}),a("#we-assure").click(function(){digitaldata.page.pageName="flmo:portal:ffg:assure",digitaldata.page.siteSection="ffg:assure",digitaldata.page.hierarchy="flmo:portal:ffg:assure",t(digitaldata.page.pageNameNoVehicle="flmo:portal:ffg:assure","flmo:portal:ffg:assure","global-overlay",!1)}),a("#we-support").click(function(){digitaldata.page.pageName="flmo:portal:ffg:support",digitaldata.page.siteSection="ffg:support",digitaldata.page.hierarchy="flmo:portal:ffg:support",t(digitaldata.page.pageNameNoVehicle="flmo:portal:ffg:support","flmo:portal:ffg:support","global-overlay",!1)}),a("#we-followup").click(function(){digitaldata.page.pageName="flmo:portal:ffg:followup",digitaldata.page.siteSection="ffg:followup",digitaldata.page.hierarchy="flmo:portal:ffg:followup",t(digitaldata.page.pageNameNoVehicle="flmo:portal:ffg:followup","flmo:portal:ffg:followup","global-overlay",!1)}),o}),define("analytics/events/dealerLocatorEvents",["jquery","analytics/analyticsUtilities","analytics/analyticsVariables","analytics/events/commonDealerLocatorEvents"],function(e,o,t,a){var i={},r=t.getSiteBusinessUnit(),n={},l=t.getPage(),s=t.getTemplate();return i.trackInitSearch=function(e){n.ladResultLoaded||(n.ladResultLoaded=!0,digitaldata.page.pageName="dealer locater:results",digitaldata.page.pageNameNoVehicle=digitaldata.page.pageName,digitaldata.onclick.onclickLinkName=digitaldata.page.pageName,digitaldata.onclick.onclick="find dealer:"+(e.usingCurrentLocation?"current location":"manual search"),digitaldata.page.tool="event:find dealer",digitaldata.event.action="find dealer|tool","ford-brand"===r&&(digitaldata.onclick.contentType=l?l+":"+s+":find dealer":"",o.trackAndReset("fd-results")))},i.trackOpeningFilters=function(e){},i.trackSubmit=function(e){n.ladResultLoaded||(n.ladResultLoaded=!0,digitaldata.page.pageName="dealer locater:results",digitaldata.page.pageNameNoVehicle=digitaldata.page.pageName,digitaldata.onclick.onclickLinkName=digitaldata.page.pageName,digitaldata.onclick.onclick="find dealer:"+(e.usingCurrentLocation?"current location":"manual search"),digitaldata.page.tool="event:find dealer",digitaldata.event.action="find dealer|tool","ford-brand"===r&&(digitaldata.onclick.contentType=l?l+":"+s+":find dealer":"",o.trackAndReset("fd-results")))},i.trackAdvancedSearch=function(e){if(digitaldata.onclick.onclickLinkName="dealer locater:results:advanced search",0<e.filters.length){for(var t=[],a=0;a<e.filters.length;a++){var i=e.filters[a].split(":");t.push(i[1].toLowerCase())}var n="|service:"+t.toString()}else n="";digitaldata.onclick.onclick="dealer locater:filter:{distance:"+e.distance+n+"}",console.log(digitaldata.onclick.onclick),"ford-brand"===r&&(digitaldata.onclick.contentType=l?l+":"+s+":find dealer":"",o.trackAndReset("fd-onclick"))},i.trackShowMore=function(e){},i.trackResultsPresent=function(e){n.ladResultLoaded||(n.ladResultLoaded=!0,digitaldata.page.pageName="dealer locater:results",digitaldata.page.pageNameNoVehicle=digitaldata.page.pageName,digitaldata.page.site="dealership",digitaldata.page.hierarchy="shopping tools:locate dealer",digitaldata.page.tool="event:find dealer",digitaldata.onclick.onclick="find dealer:"+(e.usingCurrentLocation?"current location":"manual search"),digitaldata.onclick.contentType=l?l+":"+s+":find dealer":"",digitaldata.event.action="finder dealer|tool",o.trackAndReset("fd-results"))},i.trackClickDealer=function(e){digitaldata.page.pageName="dealer locator:dealer:info",digitaldata.page.pageNameNoVehicle="dealer locator:dealer:info","ford-brand"===r&&(digitaldata.onclick.contentType=l?l+":"+s+":find dealer":"",o.trackAndReset("fd-details"))},i.trackExpandDealerInfo=function(e){digitaldata.onclick.onclickLinkName="dealer locator:dealer:info:cta",digitaldata.onclick.onclick="dealer info:expand:"+e.toLowerCase().trim(),"ford-brand"===r&&(digitaldata.onclick.contentType=l?l+":"+s+":find dealer":"",o.trackAndReset("fd-onclick"))},i.trackClickCTA=function(e){digitaldata.onclick.onclickLinkName="dealer locator:dealer:info:cta",digitaldata.onclick.onclick="dealer info:"+e,"ford-brand"===r&&(digitaldata.onclick.contentType=l?l+":"+s+":find dealer":"",o.trackAndReset("fd-onclick"))},i}),define("analytics/events/downloadEvents",["jquery","analytics/analyticsUtilities","analytics/analyticsVariables"],function(e,n,o){var t={trackPdfBrochureDownload:function(e,t,a){var i;e&&(i=o.getFileName(e)),digitaldata.onclick.onclickLinkName="vehicle:brochures:pdf:download",t&&(digitaldata.onclick.onclickLinkName+=":"+t),digitaldata.onclick.onclick="pdf:download",i&&(digitaldata.onclick.onclick+=":"+i),a&&(digitaldata.vehicle.modelYear=a),t&&(digitaldata.vehicle.nameplate=t),digitaldata.page.tool="event:pdf brochure",digitaldata.user.leadType="brochure:anonymous:pdf",digitaldata.event.action="pdf brochure|tool",n.track("brochure-complete-1")},trackPdfBrochureDownloadComplete:function(e,t,a){var i;e&&(i=o.getFileName(e)),digitaldata.onclick.onclickLinkName="vehicle:brochure:pdf download",t&&(digitaldata.onclick.onclickLinkName+=":"+t),digitaldata.page.pageName=digitaldata.onclick.onclickLinkName,digitaldata.page.siteSection="brochures",digitaldata.page.hierarchy="shopping tools:brochures",a&&(digitaldata.page.modelYear=a,digitaldata.vehicle.modelYear=a),t&&(digitaldata.page.nameplate=t,digitaldata.vehicle.nameplate=t),digitaldata.page.tool="event:pdf brochure",digitaldata.onclick.onclick="brochure:pdf download",digitaldata.page.variantName="brochure-pdf-download",i&&(digitaldata.onclick.onclick+=":"+i),digitaldata.user.leadType="brochure:anonymous:pdf",n.track("brochure-pdf-download")},trackBrochureDownload:function(e,t){},trackPricelistDownload:function(e,t){},trackPDFDownload:function(e,t){},trackDownloadButton:function(e){var t=e.link,a=e.category;"Brochure"===e.type&&this.trackBrochureDownload(t,a),"PDF"===e.type&&this.trackPDFDownload(t,a),"Pricelist"===e.type&&this.trackPricelistDownload(t,a)},trackFDSBrochureDownload:function(e,t,a){a=a&&o.getFileName(a)||"";digitaldata.onclick.onclickLinkName="vehicle:brochure:pdf download",digitaldata.page.siteSection="brochures",digitaldata.page.hierarchy="shopping tools:brochures",t&&(digitaldata.page.modelYear=t,digitaldata.vehicle.modelYear=t),e&&(digitaldata.onclick.onclickLinkName+=":"+e,digitaldata.page.nameplate=e,digitaldata.vehicle.nameplate=e),digitaldata.page.tool="event:pdf brochure",digitaldata.onclick.onclick="brochure:pdf download",a&&(digitaldata.onclick.onclick+=":"+a),digitaldata.user.leadType="brochure:anonymous:pdf",digitaldata.event.action="pdf brochure|tool",digitaldata.page.variantName="brochure-pdf-download",n.track("brochure-pdf-download")},trackFDSPricelistDownload:function(e,t){digitaldata.onclick.onclickLinkName="vehicle:price list:pdf download",digitaldata.page.siteSection="brochures",digitaldata.page.hierarchy="shopping tools:brochures",t&&(digitaldata.page.modelYear=t,digitaldata.vehicle.modelYear=t),e&&(digitaldata.onclick.onclickLinkName+=":"+e,digitaldata.page.nameplate=e,digitaldata.vehicle.nameplate=e),digitaldata.page.tool="event:pdf pricelist",digitaldata.onclick.onclick="price list:pdf download",digitaldata.user.leadType="brochure:anonymous:pdf",digitaldata.event.action="tool",digitaldata.page.variantName="download",n.track("download")},trackFDSInteractiveBrochure:function(e,t,a){digitaldata.onclick.onclickLinkName="referral:exit",digitaldata.onclick.referredTo="interactive brochure",t&&(digitaldata.page.modelYear=t,digitaldata.vehicle.modelYear=t),e&&(digitaldata.page.nameplate=e,digitaldata.vehicle.nameplate=e),digitaldata.page.tool="event:interactive brochure",digitaldata.onclick.onclick="referral exit",a&&(digitaldata.onclick.onclick+=":"+a),digitaldata.event.action="brand referral|tool",digitaldata.page.variantName="referral-exit",n.track("referral-exit")},trackEBrochureDownload:function(e,t,a){var i;e&&(i=o.getFileName(e)),digitaldata.onclick.onclickLinkName="vehicle:brochures:pdf:download",digitaldata.page.pageName="vehicle:brochure download:complete",digitaldata.page.hierarchy="shopping tools:brochures",a&&(digitaldata.vehicle.modelYear=a,digitaldata.page.modelYear=a,digitaldata.page.hierarchy+=":"+a),t&&(e=this.formatNameplate(t),digitaldata.onclick.onclickLinkName+=":"+e,digitaldata.vehicle.nameplate=e,digitaldata.page.nameplate=e,digitaldata.page.pageName+=":"+e,digitaldata.page.hierarchy+=":"+e),digitaldata.onclick.onclick="pdf:download",i&&(digitaldata.onclick.onclick+=":"+i),digitaldata.page.siteSection="brochures",digitaldata.page.pageNameNoVehicle="vehicle:brochure download:complete",digitaldata.user.leadType="brochure:anonymous:pdf:select",digitaldata.page.tool="event:pdf brochure",digitaldata.page.toolDescriptor="brochure download",digitaldata.event.action="pdf brochure|tool",n.track("brochure-complete-1")},trackIBrochureDownload:function(e,t,a){var i;e&&(i=o.getFileName(e)),digitaldata.onclick.onclickLinkName="brochures:pdf:download",digitaldata.page.pageName="brochure download:complete",digitaldata.page.hierarchy="brochures:download",a&&(digitaldata.vehicle.modelYear=a,digitaldata.page.modelYear=a,digitaldata.page.hierarchy+=":"+a),t&&(e=this.formatNameplate(t),digitaldata.onclick.onclickLinkName+=":"+e,digitaldata.vehicle.nameplate=e,digitaldata.page.nameplate=e,digitaldata.page.pageName+=":"+e,digitaldata.page.hierarchy+=":"+e),digitaldata.onclick.onclick="pdf:download",i&&(digitaldata.onclick.onclick+=":"+i),digitaldata.page.siteSection="brochures",digitaldata.page.pageNameNoVehicle="brochure download:complete",digitaldata.user.leadType="brochure:anonymous:pdf:select",digitaldata.page.tool="event:pdf brochure",digitaldata.page.variantName="brochure-complete-1",digitaldata.page.toolDescriptor="brochure download",digitaldata.event.action="pdf brochure|tool",n.track("brochure-complete-1")},formatNameplate:function(e){e=e.toLowerCase().replace(/  +/g," ");return e.includes("new")?e.replace("new","").replace(/  +/g," "):e}};return t}),define("analytics/events/fordPassEvents",["jquery","analytics/analyticsUtilities","analytics/analyticsVariables"],function(e,t,a){function i(e,t,a,i){digitaldata.page.pageName=e,digitaldata.page.variantName="global-load",digitaldata.page.siteSection=t,digitaldata.page.hierarchy=a,digitaldata.page.userLanguage="esp",digitaldata.page.pageNameNoVehicle=i,digitaldata.page.client=digitaldata.page.client,digitaldata.page.site="ford-brand"}function n(e,t,a){digitaldata.page.siteSection=e,digitaldata.page.hierarchy=t,digitaldata.page.pageNameNoVehicle=a,digitaldata.onclick.onclickLinkName="exit:download:fordpass",digitaldata.page.userLanguage="esp",digitaldata.page.client=digitaldata.page.client,digitaldata.page.site="ford-brand",_satellite.track("app-download-exit"),r=!1}function o(e){switch(e){case"fp:home":r?n("fordpass","fordpass:home","fp:home"):i("fp:home","fordpass","fordpass:home","fp:home");break;case"fp:marketplace":r?n("fordpass:awareness","fordpass:awareness:marketplace","fp:marketplace"):i("fp:marketplace","fordpass:awareness","fordpass:awareness:marketplace","fp:marketplace");break;case"fp:perks":r?n("fordpass:awareness","fordpass:awareness:perks","fp:perks"):i("fp:perks","fordpass:awareness","fordpass:awareness:perks","fp:perks");break;case"fp:guides":r?n("fordpass:awareness","fordpass:awareness:guides","fp:guides"):i("fp:guides","fordpass:awareness","fordpass:awareness:guides","fp:guides");break;case"fp:faq":r?n("fordpass:awareness","fordpass:awareness:ask","fp:faq"):i("fp:faq","fordpass:awareness","fordpass:awareness:ask","fp:faq");break;case"fp:get app":r?n("fordpass:awareness","fordpass:awareness:get app","fp:get app"):i("fp:get app","fordpass:awareness","fordpass:awareness:get app","fp:get app");break;case"fp:help:privacy":r?n("fordpass:awareness","fordpass:help:privacy","fp:help:privacy"):i("fp:help:privacy","fordpass:help","fordpass:help:privacy","fp:help:privacy");break;case"fp:help:terms":r?n("fordpass:awareness","fordpass:help:terms","fp:help:terms"):i("fp:help:terms","fordpass:help","fordpass:help:terms","fp:help:terms")}}var r;"Mexico"!=fordAnalytics.country&&"Argentina"!=fordAnalytics.country||(r=!{},o(fordAnalytics.pageName),document.getElementById("fordPassLinkApp")&&e("#fordPassLinkApp").click(function(){r=!0,o(fordAnalytics.pageName)}))}),define("analytics/events/formWizardEvents",["jquery","marketConfigGlobal","analytics/analyticsUtilities","analytics/analyticsVariables","analytics/events/buildAndPriceReviewEvents"],function(m,h,f,g,e){var n,t={},v=(g.getCurrentCountry(),{"bp-raq":["bp-request-a-qoute","request-a-quote-bnp","request-quote-buildandprice","request-a-quote-buildandprice","request-quote","request-a-quote","solicitar-cotizacion","bp-request-a-quote"],brochure:["brochure-download","download-brochure","brochure","ebrochure","request-a-brochure","folleto"],"brochure-form":["download-brochure-new"],"contact-us":["contact-us","contact-us-b","contact-us-1","contact-us-b-new"],"customer-care":["customer-care","customer-care-b","customer-care-1"],"credit-support":["email-credit-customer-support"],"dealer-application":["dealer-application"],enews:["sign-up-to-ford-enews","enews","e-newsletter"],"extended-warranty":["buy-extended-warranty"],fltfranchise:["fleet-franchise"],fltparnter:["fleet-partner"],fltreg:["fleet-registration"],fltregsb:["fleet-registration-small-biz"],flttd:["fleet-test-drive-nri"],kmi:["kmi","keep-me-informed","customer-update","kmi-mustang","kmi-banner-mustang","kmi-raptor","stay-informed","kmi-expedition-2018","kmi-ecoSport","kmi-fiesta","kmi-figo","kmi-ranger","kmi-gems","kmi-all-new-focus","kmi-01","kmi-02","kmi-03","kmi-04","kmi-05","territory-kmi","kmi-tourneo","kmi-ranger-thunder","puma-keep-me-informed","escape-enews","m1-kmi-redesigned","kmi1","kmi-b","kmi-b-new"],"quick-quote":["quick-quote","qrfq"],raq:["request-a-quote","request-quote","quote","estimado","vrfq","request-a-quote-offers","request-a-quote1","request-quote-cn","request-a-quote-b","solicitud-de-cotizacion","cotizacion","solicitud-cotizacion","solicitar-cotizacion","vehiculo-de-interes","solicitud-de-cotizacion-concesionario"],"service-booking":["service-booking","appointment"],td:["test-drive","test-drive-generic","test-drive-jmc","testdrive","test-drive-newfigo","test-drive-figoaspire","test-drive-ecosport","test-drive-endeavour","prueba-de-manejo","test-drive-tw","test-drive-form","test-drive-fco","manejalo","redesign-forms","redesign-forms1","redesign-forms11","test-drive-b","solicitud-de-prueba","solicitud-de-manejo","solicitud-test-drive","solicitud-de-prueba-concesionario","prueba-manejo","prueba-de-manejo-generico","prueba-de-manejo-ecoSport","prueba-de-manejo-escape","prueba-de-manejo-territory","prueba-de-manejo-broncoSport","prueba-de-manejo-explorer","prueba-de-manejo-expedition","prueba-de-manejo-ranger","prueba-de-manejo-maverick","prueba-de-manejo-f150Raptor","prueba-de-manejo-f150","prueba-de-manejo-bronco","prueba-de-manejo-edge","prueba-de-manejo-mustang","prueba-de-manejo-rangerRaptor","solicitud-de-prueba-manejo","book-a-test-drive"],"truck-tour":["truck-tour"],"request-a-call":["request-a-call"],"private-offer":["private-offer","private-offer-1","private-offer-2","th-special-offer-05k-sep","th-special-offer-10k-sep","private-offer-ranger-jul-20-he759","th-privateoffer-2020-october-everest-yyn397","th-privateoffer-2020-october-ranger-vwi726"],"lucky-draw":["happinesscampaign-luckydraw"],"get-a-deal":["get-a-deal","get-a-deal-wildtrak","get-a-deal-registration","get-a-deal-wildtrak-registration"],"online-booking":["online-booking"],"referral-campaign":["referralcampaign"],showroomOnDemand:["showroom-on-demand"],showroomAtHome:["showroom-at-home"],fltregcom:["fleet-registration-redesign-test"],retentionCampaign:["rangerretention"],projectKing:["project-king"],"Keep-Me-Updated":["explorer-KMI","kmi-ranger-raptor"],"latest-offer":["get-latestoffer-everest","get-latestoffer-everest-b","get-latestoffer-ranger","get-latestoffer-ranger-b"],territoryreferral:["territory-referral","territory-referral-2"],"safeguard-duty-pricing-refund":["safeguard-duty-pricing-refund","safeguard-duty-pricing-refund-b"],eckmi:["next-generation-territory-sign-up-updates","territory-kmi"],"social-club":["social-club-raptor-2024","social club raptor 2024","social-club-ranger-2024","social-club-everest-2024","social-club-everest-th-2024"],kmitory:["new-gen-territory-kmi","new-gen-territory-kmi"],"friends-get-friends":["raptor-king-of-tough-friend-gets-friends-2024","raptor king of tough friend gets friends 2024"]}),o=g.getPageTitle(),y=g.getPage(),b=(g.getPageName(),g.getPageNamePrefix()),w=g.getSiteBusinessUnit(),C=g.getTemplate(),k=["af","bh","iq","jo","kw","lb","om","qa","sa","ae","ye"],S=["th","vn","ph","au"],x=!!m("input[name=downloadBrochurePath]").length,a=m('a[href*="kmi.html"]'),D=h.GLOBAL_MARKET_CONF.marketCode,P=m.parseJSON(sessionStorage.getItem("BNP.MODELDATA.OBJ"));function i(e){var t,a,i=(e=m(".private-offers").length&&(o&&v["private-offer"].push(o),-1<(e=e.replace(/\/$/,"")).indexOf("/?"))?e.substr(0,e.indexOf("/?")):e).substring(e.lastIndexOf("/")+1);-1<i.indexOf(".html")&&(i=i.substring(0,i.indexOf(".html"))),m(".isBrochureDownload").length&&""!=e.substring(e.lastIndexOf("#")+1)&&-1<(i=e.substring(e.lastIndexOf("#")+1)).indexOf(".html")&&(i=(i=i.substring(0,i.indexOf(".html"))).substring(i.lastIndexOf("/")+1));v["friends-get-friends"]&&v["friends-get-friends"].includes(i)&&fordAnalytics&&"direct"==fordAnalytics.formLocation&&(digitaldata.page.client="ford-thailand",digitaldata.page.pageName="get updates:1:contact",digitaldata.page.site="ford-brand",digitaldata.page.siteSection="get updates",digitaldata.page.radUIVersion="ui:rad:pc",digitaldata.page.hierarchy="shopping tools:get updates",digitaldata.page.userLanguage="tha",digitaldata.page.pageNameNoVehicle=digitaldata.page.pageName,null!==fordAnalytics.nameplate&&(digitaldata.page.nameplate=fordAnalytics.nameplate),null!==fordAnalytics.modelYear&&(digitaldata.page.modelYear=fordAnalytics.modelYear),digitaldata.page.variantName="get-updates-start"),v["social-club"]&&v["social-club"].includes(i)&&"direct"==fordAnalytics.formLocation&&(digitaldata.page.pageName="get updates social club:1:contact",digitaldata.page.siteSection="ford-brand",digitaldata.page.hierarchy="social club:get updates",digitaldata.page.pageNameNoVehicle=digitaldata.page.pageName,digitaldata.page.client="ford-thailand",digitaldata.page.radUIVersion="ui:rad:pc",digitaldata.page.site="ford-brand",digitaldata.page.userLanguage="tha",null!==fordAnalytics.nameplate&&(digitaldata.page.nameplate=fordAnalytics.nameplate),null!==fordAnalytics.modelYear&&(digitaldata.page.modelYear=fordAnalytics.modelYear),digitaldata.page.variantName="get-updates-start"),v.kmitory&&v.kmitory.includes(i)&&"direct"==fordAnalytics.formLocation&&(digitaldata.page.pageName="ec:preveal:kmi start",digitaldata.page.siteSection="pre-reveal",digitaldata.page.client="ford-south africa",digitaldata.page.userLanguage="eng",digitaldata.page.radUIVersion="ui:rad:pc",digitaldata.page.site="ford-brand",digitaldata.page.modelYear="2024",digitaldata.page.hierarchy="ec:pre-reveal:kmi:2024:suv:ford territory",digitaldata.page.pageNameNoVehicle=digitaldata.page.pageName,null!==fordAnalytics.nameplate&&(digitaldata.page.pageName+=":ford territory",digitaldata.page.nameplate="ford territory"),digitaldata.page.variantName="get-updates-start"),fordAnalytics.formStart=i,fordAnalytics.formLocation=fordAnalytics.formLocation||"",""!==fordAnalytics.formLocation&&""!==y&&(digitaldata.onclick.contentType=y+":"+C+":"+fordAnalytics.formLocation),v.kmi.includes(i)?(1==n&&(digitaldata.page.pageName="get updates:0:sign up",digitaldata.page.pageNameNoVehicle="get updates:0:sign up",digitaldata.page.siteSection="get updates",digitaldata.page.hierarchy="shopping tools:get updates",digitaldata.page.variantName="get-updates-signup",T(),N(),f.track("get-updates-signup")),k.includes(D)?(digitaldata.page.pageName="get updates:contact info",digitaldata.page.variantName="get-updates-start",digitaldata.page.tool=""):(digitaldata.page.pageName="get updates:1:contact",digitaldata.page.variantName="event:get updates-start",digitaldata.page.tool="event:get updates-start"),digitaldata.page.siteSection="get updates",digitaldata.page.hierarchy="shopping tools:get updates",digitaldata.page.pageNameNoVehicle=digitaldata.page.pageName,digitaldata.page.tool="event:get updates-start","direct"!=fordAnalytics.formLocation&&f.track("get-updates-start")):v["Keep-Me-Updated"].includes(i)?(digitaldata.page.pageName="get updates:contact",digitaldata.page.siteSection="get updates",digitaldata.page.hierarchy="shopping tools:get updates",digitaldata.page.pageNameNoVehicle=digitaldata.page.pageName,fordAnalytics.nameplate&&(digitaldata.page.pageName+=":"+fordAnalytics.nameplate,digitaldata.page.nameplate=fordAnalytics.nameplate),fordAnalytics.modelYear&&(digitaldata.page.modelYear=fordAnalytics.modelYear),digitaldata.page.variantName="get-updates-start","direct"!=fordAnalytics.formLocation&&f.track("get-updates-start")):v.raq.includes(i)?(k.includes(D)||"za"==D?(digitaldata.page.pageName="vrfq:contact info",k.includes(D)&&((t=m('select[name="VOI_MODEL_DESCRIPTION"]').find(":selected").val().toLowerCase())&&(digitaldata.page.nameplate="ford "+t,T("ford "+t)),e=m(".hidden-fields input[name='modelyear']").val())&&(N(e),digitaldata.page.modelYear=e)):digitaldata.page.pageName="vrfq",digitaldata.page.siteSection="get quote",digitaldata.page.hierarchy="shopping tools:get quote",digitaldata.page.pageNameNoVehicle=digitaldata.page.pageName,digitaldata.page.variantName="vrfq-start",fordAnalytics.modelYear&&N(),fordAnalytics.nameplate&&T(),"direct"!=fordAnalytics.formLocation&&f.track("vrfq-start")):v["bp-raq"].includes(i)?(digitaldata.page.pageName="vrfq:contact info",digitaldata.page.siteSection="get quote",digitaldata.page.hierarchy="shopping tools:get quote",digitaldata.page.variantName="vrfq-start",digitaldata.page.pageNameNoVehicle=digitaldata.page.pageName,fordAnalytics.modelYear&&(N(),digitaldata.page.hierarchy+=":"+fordAnalytics.modelYear),fordAnalytics.nameplate&&(digitaldata.page.pageName+=":"+fordAnalytics.nameplate,digitaldata.page.hierarchy+=":"+fordAnalytics.nameplate,T()),f.track("vrfq-start")):v["get-a-deal"].includes(i)?A():v["quick-quote"].includes(i)?(digitaldata.page.pageName="qrfq:gip:contact",digitaldata.page.siteSection="quick quote",digitaldata.page.hierarchy="shopping tools:quick quote",digitaldata.page.pageNameNoVehicle=digitaldata.page.pageName,digitaldata.page.variantName="quick-quote-start",f.track("quick-quote-start")):v["request-a-call"].includes(i)?("ford-thailand"==digitaldata.page.client?(digitaldata.page.pageName="click to call overlay:contact dealer",digitaldata.page.siteSection="click to call",digitaldata.page.hierarchy="shopping tools:click to call",digitaldata.page.pageNameNoVehicle=digitaldata.page.pageName,digitaldata.page.tool="call",digitaldata.page.toolDescriptor="contact dealer"):(digitaldata.page.pageName="get call",digitaldata.page.siteSection="get call",digitaldata.page.hierarchy="shopping tools:get call",digitaldata.page.pageNameNoVehicle=digitaldata.page.pageName),digitaldata.page.variantName="global-overlay",f.track("global-overlay")):v["private-offer"].includes(i)?(digitaldata.page.pageName="vehicle:private offer:1:info",fordAnalytics.nameplate&&(T(),N(),digitaldata.page.pageName+=":"+fordAnalytics.nameplate),digitaldata.page.siteSection="incentives",digitaldata.page.hierarchy="vehicle:incentives",digitaldata.page.pageNameNoVehicle=digitaldata.page.pageName,digitaldata.page.variantName="private-offer",f.track("private-offer")):v.td.includes(i)?(k.includes(D)?(digitaldata.page.pageName="vehicle:test drive:contact info",(t=m('select[name="VOI_MODEL_DESCRIPTION"]').find(":selected").val().toLowerCase())&&(digitaldata.page.nameplate="ford "+t)):S.includes(D)?digitaldata.page.pageName="vehicle:test drive:register":digitaldata.page.pageName="vehicle:test drive:1:contact",digitaldata.page.siteSection="test drive",digitaldata.page.hierarchy="shopping tools:test drive",digitaldata.page.variantName="test-drive-start",fordAnalytics.modelYear&&N(),fordAnalytics.nameplate&&(T(),digitaldata.page.pageName+=":"+fordAnalytics.nameplate),digitaldata.page.pageNameNoVehicle=digitaldata.page.pageName,"direct"!=fordAnalytics.formLocation&&f.track("test-drive-start")):v.showroomAtHome.includes(i)?(digitaldata.page.pageName="showroom at home:register",digitaldata.page.siteSection="showroom at home",digitaldata.page.hierarchy="showroom at home",digitaldata.page.pageNameNoVehicle="showroom at home:register",digitaldata.page.variantName="global-load",f.track("global-load")):v.showroomOnDemand.includes(i)?(digitaldata.page.pageName="showroom on demand:register",digitaldata.page.siteSection="showroom on demand",digitaldata.page.hierarchy="showroom on demand",digitaldata.page.pageNameNoVehicle="showroom on demand:register",digitaldata.page.variantName="global-load",f.track("global-load"),a=h.getCurrentiso3MarketCode()):v.brochure.includes(i)||x?(a=h.getCurrentiso3MarketCode(),"direct"!==fordAnalytics.formLocation&&"vnm"!==a?(digitaldata.page.pageName="vehicle:brochure download:1:contact",digitaldata.page.siteSection="brochures",digitaldata.page.hierarchy="shopping tools:brochures",digitaldata.page.pageNameNoVehicle=digitaldata.page.pageName,f.track("brochure-download-1")):"direct"!==fordAnalytics.formLocation&&"vnm"===a?(digitaldata.page.pageName="brochure download:start:"+fordAnalytics.nameplate,digitaldata.page.siteSection="shopping tools:brochures",digitaldata.page.hierarchy="brochures:"+fordAnalytics.modelYear+":"+fordAnalytics.vehicleCategory+":"+fordAnalytics.nameplate,digitaldata.page.pageNameNoVehicle="brochure download:start"):(digitaldata.page.pageName="brochure download:landing",digitaldata.page.siteSection="shopping tools:brochures",digitaldata.page.pageNameNoVehicle="brochure download:landing",f.track("brochure-download-1"))):v["brochure-form"].includes(i)?"brochure overlay"==fordAnalytics.formLocation&&setTimeout(function(){var e=g.getParameterByName("analyticsnameplate"),t=g.getParameterByName("analyticsmodelyear");digitaldata.onclick.onclickLinkName="",digitaldata.page.tool="",digitaldata.onclick.onclick="",digitaldata.onclick.referredTo="",digitaldata.user.leadType="",digitaldata.event.action="",digitaldata.page.pageName="vehicle:brochure:download overlay",digitaldata.page.siteSection="brochures",digitaldata.page.hierarchy="shopping tools:brochures",digitaldata.page.pageNameNoVehicle=digitaldata.page.pageName,e&&(digitaldata.page.pageName+=":"+e,digitaldata.page.nameplate=e,digitaldata.vehicle.nameplate=e),t&&(digitaldata.page.modelYear=t,digitaldata.vehicle.modelYear=t),digitaldata.page.variantName="global-overlay",f.trackAndUpdate("global-overlay")},200):v.fltregsb.includes(i)?(digitaldata.page.pageName='fleet:business:contact"',digitaldata.page.siteSection="fleet",digitaldata.page.hierarchy="vehicle:corporate fleet",digitaldata.page.pageNameNoVehicle=digitaldata.page.pageName,digitaldata.page.variantName="fleet-register-start",f.track("fleet-register-start")):v.fltregcom.includes(i)?(digitaldata.page.pageName="fleet:register",digitaldata.page.siteSection="fleet",digitaldata.page.hierarchy="vehicle:corporate fleet",digitaldata.page.pageNameNoVehicle=digitaldata.page.pageName,digitaldata.page.variantName="fleet-load",f.track("fleet-load")):v.retentionCampaign.includes(i)?(digitaldata.page.pageName="retention campaign",digitaldata.page.siteSection="retention",digitaldata.page.hierarchy="retention campaign",digitaldata.page.pageNameNoVehicle=digitaldata.page.pageName,fordAnalytics.nameplate&&(digitaldata.page.pageName+=":"+fordAnalytics.nameplate,digitaldata.page.nameplate=fordAnalytics.nameplate),fordAnalytics.modelYear&&(digitaldata.page.hierarchy+=":"+fordAnalytics.modelYear,digitaldata.page.modelYear=fordAnalytics.modelYear),fordAnalytics.vehicleCategory&&(digitaldata.page.hierarchy+=":"+fordAnalytics.vehicleCategory),fordAnalytics.nameplate&&(digitaldata.page.hierarchy+=":"+fordAnalytics.nameplate),digitaldata.page.variantName="retention-start",f.track("retention-start")):v["contact-us"].includes(i)?k.includes(D)?(digitaldata.page.pageName="contact us:contact info",digitaldata.page.siteSection="contact us",digitaldata.page.hierarchy="contact us",digitaldata.page.pageNameNoVehicle=digitaldata.page.pageName,digitaldata.page.variantName="contact-start","direct"!=fordAnalytics.formLocation&&f.track("contact-start")):m("html").hasClass("market_mea")||"za"==D?(digitaldata.page.pageName=fordAnalytics.pageName||"contact us:contact info",digitaldata.page.siteSection="contact us",digitaldata.page.hierarchy="contact us",digitaldata.page.pageNameNoVehicle=digitaldata.page.pageName,digitaldata.page.variantName="contact-start","direct"!=fordAnalytics.formLocation&&f.track("contact-start")):(digitaldata.page.pageName="help:contact us:form:1:contact",digitaldata.page.siteSection="help",digitaldata.page.hierarchy="help:contact us",digitaldata.page.pageNameNoVehicle=digitaldata.page.pageName,"direct"!=fordAnalytics.formLocation&&f.track("contact-form-start")):v["customer-care"].includes(i)?(digitaldata.page.pageName="vehicle:customer care:1:contact",digitaldata.page.siteSection="vehicle",digitaldata.page.hierarchy="vehicle:customer care",digitaldata.page.pageNameNoVehicle="vehicle:customer care:1:contact",f.track("global-overlay")):v["truck-tour"].includes(i)?(digitaldata.page.pageName="vehicle:truck tour:1:contact",digitaldata.page.siteSection="promotions",digitaldata.page.hierarchy="shopping tools:truck entry",digitaldata.page.pageNameNoVehicle="vehicle:truck tour:1:contact",digitaldata.page.variantName="truck-tour-start",f.track("truck-tour-start")):v["credit-support"].includes(i)?(digitaldata.onclick.onclickLinkName=b+":email us",digitaldata.onclick.onclick="support:email us",digitaldata.action.event="contact email",f.track("email-us-onclick")):v["dealer-application"].includes(i)?(digitaldata.page.pageName="about ford:dealer application",digitaldata.page.siteSection="company",digitaldata.page.hierarchy="company:ford:company:about",digitaldata.page.pageNameNoVehicle="about ford:dealer application",digitaldata.page.variantName="ford-app-start",f.track("ford-app-start")):v.enews.includes(i)?(digitaldata.page.pageName="ford enews:signup",digitaldata.page.siteSection="ford enews",digitaldata.page.hierarchy="ford-enews:signup",digitaldata.page.pageNameNoVehicle="ford enews:signup",digitaldata.page.site=digitaldata.page.site,f.track("global-overlay")):v["extended-warranty"].includes(i)?"ford-owner"===w?(digitaldata.page.pageName="flmo:protect:maintenance package:buy protect plans overlay",digitaldata.page.siteSection="ford protect",digitaldata.page.hierarchy="flmo:protect:maintenance package:buy protect plans",digitaldata.page.pageNameNoVehicle="flmo:protect:maintenance package:buy protect plans overlay",f.track("global-overlay")):(digitaldata.page.pageName="service:extended warranty:info",digitaldata.page.siteSection="owners",digitaldata.page.hierarchy="owners:ford owner:service",digitaldata.page.pageNameNoVehicle="service:extended warranty:info",digitaldata.page.variantName="service-form-start",f.track("service-form-start")):v.flttd.includes(i)?(digitaldata.page.pageName="fleet:test drive:contact",digitaldata.page.siteSection="fleet",digitaldata.page.hierarchy="vehicle:corporate fleet",digitaldata.page.pageNameNoVehicle="fleet:test drive:contact",digitaldata.page.variantName="fleet-td-start",f.track("fleet-td-start")):v["service-booking"].includes(i)?(digitaldata.page.pageName="service:book online:info",digitaldata.page.siteSection="owners",digitaldata.page.hierarchy="owners:ford owner:service",digitaldata.page.pageNameNoVehicle="service:book online:info",digitaldata.page.variantName="service-form-start",f.track("service-form-start")):v.fltparnter.includes(i)?(digitaldata.page.pageName="fleet:partner reward:contact",digitaldata.page.siteSection="fleet",digitaldata.page.hierarchy="vehicle:corporate fleet",digitaldata.page.pageNameNoVehicle="fleet:partner reward:contact",digitaldata.page.variantName="fleet-register-start",f.track("fleet-register-start")):v.fltfranchise.includes(i)?(digitaldata.page.pageName="fleet:franchise:contact",digitaldata.page.siteSection="fleet",digitaldata.page.hierarchy="vehicle:corporate fleet",digitaldata.page.pageNameNoVehicle="fleet:franchise:contact",digitaldata.page.variantName="fleet-register-start",f.track("fleet-register-start")):v["online-booking"].includes(i)?(P&&(digitaldata.page.pageName="reserve vehicle:step1:"+P.nameplate,digitaldata.page.hierarchy="reserve vehicle:"+P.nameplate.toLowerCase(),digitaldata.page.nameplate=P.nameplate),digitaldata.page.siteSection="reserve vehicle",digitaldata.page.pageNameNoVehicle="reserve vehicle:step1",digitaldata.page.variantName="reserve-vehicle-landing",f.track("reserve-vehicle-landing")):v["referral-campaign"].includes(i)?(digitaldata.page.pageName="employee referral campaign:register",digitaldata.page.siteSection="employee referral campaign",digitaldata.page.hierarchy="employee referral campaign",digitaldata.page.pageNameNoVehicle="employee referral campaign:register",digitaldata.page.variantName="global-load",f.track("global-load")):v.projectKing.includes(i)?(digitaldata.page.pageName="project king:register",digitaldata.page.siteSection="project king",digitaldata.page.hierarchy="shopping tools:project king",digitaldata.page.pageNameNoVehicle="project king:register",digitaldata.page.variantName="get-updates-start","direct"!=fordAnalytics.formLocation&&f.track("get-updates-start")):v.territoryreferral.includes(i)?(digitaldata.page.pageName="territory referral campaign:register",digitaldata.page.siteSection="territory referral campaign",digitaldata.page.hierarchy="territory referral campaign",digitaldata.page.pageNameNoVehicle="territory referral campaign:register",digitaldata.page.variantName="global-load",f.track("global-load")):v["latest-offer"].includes(i)?(digitaldata.page.pageName="latest offer:register",digitaldata.page.hierarchy="shopping tools:latest offers",fordAnalytics.modelYear&&(digitaldata.page.hierarchy+=":"+fordAnalytics.modelYear,digitaldata.page.modelYear=fordAnalytics.modelYear),fordAnalytics.vehicleCategory&&(digitaldata.page.hierarchy+=":"+fordAnalytics.vehicleCategory),fordAnalytics.nameplate&&(digitaldata.page.pageName+=":"+fordAnalytics.nameplate,digitaldata.page.hierarchy+=":"+fordAnalytics.nameplate,digitaldata.page.nameplate=fordAnalytics.nameplate),digitaldata.page.siteSection="latest offers",digitaldata.page.pageNameNoVehicle="latest offer:register",digitaldata.event.action="tool",digitaldata.page.variantName="global-load","direct"!=fordAnalytics.formLocation&&f.track("global-load")):v["safeguard-duty-pricing-refund"].includes(i)&&(digitaldata.page.pageName=i+":start",digitaldata.page.siteSection=i,digitaldata.page.hierarchy="shopping tools:"+i,digitaldata.page.pageNameNoVehicle=i+":start",fordAnalytics.nameplate&&(digitaldata.page.pageName+=":"+fordAnalytics.nameplate,digitaldata.page.nameplate=fordAnalytics.nameplate),fordAnalytics.modelYear&&(digitaldata.page.modelYear=fordAnalytics.modelYear),digitaldata.page.variantName="global-load","direct"!=fordAnalytics.formLocation)&&f.track("global-load"),f.resetDatalayer()}function T(e){digitaldata.page.nameplate=e||fordAnalytics.nameplate,digitaldata.vehicle.nameplate=digitaldata.page.nameplate}function N(e){digitaldata.page.modelYear=e||fordAnalytics.modelYear,digitaldata.vehicle.modelYear=digitaldata.page.modelYear}function A(){digitaldata.vehicle.nameplate=fordAnalytics.nameplate||"",digitaldata.vehicle.modelYear=fordAnalytics.modelYear||"",digitaldata.vehicle.vehicleCategory=fordAnalytics.nameplate||""}function I(){var e=m(document).find(".hidden-fields"),t=e?.find("input[name='nameplate']").val(),a=e?.find("input[name='modelyear']").val(),e=e?.find("input[name='vehiclecategory']").val();digitaldata.page.modelYear=a||fordAnalytics.modelYear,digitaldata.vehicle.modelYear=digitaldata.page.modelYear,digitaldata.page.hierarchy+=":"+digitaldata.page.modelYear,digitaldata.page.hierarchy+=":"+(e||fordAnalytics.vehicleCategory),digitaldata.page.nameplate=t||fordAnalytics.nameplate,digitaldata.page.pageName+=":"+digitaldata.page.nameplate,digitaldata.vehicle.nameplate=digitaldata.page.nameplate,fordAnalytics.nameplate&&(digitaldata.page.hierarchy+=":"+fordAnalytics.nameplate)}return void 0!==D&&(D=D.toLowerCase()),m(a).click(function(){n="br"==D?1:0}),t.onlineBookingFormNext=function(e){2==e?(P&&(digitaldata.page.pageName="reserve vehicle:step2:"+P.nameplate,digitaldata.page.hierarchy="reserve vehicle:"+P.nameplate.toLowerCase(),digitaldata.page.nameplate=P.nameplate),digitaldata.page.siteSection="reserve vehicle",digitaldata.page.pageNameNoVehicle="reserve vehicle:step2",digitaldata.page.variantName="reserve-vehicle-popup",f.track("reserve-vehicle-popup")):3==e?(P&&(digitaldata.page.pageName="reserve vehicle:step3 summary:"+P.nameplate,digitaldata.page.hierarchy="reserve vehicle:"+P.nameplate.toLowerCase(),digitaldata.page.nameplate=P.nameplate),digitaldata.page.siteSection="reserve vehicle",digitaldata.page.pageNameNoVehicle="reserve vehicle:step3 summary",digitaldata.page.variantName="reserve-vehicle-summary",f.track("reserve-vehicle-summary")):4==e&&(P&&(digitaldata.page.pageName="reserve vehicle:step4 payment:"+P.nameplate,digitaldata.page.hierarchy="reserve vehicle:payment",digitaldata.page.nameplate=P.nameplate),digitaldata.page.siteSection="reserve vehicle",digitaldata.page.pageNameNoVehicle="reserve vehicle:step4 payment",digitaldata.page.variantName="reserve-vehicle-payment",digitaldata.page.tool="event:reservation start",digitaldata.page.toolDescriptor="reservation start",f.track("reserve-vehicle-payment"))},t.formInitiate=function(e){var t=location.hash;void 0===e||e?(""==t&&(fordAnalytics.formLocation="direct"),i(location.href)):t&&setTimeout(function(){fordAnalytics.formLocation="direct",i(t)},2e3),"standalone"===fordAnalytics.formType&&A(),setTimeout(function(){{let e="#overlay/content/ford/",t;t="mx"===D?"/site-wide-content/overlays/":"/site-wide-content/overlays/forms/",m("a[href*='"+e+"'][href*='"+t+"']").off("click.analyticsFormClick"),m("a[href*='"+e+"'][href*='"+t+"']").on("click.analyticsFormClick",function(){var e=m(this).attr("href");0<m(this).parents("nav.main-nav").length?fordAnalytics.formLocation="header":0<m(this).parents(".secondaryNavigation").length?fordAnalytics.formLocation="sub nav":0<m(this).parents(".billboardCarousel").length?fordAnalytics.formLocation="billboard":0<m(this).parents(".isBrochureDownload").length?fordAnalytics.formLocation="brochure overlay":fordAnalytics.formLocation="unknown",i(e)}),m("a[href*='"+e+"'][href*='"+t+"']").attr("data-analytics","nocampaigntag")}},500)},t.formComplete=function(e,t){var a,i,n,o,r,l=new Date,l=l.getFullYear().toString().substr(2,2)+""+l.getDate()+l.getMonth()+1,s=Math.floor(9e9*Math.random())+1e9,c=(m(".form.section").find("form .configuration.fcongform"),fordAnalytics.formType||""),d=(e=!!e,fordAnalytics.formStart||("standalone"===c&&fordAnalytics.formName?fordAnalytics.formName:"")),u=fordAnalytics.formOverwrite,p=v.brochure.includes(d)||x?m(".form .checkboxCarousel label.checked").children("input[analytics-vehiclecategory]"):m('select[name="VOI_MODEL_CODE"], select[name="VOI_MODEL_DESCRIPTION"]').find(":selected");fordAnalytics.formLocation=fordAnalytics.formLocation||"","redesign"===c&&fordAnalytics.formName&&(d=fordAnalytics.formName),""!==fordAnalytics.formLocation&&""!==y&&(digitaldata.onclick.contentType=y+":"+C+":"+fordAnalytics.formLocation),fordAnalytics.nameplate=fordAnalytics.nameplate||"",fordAnalytics.modelYear=fordAnalytics.modelYear||"",fordAnalytics.vehicleCategory=fordAnalytics.vehicleCategory||"",p&&m(p).attr("analytics-vehiclecategory")&&!u?(fordAnalytics.nameplate=m(p).attr("analytics-nameplate"),fordAnalytics.modelYear=m(p).attr("analytics-modelyear"),fordAnalytics.vehicleCategory=m(p).attr("analytics-vehiclecategory")):1!==m('input[name="nameplate_1"][type="hidden"]').length||u?1!==m('input[name="nameplate"][type="hidden"]').length||u||("Nameplate"!=m('input[name="nameplate"]').val()&&""!=m('input[name="nameplate"]').val()&&(fordAnalytics.nameplate=m('input[name="nameplate"]').val()),fordAnalytics.vehicleCategory=m('input[name="vehiclecategory"]').val()):(fordAnalytics.nameplate=m('input[name="nameplate_1"]').val(),fordAnalytics.modelYear=m('input[name="modelyear"]').val(),fordAnalytics.vehicleCategory=m('input[name="vehiclecategory"]').val()),"standalone"===c&&(_analytics_createCookie("analytics.standaloneform.nameplate",fordAnalytics.nameplate,1),_analytics_createCookie("analytics.standaloneform.modelYear",fordAnalytics.modelYear,1),_analytics_createCookie("analytics.standaloneform.category",fordAnalytics.vehicleCategory,1),A()),v.kmi.includes(d)?(k.includes(D)?(digitaldata.page.pageName="get updates:complete",digitaldata.page.hierarchy="shopping tools:get updates:confirm",digitaldata.page.toolDescriptor="get updates"):(digitaldata.page.pageName="get updates:2:confirm",digitaldata.page.hierarchy="shopping tools:get updates"),digitaldata.page.pageNameNoVehicle=digitaldata.page.pageName,digitaldata.page.siteSection="get updates",fordAnalytics.modelYear&&fordAnalytics.nameplate&&(digitaldata.page.pageName+=":"+fordAnalytics.nameplate,digitaldata.page.hierarchy+=":"+fordAnalytics.modelYear+":"+fordAnalytics.vehicleCategory+":"+fordAnalytics.nameplate,T(),N()),digitaldata.page.tool="event:get updates",digitaldata.event.action="tool|lead submitted",0<m('input[name="acknowledge"]:checked, input[name^="CONTACT_PERMISSION_OPTION"]:checked, input[name^="CONTACT_PERMISSION_CODE"]:checked, input[name^="FL_PERMISSION"]:checked').length&&1!=m("#CONTACT_PERMISSION_CODE-2:checked").length&&(digitaldata.user.leadOptin="email direct opt-in",digitaldata.event.action="tool|lead submitted|updates opt-in"),n=l+"-KM-"+s,digitaldata.user.cksVisitId=n,digitaldata.user.leadType="get updates",digitaldata.page.variantName="get-updates-complete",f.track("get-updates-complete")):v.eckmi.includes(d.toLowerCase())?(digitaldata.page.pageName="ec:kmi complete",digitaldata.page.hierarchy="ec:kmi:",digitaldata.page.pageNameNoVehicle="ec:kmi complete",digitaldata.page.siteSection="get updates",fordAnalytics.modelYear&&fordAnalytics.nameplate&&(digitaldata.page.pageName+=":"+fordAnalytics.nameplate,digitaldata.page.hierarchy+=":"+fordAnalytics.modelYear+":"+fordAnalytics.vehicleCategory+":"+fordAnalytics.nameplate,T(),N()),digitaldata.page.tool="event:get updates",digitaldata.event.action="lead submitted",0<m('input[name="acknowledge"]:checked, input[name^="CONTACT_PERMISSION_OPTION"]:checked, input[name^="CONTACT_PERMISSION_CODE"]:checked, input[name^="FL_PERMISSION"]:checked').length&&1!=m("#CONTACT_PERMISSION_CODE-2:checked").length&&(digitaldata.user.leadOptin="email direct opt-in",digitaldata.event.action="lead submitted|updates opt-in"),n=l+"-kmi-"+s,digitaldata.user.cksVisitId=n,digitaldata.user.leadType="get updates",digitaldata.page.variantName="get-updates-complete",f.track("get-updates-complete")):v["friends-get-friends"]&&v["friends-get-friends"].includes(d)?(digitaldata.page.pageName="get updates:2:confirm",digitaldata.page.client="ford-thailand",digitaldata.page.site="ford-brand",digitaldata.page.userLanguage="tha",digitaldata.page.radUIVersion="ui:rad:pc",digitaldata.page.siteSection="get updates",digitaldata.page.hierarchy="shopping tools:get updates",digitaldata.page.pageNameNoVehicle="get updates:2:confirm",null!==fordAnalytics.nameplate&&(digitaldata.page.pageName+=":ford ranger raptor",digitaldata.page.nameplate="ford ranger raptor"),digitaldata.page.variantName="get-updates-complete",f.track("get-updates-complete")):v["social-club"]&&v["social-club"].includes(d)?(digitaldata.page.pageName="get updates social club:2:confirm",digitaldata.page.siteSection="get updates",digitaldata.page.siteLevel="shopping tools:get updates",digitaldata.page.variantName="get-updates-complete",digitaldata.page.client="ford-thailand",digitaldata.page.site="ford-brand",digitaldata.page.userLanguage="tha",digitaldata.page.radUIVersion="ui:rad:pc",digitaldata.page.tool="event:get updates",digitaldata.page.leadType="get updates",digitaldata.page.pageNameNoVehicle="get updates social club:2:confirm",null!==fordAnalytics.nameplate&&(digitaldata.page.nameplate=fordAnalytics.nameplate),null!==fordAnalytics.modelYear&&(digitaldata.page.modelYear=fordAnalytics.modelYear),digitaldata.page.variantName="get-updates-complete",f.track("get-updates-complete")):v.kmitory&&v.kmitory.includes(d)?(digitaldata.page.pageName="ec:prereveal:kmi complete",digitaldata.page.hierarchy="ec:pre-reveal:kmi:2024:suv:ford territory",digitaldata.page.pageNameNoVehicle="ec:prereveal:kmi complete",digitaldata.page.siteSection="get updates",digitaldata.page.client="ford-south africa",digitaldata.page.userLanguage="eng",digitaldata.page.modelYear="2024",digitaldata.page.radUIVersion="ui:rad:pc",digitaldata.page.tool="event:get updates",digitaldata.event.action="lead submitted",null!==fordAnalytics.nameplate&&(digitaldata.page.pageName+=":ford territory",digitaldata.page.nameplate="ford territory"),digitaldata.page.variantName="get-updates-complete",f.track("get-updates-complete")):v["Keep-Me-Updated"].includes(d)?(digitaldata.page.pageName="get updates:complete",digitaldata.page.siteSection="get updates",digitaldata.page.hierarchy="shopping tools:get updates:confirm",digitaldata.page.pageNameNoVehicle=digitaldata.page.pageName,digitaldata.event.action="tool|lead submitted",digitaldata.vehicle.nameplate=fordAnalytics.nameplate||"",digitaldata.vehicle.modelYear=fordAnalytics.modelYear||"",digitaldata.vehicle.bodyModelTrim=fordAnalytics.vehicleCategory||"",fordAnalytics.nameplate&&(digitaldata.page.pageName+=":"+fordAnalytics.nameplate,digitaldata.page.nameplate=fordAnalytics.nameplate),fordAnalytics.modelYear&&(digitaldata.page.hierarchy+=":"+fordAnalytics.modelYear,digitaldata.page.modelYear=fordAnalytics.modelYear),fordAnalytics.vehicleCategory&&(digitaldata.page.hierarchy+=":"+fordAnalytics.vehicleCategory),fordAnalytics.nameplate&&(digitaldata.page.hierarchy+=":"+fordAnalytics.nameplate),digitaldata.page.variantName="get-updates-complete",digitaldata.event.action="tool|lead submitted",digitaldata.user.leadType="get updates",digitaldata.page.tool="event:get updates",0<m('input[name="acknowledge"]:checked, input[name^="CONTACT_PERMISSION_OPTION"]:checked, input[name^="CONTACT_PERMISSION_CODE"]:checked, input[name^="FL_PERMISSION"]:checked').length&&1!=m("#CONTACT_PERMISSION_CODE-2:checked").length&&(digitaldata.user.leadOptin="email direct opt-in",digitaldata.event.action="tool|lead submitted|updates opt-in"),f.track("get-updates-complete")):v.raq.includes(d)?(k.includes(D)||"za"==D?(digitaldata.page.pageName="vrfq:complete",digitaldata.page.hierarchy="shopping tools:get quote:confirmation",digitaldata.user.leadType="vrfq"):(digitaldata.page.pageName="vrfq:thank you",digitaldata.page.hierarchy="shopping tools:get quote",digitaldata.user.leadType="vrfq:"),digitaldata.page.siteSection="get quote",digitaldata.page.pageNameNoVehicle=digitaldata.page.pageName,I(),digitaldata.page.tool="event: vehicle quote",digitaldata.page.toolDescriptor="request a quote",digitaldata.page.variantName="vrfq-complete",digitaldata.event.action="vehicle quote|lead submitted|tool",0<m('input[name="acknowledge"]:checked,  input[name="legalAgreement"]:checked, input[name^="CONTACT_PERMISSION_OPTION"]:checked, input[name^="CONTACT_PERMISSION_CODE"]:checked').length&&1!=m("#CONTACT_PERMISSION_CODE-2:checked").length&&(digitaldata.user.leadOptin="email opt-in full",k.includes(D)||(digitaldata.event.action+="|updates opt-in"),"standalone"===c)&&(_analytics_createCookie("analytics.standalone.emailOptin","1",1),_analytics_createCookie("analytics.standalone.updatesOptin","1",1)),k.includes(D)&&(digitaldata.event.action+="|quick quote|updates opt-in"),n=l+"-RQ-"+s,digitaldata.user.cksVisitId=n,digitaldata.page.variantName="vrfq-complete","standalone"!==c&&f.track("vrfq-complete")):v["get-a-deal"].includes(d)?(n=l+"-KM-"+s,digitaldata.user.cksVisitId=n,A()):v["quick-quote"].includes(d)?(digitaldata.page.pageName="qrfq:gip:thank you",digitaldata.page.siteSection="quick quote",digitaldata.page.hierarchy="shopping tools:quick quote",digitaldata.page.pageNameNoVehicle=digitaldata.page.pageName,fordAnalytics.modelYear&&fordAnalytics.nameplate&&(digitaldata.page.pageName+=":"+fordAnalytics.nameplate,digitaldata.page.hierarchy+=":"+fordAnalytics.modelYear+":"+fordAnalytics.vehicleCategory+":"+fordAnalytics.nameplate,T(),N()),digitaldata.page.tool="event:quick quote",digitaldata.event.action="quick quote|lead submitted|tool",0<m('input[name="acknowledge"]:checked, input[name^="CONTACT_PERMISSION_OPTION"]:checked, input[name^="CONTACT_PERMISSION_CODE"]:checked').length&&(digitaldata.user.leadOptin="email direct opt-in",digitaldata.event.action+="|updates opt-in","standalone"===c)&&(_analytics_createCookie("analytics.standalone.emailOptin","1",1),_analytics_createCookie("analytics.standalone.updatesOptin","1",1)),digitaldata.user.leadType="qrfq:gip",digitaldata.page.variantName="quick-quote-complete","standalone"!==c&&f.track("quick-quote-complete")):v["request-a-call"].includes(d)?(digitaldata.page.pageName="get call:thank you",digitaldata.page.siteSection="get call",digitaldata.page.hierarchy="shopping tools:get call",digitaldata.page.pageNameNoVehicle=digitaldata.page.pageName,fordAnalytics.nameplate&&(digitaldata.page.pageName+=":"+fordAnalytics.nameplate,digitaldata.page.hierarchy+=":"+fordAnalytics.vehicleCategory+":"+fordAnalytics.nameplate,T(),N()),digitaldata.page.tool="event:get call",digitaldata.event.action="get call|lead submitted|tool",0<m('input[name="acknowledge"]:checked, input[name^="CONTACT_PERMISSION_OPTION"]:checked, input[name^="CONTACT_PERMISSION_CODE"]:checked').length&&(digitaldata.user.leadOptin="email direct opt-in",digitaldata.event.action+="|updates opt-in","standalone"===c)&&(_analytics_createCookie("analytics.standalone.emailOptin","1",1),_analytics_createCookie("analytics.standalone.updatesOptin","1",1)),digitaldata.user.leadType="get call",digitaldata.page.variantName="request-call-complete","standalone"!==c&&f.track("request-call-complete")):v["private-offer"].includes(d)?(digitaldata.page.pageName="vehicle:private offer:2:thank you",digitaldata.page.siteSection="incentives",digitaldata.page.hierarchy="vehicle:incentives",digitaldata.page.pageNameNoVehicle=digitaldata.page.pageName,fordAnalytics.nameplate&&(digitaldata.page.pageName+=":"+fordAnalytics.nameplate,T(),N()),digitaldata.page.tool="event:incentives",digitaldata.event.action="incentives|lead submitted|tool",0<m('input[name="acknowledge"]:checked, input[name^="CONTACT_PERMISSION_OPTION"]:checked, input[name^="CONTACT_PERMISSION_CODE"]:checked').length&&(digitaldata.user.leadOptin="email direct opt-in",digitaldata.event.action+="|updates opt-in","standalone"===c)&&(_analytics_createCookie("analytics.standalone.emailOptin","1",1),_analytics_createCookie("analytics.standalone.updatesOptin","1",1)),digitaldata.user.leadType="incentives",digitaldata.page.variantName="private-offer-complete","standalone"!==c&&f.track("private-offer-complete")):v["lucky-draw"].includes(d)?(digitaldata.page.pageName="flmo:portal:lucky draw:register:thank you",digitaldata.page.siteSection="lucky-draw",digitaldata.page.hierarchy="owner:flmo:lucky draw",digitaldata.page.pageNameNoVehicle=digitaldata.page.pageName,digitaldata.page.toolDescriptor="lucky draw registered",digitaldata.page.tool="lucky-draw",digitaldata.event.action="lead Info | site reg | tool",0<m('input[name="acknowledge"]:checked, input[name^="CONTACT_PERMISSION_OPTION"]:checked, input[name^="CONTACT_PERMISSION_CODE"]:checked').length&&1!=m("#CONTACT_PERMISSION_CODE-2:checked").length&&(digitaldata.event.action+="| opt-in","standalone"===c)&&(_analytics_createCookie("analytics.standalone.emailOptin","1",1),_analytics_createCookie("analytics.standalone.updatesOptin","1",1)),digitaldata.user.leadType="lucky-draw",digitaldata.page.variantName="registration-thankyou","standalone"!==c&&f.track("registration-thankyou")):v.td.includes(d)?(k.includes(D)?(digitaldata.page.pageName="vehicle:test drive:complete",digitaldata.page.toolDescriptor="test drive"):S.includes(D)?digitaldata.page.pageName="vehicle:test drive:complete":digitaldata.page.pageName="vehicle:test drive:2:confirm",digitaldata.page.siteSection="test drive",digitaldata.page.hierarchy="shopping tools:test drive",digitaldata.page.variantName="test-drive-complete",digitaldata.page.pageNameNoVehicle=digitaldata.page.pageName,I(),k.includes(D)&&(digitaldata.page.hierarchy="shopping tools:test drive:confirmation"),digitaldata.page.tool="event: test drive",digitaldata.event.action="lead submitted|tool|test drive",digitaldata.user.leadType="test drive",0<m('input[name="acknowledge"]:checked, input[name="legalAgreement"]:checked, input[name^="CONTACT_PERMISSION_OPTION"]:checked, input[name^="CONTACT_PERMISSION_CODE"]:checked, input[name="rad_authorise_set3_checkbox"]:checked, input[name="EMAIL_OPT-IN"]:checked').length&&1!=m("#CONTACT_PERMISSION_CODE-2:checked").length&&(digitaldata.user.leadOptin="email direct opt-in",digitaldata.event.action+="|updates opt-in","standalone"===c)&&(_analytics_createCookie("analytics.standalone.emailOptin","1",1),_analytics_createCookie("analytics.standalone.updatesOptin","1",1)),"vnm"===h.getCurrentiso3MarketCode()&&("direct"==fordAnalytics.formLocation&&"redesign"!=fordAnalytics.formType&&(c="standalone"),0<m("input[name='nameplate']").length)&&""!=m("input[name='nameplate']").val()&&(r=m("input[name='nameplate']").val(),fordAnalytics.nameplate=r,_analytics_createCookie("analytics.standaloneform.nameplate",r,1),0<m("input[name='modelyear']").length?(p=m("input[name='modelyear']").val(),fordAnalytics.modelYear=p,_analytics_createCookie("analytics.standaloneform.modelYear",p,1)):_analytics_createCookie("analytics.standaloneform.modelYear","",1)),(a=document.querySelector('[name="DealerID"]'))&&""!==a.value&&(digitaldata.page.dealerID=a.value),(i=document.querySelector('[data-preselect][name="STATE"]'))&&(digitaldata.user.fordRegion=i.options[i.selectedIndex]&&i.options[i.selectedIndex].text),n=t||l+"-TD-"+s,digitaldata.user.cksVisitId=n,digitaldata.user.leadType="test drive","standalone"!==c&&f.track("test-drive-complete")):v.brochure.includes(d)||e||x?(k.includes(D)?(digitaldata.page.pageName="vehicle:brochure download:complete",digitaldata.page.tool="event:pdf brochure",digitaldata.page.toolDescriptor="brochure download",digitaldata.user.leadType="brochure:anonymous:pdf:select",f.track("brochure-complete-1"),digitaldata.page.siteSection="brochures",digitaldata.page.hierarchy="shopping tools:brochures",digitaldata.page.pageNameNoVehicle=digitaldata.page.pageName):S?(digitaldata.page.pageName="brochure download:start:"+fordAnalytics.nameplate,digitaldata.page.siteSection="shopping tools:brochures",digitaldata.page.hierarchy="brochures:"+fordAnalytics.modelYear+":"+fordAnalytics.vehicleCategory+":"+fordAnalytics.nameplate,digitaldata.page.pageNameNoVehicle="brochure download:start"):(digitaldata.page.pageName="vehicle:brochure download:2:confirm",digitaldata.page.siteSection="brochures",digitaldata.page.hierarchy="shopping tools:brochures",digitaldata.page.pageNameNoVehicle=digitaldata.page.pageName),fordAnalytics.modelYear&&fordAnalytics.nameplate&&(digitaldata.page.pageName+=":"+fordAnalytics.nameplate,T(),N()),digitaldata.user.leadType="brochure",digitaldata.page.tool="event:pdf brochure",(e="vnm"===h.getCurrentiso3MarketCode()?!0:e)?(r=g.getParameterByName("analyticsnameplate"),o=g.getParameterByName("analyticsmodelyear"),digitaldata.user.leadType+=":anonymous:pdf",digitaldata.page.tool="event:pdf brochure",digitaldata.event.action="tool|pdf brochure",digitaldata.page.siteSection="shopping tools:brochures",digitaldata.page.pageNameNoVehicle="model compare:landing",r&&(digitaldata.page.pageName+="brochure download:complete:"+r,digitaldata.page.nameplate=r,digitaldata.vehicle.nameplate=r),o&&(digitaldata.page.modelYear=o,digitaldata.vehicle.modelYear=o),"standalone"===c&&_analytics_createCookie("analytics.standalone.brochureLeadType","anonymous",1)):(digitaldata.user.leadType+=":identified:postal",digitaldata.page.tool="event:postal brochure",digitaldata.event.action="tool|mailed brochure|lead submitted","standalone"===c&&_analytics_createCookie("analytics.standalone.brochureLeadType","mail",1)),0<m('input[name="acknowledge"]:checked, input[name^="CONTACT_PERMISSION_OPTION"]:checked, input[name^="CONTACT_PERMISSION_CODE"]:checked').length&&!e&&1!=m("#CONTACT_PERMISSION_CODE-2:checked").length&&(digitaldata.user.leadOptin="email direct opt-in",digitaldata.event.action+="|updates opt-in","standalone"===c)&&(_analytics_createCookie("analytics.standalone.emailOptin","1",1),_analytics_createCookie("analytics.standalone.updatesOptin","1",1)),"standalone"!==c&&f.track("brochure-pdf-download")):v.brochure.includes(d)?(r=g.getParameterByName("analyticsnameplate"),o=g.getParameterByName("analyticsmodelyear"),digitaldata.page.pageName="brochure download:complete:"+fordAnalytics.nameplate,digitaldata.page.siteSection="shopping tools:brochures",digitaldata.page.hierarchy="brochures:"+fordAnalytics.modelYear+":"+fordAnalytics.vehicleCategory+":"+fordAnalytics.nameplate,digitaldata.page.pageNameNoVehicle="brochure download:complete",r&&(digitaldata.page.pageName+=":"+r,digitaldata.page.nameplate=r,digitaldata.vehicle.nameplate=r),o&&(digitaldata.page.modelYear=o,digitaldata.vehicle.modelYear=o),digitaldata.user.leadType="brochure",digitaldata.page.tool="event:pdf brochure",0<m('input[name="acknowledge"]:checked, input[name^="CONTACT_PERMISSION_OPTION"]:checked, input[name^="CONTACT_PERMISSION_CODE"]:checked').length&&!e&&1!=m("#CONTACT_PERMISSION_CODE-2:checked").length&&(digitaldata.user.leadOptin="email direct opt-in",digitaldata.event.action+="|updates opt-in"),"standalone"!==c&&f.track("brochure-pdf-download")):v.fltregsb.includes(d)?(digitaldata.page.pageName="fleet:business:contact confirm",digitaldata.page.siteSection="fleet",digitaldata.page.hierarchy="vehicle:corporate fleet",digitaldata.page.pageNameNoVehicle=digitaldata.page.pageName,digitaldata.event.action="lead submitted",0<m('input[name="acknowledge"]:checked, input[name^="CONTACT_PERMISSION_OPTION"]:checked, input[name^="CONTACT_PERMISSION_CODE"]:checked').length&&(digitaldata.user.leadOptin="email direct opt-in",digitaldata.event.action+="|updates opt-in"),digitaldata.user.leadType="fleet",f.track("fleet-register-complete")):v.fltregcom.includes(d)||v.fltreg.includes(d)?(digitaldata.page.pageName="fleet:register:thank you",digitaldata.page.siteSection="fleet",digitaldata.page.hierarchy="vehicle:corporate fleet",digitaldata.page.pageNameNoVehicle=digitaldata.page.pageName,digitaldata.event.action="lead submitted",digitaldata.page.variantName="fleet-register-complete",0<m('input[name="acknowledge"]:checked, input[name^="CONTACT_PERMISSION_OPTION"]:checked, input[name^="CONTACT_PERMISSION_CODE"]:checked').length&&(digitaldata.user.leadOptin="email direct opt-in",digitaldata.event.action+="|updates opt-in"),digitaldata.user.leadType="fleet",f.track("fleet-register-complete")):v.retentionCampaign.includes(d)?(digitaldata.page.pageName="retention campaign:confirm",digitaldata.page.siteSection="retention",digitaldata.page.hierarchy="retention campaign",digitaldata.page.pageNameNoVehicle="retention campaign:confirm",digitaldata.page.tool="event: retention",digitaldata.page.toolDescriptor="retention campaign",digitaldata.event.action="lead submitted|tool",digitaldata.page.variantName="retention-complete",digitaldata.vehicle.nameplate=fordAnalytics.nameplate||"",digitaldata.vehicle.modelYear=fordAnalytics.modelYear||"",digitaldata.vehicle.bodyModelTrim=fordAnalytics.vehicleCategory||"",fordAnalytics.nameplate&&(digitaldata.page.pageName+=":"+fordAnalytics.nameplate,digitaldata.page.nameplate=fordAnalytics.nameplate),fordAnalytics.modelYear&&(digitaldata.page.hierarchy+=":"+fordAnalytics.modelYear,digitaldata.page.modelYear=fordAnalytics.modelYear),fordAnalytics.vehicleCategory&&(digitaldata.page.hierarchy+=":"+fordAnalytics.vehicleCategory),fordAnalytics.nameplate&&(digitaldata.page.hierarchy+=":"+fordAnalytics.nameplate),n=l+"-RC-"+s,digitaldata.user.cksVisitId=n,(a=document.querySelector('[name="DealerID"]'))&&""!==a.value&&(digitaldata.page.dealerID=a.value),(i=document.querySelector('[data-preselect][name="STATE"]'))&&(digitaldata.user.fordRegion=i.options[i.selectedIndex]&&i.options[i.selectedIndex].text),0<m('input[name="acknowledge"]:checked, input[name^="CONTACT_PERMISSION_OPTION"]:checked, input[name^="CONTACT_PERMISSION_CODE"]:checked').length&&(digitaldata.user.leadOptin="email opt-in full",digitaldata.event.action+="|updates opt-in"),digitaldata.user.leadType="retention",f.track("retention-complete")):v["contact-us"].includes(d)?k.includes(D)||"za"==D?(digitaldata.page.pageName="contact us:complete",digitaldata.page.siteSection="contact us",digitaldata.page.hierarchy="contact us:confirm",digitaldata.page.pageNameNoVehicle=digitaldata.page.pageName,digitaldata.page.variantName="contact-complete",digitaldata.page.tool="event: contact",digitaldata.page.toolDescriptor="contact us",digitaldata.event.action="tool|lead submitted|update opt-ins",digitaldata.user.leadType="contact",fordAnalytics.modelYear&&(N(),digitaldata.page.modelYear=fordAnalytics.modelYear),fordAnalytics.nameplate&&(digitaldata.page.pageName+=":"+fordAnalytics.nameplate,digitaldata.page.hierarchy+=":"+fordAnalytics.nameplate,T()),(a=document.querySelector('[name="DealerID"]'))&&""!==a.value&&(digitaldata.page.dealerID=a.value),(i=document.querySelector('[data-preselect][name="STATE"]'))&&(digitaldata.user.fordRegion=i.options[i.selectedIndex]&&i.options[i.selectedIndex].text),0<m('input[name="acknowledge"]:checked, input[name^="CONTACT_PERMISSION_OPTION"]:checked, input[name^="CONTACT_PERMISSION_CODE"]:checked').length&&1!=m("#CONTACT_PERMISSION_CODE-2:checked").length&&(digitaldata.user.leadOptin="email direct opt-in"),f.track("contact-complete")):(digitaldata.page.pageName="help:contact us:form:2:thank you",digitaldata.page.siteSection="help",digitaldata.page.hierarchy="help:contact us",digitaldata.page.pageNameNoVehicle=digitaldata.page.pageName,f.track("contact-form-complete")):v["customer-care"].includes(d)?(u=m(".hidden-fields input[name='nameplate']").val(),p=m(".hidden-fields input[name='modelyear']").val(),t=m(".hidden-fields input[name='vehiclecategory']").val(),digitaldata.page.siteSection="vehicle",digitaldata.page.pageNameNoVehicle="vehicle:customer care:2:thank you",digitaldata.page.pageName="vehicle:customer care:2:thank you",digitaldata.page.hierarchy="vehicle:customer care",p&&(N(p),digitaldata.page.modelYear=p,digitaldata.page.hierarchy+=":"+p),t&&(digitaldata.page.hierarchy+=":"+t),u&&(digitaldata.page.pageName="vehicle:customer care:2:thank you:"+u,T(u),digitaldata.page.hierarchy+=":"+p),f.track("global-overlay")):v["bp-raq"].includes(d)?(digitaldata.page.pageName="bp:vrfq:thank you",digitaldata.page.siteSection="get quote",digitaldata.page.hierarchy="shopping tools:get quote",digitaldata.page.pageNameNoVehicle=digitaldata.page.pageName,fordAnalytics.modelYear&&(N(),digitaldata.page.hierarchy+=":"+fordAnalytics.modelYear),fordAnalytics.vehicleCategory&&(digitaldata.page.hierarchy+=":"+fordAnalytics.vehicleCategory),fordAnalytics.nameplate&&(digitaldata.page.pageName+=":"+fordAnalytics.nameplate,digitaldata.page.hierarchy+=":"+fordAnalytics.nameplate,T()),digitaldata.page.tool="event: vehicle quote",digitaldata.page.toolDescriptor="bp: as-built",digitaldata.event.action="lead submitted|tool|vehicle quote",digitaldata.user.leadOptin="email opt-in full",0<m('input[name="acknowledge"]:checked, input[name^="CONTACT_PERMISSION_OPTION"]:checked, input[name^="CONTACT_PERMISSION_CODE"]:checked').length&&1!=m("#CONTACT_PERMISSION_CODE-2:checked").length&&(digitaldata.user.leadOptin="email direct opt-in",digitaldata.event.action+="|updates opt-in"),n=l+"-BP-"+s,digitaldata.user.cksVisitId=n,digitaldata.user.leadType="vrfq: bp: as-built",digitaldata.page.variantName="bp-vrfq-complete","standalone"!==c&&f.track("bp-vrfq-complete")):v["truck-tour"].includes(d)?(digitaldata.page.pageName="vehicle:truck tour:2:confirm",digitaldata.page.siteSection="promotions",digitaldata.page.hierarchy="shopping tools:truck entry",digitaldata.page.pageNameNoVehicle=digitaldata.page.pageName,fordAnalytics.modelYear&&fordAnalytics.nameplate&&(digitaldata.page.pageName+=":"+fordAnalytics.nameplate,digitaldata.page.hierarchy+=":"+fordAnalytics.modelYear+":"+fordAnalytics.vehicleCategory+":"+fordAnalytics.nameplate,T(),N()),digitaldata.page.tool="event:promo:truck tour",digitaldata.page.variantName="truck-tour-complete",digitaldata.user.leadType="promo truck tour",digitaldata.event.action="lead submitted|tool",0<m('input[name="acknowledge"]:checked, input[name^="CONTACT_PERMISSION_OPTION"]:checked, input[name^="CONTACT_PERMISSION_CODE"]:checked').length&&(digitaldata.user.leadOptin="email direct opt-in",digitaldata.event.action+="|updates opt-in"),f.track("truck-tour-complete")):v["credit-support"].includes(d)?(digitaldata.onclick.onclickLinkName=b+":email us:confirmation",digitaldata.page.tool="event:contact us email",digitaldata.onclick.onclick="support:email us:confirmation",digitaldata.action.event="tool | contact email",f.track("email-us-confirmation-onclick")):v["dealer-application"].includes(d)?(digitaldata.page.pageName="about ford:dealer application:thank you",digitaldata.page.siteSection="company",digitaldata.page.hierarchy="company:ford:company:about",digitaldata.page.pageNameNoVehicle="about ford:dealer application:thank you",digitaldata.page.variantName="ford-app-thank-you",digitaldata.action.event="lead submitted",f.track("ford-app-thank-you")):v.enews.includes(d)?(digitaldata.page.pageName="ford enews:signup:thank you",digitaldata.page.siteSection="ford enews",digitaldata.page.hierarchy="ford-enews:signup",digitaldata.page.pageNameNoVehicle="ford enews:signup:thank you",digitaldata.page.site=digitaldata.page.site,digitaldata.page.tool="event:get updates",digitaldata.page.variantName="get-updates-complete",digitaldata.event.action="tool|lead submitted",n=l+"-GU-"+s,digitaldata.user.cksVisitId=n,digitaldata.user.leadType="enews",digitaldata.user.leadOptin="email direct opt-in",f.track("get-updates-complete")):v["extended-warranty"].includes(d)?"ford-owner"===w?(o=m('select[name="PURCHASE_INTENTION_TIMEFRAME_CODE"]').val()||"",digitaldata.page.pageName="flmo:protect:maintenance package:buy protect plans:thank you:"+o,digitaldata.page.siteSection="ford protect",digitaldata.page.hierarchy="flmo:protect:maintenance package:buy protect plans",digitaldata.page.pageNameNoVehicle="flmo:protect:maintenance package:buy protect plans:thank you",digitaldata.user.leadType="buy protect plan",f.track("protect-plan-thankyou")):(digitaldata.page.pageName="service:extended warranty:info:thank you",digitaldata.page.siteSection="owners",digitaldata.page.hierarchy="owners:ford owner:service",digitaldata.page.pageNameNoVehicle="service:extended warranty:info:thank you",digitaldata.page.variantName="service-form-thank-you",f.track("service-form-thank-you")):v.flttd.includes(d)?(digitaldata.page.pageName="fleet:test drive:contact confirm",digitaldata.page.siteSection="fleet",digitaldata.page.hierarchy="vehicle:corporate fleet",digitaldata.page.pageNameNoVehicle="fleet:test drive:contact confirm",digitaldata.page.variantName="fleet-td-start",digitaldata.event.action="lead submitted|test drive",digitaldata.user.leadType="fleet test drive",0<m('input[name="acknowledge"]:checked, input[name^="CONTACT_PERMISSION_OPTION"]:checked, input[name^="CONTACT_PERMISSION_CODE"]:checked').length&&(digitaldata.user.leadOptin="email direct opt-in"),f.track("fleet-td-start")):v["service-booking"].includes(d)?(digitaldata.page.pageName="service:book online:info:thank you",digitaldata.page.siteSection="owners",digitaldata.page.hierarchy="owners:ford owner:service",digitaldata.page.pageNameNoVehicle="service:book online:info:thank you",digitaldata.page.variantName="service-form-thank-you",f.track("service-form-thank-you")):v.fltparnter.includes(d)?(digitaldata.page.pageName="fleet:partner reward:contact confirm",digitaldata.page.siteSection="fleet",digitaldata.page.hierarchy="vehicle:corporate fleet",digitaldata.page.pageNameNoVehicle=digitaldata.page.pageName,digitaldata.event.action="lead submitted",0<m('input[name="acknowledge"]:checked, input[name^="CONTACT_PERMISSION_OPTION"]:checked, input[name^="CONTACT_PERMISSION_CODE"]:checked').length&&(digitaldata.user.leadOptin="email direct opt-in",digitaldata.event.action+="|updates opt-in"),digitaldata.user.leadType="fleet",f.track("fleet-register-complete")):v.fltfranchise.includes(d)?(digitaldata.page.pageName="fleet:franchise:contact confirm",digitaldata.page.siteSection="fleet",digitaldata.page.hierarchy="vehicle:corporate fleet",digitaldata.page.pageNameNoVehicle=digitaldata.page.pageName,digitaldata.event.action="lead submitted",0<m('input[name="acknowledge"]:checked, input[name^="CONTACT_PERMISSION_OPTION"]:checked, input[name^="CONTACT_PERMISSION_CODE"]:checked').length&&(digitaldata.user.leadOptin="email direct opt-in",digitaldata.event.action+="|updates opt-in"),digitaldata.user.leadType="fleet",f.track("fleet-register-complete")):v["online-booking"].includes(d)?(P&&(digitaldata.page.pageName="reserve vehicle:step5 reservation confirmation:"+P.nameplate,digitaldata.page.hierarchy="reserve vehicle:payment confirmation",digitaldata.page.nameplate=P.nameplate),digitaldata.page.siteSection="reserve vehicle",digitaldata.page.pageNameNoVehicle="reserve vehicle:step5 reservation confirmation",digitaldata.page.variantName="reserve-vehicle-paymentconfirm",digitaldata.user.leadType="reserve confirmation",digitaldata.user.cksVisitId=l+"-OB-"+s,digitaldata.page.tool="event:reservation confirm",digitaldata.page.toolDescriptor="reservation confirm",f.track("reserve-vehicle-paymentconfirm")):v.showroomAtHome.includes(d)?(digitaldata.page.pageName="showroom at home:thank you",digitaldata.page.siteSection="showroom at home",digitaldata.page.hierarchy+="showroom at home:confirmation",digitaldata.page.pageNameNoVehicle="showroom at home:thank you",digitaldata.page.variantName="showroom-complete",digitaldata.user.leadType="showroom at home:register",digitaldata.user.cksVisitId=l+"-SD-"+s,digitaldata.page.tool="event: register",digitaldata.page.toolDescriptor="showroom at home",fordAnalytics.nameplate&&(digitaldata.page.pageName+=":"+fordAnalytics.nameplate,digitaldata.page.nameplate=fordAnalytics.nameplate,digitaldata.page.modelYear=fordAnalytics.modelYear),digitaldata.vehicle.nameplate=fordAnalytics.nameplate||"",digitaldata.vehicle.modelYear=fordAnalytics.modelYear||"",0<m('input[name="acknowledge"]:checked, input[name^="CONTACT_PERMISSION_OPTION"]:checked, input[name^="CONTACT_PERMISSION_CODE"]:checked').length&&(digitaldata.user.leadOptin="email direct opt-in",digitaldata.event.action+="|updates opt-in"),f.track("showroom-complete")):v.showroomOnDemand.includes(d)?(digitaldata.page.pageName="showroom on demand:thank you",digitaldata.page.siteSection="showroom on demand",digitaldata.page.hierarchy+="showroom on demand:confirmation",digitaldata.page.pageNameNoVehicle="showroom on demand:thank you",digitaldata.page.variantName="showroom-complete",digitaldata.user.leadType="showroom on demand:register",digitaldata.user.cksVisitId=l+"-SD-"+s,digitaldata.page.tool="event: register",digitaldata.page.toolDescriptor="showroom on demand",fordAnalytics.nameplate&&(digitaldata.page.pageName+=":"+fordAnalytics.nameplate,digitaldata.page.nameplate=fordAnalytics.nameplate,digitaldata.page.modelYear=fordAnalytics.modelYear),digitaldata.vehicle.nameplate=fordAnalytics.nameplate||"",digitaldata.vehicle.modelYear=fordAnalytics.modelYear||"",0<m('input[name="acknowledge"]:checked, input[name^="CONTACT_PERMISSION_OPTION"]:checked, input[name^="CONTACT_PERMISSION_CODE"]:checked').length&&(digitaldata.user.leadOptin="email direct opt-in",digitaldata.event.action+="|updates opt-in"),f.track("showroom-complete")):v["referral-campaign"].includes(d)?(digitaldata.page.pageName="employee referral campaign:thank you",digitaldata.page.siteSection="employee referral campaign",digitaldata.page.hierarchy="employee referral campaign:confirmation",digitaldata.page.pageNameNoVehicle="employee referral campaign:thank you",digitaldata.page.variantName="referral-campaign",digitaldata.page.tool="register",digitaldata.page.toolDescriptor="employee referral campaign",digitaldata.user.leadType="employee referral campaign",digitaldata.user.cksVisitId=l+"-RC-"+s,(r=_analytics_readCookie("formNameplateName"))?(r=decodeURIComponent(r),digitaldata.page.pageName+=":"+r,digitaldata.page.nameplate=r,digitaldata.vehicle.nameplate=r,_analytics_eraseCookie("formNameplateName")):fordAnalytics.nameplate&&(digitaldata.page.pageName+=":"+fordAnalytics.nameplate,digitaldata.page.nameplate=fordAnalytics.nameplate,digitaldata.vehicle.nameplate=fordAnalytics.nameplate||""),digitaldata.vehicle.modelYear=fordAnalytics.modelYear||"",digitaldata.event.action="lead submitted|tool",0<m('input[name="acknowledge"]:checked, input[name^="CONTACT_PERMISSION_OPTION"]:checked, input[name^="CONTACT_PERMISSION_CODE"]:checked').length&&(digitaldata.user.leadOptin="email direct opt-in",digitaldata.event.action+="|updates opt-in"),f.track("referral-campaign")):v.projectKing.includes(d)?(digitaldata.page.pageName="project king:complete",digitaldata.page.siteSection="project king",digitaldata.page.hierarchy="shopping tools:project king:confirm",digitaldata.page.pageNameNoVehicle="project king:complete",digitaldata.page.variantName="get-updates-complete",digitaldata.page.tool="event:project king",digitaldata.user.leadType="project king",fordAnalytics.nameplate&&(digitaldata.page.nameplate=fordAnalytics.nameplate,digitaldata.page.modelYear=fordAnalytics.modelYear,digitaldata.page.hierarchy+=":"+fordAnalytics.modelYear+":"+fordAnalytics.vehicleCategory+":"+fordAnalytics.nameplate),digitaldata.vehicle.nameplate=fordAnalytics.nameplate||"",digitaldata.vehicle.modelYear=fordAnalytics.modelYear||"",digitaldata.event.action="lead submitted|tool",0<m('input[name="acknowledge"]:checked, input[name^="CONTACT_PERMISSION_OPTION"]:checked, input[name^="CONTACT_PERMISSION_CODE"]:checked').length&&(digitaldata.user.leadOptin="email direct opt-in",digitaldata.event.action+="|updates opt-in"),f.track("get-updates-complete")):v.territoryreferral.includes(d)?(digitaldata.page.pageName="territory referral campaign:thank you",digitaldata.page.siteSection="territory referral campaign",digitaldata.page.hierarchy="territory referral campaign:confirmation",digitaldata.page.pageNameNoVehicle="territory referral campaign:thank you",digitaldata.page.variantName="referral-campaign",digitaldata.page.tool="register",digitaldata.page.toolDescriptor="territory referral campaign",digitaldata.user.leadType="territory referral campaign",digitaldata.user.cksVisitId=l+"-RC-"+s,fordAnalytics.nameplate&&(digitaldata.page.pageName+=":"+fordAnalytics.nameplate,digitaldata.page.nameplate=fordAnalytics.nameplate,digitaldata.vehicle.nameplate=fordAnalytics.nameplate||""),digitaldata.vehicle.modelYear=fordAnalytics.modelYear||"",digitaldata.event.action="lead submitted|tool",0<m('input[name="acknowledge"]:checked, input[name^="CONTACT_PERMISSION_OPTION"]:checked, input[name^="CONTACT_PERMISSION_CODE"]:checked').length&&(digitaldata.user.leadOptin="email direct opt-in",digitaldata.event.action+="|updates opt-in"),f.track("referral-campaign")):v["latest-offer"].includes(d)?(f.resetDatalayer(),digitaldata.page.pageName="latest offer:complete",digitaldata.page.hierarchy="shopping tools:latest offers",fordAnalytics.modelYear&&(digitaldata.page.hierarchy+=":"+fordAnalytics.modelYear,digitaldata.page.modelYear=fordAnalytics.modelYear),fordAnalytics.vehicleCategory&&(digitaldata.page.hierarchy+=":"+fordAnalytics.vehicleCategory),fordAnalytics.nameplate&&(digitaldata.page.pageName+=":"+fordAnalytics.nameplate,digitaldata.page.hierarchy+=":"+fordAnalytics.nameplate,digitaldata.page.nameplate=fordAnalytics.nameplate),digitaldata.page.siteSection="latest offers",digitaldata.page.pageNameNoVehicle="latest offer:complete",digitaldata.user.cksVisitID=l+"-LO-"+s,digitaldata.user.leadType="latest offer",digitaldata.page.tool="event:latest offer",digitaldata.user.leadOptIn="email direct opt-in",digitaldata.event.action="incentive views|lead submitted|updates opt-in|tool",digitaldata.page.variantName="offer-complete",f.track("offer-complete")):v["safeguard-duty-pricing-refund"].includes(d)&&(digitaldata.page.pageName=d+":complete",digitaldata.page.siteSection=d,digitaldata.page.hierarchy="shopping tools:"+d,digitaldata.page.pageNameNoVehicle=d+":complete",digitaldata.user.cksVisitID=l+"-shoppingTools-"+s,digitaldata.user.leadType=d,digitaldata.page.tool="event:"+d,digitaldata.user.leadOptIn="email direct opt-in",digitaldata.event.action="lead submitted|updates opt-in|tool",fordAnalytics.modelYear&&(digitaldata.page.modelYear=fordAnalytics.modelYear,digitaldata.page.hierarchy+=":"+fordAnalytics.modelYear),fordAnalytics.vehicleCategory&&(digitaldata.page.hierarchy+=":"+fordAnalytics.vehicleCategory),fordAnalytics.nameplate&&(digitaldata.page.pageName+=":"+fordAnalytics.nameplate,digitaldata.page.nameplate=fordAnalytics.nameplate,digitaldata.page.hierarchy+=":"+fordAnalytics.nameplate),digitaldata.page.variantName="form-complete",f.track("form-complete")),f.resetDatalayer()},t.formMultiStepNext=function(e,t){var a,i,n,o=fordAnalytics.formType||"",r=fordAnalytics.formStart||("standalone"===o&&fordAnalytics.formName?fordAnalytics.formName:"");fordAnalytics.formLocation=fordAnalytics.formLocation||"","redesign"===o&&fordAnalytics.formName&&(r=fordAnalytics.formName),v.raq.includes(r)?(e=e.toLowerCase(),digitaldata.page.pageName="vrfq:"+e,digitaldata.page.siteSection="get quote",digitaldata.page.hierarchy="shopping tools:get quote:confirmation",digitaldata.page.pageNameNoVehicle=digitaldata.page.pageName,o=m(".hidden-fields input[name='modelyear']").val(),fordAnalytics.modelYear?(N(),digitaldata.page.hierarchy+=":"+fordAnalytics.modelYear):o&&(N(o),digitaldata.page.modelYear=o,digitaldata.page.hierarchy+=":"+o),fordAnalytics.vehicleCategory&&(digitaldata.page.hierarchy+=":"+fordAnalytics.vehicleCategory),(a=m(".hidden-fields input[name='nameplate']").val())?(digitaldata.page.pageName+=":"+a,T(digitaldata.page.nameplate=a)):fordAnalytics.nameplate&&(digitaldata.page.pageName+=":"+fordAnalytics.nameplate,digitaldata.page.hierarchy+=":"+fordAnalytics.nameplate,T()),!k.includes(D)&&"za"!=D||(digitaldata.page.hierarchy="shopping tools:get quote:dealership select"),digitaldata.page.variantName="vrfq-confirmation",f.track("vrfq-confirmation")):v.td.includes(r)?(digitaldata.page.pageName="vehicle:test drive:"+e,digitaldata.page.siteSection="test drive",digitaldata.page.hierarchy="shopping tools:test drive",digitaldata.page.variantName="test-drive-submit",digitaldata.page.pageNameNoVehicle=digitaldata.page.pageName,fordAnalytics.modelYear&&(N(),digitaldata.page.hierarchy+=":"+fordAnalytics.modelYear),fordAnalytics.vehicleCategory&&(digitaldata.page.hierarchy+=":"+fordAnalytics.vehicleCategory),(a=m(".hidden-fields input[name='nameplate']").val())&&(k.includes(D)||S.includes(D))?(digitaldata.page.pageName+=":"+a,digitaldata.page.hierarchy+=":"+a,T(a)):fordAnalytics.nameplate&&(digitaldata.page.pageName+=":"+fordAnalytics.nameplate,digitaldata.page.hierarchy+=":"+fordAnalytics.nameplate,T()),k.includes(D)&&(digitaldata.page.hierarchy="shopping tools:test drive:dealership select"),(i=document.querySelector('[name="DealerID"]'))&&""!==i.value&&(digitaldata.page.dealerID=i.value),(n=document.querySelector('[data-preselect][name="STATE"]'))&&(digitaldata.user.fordRegion=n.options[n.selectedIndex]&&n.options[n.selectedIndex].text),f.track("test-drive-submit")):v.showroomAtHome.includes(r)?(digitaldata.page.pageName="showroom at home:"+e,digitaldata.page.siteSection="showroom at home",digitaldata.page.hierarchy+=":showroom at home:confirmation",digitaldata.page.pageNameNoVehicle="showroom at home:"+e,digitaldata.page.variantName="showroom-confirmation",digitaldata.page.tool="event: register",digitaldata.page.toolDescriptor="showroom at home",fordAnalytics.nameplate&&(digitaldata.page.pageName+=":"+fordAnalytics.nameplate,digitaldata.page.nameplate=fordAnalytics.nameplate,digitaldata.page.modelYear=fordAnalytics.modelYear),digitaldata.vehicle.nameplate=fordAnalytics.nameplate||"",digitaldata.vehicle.modelYear=fordAnalytics.modelYear||"",(i=document.querySelector('[name="DealerID"]'))&&""!==i.value&&(digitaldata.page.dealerID=i.value),(n=document.querySelector('[data-preselect][name="STATE"]'))&&(digitaldata.user.fordRegion=n.options[n.selectedIndex]&&n.options[n.selectedIndex].text),0<m('input[name="acknowledge"]:checked, input[name^="CONTACT_PERMISSION_OPTION"]:checked, input[name^="CONTACT_PERMISSION_CODE"]:checked').length&&(digitaldata.user.leadOptin="email direct opt-in",digitaldata.event.action+="|updates opt-in"),f.track("showroom-confirmation")):v.showroomOnDemand.includes(r)?(digitaldata.page.pageName="showroom on demand:"+e,digitaldata.page.siteSection="showroom on demand",digitaldata.page.hierarchy+=":showroom on demand:confirmation",digitaldata.page.pageNameNoVehicle="showroom on demand:"+e,digitaldata.page.variantName="showroom-confirmation",digitaldata.page.tool="event: register",digitaldata.page.toolDescriptor="showroom on demand",fordAnalytics.nameplate&&(digitaldata.page.pageName+=":"+fordAnalytics.nameplate,digitaldata.page.nameplate=fordAnalytics.nameplate,digitaldata.page.modelYear=fordAnalytics.modelYear),digitaldata.vehicle.nameplate=fordAnalytics.nameplate||"",digitaldata.vehicle.modelYear=fordAnalytics.modelYear||"",(i=document.querySelector('[name="DealerID"]'))&&""!==i.value&&(digitaldata.page.dealerID=i.value),(n=document.querySelector('[data-preselect][name="STATE"]'))&&(digitaldata.user.fordRegion=n.options[n.selectedIndex]&&n.options[n.selectedIndex].text),0<m('input[name="acknowledge"]:checked, input[name^="CONTACT_PERMISSION_OPTION"]:checked, input[name^="CONTACT_PERMISSION_CODE"]:checked').length&&(digitaldata.user.leadOptin="email direct opt-in",digitaldata.event.action+="|updates opt-in"),f.track("showroom-confirmation")):v.retentionCampaign.includes(r)?(digitaldata.page.pageName="retention campaign:"+e,digitaldata.page.siteSection="retention",digitaldata.page.hierarchy="retention campaign",digitaldata.page.pageNameNoVehicle="retention campaign:"+e,digitaldata.page.variantName="retention-submit",fordAnalytics.nameplate&&(digitaldata.page.pageName+=":"+fordAnalytics.nameplate,digitaldata.page.nameplate=fordAnalytics.nameplate),fordAnalytics.modelYear&&(digitaldata.page.hierarchy+=":"+fordAnalytics.modelYear,digitaldata.page.modelYear=fordAnalytics.modelYear),fordAnalytics.vehicleCategory&&(digitaldata.page.hierarchy+=":"+fordAnalytics.vehicleCategory),fordAnalytics.nameplate&&(digitaldata.page.hierarchy+=":"+fordAnalytics.nameplate),digitaldata.vehicle.nameplate=fordAnalytics.nameplate||"",digitaldata.vehicle.modelYear=fordAnalytics.modelYear||"",(i=document.querySelector('[name="DealerID"]'))&&""!==i.value&&(digitaldata.page.dealerID=i.value),(n=document.querySelector('[data-preselect][name="STATE"]'))&&(digitaldata.user.fordRegion=n.options[n.selectedIndex]&&n.options[n.selectedIndex].text),f.track("retention-submit")):v.kmi.includes(r)?(digitaldata.page.pageName="get updates:"+e,digitaldata.page.pageNameNoVehicle=digitaldata.page.pageName,digitaldata.page.siteSection="get updates",digitaldata.page.hierarchy="shopping tools:get updates",fordAnalytics.modelYear&&fordAnalytics.nameplate&&(digitaldata.page.pageName+=":"+fordAnalytics.nameplate,digitaldata.page.hierarchy+=":"+fordAnalytics.modelYear+":"+fordAnalytics.vehicleCategory+":"+fordAnalytics.nameplate,T(),N()),digitaldata.page.variantName="kmi-confirm",f.track("kmi-confirm")):v.eckmi.includes(r.toLowerCase())?(digitaldata.page.pageName="ec:kmi:"+e,digitaldata.page.pageNameNoVehicle=digitaldata.page.pageName,digitaldata.page.siteSection="get updates",digitaldata.page.hierarchy="ec:kmi:",fordAnalytics.modelYear&&fordAnalytics.nameplate&&(digitaldata.page.pageName+=":"+fordAnalytics.nameplate,digitaldata.page.hierarchy+=":"+fordAnalytics.modelYear+":"+fordAnalytics.vehicleCategory+":"+fordAnalytics.nameplate,T(),N()),digitaldata.page.variantName="kmi-confirm",f.track("kmi-confirm")):v["Keep-Me-Updated"].includes(r)?(digitaldata.page.pageName="get updates:"+e,digitaldata.page.siteSection="get updates",digitaldata.page.hierarchy="shopping tools:get updates:confirm",digitaldata.page.pageNameNoVehicle=digitaldata.page.pageName,digitaldata.page.tool="event:get updates",digitaldata.event.action="tool|lead submitted",digitaldata.page.variantName="kmi-confirm",digitaldata.vehicle.nameplate=fordAnalytics.nameplate||"",digitaldata.vehicle.modelYear=fordAnalytics.modelYear||"",digitaldata.vehicle.bodyModelTrim=fordAnalytics.vehicleCategory||"",fordAnalytics.nameplate&&(digitaldata.page.pageName+=":"+fordAnalytics.nameplate,digitaldata.page.nameplate=fordAnalytics.nameplate),fordAnalytics.modelYear&&(digitaldata.page.hierarchy+=":"+fordAnalytics.modelYear,digitaldata.page.modelYear=fordAnalytics.modelYear),fordAnalytics.vehicleCategory&&(digitaldata.page.hierarchy+=":"+fordAnalytics.vehicleCategory),fordAnalytics.nameplate&&(digitaldata.page.hierarchy+=":"+fordAnalytics.nameplate),(i=document.querySelector('[name="DealerID"]'))&&""!==i.value&&(digitaldata.page.dealerID=i.value),(n=document.querySelector('[data-preselect][name="STATE"]'))&&(digitaldata.user.fordRegion=n.options[n.selectedIndex]&&n.options[n.selectedIndex].text),0<m('input[name="acknowledge"]:checked, input[name^="CONTACT_PERMISSION_OPTION"]:checked, input[name^="CONTACT_PERMISSION_CODE"]:checked, input[name^="FL_PERMISSION"]:checked').length&&1!=m("#CONTACT_PERMISSION_CODE-2:checked").length&&(digitaldata.user.leadOptin="email direct opt-in",digitaldata.event.action="tool|lead submitted|updates opt-in"),f.track("kmi-confirm")):v.fltregcom.includes(r)?(digitaldata.page.pageName="fleet:"+e,digitaldata.page.pageNameNoVehicle=digitaldata.page.pageName,digitaldata.page.siteSection="fleet",digitaldata.page.hierarchy="vehicle:corporate fleet",digitaldata.page.variantName="fleet-details",f.track("fleet-details")):v.fltreg.includes(r)?(digitaldata.page.pageName="fleet:business information",digitaldata.page.siteSection="fleet",digitaldata.page.hierarchy="vehicle:corporate fleet",digitaldata.page.pageNameNoVehicle=digitaldata.page.pageName,digitaldata.page.variantName="fleet-details",f.track("fleet-details")):v["contact-us"].includes(r)?(2==t&&m("html").hasClass("market_mea")||"za"==D)&&(digitaldata.page.pageName="contact us:submit",digitaldata.page.siteSection="contact us",digitaldata.page.hierarchy="contact us:delearship select",digitaldata.page.pageNameNoVehicle="contact us:submit",digitaldata.page.variantName="contact-dealership",fordAnalytics.modelYear&&(N(),digitaldata.page.modelYear=fordAnalytics.modelYear),fordAnalytics.nameplate&&(digitaldata.page.pageName+=":"+fordAnalytics.nameplate,digitaldata.page.hierarchy+=":"+fordAnalytics.nameplate,T()),f.track("contact-dealership")):v["bp-raq"].includes(r)?(e=e.toLowerCase(),digitaldata.page.pageName="vrfq:"+e,digitaldata.page.siteSection="get quote",digitaldata.page.hierarchy="shopping tools:get quote:confirmation",digitaldata.page.variantName="vrfq-confirmation",digitaldata.page.pageNameNoVehicle=digitaldata.page.pageName,fordAnalytics.modelYear&&(N(),digitaldata.page.modelYear=fordAnalytics.modelYear),fordAnalytics.nameplate&&(digitaldata.page.pageName+=":"+fordAnalytics.nameplate,digitaldata.page.hierarchy+=":"+fordAnalytics.nameplate,T()),(i=document.querySelector('[name="DealerID"]'))&&""!==i.value&&(digitaldata.page.dealerID=i.value),(n=document.querySelector('[data-preselect][name="STATE"]'))&&(digitaldata.user.fordRegion=n.options[n.selectedIndex]&&n.options[n.selectedIndex].text),f.track("vrfq-confirmation")):v["latest-offer"].includes(r)?(f.resetDatalayer(),digitaldata.page.pageName="latest offer:confirm",digitaldata.page.hierarchy="shopping tools:latest offers",fordAnalytics.modelYear&&(digitaldata.page.hierarchy+=":"+fordAnalytics.modelYear,digitaldata.page.modelYear=fordAnalytics.modelYear),fordAnalytics.vehicleCategory&&(digitaldata.page.hierarchy+=":"+fordAnalytics.vehicleCategory),fordAnalytics.nameplate&&(digitaldata.page.pageName+=":"+fordAnalytics.nameplate,digitaldata.page.hierarchy+=":"+fordAnalytics.nameplate,digitaldata.page.nameplate=fordAnalytics.nameplate),digitaldata.page.siteSection="latest offers",digitaldata.page.pageNameNoVehicle="latest offer:confirm",digitaldata.page.variantName="offer-confirm",f.track("offer-confirm"),f.resetDatalayer()):v["safeguard-duty-pricing-refund"].includes(r)&&(digitaldata.page.pageName=r,digitaldata.page.siteSection=r,digitaldata.page.hierarchy="shopping tools:"+r,digitaldata.page.pageNameNoVehicle=r,null!=e&&e&&(digitaldata.page.pageName+=":"+e,digitaldata.page.pageNameNoVehicle+=":"+e),fordAnalytics.modelYear&&(digitaldata.page.modelYear=fordAnalytics.modelYear,digitaldata.page.hierarchy+=":"+fordAnalytics.modelYear),fordAnalytics.vehicleCategory&&(digitaldata.page.hierarchy+=":"+fordAnalytics.vehicleCategory),fordAnalytics.nameplate&&(digitaldata.page.pageName+=":"+fordAnalytics.nameplate,digitaldata.page.nameplate=fordAnalytics.nameplate,digitaldata.page.hierarchy+=":"+fordAnalytics.nameplate),f.track("form-details"))},t.formClicktoCall=function(){digitaldata.onclick.onclickLinkName="click to call:referral:exit",digitaldata.onclick.referredTo="click to call:contact dealer",digitaldata.onclick.onclick="referral exit:ford:home",digitaldata.page.variantName="referral-exit",f.track("referral-exit"),f.resetDatalayer()},t.init=function(){t.formInitiate()},t}),define("analytics/events/galleryEvents",["jquery","analytics/analyticsUtilities","analytics/analyticsVariables"],function(a,o,e){function i(e,t,a,i,n){digitaldata.onclick.onclickLinkName=e,digitaldata.onclick.onclick=t,a&&(digitaldata.onclick.contentType=a),digitaldata.onclick.contentSubType=n||"",o.trackAndReset(i)}var t={},n=e.getPageCategory(),r=e.getPageNameplate(),l=e.getPage(),s=e.getSiteBusinessUnit(),c=e.getTemplate(),d=e.getVariantName();return t.trackGalleryActionPhotoClick=function(){a(".galleryCategory .image a, .gallery-trigger .image a, .common-brandGallery .image a, .exterior-gallery img, .interior-gallery img").on("click.analyticsGalleryAction",function(){var e,t=a(this).attr("data-overlay_id");"vehicle-load"===d&&i("vehicle:content:action:"+r,"vhp content:photo click",l+":"+c+":gallery","vhp-onclick"),"gallery-load"===d&&(e=a(this).closest(".common-gc").find(".gallery-headline .desktop").text().trim().toLowerCase(),e=["exterior","外饰","exteriores","الناحية الخارجية","外觀造型","รูปลักษณ์ภายนอก","ngoại thất"].includes(e)?"exterior":"interior",0<a(this).parents(".exterior-gallery").length&&(e="exterior"),0<a(this).parents(".interior-gallery").length&&(e="interior"),i("vehicle:gallery:content:action:"+r,"gallery content:photo click",l+":"+c+":"+e,"gallery-onclick",t)),"model-details-load"===d&&i("vehicle:models:details:content:action:"+r,"models content:details:photo click",l+":"+c+":gallery","models-onclick"),"model-compare-load"===d&&i("vehicle:compare:content:action:"+r,"models content:compare:photo click",l+":"+c+":gallery","models-onclick"),"reveal-load"===d&&i("reveal:content:action:"+r,"reveal content:compare:photo click",l+":"+c+":gallery","reveal-onclick"),"events-news-load"===d&&i("news-events:news-reporter:"+n+":content action","news content:photo click",!1,"media-onclick")})},t.trackGalleryActionViewMore=function(){a("div.view-more-button-container > a.cta-button, .view-toggle > span.view-all").on("click.analyticsGalleryAction",function(){"ford-brand"===s&&("vehicle-load"===d&&i("vehicle:content:action:"+r,"vhp content:view more",l+":"+c+":click","vhp-onclick"),"gallery-load"===d&&i("vehicle:gallery:content:action:"+r,"gallery content:view more",l+":"+c+":click","gallery-onclick"),"model-details-load"===d&&i("vehicle:models:details:content:action:"+r,"models content:details:view more",l+":"+c+":click","models-onclick"),"model-compare-load"===d&&i("vehicle:compare:content:action:"+r,"models content:compare:view more",l+":"+c+":click","models-onclick"),"reveal-load"===d)&&i("reveal:content:action:"+r,"reveal content:compare:view more",l+":"+c+":click","reveal-onclick")})},t.trackGalleryActionVideoPlay=function(){a(".media-carousel-video > .video").on("click.analyticsGalleryAction",function(){var e,t=a(this).find("a").attr("data-overlay_id");"ford-brand"===s&&("vehicle-load"===d&&(0<a(this).parents(".analytics-social-module").length?((e=a(this).parents(".mediaCarousel")).hasClass("analytics-social-module-news")?digitaldata.onclick.contentSubType="ford news":e.hasClass("analytics-social-module-reviews")?digitaldata.onclick.contentSubType="customer comments":e.hasClass("analytics-social-module-feed")&&(digitaldata.onclick.contentSubType="social feed"),i("vehicle:social content:action:"+r,"social content:video play",l+":"+c+":social content","vhp-onclick")):i("vehicle:content:action:"+r,"vhp content:video play",l+":"+c+":video","vhp-onclick",t)),"gallery-load"===d&&i("vehicle:gallery:content:action:"+r,"gallery content:video play",l+":"+c+":video","gallery-onclick",t),"model-details-load"===d&&i("vehicle:models:details:content:action:"+r,"models content:details:video play",l+":"+c+":video","models-onclick",t),"model-compare-load"===d&&i("vehicle:compare:content:action:"+r,"models content:compare:video play",l+":"+c+":video","models-onclick",t),"reveal-load"===d&&i("reveal:content:action:"+r,"reveal content:compare:video play",l+":"+c+":video","reveal-onclick",t),"science-load"===d&&i("vehicle:science of truck:content action:"+r,"science of truck content:video play","","science-onclick",t),"features-cat-load"===d)&&i("vehicle:features:category:content action:"+r,"features category content:video play","","science-onclick",t)})},t.trackGalleryActionExpandMore=function(){"ford-brand"===s&&("vehicle-load"===d&&i("vehicle:content:action:"+r,"vhp content:expand more",l+":"+c+":expanded feature","vhp-onclick"),"gallery-load"===d&&i("vehicle:gallery:content:action:"+r,"gallery content:expand more",l+":"+c+":expanded feature","gallery-onclick"),"model-details-load"===d&&i("vehicle:models:details:content:action:"+r,"models content:details:expand more",l+":"+c+":expanded feature","models-onclick"),"model-compare-load"===d&&i("vehicle:compare:content:action:"+r,"models content:compare:expand more",l+":"+c+":expanded feature","models-onclick"),"reveal-load"===d)&&i("reveal:content:action:"+r,"reveal content:compare:expand more",l+":"+c+":expanded feature","reveal-onclick")},t.trackGalleryActionModelSelect=function(){a(".carousel-slide.model a").on("click.analyticsModelSelect",function(){"ford-brand"===s&&("vehicle-load"===d&&i("vehicle:content:action:"+r,"vhp content:model select",l+":"+c+":click","vhp-onclick"),"gallery-load"===d)&&i("vehicle:gallery:content:action:"+r,"gallery content:model select",l+":"+c+":click","gallery-onclick")})},t.init=function(){a("a#exterior-gallery").parents().eq(1).addClass("exterior-gallery"),a("a#interior-gallery").parents().eq(1).addClass("interior-gallery"),t.trackGalleryActionPhotoClick(),t.trackGalleryActionViewMore()},t}),define("analytics/events/globalEvents",["_","jquery","analytics/analyticsUtilities","analytics/analyticsVariables"],function(t,a,n,i){var e={},o=i.getCurrentCountry(),r=i.getLincolnSites(),l=i.getPageNameplate(),s=i.getPageName(),c=i.getPageNamePrefix(),d=i.getSiteBusinessUnit(),u=i.getVariantName();function p(e,t,a,i){digitaldata.onclick.onclickLinkName=e,digitaldata.onclick.onclick=t,i?n.trackAndReset(a):n.track(a)}return e.trackSaveStart=function(e){"ford-brand"===d&&(digitaldata.page.tool="save:start:"+e,digitaldata.action.event="tool",p("save:start","save:start","save-start",!0))},e.trackSaveComplete=function(e){"ford-brand"===d&&(digitaldata.page.tool="save:complate:"+e,digitaldata.action.event="tool",p("save:complete","save:complete","save-complete",!0))},e.trackDisclousreClick=function(){a("h3.disclosure-heading, .icon-info, .gux-tooltip, sup.gux-disclosure, sup[data-disclosure]").on("click.analyticsDisclosureClick",function(){"ford-credit"===d?p(c+":disclosures","help:disclosures","global-onclick",!0):"ford-owner"===d?p("flmo:portal:disclosures","portal:disclosures","discloure-onclick",!0):p("disclosure","disclosure","global-onclick",!0)})},e.trackFindDealerContentAction=function(e){"ford-brand"===d&&(-1<e.indexOf("call dealer")?(digitaldata.page.tool="event:click to call",digitaldata.action.event="click to call",p("find dealer:content:action","find dealer:"+e,"global-fd-call",!0)):p("find dealer:content:action","find dealer:"+e,"global-onclick",!0))},e.trackPDFDownload=function(){s.includes("dealer locater:recruit:")&&a('a[href*=".pdf"]').on("click.analyticsDownloadDealershipPDF",function(){p("dealerships:recruit:download","download dealership recruit","fd-download",!0)})},e.trackWallpaperDownloadCTA=function(){"Columbia"===o&&s.includes("vehicle:models:detail:design:")&&a(".cta-button.cta-button-primary").on("click.analyticsDownloadWallpaperCTA",function(){p("vehicle:download:wallpaper:"+l,"download:wallpaper","download",!0)})},e.trackGlobalAction=function(e,t){"ford-brand"===d&&p(t?"global:action:"+t:"global:action",e,"global-onclick",!0)},e.trackGlobalToolTip=function(){},e.trackGlobalOverlay=function(e){"ford-brand"===d&&(i.setPreviousSiteSection(),i.setPreviousPagenameNoVehicle(),i.setPreviousHeirarchy(),-1<e.indexOf("search")&&(digitaldata.page.pageName="search overlay",digitaldata.page.siteSection="search",digitaldata.page.hierarchy="search",digitaldata.page.pageNameNoVehicle="search overlay"),e.indexOf("choose language")&&(digitaldata.page.pageName="choose language overlay",digitaldata.page.siteSection="home",digitaldata.page.hierarchy="home",digitaldata.page.pageNameNoVehicle="choose language"),e.indexOf("browser unsupported")&&(digitaldata.page.pageName="browser unsupported overlay",digitaldata.page.siteSection="home",digitaldata.page.hierarchy="home",digitaldata.page.pageNameNoVehicle="browser unsupported overlay"),n.trackAndReset("global-overlay"))},e.globalOverlayUnload=function(){i.getPreviousSiteSection(),i.getPreviousPagenameNoVehicle(),i.getPreviousHeirarchy()},e.trackSearchOverlayAction=function(e){"ford-brand"===d&&p("search overlay:content:action","search overlay:"+e,"global-onclick",!0)},e.trackExitReferral=function(){"ford-credit"===d?a('a[href$="//credit.ford.com"], a[href$="//credit.ford.com/"]').on("click.analyticsTrackCreditExitReferral",function(){digitaldata.onclick.referralTo="flmc:home",digitaldata.action.event="brand referral",p("exit:referral","referral:flmc:home","exit-referral-onclick",!0)}):"ford-brand"===d&&(a('a[href*="lincoln"]').on("click.analyticsExitReferral",function(){if(digitaldata.onclick.onclickLinkName="referral:exit","/"===this.pathname&&-1<r.indexOf(this.hostname))digitaldata.onclick.referredTo="ln:home",digitaldata.onclick.onclick="referral exit:lincoln:home";else{if(!(["mkc","mkz","mkx","mks","mkt","continental","navigator"].some(function(e){return 0<=this.pathname.indexOf(e)})&&-1<r.indexOf(this.hostname)))return!1;digitaldata.onclick.referredTo="ln:vehicles",digitaldata.onclick.onclick="referral exit:lincoln:vehicles"}digitaldata.event.action="brand referral",n.trackAndReset("referral-exit")}),a('a[href*="corporate.ford.com"], a[href*="/forms/corporate"]').on("click.analyticsExitReferral",function(){digitaldata.onclick.referredTo="ford:home",digitaldata.event.action="brand referral",p("referral:exit","referral exit:ford:home","referral-exit",!0)})),a("a.cta-exit-referral").on("click.analyticsTrackExitReferral",function(){"ford-credit"!==d||"fc-financing-load"!==u&&"fc-social-responsibility"!==u||(digitaldata.onclick.referredTo=this.hostname,p("exit:referral","exit:referral","exit-referral-onclick",!(digitaldata.event.action="brand referral")))})},e.trackCreditKabob=function(){a(".navigation-horizontal a").on("click.analyticsCreditKabob",function(){p(c+":cta","cta:"+a(this).text().trim(),"global-onclick",!0)})},e.trackCreditFaq=function(){a(".icon.icon-question").parent().on("click.analyticsCreditFaq",function(){p(c+":credit faq","support:credit faq","global-onclick",!0)}),a('.analytics-credit-contact-us a[href*="/faq"]').on("click.analyticsCreditFaq",function(){p(c+":credit faq","support:credit faq","global-onclick",!0)})},e.trackCreditEmail=function(){"India"!==o&&a(".icon.icon-email").parent().on("click.analyticsCreditEmail",function(){digitaldata.action.event="contact email",p(c+":email us","support:email us","email-us-onclick",!0)})},e.trackEmail=function(){"flmo:portal:service:parts distributor"===s&&a('a[href^="mailto:"]').on("click.analyticsTrackEmail",function(){p("flmo:portal:service:parts distributor:email","portal:service:parts distributor:email","accordion-onclick",!0)})},e.trackCreditClickToCall=function(){a(".icon.icon-send-to-phone-open").parent(".btn.showForMobile").on("click.analyticsCreditClickToCall",function(){p(c+":click to call","support:click to call","global-onclick",!0)}),a('.analytics-credit-contact-us a[href*="/fale-conosco"]').on("click.analyticsCreditClickToCall",function(){p(c+":click to call","support:click to call","global-onclick",!0)})},e.trackCreditWeChat=function(){a("#btn-cb-wechat").on("click.analyticsCreditWechatClick",function(){p(c+":wechat","wechat endicia","global-onclick",!0)})},e.trackCreditSmartNextSteps=function(){a("a#smart-next-steps").parents(".section.splitter").find('a[id!="smart-next-steps"]').on("click.analyticsCreditSmartNextSteps",function(){var e;"Mexico"===o&&this.href.includes("/forms/credit-ford")?(digitaldata.onclick.referredTo="flmc:home",digitaldata.action.event="brand referral",p("exit:referral","referral:flmc:home","exit-referral-onclick",!0)):(e=t.compact(this.href.split("/")).pop().replace(".html","").replace(/-/gi," "),digitaldata.page.tool="next steps",digitaldata.page.toolDescriptor="next steps:"+e,digitaldata.action.event="FMCC tool",p(c+":next steps","next steps:"+e,"next-steps-onclick",!0))})},e.trackCountryLanguageSelectorOverlay=function(){a('a[data-target-category="#header-language-selector"]').on("click.analyticsTrackCountryLanguageSelectorOverlay",function(){digitaldata.page.pageName="home:country select",digitaldata.page.siteSection="home",digitaldata.page.hierarchy="home",digitaldata.page.pageNameNoVehicle=digitaldata.page.pageName,n.trackAndReset("global-overlay")})},e.init=function(){e.trackDisclousreClick(),e.trackExitReferral(),e.trackPDFDownload(),e.trackWallpaperDownloadCTA(),e.trackEmail(),"ford-credit"===d&&(0<a('a[id^="credit-contact-us"]').length&&a.each(a('a[id^="credit-contact-us"]'),function(){var e="analytics-"+a(this).attr("id");a(this).parents().eq(1).addClass(e)}),e.trackCreditKabob(),e.trackCreditFaq(),e.trackCreditEmail(),e.trackCreditClickToCall(),e.trackCreditWeChat(),e.trackCreditSmartNextSteps())},e}),define("analytics/events/helpMeChooseEvents",["jquery","analytics/analyticsUtilities","analytics/analyticsVariables"],function(e,n,a){var t={};a.getCurrentCountry(),a.getPageNameplate(),a.getVariantName(),a.getPageName(),a.getPageNamePrefix(),a.getSiteBusinessUnit();function i(e,t,a,i){digitaldata.onclick.onclickLinkName=e,digitaldata.onclick.onclick=t,i?n.trackAndReset(a):n.track(a)}return t.trackHelpMeChooseStep=function(e,t){t=t.trim().toLowerCase();t&&(i("help me choose:step"+e,"step"+e+":"+t,"content onclik",!1),n.trackAndReset("global-onclick")),n.resetDatalayer()},t.trackAdvHelpMeChooseStep=function(e){e=e.trim().toLowerCase();digitaldata.onclick.contentType=a.getPage()+":"+a.getTemplate()+":features help me choose",(digitaldata.onclick.contentSubType=e)&&(i("help me choose","help me choose:"+e,"content onclik",!1),n.trackAndReset("global-onclick")),n.resetDatalayer()},t.trackHelpMeChooseAll=function(e){var t,a="";for(t in e)a+=":"+e[t];i("help me choose:recommendation","help me choose:recommendation"+a,"content onclik",!1),n.trackAndReset("global-onclick"),n.resetDatalayer()},t.trackHelpMeChooseStep1=function(e){var t=e.trim().toLowerCase();digitaldata.onclick.contentType=a.getPage()+":"+a.getTemplate()+":helpMeChoose",digitaldata.onclick.contentSubType=e.trim(),t&&(i("helpme to choose:criteria:question action","criteria:content action:"+t,"content onclik",!1),n.trackAndReset("global-onclick")),n.resetDatalayer()},t.trackHelpMeChooseStep2=function(e,t){t=t.trim().toLowerCase(),e=e.trim().toLowerCase();t&&e&&(i("helpme to choose:criteria:"+e,"criteria:"+e+":"+t,"content onclik",!1),n.trackAndReset("global-onclick")),n.resetDatalayer()},t.trackHelpMeChooseStep3=function(e,t,a){t=t.trim().toLowerCase(),e=e.trim().toLowerCase();t&&e&&a&&(i("helpme to choose:criteria:"+e+":"+t,"criteria:"+e+":"+t+":result:sclect vehicle:"+a,"content onclik",!1),n.trackAndReset("global-onclick")),n.resetDatalayer()},t}),define("analytics/events/homePageEvents",["jquery","analytics/analyticsUtilities","analytics/analyticsVariables"],function(e,a,t){var i={},n="home:content:onpage",o=t.getSiteBusinessUnit(),r=t.getVariantName(),l=t.getPage(),s=t.getPageNamePrefix(),c=t.getTemplate();return i.trackHPOnClick=function(e){var t;"ford-brand"===o&&"home-load"===r&&("dealer search - geo locate"===e&&(e="dealer search"),digitaldata.onclick.onclick="hp content:"+e,digitaldata.onclick.onclickLinkName=n,t="","more expand"===e?t="expanded feature":["dealer search","dealer search - geo locate","dealer info","directions","send to phone:start","send to phone:complete","unaware search"].includes(e)&&(t="find dealer"),l&&t&&(digitaldata.onclick.contentType=l+":"+c+":"+t),a.trackAndReset("hp-onclick")),"ford-credit"===o&&["dealer search","dealer search - geo locate"].includes(e)&&(digitaldata.onclick.onclickLinkName=s+":locate a dealer","dealer search"===e?digitaldata.onclick.onclick="locate a dealer:manual search":"dealer search - geo locate"===e&&(digitaldata.onclick.onclick="locate a dealer:current location"),a.trackAndReset("global-onclick"))},i.trackHPDealerOnClick=function(e){"ford-brand"===o&&"home-load"===r&&(digitaldata.onclick.onclick="hp content:call dealer",digitaldata.onclick.onclickLinkName=n,digitaldata.onclick.contentType=l?l+":"+c+":find dealer":"",a.trackAndReset("hp-dealer-onclick"))},i}),define("analytics/events/hotspotsEvents",["jquery","analytics/analyticsUtilities","analytics/analyticsVariables"],function(e,n,t){function a(e,t,a,i){digitaldata.onclick.onclickLinkName=e,digitaldata.onclick.onclick=t,digitaldata.onclick.contentType=a,n.trackAndReset(i)}var i={},o=t.getVariantName(),r=t.getSiteBusinessUnit();return i.trackSelectHotspots=function(){e("a.hotspot-trigger").on("mouseover.analyticsHotspot",function(){e(this).data("analyticsfired")||("ford-brand"===r&&("vehicle-load"===o?a("vehicle:content:action:"+t.getPageNameplate(),"vhp content:hotspot",t.getPage()+":"+t.getTemplate()+":hotspot","vhp-onclick"):"model-details-load"===o?a("vehicle:models:detail:content action:"+t.getPageNameplate(),"models content:detail:hotspot",t.getPage()+":"+t.getTemplate()+":hotspot","models-details-onclick"):"features-cat-load"===o?a("vehicle:features:category:content action:"+t.getPageNameplate(),"features category content:hotspot",t.getPage()+":"+t.getTemplate()+":hotspot","feat-onclick"):"reveal-load"===o&&a("reveal:content action:"+t.getPageNameplate(),"reveal content:hotspot",t.getPage()+":"+t.getTemplate()+":hotspot","reveal-onclick")),e(this).data("analyticsfired","1"))})},i.init=function(){i.trackSelectHotspots()},i}),define("analytics/events/imageVideoInteractionsEvents",["jquery","analytics/analyticsUtilities","analytics/analyticsVariables"],function(e,o,t){var a={},i=t.getPageCategory(),n=t.getVariantName(),r=t.getSiteBusinessUnit();function l(e,t,a,i,n){digitaldata.onclick.onclickLinkName=e,digitaldata.onclick.onclick=t,a&&(digitaldata.onclick.contentType=a),i&&(digitaldata.onclick.contentSubType=i),o.trackAndReset(n)}return a.trackOpenMediaInOverlay=function(e){},a.trackFullSizeImageInOverlay=function(e){"ford-brand"===r&&("gallery-load"===n&&l("vehicle:gallery:content:action:"+t.getPageNameplate(),"gallery content:fullscreen","gallery:"+t.getTemplate()+":gallery",e,"gallery-onclick"),"vehicle-load"===n&&l("vehicle:content:action:"+t.getPageNameplate(),"vhp content:fullscreen","vhp:"+t.getTemplate()+":gallery",e,"vhp-360-onclick"),"accessories-load"===n&&l("vehicle:accessories:content action:"+t.getPageNameplate(),"accessories content:fullscreen","acc:"+t.getTemplate()+":gallery",e,"access-onclick"),"events-news-load"===n)&&l("news-events:news-reporter:"+i+":content action","news content:full screen",!1,!1,"media-onclick")},a.trackDownloadImageInOverlay=function(e){},a}),define("analytics/events/latestOffersEvents",["jquery","analytics/analyticsUtilities","analytics/analyticsVariables"],function(e,n,t){var a={};function i(e,t,a,i){digitaldata.onclick.onclickLinkName=e,digitaldata.onclick.onclick=t,i?n.trackAndReset(a):n.track(a)}return a.offersClick=function(){i("hot deals:latest offers:advance search","filter:offer","global-onclick",!0)},a.modelClick=function(){i("hot deals:latest offers:advance search","filter:model","global-onclick",!0)},a.bodyTypesClick=function(){i("hot deals:latest offers:advance search","filter:body","global-onclick",!0)},a.changePrice=function(){i("hot deals:latest offers:advance search","filter:price","global-onclick",!0)},a.changeDetailPostalCode=function(e){digitaldata.page.nameplate=e,i("hot deals:latest offers:details:content:action:"+digitaldata.page.nameplate,"content:change post code","global-onclick",!1)},a.clickDetailDisclaimer=function(e){digitaldata.page.nameplate=e,i("hot deals:latest offers:details:content:action:"+digitaldata.page.nameplate,"content:view disclaimer","global-onclick",!1)},a.clickAllOffers=function(e){digitaldata.page.nameplate=e,i("hot deals:latest offers:details:content:action:"+digitaldata.page.nameplate,"content:view more offers","global-onclick",!1)},a.clickAccordion=function(e){digitaldata.page.nameplate=e,i("hot deals:latest offers:details:content:action:"+digitaldata.page.nameplate,"content:view features","global-onclick",!1)},a}),define("analytics/events/liveChatEvents",["jquery","analytics/analyticsUtilities","analytics/analyticsVariables"],function(e,t,a){var i={},n=a.getSiteBusinessUnit();return i.trackInitiateLiveChat=function(){"ford-brand"===n&&(digitaldata.onclick.onclickLinkName="click to chat",digitaldata.onclick.onclick="click to chat",t.trackAndReset("click-to-chat"))},i.init=function(){e("#s3button_area, .aqchat_btn").on("click.analyticsTrackLiveChat",function(){i.trackInitiateLiveChat()})},i}),define("analytics/events/miniDealerLocatorEvents",["jquery","analytics/analyticsUtilities","analytics/analyticsVariables","analytics/events/commonDealerLocatorEvents"],function(e,n,t,a){var i={},o=t.getPageNamePrefix(),r=t.getSiteBusinessUnit(),l=t.getPage(),s=t.getTemplate();function c(e){"ford-credit"===r&&d(o+":locate a dealer:interactions","locate a dealer:interactions:"+(e="dealer info"===e?"dealer details":e),"global-onclick",!0)}function d(e,t,a,i){digitaldata.onclick.onclickLinkName=e,digitaldata.onclick.onclick=t,i?n.trackAndReset(a):n.track(a)}return i.trackInitiateSearch=function(e){d("find dealer:content:action","find dealer:dealer search","global-onclick",!0)},i.trackSearchAgain=function(e){c("search again")},i.trackMiniLADClick=function(e){r="ford-brand","dealer info"===e&&"ford-brand"===r&&(digitaldata.onclick.contentType=l?l+":"+s+":find dealer":"",digitaldata.page.tool="event:click to call",digitaldata.action.event="click to call",d("find dealer:dealer search","find dealer:content:action","global-fd-call",!0),c(e))},i.trackMiniLADCallDealerClick=function(){"ford-brand"===r&&(digitaldata.onclick.contentType=l?l+":"+s+":find dealer":"",d("hp content:call dealer","home:content:onpage","hp-dealer-onclick",!0)),c("click to call")},i.trackExpandAndHideMap=function(e){"show"==(e?"show":"hide")&&("ford-brand"===r&&(digitaldata.onclick.contentType=l?l+":"+s+":find dealer":"",d("hp content:more expand","home:content:onpage","hp-dealer-onclick",!0)),c("view map"))},i}),define("analytics/events/modelWalkAndCompareEvents",["jquery","analytics/analyticsUtilities","analytics/analyticsVariables"],function(e,n,i){var t={},a=i.getSiteBusinessUnit();function o(e,t,a,i){digitaldata.onclick.onclickLinkName=e,digitaldata.onclick.onclick=t,i?n.trackAndReset(a):n.track(a)}return t.trackShowDifferences=function(e){},t.trackCategory=function(e,t,a){},t.trackModelOperations=function(e,t,a){},t.trackToogleCompare=function(e,t){},t.trackCompareSelected=function(e){},t.trackCTA=function(e){},t.trackDisclosure=function(e,t,a,i){},t.trackViewAllOffers=function(){e("a:contains('View all Offer')").on("click.analyticsViewAllOffer",function(){"ford-brand"===a&&o("vehicle:compare:content action:"+i.getPageNameplate(),"models content:compare:view all offers","models-onclick",!0)})},t.trackCompareChangeAdd=function(e){"analyticsCompareAdd"===e?"ford-brand"===a&&o("vehicle:models:compare:"+i.getPageNameplate(),"models:compare:add","models-onclick",!0):"analyticsCompareSelect"===e&&"ford-brand"===a&&o("vehicle:models:compare:"+i.getPageNameplate(),"models:compare:change","models-onclick",!0)},t.trackCompareBtnClick=function(){"ford-brand"===a&&o("vehicle:models:select:content action:"+i.getPageNameplate(),"models content:select:compare","models-onclick",!0)},t.initModelSeriesNameplate=function(e,t,a){e&&a&&t&&(digitaldata.vehicle.bodyModelTrim=e+":"+t+":"+a,n.updateDatalayer(),o("vehicle:models:details:"+i.getPageNameplate(),"models:details:load","",!0))},t.init=function(){t.trackViewAllOffers(),t.trackCompareChangeAdd()},t}),define("analytics/events/nameplateExperienceEvents",["jquery","analytics/analyticsUtilities","analytics/analyticsVariables"],function(e,n,t){var a={},i=t.getPageNameplate(),o=t.getSiteSection(),r=t.getPageTitle();function l(e,t,a,i){digitaldata.onclick.onclickLinkName=e,digitaldata.onclick.onclick=t,i?n.trackAndReset(a):n.track(a)}return a.trackNmpLandingPageClick=function(e){l("vehicle:home:content:action:"+i,"vhp content:"+e,"global-onclick",!0)},a.trackNmpChildPageClick=function(e){l(o+":"+r+":"+i,"content action:"+e,"global-onclick",!0)},a}),define("analytics/events/newsEvents",["jquery","analytics/analyticsUtilities","analytics/analyticsVariables"],function(t,n,e){var a={},i=e.getPageCategory(),o=(e.getCurrentCountry(),e.getPageNameplate(),e.getPage(),e.getPageNamePrefix()),r=(e.getSiteBusinessUnit(),e.getTemplate(),e.getVariantName());function l(e,t,a,i){digitaldata.onclick.onclickLinkName=e,digitaldata.onclick.onclick=t,i?n.trackAndReset(a):n.track(a)}return a.learnMore=function(){t(".blocks-news a, .buzz-feed a").on("click.analyticsNewsEventsLearnMore",function(){var e;"events-news-load"===r?(e="",t(this).parents(".btn-link-news").length?e=t(this).parents(".btn-link-news").siblings("h3").text().toLowerCase().trim():t(this).parents(".h3").length&&(e=t(this).text().toLowerCase().trim()),l("article:exit","article:exit:"+e,"media-onclick",!0)):"fc-offers"===r&&l(o+":offers:learn more","offers:learn more","offer-onclick",!0)})},a.viewAll=function(){"fc-offer-details"===r&&t(".news-article .cta-button-primary").on("click.analyticsCreditOfferViewAll",function(){l(o+":offers:view all","offers:view all","offer-onclick",!0)})},a.trackSort=function(e,t){"events-news-load"===r?l("news-events:news-reporter:"+i+":content action","news content:filter:"+e+"-"+t,"media-onclick",!0):"fc-offers"===r&&l(o+":offers:sort:"+e+" "+t,"offers:sort:"+e+" "+t,"offer-onclick",!0)},a.init=function(){a.learnMore(),a.viewAll()},a}),define("analytics/events/nudgePopupEvents",["jquery","analytics/analyticsUtilities"],function(e,t){var a={trackNudgePopupLoad:function(e){digitaldata.page.pageName="nudge pop up overlay",t.trackAndReset(e)}};return a}),define("analytics/events/ownerMyProfileEvents",["jquery","analytics/analyticsUtilities","analytics/analyticsVariables"],function(i,n,e){var t={},o=e.getSiteBusinessUnit();return t.dashboardBillboardCtaEvent=function(e){digitaldata.onclick.onclickLinkName="flmo:portal:profile:cta",digitaldata.onclick.onclick="portal:profile:"+e;var t,e=JSON.parse(_analytics_readCookie("OWNER_VEHICLE_VIEW"));e&&(digitaldata.vehicle.modelYear=e.modelYear?e.modelYear.trim():"undefined",t="undefined",e.namplateName&&-1===(t=e.namplateName.toLowerCase().replace(/_/g," ").trim()).indexOf("ford")&&-1===t.indexOf("undefined")&&(t="ford "+t),digitaldata.vehicle.nameplate=t,digitaldata.vehicle.vin=e.vincode?e.vincode.trim():"undefined",digitaldata.vehicle.profileVehicle=digitaldata.vehicle.modelYear+":"+digitaldata.vehicle.nameplate),n.trackAndReset("profile-onclick")},t.ownerProfileTabSwitching=function(){i("li[data-analytics-tab-name]").on("click.analyticsProfileClick",function(){var e,t;"yes"!==i(this).data("analytics-active")&&"logout"!==i(this).data("analytics-tab-name")&&(digitaldata.onclick.onclickLinkName="flmo:portal:profile:tabs",digitaldata.onclick.onclick="portal:profile:tabs:"+i(this).data("analytics-tab-name"),(e=JSON.parse(_analytics_readCookie("OWNER_VEHICLE_VIEW")))&&(digitaldata.vehicle.modelYear=e.modelYear?e.modelYear.trim():"undefined",t="undefined",e.namplateName&&-1===(t=e.namplateName.toLowerCase().replace(/_/g," ").trim()).indexOf("ford")&&-1===t.indexOf("undefined")&&(t="ford "+t),digitaldata.vehicle.nameplate=t,digitaldata.vehicle.vin=e.vincode?e.vincode.trim():"undefined",digitaldata.vehicle.profileVehicle=digitaldata.vehicle.modelYear+":"+digitaldata.vehicle.nameplate),n.trackAndReset("profile-tab-clicks"))})},t.ownerProfileUpdateSaveTrack=function(){digitaldata.onclick.onclickLinkName="flmo:portal:profile:update",digitaldata.onclick.onclick="portal:profile:update:save changes",n.trackAndReset("profile-save-clicks")},t.syncDownloadOverlayLoad=function(){var e,t;"ford-owner"===o&&(digitaldata.page.pageName="flmo:portal:profile:sync update:1:download",digitaldata.page.pageNameNoVehicle="flmo:portal:profile:sync update:1:download",(e=JSON.parse(_analytics_readCookie("OWNER_VEHICLE_VIEW")))&&(digitaldata.vehicle.modelYear=e.modelYear?e.modelYear.trim():"undefined",t="undefined",e.namplateName&&-1===(t=e.namplateName.toLowerCase().replace(/_/g," ").trim()).indexOf("ford")&&-1===t.indexOf("undefined")&&(t="ford "+t),digitaldata.vehicle.nameplate=t,digitaldata.vehicle.vin=e.vincode?e.vincode.trim():"undefined",digitaldata.vehicle.profileVehicle=digitaldata.vehicle.modelYear+":"+digitaldata.vehicle.nameplate),n.trackAndReset("sync-step1"))},t.syncDownloadCTA=function(e){var t,a="",a=0<i('.tab-sync .active[data-content="tab-2"]').length&&["why report","history"].includes(e)?"2:install":"1:download",a=(digitaldata.onclick.onclickLinkName="flmo:portal:profile:sync update:"+a+":cta",digitaldata.onclick.onclick="portal:profile:sync update:"+a+":"+e,JSON.parse(_analytics_readCookie("OWNER_VEHICLE_VIEW")));a&&(digitaldata.vehicle.modelYear=a.modelYear?a.modelYear.trim():"undefined",t="undefined",a.namplateName&&-1===(t=a.namplateName.toLowerCase().replace(/_/g," ").trim()).indexOf("ford")&&-1===t.indexOf("undefined")&&(t="ford "+t),digitaldata.vehicle.nameplate=t,digitaldata.vehicle.vin=a.vincode?a.vincode.trim():"undefined",digitaldata.vehicle.profileVehicle=digitaldata.vehicle.modelYear+":"+digitaldata.vehicle.nameplate),digitaldata.user.productAndSWversion="sync:v"+fordAnalytics.user.productAndSWversion,digitaldata.page.tool="sync software","request download"!==e&&"start download"!==e||(digitaldata.page.toolDescriptor=e),digitaldata.event.action="tool",n.trackAndReset("sync-update-clicks")},t.syncStatusCheck=function(e){digitaldata.onclick.onclickLinkName="flmo:portal:profile:sync update:status check",digitaldata.onclick.onclick="portal:profile:sync update:status check:"+e;var t,e=JSON.parse(_analytics_readCookie("OWNER_VEHICLE_VIEW"));e&&(digitaldata.vehicle.modelYear=e.modelYear?e.modelYear.trim():"undefined",t="undefined",e.namplateName&&-1===(t=e.namplateName.toLowerCase().replace(/_/g," ").trim()).indexOf("ford")&&-1===t.indexOf("undefined")&&(t="ford "+t),digitaldata.vehicle.nameplate=t,digitaldata.vehicle.vin=e.vincode?e.vincode.trim():"undefined",digitaldata.vehicle.profileVehicle=digitaldata.vehicle.modelYear+":"+digitaldata.vehicle.nameplate),digitaldata.user.productAndSWversion="sync:v"+fordAnalytics.user.productAndSWversion,n.trackAndReset("sync-clicks")},t.syncInstallOverlayLoad=function(){var e,t;"ford-owner"===o&&(digitaldata.page.pageName="flmo:portal:profile:sync update:2:install",digitaldata.page.pageNameNoVehicle="flmo:portal:profile:sync update:2:install",(e=JSON.parse(_analytics_readCookie("OWNER_VEHICLE_VIEW")))&&(digitaldata.vehicle.modelYear=e.modelYear?e.modelYear.trim():"undefined",t="undefined",e.namplateName&&-1===(t=e.namplateName.toLowerCase().replace(/_/g," ").trim()).indexOf("ford")&&-1===t.indexOf("undefined")&&(t="ford "+t),digitaldata.vehicle.nameplate=t,digitaldata.vehicle.vin=e.vincode?e.vincode.trim():"undefined",digitaldata.vehicle.profileVehicle=digitaldata.vehicle.modelYear+":"+digitaldata.vehicle.nameplate),digitaldata.user.productAndSWversion="sync:v"+fordAnalytics.user.productAndSWversion,n.trackAndReset("sync-step2"))},t.syncInstallCTA=function(e){digitaldata.onclick.onclickLinkName="flmo:portal:porfile:sync update:2:install:cta",digitaldata.onclick.onclick="portal:profile:sync update:2:install:"+e;var t,e=JSON.parse(_analytics_readCookie("OWNER_VEHICLE_VIEW"));e&&(digitaldata.vehicle.modelYear=e.modelYear?e.modelYear.trim():"undefined",t="undefined",e.namplateName&&-1===(t=e.namplateName.toLowerCase().replace(/_/g," ").trim()).indexOf("ford")&&-1===t.indexOf("undefined")&&(t="ford "+t),digitaldata.vehicle.nameplate=t,digitaldata.vehicle.vin=e.vincode?e.vincode.trim():"undefined",digitaldata.vehicle.profileVehicle=digitaldata.vehicle.modelYear+":"+digitaldata.vehicle.nameplate),digitaldata.user.productAndSWversion="sync:v"+fordAnalytics.user.productAndSWversion,n.trackAndReset("sync-clicks")},t.syncReportOverlayLoad=function(){var e,t;"ford-owner"===o&&(digitaldata.page.pageName="flmo:portal:profile:sync update:report",digitaldata.page.pageNameNoVehicle="flmo:portal:profile:sync update:report",(e=JSON.parse(_analytics_readCookie("OWNER_VEHICLE_VIEW")))&&(digitaldata.vehicle.modelYear=e.modelYear?e.modelYear.trim():"undefined",t="undefined",e.namplateName&&-1===(t=e.namplateName.toLowerCase().replace(/_/g," ").trim()).indexOf("ford")&&-1===t.indexOf("undefined")&&(t="ford "+t),digitaldata.vehicle.nameplate=t,digitaldata.vehicle.vin=e.vincode?e.vincode.trim():"undefined",digitaldata.vehicle.profileVehicle=digitaldata.vehicle.modelYear+":"+digitaldata.vehicle.nameplate),digitaldata.user.productAndSWversion="sync:v"+fordAnalytics.user.productAndSWversion,n.trackAndReset("sync-update"))},t.syncReportCTA=function(e){digitaldata.onclick.onclickLinkName="flmo:prortal:sync update:report:cta",digitaldata.onclick.onclick="portal:profile:sync update:report:"+e;var t,e=JSON.parse(_analytics_readCookie("OWNER_VEHICLE_VIEW"));e&&(digitaldata.vehicle.modelYear=e.modelYear?e.modelYear.trim():"undefined",t="undefined",e.namplateName&&-1===(t=e.namplateName.toLowerCase().replace(/_/g," ").trim()).indexOf("ford")&&-1===t.indexOf("undefined")&&(t="ford "+t),digitaldata.vehicle.nameplate=t,digitaldata.vehicle.vin=e.vincode?e.vincode.trim():"undefined",digitaldata.vehicle.profileVehicle=digitaldata.vehicle.modelYear+":"+digitaldata.vehicle.nameplate),digitaldata.user.productAndSWversion="sync:v"+fordAnalytics.user.productAndSWversion,n.trackAndReset("sync-clicks")},t.syncReportCompleteOverlayLoad=function(e){var t,a;"ford-owner"===o&&(digitaldata.page.pageName="flmo:portal:profile:sync update:report:complete",digitaldata.page.pageNameNoVehicle="flmo:portal:profile:sync update:report:complete",(t=JSON.parse(_analytics_readCookie("OWNER_VEHICLE_VIEW")))&&(digitaldata.vehicle.modelYear=t.modelYear?t.modelYear.trim():"undefined",a="undefined",t.namplateName&&-1===(a=t.namplateName.toLowerCase().replace(/_/g," ").trim()).indexOf("ford")&&-1===a.indexOf("undefined")&&(a="ford "+a),digitaldata.vehicle.nameplate=a,digitaldata.vehicle.vin=t.vincode?t.vincode.trim():"undefined",digitaldata.vehicle.profileVehicle=digitaldata.vehicle.modelYear+":"+digitaldata.vehicle.nameplate),digitaldata.user.productAndSWversion="sync:v"+fordAnalytics.user.productAndSWversion,digitaldata.page.tool="sync software",digitaldata.page.toolDescriptor="upload:"+e+":sync:v"+fordAnalytics.user.productAndSWversion+":"+digitaldata.vehicle.nameplate,n.trackAndReset("sync-update-status"))},t.addVehicleSuccess=function(e,t){digitaldata.page.pageName="flmo:portal:add vehicle:success",digitaldata.page.pageNameNoVehicle="flmo:portal:add vehicle:success",digitaldata.page.tool="vehicle",digitaldata.page.toolDescriptor="add vehicle",t&&(digitaldata.vehicle.nameplate=t.toLowerCase()),digitaldata.vehicle.vin=e,n.trackAndReset("vehicle-added")},t.vehicleTabTriggers=function(){0<i(".js-delete-vehicle").length&&i(".js-delete-vehicle").on("click.analyticsSyncDeleteVehicle",function(){analyticsEventLayer.getOwnerMyProfileEvents().dashboardBillboardCtaEvent("delete vehicle")}),0<i(".js-book-service").length&&i(".js-book-service").on("click.analyticsSyncBookService",function(){analyticsEventLayer.getOwnerMyProfileEvents().dashboardBillboardCtaEvent("book service")})},t.syncDownloadCTATrigger=function(){0<i(".js-whats-in").length&&i(".js-whats-in").on("click.analyticsSyncWhatsIn",function(){t.syncDownloadCTA("whats in")}),0<i(".js-request-download").length&&i(".js-request-download").on("click.analyticsSyncRequestDownload",function(){t.syncDownloadCTA("request download")}),0<i(".js-start-download").length&&i(".js-start-download").on("click.analyticsSyncStartDownload",function(){t.syncDownloadCTA("start download")}),0<i(".js-why-report").length&&i(".js-why-report").on("click.analyticsSyncWhyReport",function(){t.syncDownloadCTA("why report")}),0<i(".js-history").length&&i(".js-history").on("click.analyticsSyncHistory",function(){t.syncDownloadCTA("history")})},t.syncInstallCTATrigger=function(){0<i(".js-install-unzip-instructions").length&&i(".js-install-unzip-instructions").on("click.analtyicsSyncInstallUnzip",function(){t.syncInstallCTA("unzip instructions")}),0<i(".js-why-report").length&&i(".js-why-report").on("click.analtyicsSyncInstallUnzip",function(){t.syncInstallCTA("why report")}),0<i(".js-history").length&&i(".js-history").on("click.analtyicsSyncInstallUnzip",function(){t.syncInstallCTA("history")})},t.ownerDashboardload=function(){digitaldata.page.pageName="flmo:portal:profile",digitaldata.page.siteSection="home",digitaldata.page.hierarchy="owners:flmo:home",digitaldata.page.pageNameNoVehicle="flmo:portal:profile",digitaldata.page.tool="logged in",digitaldata.page.toolDescriptor="logged in",digitaldata.page.site="owner-"+fordAnalytics.country.toLowerCase();var e,t=JSON.parse(_analytics_readCookie("OWNER_VEHICLE_VIEW"));t&&(digitaldata.vehicle.modelYear=t.modelYear?t.modelYear.trim():"undefined",e="undefined",t.namplateName&&-1===(e=t.namplateName.toLowerCase().replace(/_/g," ").trim()).indexOf("ford")&&-1===e.indexOf("undefined")&&(e="ford "+e),digitaldata.vehicle.nameplate=e,digitaldata.vehicle.vin=t.vincode?t.vincode.trim():"undefined",digitaldata.vehicle.profileVehicle=digitaldata.vehicle.modelYear+":"+digitaldata.vehicle.nameplate),n.trackAndReset("global-load")},t.init=function(){t.ownerProfileTabSwitching()},t}),define("analytics/events/ownerMyVehicleEvents",["jquery","analytics/analyticsUtilities","analytics/analyticsVariables","marketConfigGlobal"],function(e,a,t,i){var n={},o=t.getCurrentCountry(),r=t.getPageName(),l=t.getSiteBusinessUnit(),s=t.getVariantName();function c(){digitaldata.page.siteSection="home","ford-owner"===l?(digitaldata.page.heirarchy="owners:flmo:home",digitaldata.page.site="owner-"+o.toLowerCase()):l.includes("ford-brand")&&(digitaldata.page.heirarchy="home","phl"!==i.getCurrentiso3MarketCode()&&(digitaldata.page.site="ford-"+o.toLowerCase()),digitaldata.user.loginStatus="logged out")}return n.registerStep=function(e){c();var t="ford-owner"===l?"flmo:portal:register:":"register:";switch(e){case 1:digitaldata.page.pageName=t+e+":account info",digitaldata.page.pageNameNoVehicle=t+e+":account info",setTimeout(function(){a.trackAndReset("global-overlay")},1e3);break;case 2:digitaldata.page.pageName=t+e+":vehicle info",digitaldata.page.pageNameNoVehicle=t+e+":vehicle info",a.trackAndReset("global-overlay");break;case 3:digitaldata.page.pageName=t+e+":contact info",digitaldata.page.pageNameNoVehicle=t+e+":contact info",a.trackAndReset("global-overlay");break;case 4:setTimeout(function(){digitaldata.page.pageName=t+e+":confirm",digitaldata.page.pageNameNoVehicle=t+e+":confirm","ford-owner"===l?(digitaldata.page.nameplate=fordAnalytics.nameplate,digitaldata.page.modelYear=fordAnalytics.modelYear,digitaldata.vehicle.profileVehicle=digitaldata.page.modelYear+":"+digitaldata.page.nameplate):l.includes("ford-brand")&&(digitaldata.page.tool="event:registered",digitaldata.user.loginStatus="logged out",digitaldata.user.registeredStatus="registered",digitaldata.user.leadOptin="email opt-in full",digitaldata.event.action="action:registered|updates opt-in|tool"),a.trackAndReset("register")},1e3)}},n.loginOverlayLoad=function(){setTimeout(function(){c(),"ford-owner"===l?(digitaldata.page.pageName="flmo:portal:login",digitaldata.page.pageNameNoVehicle="flmo:portal:login",digitaldata.page.hierarchy="owners:flmo:home",digitaldata.page.siteSection="home",digitaldata.page.tool="registered",digitaldata.page.toolDescriptor="registered",digitaldata.event.action="tool|site reg",digitaldata.user.leadType="get updates"):(digitaldata.page.pageName="login",digitaldata.page.pageNameNoVehicle="login",digitaldata.page.hierarchy="home",digitaldata.page.siteSection="home",digitaldata.user.loginStatus="logged out"),a.trackAndReset("global-overlay")},500),"dashboard-all pages"===s&&"flmo:portal:dashboard"===r&&e(".action-register a").on("click.analyticsOwnerRegister",function(){c(),digitaldata.onclick.onclickLinkName="flmo:portal:dashboard:cta",digitaldata.onclick.onclick="portal:dashboard:next steps:register",a.trackAndReset("global-overlay")})},n.loginSuccessRetrun=function(e){c(),digitaldata.page.tool="event:login",digitaldata.onclick.onclickLinkName="login:complete",digitaldata.onclick.onclick="login:complete",digitaldata.event.action="action:logins|tool",digitaldata.user.loginStatus="login",a.trackAndReset("login")},n.loginForgetUserPassOverlayLoad=function(e){"forgot-usename"===e?n.loginForgetUsernameOverlayLoad():"forgot-password"===e&&n.loginForgetPasswordOverlayLoad()},n.loginForgetUsernameOverlayLoad=function(){c(),digitaldata.page.pageName="login:forgot username","ford-owner"===l&&(digitaldata.page.pageName="flmo:portal:login:forgot username"),digitaldata.page.pageNameNoVehicle=digitaldata.page.pageName,digitaldata.event.action="Logins",a.trackAndReset("global-overlay")},n.expertConciergeOverlayCtaClick=function(e){c(),digitaldata.page.pageName="expert concierge overlay:cta:"+e,digitaldata.page.pageNameNoVehicle=digitaldata.page.pageName,a.trackAndReset("global-overlay")},n.expertConciergeOverlayLoad=function(){c(),digitaldata.page.pageName="expert concierge overlay",digitaldata.page.pageNameNoVehicle=digitaldata.page.pageName,a.trackAndReset("global-overlay")},n.loginForgetUsernameChooseOverlayLoad=function(){c(),digitaldata.page.pageName="login:forgot username:select one","ford-owner"===l&&(digitaldata.page.pageName="flmo:portal:login:forgot username:select one"),digitaldata.page.pageNameNoVehicle=digitaldata.page.pageName,a.trackAndReset("global-overlay")},n.loginForgetPasswordOverlayLoad=function(){c(),digitaldata.page.pageName="login:forgot password","ford-owner"===l&&(digitaldata.page.pageName="flmo:portal:login:forgot password"),digitaldata.page.pageNameNoVehicle=digitaldata.page.pageName,digitaldata.event.action="Logins",a.trackAndReset("global-overlay")},n.loginResetPasswordOverlayLoad=function(){c(),digitaldata.page.pageName="login:reset password","ford-owner"===l&&(digitaldata.page.pageName="flmo:portal:login:reset password"),digitaldata.page.pageNameNoVehicle=digitaldata.page.pageName,digitaldata.event.action="Logins",a.trackAndReset("global-overlay")},n.loginResetPasswordSuccessOverlayLoad=function(){c(),digitaldata.page.pageName="login:reset password success","ford-owner"===l&&(digitaldata.page.pageName="flmo:portal:login:reset password success"),digitaldata.page.pageNameNoVehicle=digitaldata.page.pageName,digitaldata.event.action="Logins",a.trackAndReset("global-overlay")},n.loginForgetUsernameChooseSuccess=function(){c(),digitaldata.page.pageName="login:forgot username:select one","ford-owner"===l&&(digitaldata.page.pageName="flmo:portal:login:forgot username:select one"),digitaldata.page.pageNameNoVehicle=digitaldata.page.pageName,a.trackAndReset("global-overlay")},n.dashboardCTA=function(e){},n.dashboardCTATrack=function(){"dashboard-all pages"===s&&"flmo:portal:dashboard"===r&&(e(".icon-profile").parents("a").on("click.analyticsOwnerLoginClick",function(){e(this).attr("href").includes("login")&&(digitaldata.onclick.onclickLinkName="flmo:portal:dashboard:cta",digitaldata.onclick.onclick="portal:dashboard:next steps:login",a.trackAndReset("global-overlay"))}),e(".icon-locate-a-dealer").parents("a").on("click.analyticsOwnerLADClick",function(){digitaldata.onclick.onclickLinkName="flmo:portal:dashboard:cta",digitaldata.onclick.onclick="portal:dashboard:next steps: locate dealer",a.trackAndReset("global-overlay")}))},n.init=function(){n.dashboardCTATrack()},n}),define("analytics/events/ownerServiceMaintenanceEvents",["jquery","analytics/analyticsUtilities","analytics/analyticsVariables"],function(a,n,e){var t={},i=e.getCurrentCountry(),o=(e.getPageNameplate(),e.getPage(),e.getPageName());e.getPageNamePrefix(),e.getSiteBusinessUnit(),e.getTemplate(),e.getVariantName();function r(e,t,a,i){digitaldata.onclick.onclickLinkName=e,digitaldata.onclick.onclick=t,i?n.trackAndReset(a):n.track(a)}return t.trackScheduleMaintenanceCTAClick=function(){"Taiwan"===i&&"flmo:portal:service:set time table"===o&&a(".cta-schedule-maintenance").on("click.analyticsSchedulMaintenance",function(){r("flmo:portal:service:set time table:cta","portal:service:set time table:schedule maintenance","accordion-onclick",!0)})},t.trackScheduleServicePlanDownloadPDFClick=function(){"Vietnam"===i&&"flmo:portal:service:schedule plan"===o&&a('a[href*=".pdf"]').on("click.analyticsDownloadDealershipPDF",function(){var e=a(this).text().toLowerCase().trim(),t=e.split(" ");digitaldata.vehicle.modelYear=t[1].split("-")[0],digitaldata.vehicle.nameplate="ford "+t[0],digitaldata.page.tool="download",digitaldata.page.toolDescriptor="maintenance schedule",digitaldata.event.action="tool",r("flmo:portal:service:schedule plan:download","portal:service:schedule plan:download:"+e,"service-download",!0)})},t.trackQualityCareDownloadPDFClick=function(){"Vietnam"===i&&"flmo:portal:service:schedule plan"===o&&a('a[href*=".pdf"]').on("click.analyticsDownloadDealershipPDF",function(){var e=a(this).text().toLowerCase().trim();digitaldata.page.tool="download",digitaldata.page.toolDescriptor="vehicle report card",digitaldata.event.action="tool",r("flmo:portal:service:quality care:download","portal:service:quality care:download:"+e,"service-download",!0)})},t.trackQualificationCertDownloadPDFClick=function(){"Taiwan"===i&&"flmo:portal:service:qualification certificate"===o&&a('a[href*=".pdf"]').on("click.analyticsDownloadDealershipPDF",function(){var e=a(this).text().toLowerCase().trim();digitaldata.page.tool="download",digitaldata.page.toolDescriptor=e,digitaldata.event.action="tool",r("flmo:portal:service:qualification certificate:download","portal:service:qualification certificate:download:"+e,"qualification-certificate-onclick",!0)})},t.init=function(){t.trackScheduleMaintenanceCTAClick(),t.trackScheduleServicePlanDownloadPDFClick(),t.trackQualityCareDownloadPDFClick(),t.trackQualificationCertDownloadPDFClick()},t}),define("analytics/events/ownerVehicleSupportEvents",["_","jquery","analytics/analyticsUtilities","analytics/analyticsVariables"],function(t,a,n,e){var i={},o=(e.getCurrentCountry(),e.getPageName());e.getSiteBusinessUnit();function r(e,t,a,i){digitaldata.onclick.onclickLinkName=e,digitaldata.onclick.onclick=t,i?n.trackAndReset(a):n.track(a)}return i.trackManualSubmitClick=function(){r("flmo:portal:vehicle support:owner manual:cta","portal:vehicle support:owner manual:submit","ford-faq-onclick",!0)},i.trackManualDownloadBtnClick=function(e){e.on("click.analyticsOwnerManualDownloadPDF",function(){digitaldata.page.tool="download",digitaldata.page.toolDescriptor="owner guide",digitaldata.event.action="tool",r("flmo:portal:vehicle support:owner manual:cta","portal:vehicle support:owner manual:download:"+t.compact(this.href.split("/")).pop().replace(".pdf","").toLowerCase().trim(),"owner-manual-onclick",!0)})},i.ownerSupportManualTrack=function(){"flmo:portal:vehicle support:owner manual"===o&&a('a[href*=".pdf"]').on("click.analyticsDownloadFuelEconomyPDF",function(){digitaldata.page.tool="download",digitaldata.page.toolDescriptor="owner guide",digitaldata.event.action="tool",r("flmo:portal:vehicle support:owner manual:cta","portal:vehicle support:owner manual:download:"+t.compact(this.href.split("/")).pop().replace(".pdf","").toLowerCase().trim(),"owner-manual-onclick",!0)})},i.ownerSupportFuelEconomyTrack=function(){"flmo:portal:vehicle:support:fuel economy"===o&&a('a[href*=".pdf"]').on("click.analyticsDownloadFuelEconomyPDF",function(){digitaldata.page.tool="download",digitaldata.page.toolDescriptor="fuel economy",digitaldata.event.action="tool",r("flmo:portal:vehicle support:fuel economy:download","portal:vehicle support:fuel economy:download:"+t.compact(this.href.split("/")).pop().replace(".pdf","").toLowerCase().trim(),"fuel-brochure-onclick",!0)})},i.ownerSupportBuilderEquipmentManualTrack=function(){"flmo:portal:vehicle support: builder equipment manual"===o&&a(".vehicleTile a.cta-button").on("click.analyticsOwnerBuilderEquipmentManualDownload",function(){var e=a(this).parents(".vehicle-tile-content").find(".vehicle-title").text().trim();digitaldata.page.tool="download",digitaldata.page.toolDescriptor="builder equipment manual",digitaldata.event.action="tool",r("flmo:portal:vehicle support:builder equipment manual:download:"+e,"portal:vehicle support:builder equipment manual:download:"+t.compact(this.href.split("/")).pop().replace(".pdf","").toLowerCase().trim(),"equipment-brochure-onclick",!0)})},i.ownerAppDownloadBtnTrack=function(){"flmo:portal:vehicle support:app download"===o&&(window.trackAppDownloadClick=function(e){r("flmo:portal:vehicle support:app download:cta","portal:vehicle support:app download:"+e,"ford-faq-onclick",!0)})},i.init=function(){i.ownerSupportManualTrack(),i.ownerSupportFuelEconomyTrack(),i.ownerSupportBuilderEquipmentManualTrack(),i.ownerAppDownloadBtnTrack()},i}),define("analytics/events/ownerWarrantyInsuranceEvents",["_","jquery","analytics/analyticsUtilities","analytics/analyticsVariables"],function(e,t,a,i){var n={},o=i.getPageName();i.getSiteBusinessUnit();return n.ownerWarrantyAboutDownloadTrack=function(){void 0!==o&&o.includes("flmo:portal:warranty:about:")&&t('a[href*=".pdf"]').on("click.analyticsOwnerWarrantyAboutDownloadPDF",function(){digitaldata.onclick.onclickLinkName="flmo:portal:warranty:about:download",digitaldata.onclick.onclick="portal:waranty:about:download:"+e.compact(this.href.split("/")).pop().replace(".pdf","").toLowerCase().trim(),digitaldata.page.tool="download",digitaldata.page.toolDescriptor="warranty information",digitaldata.event.action="tool",a.trackAndReset("faq-onclick")})},n.ownerWarrantyFaqDownloadTrack=function(){"flmo:portal:warranty:faq"===o&&t('a[href*=".pdf"]').on("click.analyticsOwnerWarrantyFaqDownloadPDF",function(){digitaldata.onclick.onclickLinkName="flmo:portal:warranty:faq:download",digitaldata.onclick.onclick="portal:warranty:faq:download:"+e.compact(this.href.split("/")).pop().replace(".pdf","").toLowerCase().trim(),digitaldata.page.tool="download",digitaldata.page.toolDescriptor="warranty faq",digitaldata.event.action="tool",a.trackAndReset("faq-onclick")})},n.init=function(){n.ownerWarrantyFaqDownloadTrack(),n.ownerWarrantyAboutDownloadTrack()},n}),define("analytics/events/predeliveryEvents",["analytics/analyticsUtilities"],function(n){var e={};function t(e,t,a,i){digitaldata.onclick.onclickLinkName=e,digitaldata.onclick.onclick=t,i?n.trackAndReset(a):n.track(a)}return e.onLoadBasics=function(){digitaldata.page.pageName="ford owners:predelivery:basics",digitaldata.page.pageNameNoVehicle="ford owners:predelivery:basics",digitaldata.page.variantName="global-overlay",n.track("global-overlay")},e.onLoadFeatured=function(){digitaldata.page.pageName="ford owners:predelivery:featured operations",digitaldata.page.pageNameNoVehicle="ford owners:predelivery:featured operations",digitaldata.page.variantName="global-overlay",n.track("global-overlay")},e.onLoadExpanded=function(){digitaldata.page.pageName="ford owners:predelivery:expanded operations",digitaldata.page.pageNameNoVehicle="ford owners:predelivery:expanded operations",digitaldata.page.variantName="global-overlay",n.track("global-overlay")},e.onLoadPersonalisation=function(){digitaldata.page.pageName="ford owners:predelivery:personalisation",digitaldata.page.pageNameNoVehicle="ford owners:predelivery:personalisation",digitaldata.page.variantName="global-overlay",n.track("global-overlay")},e.clickInEACH=function(e){t("ford owners:predelivery:personalisation:details","predelivery:detail:"+e,"global-onclick",!1)},e.saveAndContinue=function(){t("ford owners:predelivery:personalisation:save","predelivery:save","global-onclick",!1)},e.onLoadMainSummary=function(e){digitaldata.page.pageName="ford owners:predelivery:summary:"+e,digitaldata.page.pageNameNoVehicle="ford owners:predelivery:summary",digitaldata.page.nameplate=e,digitaldata.page.variantName="global-overlay",n.track("global-overlay")},e.viewPdf=function(e){t("ford owners:predelivery:summary:pdf:download:"+(digitaldata.page.nameplate=e),"predelivery:summary:pdf:download","download",!1)},e.submitToDealer=function(e){t("ford owners:predelivery:summary:submit:"+(digitaldata.page.nameplate=e),"predelivery:summary:submit","vhp-onclick",!1)},e.st1ViewVideo=function(){t("ford owners:predelivery:basics:video","predelivery:view video","global-onclick",!1)},e.st1FindOut=function(e){t("ford owners:predelivery:basics:details","predelivery:detail:"+e,"global-onclick",!1)},e.st3ViewVideo=function(){t("ford owners:predelivery:expanded operations:video","predelivery:view video","global-onclick",!1)},e.st3FindOut=function(e){t("ford owners:predelivery:expanded operations:details","predelivery:detail:"+e,"global-onclick",!1)},e}),define("analytics/events/predeliveryRefreshEvents",["analytics/analyticsUtilities"],function(r){var e={loadTrainingPage:function(){digitaldata.page.pageName="predelivery:landing",digitaldata.page.siteSection="predelivery",digitaldata.page.hierarchy="predelivery:landing",digitaldata.page.pageNameNoVehicle="predelivery:landing",digitaldata.event.action="visit start",digitaldata.page.variantName="predelivery-load",r.trackAndUpdate("predelivery-load")},loadLandingPage:function(e,t,a,i,n){digitaldata.page.pageName="predelivery:booking details:"+e,digitaldata.page.siteSection="predelivery",digitaldata.page.hierarchy="predelivery:booking details:"+e,digitaldata.page.pageNameNoVehicle="predelivery:booking details",digitaldata.page.nameplate=e,digitaldata.vehicle.bodyModelTrim=t,digitaldata.vehicle.extIntColorCode=a,digitaldata.event.action="visit start",digitaldata.user.paCode=i,digitaldata.user.fdafCode=i,digitaldata.user.fordRegion=n,digitaldata.page.variantName="predelivery-details",r.trackAndUpdate("predelivery-details")},loadFeaturesPage:function(e,t,a,i,n,o){digitaldata.page.pageName="predelivery:"+t+":"+e,digitaldata.page.pageNameNoVehicle="predelivery:"+t,digitaldata.page.siteSection="predelivery",digitaldata.page.hierarchy="predelivery:"+t+":"+e,digitaldata.page.nameplate=e,digitaldata.vehicle.bodyModelTrim=a,digitaldata.vehicle.extIntColorCode=i,digitaldata.event.action="visit start",digitaldata.user.paCode=n,digitaldata.user.fdafCode=n,digitaldata.user.fordRegion=o,digitaldata.page.variantName="predelivery-details",r.track("predelivery-details")},loadReviewPage:function(e,t,a,i,n){digitaldata.page.pageName="predelivery:review:"+e,digitaldata.page.pageNameNoVehicle="predelivery:review",digitaldata.page.siteSection="predelivery",digitaldata.page.hierarchy="predelivery:review:"+e,digitaldata.page.nameplate=e,digitaldata.vehicle.bodyModelTrim=t,digitaldata.vehicle.extIntColorCode=a,digitaldata.event.action="visit start",digitaldata.user.paCode=i,digitaldata.user.fdafCode=i,digitaldata.user.fordRegion=n,digitaldata.page.variantName="predelivery-details",digitaldata.onclick.onclickLinkName="",r.track("predelivery-details")},loadThankyouPage:function(e,t,a,i,n){digitaldata.page.pageName="predelivery:review submit:"+e,digitaldata.page.pageNameNoVehicle="predelivery:review submit",digitaldata.page.siteSection="predelivery",digitaldata.page.hierarchy="predelivery:review submit",digitaldata.page.nameplate=e,digitaldata.vehicle.bodyModelTrim=t,digitaldata.vehicle.extIntColorCode=a,digitaldata.user.leadType="predelivery booking",digitaldata.page.tool="event:predelivery booking",digitaldata.page.toolDescriptor="predelivery",digitaldata.event.action="lead submitted|tool",digitaldata.user.paCode=i,digitaldata.user.fdafCode=i,digitaldata.user.fordRegion=n,digitaldata.page.variantName="review-submit",r.track("review-submit")},ctaClick:function(e,t,a){digitaldata.onclick.onclickLinkName="predelivery:"+t+":cta:"+e,digitaldata.page.nameplate=e,digitaldata.vehicle.bodyModelTrim=a,digitaldata.page.variantName="global-onclick",r.track("global-onclick")},accordianClick:function(e,t,a){digitaldata.onclick.onclickLinkName="predelivery:"+t+":cta:"+e,digitaldata.onclick.onclick="predelivery:"+t+":cta:"+a,digitaldata.page.variantName="global-onclick",r.track("global-onclick")},downloadPDFClick:function(e,t){digitaldata.onclick.onclickLinkName="predelivery:review submit:pdf:"+e,digitaldata.onclick.onclick="pdf:download:predelivery pdf download",digitaldata.event.action="tool",digitaldata.page.nameplate=e,digitaldata.vehicle.bodyModelTrim=t,digitaldata.page.tool="event:pdf download",digitaldata.page.toolDescriptor="predelivery",digitaldata.page.variantName="download",r.track("download")}};return e}),define("analytics/events/promotionsShowroomEvents",["jquery","analytics/analyticsUtilities","analytics/analyticsVariables"],function(e,t,a){var i={};return i.trackRefinementInput=function(e){},i.trackRefineToolTip=function(e){},i.trackZeroResults=function(){},i.trackResetingFilters=function(e){},i.trackShowOffers=function(e){},i.trackOffersAccordion=function(e){},i}),define("analytics/events/quickBnpEvents",["jquery","analytics/analyticsVariables","analytics/analyticsUtilities"],function(e,t,o){var a={};function i(e,t,a,i){digitaldata.onclick.onclickLinkName=e,digitaldata.onclick.onclick=t,i?o.trackAndReset(a):o.track(a)}function r(e){var t="",e=((e,t,a,i)=>{for(var n={version:"0.0.1"},y=(e=e||[],n.gramSizeLower=a||2,n.gramSizeUpper=i||3,n.useLevenshtein="boolean"!=typeof t||t,n.exactSet={},n.matchDict={},n.items={},function(e,t){if(null===e&&null===t)throw"Trying to compare two null values";var a;return null===e||null===t?0:(a=((e,t)=>{for(var a,i,n=[],o=0;o<=t.length;o++)for(var r=0;r<=e.length;r++)i=o&&r?e.charAt(r-1)===t.charAt(o-1)?a:Math.min(n[r],n[r-1],a)+1:o+r,a=n[r],n[r]=i;return n.pop()})(e=String(e),t=String(t)),e.length>t.length?1-a/e.length:1-a/t.length)}),r=/[^a-zA-Z0-9\u00C0-\u00FF, ]+/,b=function(e,t){for(var a={},i=((e,t)=>{t=t||2;var a="-"+e.toLowerCase().replace(r,"")+"-",i=t-a.length,n=[];if(0<i)for(var o=0;o<i;++o)e+="-";for(o=0;o<a.length-t+1;++o)n.push(a.slice(o,o+t));return n})(e,t=t||2),n=0;n<i.length;++n)i[n]in a?a[i[n]]+=1:a[i[n]]=1;return a},o=(n.get=function(e,t){e=this._get(e);return e||void 0===t?e:t},n._get=function(e){var t=this._normalizeStr(e),t=this.exactSet[t];if(t)return[[1,t]];for(var a,i=this.gramSizeUpper;i>=this.gramSizeLower;--i)if(a=this.__get(e,i))return a;return null},n.__get=function(e,t){var a,i,n,o,r=this._normalizeStr(e),l={},s=b(r,t),c=this.items[t],d=0;for(a in s)if(i=s[a],d+=Math.pow(i,2),a in this.matchDict)for(v=0;v<this.matchDict[a].length;++v)n=this.matchDict[a][v][0],o=this.matchDict[a][v][1],n in l?l[n]+=i*o:l[n]=i*o;if((e=>{for(var t in e)if(e.hasOwnProperty(t))return;return 1})(l))return null;var u,p=Math.sqrt(d),m=[];for(u in l)m.push([l[u]/(p*c[u][0]),c[u][1]]);function h(e,t){return e[0]<t[0]?1:e[0]>t[0]?-1:0}if(m.sort(h),this.useLevenshtein){for(var f=[],g=Math.min(50,m.length),v=0;v<g;++v)f.push([y(m[v][1],r),m[v][1]]);(m=f).sort(h)}for(f=[],v=0;v<m.length;++v)m[v][0]==m[0][0]&&f.push([m[v][0],this.exactSet[m[v][1]]]);return f},n.add=function(e){if(this._normalizeStr(e)in this.exactSet)return!1;for(var t=this.gramSizeLower;t<this.gramSizeUpper+1;++t)this._add(e,t)},n._add=function(e,t){var a,i,n=this._normalizeStr(e),o=this.items[t]||[],r=o.length,l=(o.push(0),b(n,t)),s=0;for(a in l)i=l[a],s+=Math.pow(i,2),a in this.matchDict?this.matchDict[a].push([r,i]):this.matchDict[a]=[[r,i]];var c=Math.sqrt(s);o[r]=[c,n],this.items[t]=o,this.exactSet[n]=e},n._normalizeStr=function(e){if("[object String]"!==Object.prototype.toString.call(e))throw"Must use a string as argument to FuzzySet functions";return e.toLowerCase()},n.length=function(){var e,t=0;for(e in this.exactSet)this.exactSet.hasOwnProperty(e)&&(t+=1);return t},n.isEmpty=function(){for(var e in this.exactSet)if(this.exactSet.hasOwnProperty(e))return!1;return!0},n.values=function(){var e,t=[];for(e in this.exactSet)this.exactSet.hasOwnProperty(e)&&t.push(this.exactSet[e]);return t},n.gramSizeLower);o<n.gramSizeUpper+1;++o)n.items[o]=[];for(o=0;o<e.length;++o)n.add(e[o]);return n})(Object.keys(fordAnalytics.dictionary.vehicles)).get(e);return t=null!==e&&0<e.length&&.4<e[0][0]&&(e=e[0][1],t=fordAnalytics&&fordAnalytics.country&&"Mexico"==fordAnalytics.country?"ford "+a.getNameplateKeyForAnalytics(e):"ford "+e,fordAnalytics.country)&&(e=fordAnalytics.country,-1<["Australia","India","Vietnam","Philippines","Thailand","Mexico"].indexOf(e))?("Mexico"==e?t.replace(/_c_mex|_mex|\d{4}_|_\d{4}|\d{4}/gi,""):t.replace(/\d{4}_|_\d{4}|\d{4}/gi,"")).trim():t}return a.quickBnPOnLoad=function(e,t,a,i,n){t=r(t);digitaldata.page.nameplate=t,digitaldata.page.modelYear=n,digitaldata.page.pageName="quick bp:model details:"+t,digitaldata.page.pageNameNoVehicle="quick bp:model details",digitaldata.page.siteSection="quick bp",digitaldata.page.hierarchy="shopping tools:quick build-price:"+e+":"+t,digitaldata.page.site="ford-brand",digitaldata.vehicle.bodyModelTrim="noSeries"==i?t+":"+a:t+":"+i+":"+a,digitaldata.event.action="bp start",digitaldata.page.tool="event: bp start",digitaldata.page.toolDescriptor="quick bp",o.trackAndReset("bp-start-load")},a.quickBnPContentAction=function(e,t){i("quick bp:model details:content:action:"+r(e)," quick bnp content:"+t,"global-onclick",!0)},a.trackQuickBnPUsageType=function(e){"B"==e?i("quick bp:zip code:content:action","quick bp:zip code:content:action:usage type:commercial","global-onclick",!0):"P"==e&&i("quick bp:zip code:content:action","quick bp:zip code:content:action:usage type:personal","global-onclick",!0)},a.trackLocationPopup=function(){digitaldata.page.pageName="quick bp:zip code",digitaldata.page.siteSection="quick bp",digitaldata.page.hierarchy="shopping tools:quick build-price",digitaldata.page.pageNameNoVehicle="quick bp:zip code",o.trackAndReset("global-overlay")},a}),define("analytics/events/searchEvents",["jquery","analytics/analyticsUtilities","analytics/analyticsVariables"],function(e,t,a){var i={searchLoaded:function(){digitaldata.page.pageName="search overlay",digitaldata.page.siteSection="search",digitaldata.page.hierarchy="search",digitaldata.page.pageNameNoVehicle="search overlay",digitaldata.page.site="ford-brand",t.trackAndReset("global-overlay")},searchShowsResult:function(e){digitaldata.page.pageName="search overlay:results",digitaldata.page.siteSection="search",digitaldata.page.hierarchy="search",digitaldata.page.pageNameNoVehicle="search overlay:results",digitaldata.page.siteSearchString=e,t.trackAndReset("search-load")},searchNoResult:function(){digitaldata.onclick.onclickLinkName="search overlay:no results",digitaldata.onclick.onclick="no search results",t.trackAndReset("global-onclick")},trackSearchOverlayInit:function(e){},trackSearchPopularTermSelection:function(e){},trackSearchResultSelection:function(e){},trackSearchRepeat:function(e){}};return i}),define("analytics/events/searchVinEvents",["jquery","analytics/analyticsUtilities","analytics/analyticsVariables","marketConfigGlobal"],function(a,i,e,n){var t={searchLoadedVin:function(e){var t=n.getCurrentMarketCode();-1<a.inArray(t,["th","vn"])&&(digitaldata.vehicle.vin=e),digitaldata.page.pageName="flmo:portal:service:recalls:search results",digitaldata.page.pageNameNoVehicle="flmo:portal:service:recalls:search results",digitaldata.page.siteSection="service",digitaldata.page.hierarchy="owners:flmo:service",digitaldata.page.site="owner-"+fordAnalytics.country,i.trackAndReset("global-overlay")}};return t}),define("analytics/events/selectLanguageEvents",["jquery","analytics/analyticsUtilities","analytics/analyticsVariables"],function(e,t,a){var i={},n=a.getSiteBusinessUnit();return i.chooseLanguage=function(){e(".site-links a").on("click.analyticsLangSelect",function(){"ford-brand"===n&&(digitaldata.page.pageName="choose language",digitaldata.page.siteSection="home",digitaldata.page.hierarchy="home",digitaldata.page.pageNameNoVehicle="choose language",t.trackAndReset("global-overlay"))})},i.init=function(){i.chooseLanguage()},i}),define("analytics/events/selectVehiclesEvents",["jquery","analytics/analyticsUtilities","analytics/analyticsVariables"],function(e,t,a){var i={};return i.trackFromModelsDisplay=function(e,t,a){e.find("> a, h6 a").on("click",function(){t.nameplateMode?a.code:a.nameplateCode})},i.trackFromYouMightAlsoLike=function(e,t){e.find("> a, h6 a").on("click",function(){t.type,t.nameplateCode})},i.trackUserSelectVehicle=function(e){e&&_analytics_createCookie("OWNER_VEHICLE_VIEW",JSON.stringify(e),1)},i}),define("analytics/events/serviceBookingEvents",["jquery","analytics/analyticsUtilities","analytics/analyticsVariables"],function(e,t,a){var i={};a.getSiteBusinessUnit();return i.showAllDealersList=function(){digitaldata.page.variantName="global-overlay",digitaldata.page.pageName=digitaldata.page.pageName+":results",digitaldata.page.pageNameNoVehicle=digitaldata.page.pageName,t.track("global-overlay")},i.bookOnline=function(){digitaldata.onclick.onclickLinkName="service:book online:locate dealer:info:request service",digitaldata.onclick.onclick="service:book online",t.track("global-onclick")},i.serviceBookingLoadXtime=function(){digitaldata.page.pageName="flmo:portal:service:book online:locate dealer:info",digitaldata.page.siteSection="owners",digitaldata.page.hierarchy="owners:flmo:service",digitaldata.page.pageNameNoVehicle="flmo:portal:service:book online:locate dealer:info",digitaldata.page.site="owner-australia",digitaldata.page.variantName="global-overlay",t.trackAndReset("global-overlay")},i}),define("analytics/events/serviceCalculatorEvents",["jquery","analytics/analyticsUtilities","analytics/analyticsVariables"],function(e,n,t){var a={};return a.servicePlanDownloadPdfClick=function(e){var t,a,i;digitaldata.page.tool="download",digitaldata.page.toolDescriptor="service plan calculator",digitaldata.event.action="tool",t="flmo:portal:service:plan calculator:download",e="portal:service:plan calculator:download:"+e,a="global-onclick",i=!0,digitaldata.onclick.onclickLinkName=t,digitaldata.onclick.onclick=e,i?n.trackAndReset(a):n.track(a)},a}),define("analytics/events/serviceManualEvents",["jquery","analytics/analyticsVariables","analytics/analyticsUtilities"],function(e,t,a){var i,n={trackDownloadVehiclePdfClick:function(){e(".trackDownloadVehiclePdfButton").click(function(){i=(i=e(this).attr("href"))&&t.getFileName(i),digitaldata.onclick.onclickLinkName="flmo:portal:vehicle support:owner manual:cta",digitaldata.onclick.onclick="portal:vehicle support:owner manual:download:"+i,digitaldata.page.tool="download",digitaldata.page.toolDescriptor="owner guide",a.track("global-onclick")})},init:function(){n.trackDownloadVehiclePdfClick()}};return n}),define("analytics/events/servicePriceCalculatorEvents",["jquery","analytics/analyticsUtilities","analytics/analyticsVariables"],function(e,n,t){var a={};t.getSiteBusinessUnit();function i(e,t,a,i){digitaldata.onclick.onclickLinkName=e,digitaldata.onclick.onclick=t,i?n.trackAndReset(a):n.track(a)}return a.fireNextEvent=function(){digitaldata.page.pageName=digitaldata.page.pageName+":calculated",digitaldata.page.pageNameNoVehicle=digitaldata.page.pageName,digitaldata.page.variantName="global-onclick",n.track("global-onclick")},a.fireCalculateEvent=function(){i(digitaldata.page.pageName+":calculated:cta",digitaldata.page.pageName+":calculated:calculate","global-onclick",!1)},a.fireCarouselScroll=function(){i(digitaldata.page.pageName+":calculated:cta",digitaldata.page.pageName+":calculated:carousel scroll","global-onclick",!1)},a.fireCheckboxEvent=function(){i(digitaldata.page.pageName+":calculated:cta",digitaldata.page.pageName+":calculated:additional service item","global-onclick",!1)},a.viewAndPrintPdf=function(){i(digitaldata.page.pageName+":calculated:cta",digitaldata.page.pageName+":calculated:pdf download","global-onclick",!1)},a.fireServicePriceEvent=function(){i(digitaldata.page.pageName+":calculated:cta",digitaldata.page.pageName+":calculated:more info","global-onclick",!1)},a.fireBtnDownloadPdf=function(e){digitaldata.page.tool="download",digitaldata.page.toolDescriptor="service plan calculator",i("flmo:portal:service:plan calculator:download","portal:service:plan calculator:download:"+e,"global-onclick",!(digitaldata.event.action="tool"))},a}),define("analytics/events/shareEvents",["jquery","analytics/analyticsUtilities","analytics/analyticsVariables"],function(t,a,e){var i={},n=e.getSiteBusinessUnit(),o=e.getVariantName();return i.shareLaunch=function(){t("i.icon-share").off("mousedown.analyticsShareLaunch"),t("i.icon-share").on("mousedown.analyticsShareLaunch",function(){t(this).closest("div.actionsPanel.section").children(".share-overlay").hasClass("hide")&&"ford-brand"===n&&"bp-complete-load"!==o&&i.shareLaunchEvent()})},i.shareLaunchEvent=function(){digitaldata.onclick.onclickLinkName="share:launch",digitaldata.onclick.onclick="share:launch",a.trackAndReset("share-launch")},i.shareClick=function(){t('a[class^="icon-share-"]').off("click.analyticsShareClick"),t("a[class^='icon-share-']").on("click.analyticsShareClick",function(){var e;"ford-brand"===n&&(e=t(this).attr("class").split("-").pop(),digitaldata.onclick.onclickLinkName="share",digitaldata.onclick.onclick="share:start:"+e+":"+(()=>"bp-complete-load"===o?"page":"asset")(),a.trackAndReset("share-start"))})},i.init=function(){i.shareLaunch(),i.shareClick()},i}),define("analytics/events/showroomEvents",["jquery","analytics/analyticsVariables","analytics/analyticsUtilities"],function(n,o,r){var e={},l=o.getSiteBusinessUnit();return e.trackSortBySelection=function(){n("div.dropdown-vehicle-sort.active a").on("click.analyticsShowroomSort",function(){var e,t,a,i;"ford-brand"===l&&(e="showroom:all vehicles:sort",t="showroom:sort:"+n(this).attr("sortby"),a=o.getPage()+":"+o.getTemplate()+":click",i="show-onclick",digitaldata.onclick.onclickLinkName=e,digitaldata.onclick.onclick=t,digitaldata.onclick.contentType=a,r.trackAndReset(i))})},e.init=function(){e.trackSortBySelection()},e}),define("analytics/events/simpleEmiCalculatorEvents",["jquery","marketConfigGlobal","analytics/analyticsUtilities","analytics/analyticsVariables"],function(e,t,a,i){var n={trackPaymentCalculatorButton:function(){digitaldata.page.pageName="payment calculator:popup",digitaldata.page.siteSection="payment calculator:popup",digitaldata.page.hierarchy="payment calculator:popup",digitaldata.page.pageNameNoVehicle="payment calculator:popup",digitaldata.page.modelYear=fordAnalytics.modelYear,digitaldata.page.nameplate=fordAnalytics.nameplate,a.track("global-overlay")},trackOverlayCalculator:function(){digitaldata.onclick.onclickLinkName="payment calculator:result",digitaldata.onclick.onclick="payment calculator:result",a.trackAndReset("global-onclick")}};return n}),define("analytics/events/sliderEvents",["jquery","analytics/analyticsVariables","analytics/analyticsUtilities"],function(e,t,n){var a={},i=t.getSiteBusinessUnit();function o(e,t,a,i){digitaldata.onclick.onclickLinkName=e,digitaldata.onclick.onclick=t,i?n.trackAndReset(a):n.track(a)}return a.trackSliderInteraction=function(){e(".slider-feature-section > .control-button > .item").on("click.analyticsSliderClick",function(){"ford-brand"===i&&("vehicle-load"===digitaldata.page.variantName?o("vehicle:content:action:"+t.getPageNameplate(),"vhp content:slider","vhp-onclick",!0):"features-cat-load"===digitaldata.page.variantName?o("vehicle:features:category:content action:"+t.getPageNameplate(),"features category content:slider","feat-onclick",!0):"reveal-load"===digitaldata.page.variantName&&o("reveal:content:action:"+t.getPageNameplate(),"reveal content:slider","reveal-onclick",!0))})},a.init=function(){a.trackSliderInteraction()},a}),define("analytics/events/socialEvents",["jquery","analytics/analyticsVariables","analytics/analyticsUtilities"],function(e,t,a){var i={},n=t.getCurrentCountry(),o=t.getPageNamePrefix();t.getSiteBusinessUnit();return i.socialClick=function(e){10<e.length&&(digitaldata.onclick.onclickLinkName="social:follow",e.includes("facebook")?(digitaldata.onclick.onclick="social:follow:facebook",digitaldata.onclick.referredTo="follow:facebook"):e.includes("twitter")?(digitaldata.onclick.onclick="social:follow:twitter",digitaldata.onclick.referredTo="follow:twitter"):e.includes("youtube")?(digitaldata.onclick.onclick="social:follow:youtube",digitaldata.onclick.referredTo="follow:youtube"):e.includes("instagram")&&(digitaldata.onclick.onclick="social:follow:instagram",digitaldata.onclick.referredTo="follow:instagram"),digitaldata.event.action="brand referral",a.trackAndReset("referral-exit"))},i.trackInitiateSocial=function(){"China"!==n&&"India"!==n||e(".footer-social-share a").each(function(){e(this).on("click.analyticsSocialExit",function(){digitaldata.onclick.onclickLinkName=o+":exit:social";var e=this.hostname;digitaldata.onclick.referredTo=this.href,digitaldata.action.event="brand referral",e.includes("facebook")?digitaldata.onclick.onclick="social:facebook":e.includes("twitter")?digitaldata.onclick.onclick="social:twitter":e.includes("youtube")?digitaldata.onclick.onclick="social:youtube":digitaldata.onclick.onclick="social:other",a.trackAndReset("exit-social-onclick")})})},i.trackContactBarSocial=function(){e(".contactBar .icon.icon-twitter").parents("a").on("click.analyticsSocialExit",function(){digitaldata.onclick.onclickLinkName=o+":exit:social",digitaldata.onclick.onclick="social:twitter",a.trackAndReset("exit-social-onclick")})},i.init=function(){},i}),define("analytics/events/specialOfferEvents",["jquery","analytics/analyticsVariables","analytics/analyticsUtilities","marketConfigGlobal"],function(e,t,n,a){var o,i={},r=a.getCurrentMarketCode(),l=sessionStorage.getItem("removeSingleVehicle"),s=[],c=sessionStorage.getItem("shortListedDataToAdd"),d=(c&&JSON.parse(c).forEach(function(e){var t=e.modelName;null!=typeof e.nameplateKey&&""!=e.nameplateKey&&(t="ford "+e.nameplateKey),s.push(t)}),s.join(":"));var u=-1<["au","nz","th","ph","vn","sk"].indexOf(a.getCurrentMarketCode())?"hot-deals":"special offers";return i.specialOfferEvents=function(e,t,a){var i;-1<a.indexOf("quickViewShortList")&&(digitaldata.page.pageName=u+":quick view:"+o,digitaldata.page.siteSection=u,digitaldata.page.hierarchy=u+":quick view",digitaldata.page.pageNameNoVehicle=u+":quick view",digitaldata.page.nameplate=o),-1<a.indexOf("filter")&&(digitaldata.page.pageName=u+":filter offers",digitaldata.page.siteSection=u,digitaldata.page.hierarchy=u+":filter offers",digitaldata.page.pageNameNoVehicle=u+":filter offers"),(-1<a.indexOf("homeClearFilters")||-1<a.indexOf("refreshFilter")||-1<a.indexOf("offerView")||-1<a.indexOf("price"))&&(digitaldata.page.pageName=u+":home",digitaldata.page.siteSection=u,digitaldata.page.hierarchy=u+":home",digitaldata.page.pageNameNoVehicle=u+":home"),(-1<a.indexOf("removeVehicleYes")||-1<a.indexOf("removeVehicleNo"))&&(digitaldata.page.pageName=u+":shortlist:remove vehicle:"+l,digitaldata.page.siteSection=u,digitaldata.page.hierarchy=u+":shortlist:remove vehicle",digitaldata.page.pageNameNoVehicle=u+":shortlist:remove vehicle",digitaldata.page.nameplate=l),(-1<a.indexOf("removeAllVehiclesYes")||-1<a.indexOf("removeAllShortListNo"))&&(digitaldata.page.pageName=u+":shortlist:remove vehicle:"+d,digitaldata.page.siteSection=u,digitaldata.page.hierarchy=u+":shortlist:remove all vehicles",digitaldata.page.pageNameNoVehicle=u+":shortlist:remove all vehicles",digitaldata.page.nameplate=d),a=t,t="global-onclick",i=!0,digitaldata.onclick.onclickLinkName=e,digitaldata.onclick.onclick=a,i?n.trackAndReset(t):n.track(t)},i.trackGlobalOverlay=function(e,t){var a=[],i=sessionStorage.getItem("shortListedDataToAdd"),i=(i&&JSON.parse(i).forEach(function(e){var t=e.modelName;null!=typeof e.nameplateKey&&""!=e.nameplateKey&&(t="ford "+e.nameplateKey),a.push(t)}),a.join(":"));-1<e.indexOf("quickView")&&(o=t,digitaldata.page.pageName=u+":quick view:"+t,digitaldata.page.siteSection=u,digitaldata.page.hierarchy=u+":quick view",digitaldata.page.pageNameNoVehicle=u+":quick view",digitaldata.page.nameplate=t,n.trackAndReset("global-overlay")),-1<e.indexOf("shortList")&&(digitaldata.page.pageName=u+":shortlist:"+i,digitaldata.page.siteSection=u,digitaldata.page.hierarchy=u+":shortlist",digitaldata.page.pageNameNoVehicle=u+":shortlist",digitaldata.page.nameplate=i,n.trackAndReset("global-overlay")),-1<e.indexOf("enquire")&&("th"==r?(fordAnalytics.nameplate=i,digitaldata.page.pageName="vrfq:contact info:"+i,digitaldata.page.siteSection="get quote",digitaldata.page.hierarchy="shopping tools:get quote",digitaldata.page.pageNameNoVehicle="vrfq:contact info",digitaldata.page.nameplate=i,n.trackAndReset("vrfq-start")):(digitaldata.page.pageName=u+":enquire:"+i,digitaldata.page.siteSection=u,digitaldata.page.hierarchy=u+":enquire",digitaldata.page.pageNameNoVehicle=u+":enquire",digitaldata.page.nameplate=i,n.trackAndReset("global-overlay"))),-1<e.indexOf("filter")&&(digitaldata.page.pageName=u+":filter offers",digitaldata.page.siteSection=u,digitaldata.page.hierarchy=u+":filter offers",digitaldata.page.pageNameNoVehicle=u+":filter offers",n.trackAndReset("global-overlay")),-1<e.indexOf("thankYou")&&(digitaldata.page.pageName=u+":enquire:thank you:"+i,digitaldata.page.siteSection=u,digitaldata.page.hierarchy=u+":enquire:thank you",digitaldata.page.pageNameNoVehicle=u+":enquire:thank you",digitaldata.page.nameplate=i,digitaldata.user.leadType="enquire",digitaldata.event.action="lead submitted",n.track("enquire-submit")),-1<e.indexOf("removeSingleVehicleShortList")&&(digitaldata.page.pageName=u+":shortlist:remove vehicle:"+t,digitaldata.page.siteSection=u,digitaldata.page.hierarchy=u+":shortlist:remove vehicle",digitaldata.page.pageNameNoVehicle=u+":shortlist:remove vehicle",digitaldata.page.nameplate=t,n.trackAndReset("global-overlay")),-1<e.indexOf("removeAllVehicleShortList")&&(digitaldata.page.pageName=u+":shortlist:remove all vehicles:"+d,digitaldata.page.siteSection=u,digitaldata.page.hierarchy=u+":shortlist:remove all vehicles",digitaldata.page.pageNameNoVehicle=u+":shortlist:remove all vehicles",digitaldata.page.nameplate=d,n.trackAndReset("global-overlay"))},i}),define("analytics/events/specQuickViewEvents",["jquery","analytics/analyticsVariables","analytics/analyticsUtilities"],function(e,t,a){var i={trackSelectSpecQuickView:function(e){}};return i}),define("analytics/events/stickyNavEvents",["jquery","analytics/analyticsUtilities","analytics/analyticsVariables"],function(e,n,o){var t={};o.getCurrentCountry(),o.getPageNameplate(),o.getVariantName(),o.getPageName(),o.getPageNamePrefix(),o.getSiteBusinessUnit();return t.trackStickyNav=function(e){var t,a,i=e.trim().toLowerCase();digitaldata.onclick.contentType=o.getPage()+":"+o.getTemplate()+":stickyNav",digitaldata.onclick.contentSubType=e.trim(),i&&(e="sticky nav:content onclik",i="content onclick:"+i,a=!(t="content onclik"),digitaldata.onclick.onclickLinkName=e,digitaldata.onclick.onclick=i,a?n.trackAndReset(t):n.track(t),n.trackAndReset("global-onclick")),n.resetDatalayer()},t}),define("analytics/events/tabsEvents",["jquery","analytics/analyticsVariables","analytics/analyticsUtilities"],function(e,t,o){var a,i={},n=t.getCurrentCountry(),r=!0,l=t.getPageName(),s=t.getPageNamePrefix(),c=t.getSiteBusinessUnit(),d=(t.getVariantName(),[]);function u(e,t,a,i){var n=!0;digitaldata.onclick.onclickLinkName=e,digitaldata.onclick.onclick=t,i&&(d.includes(i)?(o.resetDatalayer(),n=!1):d.push(i)),n&&o.trackAndReset(a)}return i.trackSelectTabs=function(e){if(r)return r=!1;if(e===a)return!1;if(e=(a=e).trim().toLowerCase(),"Taiwan"===n)"ford-owner"===c&&("flmo:portal:vehicle support:driving"===l?u("flmo:portal:vehicle support:driving:cta","portal:vehicle support:driving:tab click:"+e,"ford-faq-onclick"):"flmo:portal:vehicle support:tire class"===l?u("flmo:portal:vehicle support:tire class:cta","portal:vehicle support:tire class:tab click:"+e,"ford-faq-onclick"):"flmo:portal:vehicle support:car maintenance"===l?u("flmo:portal:vehicle support:car maintenance:cta","portal:vehicle support:car maintenance:tab click:"+e,"ford-faq-onclick"):"flmo:portal:service:quality content"===l?u("flmo:portal:service:quality content:cta","portal:service:quality content:tab click:"+e,"accordion-onclick"):-1<l.indexOf("flmo:portal:service:miles pricing:")&&u(l+":cta","portal:service:miles pricing:tab click:"+e,"accordion-onclick"));else if("Vietnam"===n){if("ford-owner"===c)if("flmo:portal:service:parts"===l){switch(e){case"ắc quy":e="battery";break;case"má phanh":e="brakes";break;case"dầu motorcraft":e="oil"}u("flmo:portal:service:parts:tabs","portal:service:parts:tabs:"+e,"accordion-onclick")}else if("flmo:portal:warranty:extended warranty"===l){switch(e){case"các gói bảo hành":e="warranty package";break;case"thời gian bảo hành":e="warranty period"}u("flmo:portal:warranty:extended warranty:tabs","portal:warranty:extended warranty:tabs:"+e,"faq-accordion-onclick")}}else if("Brazil"===n&&"ford-credit"===c){if(-1<l.indexOf("social responsibility")){switch(e){case"sustentabilidade e meio ambiente":e="sustainability";break;case"cidadania corporativa":e="corporate citizenship";break;case"diversidade":e="diversity";break;case"segurança":e="security"}u(s+":social responsibility:"+e,"social responsibility:"+e,"social-responsibility-onclick",e)}if(-1<l.indexOf("support:contact us")){switch(e){case"financiamento":e="financing";break;case"seguro":e="safety";break;case"consórcio":e="consortium"}u(s+":support:contact us:"+e,"contact us:"+e,"support-onclick",e)}}},i}),define("analytics/events/threesixtyColouriserEvents",["jquery","analytics/analyticsVariables","analytics/analyticsUtilities","marketConfigGlobal"],function(o,r,l,e){var t={},s={},c=r.getSiteBusinessUnit(),d=r.getVariantName();return s.clicks=s.clicks||{},t.trackThreesixtyColorizerActions=function(){var t="undefined",a="vhp-360-onclick",i="360",n=":content:action:"+digitaldata.page.nameplate;s.clicks.colorizer360=s.clicks.colorizer360||{},s.clicks.colorizer360.exterior=!1,s.clicks.colorizer360.interior=!1,s.clicks.colorizer360.colorizer=!1,"gallery-load"===d?(n="vehicle:gallery"+n,t="gallery ",a="gallery-onclick",i="360"):"vehicle-load"===d?(n="vehicle"+n,t="vhp ",a="vhp-360-onclick",i="rotate"):"reveal-load"===d&&(n="reveal"+n,t="reveal ",a="reveal-onclick",i="rotate"),o("div.colorizer > .tabs > .tab-content > div.tab.clearfix").on("mousedown.analytics",function(){if("ford-brand"===c){var e=o(this).attr("id");switch(digitaldata.onclick.onclickLinkName=n,digitaldata.onclick.contentType=r.getPage()+":"+r.getTemplate()+":360-colorizer",digitaldata.onclick.onclick=t+"content:"+i,e){case"exterio":s.clicks.colorizer360.exterior||(digitaldata.onclick.contentSubType="interior",l.track(a),s.clicks.colorizer360.exterior=!0);break;case"interio":s.clicks.colorizer360.interior||(digitaldata.onclick.contentSubType="exterior",l.track(a),s.clicks.colorizer360.interior=!0)}l.resetDatalayer()}}),o("div.colorizer > .tabs > .tab-content > #colorizer ul#colorizerBtn").on("mousedown.analytics",function(){s.clicks.colorizer360.colorizer||(digitaldata.onclick.onclickLinkName=n,digitaldata.onclick.onclick=t+"content:colorizer",digitaldata.onclick.contentType=r.getPage()+":"+r.getTemplate()+":360-colorizer",digitaldata.onclick.contentSubType="colorizer",l.trackAndReset(a),"za"!==e.getCurrentMarketCode()&&(s.clicks.colorizer360.colorizer=!0))})},t.init=function(){t.trackThreesixtyColorizerActions()},t}),define("analytics/events/trackCustomerServiceCharterClickAnalytics",["jquery","analytics/analyticsUtilities"],function(e){return $(".customer-service-charter-pdf-analytics").click(function(){digitaldata.onclick.onclickLinkName="flmo:portal:service:commitments:cta",digitaldata.onclick.onclick="flmo:portal:service:commitments:download charter",_satellite.track("global-onclick")}),{}}),define("analytics/events/unsupportedBrowserEvents",["jquery","analytics/analyticsVariables","analytics/analyticsUtilities"],function(e,t,a){var i={},n=t.getSiteBusinessUnit();return i.fillData=function(){"ford-brand"===n&&(digitaldata.page.pageName="home",digitaldata.page.siteSection="home",digitaldata.page.hierarchy="home",digitaldata.page.pageNameNoVehicle="browser unsupported overlay",a.trackAndReset("global-overlay"))},i}),define("analytics/events/vehicleAccessoriesEvents",["jquery","analytics/analyticsVariables","analytics/analyticsUtilities"],function(t,e,a){var i={},n=e.getPageCategory(),o=e.getPageNameplate(),r="all",l=(e.getPageName(),e.getSiteBusinessUnit()),s=e.getVariantName();return i.trackAccessoriesClick=function(){t("li.item.filtered a").on("click.analyticsAccessoriesView",function(){var e;"accessories-load"===s&&(e=t(this).siblings("span.name-item").text().trim(),"ford-brand"===l)&&(digitaldata.onclick.onclickLinkName="vehicle:accessories:content action:"+o,digitaldata.onclick.onclick="accessories content:"+e,a.trackAndReset("access-onclick"))})},i.trackAccessoriesFilter=function(e){"accessories-load"===s&&("exterior"===e?e="ext":"interior"===e?e="int":"package"===e&&(e="pkg"),r=e,"ford-brand"===l)&&(digitaldata.onclick.onclickLinkName="vehicle:accessories:content action:"+o,digitaldata.onclick.onclick="accessories content:filter",a.trackAndReset("access-onclick")),"events-news-load"===s&&(r=e.toLowerCase(),"ford-brand"===l)&&(digitaldata.onclick.onclickLinkName="news-events:news-reporter:"+n+":content action",digitaldata.onclick.onclick="news content:filter:"+r,a.trackAndReset("media-onclick"))},i.init=function(){i.trackAccessoriesClick()},i}),define("analytics/events/vehicleAttributeEvents",["jquery","analytics/analyticsVariables","analytics/analyticsUtilities"],function(e,t,a){var i={},n=t.getPageNameplate();return i.trackQRCodeClick=function(){e(".show-qrcode-layer.buttonOnDesktop").click(function(){digitaldata.onclick.onclickLinkName="vehicle:content:action:"+n,digitaldata.onclick.onclick="vhp content:qrcode",digitaldata.onclick.contentType="qrcode overlay",digitaldata.onclick.contentSubType="qrcode fordmall",a.track("vhp-onclick")})},i.init=function(){i.trackQRCodeClick()},i}),define("analytics/events/vehicleFeaturesEvents",["jquery","analytics/analyticsVariables","analytics/analyticsUtilities"],function(e,a,i){var t={},n=a.getSiteBusinessUnit();return t.trackVehicleContentAction=function(e,t){"ford-brand"===n&&(digitaldata.onclick.onclickLinkName="vehicle:features:content action:"+a.getPageNameplate(),digitaldata.onclick.onclick="features content:"+e+":"+t,i.trackAndReset("feat-onclick"))},t.trackVehicleCategoryContentAction=function(e){"ford-brand"===n&&(digitaldata.onclick.onclickLinkName="vehicle:features:content action:"+a.getPageNameplate(),digitaldata.onclick.onclick="features category content:"+e,i.trackAndReset("feat-onclick"))},t}),define("analytics/events/vehicleHomePageEvents",["jquery","analytics/analyticsVariables","analytics/analyticsUtilities"],function(e,t,a){var i={},n=t.getSiteBusinessUnit();return i.trackVHPOnClick=function(e){"ford-brand"===n&&(digitaldata.onclick.onclickLinkName="vehicle:content:action:"+t.getPageNameplate(),digitaldata.onclick.onclick="vhp content:"+e,a.trackAndReset("vhp-onclick"))},i}),define("analytics/events/vehicleRevealEvents",["jquery","analytics/analyticsVariables","analytics/analyticsUtilities"],function(e,t,a){var i={},n=t.getSiteBusinessUnit(),o=t.getVehicleCategory();return i.trackVehicleRevealClick=function(e){"ford-brand"===n&&(digitaldata.onclick.onclickLinkName="reveal:content:action:"+t.getPageNameplate(),digitaldata.onclick.onclick="reveal content:"+e,digitaldata.onclick.contentType="reveal:"+t.getTemplate()+":features",a.trackAndReset("reveal-onclick"))},i.trackVehicleRevealLoad=function(e){digitaldata.page.pageName="reveal:reservation explained:"+e,digitaldata.page.pageNameNoVehicle="reveal:reservation explained",digitaldata.page.siteSection="reveal",digitaldata.page.hierarchy="reveal:"+o+":"+e,a.trackAndReset("global-load")},i}),define("analytics/events/youtubePlayerEvents",["jquery","analytics/analyticsUtilities","analytics/analyticsVariables"],function(e,a,t){var i={},n=t.getSiteBusinessUnit();return fordAnalyticsActions.videos={},i.trackVideoStart=function(e){digitaldata.video.videoName=fordAnalytics.videoName,digitaldata.video.segmentTime=e,fordAnalyticsActions.videos[fordAnalytics.videoName]={0:1,25:0,50:0,75:0,100:0},digitaldata.event.action="video start",n.startsWith("ford-brand")||"ford-owner"===n?a.track("video-segment-0"):"ford-credit"===n&&(digitaldata.video.videoTrack="video",a.track("video-start")),a.resetDatalayer()},i.trackVideoEnd=function(e){void 0===fordAnalyticsActions.videos[fordAnalytics.videoName]||fordAnalyticsActions.videos[fordAnalytics.videoName][100]||(fordAnalyticsActions.videos[fordAnalytics.videoName][100]=1,digitaldata.video.videoName=fordAnalytics.videoName,digitaldata.video.segmentTime=e,digitaldata.event.action="video complete",n.startsWith("ford-brand")||"ford-owner"===n?a.track("video-segment-100"):"ford-credit"===n&&a.track("video-complete"),a.resetDatalayer())},i.triggerVideoTracking=function(e,t){digitaldata.video.segmentTime=e,digitaldata.event.action=t+"% complete",a.track("video-segment-"+t)},i.trackVideoProgress=function(e,t){t=5*Math.round(e/t*100/5);[25,50,75].includes(t)&&(digitaldata.video.videoName=fordAnalytics.videoName,digitaldata.video.segmentTime=e,"ford-credit"===n&&(digitaldata.video.videoTrack="video"),void 0===fordAnalyticsActions.videos[fordAnalytics.videoName]||fordAnalyticsActions.videos[fordAnalytics.videoName][t]||(fordAnalyticsActions.videos[fordAnalytics.videoName][t]=1,digitaldata.event.action=t+"% complete",25==t||75==t?i.triggerVideoTracking(e,t):50==t&&(digitaldata.vehicle.nameplate=fordAnalytics.nameplate,i.triggerVideoTracking(e,t))),a.resetDatalayer())},i}),define("my-profile/component.myProfile",["jquery"],function(e){var t={init:function(){e("a").has("button.update-your-sync").each(function(){e(this).on("click",function(){e("button.update-your-sync").attr("active",!1),e("button",e(this)).attr("active",!0)})})}};return t}),define("update-sync/component.scrollViewContent",["jquery"],function(n){var o,e={},r="";return e.init=function(){var e,t,a,i;(o=n(".updatesync-scrollviewcontent")).hide(),e=n("#serviceLayerUrl").val()+"/fordowner/vehicle/users/profiles/Sync/dowloadMarketingDesc",t=n.cookie("OWNER_SESSION"),a=n.cookie("OWNER_USERNAME"),(i="#"+(i=n(".tabs-nav-list .is-active :first-child").attr("id"))+":last")&&(r=n(".tabs-container").find(i).find("input[name=vincode]").val()),i={sessionToken:t,userName:a,vincode:r},void 0!==r&&""!=r?n.ajax({type:"POST",url:e,dataType:returnJsonTypeBaseonBrowser(),data:i,success:function(e){200==e.returnCode&&(e=e.msg)&&e.length&&n(".updatesync-scrollviewcontent").find(".updatesync-scrollviewcontent-info").html(e),o.show()},error:function(e){o.show()}}):o.show()},e}),define("update-sync/component.updateSync",["jquery","utils/mediaTracking","analytics/analyticsEventLayer"],function(n,e,o){var r={},l="";r.init=function(){try{var e=CQ_Analytics.OwnerInfoStoreMgr.getData().vehicle[0];e&&(l=e.vincode)}catch(e){}n(".updateYourSync.section").each(function(e,t){var a=n(this),i=a.find("ul.tab-header");i.on("click","li[data-tab]",function(){var e=n(this).attr("data-tab");i.find("li[data-tab]").removeClass("active"),a.find(".box-container.row .row:first").removeClass("active-row"),"tab-2"==e?(o.getOwnerMyProfileEvents().syncInstallOverlayLoad(),o.getOwnerMyProfileEvents().syncInstallCTATrigger(),i.find("li[data-tab]").addClass("active"),a.find(".box-container.row .row:first").addClass("active-row")):o.getOwnerMyProfileEvents().syncDownloadCTATrigger(),a.find(".component-content:first .tab-content[data-content]").removeClass("active"),a.find('.component-content:first .tab-content[data-content="'+e+'"]').addClass("active")})});var e=n("#serviceLayerUrl").val()+"/fordowner/vehicle/users/profiles/dowloadSyncStatus",t=n.cookie("OWNER_SESSION"),a=CQ_Analytics.OwnerInfoStoreMgr.getData();l=(n(".tabs-nav-list").find(".is-active").hasClass("first")?a.vehicle[0]:a.vehicle[1]).vincode,a={sessionToken:t,vincode:l},n.ajax({type:"POST",url:e,dataType:returnJsonTypeBaseonBrowser(),data:a,success:function(e){e.result?(r.status=e.status,"No New Updates"==r.status?(d("request-no-updates-overlay"),u(".requestNoUpdates"),n(".requestNoUpdates .cta-button").each(function(){n(this).click(function(){return n(".overlay-close").click(),!1})})):"Request Success"==r.status?"true"==((e,t)=>(t=t||location.href,e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),null==(e=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(t))?null:e[1]))("installSync",window.location.href)?(d("update-your-sync"),n(".tab-sync").find("[data-tab=tab-2]").click(),o.getOwnerMyProfileEvents().syncInstallOverlayLoad()):(d("request-success-overlay"),n(".requestSuccess .cta-button").each(function(){n(this).click(i)})):"Request Fail"==r.status?(d("request-fail-overlay"),u(".requestFail"),n(".requestFail .cta-button").each(function(){n(this).click(s)})):"Requested But Processing"==r.status?(d("request-processing-overlay"),u(".requestProcessing"),n(".requestProcessing .cta-button").each(function(){n(this).click(function(){return n(".overlay-close").click(),!1})})):d("update-your-sync")):d("update-your-sync")},error:function(e){}})};var i=function(e){e.preventDefault();var t,e=n("#serviceLayerUrl").val()+"/fordowner/vehicle/users/profiles/Sync/download";try{i=CQ_Analytics.OwnerInfoStoreMgr.getData().userName,t=n.cookie("OWNER_SESSION")}catch(e){}null!=l&&(l=l.replace(/\s/g,"").toUpperCase());var a=getEmailKeyUrl("SYNCRP"),i={userName:i,sessionToken:t,vincode:l,emailKey:a};return n.ajax({type:"POST",url:e,dataType:returnJsonTypeBaseonBrowser(),data:i,success:function(e){e.result&&(r.downloadLink=e.fileUrl)},error:function(e){}}),d("update-your-sync"),n(".download-step1-content").hide(),n(".download-step2-content").show(),n(".cta-start-download").unbind().click(c),!1},s=function(e){return e.preventDefault(),d("update-your-sync"),!1},c=function(e){return e.preventDefault(),o.getOwnerMyProfileEvents().syncDownloadCTA("start download"),window.location.href=r.downloadLink,!1};function d(e){switch(n(".update-your-sync").hide(),n(".request-no-updates-overlay").hide(),n(".request-processing-overlay").hide(),n(".request-fail-overlay").hide(),n(".request-success-overlay").hide(),n(".whats-new-overlay").hide(),n(".unzip-instructions-overlay").hide(),n(".why-report-overlay").hide(),n("."+e).show(),e){case"update-your-sync":o.getOwnerMyProfileEvents().syncDownloadOverlayLoad(),o.getOwnerMyProfileEvents().syncDownloadCTATrigger();break;case"request-no-updates-overlay":o.getOwnerMyProfileEvents().syncStatusCheck("no updates");break;case"request-success-overlay":o.getOwnerMyProfileEvents().syncStatusCheck("download ready");break;case"request-fail-overlay":o.getOwnerMyProfileEvents().syncStatusCheck("request failed");break;case"request-processing-overlay":o.getOwnerMyProfileEvents().syncStatusCheck("request unavailable")}}function u(e){e=n(e);e.length&&0<e.html().indexOf("[@email]")&&e.html(replaceHtml(e.html(),{"[@email]":CQ_Analytics.OwnerInfoStoreMgr.getData().email}))}return r}),define("download-sync/component.downloadSync",["jquery","utils/mediaTracking"],function(r,t){var a={},l="";function i(t,a){return t&&Object.keys(a).forEach(function(e){t=t.replace(/\[\@email\]/g,a[e])}),t}function s(e){r(".download-sync-wrap.step1",e).hide(),r(".download-sync-wrap.step2",e).show(),0<r(".preparingUpdate").html().indexOf("[@email]")&&r(".preparingUpdate").html(i(r(".preparingUpdate").html(),{"[@email]":CQ_Analytics.OwnerInfoStoreMgr.getData().email}))}function c(e,t){r(".download-sync-wrap.step1",t).hide(),r(".request-processing-overlay",t).show(),0<r(".requestProcessing").html().indexOf("[@email]")&&r(".requestProcessing").html(i(r(".requestProcessing").html(),{"[@email]":CQ_Analytics.OwnerInfoStoreMgr.getData().email}))}return a.init=function(){var t=CQ_Analytics.OwnerInfoStoreMgr.getData();l=(r(".tabs-nav-list").find(".is-active").hasClass("first")?t.vehicle[0]:t.vehicle[1]).vincode,r(".download-sync-wrap.step2").hide(),r(".request-processing-overlay").hide(),r(".iAgree").find(".cta-button").on("click",function(){var a=r(".downloadSync.section"),t=r("#serviceLayerUrl").val(),i=require("cookie"),t=t+"/fordowner/vehicle/users/profiles/Sync/request",i=i.getSessionCookie(),n=[],o=(r("tr.update-your-sync-active td").each(function(e,t){r(t).find("a.update-your-sync-link").length&&n.push(e-1)}),getEmailKeyUrl("SYNCDL")),i={userName:"",sessionToken:i,vincode:l,emailKey:o};try{i.userName=CQ_Analytics.OwnerInfoStoreMgr.getData().userName,i.sessionToken=r.cookie("OWNER_SESSION")}catch(e){}r.post(t,i,function(t){try{t.result?(digitaldata&&(digitaldata.user.productAndSWversion=t.syncVersion),s(a)):c(e,a)}catch(e){c(0,a)}},returnJsonTypeBaseonBrowser()).fail(function(e){s(a)})}),r(".requestProcessing, .preparingUpdate").on("click",function(){r(".overlay-close").click()})},a}),Array.prototype.forEach||(Array.prototype.forEach=function(e,t){var a,i;if(null==this)throw new TypeError(" this is null or not defined");var n,o=Object(this),r=o.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(1<arguments.length&&(a=t),i=0;i<r;)i in o&&(n=o[i],e.call(a,n,i,o)),i++});var ES={ToObject:function(e){if(null==e)throw new TypeError("can't convert "+e+" to object");return Object(e)},ToUint32:function(e){return e>>>0}};function recallPagesInit(){window.recallUtils={vin:sessionStorage.getItem("vin")||"",bpid:sessionStorage.getItem("bpid")||"",userEmail:sessionStorage.getItem("email")||"",sessionToken:sessionStorage.getItem("SESSIONTOKEN")||"",isSignin:!!sessionStorage.getItem("SESSIONTOKEN"),isUpdateProfile:"",updateProfileDate:{},vinData:{},isRecallLanding:!1,isRecallStatus:!1,pageContent:"",dataLoader:document.querySelector("[data-loader]"),serviceLayerUrl:null!==document.getElementById("serviceLayerUrl")?document.getElementById("serviceLayerUrl").value:"",redirectURL:document.querySelector(".au-recall-vin [data-success]")?document.querySelector(".au-recall-vin [data-success]").getAttribute("data-success"):"",errorMsgTarget:document.querySelector(".profile-update-code .textfield-gcamp-verification-code small.error-oncall")?document.querySelector(".profile-update-code .textfield-gcamp-verification-code small.error-oncall"):"",formElement:$("[data-recall-update-profile]")},null!==document.querySelector(".recall-main-container")?(recallUtils.isRecallLanding=!0,recallUtils.pageContent=document.querySelector(".recall-main-container")):(recallUtils.isRecallStatus=!0,recallUtils.pageContent=document.querySelector(".au-recall-container")),recallUtils.getLatest=function(){recallUtils.vin=sessionStorage.getItem("vin")||"",recallUtils.bpid=sessionStorage.getItem("bpid")||"",recallUtils.userEmail=sessionStorage.getItem("userEmail")||"",recallUtils.sessionToken=sessionStorage.getItem("sessionToken")||""},recallUtils.apiCall=function(e,t,a,i,n){$.ajax({url:recallUtils.serviceLayerUrl+e,dataType:"json",method:t,data:a}).success(function(e){i(e)}).error(function(e){n(e)})},recallUtils.enableSubmitButton=function(){$(".profile-update-email .get-verification-code .cta-button").unbind("click"),$(".profile-update-email .get-verification-code .cta-button").on("click",recallUtils.getCode),$('.profile-update-code [name="gcamp-verification-code"]').removeAttr("disabled"),$(".profile-update-code .cta-button").removeAttr("disabled"),$(".profile-update-code .vin-verify-submit .cta-button").unbind("click"),$(".profile-update-code .textfield-gcamp-verification-code .input-field input").focus(),$(".profile-update-code .vin-verify-submit .cta-button").on("click",recallUtils.varifyCode)},recallUtils.checkCRMAPI=function(){recallUtils.getLatest(),recallUtils.email=$(".recall-verify-update-profile .textfield-PRIMARY_EMAIL input").val()||"";var e={};recallUtils.sessionToken=sessionStorage.getItem("SESSIONTOKEN")||"",recallUtils.errorMsgTarget=document.querySelector(".profile-update-code .textfield-gcamp-verification-code small.error-oncall")?document.querySelector(".profile-update-code .textfield-gcamp-verification-code small.error-oncall"):"",null!==recallUtils.errorMsgTarget&&$(".profile-update-code .textfield-gcamp-verification-code label").append('<small class="error-oncall"></small>'),e.vin=recallUtils.vin,""!==recallUtils.sessionToken?e.sessionToken=recallUtils.sessionToken:""!==recallUtils.bpid?e.bpid=recallUtils.bpid:e.email=recallUtils.email,recallUtils.apiCall("/fordowner/vehicle/users/gcampcrm","GET",e,recallUtils.checkCRMAPISuccess,recallUtils.checkCRMAPIError)},recallUtils.scroller=function(e){e<0&&(e=-e),$("html, body").animate({scrollTop:e-$(".navigation.row.fixed").height()-70},800)},recallUtils.checkCRMAPISuccess=function(e){var t,a;recallUtils.isRecallLanding?e.result?1<e.customerVO.length?($(".profile-update-code .vin-verify-submit .cta-button").unbind("click"),$(".profile-update-name").show(),recallUtils.vinData=e,$(".profile-update-name .cta-button").on("click",recallUtils.submitProfileName)):(sessionStorage.setItem("email",$('.profile-update-email [name="PRIMARY_EMAIL"]').val()),sessionStorage.setItem("UPDATEPROFILE","show"),recallUtils.redirectURL=recallUtils.authoredURL(recallUtils.redirectURL),window.location=recallUtils.getOrigin()+recallUtils.redirectURL):recallUtils.checkCRMAPIError(e):e.result?1<(t=e.customerVO).length?($(".profile-update-code .vin-verify-submit .cta-button").unbind("click"),$(".profile-update-name").show(),recallUtils.vinData=e,recallUtils.formUpdateLoader(!1),$(".profile-update-name .cta-button").on("click",recallUtils.submitProfileName)):($(".overlay-close").trigger("click"),sessionStorage.setItem("email",$('.profile-update-email [name="PRIMARY_EMAIL"]').val()),1===t.length&&(a=recallUtils.formElement.serializeObject(),sessionStorage.setItem("bpid",t[0].bpid),sessionStorage.setItem("email",t[0].email),recallUtils.prefillForm(a,t[0]),recallUtils.toggleLoader(!1),(a=document.querySelector(".recall-update-profile-form-include")).classList.remove("hide"),document.querySelector(".captcha-refresh").click(),document.querySelector('[name="recaptcha"]').value="",recallUtils.scroller(a.getBoundingClientRect().top))):recallUtils.checkCRMAPIError(e)},recallUtils.submitProfileName=function(e){e.preventDefault(),recallUtils.formUpdateLoader(!0);var t=recallUtils.formElement.serializeObject(),a=document.querySelector('.profile-update-name [name="INDIVIDUAL_CUST_FIRST_NAME"]').value,i=document.querySelector('.profile-update-name [name="INDIVIDUAL_CUST_LAST_NAME"]').value,e=recallUtils.vinData.customerVO,e=(e.forEach(function(e){e.firstName.toLowerCase()===a.toLowerCase()&&e.lastName.toLowerCase()===i.toLowerCase()&&(sessionStorage.setItem("bpid",e.bpid),sessionStorage.setItem("email",e.email),recallUtils.prefillForm(t,e))}),document.querySelector(".overlay-container .icon-x").click(),recallUtils.toggleLoader(!1),document.querySelector(".recall-update-profile-form-include"));document.querySelector(".captcha-refresh").click(),document.querySelector('[name="recaptcha"]').value="",e.classList.remove("hide"),recallUtils.scroller(e.getBoundingClientRect().top)},recallUtils.prefillForm=function(e,t){document.querySelector('[name="INDIVIDUAL_CUST_FIRST_NAME"]').value=t.firstName,e.INDIVIDUAL_CUST_FIRST_NAME=t.firstName,document.querySelector('[name="INDIVIDUAL_CUST_LAST_NAME"]').value=t.lastName,e.INDIVIDUAL_CUST_LAST_NAME=t.lastName,document.querySelector('[name="MOBILE_PHONE_NUMBER"]').value=t.mobileNo,e.MOBILE_PHONE_NUMBER=t.mobileNo,document.querySelector('[name="CUSTOMER_ADDRESS_LINE_2"]').value=t.street,e.CUSTOMER_ADDRESS_LINE_2=t.street,document.querySelector('[name="CUSTOMER_ADDRESS_DIVISION_1"]').value=t.city,e.CUSTOMER_ADDRESS_DIVISION_1=t.city,document.querySelector('[name="CUSTOMER_ADDRESS_DIVISION_2"]').value=t.state,document.querySelector(".select2-container .select2-chosen").innerHTML=t.state,e.CUSTOMER_ADDRESS_DIVISION_2=t.state,document.querySelector('[name="CUSTOMER_POSTAL_CODE"]').value=t.postcode,e.CUSTOMER_POSTAL_CODE=t.postcode,e.email=t.email},recallUtils.checkCRMAPIError=function(e){recallUtils.displayError(getErrorMessageByCode(e.errorCode),!0,recallUtils.errorMsgTarget)},recallUtils.varifyCode=function(e){e.preventDefault(),recallUtils.formUpdateLoader(!0),0==$(".profile-update-code .textfield-gcamp-verification-code small.error-oncall").length&&($(".profile-update-code .textfield-gcamp-verification-code label").append('<small class="error-oncall"></small>'),recallUtils.formUpdateLoader(!1),recallUtils.enableVerificationCodeCta(!0,0)),$(".profile-update-code .textfield-gcamp-verification-code .input-field").hasClass("error")||((e={}).email=$('.profile-update-email [name="PRIMARY_EMAIL"]').val(),e.code=$('.profile-update-code [name="gcamp-verification-code"]').val(),recallUtils.apiCall("/fordowner/vehicle/users/recallemailcode","GET",e,recallUtils.varifyCodeSuccess,recallUtils.varifyCodeError))},recallUtils.enableVerificationCodeCta=function(e,t){var a,i,n,o=document.querySelector("[data-timer]"),r=document.querySelector(".profile-update-email .get-verification-code .cta-button");r&&(e?(1e4<t&&(a=document.querySelector("[data-remaining-time]"),i=t/1e3,n=setInterval(function(){i--,a.innerHTML=i},1e3),o.classList.remove("hide")),setTimeout(function(){r.removeAttribute("disabled"),clearInterval(n),o&&o.classList.add("hide")},t||0)):r.setAttribute("disabled",!0))},recallUtils.getCode=function(){var e;recallUtils.enableVerificationCodeCta(!1),0==$(".profile-update-email .email-field small.error-oncall").length&&$(".profile-update-email .email-field label").append('<small class="error-oncall"></small>'),$(".profile-update-email .email-field .input-field").hasClass("error")||((e={}).email=document.querySelector('.profile-update-email [name="PRIMARY_EMAIL"]').value,recallUtils.apiCall("/fordowner/vehicle/users/recallemail","GET",e,recallUtils.getCodeSuccess,recallUtils.getCodeError))},recallUtils.getCodeSuccess=function(){recallUtils.enableSubmitButton(),recallUtils.enableVerificationCodeCta(!0,12e4)},recallUtils.getCodeError=function(e){var t=$(".profile-update-email .email-field small.error-oncall");recallUtils.enableVerificationCodeCta(!0,0),recallUtils.displayError(getErrorMessageByCode(e.errorCode),!0,t)},recallUtils.formUpdateLoader=function(e){var t=document.querySelector("[data-form-loader]"),a=document.querySelector(".profile-update-email"),i=document.querySelector(".profile-update-code"),n=document.querySelector(".profile-update-name"),o=document.querySelector(".overlay-privacy-section");e?(t.classList.remove("hide"),null!==a&&a.setAttribute("style","display: none;"),null!==i&&i.setAttribute("style","display: none;"),null!==n&&n.setAttribute("style","display: none;"),null!==o&&o.setAttribute("style","display: none;")):(t.classList.add("hide"),null!==a&&a.setAttribute("style","display: block;"),null!==i&&i.setAttribute("style","display: block;"),null!==o&&o.setAttribute("style","display: block;"))},recallUtils.varifyCodeSuccess=function(e){e.result?recallUtils.checkCRMAPI():recallUtils.varifyCodeError(e)},recallUtils.varifyCodeError=function(e){recallUtils.formUpdateLoader(!1),recallUtils.displayError(getErrorMessageByCode(e.errorCode),!0,recallUtils.errorMsgTarget)},recallUtils.authoredURL=function(e){return-1==window.location.href.indexOf("?wcmmode=disabled")&&-1==window.location.href.indexOf("&wcmmode=disabled")||(-1!=e.indexOf("?")?e+="&wcmmode=disabled":e+="?wcmmode=disabled"),e},recallUtils.getOrigin=function(){return window.location.protocol+"//"+window.location.host},recallUtils.displayError=function(e,t,a){(a=""===a?document.querySelector(".profile-update-code .textfield-gcamp-verification-code small.error-oncall")?document.querySelector(".profile-update-code .textfield-gcamp-verification-code small.error-oncall"):"":a).innerHTML=t?e:""},recallUtils.toggleLoader=function(e){e?(recallUtils.pageContent.classList.add("hide"),recallUtils.dataLoader.classList.remove("hide")):(recallUtils.pageContent.classList.remove("hide"),recallUtils.dataLoader.classList.add("hide")),$("html, body").animate({scrollTop:$("[data-loader]").offset().top-$(".navigation.row.fixed").height()-140},0)},recallUtils.clearVariables=function(){sessionStorage.removeItem("secretKey"),sessionStorage.removeItem("vehicle-model"),sessionStorage.removeItem("vehicle-pra"),sessionStorage.removeItem("vehicle-status"),sessionStorage.removeItem("vehicle-year"),sessionStorage.removeItem("vin"),sessionStorage.removeItem("showForm")},recallUtils.showErrorPage=function(){recallUtils.toggleLoader(!1);var e=document.querySelector(".recall-response-error");e&&e.classList.remove("hide")}}Array.prototype.map||(Array.prototype.map=function(e){var t,a=ES.ToObject(this),i=a,n=ES.ToUint32(i.length),o=new Array(n);1<arguments.length&&(t=arguments[1]);for(var r=0;r<n;r++)r in i&&(o[r]=void 0===t?e(i[r],r,a):e.call(t,i[r],r,a));return o}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){var a;if(null==this)throw new TypeError('"this" is null or not defined');var i=Object(this),n=i.length>>>0;if(0!=n){t=+t||0;if(!(n<=(t=Math.abs(t)===1/0?0:t)))for(a=Math.max(0<=t?t:n-Math.abs(t),0);a<n;){if(a in i&&i[a]===e)return a;a++}}return-1}),Array.prototype.filter||(Array.prototype.filter=function(e){if(null==this)throw new TypeError;var t=Object(this),a=t.length>>>0;if("function"!=typeof e)throw new TypeError;for(var i,n=[],o=2<=arguments.length?arguments[1]:void 0,r=0;r<a;r++)r in t&&(i=t[r],e.call(o,i,r,t))&&n.push(i);return n}),((e,r)=>{function l(){var e=v.elements;return"string"==typeof e?e.split(" "):e}function s(e){var t=m[e[o]];return t||(t={},p++,e[o]=p,m[p]=t),t}function c(e,t,a){return t=t||r,u?t.createElement(e):(t=(a=a||s(t)).cache[e]?a.cache[e].cloneNode():n.test(e)?(a.cache[e]=a.createElem(e)).cloneNode():a.createElem(e)).canHaveChildren&&!i.test(e)?a.frag.appendChild(t):t}function t(e){var t,a,i,n,o=s(e=e||r);return!v.shivCSS||d||o.hasCSS||(t=(a=e).createElement("p"),a=a.getElementsByTagName("head")[0]||a.documentElement,t.innerHTML="x<style>article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}</style>",t=a.insertBefore(t.lastChild,a.firstChild),o.hasCSS=!!t),u||(i=e,(n=o).cache||(n.cache={},n.createElem=i.createElement,n.createFrag=i.createDocumentFragment,n.frag=n.createFrag()),i.createElement=function(e){return v.shivMethods?c(e,i,n):n.createElem(e)},i.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+l().join().replace(/[\w\-]+/g,function(e){return n.createElem(e),n.frag.createElement(e),'c("'+e+'")'})+");return n}")(v,n.frag)),e}var d,u,a=e.html5||{},i=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,n=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,o="_html5shiv",p=0,m={};try{var h,f,g=r.createElement("a");g.innerHTML="<xyz></xyz>",d="hidden"in g,(f=1==g.childNodes.length)||(r.createElement("a"),f=void 0===(h=r.createDocumentFragment()).cloneNode||void 0===h.createDocumentFragment||void 0===h.createElement),u=f}catch(e){u=d=!0}var v={elements:a.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video",version:"3.7.0",shivCSS:!1!==a.shivCSS,supportsUnknownElements:u,shivMethods:!1!==a.shivMethods,type:"default",shivDocument:t,createElement:c,createDocumentFragment:function(e,t){if(e=e||r,u)return e.createDocumentFragment();for(var a=(t=t||s(e)).frag.cloneNode(),i=0,n=l(),o=n.length;i<o;i++)a.createElement(n[i]);return a}};e.html5=v,t(r)})(this,document),((i,a)=>{function e(e){var t=a[e];a[e]=function(e){return o(t(e))}}function n(e,t,a){return(a=this).attachEvent("on"+e,function(e){(e=e||i.event).preventDefault=e.preventDefault||function(){e.returnValue=!1},e.stopPropagation=e.stopPropagation||function(){e.cancelBubble=!0},t.call(a,e)})}function o(e,t){if(t=e.length)for(;t--;)e[t].addEventListener=n;else e.addEventListener=n;return e}i.addEventListener||(o([a,i]),"Element"in i?i.Element.prototype.addEventListener=n:(a.attachEvent("onreadystatechange",function(){o(a.all)}),e("getElementsByTagName"),e("getElementById"),e("createElement"),o(a.all)))})(window,document),(()=>{if(!document.createEvent){var t,l,s,c,n=!0,a=!1,o="onreadystatechange",r="DOMContentLoaded",d="__IE8__"+Math.random(),u=Object.defineProperty||function(e,t,a){e[t]=a.value},e=Object.defineProperties||function(e,t){for(var a in t)if(m.call(t,a))try{u(e,a,t[a])}catch(e){window.console}},p=Object.getOwnPropertyDescriptor,m=Object.prototype.hasOwnProperty,h=window.Element.prototype,i=window.Text.prototype,f=/^[a-z]+$/,g=/loaded|complete/,v={},y=document.createElement("div"),b=document.documentElement,w=b.removeAttribute,C=b.setAttribute,i=(P(window.HTMLCommentElement.prototype,h,"nodeValue"),P(window.HTMLScriptElement.prototype,null,"text"),P(i,null,"nodeValue"),P(window.HTMLTitleElement.prototype,null,"text"),u(window.HTMLStyleElement.prototype,"textContent",(t=p(window.CSSStyleSheet.prototype,"cssText"),D(function(){return t.get.call(this.styleSheet)},function(e){t.set.call(this.styleSheet,e)}))),e(h,{textContent:{get:N,set:L},firstElementChild:{get:function(){for(var e=this.childNodes||[],t=0,a=e.length;t<a;t++)if(1==e[t].nodeType)return e[t]}},lastElementChild:{get:function(){for(var e=this.childNodes||[],t=e.length;t--;)if(1==e[t].nodeType)return e[t]}},oninput:{get:function(){return this._oninput||null},set:function(e){this._oninput&&(this.removeEventListener("input",this._oninput),this._oninput=e)&&this.addEventListener("input",e)}},previousElementSibling:{get:function(){for(var e=this.previousSibling;e&&1!=e.nodeType;)e=e.previousSibling;return e}},nextElementSibling:{get:function(){for(var e=this.nextSibling;e&&1!=e.nodeType;)e=e.nextSibling;return e}},childElementCount:{get:function(){for(var e=0,t=this.childNodes||[],a=t.length;a--;e+=1==t[a].nodeType);return e}},addEventListener:{value:function(e,t,a){if("function"==typeof t||"object"==typeof t){var i,n,o=this,r="on"+e,l=o[d]||u(o,d,{value:{}})[d],l=l[r]||(l[r]={}),s=l.h||(l.h=[]);if(!m.call(l,"w")){if(l.w=function(e){return e[d]||x(o,M(0,e),s,!1)},!m.call(v,r))if(f.test(e)){try{(i=document.createEventObject())[d]=!0,9!=o.nodeType&&(null==o.parentNode&&y.appendChild(o),n=o.getAttribute(r))&&w.call(o,r),o.fireEvent(r,i),v[r]=!0}catch(e){for(v[r]=!1;y.hasChildNodes();)y.removeChild(y.firstChild)}null!=n&&C.call(o,r,n)}else v[r]=!1;(l.n=v[r])&&o.attachEvent(r,l.w)}T(s,t)<0&&s[a?"unshift":"push"](t),"input"===e&&o.attachEvent("onkeyup",A)}}},dispatchEvent:{value:function(e){var t="on"+e.type,a=this[d],a=a&&a[t],i=!!a;return e.target||(e.target=this),i?a.n?this.fireEvent(t,e):x(this,e,a.h,!0):(i=this.parentNode)&&i.dispatchEvent(e),!e.defaultPrevented}},removeEventListener:{value:function(e,t,a){var i;"function"!=typeof t&&"object"!=typeof t||-1<(i=(e=(i=(i=this[d])&&i["on"+e])&&i.h)?T(e,t):-1)&&e.splice(i,1)}}}),e(i,{addEventListener:{value:h.addEventListener},dispatchEvent:{value:h.dispatchEvent},removeEventListener:{value:h.removeEventListener}}),e(window.XMLHttpRequest.prototype,{addEventListener:{value:function(t,e,a){var i=this,n="on"+t,o=i[d]||u(i,d,{value:{}})[d],o=o[n]||(o[n]={}),o=o.h||(o.h=[]);T(o,e)<0&&(i[n]||(i[n]=function(){var e=document.createEvent("Event");e.initEvent(t,!0,!0),i.dispatchEvent(e)}),o[a?"unshift":"push"](e))}},dispatchEvent:{value:function(e){var t="on"+e.type,a=this[d],a=a&&a[t];return!!a&&(a.n?this.fireEvent(t,e):x(this,e,a.h,!0))}},removeEventListener:{value:h.removeEventListener}}),e(window.Event.prototype,{bubbles:{value:!0,writable:!0},cancelable:{value:!0,writable:!0},preventDefault:{value:function(){this.cancelable&&(this.defaultPrevented=!0,this.returnValue=!1)}},stopPropagation:{value:function(){this.stoppedPropagation=!0,this.cancelBubble=!0}},stopImmediatePropagation:{value:function(){this.stoppedImmediatePropagation=!0,this.stopPropagation()}},initEvent:{value:function(e,t,a){this.type=e,this.bubbles=!!t,this.cancelable=!!a,this.bubbles||this.stopPropagation()}},pageX:{get:$("X")},pageY:{get:$("Y")}}),e(window.HTMLDocument.prototype,{defaultView:{get:function(){return this.parentWindow}},textContent:{get:function(){return 11===this.nodeType?N.call(this):null},set:function(e){11===this.nodeType&&L.call(this,e)}},addEventListener:{value:function(e,t,a){var i=this;h.addEventListener.call(i,e,t,a),n&&e===r&&!g.test(i.readyState)&&(n=!1,i.attachEvent(o,I),window==top)&&function t(e){try{i.documentElement.doScroll("left"),I()}catch(e){setTimeout(t,50)}}()}},dispatchEvent:{value:h.dispatchEvent},removeEventListener:{value:h.removeEventListener},createEvent:{value:function(e){if("Event"!==e)throw new Error("unsupported "+e);return(e=document.createEventObject()).timeStamp=(new Date).getTime(),e}}}),e(window.Window.prototype,{getComputedStyle:{value:(l=/^(?:[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|))(?!px)[a-z%]+$/,s=/^(top|right|bottom|left)$/,c=/\-([a-z])/g,O.prototype.getPropertyValue=function(e){var t,a,i=this._,n=i.style,o=i.currentStyle,i=i.runtimeStyle,r=(o||n)[e=("float"===e?"style-float":e).replace(c,F)];return l.test(r)&&!s.test(e)&&(t=n.left,(a=i&&i.left)&&(i.left=o.left),n.left="fontSize"===e?"1em":r,r=n.pixelLeft+"px",n.left=t,a)&&(i.left=a),null==r?r:r+""||"auto"},E.prototype.getPropertyValue=function(){return null},function(e,t){return t?new E:new O(e)})},addEventListener:{value:function(e,t,a){var i,n=window,e="on"+e;n[e]||(n[e]=function(e){return x(n,M(0,e),i,!1)}),T(i=n[e][d]||(n[e][d]=[]),t)<0&&i[a?"unshift":"push"](t)}},dispatchEvent:{value:function(e){var t=window["on"+e.type];return!t||!1!==t.call(window,e)&&!e.defaultPrevented}},removeEventListener:{value:function(e,t,a){e=(window["on"+e]||Object)[d],t=e?T(e,t):-1;-1<t&&e.splice(t,1)}}}),document.styleSheets),k=["header","nav","section","article","aside","footer"],S=void 0;for(S=0;S<k.length;S++)document.createElement(k[S]);i.length||document.createStyleSheet(""),i[0].addRule(k.join(","),"display:block;")}function x(e,t,a,i){for(var n,o=a.slice(),r=((a=t).currentTarget=e,a.eventPhase=a.target===a.currentTarget?2:3,a),l=0,s=o.length;l<s&&("object"==typeof(n=o[l])?"function"==typeof n.handleEvent&&n.handleEvent(r):n.call(e,r),!r.stoppedImmediatePropagation);l++);return i&&!r.stoppedPropagation&&e.parentNode?e.parentNode.dispatchEvent(r):!r.defaultPrevented}function D(e,t){return{configurable:!0,get:e,set:t}}function P(e,t,a){var i=p(t||e,a);u(e,"textContent",D(function(){return i.get.call(this)},function(e){i.set.call(this,e)}))}function T(e,t){for(var a=e.length;a--&&e[a]!==t;);return a}function N(){if("BR"===this.tagName)return"\n";for(var e=this.firstChild,t=[];e;)8!==e.nodeType&&7!==e.nodeType&&t.push(e.textContent),e=e.nextSibling;return t.join("")}function A(e){var t=document.createEvent("Event");t.initEvent("input",!0,!0),(e.srcElement||e.fromElement||document).dispatchEvent(t)}function I(e){!a&&g.test(document.readyState)&&(a=!a,document.detachEvent(o,I),(e=document.createEvent("Event")).initEvent(r,!0,!0),document.dispatchEvent(e))}function $(e){var t="X"===e?"Left":"Top",a="client"+e,i="client"+t,n="scroll"+t,o="_@"+a;return function(){return this[o]||(this[o]=this[a]+(b[n]||document.body&&document.body[n]||0)-b[i])}}function L(e){for(var t;t=this.lastChild;)this.removeChild(t);null!=e&&this.appendChild(document.createTextNode(e))}function M(e,t){return(t=t||window.event).target||(t.target=t.srcElement||t.fromElement||document),t.timeStamp||(t.timeStamp=(new Date).getTime()),t}function F(e,t){return t.toUpperCase()}function O(e){this._=e}function E(){}})(),((i,a)=>{function e(e){var t=a[e];a[e]=function(e){return o(t(e))}}function n(e,t,a){return(a=this).attachEvent("on"+e,function(e){(e=e||i.event).preventDefault=e.preventDefault||function(){e.returnValue=!1},e.stopPropagation=e.stopPropagation||function(){e.cancelBubble=!0},t.call(a,e)})}function o(e,t){if(t=e.length)for(;t--;)e[t].addEventListener=n;else e.addEventListener=n;return e}i.addEventListener||(o([a,i]),"Element"in i?i.Element.prototype.addEventListener=n:(a.attachEvent("onreadystatechange",function(){o(a.all)}),e("getElementsByTagName"),e("getElementById"),e("createElement"),o(a.all)))})(window,document),(o=>{for(var r=0,e=["ms","moz","webkit","o"],t=0;t<e.length&&!o.requestAnimationFrame;++t)o.requestAnimationFrame=o[e[t]+"RequestAnimationFrame"],o.cancelAnimationFrame=o[e[t]+"CancelAnimationFrame"]||o[e[t]+"CancelRequestAnimationFrame"];o.requestAnimationFrame||(o.requestAnimationFrame=function(e,t){var a=(new Date).getTime(),i=Math.max(0,16-(a-r)),n=o.setTimeout(function(){e(a+i)},i);return r=a+i,n}),o.cancelAnimationFrame||(o.cancelAnimationFrame=function(e){clearTimeout(e)})})(window),define("login/ownerinfo/login.controller.ownerinfo",["jquery","isAuthor","login/ownerinfo/login.ownerinfo.app"],function(e,t,a,i){return function(e,t){t.ownerInfo=ownerInfo}}),define("login/ownerinfo/login.ownerinfo.app",["angular","login/ownerinfo/login.controller.ownerinfo"],function(e,t){e=e.module("ownerInfoModule",[]);return e.controller("OwnerInfoCtrl",["$scope",t]),e}),define("logout/component.logout",["jquery","utils/mediaTracking","isAuthor"],function(i,e,t){var a={};return a.isAuthorMode=t.getAuthorStatus(),a.isPublishMode=!a.isAuthorMode,a.init=function(){a.isPublishMode&&(void 0===i(".myProfileLogOut").attr("data-on-load")?i(".link-logout-overlay").on("click",function(){i(".myProfileLogOut").show()}):i(".myProfileLogOut").show(),i(".logout-confirm").on("click",function(){var e,t=i("#serviceLayerUrl").val()+"/fordowner/vehicle/users/logout";try{a=CQ_Analytics.OwnerInfoStoreMgr.getData().userName,e=i.cookie("OWNER_SESSION")}catch(e){}var a={userName:a,sessionToken:e};"true"==i("#isLightHouse").val()&&(a.isLightHouse=!0,a.make=i("#make").val(),a.countryCodeIso2=i("#countryCodeIso2").val(),a.countryCodeISO=i("#countryCodeISO").val()),i.ajax({type:"POST",url:t,dataType:returnJsonTypeBaseonBrowser(),data:a,success:function(e){if(e.result){i.removeCookie("PD-S-SESSION-ID-P",{path:"/",domain:i("#sessionDomain").val()}),i.removeCookie("OWNER_SESSION",{path:"/"}),i.removeCookie("OWNER_USERNAME",{path:"/"}),"true"==i("#isLightHouse").val()&&require("cookie").eraseCookieWithPath("OWNER_PW","/");try{CQ_Analytics.OwnerInfoStoreMgr.clear()}catch(e){}e=i(".logout .profile-logout").attr("data-success")+".html",window.location.assign(e)}},error:function(e){}})}),i(".logout-cancel").on("click",function(){var e=i(".tabs-nav-item.is-active");i(".myProfileLogOut").hide(),e.removeClass("is-active"),e.trigger("click")}))},a}),define("zebraChartTile/component.zebraChartTile",["jquery","_","mediaQuery","pubsub","utils/mediaTracking","marketConfigGlobal"],function($,_,mediaQuery,pubsub,mediaTracking,marketConfigGlobal){var api={},stickyTableHeaders=function(e){e.each(function(){var e,t,a,i=$(this).find("#sticky-header .zebraChartTile-table"),n=$("#global-ux").outerWidth()/$(this).find("#sticky-header .zebraChartTile-table tr th").length,o=$(this).find("#sticky-header .zebraChartTile-table tr:first"),r=($(window),0),l=mediaQuery.getMediaType(),s=$(this).find(".table-holder").hasClass("sticky-column"),c=$(this).find(".table-holder").hasClass("sticky-header"),d=(s&&!c?(r=1,e="<thead>"+o.html()+"</thead>","mobile"===l&&(window.onload=function(){document.getElementById("sticky-header").style.width="100%"}),i.prepend(e),o.remove(),i.sticky({cellWidth:n-.5,columnCount:r}),$(this).find(".sticky-header.zebraChartTile-table").remove(),a=$(this),$(document.body).on("click",".tabs-nav-item",function(){initStickyHeadings(a,i,o)})):c&&!s?(e="<thead>"+o.html()+"</thead>",t=i.find("thead"),i.prepend(e),o.remove(),i.sticky({cellWidth:n-.5,columnCount:r}),initStickyHeadings($(this),i,t),a=$(this),$(document.body).on("click",".tabs-nav-item",function(){initStickyHeadings(a,i,t)})):c&&s?(r=1,e="<thead>"+o.html()+"</thead>",t=i.find("thead"),"mobile"===l&&(n=$(window).width()/2+1),$(this).find(".sticky-header.zebraChartTile-table").remove(),i.prepend(e),o.remove(),i.sticky({cellWidth:n-.5,columnCount:r}),initStickyHeadings($(this),i,t),a=$(this),$(document.body).on("click",".tabs-nav-item",function(){initStickyHeadings(a,i,t)})):c||s||"mobile"===l&&$(".zebraChartTile").css({width:"100%","overflow-x":"auto"}),0);i.find("tr").each(function(){var e=$(this).height();i.siblings(".sticky-column").find("tr:eq("+d+")").css("height",e+"px"),d++}),i.each(function(){($(this).closest("#sticky-header").hasClass("sticky-header")||$(this).closest("#sticky-header").hasClass("sticky-column"))&&$(this).css("width",parseFloat($("#sticky-header").width()-($(this).outerWidth(!0)-$(this).outerWidth(!1))))}),$(this).find("a.update-your-sync-link").each(function(e,t){$(this).on("click",function(){var e=$(this).parent().prev().text().toLowerCase().split("v");e=e[e.length-1],fordAnalytics.user.productAndSWversion=e,$("a.update-your-sync-link").removeClass("update-your-sync-active"),$(this).closest("tr").addClass("update-your-sync-active")})}),$(".zebraChartTile a.cta-button.download-brochure").each(function(){var e=$(this);null!=e.attr("_link_action")&&1<e.attr("_link_action").length&&"download-brochure"===e.attr("_link_action")&&e.attr("download","")}),$(".zebraChartTile a.download-brochure").each(function(){var e=$(this);null!=e.attr("_link_action")&&1<e.attr("_link_action").length&&"download-brochure"===e.attr("_link_action")&&e.attr("download","")})})};function loadDynamicDataFromSL($ele){$ele.find(".gux-variable").hide(),$ele.find(".gux-variable").parent().append('<img class="loading-icon" src="/etc/designs/guxfoap/clientlibs/guxfoap/img/load.gif" style="width:30px;"/>');var serviceUrl=$("#serviceLayerUrl").val(),postData={userName:"",vincode:"",sessionToken:""},userName,sessionToken,requestData;function callAfterVincode(){null!=postData.vincode&&(postData.vincode=postData.vincode.toUpperCase().replace(/\s/g,""));var mainTable=$ele.find("#sticky-header .zebraChartTile-table"),urlVehicle=serviceUrl+"/fordowner/vehicle/users/vehicle",urlWarranty=serviceUrl+"/fordowner/vehicle/users/vehicle/warranty",urlManual=serviceUrl+"/fordowner/vehicle/users/vehiclemanual",urlRecall=serviceUrl+"/fordowner/vehicle/users/vehiclerecall",urlHistory=serviceUrl+"/fordowner/vehicle/users/profile/history",urlProfile=serviceUrl+"/fordowner/vehicle/users/getProfileInfor",isFinishedAjax1=!1,isFinishedAjax2=!1,isFinishedAjax3=!1,isFinishedAjax4=!1,isFinishedAjax5=!1,isFinishedAjax6=!1,manualData=($.ajax({type:"POST",url:urlVehicle,dataType:returnJsonTypeBaseonBrowser(),data:postData,async:!0,success:function(e){var n=$ele.find("#sticky-header .zebraChartTile-table");200!=e.returnCode&&201!=e.returnCode||null==e.user?errorReturn(e):$.each(e.user,function(){var e=this.vehicle,t={"[@vin]":"-","[@syncStatusNewUpdateLabel]":"","[@syncStatus]":""},a=(null!=e[0].vincode&&(t["[@vin]"]=e[0].vincode),null!=e[0].syncFordTouchVersion&&(t["[@syncStatus]"]=e[0].syncFordTouchVersion),$ele.find("#sticky-header .zebraChartTile-table a.update-your-sync-link")),i=e[0].haveSyncPackage,e=e[0].needUpdate;1==i?0==e?(i=getOwnerManualLabels("SYNC_LATEST_VERSION"),e=getOwnerManualLabels("SYNC_ALREADY_LATEST_VERSION"),a.text(e),a.removeClass("link-overlay popup-link-initialized"),a.addClass("disabled"),a.click(function(e){return!1}),a.removeAttr("href"),t["[@syncStatusNewUpdateLabel]"]=i):(a.text(getOwnerManualLabels("SYNC_UPDATE_NEW_VERSION")),t["[@syncStatusNewUpdateLabel]"]=getOwnerManualLabels("SYNC_NEW_VERSION")):(e=getOwnerManualLabels("NO_SYNC_VERSION_LINK_TEXT"),a.text(e),a.removeClass("link-overlay popup-link-initialized"),a.addClass("disabled"),a.click(function(e){return!1}),a.removeAttr("href"),t["[@syncStatusNewUpdateLabel]"]=getOwnerManualLabels("NO_SYNC_VERSION_NOTE")),displayGuxVariable(t,$ele),n.html(replaceHtml(n.html(),t))})},error:function(e){errorReturn(e)},complete:function(){(isFinishedAjax1=!0)&&isFinishedAjax2&&isFinishedAjax3&&isFinishedAjax4&&isFinishedAjax5&&isFinishedAjax6&&afterFinishAjaxCall(mainTable,$ele,urlHistory,postData)}}),$.ajax({type:"POST",url:urlWarranty,dataType:returnJsonTypeBaseonBrowser(),data:postData,async:!0,success:function(e){200!=e.returnCode&&201!=e.returnCode||null==e.user?errorReturn(e):$.each(e.user,function(){var e=this.vehicle,t={"[@warranty]":"-","[@expDate]":"-","[@endOdometer]":"-"};null!=e[0].warranty&&(t["[@warranty]"]=e[0].warranty),null!=e[0].expDate&&(t["[@expDate]"]=e[0].expDate),null!=e[0].endOdoMeter&&(t["[@endOdometer]"]=e[0].endOdoMeter),displayGuxVariable(t,$ele),mainTable.html(replaceHtml(mainTable.html(),t))})},error:function(e){errorReturn(e)},complete:function(){isFinishedAjax2=!0,isFinishedAjax1&&isFinishedAjax2&&isFinishedAjax3&&isFinishedAjax4&&isFinishedAjax5&&isFinishedAjax6&&afterFinishAjaxCall(mainTable,$ele,urlHistory,postData)}}),{}),profilePostData=(manualData.vincode=postData.vincode,manualData.countryCodeISO=$("#countryCodeISO").val(),$.ajax({type:"POST",url:urlManual,dataType:returnJsonTypeBaseonBrowser(),data:postData,async:!0,success:function(e){200!=e.returnCode&&201!=e.returnCode||null==e.user?errorReturn(e):$.each(e.user,function(){$.each(this.vehicle,function(){var e=this.manual;if(e&&e[0]&&e[0].manuallink)for(var t=e[0].manuallink,a=0;a<t.length;a++){var i={"[@vehicleManuals]":(i=t[a])?i.title:getOwnerManualLabels("manual"+a),"[@vehicleManualPath]":i?i.link:"#"};mainTable.find("tr td span.gux-variable").each(function(){"[@vehicleManuals]"===$(this).text()&&$(this).closest("tr").find("a").attr("href","[@vehicleManualPath]")}),a+1<t.length&&mainTable.find("tr td span.gux-variable").each(function(){var e,t;"[@vehicleManuals]"===$(this).text()&&(t=(t=(e=$(this).closest("tr")).html()).substring(0,t.indexOf("<td>")+4)+t.substring(t.indexOf("</td>"),t.length),e.after("<tr>"+t+"</tr>"))}),displayGuxVariable(i,$ele),mainTable.html(replaceHtml(mainTable.html(),i))}})})},error:function(e){errorReturn(e)},complete:function(){isFinishedAjax3=!0,isFinishedAjax1&&isFinishedAjax2&&isFinishedAjax3&&isFinishedAjax4&&isFinishedAjax5&&isFinishedAjax6&&afterFinishAjaxCall(mainTable,$ele,urlHistory,postData)}}),$.ajax({type:"POST",url:urlRecall,dataType:returnJsonTypeBaseonBrowser(),data:postData,async:!0,success:function(e){200!=e.returnCode&&201!=e.returnCode||null==e.user?errorReturn(e):($.each(e.user,function(){$.each(this.recalls,function(){$.each(this,function(e,t){t={"[@vehicleRecalls]":t.title+"<br />"+t.desc};mainTable.find("tr td span.gux-variable").each(function(){var e,t;"[@vehicleRecalls]"===$(this).text()&&(t=(t=(e=$(this).closest("tr")).html()).substring(0,t.indexOf("<td>")+4)+t.substring(t.indexOf("</td>"),t.length),e.after("<tr>"+t+"</tr>"))}),displayGuxVariable(t,$ele),mainTable.html(replaceHtml(mainTable.html(),t))})})}),mainTable.find("tr td span.gux-variable").each(function(){"[@vehicleRecalls]"===$(this).text()&&$(this).closest("tr").remove()}))},error:function(e){errorReturn(e)},complete:function(){isFinishedAjax4=!0,isFinishedAjax1&&isFinishedAjax2&&isFinishedAjax3&&isFinishedAjax4&&isFinishedAjax5&&isFinishedAjax6&&afterFinishAjaxCall(mainTable,$ele,urlHistory,postData)}}),$.ajax({type:"POST",url:urlHistory,dataType:returnJsonTypeBaseonBrowser(),data:postData,success:function(a){200==a.returnCode||201==a.returnCode?null!=a.SyncDownloadHistory&&$.each(a.SyncDownloadHistory,function(e,t){t={"[@syncUpdateName]":t.updatename,"[@syncDate]":t.date};e<a.SyncDownloadHistory.length-1&&mainTable.find("tr td span.gux-variable").each(function(){var e,t=$(this);"[@syncUpdateName]"===t.text()&&(e=(t=t.parent().parent()).html(),t.after("<tr>"+e+"</tr>"))}),displayGuxVariable(t,$ele),mainTable.html(replaceHtml(mainTable.html(),t))}):errorReturn(a)},error:function(e){errorReturn(e)},complete:function(){isFinishedAjax5=!0,isFinishedAjax1&&isFinishedAjax2&&isFinishedAjax3&&isFinishedAjax4&&isFinishedAjax5&&isFinishedAjax6&&afterFinishAjaxCall(mainTable,$ele,urlHistory,postData)}}),{userName:postData.userName,vincode:postData.vincode,sessionToken:postData.sessionToken,country:$("#countryCodeISO").val()});$.ajax({type:"POST",url:urlProfile,dataType:returnJsonTypeBaseonBrowser(),data:profilePostData,async:!0,success:function(response){function getHealthStatus(e){return e?"G"===e[0]?{value:$ele.find(".ZebraChartTileConfiguration").attr("data-status-green"),color:"green"}:"Y"===e[0]?{value:$ele.find(".ZebraChartTileConfiguration").attr("data-status-yellow"),color:"yellow"}:"R"===e[0]?{value:$ele.find(".ZebraChartTileConfiguration").attr("data-status-red"),color:"red"}:void 0:{value:"",color:""}}function displayHealthStatus(e,t){e[t]===$ele.find(".ZebraChartTileConfiguration").attr("data-status-green")?mainTable.find(".gux-variable span").each(function(){$(this).text()===t&&($(this).css("color","green"),$(this).closest("td").next("td").find("a.service-soon").remove(),$(this).closest("td").next("td").find("a.service-immidiately").remove())}):e[t]===$ele.find(".ZebraChartTileConfiguration").attr("data-status-yellow")?mainTable.find(".gux-variable span").each(function(){$(this).text()===t&&($(this).css("color","#cc9900"),$(this).closest("td").next("td").find("a.service-immidiately").remove())}):e[t]===$ele.find(".ZebraChartTileConfiguration").attr("data-status-red")?mainTable.find(".gux-variable span").each(function(){$(this).text()===t&&($(this).css("color","red"),$(this).closest("td").next("td").find("a.service-soon").remove())}):mainTable.find(".gux-variable span").each(function(){$(this).text()===t&&($(this).closest("td").next("td").find("a.service-soon").remove(),$(this).closest("td").next("td").find("a.service-immidiately").remove())})}var warrantyInfo,healthStatus,unit,matches,$nextServiceContainer,$nextServiceDueDate,$odometerDetails,$serviceDisclaimer,currentMarketCode,dueDateText,odometerText,nextServiceDueDateText,fwStatusActive,fwStatusInactive,alertMessageOne,ewStatusActive,ewStatusInactive,alertMessageTwo,typeSSP,typeTMP,typeRSA,typeNA,contractTypeHtml,contractArr;200!=response.returnCode&&201!=response.returnCode||null==response.warrantyContractResponse?errorReturn(response):(warrantyInfo=response.warrantyContractResponse,healthStatus={brakes:getHealthStatus(warrantyInfo.brakes),tyres:getHealthStatus(warrantyInfo.tyres),batteries:getHealthStatus(warrantyInfo.batteries)},unit=" "+$ele.find(".ZebraChartTileConfiguration").attr("data-unit"),matches={"[@brakesStatus]":healthStatus.brakes.value||"-","[@tyresStatus]":healthStatus.tyres.value||"-","[@batteriesStatus]":healthStatus.batteries.value||"-","[@factoryWarranty]":warrantyInfo.fwstatus||"-","[@factoryExpDate]":warrantyInfo.fwendDate||"-","[@factoryEndOdometer]":warrantyInfo.fwendOdometer?warrantyInfo.fwendOdometer+unit:"-","[@extendedWarranty]":warrantyInfo.ewstatus||"-","[@extendedExpDate]":warrantyInfo.ewendDate||"-","[@extendedEndOdometer]":warrantyInfo.ewendOdometer?warrantyInfo.ewendOdometer+unit:"-"},$("div#tabs-0").css("background","#fff"),$("div#tabs-1").css("background","#fff"),$nextServiceContainer=$ele.siblings(".billboardOwner"),$nextServiceDueDate=$nextServiceContainer.find(".next-service-due-date"),$odometerDetails=$nextServiceContainer.find(".odometer-detail"),$serviceDisclaimer=$nextServiceContainer.find(".serviceDisclaimer"),currentMarketCode=marketConfigGlobal.getCurrentMarketCode(),"au"===currentMarketCode||"in"===currentMarketCode?(dueDateText=$nextServiceDueDate.html(),null!=dueDateText&&(warrantyInfo.nsdd?dueDateText=dueDateText.replace("[@nextServiceDueDate]",warrantyInfo.nsdd):(dueDateText.replace("[@nextServiceDueDate]","-"),$serviceDisclaimer.css("display","none")),$nextServiceDueDate.html(dueDateText)),odometerText=$odometerDetails.html(),(parseInt(warrantyInfo.odometer)?(odometerText=odometerText.replace("[@odometer]",parseInt(warrantyInfo.odometer).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")+"km"),$serviceDisclaimer):$odometerDetails).css("display","none"),$odometerDetails.html(odometerText)):(nextServiceDueDateText=$nextServiceDueDate.html(),null!=nextServiceDueDateText&&(nextServiceDueDateText=warrantyInfo.nsdd?nextServiceDueDateText.replace("[@nextServiceDueDate]",warrantyInfo.nsdd):nextServiceDueDateText.replace("[@nextServiceDueDate]","-"),$nextServiceDueDate.html(nextServiceDueDateText))),displayHealthStatus(matches,"[@brakesStatus]"),displayHealthStatus(matches,"[@tyresStatus]"),displayHealthStatus(matches,"[@batteriesStatus]"),fwStatusActive=$ele.find(".ZebraChartTileConfiguration").attr("data-fw-status-active"),fwStatusInactive=$ele.find(".ZebraChartTileConfiguration").attr("data-fw-status-inactive"),alertMessageOne=$ele.find(".ZebraChartTileConfiguration").attr("data-alert-message-one"),ewStatusActive=$ele.find(".ZebraChartTileConfiguration").attr("data-ew-status-active"),ewStatusInactive=$ele.find(".ZebraChartTileConfiguration").attr("data-ew-status-inactive"),alertMessageTwo=$ele.find(".ZebraChartTileConfiguration").attr("data-alert-message-two"),typeSSP=$ele.find(".ZebraChartTileConfiguration").attr("data-type-ssp"),typeTMP=$ele.find(".ZebraChartTileConfiguration").attr("data-type-tmp"),typeRSA=$ele.find(".ZebraChartTileConfiguration").attr("data-type-rsa"),typeNA=$ele.find(".ZebraChartTileConfiguration").attr("data-type-na"),titleType=$ele.find(".ZebraChartTileConfiguration").attr("data-title-type"),titleDate=$ele.find(".ZebraChartTileConfiguration").attr("data-title-date"),titleOdometer=$ele.find(".ZebraChartTileConfiguration").attr("data-title-odometer"),"Active"===warrantyInfo.fwstatus&&"Active"===warrantyInfo.ewstatus&&(matches["[@factoryWarranty]"]=fwStatusActive,matches["[@extendedWarranty]"]=ewStatusActive,mainTable.find("a.buy-extended-warranty").remove()),"Active"===warrantyInfo.fwstatus&&"Not Active"===warrantyInfo.ewstatus&&(matches["[@factoryWarranty]"]=fwStatusActive,matches["[@extendedWarranty]"]=ewStatusInactive,mainTable.find("a.buy-extended-warranty").remove(),mainTable.find(".gux-variable span").each(function(){"[@extendedExpDate]"!==$(this).text()&&"[@extendedEndOdometer]"!==$(this).text()||$(this).closest("tr").remove()})),"Soon"===warrantyInfo.fwstatus&&"Not Active"===warrantyInfo.ewstatus&&(matches["[@factoryWarranty]"]=fwStatusActive,matches["[@extendedWarranty]"]=ewStatusInactive,matches["[@factoryExpDate]"]+="<br/>"+alertMessageOne,mainTable.find(".gux-variable span").each(function(){"[@factoryExpDate]"===$(this).text()&&$(this).css("color","red")}),mainTable.find(".gux-variable span").each(function(){"[@extendedExpDate]"!==$(this).text()&&"[@extendedEndOdometer]"!==$(this).text()||$(this).closest("tr").remove()})),"Soon"===warrantyInfo.fwstatus&&"Active"===warrantyInfo.ewstatus&&(matches["[@factoryWarranty]"]=fwStatusActive,matches["[@extendedWarranty]"]=ewStatusActive,mainTable.find("a.buy-extended-warranty").remove(),matches["[@factoryWarranty]"]="Active",mainTable.find(".gux-variable span").each(function(){"[@factoryExpDate]"===$(this).text()&&$(this).css("color","red")})),"Expired"===warrantyInfo.fwstatus&&"Not Active"===warrantyInfo.ewstatus&&(matches["[@factoryWarranty]"]=fwStatusInactive,matches["[@extendedWarranty]"]=ewStatusInactive,mainTable.find("a.buy-extended-warranty").remove(),matches["[@factoryExpDate]"]+="<br/>"+alertMessageTwo,mainTable.find(".gux-variable span").each(function(){"[@factoryExpDate]"===$(this).text()&&$(this).css("color","red")}),mainTable.find(".gux-variable span").each(function(){"[@extendedExpDate]"!==$(this).text()&&"[@extendedEndOdometer]"!==$(this).text()||$(this).closest("tr").remove()})),"Expired"===warrantyInfo.fwstatus&&"Active"===warrantyInfo.ewstatus&&(matches["[@factoryWarranty]"]=fwStatusInactive,matches["[@extendedWarranty]"]=ewStatusActive,mainTable.find("a.buy-extended-warranty").remove(),matches["[@factoryExpDate]"]+="<br/>"+alertMessageTwo,mainTable.find(".gux-variable span").each(function(){"[@factoryExpDate]"===$(this).text()&&$(this).css("color","red")})),$(".contractBody").remove(),warrantyInfo.contract&&(0===warrantyInfo.contract.length?(contractTypeHtml='<tr class="contractBody"><td>'+titleType+'</td><td><span data-variable="contractType" class="gux-variable" tabindex="0"><span>'+typeNA+"</span></span></td><td>&nbsp;</td></tr>",$("#contractTitle").after(contractTypeHtml)):(contractArr=warrantyInfo.contract,contractArr.reverse(),contractArr.forEach(function(currContract){var contractTypeHtml='<tr class="contractBody"><td>'+titleType+'</td><td><span data-variable="contractType" class="gux-variable" tabindex="0"><span>'+eval("type"+currContract.type)+"</span></span></td><td>&nbsp;</td></tr>",contractDateHtml='<tr class="contractBody"><td>'+titleDate+'</td><td><span data-variable="contractExpDate" class="gux-variable" tabindex="0"><span>'+currContract.endDate+"</span></span></td><td>&nbsp;</td></tr>",contractOdometerHtml='<tr class="contractBody"><td>'+titleOdometer+'</td><td><span data-variable="contractExpOdometer" class="gux-variable" tabindex="0"><span>'+currContract.endOdometer+"</span></span></td><td>&nbsp;</td></tr>",contractBodyHtml=contractTypeHtml+contractDateHtml+contractOdometerHtml;$("#contractTitle").after(contractBodyHtml)}))),displayGuxVariable(matches,$ele),mainTable.html(replaceHtml(mainTable.html(),matches)))},error:function(e){errorReturn(e)},complete:function(){isFinishedAjax6=!0,isFinishedAjax1&&isFinishedAjax2&&isFinishedAjax3&&isFinishedAjax4&&isFinishedAjax5&&isFinishedAjax6&&afterFinishAjaxCall(mainTable,$ele,urlHistory,postData)}})}"undefined"!=typeof CQ_Analytics&&void 0!==CQ_Analytics.OwnerInfoStoreMgr.data&&void 0!==CQ_Analytics.OwnerInfoStoreMgr.data.length&&(postData.userName=CQ_Analytics.OwnerInfoStoreMgr.getData().userName),postData.sessionToken=$.cookie("OWNER_SESSION"),void 0!==$ele.closest(".tabs-content").find("input[type=hidden]").val()&&""!=$ele.closest(".tabs-content").find("input[type=hidden]").val()?(postData.vincode=$ele.closest(".tabs-content").find("input[type=hidden]").val(),callAfterVincode()):(userName=postData.userName,sessionToken=postData.sessionToken,requestData={userName:userName,sessionToken:sessionToken},"true"==$("#isLightHouse").val()&&(requestData.make=$("#make").val(),requestData.isLightHouse=!0,requestData.countryCodeIso2=$("#countryCodeIso2").val(),requestData.countryCodeISO=$("#countryCodeISO").val()),$.ajax({type:"POST",url:serviceUrl+"/fordowner/vehicle/users/profiles/accountinfo",dataType:returnJsonTypeBaseonBrowser(),data:requestData,async:!0,success:function(e){var t=e.returnCode;if(null!=t)switch(t){case 201:case 200:postData.vincode=e.vehicle[0].vincode}},error:function(e){errorReturn(e)},complete:function(){callAfterVincode()}}))}function afterFinishAjaxCall(e,t,a,i){e.find("tr td span.gux-variable").each(function(){"-"!==$(this).text()&&"[@vin]"!==$(this).text()&&"[@syncStatus]"!==$(this).text()&&"[@warranty]"!==$(this).text()&&"[@expDate]"!==$(this).text()&&"[@endOdometer]"!==$(this).text()&&"[@vehicleManuals]"!==$(this).text()&&"[@factoryWarranty]"!==$(this).text()&&"[@factoryExpDate]"!==$(this).text()&&"[@factoryEndOdometer]"!==$(this).text()&&"[@extendedWarranty]"!==$(this).text()&&"[@extendedExpDate]"!==$(this).text()&&"[@extendedEndOdometer]"!==$(this).text()&&"[@vehicleRecalls]"!==$(this).text()&&"[@brakesStatus]"!==$(this).text()&&"[@tyresStatus]"!==$(this).text()&&"[@batteriesStatus]"!==$(this).text()||$(this).closest("tr").find("a").remove()});var n={"[@vin]":"-","[@syncStatus]":"","[@warranty]":"-","[@expDate]":"-","[@endOdometer]":"-","[@vehicleManuals]":"-","[@vehicleRecalls]":getOwnerManualLabels("DEFAULT_VEHICLE_RECALLS"),"[@factoryWarranty]":"-","[@factoryExpDate]":"-","[@factoryEndOdometer]":"-","[@extendedWarranty]":"-","[@extendedExpDate]":"-","[@extendedEndOdometer]":"-","[@brakesStatus]":"-","[@tyresStatus]":"-","[@batteriesStatus]":"-"};displayGuxVariable(n,t),e.html(replaceHtml(e.html(),n)),stickyTableHeaders(t)}function ZebraTile(t,e){t.find("#sticky-header table").removeClass("zebraChartTile-table").addClass("zebraChartTile-table"),"dynamic-data"===variant?0!=t.find("#sticky-header .zebraChartTile-table").length&&loadDynamicDataFromSL(t):stickyTableHeaders(t);var a=null,i=(null!=(a=void 0!==t.closest(".tabs-content").find("input[type=hidden]").val()?t.closest(".tabs-content").find("input[type=hidden]").val():a)&&""!=a||"undefined"!=typeof CQ_Analytics&&void 0!==CQ_Analytics.OwnerInfoStoreMgr.data&&void 0!==CQ_Analytics.OwnerInfoStoreMgr.data.length&&(i=CQ_Analytics.OwnerInfoStoreMgr.getData(),$(".tabs-nav-list").find(".is-active").hasClass("first")?void 0!==i.vehicle&&i.vehicle[0].vincode&&(a=i.vehicle[0].vincode):void 0!==i.vehicle&&1<i.vehicle.length&&(a=i.vehicle[1].vincode)),null!=a&&(a=a.replace(/\s/g,"").toUpperCase()),{sessionToken:$.cookie("OWNER_SESSION"),vincode:a});$.ajax({type:"POST",url:$("#serviceLayerUrl").val()+"/fordowner/vehicle/users/profiles/dowloadSyncStatus",dataType:returnJsonTypeBaseonBrowser(),data:i,success:function(e){e.result&&null!=e.status&&"No New Updates"==e.status?(t.find(".update-new-version").hide(),t.find(".check-update-history").show()):t.find(".check-update-history").hide()},error:function(e){t.find(".check-update-history").hide()}})}var isMobile=$(window).width()<767,zebraTableNoBorder;return isMobile||(zebraTableNoBorder=$(".zebraChartTile-table.no-border"),zebraTableNoBorder.parent().css("border","0")),api.zebraTiles=[],api.init=function(e){e=new ZebraTile(e);api.zebraTiles.push(e)},api;function initStickyHeadings(a,i,n){isStickyColumn=$(this).find(".table-holder").hasClass("sticky-column"),mediaType=mediaQuery.getMediaType(),a.find(".sticky-header.zebraChartTile-table").css("top",$(".secondaryNavigation.section").length?$(".secondaryNavigation.section").height()-1:0);var e=a.find(".table-non-sticky.zebraChartTile-table").outerWidth(!0)-a.find(".table-non-sticky.zebraChartTile-table").outerWidth(!1),t=(a.find(".sticky-header.zebraChartTile-table").width(a.find(".sticky-header.zebraChartTile-table").width()),a.find(".sticky-column.zebraChartTile-table td[colspan]").attr("colspan",1),0);function o(){t=parseFloat(a.width()-e),a.find(".table-non-sticky.zebraChartTile-table").css({width:t+"px","max-width":t+"px","min-width":t+"px"}),a.find(".sticky-header.zebraChartTile-table").css({width:t+"px","max-width":t+"px","min-width":t+"px","z-index":"999"}),"mobile"===mediaType&&(t=parseFloat(a.width()+a.find(".table-non-sticky.zebraChartTile-table").outerWidth(!1)),$(".sticky-header.zebraChartTile-table").css({width:t+"px","max-width":"none","min-width":"0",overflow:"scroll"}),$(".table-non-sticky.zebraChartTile-table").css({width:t+"px","max-width":"none","min-width":"0",overflow:"scroll"}))}o(),$(window).load(function(){o()}),$(window).bind("resize orientationchange",function(){o()}),$(window).bind("scroll",function(){var e=i,t=n;e.innerHeight();e.offset().top+e.innerHeight()-(t.height()+130)<=$(this).scrollTop()&&(e=a.find(".sticky-header.zebraChartTile-table"),t=a.find(".sticky-corner.zebraChartTile-table"),e.last().hide(),t.last().hide())}),$.subscribe("mediaQuery:change",function(e){a.find(".sticky-header.zebraChartTile-table").css("top",$(".secondaryNavigation.section").length?$(".secondaryNavigation.section").height()-1:0)})}function displayGuxVariable(e,t){Object.keys(e).forEach(function(e){t.find(".gux-variable span").each(function(){$(this).text()==e&&($(this).closest(".gux-variable").show(),$(this).closest(".gux-variable").parent().find(".loading-icon").remove())})})}function replaceHtml(t,a){return Object.keys(a).forEach(function(e){t=t.replace(e,a[e])}),t}function errorReturn(e){e.returnCode&&e.msg}function getOwnerManualLabels(e){var t,a=$("#ownerManualLabels").attr("owner-manual-labels");if(void 0!==a&&""!=a)try{if(t=JSON.parse(a)){var i=t.manualLabels;if(i)for(var n=0;n<i.length;n++)if(i[n].key==e)return i[n].value}}catch(e){console.error("getOwnerManualLabels: JSON can't parse manualLabelsObj object from ownerManualLabelsString="+a)}return e}}),define("vehicleBox/component.vehicleBox",["jquery"],function(a){function e(){a("#vin-code").on("keyup blur",function(){var e,t;e=a("#vin-code").val(),t=new RegExp("^[A-HJ-NPR-Z\\d]{8}[\\dX][A-HJ-NPR-Z\\d]{2}\\d{6}$"),e.match(t)?(a("#vin-code").addClass("valid"),a("#vin-code").removeClass("invalid")):(a("#vin-code").removeClass("valid"),a("#vin-code").addClass("invalid"))})}return{init:function(){e()}}}),define("vehicleTitle/component.vehicleTitle",["jquery"],function(o){return{init:function(){var e,t;e=o.cookie("common.location.LOC"),t=o("#isDynamicPriceBasedLocation").val(),e&&"false"!==t&&o(".vehicleTile .desc p > span").addClass("loading-price"),o(document).on("pricesUpdated",function(e){var n;e.message?(n=e.localData,o(".vehicleTile .item-content").each(function(){var e,t,a=o(this),i=a.attr("data-nameplate-key"),i=n[i];i&&(e=i.maxPrice,t=i.startingPrice,e&&a.find('span[id="maxPrice'+i.id+'"]').html(e),t&&a.find('span[id="startingPrice'+i.id+'"]').html(t),o('span[id="priceRange'+i.id+'"]').length)&&e&&t&&a.find('span[id="priceRange'+i.id+'"]').html(t+"&nbsp;-&nbsp;"+e)})):e.setToNull&&(o('span[id*="maxPrice"]').html(""),o('span[id*="maxPrice"]').closest("p").css("display","none"),o('span[id*="startingPrice"]').html(""),o('span[id*="startingPrice"]').closest("p").css("display","none"),o('span[id*="priceRange"]').html(""),o('span[id*="priceRange"]').closest("p").css("display","none")),o(".vehicleTile .desc p > span").removeClass("loading-price"),o(".vehicleTile .desc p > span").attr("tabindex",-1)}),/MSIE \d|Trident.*rv:/.test(navigator.userAgent)&&(o(".hover-tile").on("keyup",function(e){e.preventDefault(),e.currentTarget.classList.add("tile-active")}),o(".hover-tile .action a:last-child").on("blur",function(e){e.preventDefault(),o(".hover-tile").removeClass("tile-active")})),o(document).ready(function(){"true"===o('input[name="validationZone"]').val()&&o(".vehicleTile .item-content").each(function(){var e=o(this),t=o(this).attr("data-nameplate-key"),a=o(this).find("input[name='zonePrice']").val(),e=e.find('span[id="startingPrice'+t+'"]');o(e).children().text(a)}),o('input[name="validationZone"]').on("change",function(e){console.log(o(this)),"true"===o('input[name="validationZone"]').val()&&o(".vehicleTile .item-content").each(function(){var e=o(this),t=o(this).attr("data-nameplate-key"),a=o(this).find("input[name='zonePrice']").val(),e=e.find('span[id="startingPrice'+t+'"]');o(e).children().text(a)})})})}}}),define("add-vehicle/component.addVehicle",["jquery","isAuthor","form/component.form.validation","utils/mediaTracking","analytics/analyticsEventLayer"],function(c,e,t,a,d){var i={};function u(e,t){e=e.find('input[type=text][name="vincode"]');e.hasClass("error")||e.parent().siblings("small.error").length||(e.removeClass("valid").addClass("error"),e.closest("label").append('<small class="error">'+getErrorMessageByCode(t)+"</small>"),e.parent().removeClass("valid").addClass("error"))}return i.init=function(){var e,t;c("body").append(c('<div id="modal-message-wrap"><div class="message-inner"><div class="large-8 medium-8 small-12 medium-centered large-centered columns clearleft"><p class="text-msg"></p><button class="cta-button">OK</button></div></div></div>')),c(".addvehicle-form-wrap").unbind().on("submit",function(e){e.preventDefault();var t=c(e=this).find('input[name="vehicleName"]'),a=c(e).find('input[name="vincode"]'),i=t.val(),n=a.val();if(!t.hasClass("error")&&void 0!==i&&""!=i&&!a.hasClass("error")&&void 0!==n&&""!=n){void 0!==n&&""!=n&&(n=n.toUpperCase().replace(/\s/g,""));var t=c("#serviceLayerUrl").val(),a="",o=("undefined"==typeof CQ_Analytics||void 0===CQ_Analytics.OwnerInfoStoreMgr.data||void 0===CQ_Analytics.OwnerInfoStoreMgr.data.length||void 0!==(a=CQ_Analytics.OwnerInfoStoreMgr.getData().userName)&&null!=a&&""!=a||(a=require("cookie").getCookie("OWNER_USERNAME")),require("cookie").getCookie("OWNER_SESSION")),r=require("cookie").getCookie("OWNER_USERINFO"),l=c(e).find("form"),e=l.data("service")?l.data("service"):t+"fordowner/vehicle/users/profiles/vehicles";if((r=r&&JSON.parse(r))&&1==r.vehicle.length){t=r.vehicle[0].vincode;if(n==t)return void u(l,"ERROR_VEHICLE_EXAIT")}var s={userName:a,sessionToken:o,yourVehicle:i,vincode:n};c.ajax({type:"POST",url:e,crossDomain:!0,dataType:returnJsonTypeBaseonBrowser(),data:s,success:function(e){void 0===e.returnCode||200!=e.returnCode&&201!=e.returnCode?u(l,e.errorCode):(void 0!==(e=c(".addvehicle-form-wrap").find("input[name=addSuccessMessage]").val())&&""!=e&&(e=e,c("#modal-message-wrap p").text(e),c("#modal-message-wrap").fadeIn(500),c("body").addClass("no-scroll")),c("#modal-message-wrap").find("button").on("click",function(){c(".addNewTab").trigger("click")}),d.getOwnerMyProfileEvents().addVehicleSuccess(s.vin,s.yourVehicle))},error:function(e){window.location.href=c("#serverErrorUrl").val()}})}}),c(".addvehicle-form-wrap .form-textfield").each(function(){c(this).addClass("large-centered medium-centered medium-10 small-12 clearleft")}),c(".addvehicle-form-wrap .form-dropdown").each(function(){c(this).addClass("large-centered medium-centered medium-10 small-12 clearleft")}),t=c(".addvehicle-form-wrap select.cs-select"),e=c(".addvehicle-form-wrap span.cs-placeholder"),t.data("default")&&(t.prepend("<option value='' selected>"+t.data("default")+"</option>"),e.text(t.data("default"))),[].forEach.call(document.querySelectorAll("select.cs-select"),function(e){c(e).closest(".cs-select").length&&new SelectFx(e)}),e=c("#modal-message-wrap"),t=c("#modal-message-wrap button"),void 0!==e&&t.on("click.closeModal",function(){c(this).closest("#modal-message-wrap").fadeOut(500),c("body").removeClass("no-scroll")}),c(".addvehicle-form-wrap").show(),c(".addvehicle-form-wrap form").each(function(){var e=c(this),t=e.data("server-validate");if(null!=t)for(var a=0;a<t.rules.length;a++){var i=t.rules[a].field,n=t.rules[a].url;e.find("input[name="+i+"]").attr("data-server-validation",'{"field":"'+i+'","url":"'+n+'"}')}})},i}),define("contact-bar/component.contactBar",["jquery"],function(t){function e(e){t(".contact-bar-overlay").fadeTo(300,1),t(".contact-bar-overlay").css({visibility:"visible","z-index":"10000"}),t(e).fadeTo(300,1)}function a(e){27===e.keyCode&&i()}var i=function(){t(".contact-bar-popup, .contact-bar-overlay").fadeOut(300)};return{init:function(){!function(){t(".contactBar").attr("id","contact"),t("#btn-cb-call").on("click",e.bind(this,"#cb-popup-call")),t("#btn-cb-wechat").on("click",e.bind(this,"#cb-popup-wechat")),t(".btn-close-popup").on("click",i),t(".contact-bar-overlay").on("click",function(e){t(e.target).closest(".contact-bar-popup").length||i()}),t(window).on("keyup",a)}()}}}),define("edit-account-info/component.editAccountInfo",["jquery","_","isAuthor","form/component.form.validation","utils/mediaTracking","analytics/analyticsEventLayer"],function(d,e,t,i,a,s){var n={};function c(e,t,i,n,o,a){var r={},l=require("cookie"),s=getEmailKeyUrl("CHNGMAIL");r[t]=i,r.sessionToken=l.getCookie("OWNER_SESSION"),"email"==t&&(r.emailKey=s),"true"==d("#isLightHouse").val()&&(r.isLightHouse=!0,r.make=d("#make").val(),r.countryCodeIso2=d("#countryCodeIso2").val(),r.countryCodeISO=d("#countryCodeISO").val(),"password"==t)&&((s=l.getCookie("OWNER_PW"))&&(r.oldPassword=s),l.setCookieWithPath("OWNER_PW_TEMP",i,1,"/")),d.ajax({type:"POST",url:a+"/fordowner/vehicle/users/profiles/UpdateAccountinfo",dataType:returnJsonTypeBaseonBrowser(),data:r,success:function(e){var t,a;void 0===e.returnCode||201!=e.returnCode&&200!=e.returnCode?void 0!==e.returnCode&&505==e.returnCode?(u(),window.location.href=d("#sessionExpiredUrl").val()):void 0!==e.returnCode&&421==e.returnCode?(u(),d("input[name=password]").removeClass("valid").addClass("error"),d("input[name=password]").parent().after('<small class="error">'+getErrorMessageByCode(e.errorCode)+"</small>")):(u(),window.location.href=d(".editAccountInfo section").data("error")):(-1==(a=o.find("span:first")).attr("id").indexOf("password")&&(o instanceof jQuery&&o.find("option").length?(t=o.find("option[value="+i+"]").text(),a.text(t)):a.text(i)),o.removeClass("editmode"),"Password Modified"===e.message?(t=d(".myProfileChangePwd").attr("data-redirectpath"),a=window.location.pathname.split("home")[0],d(".myProfileChangePwd a").attr("href",a+"home.html#/overlay"+t+".html"),d(".myProfileChangePwd").show()):n.updateOwnerData(),"true"==d("#isLightHouse").val()&&((a=(e=require("cookie")).getCookie("OWNER_PW_TEMP"))&&e.setCookieWithPath("OWNER_PW",a,1,"/"),u()))},error:function(e){u(),window.location.href=d(".editAccountInfo section").data("error")}})}function o(a){var r=this,l=d("#serviceLayerUrl").val(),e=("undefined"!=typeof CQ_Analytics&&void 0!==CQ_Analytics.OwnerInfoStoreMgr.data&&void 0!==CQ_Analytics.OwnerInfoStoreMgr.data.length&&(t="",e=CQ_Analytics.OwnerInfoStoreMgr.getData(),void 0!==(r.ownerInfoGlobal=e))&&(t=e.userName,void 0!==e.state&&"undefined"!=e.state?r.updateValue(e,a):(e=require("cookie").getCookie("OWNER_SESSION"),void 0!==t&&""!=t||(t=require("cookie").getCookie("OWNER_USERNAME")),void 0!==e&&void 0!==t&&(t={userName:t,sessionToken:e},"true"==d("#isLightHouse").val()&&(t.make=d("#make").val(),t.isLightHouse=!0,t.countryCodeIso2=d("#countryCodeIso2").val(),t.countryCodeISO=d("#countryCodeISO").val()),d.ajax({type:"POST",url:l+"/fordowner/vehicle/users/profiles/accountinfo",dataType:returnJsonTypeBaseonBrowser(),data:t,success:function(e){var t=e.returnCode;if(null!=t)switch(t){case 201:case 200:r.updateValue(e,a),addClientContextData(e),r.ownerInfoGlobal=e}},error:function(e){}})))),i.init(a.find("form")),a.find("a.action-change:not(.confirmChange)")),t=a.find("a.action-change.confirmChange"),e=(e.on("click",function(e){e.preventDefault();e=d(this).parents("tr"),e.addClass("editmode"),e=e.find(".hidden-input:first");e.val();-1!=e.attr("name").indexOf("password")&&d(":password").val("")}),t.on("click",function(e){e.preventDefault();var t=d(this).parents("tr"),e=t.find(".hidden-input:first"),a=e.val(),i=e.attr("name"),e=(e.is("select")?e.trigger("change"):e.trigger("blur"),!e.hasClass("error")),n=-1!=i.indexOf("password")&&0===d(":password").val().length;if(s.getOwnerMyProfileEvents().ownerProfileUpdateSaveTrack(),"password"==i){var o=require("cookie");if(o&&o.getCookie("OWNER_PW")&&o.getCookie("OWNER_PW")==a)return void t.removeClass("editmode")}"email"==i&&null!=a&&""!=a&&e?null!=r.ownerInfoGlobal.email&&a==r.ownerInfoGlobal.email?t.removeClass("editmode"):d.ajax({type:"POST",url:l+"/fordowner/vehicle/users/sendActiviteEmail",dataType:returnJsonTypeBaseonBrowser(),data:{email:a},success:function(e){void 0===e.returnCode||201!=e.returnCode&&200!=e.returnCode?(d("input[name=email]").removeClass("valid").addClass("error"),d("input[name=email]").parent().after('<small class="error">'+getErrorMessageByCode(e.errorCode)+"</small>")):c(0,i,a,r,t,l)},error:function(e){window.location.href=d(".editAccountInfo section").data("error")}}):e&&!n&&c(0,i,a,r,t,l)}),d(".change-pwd-btn-txt").on("click",function(){window.location.reload(),d(".myProfileChangePwd").hide()}),a.find("a.action-change-account.save")),t=a.find("a.action-change-account.edit");a.find(".checkboxForm input[type=checkbox]").each(function(){"true"===d(this).attr("data-set-copylink")&&d(this).attr("data-always-disabled","true")}),t.on("click",function(){a.find(".checkboxForm input[type=checkbox]").attr("data-always-disabled","false")}),e.on("click",function(e){var t={};a.find(".checkboxForm input[type=checkbox]").each(function(){"true"===d(this).attr("data-set-copylink")&&d(this).attr("data-always-disabled","true"),t[d(this).attr("name")]=d(this).is(":checked")}),t.sessionToken=require("cookie").getCookie("OWNER_SESSION"),"true"==d("#isLightHouse").val()&&(t.isLightHouse=!0,t.make=d("#make").val(),t.countryCodeIso2=d("#countryCodeIso2").val(),t.countryCodeISO=d("#countryCodeISO").val()),d.ajax({type:"POST",url:l+"/fordowner/vehicle/users/profiles/UpdateAccountinfo",dataType:returnJsonTypeBaseonBrowser(),data:t,success:function(e){void 0===e.returnCode||201!=e.returnCode&&200!=e.returnCode?void 0!==e.returnCode&&505==e.returnCode?window.location.href=d("#sessionExpiredUrl").val():window.location.href=d(".editAccountInfo section").data("error"):r.updateOwnerData()},error:function(e){window.location.href=d(".editAccountInfo section").data("error")}})})}function u(){"true"==d("#isLightHouse").val()&&require("cookie").eraseCookieWithPath("OWNER_PW_TEMP","/")}return o.prototype.ownerInfoGlobal={},o.prototype.updateValue=function(e,t){for(var a=!0,i=!0,n=0;n<Object.keys(e).length;n++){var o,r,l,s,c=Object.keys(e)[n];"errorCode"!=c&&"returnCode"!=c&&"result"!=c&&"message"!=c&&(o=d("#"+c),r=e[c],-1!=c.indexOf("password")?(o.text("******"),o.parent().find(".hidden-input").val("default*1")):(l=o.parent(),void 0!==(s=0==(s=t.find(".checkboxForm input[name="+c+"]")).length?t.find(".checkboxForm input[name="+c.toUpperCase()+"]"):s)&&s.is("input[type=checkbox]")?(s.prop("checked",r),a=a&&r,1==r&&(i=!1)):l instanceof jQuery&&l.find("option").length?(r="string"==typeof r?r.replace(/[^a-zA-Z0-9]+/g,""):r)&&""!=r.trim()&&((s=l.find("option[value="+r+"]"))&&(o.text(s.text()),s.val(r),l.find("select[name="+c+"]").val(r)),l.find(".hidden-input").val(r)):(o.text(r),l.find(".hidden-input").val(r))))}t.find(".checkboxForm input[name=acknowledge]").prop("checked",a),t.find(".checkboxForm input[name=CONTACT_PERMISSION_CODE]").prop("checked",i),a||(d(".form-edit-account-container .form-fields-group").show(),d(".form-edit-account-container .form-fields-group").closest(".fieldsGroup").show())},o.prototype.updateOwnerData=function(){var a=this,e="",t=("undefined"!=typeof CQ_Analytics&&void 0!==CQ_Analytics.OwnerInfoStoreMgr.data&&void 0!==CQ_Analytics.OwnerInfoStoreMgr.data.length&&(e=CQ_Analytics.OwnerInfoStoreMgr.getData().userName),require("cookie").getCookie("OWNER_SESSION")),e={userName:e,sessionToken:t};"true"==d("#isLightHouse").val()&&(e.make=d("#make").val(),e.isLightHouse=!0,e.countryCodeIso2=d("#countryCodeIso2").val(),e.countryCodeISO=d("#countryCodeISO").val()),d.ajax({type:"POST",url:d("#serviceLayerUrl").val()+"/fordowner/vehicle/users/profiles/accountinfo",dataType:returnJsonTypeBaseonBrowser(),data:e,success:function(e){var t=e.returnCode;if(null!=t)switch(t){case 201:case 200:addClientContextData(e),a.ownerInfoGlobal=e}},error:function(e){}})},n.editAccountInfos=[],n.init=function(e){var t=new o(e);n.editAccountInfos.push(t),d(e).find(".bg-table").each(function(){d(this).find("tr:even").addClass("tr-even")})},n}),define("credit-online-apply/component.creditOnlineApply",["jquery"],function(p){var e={};return e.init=function(e){var t,a,i,n,o,r,l,s,c;u=(o=e).find(".vehicle-selection-wrap").first(),o.find(".vehicle-selection-inner").first(),o.find(".primary-application-info-outer").first(),o.find(".dealer-selection-wrap").first(),o=o.find(".overlay-for-select-vehicle").first(),u.hide(),o.hide(),u=(t=e).find(".item.change-vehicle:first"),a=t.find(".vehicle-selection-wrap").first(),i=t.find(".credit-online-apply-wrap").first(),n=t.find(".overlay-for-select-vehicle").first(),o=t.find(".vehicle-card-group").first(),r=t.find(".overlay-for-select-vehicle span.close").first(),e=t.find(".button.btn-submit").first(),l=t.find(".switch-btn").first(),s=t.find(".overlay-for-select-vehicle .cta-button.select-from-showroom").first(),c=t.find(".vehicle-selection-wrap .title a:first"),u.on("click",function(e){e.preventDefault(),n.show()}),s.on("click",function(e){i.hide(),n.hide(),a.show(),p("html, body").animate({scrollTop:0},1e3)}),r.on("click",function(e){i.show(),a.hide(),p("html, body").animate({scrollTop:p(".vehicle-selection").offset().top},1e3)}),c.on("click",function(e){i.show(),a.hide(),p("html, body").animate({scrollTop:p(".vehicle-selection").offset().top},1e3)}),e.on("click",function(e){e.preventDefault(),p.ajax({type:"POST",url:"url",contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){},error:function(e){},beforeSend:function(){t.find(".thankyou-cod-wrap").show()},done:function(){}})}),l.on("click",function(){var e=p(this).prev(".left-part"),t=p(this).next(".right-part");e.hasClass("show")?(t.addClass("open"),e.removeClass("show").addClass("hide-s")):(t.removeClass("open"),e.addClass("show").removeClass("hide-s"))}),o.on("click",".item",function(e){e.preventDefault(),r.click()}),t.find(".vehicle-selection .title h3, .primary-application-info-outner .title h3, .dealer-selection-wrap .title h3, .v-tick.mob").on("click",function(e){p(this).parents('div[for="creditSection"]').toggleClass("active")});var d=(u=t).find(".overlay-close.not-overlay"),u=u.find(".overlay-container.overlay-for-select-vehicle");d.on("click",function(e){d.parents(".overlay-container").hide()}),u.on("click",function(e){p(e.target).parents(".content-overlay").length||p(this).hide()})},e}),define("download-sync-history/component.downloadSyncHistory",["jquery","utils/mediaTracking"],function(i,e){var t={};function n(e){e.returnCode&&e.msg}return t.init=function(){i(".sync-history-back").on("click",function(){i(".update-your-sync-link").click()});var d=i(".sync-history-content table"),e=i("#serviceLayerUrl").val()+"/fordowner/vehicle/users/profile/history",t=CQ_Analytics.OwnerInfoStoreMgr.getData().vehicle[0],a="9BFZH55J4F8091918";t&&(a=t.vincode),t={userName:CQ_Analytics.OwnerInfoStoreMgr.getData().userName,vincode:a,sessionToken:i.cookie("OWNER_SESSION")},i.post(e,t,function(e){if(200==e.returnCode||201==e.returnCode){if(e.SyncDownloadHistory.length<1&&i(i(".sync-history-content table").find("tr")[1]).remove(),1<=e.SyncDownloadHistory.length){for(var c=[],t=(i(".sync-history-content tr:last-child td").each(function(e,t){c.push(i(t).html())}),i(".sync-history-content tr:last-child").html()),a=0;a<e.SyncDownloadHistory.length-1;a++)i(".sync-history-content tr:last-child").after("<tr>"+t+"</tr>");i.each(e.SyncDownloadHistory,function(e,t){for(var a={},i=0;i<c.length-1;i++)a[c[i]]=t[c[i].replace("[@","").replace("sync","").replace("]","").toLowerCase()];var n,o,r,l,s=t[c[i].replace("[@","").replace("sync","").replace("]","").toLowerCase()],s=isNaN(new Date(s).getTime())?s:(s=new Date(s),n=new Date(s.getTime()+60*s.getTimezoneOffset()*1e3),o=s.getTimezoneOffset()/60,s=s.getHours(),n.setHours(s-o),n.toLocaleString("en-GB"));a[c[i]]=s,d.html((r=d.html(),l=a,Object.keys(l).forEach(function(e){r=r.replace(e,l[e])}),r))})}d.addClass("zebraChartTile-table")}else n(e)},returnJsonTypeBaseonBrowser()).fail(function(e){n(response)})},t}),define("delete-vehicle/component.deleteVehicle",["jquery","utils/mediaTracking"],function(o,e){var t={};return t.init=function(){setTimeout(function(){var n=o(".delete-vehicle");o(".delete-vehicle").attr("data-on-load")?o(".delete-vehicle").show():o(document).on("click",".link-delete-vehicle-overlay",function(e){e.preventDefault(),o(".delete-vehicle").show(),n=o(this)}),o(document).on("click",".delete-vehicle-confirm",function(e){e.preventDefault();var t,e=o("#serviceLayerUrl").val()+"/fordowner/vehicle/users/profiles/vehicles/Delete",a=(a=n).closest(".tabs-content").find("input[name=vincode]").val(),i=("undefined"!=typeof CQ_Analytics&&void 0!==CQ_Analytics.OwnerInfoStoreMgr.data&&void 0!==CQ_Analytics.OwnerInfoStoreMgr.data.length&&(i=CQ_Analytics.OwnerInfoStoreMgr.getData().userName),t=o.cookie("OWNER_SESSION"),{userName:i,sessionToken:t,vincode:a});o.ajax({type:"POST",url:e,dataType:returnJsonTypeBaseonBrowser(),data:i,success:function(e){void 0===e.returnCode||200!=e.returnCode&&201!=e.returnCode?window.location.href=o("#serverErrorUrl").val():o(".deleteTab").trigger("click")},error:function(e){window.location.href=o("#serverErrorUrl").val()}})}),o(document).on("click",".delete-vehicle-cancel",function(e){e.preventDefault(),o(".delete-vehicle").hide()})},4e3)},t}),define("accessories-tile/component.accessoriesTile",["jquery","jquery-flexslider","configurationProvider","mediaQuery","utils/mediaTracking"],function(u,e,d,p,t){var a={},m=!1;function h(e){var e=u(e),o=e.find(".carousel"),t=!1,a=0,i={controlsContainer:o.find("> .carousel-controls"),selector:".media-carousel-container > .carousel-slide",animation:"slide",directionNav:!1,pauseOnHover:!0,slideshow:!1,start:function(e){m||(o.find(".carousel-arrows").appendTo(o.find(".flex-viewport")),m=!0);e.resize(),e.find(".carousel-previous").addClass("inactive")},end:function(e){a++},before:function(e){e.find(".carousel-btn").removeClass("inactive"),0===e.animatingTo&&e.find(".carousel-previous").addClass("inactive");e.animatingTo==e.count-1&&e.find(".carousel-next").addClass("inactive")},after:function(e){!t&&0===e.currentSlide&&1<=a&&(e.vars.slideshow=!1,e.flexslider("stop"))},minItems:1,maxItems:5};function n(){t=!0,o.flexslider("stop")}function r(){o.find(".carousel-arrows").hide()}o.find(".image-caption a").each(function(e,t){u(t).attr("tabIndex","-1")}),dataConfig=d.get(e);var l=e.find("article.carousel-slide").length,s=(l<4&&(i.maxItems=l),l<=3&&r(),"mobile"===p.getMediaType()),c=parseFloat(null==dataConfig.itemsToSplit?2.2:dataConfig.itemsToSplit);(c=isNaN(c)||0==c?2.2:c)<=l&&!s&&(s=e.width(),i.itemWidth=s/c,i.maxItems=Math.ceil(c)),o.flexslider(u.extend(i,dataConfig)),o.find(".carousel-previous").on(touchOrClick,function(e){u(e.target).closest(".carousel").flexslider("prev"),n()}),o.find(".carousel-next").on(touchOrClick,function(e){u(e.target).closest(".carousel").flexslider("next"),n()}),o.on("click",function(){n()}),o.on("keydown",function(e){var t=e.keyCode||e.which,a=o.data("flexslider");function i(){a.currentSlide===a.slides.length-1&&!0!==dataConfig.keyEventLoop||(o.flexslider("next"),e.preventDefault())}function n(){0===a.currentSlide&&!0!==dataConfig.keyEventLoop||(o.flexslider("prev"),e.preventDefault())}9===t&&(o.flexslider("stop"),(e.shiftKey?n:i)()),39===t&&(o.flexslider("stop"),(e.shiftKey?n:i)()),37===t&&(o.flexslider("stop"),(e.shiftKey?i:n)())}),u(window).on("resize",function(){var e;l<=3&&(e=o.find(".carousel-slide").width(),1.01*o.find(".flex-viewport").width()<=e*l?o.find(".carousel-arrows").show():r())})}function i(t){var a,i,e=u("#serviceLayerUrl").val(),n="-",o={userName:"",vincode:"",sessionToken:""},r={derivativeKey:"",colorCode:""},l=(o.sessionToken=u.cookie("OWNER_SESSION"),t.closest(".tabs-content")),s=l.find("input[name=vincode]").val(),c=l.find("input[name=modelKey]").val(),d=l.find("input[name=color]").val(),l=l.find("input[name=vehicleName]").val(),d=("undefined"!=typeof CQ_Analytics&&void 0!==CQ_Analytics.OwnerInfoStoreMgr.data&&void 0!==CQ_Analytics.OwnerInfoStoreMgr.data.length&&void 0!==CQ_Analytics.OwnerInfoStoreMgr.getData().vehicle&&0<CQ_Analytics.OwnerInfoStoreMgr.getData().vehicle.length&&void 0!==CQ_Analytics.OwnerInfoStoreMgr.getData().vehicle[0].modelKey?(o.userName=CQ_Analytics.OwnerInfoStoreMgr.getData().userName,"undefined"!=s&&null!=s&&""!=s&&(o.vincode=s),"undefined"!=c&&null!=c&&""!=c&&(r.derivativeKey=c),"undefined"!=d&&null!=d&&""!=d&&(r.colorCode=d),"undefined"!=l&&null!=l&&""!=l&&(n=l)):(c={userName:require("cookie").getCookie("OWNER_USERNAME"),vincode:s,sessionToken:o.sessionToken},u.ajax({type:"POST",url:e+"/fordowner/vehicle/users/vehicle",dataType:returnJsonTypeBaseonBrowser(),data:c,async:!1,success:function(e){switch(e.returnCode){case 201:case 200:null!=e.user&&u.each(e.user,function(){var e=this.vehicle;o.vincode=e[0].vincode,null!=e[0].derivativeKey?r.derivativeKey=e[0].derivativeKey:r.derivativeKey=e[0].modelKey,r.colorCode=e[0].color,n=e[0].yourVehicle});break;default:f(e)}},error:function(e){f(e)}})),window.location.pathname),l=(-1!=d.indexOf(".html")&&(d=d.substring(0,d.indexOf(".html"))),u.ajax({type:"GET",url:d+".accessoriesTileImagePath.html",data:r,dataType:"html",success:function(e){u.trim(e).length&&(t.find(".media-carousel-container").html(u(e).html()),t.find(".checkoutMore").attr("href",t.find("input[name=accessoryPath]").val()+".html"),h(t),t.show())},error:function(e){f(e)}}),"false"===t.find("input[name=accessoriesTileHasContent]").first().val()&&t.hide(),{"[@vehicleName]":n});t.find(".media-carousel-description").html((a=t.find(".media-carousel-description").html(),i=l,Object.keys(i).forEach(function(e){a&&a.length&&(a=a.replace(e,i[e]))}),a))}function f(e){e.returnCode&&e.msg}return touchOrClick=null!==document.ontouchstart?"click":"touchstart",a.init=function(e){u(".accessoriesTile").each(function(e,t){i(u(this))})},a}),define("credit-options/component.creditOptions",["jquery","cookie","analytics/analyticsEventLayer"],function(i,n,o){var e={};return e.init=function(){function a(e){e&&(e.is(":checked")?e.parents(".section").addClass("checked-row"):e.parents(".section").removeClass("checked-row"))}function e(){var e=jQuery(".credit-checkbox-holder").find("input:checkbox:checked").length;jQuery(".creditOptions-holder").removeClass("show-compare"),2<=e&&jQuery(".creditOptions-holder").addClass("show-compare")}var t;localStorage.removeItem("creditAllInfo"),n.eraseCookieWithPath("creditCompare","/"),i(".credit-input").find("label").unbind().on("click",function(e){var t=i(this);t.hasClass("checked")?t.removeClass("checked"):t.addClass("checked"),1<i(".credit-input").find("label.checked").length?i(".compare-description").show():i(".compare-description").hide()}),i(document).on("click",".financing-button",function(e){var t;e.preventDefault(),i(this).hasClass("canscel-buttom")?(t=i(".credit-input").find("label"),i.each(t,function(e){i(t[e]).removeClass("checked")}),i(".compare-description").hide()):i(this).hasClass("compare-button")&&(1<i(".credit-input").find("label.checked").length?i(".compare-description").show():i(".compare-description").hide()),i(".creditOptions").hasClass("show-options")?(i(".creditOptions").removeClass("show-options"),o.getCreditFinanceOptionsEvents().trackCompareAction("cancel")):(i(".creditOptions").addClass("show-options"),i('.credit-checkbox-holder.form input[type="checkbox"]').prop("checked",!1),o.getCreditFinanceOptionsEvents().trackCompare())}),i(document).on("click",".compare-description .cta-button",function(){var t=[],e=(i(".creditOptions-holder .checked").each(function(){var e={};e.pageName=i(this).find("h3").attr("data-value"),t.push(e)}),e=JSON.stringify(t),n.setCookieWithPath("creditCompare",e,1,"/"),i(".creditAllInfo-data").attr("data-value")),e=JSON.stringify(e);localStorage.setItem("creditAllInfo",e),o.getCreditFinanceOptionsEvents().trackStepOne()}),(t=jQuery(".credit-checkbox-holder").find("input:checkbox")).click(function(){a(jQuery(this)),e()}),t.each(function(e,t){a(jQuery(t))}),e()},e}),define("credit-options-addon/component.creditOptionsAddon",["jquery","cookie"],function($,cookie){var api={};function initHTMLContent(){var htmlTemp="",ctr=0,creditOptionsData=[],creditOptionsSelected=[],creditAllInfo=localStorage.getItem("creditAllInfo")||"undefined";"undefined"!==creditAllInfo&&""!==creditAllInfo&&(creditOptionsData=eval("("+JSON.parse(creditAllInfo)+")")),""!==cookie.getCookie("creditCompare")&&(creditOptionsSelected=JSON.parse(cookie.getCookie("creditCompare"))),$.each(creditOptionsData,function(e,a){var i="";$.each(creditOptionsSelected,function(e,t){htmlTemp="",t.pageName==a.pageName&&(i="disable")}),htmlTemp=(htmlTemp=(htmlTemp=(htmlTemp=(htmlTemp+='<div class="checkbox section '+i+'"><div class="form-checkbox clearleft"><fieldset class="credit-overlay-input">')+'<input id="checkbox'+ctr+'" type="checkbox"><label for="checkbox'+ctr+'">')+'<input type="hidden" value="'+a.pagePath+'">')+"<h3>"+a.pageName+"</h3>")+"<p>"+a.panelSupportingText+"</p></fieldset></div></div>",ctr++,$(".popup-content-holder").append(htmlTemp)})}function initEvents(){var o=cookie.getCookie("addFunctionality"),r=JSON.parse(cookie.getCookie("creditCompare")),l=cookie.getCookie("editFunctionality");$(".popup-content-holder").find("div.checkbox").not(".disable").find("label").unbind().one("click",function(e){var t,a=$(this);if(o&&(a.hasClass("checked")?a.removeClass("checked"):(t=a.find("h3").text(),r.push({pageName:t}),cookie.setCookieWithPath("creditCompare",JSON.stringify(r),1,"/"),a.addClass("checked"),window.location.reload(),window.location.hash="")),l)if(a.hasClass("checked"))a.removeClass("checked");else{for(var i=a.find("h3").text(),n=0;n<r.length;n++)if(r[n].pageName==l){r[n].pageName=i;break}cookie.setCookieWithPath("creditCompare",JSON.stringify(r),1,"/"),a.addClass("checked"),window.location.reload(),window.location.hash=""}})}return api.init=function(){initHTMLContent(),initEvents()},api}),define("credit-summary/component.creditSummary",["jquery","cookie","analytics/analyticsEventLayer"],function($,cookie,analyticsEventLayer){var api={};function initTableHTML(e,t){cookie.eraseCookieWithPath("addFunctionality","/"),cookie.eraseCookieWithPath("editFunctionality","/");var a,n=$("div#changeText").data("value"),o=$("div#removeText").data("value"),r=$("div#overlayLandingPage").data("value"),i=$(".credit-summary-table"),l="",s="",c="",d="",u="",p="",m="",h=t.length,f=0;$.each(e,function(e,a){$.each(t,function(e,t){t.pageName==a.pageName&&(l+='<th class="column'+f+'">'+a.pageName+"</th>")}),f++}),f=0,i.find("thead > tr").append(l),$.each(e,function(e,i){$.each(t,function(e,t){var a;t.pageName==i.pageName&&(a="",c=i.vehicletype.label,$.each(i.vehicletype.items,function(e,t){a+=e%2?'<p class="even">'+t+"</p>":"<p>"+t+"</p>"}),s+='<td class="column'+f+'">'+a+"</td>")}),f++}),f=0,s="<tr><th>"+c+"</th>"+s+"</tr>",i.find("tbody").append(s),$.each(e,function(e,i){$.each(t,function(e,t){var a;t.pageName==i.pageName&&(a="",u=i.termsavailable.label,$.each(i.termsavailable.items,function(e,t){a+=e%2?'<p class="even">'+t+"</p>":"<p>"+t+"</p>"}),d+='<td class="column'+f+'">'+a+"</td>")}),f++}),f=0,d="<tr><th>"+u+"</th>"+d+"</tr>",i.find("tbody").append(d),$.each(e,function(e,i){$.each(t,function(e,t){var a;t.pageName==i.pageName&&(t=a="",m=i.uniquebenefit.label,$.each(i.uniquebenefit.items,function(e,t){a+=e%2?'<p class="even">'+t+"</p>":"<p>"+t+"</p>"}),t=(t+='<div class="btn-holder">')+'<a href="'+window.location.pathname+"#overlay"+r+'?wcmmode=disabled" class="cta-button edit-button link-overlay" data-column="column'+f+'">'+n+"</a>",p+='<td class="column'+f+'">'+(a+=t=t+('<a href="#" class="cta-button remove-button" data-column="column'+f+'">'+o+"</a>")+"</div>")+"</td>")}),f++}),p="<tr><th>"+m+"</th>"+p+"</tr>",i.find("tbody").append(p),3===h?(i.addClass("three-columns"),a=0,$("table.three-columns th").each(function(){a<$(this).outerHeight()&&(a=$(this).outerHeight())}),$("table.three-columns th").css({height:a})):$("table.three-columns th").css({height:"auto"})}function onButtonAddClick(){$(".credit-summary-table").find("a.add-button").on("click",function(e){cookie.getCookie("editFunctionality")&&cookie.eraseCookieWithPath("editFunctionality","/"),cookie.setCookieWithPath("addFunctionality","add",1,"/"),analyticsEventLayer.getCreditFinanceOptionsEvents().trackCompareAction("add")})}function onButtonEditClick(){$(".credit-summary-table").find("a.edit-button").on("click",function(e){var t=$(this).data("column"),t=$("th."+t).text();cookie.getCookie("addFunctionality")&&cookie.eraseCookieWithPath("addFunctionality","/"),cookie.setCookieWithPath("editFunctionality",t,1,"/"),analyticsEventLayer.getCreditFinanceOptionsEvents().trackCompareAction("change")})}function onButtonRemoveClick(o){var r=$(".credit-summary-table");r.find("a.remove-button").on("click",function(e){var t=$(this).data("column"),e=(e.preventDefault(),r.find("th."+t).addClass("hide"),r.find("td."+t).addClass("hide"),r.removeClass("three-columns"),$("th."+t).text());for(var a=o,i=e,n=0;n<a.length;n++)if(a[n].pageName==i){a.splice(n,1);break}cookie.setCookieWithPath("creditCompare",JSON.stringify(o),1,"/")})}return api.init=function(){onButtonAddClick();var creditOptionsData=[],creditOptionsSelected=[],creditAllInfo=localStorage.getItem("creditAllInfo")||"undefined",_setSameHeightTable=("undefined"!==creditAllInfo&&""!==creditAllInfo&&(creditOptionsData=eval("("+JSON.parse(creditAllInfo)+")")),""!==cookie.getCookie("creditCompare")&&(creditOptionsSelected=JSON.parse(cookie.getCookie("creditCompare"))),initTableHTML(creditOptionsData,creditOptionsSelected),onButtonRemoveClick(creditOptionsSelected),onButtonEditClick(),function(e){$(this).css("height","auto");var t=e.map(function(){return $(this).css("min-height","inherit"),$(this).height()}).get(),t=Math.max.apply(null,t);e.css("height",t)}),$target=$("#global-ux .credit-summary-table tbody tr:last-of-type>td");_setSameHeightTable($target),$(window).resize(function(){$target.height("auto"),_setSameHeightTable($target)})},api}),define("credit-shoppers-guide-new/component.creditShoppersGuideNew",["jquery","mediaQuery","pubsub"],function(i,t,e){var a={};function n(e){"desktop"==e||"xlarge"==e||"tablet"==e?""==i(".credit-shopper-guide .doc-checklist .desktop").html().trim()?i(".credit-shopper-guide .doc-checklist").addClass("none-style"):i(".credit-shopper-guide .doc-checklist").removeClass("none-style"):""==i(".credit-shopper-guide .doc-checklist .mobile").html().trim()?i(".credit-shopper-guide .doc-checklist").addClass("none-style"):i(".credit-shopper-guide .doc-checklist").removeClass("none-style")}return a.init=function(){var e;i.ajax({type:"POST",url:"serverletPath",data:{saveLink:""},dataType:"binary",async:!1,cache:!1,processData:!1,success:function(e){var t=URL.createObjectURL(e);i("<a />",{href:t,download:"document.pdf",text:"click"}).hide().appendTo("body")[0].click();setTimeout(function(){URL.revokeObjectURL(t)},1e3)},error:function(){}}),i.each(i(".payment-save .payment-change-save"),function(e,t){var a=i(this).attr("href"),a=i(this).data("ie8-href")+"?link="+a;i(this).attr("href",a)}),i(".payment-estimator-btns .send-mail").length&&(e=i(".payment-estimator-btns .send-mail").find("a").attr("href")).length&&(e=(e=e.split("<p>").join("")).split("</p>").join("%0D%0A"),i(".payment-estimator-btns .send-mail").find("a").attr("href",e)),n(t.getMediaType()),i.subscribe("mediaQuery:change",function(e){n(e.getMediaType())}),i(".credit-accordion-indicator").click(function(){i(".credit-shopper-guide").toggleClass("hide-bring")})},a}),define("build-and-price/component.buildAndPrice",["jquery","angular","angular-route","jquery-flexslider","mediaQuery","_","angular-sanitize","analytics/analyticsEventLayer","utils/getParamValue","disclosure/component.disclosure","paymentCalculator/component.paymentCalculator","marketConfigGlobal"],function(g,C,e,t,a,v,i,k,S,x,D,n){var P={},T=((app=C.module("BuildAndPriceAngularApp",["ngRoute","ngSanitize"])).filter("unsafe",["$sce",function(t){return function(e){return t.trustAsHtml(e)}}]),-1),N=-1;function o(e){this.$elem=g(e),this.$primaryNav=this.$elem.find(".primary-nav-controls"),this.$secondaryNav=this.$elem.find(".secondary-nav-controls"),this.$leftContent=this.$elem.find(".left-scrolling-content"),this.$mainContent=this.$elem.find(".main-container"),this.$viewportContainer=this.$mainContent.find(".viewport-container"),this.setContainerHeights(),this.accordionEvents(),this.primaryNavEvents(),this.setSlideItemWidth(),g(window).load(function(){var e,t;g(".setThemeColor").each(function(){currObj=g(this),e=currObj.data("color"),(t=currObj.hasClass("isAccordionHeader"))&&(0===g(".build-and-price-refactored").length?currObj.find(".nav-title-wrapper a").css({"background-color":"#"+e,color:"#ffffff"}):currObj.find(".nav-title-wrapper a").css({cssText:"background-color: #"+e+"!important; color: #ffffff !important"}),currObj.find(".nav-title-wrapper a .icon-chevron-thin-down").css({"background-color":"#"+e})),"au"===n.getCurrentMarketCode()&&t&&(currObj.find(".nav-title-wrapper__holder").css({"background-color":"#"+e,color:"#ffffff"}),currObj.find(".nav-title-wrapper a .icon-chevron-thin-down").css({"background-color":"#"+e})),currObj.css("color","#"+e)}),g(".mobile-back-btn").each(function(){g(this).click(function(){I()})}),g(".city-change").click(function(e){var t,a=g(e.target).attr("href");a&&(t=1<(t=location.href.split("?")).length?t[1]:"",t+="&c="+g(".city-change").data("locationlabel"),a+=(a.match(/\?/)?"&":"?")+t,g(e.target).attr("href",a))})})}function A(e){var t=".build-and-price .main-container .viewport-carousel",a=".build-and-price .main-container .viewport-carousel .slide";g(a).length&&(void 0!==e&&!isNaN(e)&&0<e?(g(t).addClass("change-image"),setTimeout(function(){g(a).width(g(t).first().width()),g(t).removeClass("change-image")},e)):g(a).width(g(t).first().width()))}function I(e){var t,a=".build-and-price .left-scrolling-content",i=".build-and-price .left-scrolling-content #colorandtrim ul li .content",n=".build-and-price .left-scrolling-content #accessories ul li .content";g(a).length&&g(".build-and-price .main-container").length&&(g(a).css("height","auto"),767<g(window).width()?setTimeout(function(){g(a).css({height:"720px",overflow:"auto"}),g("body").removeClass("no-scroll"),g(".build-and-price .left-scrolling-content #bundle ul li .content").css("height","635px"),g(".build-and-price .left-scrolling-content #model ul li .content").css("height","635px"),g(".build-and-price .left-scrolling-content #drive ul li .content").css("height","635px"),2==N&&g(i).css("height","550px"),1==N&&g(i).css("height","635px"),3==T&&g(n).css("height","465px"),2==T&&g(n).css("height","550px"),1==T&&g(n).css("height","635px")},e):(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||(g(a).css({height:"720px",overflow:"visible"}),g("body").hasClass("active-select-option")?g("body").addClass("no-scroll"):g("body").removeClass("no-scroll"),2==N&&g(i).css("height","400px"),1==N&&g(i).css("height","485px"),3==T&&g(n).css("height","315px"),2==T&&g(n).css("height","400px"),1==T&&g(n).css("height","485px")),t=g(window).height()+25,void 0!==e&&!isNaN(e)&&0<e?setTimeout(function(){g(a).css("height",t)},e):g(a).css("height",t)))}function $(e,t,a){void 0!==a&&0==a?A():A(1e3),t.flexslider({selector:".slides > .slide",animation:"slide",directionNav:!1,slideshow:!1,animationLoop:!1,minItems:1,maxItems:1,move:1,after:function(){k.getBuildAndPriceBuildEvents().gallery(e,"carousel scroll")}})}return app.controller("BuildPriceAppController",["$scope","$http","$window",function(y,n,e){var b,o,t=new URL(e.location),c=(y.urlParams=v.object(v.compact(v.map(t.search.slice(1).split("&"),function(e){if(e)return v.map(e.split("="),function(e){return decodeURIComponent(e)})}))),g("#countryCodeISO").attr("value")),w=g(".flex-viewport .slides .slide"),t=g("#build-and-price-wrap"),d=t.attr("data-fetch-from-polk"),s=t.attr("data-remove-zero-price"),a=!1,r=!1,l=t.attr("data-domain-sl"),u=(t.attr("data-usage-type"),t.attr("data-env-type")),p=(g(".city-change").attr("data-locationlabel"),0),m={exterior:0,interior:0,optionals:0},i=(y.hasLoadedRequest=!0,y.count=0,y.nameplate=y.urlParams.n,y.nameplateKey=y.urlParams.n,y.locationNew=y.urlParams.l||"_",y.locationLabel=y.locationNew,y.usageType=y.urlParams.u,y.modelKey=y.urlParams.m,y.driveKey=y.urlParams.d,y.exteriorColorKey=y.urlParams.e,y.trimKey=y.urlParams.t,y.exteriorAccessoriesKeyList=y.urlParams.ae,y.interiorAccessoriesKeyList=y.urlParams.ai,y.optionalAccessoriesKeyList=y.urlParams.ao,y.specificationsAccessoriesKeyList=y.urlParams.as,y.utilitySafetyAccessoriesKeyList=y.urlParams.au,y.multimediaAccessoriesKeyList=y.urlParams.am,y.nameplateCrmId="",y.showTrim=[],y.vehicle=[],y.totalPrice=0,y.basePrice=0,y.currency=getSymbolByMKTconfig(),y.currencyFormatPattern=g("#currencyFormatPattern").val(),y.selectedItems=[],y.sendURL=[],y.modelLabel="",y.modelImgUrl="/etc/designs/guxfoap/clientlibs/guxfoap/img/car-grayscale.png",y.newparms=0,y.auMarket=!1,y.hasData=!0,y.showAccessories=!0,y.showOptionals=!0,y.hasDrives=!1,y.hasColortrim=!1,y.hasColortrimExterior=!1,y.hasColortrimInterior=!1,y.hasAccessories=!1,y.hasLoaded=!1,y.displayTrim=!1,y.displayDrive=!1,y.priceReplaceKey="{PRICE}",y.currentTab="exterior",y.analytics={category:{model:"Models",drive:"Drive",colortrim:"Color & Trim",accessories:"Accessories"},subcat:{interior:"interior",ext:"exterior",opt:"optionals",utilsafety:"utility-safety",specs:"specifications",media:"multimedia"}},y.frm={vehicle:null,model:null,modelCrmId:null,modelName:null,modelPricePublishDate:"",drive:null,driveName:null,optionsKeys:null,optionPackage:{},colortrim:{exterior:null,interior:null,exteriorName:null,interiorName:null,extCarousel:null,intCarousel:null},accessories:{exterior:{},interior:{},optionals:{},specifications:{},utilitySafety:{},multimedia:{}}},y.ctmap=[],y.prs={model:null,drive:null,colortrim:{exterior:null,interior:null},accessories:{exterior:{},interior:{},optionals:{},specifications:{},utilitySafety:{},multimedia:{}}},y.onClickTab=function(e){y.currentTab=e.id,"interior"===y.currentTab?g(".viewport-controller-pane").attr("id","tab-int"):g(".viewport-controller-pane").attr("id","tab-ext"),$(y.currentTab,g(".viewport-carousel#"+y.currentTab),!1)},y.isActiveTab=function(e){return e===y.currentTab},y.modelChanged=function(e){"ZAF"==c&&setTimeout(function(){D.getPaymentData()},500)},y.initResultsObj=function(){y.frm.vehicle=y.vehicle.key,y.nameplateCrmId=y.vehicle.crmId||"",y.hasDrives=!1,y.hasColortrim=!1,y.hasColortrimExterior=!1,y.hasColortrimInterior=!1,y.hasAccessories=!1,C.forEach(y.vehicle.models,function(e,t){if(e.extfeature&&C.forEach(e.extfeature,function(e,t){e={cid:e.modelFeatureID,tid:e.subModelFeatureID};y.ctmap.push(e)}),e.optionPackage&&void 0!==e.optionPackage.optionals&&C.forEach(e.optionPackage.optionals.items,function(e,t){e.cost=e.cost?parseFloat(e.cost):0}),!0===e.isDefault)return y.frm.model=e.key,y.frm.modelName=e.label,y.frm.modelPricePublishDate=e.pricePublishDate||"",y.frm.modelCrmId=e.crmId||"",y.totalPrice=0,y.setTotalPrice(e.price),y.setBasePrice(e.price),e.drive&&(C.forEach(e.drive.items,function(e,t){if(!0===e.isDefault)return y.frm.drive=e.featureKey,y.frm.driveName=e.featureName,y.frm.driveCost=e.cost,y.setTotalPrice(e.cost),!1}),y.hasDrives=!0),e.colortrim&&(e.colortrim.color&&(C.forEach(e.colortrim.color.items,function(e,t){if(!0===e.isDefault)return y.ctMapping(e.id),y.frm.colortrim.exterior=e.featureKey,y.frm.colortrim.exteriorName=e.featureName,y.frm.colortrim.colorid=e.id,y.frm.colortrim.extCarousel=e.carouselImage,y.updateSelectedCost("exterior",e.featureKey,e.cost),y.setTotalPrice(e.cost),d&&(m.exterior=e.cost),!1}),y.hasColortrim=!0,y.hasColortrimExterior=!0,y.viewportImagesExt()),e.colortrim.trim?(C.forEach(e.colortrim.trim.items,function(e,t){if(!0===e.isDefault)return y.frm.colortrim.interior=e.featureKey,y.frm.colortrim.interiorName=e.featureName,y.frm.colortrim.trimid=e.id,y.frm.colortrim.intCarousel=e.carouselImage,y.setTotalPrice(e.cost),d&&(m.interior=e.cost),!1}),y.hasColortrim=!0,y.hasColortrimInterior=!0,y.displayTrim=!0,y.viewportImagesInt()):(0!==g(".build-and-price-refactored").length&&(y.displayTrim=!1),setTimeout(function(){y.viewportImagesExt()},200))),e.accessories&&(e.accessories.exterior&&(C.forEach(e.accessories.exterior.items,function(e,t){e.cost=e.cost?parseFloat(e.cost):0,!0===e.isDefault&&(y.frm.accessories.exterior[e.featureKey]=!0,y.setTotalPrice(e.cost))}),y.hasAccessories=!0),e.accessories.interior&&(C.forEach(e.accessories.interior.items,function(e,t){e.cost=e.cost?parseFloat(e.cost):0,!0===e.isDefault&&(y.frm.accessories.interior[e.featureKey]=!0,y.setTotalPrice(e.cost))}),y.hasAccessories=!0),e.accessories.optionals&&(C.forEach(e.accessories.optionals.items,function(e,t){e.cost=e.cost?parseFloat(e.cost):0,!0===e.isDefault&&(y.frm.accessories.optionals[e.featureKey]=!0,y.setTotalPrice(e.cost))}),e.accessories.optionals.items)&&e.accessories.optionals.items.length&&"false"===y.optionPackagesAU&&(y.hasAccessories=!0),e.accessories.specifications&&(C.forEach(e.accessories.specifications.items,function(e,t){e.cost=e.cost?parseFloat(e.cost):0,!0===e.isDefault&&(y.frm.accessories.specifications[e.featureKey]=!0,y.setTotalPrice(e.cost))}),y.hasAccessories=!0),e.accessories.utilitySafety&&(C.forEach(e.accessories.utilitySafety.items,function(e,t){e.cost=e.cost?parseFloat(e.cost):0,!0===e.isDefault&&(y.frm.accessories.utilitySafety[e.featureKey]=!0,y.setTotalPrice(e.cost))}),y.hasAccessories=!0),e.accessories.multimedia)&&(C.forEach(e.accessories.multimedia.items,function(e,t){e.cost=e.cost?parseFloat(e.cost):0,!0===e.isDefault&&(y.frm.accessories.multimedia[e.featureKey]=!0,y.setTotalPrice(e.cost))}),y.hasAccessories=!0),!1}),y.hasLoaded=!0},y.initParamObj=function(){y.frm.vehicle=y.vehicle.key;var i=0,n=0;y.hasDrives=!1,y.hasColortrim=!1,y.hasColortrimExterior=!1,y.hasColortrimInterior=!1,y.hasAccessories=!1,C.forEach(y.vehicle.models,function(e,t){if(e.key===y.prs.model)return y.frm.model=e.key,y.frm.modelName=e.label,y.frm.modelPricePublishDate=e.pricePublishDate||"",y.frm.modelCrmId=e.crmId||"",y.totalPrice=0,y.setTotalPrice(e.price),y.setBasePrice(e.price),e.drive&&(C.forEach(e.drive.items,function(e,t){if(e.featureKey===y.prs.drive)return y.frm.drive=e.featureKey,y.frm.driveName=e.featureName,y.frm.driveCost=e.cost,y.setTotalPrice(e.cost),y.updateSelectedCost("drive",e.featureKey,e.cost),!1}),y.hasDrives=!0),e.colortrim&&(e.colortrim.color&&(C.forEach(e.colortrim.color.items,function(e,t){if(e.featureKey===y.prs.colortrim.exterior)return y.frm.colortrim.exterior=e.featureKey,y.frm.colortrim.exteriorName=e.featureName,y.frm.colortrim.colorid=e.id,y.frm.colortrim.extCarousel=e.carouselImage,y.setTotalPrice(e.cost),y.frm.colortrim.colorcost=e.cost,y.updateSelectedCost("exterior",e.featureKey,e.cost),i+=parseInt(e.cost),!1}),y.hasColortrim=!0,y.hasColortrimExterior=!0,y.viewportImagesExt()),e.colortrim.trim?(C.forEach(e.colortrim.trim.items,function(e,t){if(e.featureKey===y.prs.colortrim.interior)return y.frm.colortrim.interior=e.featureKey,y.frm.colortrim.interiorName=e.featureName,y.frm.colortrim.trimid=e.id,y.frm.colortrim.intCarousel=e.carouselImage,y.setTotalPrice(e.cost),y.updateSelectedCost("interior",e.featureKey,e.cost),i+=parseInt(e.cost),!1}),y.hasColortrim=!0,y.hasColortrimInterior=!0,y.viewportImagesInt()):setTimeout(function(){y.viewportImagesExt()},200)),e.accessories&&(e.accessories.exterior&&(C.forEach(e.accessories.exterior.items,function(e,t){for(var a in e.isDefault=!1,y.prs.accessories.exterior)e.featureKey===a&&(y.frm.accessories.exterior[e.featureKey]=!0,e.isDefault=!0,e.cost=e.cost?parseFloat(e.cost):0,y.setTotalPrice(e.cost),n+=parseInt(e.cost))}),y.hasAccessories=!0),e.accessories.interior&&(C.forEach(e.accessories.interior.items,function(e,t){for(var a in e.isDefault=!1,y.prs.accessories.interior)e.featureKey===a&&(y.frm.accessories.interior[e.featureKey]=!0,e.isDefault=!0,e.cost=e.cost?parseFloat(e.cost):0,y.setTotalPrice(e.cost),n+=parseInt(e.cost))}),y.hasAccessories=!0),e.accessories.optionals&&(C.forEach(e.accessories.optionals.items,function(e,t){for(var a in e.isDefault=!1,y.prs.accessories.optionals)e.featureKey===a&&(y.frm.accessories.optionals[e.featureKey]=!0,e.isDefault=!0,e.cost=e.cost?parseFloat(e.cost):0,y.setTotalPrice(e.cost),i+=parseInt(e.cost))}),y.hasAccessories=!0),e.accessories.specifications&&(C.forEach(e.accessories.specifications.items,function(e,t){for(var a in e.isDefault=!1,y.prs.accessories.specifications)e.featureKey===a&&(y.frm.accessories.specifications[e.featureKey]=!0,e.isDefault=!0,e.cost=e.cost?parseFloat(e.cost):0,y.setTotalPrice(e.cost),n+=parseInt(e.cost))}),y.hasAccessories=!0),e.accessories.utilitySafety&&(C.forEach(e.accessories.utilitySafety.items,function(e,t){for(var a in e.isDefault=!1,y.prs.accessories.utilitySafety)e.featureKey===a&&(y.frm.accessories.utilitySafety[e.featureKey]=!0,e.isDefault=!0,e.cost=e.cost?parseFloat(e.cost):0,y.setTotalPrice(e.cost),n+=parseInt(e.cost))}),y.hasAccessories=!0),e.accessories.multimedia)&&(C.forEach(e.accessories.multimedia.items,function(e,t){for(var a in e.isDefault=!1,y.prs.accessories.multimedia)e.featureKey===a&&(y.frm.accessories.multimedia[e.featureKey]=!0,e.isDefault=!0,e.cost=e.cost?parseFloat(e.cost):0,y.setTotalPrice(e.cost),n+=parseInt(e.cost))}),y.hasAccessories=!0),d&&(a=!0,h(i,0,n),setTimeout(function(){g(".panel-price .priceDropdown  ul li:first-child").remove(),g("#model .content-wrapper .sub-text").remove(),g("#model .content-wrapper .control").css("padding-top","5px")},100)),!1}),y.viewportImagesExt(),y.viewportImagesInt(),y.hasLoaded=!0},0);y.changeDisclosure=function(e){for(var t,a,i=0;i<y.vehicle.models.length;i++)C.forEach(y.vehicle.models[i],function(){y.vehicle.models[i].key==e&&(y.vehicle.models[i].key,t=y.vehicle.models[i].attributeDisclosure,a=y.vehicle.models[i].currencySup)});g(".panel-price").each(function(){priceDisPane=g(".price span .replaceDis"),a?(priceDisPane.find(".bnpDisCurrency").remove(),priceDisPane.append('<sup class="bnpDisCurrency"  tabindex="0" style="display: inline;">'+a+" </sup>")):priceDisPane.find(".bnpDisCurrency").remove(),t?(priceDisPane.find(".bnpDisData").remove(),priceDisPane.append('<sup class="bnpDisData" data-disclosure="'+t+'" tabindex="1" style="display: inline;"> </sup>')):priceDisPane.find(".bnpDisData").remove()}),x.init()};function h(e,t,a){var i=0,a=(y.hasLoadedRequest=!1,0==t?(i=parseInt(e),o=parseInt(e),p=parseInt(a),parseInt(a)):3==t?(m.optionals=0,m.exterior=0,m.interior=0,i=parseInt(e),o=parseInt(e)):i=4==t||5==t?1<=o&&o!=+m.optionals+ +m.exterior+ +m.interior?+o+ +m.optionals+ +m.exterior+ +m.interior:+m.optionals+ +m.exterior+ +m.interior:1<=o?+o+ +m.optionals+ +m.exterior+ +m.interior:+m.optionals+ +m.exterior+ +m.interior,{url:l,method:"GET",params:{modelKey:y.frm.model,accessoryPrice:p,optionPrice:i,transmissionFeatureKey:y.frm.drive,location:y.locationNew,usageType:y.usageType,env:u}});n(a).then(function(e){var t;200===e.data.returnCode&&(g("input[name='modelKey']").val(e.data.vehicle[0].modelKey),g("input[name='modelkeyPrice']").val(t),e=e.data.vehicle[0].driveAwayPrice,t=y.priceFormat(e,y.currency),g(".priceDropdown ul li:nth-child(3) span").html(""),g(".panel-price .price-title .price > span").html(""),setTimeout(function(){g(".priceDropdown ul .last span").html("").append(t),g(".panel-price .price-title .price > span").html("").append(t)},100)),y.hasLoadedRequest=!0},function(e){console.log(e),y.hasLoadedRequest=!0})}y.$watch("hasLoaded",function(){if(2==++i&&(g(window).trigger("buildpriceloaded"),setTimeout(function(){b=w.attr("style")},1e3)),2==i&&r){for(var e,t=0;t<y.vehicle.models.length;t++)C.forEach(y.vehicle.models[t],function(){!0===y.vehicle.models[t].isDefault&&(e=y.vehicle.models[t].key,y.vehicle.models[t].attributeDisclosure,y.vehicle.models[t].currencySup)});y.changeDisclosure(e)}2==i&&d&&!a&&(h("",1,"load"),setTimeout(function(){g(".panel-price .priceDropdown  ul li:first-child").remove(),g("#model .content-wrapper .sub-text").remove(),g("#model .content-wrapper .control").css("padding-top","5px")},100)),"NZL"===c&&g(".viewport-controller-pane").addClass("au-tab"),2==i&&"AUS"===c&&(y.auMarket=!0,y.locationNew||(y.hasData=!1,g(".city-change p a").trigger("click")),g(".build-and-price").each(function(){setTimeout(function(){g(".model-label h2 strong").hide()},1e3)}),g(".viewport-controller-pane").addClass("au-tab"))}),y.rebuildFormData=function(e){g(window).trigger("buildpricemodelchange"),y.frm={vehicle:null,model:null,modelCrmId:null,modelName:null,modelPricePublishDate:"",drive:null,colortrim:{exterior:null,interior:null,extCarousel:null,intCarousel:null},accessories:{exterior:{},interior:{},optionals:{},specifications:{},utilitySafety:{},multimedia:{}}};var t,a=0,i=0;return r&&y.changeDisclosure(e.key),y.hasDrives=!1,y.hasColortrim=!1,y.hasColortrimExterior=!1,y.hasColortrimInterior=!1,y.hasAccessories=!1,y.frm.model=e.key,y.frm.modelName=e.label,y.frm.modelPricePublishDate=e.pricePublishDate||"",y.frm.modelCrmId=e.crmId||"",y.modelImgUrl=e.imgUrl,y.totalPrice=0,y.setTotalPrice(e.price),y.setBasePrice(e.price),e.drive&&(C.forEach(e.drive.items,function(e,t){if(!0===e.isDefault)return y.frm.drive=e.featureKey,y.frm.driveName=e.featureName,y.frm.driveCost=e.cost,y.setTotalPrice(e.cost),!1}),y.hasDrives=!0),e.colortrim&&(e.colortrim.color&&(C.forEach(e.colortrim.color.items,function(e,t){if(!0===e.isDefault)return y.ctMapping(e.id),y.frm.colortrim.exterior=e.featureKey,y.frm.colortrim.exteriorName=e.featureName,y.frm.colortrim.colorid=e.id,y.frm.colortrim.extCarousel=e.carouselImage,y.updateSelectedCost("exterior",e.featureKey,e.cost),y.setTotalPrice(e.cost),a=parseInt(e.cost),!1}),y.hasColortrim=!0,y.hasColortrimExterior=!0),e.colortrim.trim)&&(C.forEach(e.colortrim.trim.items,function(e,t){if(!0===e.isDefault)return y.frm.colortrim.interior=e.featureKey,y.frm.colortrim.interiorName=e.featureName,y.frm.colortrim.trimid=e.id,y.frm.colortrim.intCarousel=e.carouselImage,y.setTotalPrice(e.cost),i=parseInt(e.cost),!1}),y.hasColortrim=!0,y.hasColortrimInterior=!0),e.accessories&&(e.accessories.exterior&&(C.forEach(e.accessories.exterior.items,function(e,t){!0===e.isDefault&&(e.isDefault=!1)}),y.hasAccessories=!0),e.accessories.interior&&(C.forEach(e.accessories.interior.items,function(e,t){!0===e.isDefault&&(e.isDefault=!1)}),y.hasAccessories=!0),e.accessories.optionals&&(C.forEach(e.accessories.optionals.items,function(e,t){!0===e.isDefault&&(e.isDefault=!1)}),y.hasAccessories=!0),e.accessories.specifications&&(C.forEach(e.accessories.specifications.items,function(e,t){!0===e.isDefault&&(e.isDefault=!1)}),y.hasAccessories=!0),e.accessories.utilitySafety&&(C.forEach(e.accessories.utilitySafety.items,function(e,t){!0===e.isDefault&&(e.isDefault=!1)}),y.hasAccessories=!0),e.accessories.multimedia)&&(C.forEach(e.accessories.multimedia.items,function(e,t){!0===e.isDefault&&(e.isDefault=!1)}),y.hasAccessories=!0),t=a+i,d&&setTimeout(function(){h(t,3,"model")},500),g(".monthy-button").length&&setTimeout(function(){D.getPaymentData()},500),!1},y.setAccessories=function(e,t,a,i,n){"ZAF"==c&&(e.featureKey=e.featureKey.replace('/"/g','\\"'));n=n.target.checked&&g('#optionsPackage input[featureKey="'+e.featureKey+'"]').is(":checked");"ZAF"==c&&setTimeout(function(){D.getPaymentData()},500),d&&(y.frm.accessories[t][e.featureKey]?"optionals"===t?y.optionPackages&&y.optionPackagesAU&&n||(m.optionals-=+parseFloat(a)):y.optionPackages&&y.optionPackagesAU&&n||(p-=+a):"optionals"===t?y.optionPackages&&y.optionPackagesAU&&n||(m.optionals+=+parseFloat(a)):y.optionPackages&&y.optionPackagesAU&&n||(p+=+a)),t=t.toLowerCase(),void 0!==i&&0!=i&&(i=i.toString(),g("#"+i).prop("checked",!0)),a=parseInt(a),n&&y.optionPackages&&y.optionPackagesAU?g('#optionsPackage input[featureKey="'+e.featureKey+'"]').prop("checked",!1):(t==y.tabs[0].id?null!=y.frm.accessories.exterior[e.featureKey]?(delete y.frm.accessories.exterior[e.featureKey],"included"==a&&0==a||(y.totalPrice=y.totalPrice-parseInt(a))):(y.frm.accessories.exterior[e.featureKey]=!0,y.fireAnalytics(y.analytics.category.accessories,y.analytics.subcat.ext,e.featureKey),"included"==a&&0==a||(y.totalPrice=y.totalPrice+parseInt(a))):t==y.tabs[1].id?null!=y.frm.accessories.interior[e.featureKey]?(delete y.frm.accessories.interior[e.featureKey],"included"==a&&0==a||(y.totalPrice=y.totalPrice-parseInt(a))):(y.frm.accessories.interior[e.featureKey]=!0,y.fireAnalytics(y.analytics.category.accessories,y.analytics.subcat.interior,e.featureKey),"included"==a&&0==a||(y.totalPrice=y.totalPrice+parseInt(a))):"specifications"==t?null!=y.frm.accessories.specifications[e.featureKey]?(delete y.frm.accessories.specifications[e.featureKey],"included"==a&&0==a||(y.totalPrice=y.totalPrice-parseInt(a))):(y.frm.accessories.specifications[e.featureKey]=!0,y.fireAnalytics(y.analytics.category.accessories,y.analytics.subcat.specs,e.featureKey),"included"==a&&0==a||(y.totalPrice=y.totalPrice+parseInt(a))):"utilitysafety"==t?null!=y.frm.accessories.utilitySafety[e.featureKey]?(delete y.frm.accessories.utilitySafety[e.featureKey],"included"==a&&0==a||(y.totalPrice=y.totalPrice-parseInt(a))):(y.frm.accessories.utilitySafety[e.featureKey]=!0,y.fireAnalytics(y.analytics.category.accessories,y.analytics.subcat.utilsafety,e.featureKey),"included"==a&&0==a||(y.totalPrice=y.totalPrice+parseInt(a))):"multimedia"==t?null!=y.frm.accessories.multimedia[e.featureKey]?(delete y.frm.accessories.multimedia[e.featureKey],"included"==a&&0==a||(y.totalPrice=y.totalPrice-parseInt(a))):(y.frm.accessories.multimedia[e.featureKey]=!0,y.fireAnalytics(y.analytics.category.accessories,y.analytics.subcat.media,e.featureKey),"included"==a&&0==a||(y.totalPrice=y.totalPrice+parseInt(a))):null!=y.frm.accessories.optionals[e.featureKey]?(delete y.frm.accessories.optionals[e.featureKey],"included"==a&&0==a||(y.totalPrice=y.totalPrice-parseInt(a))):(y.frm.accessories.optionals[e.featureKey]=!0,y.fireAnalytics(y.analytics.category.accessories,t,e.featureKey),"included"==a&&0==a||(y.totalPrice=y.totalPrice+parseInt(a))),d&&setTimeout(function(){h("",5,"accessories")},400),"optionals"===t&&(i=JSON.stringify(Object.keys(y.frm.accessories.optionals)),y.frm.optionsKeys=i?i.replace(/[\[\]"]+/g,""):""))},y.setOptionPrices=function(e,t,a,i,n){var o=n.target.checked&&g('input[featureKey="'+e.featureKey+'"]').not('#optionsPackage input[featureKey="'+e.featureKey+'"]').is(":checked"),r="";"color"==(t=(t=t.toLowerCase()).replace("optional","optionals").replace("utilitysafety","utilitySafety"))||"trim"==t||"drive"==t?("color"==t?(r="exterior",setTimeout(function(){g(".color-selection-list.color-list input").prop("checked",!1)},1e3)):"trim"==t?(r="interior",setTimeout(function(){g(".color-selection-list.trim-list input").prop("checked",!1)},1e3)):"drive"==t&&(r=t,setTimeout(function(){g(".drive-list input").prop("checked",!1)},1e3)),y.updatePrice(a,r,!1,e,n,!0),"drive"==t&&y.updateDrive()):(d&&(y.frm.accessories[t][e.featureKey]?"optionals"===t?o||(m.optionals-=+parseFloat(a)):o||(p-=+a):"optionals"===t?o||(m.optionals+=+parseFloat(a)):o||(p+=+a)),a=parseInt(a),o?g('input[featureKey="'+e.featureKey+'"]').not('#optionsPackage input[featureKey="'+e.featureKey+'"]').prop("checked",!1):("exterior"==t?null!=y.frm.accessories.exterior[e.featureKey]?(delete y.frm.accessories.exterior[e.featureKey],"included"==a&&0==a||(y.totalPrice=y.totalPrice-parseInt(a))):(y.frm.accessories.exterior[e.featureKey]=!0,y.fireAnalytics(y.analytics.category.accessories,y.analytics.subcat.ext,e.featureKey),"included"==a&&0==a||(y.totalPrice=y.totalPrice+parseInt(a))):"interior"==t?null!=y.frm.accessories.interior[e.featureKey]?(delete y.frm.accessories.interior[e.featureKey],"included"==a&&0==a||(y.totalPrice=y.totalPrice-parseInt(a))):(y.frm.accessories.interior[e.featureKey]=!0,y.fireAnalytics(y.analytics.category.accessories,y.analytics.subcat.interior,e.featureKey),"included"==a&&0==a||(y.totalPrice=y.totalPrice+parseInt(a))):"specifications"==t?null!=y.frm.accessories.specifications[e.featureKey]?(delete y.frm.accessories.specifications[e.featureKey],"included"==a&&0==a||(y.totalPrice=y.totalPrice-parseInt(a))):(y.frm.accessories.specifications[e.featureKey]=!0,y.fireAnalytics(y.analytics.category.accessories,y.analytics.subcat.specs,e.featureKey),"included"==a&&0==a||(y.totalPrice=y.totalPrice+parseInt(a))):"utilitySafety"==t?null!=y.frm.accessories.utilitySafety[e.featureKey]?(delete y.frm.accessories.utilitySafety[e.featureKey],"included"==a&&0==a||(y.totalPrice=y.totalPrice-parseInt(a))):(y.frm.accessories.utilitySafety[e.featureKey]=!0,y.fireAnalytics(y.analytics.category.accessories,y.analytics.subcat.utilsafety,e.featureKey),"included"==a&&0==a||(y.totalPrice=y.totalPrice+parseInt(a))):"multimedia"==t?null!=y.frm.accessories.multimedia[e.featureKey]?(delete y.frm.accessories.multimedia[e.featureKey],"included"==a&&0==a||(y.totalPrice=y.totalPrice-parseInt(a))):(y.frm.accessories.multimedia[e.featureKey]=!0,y.fireAnalytics(y.analytics.category.accessories,y.analytics.subcat.media,e.featureKey),"included"==a&&0==a||(y.totalPrice=y.totalPrice+parseInt(a))):null!=y.frm.accessories.optionals[e.featureKey]?(delete y.frm.accessories.optionals[e.featureKey],"included"==a&&0==a||(y.totalPrice=y.totalPrice-parseInt(a))):(y.frm.accessories.optionals[e.featureKey]=!0,y.fireAnalytics(y.analytics.category.accessories,t,e.featureKey),"included"==a&&0==a||(y.totalPrice=y.totalPrice+parseInt(a))),d&&setTimeout(function(){h("",5,"accessories")},400),"optionals"===t&&(r=JSON.stringify(Object.keys(y.frm.accessories.optionals)),y.frm.optionsKeys=r?r.replace(/[\[\]"]+/g,""):"")))},y.getDrives=function(){var a,e=y.vehicle.models,i=y.frm.model;return C.forEach(e,function(e,t){e.key===i&&C.forEach(e.drive,function(e,t){return a=e,!1})}),void 0!==a&&(0===a.length?y.displayDrive=!1:y.displayDrive=!0),a},y.getColorTrim=function(){var a,e=y.vehicle.models,i=y.frm.model;return C.forEach(e,function(e,t){if(e.key===i)return e.colortrim&&delete e.colortrim.label,a=e.colortrim,!1}),a},y.getAccessories=function(){var a,e=y.vehicle.models,i=y.frm.model;return C.forEach(e,function(e,t){if(e.key===i)return e.accessories&&delete e.accessories.label,a=e.accessories,"ZAF"==c&&void 0!==a&&void 0!==a.optionals&&void 0!==a.optionals.items&&C.forEach(a.optionals.items,function(e,t){e.featureKey=e.featureKey.replace('"',"").replace("'","")}),!1}),a},y.getOptionPackages=function(){var a,e=y.vehicle.models,i=y.frm.model;return C.forEach(e,function(e,t){if(e.key===i)return e.optionPackage&&delete e.optionPackage.label,a=e.optionPackage,!1}),a},y.initAccordion=function(e){g(".nav-title-wrapper a").off("click.accordion"),P.buildandprice.accordionEvents(),y.fireAnalytics(e),A(100)},y.priceFormat=function(e,t,a,i,n){var o="",r="",l="",l=t&&""!==t?t:getSymbolByMKTconfig(y.currencyFormatPattern),t=getSymbolPosition(y.currencyFormatPattern);return e||d||s?(e=updatePriceFormat(e,"IND"==c?y.currencyFormatPattern.substring(1):y.currencyFormatPattern),void 0!==i&&0!=i&&(r=void 0!==n&&0!=n?i.replace(n,""):i),o=void 0!==a&&0!=a?e:"after"===t?e+" "+l:l+" "+e,d&&s&&0==parseInt(e)&&"nozero"!=n&&(o=s,r=""),"IND"==c?(r+o).replace(/,/g," "):r+o):"after"===t?"0 "+l:l+" 0"};p=0;function f(){"left"==(g("html.rtl").length?"right":"left")?g(".build-and-price .slide-menu").animate({left:"-305px"},700):g(".build-and-price .slide-menu").animate({right:"-305px"},700)}y.hideOptionPackages=function(e,t,a){e=String(e),t=String(t),a=String(a);return"optionals"!=e||"true"!=t||"true"!=a},y.hideAccessories=function(e,t,a){0!==g(".build-and-price-refactored").length&&(0==g("#accessories.secondary-nav-controls .content ul li").length?y.showAccessories=!1:y.showAccessories=!0,0==g("#optionsPackage.secondary-nav-controls .content .optionalPackagesItem").length?y.showOptionals=!1:y.showOptionals=!0);var e=String(e),t=String(t),a=String(a),i=!0;return i="optionals"==e&&"true"==t&&"true"==a&&(e=y.getAccessories())&&1==Object.keys(e).length&&e.optionals?!1:i},y.updateColorTrim=function(e,t){d&&0==t&&setTimeout(function(){h(t,4,e)},700)},y.updateDrive=function(){d&&setTimeout(function(){h("",2,"drive")},100)},y.selectedItems=[],y.selectedItems.exteriorsel=[],y.selectedItems.interiorsel=[],y.selectedItems.drivesel=[],y.updateSelectedCost=function(e,t,a){switch(y.count=0,e){case"drive":y.selectedItems.drivesel.ckey=t,y.selectedItems.drivesel.cost=a;break;case"exterior":y.selectedItems.exteriorsel.ckey=t,y.selectedItems.exteriorsel.cost=a;break;case"interior":y.selectedItems.interiorsel.ckey=t,y.selectedItems.interiorsel.cost=a}},y.updatePrice=function(e,t,a,i,n,o){var r=0,l="",l="exterior"==t?"color":"interior"==t?"trim":t,o=(!o&&y.optionPackages&&y.optionPackagesAU&&setTimeout(function(){g('#optionsPackage input[name="form-'+l+'"]').prop("checked",!1)},1e3),"drive"==t&&(y.frm.driveCost=e),d&&(m[t]=+e,p||m.exterior||m.interior||m.optionals)&&"model"!=t&&(m[t]=e,"drive"!=t&&p||m.exterior||m.interior||m.optionals)&&(optionals=m.optionals+m.exterior+m.interior,setTimeout(function(){h(optionals,4,t)},500)),y.totalPrice),s="included"==e?0:e,e=0,c=0;switch(t){case"model":C.forEach(y.vehicle.models,function(e,t){e.key==y.frm.model&&(c="included"==e.price?0:e.price,y.fireAnalytics(y.analytics.category.model,"model",e.key))}),void 0!==a&&0!=a&&(y.modelLabel=a);break;case"drive":C.forEach(y.vehicle.models,function(e,t){e.key==y.frm.model&&C.forEach(e.drive.items,function(e,t){e.featureKey==y.frm.drive&&(s=void 0!==y.selectedItems.drivesel.cost?y.selectedItems.drivesel.cost:0,c=i.cost,y.selectedItems.drivesel.ckey=e.featureKey,y.selectedItems.drivesel.cost=e.cost,c="included"==e.cost?0:e.cost,y.fireAnalytics(y.analytics.category.drive,"drive",e.featureKey))})});break;case"exterior":C.forEach(y.vehicle.models,function(e,t){var a;e.key==y.frm.model&&(a=y.selectedItems.exteriorsel.ckey,C.forEach(e.colortrim.color.items,function(e,t){!0===e.isDefault&&e.featureKey===a&&(r=e.cost),e.featureKey==y.frm.colortrim.exterior&&(s=void 0!==y.selectedItems.exteriorsel.cost?y.selectedItems.exteriorsel.cost:0,c=e.cost,y.selectedItems.exteriorsel.ckey=e.featureKey,y.selectedItems.exteriorsel.cost=e.cost,y.frm.colortrim.extCarousel=e.carouselImage,y.fireAnalytics(y.analytics.category.colortrim,y.analytics.subcat.ext,e.featureKey))}))});break;case"interior":C.forEach(y.vehicle.models,function(e,t){e.key==y.frm.model&&C.forEach(e.colortrim.trim.items,function(e,t){e.featureKey==y.frm.colortrim.interior&&(s=void 0!==y.selectedItems.interiorsel.cost?y.selectedItems.interiorsel.cost:0,c=e.cost,y.selectedItems.interiorsel.ckey=e.featureKey,y.selectedItems.interiorsel.cost=e.cost,y.frm.colortrim.intCarousel=e.carouselImage,y.fireAnalytics(y.analytics.category.colortrim,y.analytics.subcat.interior,e.featureKey))})})}s=parseInt(s),c=parseInt(c),r=parseInt(r),0==s&&0==c?e=0:0<s&&0==c?e=0-s:0==s&&0<c?e=c:0!=s&&0!=c&&(e=c-s),y.totalPrice=parseInt(o)+parseInt(e),e.toString().startsWith("-")||0!==y.count||0!=s||(y.totalPrice=y.totalPrice-parseInt(r),y.count=1)},y.setBasePrice=function(e){y.basePrice=parseInt(Math.round(e))},y.setTotalPrice=function(e){y.totalPrice=y.totalPrice+parseInt(Math.round(e))},y.switchTab=function(e,t){y.currentTab=e,"interior"===y.currentTab?(g(".viewport-controller-pane").attr("id","tab-int"),t&&y.fireAnalytics(y.analytics.category.colortrim,y.analytics.subcat.interior)):(g(".viewport-controller-pane").attr("id","tab-ext"),t&&y.fireAnalytics(y.analytics.category.colortrim,y.analytics.subcat.ext)),$(y.currentTab,g(".viewport-carousel#"+y.currentTab))},y.accordionActiveTabName=0,y.triggerAccordionTab=function(e,t){t.preventDefault(),y.accordionActiveTabName===e?y.accordionActiveTabName=null:y.accordionActiveTabName=e},y.fireAnalytics=function(e,t,a){k&&(e&&t&&a?k.getBuildAndPriceBuildEvents().menu(e,t,a):e&&t?k.getBuildAndPriceBuildEvents().menu(e,t):e&&k.getBuildAndPriceBuildEvents().menu(e))},y.toggleMenu=function(e){g(".build-and-price .overlay").fadeToggle(),"open"===e?"left"==(g("html.rtl").length?"right":"left")?g(".build-and-price .slide-menu").animate({left:"0px"},700):g(".build-and-price .slide-menu").animate({right:"0px"},700):"close"===e?f():"overlay-startBuild"===e?(g(".overlay-startBuild").show(300),g(".overlay").show(300)):"close-startBuild"===e?(g(".overlay-startBuild").hide(),g(".overlay").hide(300),f()):"open-exitConfig"===e?(g(".overlay-exitConfig").show(300),g(".overlay").show(300)):"close-exitConfig"===e?(g(".overlay-exitConfig").hide(),g(".overlay").hide(300),f()):"open-changeVehicle"===e?(g(".overlay-changeVehicle").show(300),g(".overlay").show(300)):"close-changeVehicle"===e?(g(".overlay-changeVehicle").hide(),g(".overlay").hide(300),f()):"startBuild"===e?(g(".overlay").hide(300),g(".overlay-startBuild").hide(),f(),y.initResultsObj()):"reviewSave"===e&&(f(),y.reviewAndSave())},g(".panel-price .price .priceDrop").on("click",function(){var e=g(this).closest(".panel-price");e.toggleClass("active"),e.hasClass("active")&&k.getBuildAndPriceBuildEvents().price()}),y.modelPrefix="model-item-",y.drivePrefix="drive-item-",y.colortrimPrefix="colortrim-item-",y.accessoriesPrefix="accessories-item-",y.optionPackagesPrefix="optionals-item-",y.showExtaInfo=function(e,t,a){void 0!==a&&a.preventDefault();var a=".infoball-content-wrap",i=".infoball-item",n=a+" ."+(e=e.toString())+(t=t.toString()),o=(g(n).find(".infoball-nav"),g(n).find(".prev-item")),r=g(n).prev(i).find(".feature-name"),l=g(n).find(".next-item"),s=g(n).next(i).find(".feature-name");return g(a+" "+i).removeClass("active"),"MEX"!=c&&"BRA"!=c&&"VEN"!=c||(g(a).find("a.add-btn").css("display","none"),g(a).find("a.added-btn").css("display","none")),g(n).hasClass("first-item last-item")?g(n).addClass("nav-disabled"):g(n).hasClass("first-item")?s.length?(g(n).removeClass("nav-disabled"),o.addClass("disabled").find(".name").html(""),l.removeClass("disabled").find(".name").html(s.text())):g(n).addClass("nav-disabled"):g(n).hasClass("last-item")?r.length?(g(n).removeClass("nav-disabled"),l.addClass("disabled").find(".name").html(""),o.removeClass("disabled").find(".name").html(r.text())):g(n).addClass("nav-disabled"):(g(n).removeClass("nav-disabled"),o.removeClass("disabled").find(".name").html(r.text()),l.removeClass("disabled").find(".name").html(s.text())),g("#"+e+t).is(":checked")?g(n).addClass("option-selected"):g(n).removeClass("option-selected"),P.buildandprice.setInfoPaddingBottom(n),g("body").addClass("infoball-modal-active"),g(n).addClass("active").closest(a).addClass("active"),P.buildandprice.changeBtn(),y.fireAnalytics("info"),!1},y.removeOption=function(e,t,a){return void 0!==t&&t.preventDefault(),1==a?(e=e.toString(),g("#"+e).prop("checked",!1),g(".infoball-item."+e).removeClass("option-selected")):y.hideExtaInfo(),!1},y.hideExtaInfo=function(e){return void 0!==e&&e.preventDefault(),g(".infoball-content-wrap .infoball-item").removeClass("active"),g(".infoball-content-wrap").removeClass("active"),g("body").removeClass("infoball-modal-active"),!1},y.getSuffix=function(){var e="";return e=-1<window.location.href.indexOf("wcmmode")?"&wcmmode=disabled":e},y.linkSuffix=y.getSuffix(),y.pushUrlHashForOverlay=function(i,n,o,r,l,s){setTimeout(function(){var e,t="",a=window.location.href;return e=d?"Model="+i+"&Series="+n+"&engine="+o+"&exteriorColor="+r+"&interiorColor="+l+"&options="+s:"Model="+i+"&Series="+n,-1<a.indexOf("#")?(t=a.split("#")[1],!1!==S.byNameInHash("Model")&&(t=S.removeParam("Model",t)),!1!==S.byNameInHash("Series")&&(t=S.removeParam("Series",t)),!1!==S.byNameInHash("engine")&&(t=S.removeParam("engine",t)),!1!==S.byNameInHash("exteriorColor")&&(t=S.removeParam("exteriorColor",t)),!1!==S.byNameInHash("interiorColor")&&(t=S.removeParam("interiorColor",t)),-1<(t=!1!==S.byNameInHash("options")?S.removeParam("options",t):t).indexOf("?")?window.location.hash=t+"&"+e:window.location.hash=t+"?"+e):window.location.hash="?"+e},500)},y.sortBy=function(e){y.reverse=y.propertyName===e&&!y.reverse,y.propertyName=e},y.closeFullscr=function(){document.getElementById("fullScr").style.width="0%",A(100)},y.openFullscr=function(e){var t;["exterior","interior"].includes(e)&&((t=g("#"+e).data("flexslider"))?(t=t.currentSlide,y.imgNowsrc=g("#"+e+" .flex-viewport .slides div:nth-child("+(t+=1)+")").find("img").attr("data-billboard-img")):y.imgNowsrc=g(".viewport-content  .slides img:visible").attr("data-billboard-img"),document.getElementById("fullScr").style.width="100%",k.getBuildAndPriceBuildEvents().gallery(e,"expand"),A(100))},y.reviewAndSave=function(){w.attr("style",b);y.apiUrl;var a,i,n,o="",r="",l="",s="",c="",d="",u="",p=y.locationNew,m=y.nameplate,h=y.totalPrice,f=y.usageType,g=y.vehicle.year,v=encodeURIComponent(encodeURIComponent(y.vehicle.categoryName?y.vehicle.categoryName.replace(/ /g,"_"):""));C.forEach(y.frm,function(e,t){a=y.frm.model,null!=(o=y.frm.drive||"")&&void 0!==o&&"null"!=o&&"undefined"!=o||(o=""),i=y.frm.colortrim.exterior,n=y.frm.colortrim.interior,r=JSON.stringify(Object.keys(y.frm.accessories.exterior)),l=JSON.stringify(Object.keys(y.frm.accessories.interior)),s=JSON.stringify(Object.keys(y.frm.accessories.optionals)),c=JSON.stringify(Object.keys(y.frm.accessories.specifications)),d=JSON.stringify(Object.keys(y.frm.accessories.utilitySafety)),u=JSON.stringify(Object.keys(y.frm.accessories.multimedia)),y.sendURL="l="+p+"&u="+f+"&n="+m+"&m="+a+"&d="+o+"&e="+i+"&t="+n+"&y="+g+"&vc="+v+"&p="+h+"&ae="+r.replace(/[\[\]"]+/g,"")+"&ai="+l.replace(/[\[\]"]+/g,"")+"&ao="+s.replace(/[\[\]"]+/g,"")+"&as="+c.replace(/[\[\]"]+/g,"")+"&au="+d.replace(/[\[\]"]+/g,"")+"&am="+u.replace(/[\[\]"]+/g,"")})},C.element(document).ready(function(){y.modelChanged=function(e,t,a){y.selectedItems.exteriorsel=[],y.selectedItems.interiorsel=[],y.selectedItems.drivesel=[],void(p=0)!==t&&0!=t&&(y.frm.model=t),void 0!==a&&0!=a&&(a=a.toString(),g("#"+a).prop("checked",!0)),e.colortrim&&(e.colortrim.color&&e.colortrim.color.items&&e.colortrim.color.items.length&&(y.frm.colortrim.extCarousel=e.colortrim.color.items[0].carouselImage),e.colortrim.trim)&&e.colortrim.trim.items&&e.colortrim.trim.items.length&&(y.frm.colortrim.intCarousel=e.colortrim.trim.items[0].carouselImage),y.rebuildFormData(e),y.$broadcast("onModelUpdate"),y.viewportImagesExt(),y.viewportImagesInt()},y.ctMapping=function(o){y.showTrim=[],C.forEach(y.ctmap,function(e,t){if(o===e.cid)for(var a=e.tid,i=0;i<a.length;i++){var n=a[i];y.showTrim.push(n)}})},y.trimFilter=function(e){return-1!=y.showTrim.indexOf(e.id)||0==y.showTrim.length},y.colorChanged=function(e,t,a,i,n){void 0!==a&&0!=a&&("extCarousel"==e&&(y.frm.colortrim.exterior=a),"intCarousel"===e)&&(y.frm.colortrim.interior=a),y.frm.colortrim[e]=t,g(".flex-viewport .slides .flex-active-slide").find("img").removeData(),g("ul.slides").removeAttr("style"),void 0!==i&&0!=i&&""!==i?(y.viewportImagesExt(i),y.viewportImagesInt(i),y.modelImgUrl=i):(y.viewportImagesExt(),y.viewportImagesInt()),"ZAF"==c&&setTimeout(function(){D.getPaymentData()},500)},y.slidesExt=[],y.slidesInt=[],y.$watch("frm.colortrim.exterior",function(e,t){y.viewportImagesExt()}),y.$watch("frm.colortrim.interior",function(e,t){y.viewportImagesInt()}),y.viewportImagesExt=function(e){var t=e?e:"";if(y.frm.colortrim.extCarousel){for(var a=[],i=1;i<=y.extCarouselSize;i++)a[i-1]={image:y.frm.colortrim.extCarousel.replace("{INDEX}",i),bbImg:""===t?y.frm.colortrim.extCarousel.replace("{INDEX}",i):t};y.slidesExt=a,$(y.tabs[0].id,g(".viewport-carousel#"+y.tabs[0].id))}},y.viewportImagesInt=function(e){var t=e?e:"";if(y.frm.colortrim.intCarousel){for(var a=[],i=1;i<=y.intCarouselSize;i++)a[i-1]={image:y.frm.colortrim.intCarousel.replace("{INDEX}",i),bbImg:""===t?y.frm.colortrim.intCarousel.replace("{INDEX}",i):t};y.slidesInt=a,$(y.tabs[1].id,g(".viewport-carousel#"+y.tabs[1].id))}},y.trimData=function(e){if(e&&e.items&&0<e.items.length)for(var t,a=0;a<e.items.length;a++)e.items[a].featureName&&(t=e.items[a].featureName,e.items[a].featureName=t.toString().replace(/^\s+|\s+$/g,"")),e.items[a].cost&&(t=e.items[a].cost,e.items[a].cost=parseFloat(t))}}),e.onload=function(){"AUS"==c&&(t=g.cookie("common.location.LOC"),e=g.cookie("common.location.type"),""==t||null==t||""==e||null==e||""!=y.locationNew&&""!=y.usageType||(y.locationNew=g.cookie("common.location.LOC"),y.usageType=g.cookie("common.location.type")));var e,t=y.apiUrl,a=g("input.js-featureKey-list"),i="";t=(t=(t=t.replace("{NAMEPLATE}",y.nameplate)).replace("{LOCATION}",y.locationNew)).replace("{USAGETYPE}",y.usageType),y.nameplate||(y.hasData=!1),a.length&&a.each(function(e,t){i+=g(t).val()+(e!==a.length-1?",":"")}),n.get(t,{params:{featureKeys:i}}).then(function(e){if(e.data&&e.data.models&&0!==e.data.models.length){y.hasData=!0;var t=e.data.models.length;if(e.data.models[0].attributeDisclosure&&(r=!0),0!=t){for(var a=0;a<e.data.models.length;a++)e.data.models[a].accessories&&(y.trimData(e.data.models[a].accessories.exterior),y.trimData(e.data.models[a].accessories.interior),y.trimData(e.data.models[a].accessories.optionals));C.forEach(e.data.models[0].accessories,function(){T++}),C.forEach(e.data.models[0].colortrim,function(){N++})}y.vehicle=e.data,g("#build-and-price-wrap").attr("data-view-latest-offers")&&y.loadLatestOffersData(),y.locationLabel=y.vehicle.location&&y.vehicle.location.value||y.locationLabel,y.vehicle.jsCurrencyFormat=y.vehicle.jsCurrencyFormat||{};var t=y.vehicle.jsCurrencyFormat.groupingSize||3;y.vehicle.jsCurrencyFormatRegEx=new RegExp("(\\d)(?=(\\d{"+t+"})+(?!\\d))","g"),C.forEach(y.vehicle.models,function(e,t){y.modelKey?y.vehicle.models[t].key==y.modelKey&&(y.modelLabel=y.vehicle.models[t].label,y.modelImgUrl=y.vehicle.models[t].imgUrl,void 0!==y.exteriorColorKey)&&null!=y.exteriorColorKey&&C.forEach(y.vehicle.models[t].colortrim.color.items,function(e,t){e.featureKey==y.exteriorColorKey&&(y.modelImgUrl=e.billboardImage)}):e.isDefault&&(y.modelLabel=y.vehicle.models[t].label,y.modelImgUrl=y.vehicle.models[t].imgUrl)}),null!=y.modelKey&&""!=y.modelKey&&null!=y.exteriorColorKey&&""!=y.exteriorColorKey&&null!=y.trimKey&&""!=y.trimKey&&(y.newparms=1,C.forEach(y.prs,function(e,t){y.prs.model=y.modelKey,y.prs.colortrim.exterior=y.exteriorColorKey,y.prs.colortrim.interior=y.trimKey,y.accext=[]})),null!=y.driveKey&&""!=y.driveKey&&0!=y.newparms&&(y.newparms=2,C.forEach(y.prs,function(e,t){y.prs.drive=y.driveKey})),null!=y.exteriorAccessoriesKeyList&&""!=y.exteriorAccessoriesKeyList&&0!=y.newparms&&(y.newparms=3,C.forEach(y.prs,function(e,t){y.accext=[];for(var a=y.exteriorAccessoriesKeyList.split(","),i=0;i<a.length;i++)y.prs.accessories.exterior[a[i]]=!0})),null!=y.interiorAccessoriesKeyList&&""!=y.interiorAccessoriesKeyList&&0!=y.newparms&&(y.newparms=4,C.forEach(y.prs,function(e,t){y.accint=[];for(var a=y.interiorAccessoriesKeyList.split(","),i=0;i<a.length;i++)y.prs.accessories.interior[a[i]]=!0})),null!=y.optionalAccessoriesKeyList&&""!=y.optionalAccessoriesKeyList&&0!=y.newparms&&(y.newparms=5,C.forEach(y.prs,function(e,t){y.accOpt=[];for(var a=y.optionalAccessoriesKeyList.split(","),i=0;i<a.length;i++)y.prs.accessories.optionals[a[i]]=!0})),null!=y.specificationsAccessoriesKeyList&&""!=y.specificationsAccessoriesKeyList&&0!=y.newparms&&(y.newparms=5,C.forEach(y.prs,function(e,t){y.accint=[];for(var a=y.specificationsAccessoriesKeyList.split(","),i=0;i<a.length;i++)y.prs.accessories.specifications[a[i]]=!0})),null!=y.utilitySafetyAccessoriesKeyList&&""!=y.utilitySafetyAccessoriesKeyList&&0!=y.newparms&&(y.newparms=5,C.forEach(y.prs,function(e,t){y.accutil=[];for(var a=y.utilitySafetyAccessoriesKeyList.split(","),i=0;i<a.length;i++)y.prs.accessories.utilitySafety[a[i]]=!0})),null!=y.multimediaAccessoriesKeyList&&""!=y.multimediaAccessoriesKeyList&&0!=y.newparms&&(y.newparms=5,C.forEach(y.prs,function(e,t){y.accmultimedia=[];for(var a=y.multimediaAccessoriesKeyList.split(","),i=0;i<a.length;i++)y.prs.accessories.multimedia[a[i]]=!0})),0!=y.newparms?y.initParamObj():y.initResultsObj(),I(1e3),g(".city-change").html()&&(t=g(".city-change").html().replace("{DATE}",y.frm.modelPricePublishDate).replace("{LOCATION}",y.vehicle.location&&y.vehicle.location.value||y.locationNew),g(".city-change").html(t)),k.getBuildAndPriceBuildEvents().load(y.vehicle.categoryName,y.vehicle.key,y.vehicle.year)}else y.hasData=!1},function(){y.hasData=!1})},y.loadLatestOffersData=function(){var e=g("#build-and-price-wrap").attr("data-offers-data-url");g.ajax({type:"GET",url:e,dataType:"json",async:!1,success:function(e){y.latestOffersData=e,y.addOffersUrlToVehiclesJson()}.bind(this),error:function(e){}.bind(this)})},y.addOffersUrlToVehiclesJson=function(){var e=y.vehicle.models;if(e)for(var t=0;t<e.length;t++)e[t].offersPageUrl=y.getDynamicUrl(y.vehicle.key,e[t].key)},y.getDynamicUrl=function(e,t){var a=g("#build-and-price-wrap").attr("data-latest-offers-landing-page")+"?offer=";if(e&&t)for(var i=0;i<y.latestOffersData.length;i++)if(y.latestOffersData[i].nameplateCode==e)for(var n=y.latestOffersData[i].modelDetails.length,o=0;o<n;o++)if(y.latestOffersData[i].modelDetails[o].modelCode===t&&y.verifyOfferExpiry(y.latestOffersData[i].modelDetails[o].offerExpiry)){if(!y.checkEnvURL())return a+y.latestOffersData[i].modelDetails[o].modelName;var r=g("#build-and-price-wrap").attr("data-offers-details-root");if(r)return r+"/"+y.latestOffersData[i].modelDetails[o].modelName+".html"}return""},y.checkEnvURL=function(){var e=window.location.pathname.slice(1).split("/");return 0<e[e.length-1].indexOf(".html")},y.verifyOfferExpiry=function(e){var t=new Date,e=new Date(y.parseDate(e));return e.getYear()>=t.getYear()&&e.getMonth()+1>=t.getMonth()+1&&e.getDate()>=t.getDate()},y.parseDate=function(e){e=e.split("/");return new Date(e[2],e[1]-1,e[0])},y.hideSelectOption=function(){return g("body").removeClass("active-select-option"),g(".panel-price").removeClass("active"),!1},g(".trackPaymentCalculator").click(function(){k.getSimpleEmiCalCulatorEvents().trackPaymentCalculatorButton()})}]),app.directive("checkImage",["$q",function(n){return{restrict:"A",link:function(e,i,t){t.$observe("ngSrc",function(e){var t=n.defer(),a=new Image;return a.onerror=function(){var e=window.location.href.split("/"),e=e[0]+"//"+e[2];t.resolve(!1),i.attr("src",e+"/etc/designs/guxfoap/clientlibs/guxfoap/img/noimg.png"),i.css("display","none"),g(".color-item label img").css("display","block"),g(".fullScrContent img").css("display","block")},a.onload=function(){t.resolve(!0)},a.src=e,t.promise})}}}]),app.directive("ngRepeatRange",["$compile",function(i){return{replace:!0,scope:{from:"=",to:"=",step:"="},link:function(e,t,a){a=((e,t,a)=>{for(var i=[];e+a<=t;)i[i.length]=e+=a;return i})(e.from||0,(e.to||a.ngRepeatRange)+1,e.step||1).join(",");C.element(t).attr("ng-repeat","n in ["+a+"]"),C.element(t).removeAttr("ng-repeat-range"),i(t)(e)}}}]),app.directive("setAccordionStyling",function(){function i(e,t){var a;t&&(t=(t=e).closest("ul.setThemeColor"),e=t.data("color"),a=t.find(".nav-title-wrapper a"),t.find(".nav-title-wrapper a .icon-chevron-thin-down").css({cssText:"background-color: #"+e+"; color: #ffffff ;"}),void 0===e?a.css({cssText:"border-bottom: 1px solid #fff !important"}):0===g(".build-and-price-refactored").length?a.css({cssText:"background-color: #"+e+"; color: #ffffff ; border-bottom: 1px solid #fff !important"}):a.css({cssText:"background-color: #"+e+"!important; color: #ffffff !important; border-bottom: 1px solid #fff !important"}))}return function(e,t,a){i(t,e.$last),e.$parent.$on("onModelUpdate",function(){setTimeout(function(){i(t,e.$last)},200)})}}),g("#build-and-price-wrap").each(function(e,t){C.bootstrap(t,["BuildAndPriceAngularApp"])}),o.prototype.changeBtn=function(){g(".infoball-content-wrap .action .cta-blue").on("click",function(e){return e.preventDefault(),g(this).closest(".infoball-item").addClass("option-selected"),!1})},o.prototype.setInfoPaddingBottom=function(e){g(e).find(".content-wrapper").css({"padding-bottom":g(e).find(".infoball-nav").outerHeight()+15})},o.prototype.setContainerHeights=function(){I(),g(window).on("resize",v.throttle(function(){I()},1e3)),g(window).load(function(){I(1e3)})},o.prototype.setSlideItemWidth=function(){A(),g(window).on("resize",v.throttle(function(){A()},1e3)),g(window).load(function(){A(1e3)})},o.prototype.primaryNavEvents=function(){var t=this.$primaryNav.find("a");t.on("click",function(e){e.preventDefault();var e=g(this).attr("href");g(this).hasClass("active")?g("body").addClass("active-select-option"):(t.removeClass("active"),g(this).addClass("active"),g("body").addClass("active-select-option"),e=e,g(".secondary-nav-controls").removeClass("active"),g(".secondary-nav-controls"+e).addClass("active"),I(1e3)),I()})},o.prototype.accordionEvents=function(){g(".nav-title-wrapper a").on("click.accordion",function(e){e.preventDefault();var e=g(window).width(),t=g(this).closest("li");767<e&&t.siblings("li").removeClass("active"),t.hasClass("active")?t.removeClass("active"):t.addClass("active")})},P.init=function(e){P.buildandprice=new o(e)},P}),define("build-and-price-v2/component.buildAndPriceV2",["jquery","angular","angular-route","jquery-flexslider","mediaQuery","_","angular-sanitize","analytics/analyticsEventLayer","utils/getParamValue","disclosure/component.disclosure"],function(g,k,t,a,i,v,n,y,S,x){var D={},P=((app=k.module("BuildAndPriceV2AngularApp",["ngRoute","ngSanitize"])).filter("unsafe",["$sce",function(t){return function(e){return t.trustAsHtml(e)}}]),-1),T=-1;function o(e){this.$elem=g(e),this.$primaryNav=this.$elem.find(".primary-nav-controls"),this.$secondaryNav=this.$elem.find(".secondary-nav-controls"),this.$leftContent=this.$elem.find(".left-scrolling-content"),this.$mainContent=this.$elem.find(".main-container"),this.$viewportContainer=this.$mainContent.find(".viewport-container"),this.setContainerHeights(),this.accordionEvents(),this.primaryNavEvents(),this.setSlideItemWidth(),this._mobileResolution=767,this._$buttonsToolbar=g(".primary-nav-controls"),this._stickyTollbarClassName="is-toolbar-sticky",this._listen()}function N(e){var t=".build-and-price-v2 .main-container .viewport-carousel",a=".build-and-price-v2 .main-container .viewport-carousel .slide";g(a).length&&(void 0!==e&&!isNaN(e)&&0<e?(g(t).addClass("change-image"),setTimeout(function(){g(a).width(g(t).first().width()),g(t).removeClass("change-image")},e)):g(a).width(g(t).first().width()))}function A(e){var t,a=".build-and-price-v2 .left-scrolling-content",i=".build-and-price-v2 .left-scrolling-content #colorandtrim ul li .content",n=".build-and-price-v2 .left-scrolling-content #accessories ul li .content";g(a).length&&g(".build-and-price-v2 .main-container").length&&(g(a).css("height","auto"),767<g(window).width()?setTimeout(function(){g(a).css({height:"720px",overflow:"auto"}),g("body").removeClass("no-scroll"),g(".build-and-price-v2 .left-scrolling-content #bundle ul li .content").css("height","635px"),g(".build-and-price-v2 .left-scrolling-content #model ul li .content").css("height","635px"),g(".build-and-price-v2 .left-scrolling-content #drive ul li .content").css("height","635px"),2==T&&g(i).css("height","550px"),1==T&&g(i).css("height","635px"),3==P&&g(n).css("height","465px"),2==P&&g(n).css("height","550px"),1==P&&g(n).css("height","635px")},e):(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||(g(a).css({height:"720px",overflow:"visible"}),g("body").hasClass("active-select-option")?g("body").addClass("no-scroll"):g("body").removeClass("no-scroll"),2==T&&g(i).css("height","400px"),1==T&&g(i).css("height","485px"),3==P&&g(n).css("height","315px"),2==P&&g(n).css("height","400px"),1==P&&g(n).css("height","485px")),t=g(window).height()+25,void 0!==e&&!isNaN(e)&&0<e?setTimeout(function(){g(a).css("height",t)},e):g(a).css("height",t)))}function I(e,t,a){void 0!==a&&0==a?N():N(1e3),t.flexslider({selector:".slides > .slide",animation:"slide",directionNav:!1,slideshow:!1,animationLoop:!1,minItems:1,maxItems:1,move:1,after:function(){y.getBuildAndPriceBuildEvents().gallery(e,"carousel scroll")}})}return app.controller("BuildPriceV2AppController",["$scope","$http","$window",function(b,n,e){var w,o,t=new URL(e.location),c=(b.urlParams=v.object(v.compact(v.map(t.search.slice(1).split("&"),function(e){if(e)return v.map(e.split("="),function(e){return decodeURIComponent(e)})}))),b.AAComplianceTab=function(e=!1){var t=document.querySelectorAll("[ng-click]");for(let e=0;e<t.length;e++){var a=t[e].getAttribute("ng-click");t[e].setAttribute("ng-keypress","keyPress($event, `"+a+"`)"),t[e].setAttribute("tabindex","0")}e&&(Array.from(document.querySelectorAll(".category-inner a")).forEach(e=>{e.removeAttribute("tabindex")}),(e=Array.from(document.querySelectorAll("[tabindex]"))).sort((e,t)=>e.compareDocumentPosition(t)===Node.DOCUMENT_POSITION_FOLLOWING?-1:1),e.forEach((e,t)=>{e.tabIndex=t+1}))},b.AAComplianceTab(),b.keyPress=function(e,t){13===e.which&&b[t]()},g("#countryCodeISO").attr("value")),C=g(".flex-viewport .slides .slide"),t=g("#build-and-price-v2-wrap"),d=t.attr("data-fetch-from-polk"),s=t.attr("data-remove-zero-price"),a=!1,r=!1,l=t.attr("data-domain-sl"),u=(t.attr("data-usage-type"),t.attr("data-env-type")),p=(g(".city-change").attr("data-locationlabel"),0),m={exterior:0,interior:0,optionals:0},i=(b.hasLoadedRequest=!0,b.nameplate=b.urlParams.n,b.nameplateKey=b.urlParams.n,b.locationNew=b.urlParams.l||"_",b.locationLabel=b.locationNew,b.usageType=b.urlParams.u,b.modelKey=b.urlParams.m,b.driveKey=b.urlParams.d,b.exteriorColorKey=b.urlParams.e,b.trimKey=b.urlParams.t,b.exteriorAccessoriesKeyList=b.urlParams.ae,b.interiorAccessoriesKeyList=b.urlParams.ai,b.optionalAccessoriesKeyList=b.urlParams.ao,b.specificationsAccessoriesKeyList=b.urlParams.as,b.utilitySafetyAccessoriesKeyList=b.urlParams.au,b.multimediaAccessoriesKeyList=b.urlParams.am,b.nameplateCrmId="",b.showTrim=[],b.validationLocation=g('input[name="validationZone"]').val(),b.ValidationAccesories=g("input[name='shortNameGeo']").val(),b.country=g("input[name='countryAccessories']").val(),b.vehicle=[],b.totalPrice=0,b.basePrice=0,b.currency=getSymbolByMKTconfig(),b.currencyFormatPattern=g("#currencyFormatPattern").val(),b.selectedItems=[],b.sendURL=[],b.modelLabel="",b.modelImgUrl="/etc/designs/guxfoap/clientlibs/guxfoap/img/car-grayscale.png",b.newparms=0,b.auMarket=!1,b.hasData=!0,b.hasDrives=!1,b.hasColortrim=!1,b.hasColortrimExterior=!1,b.hasColortrimInterior=!1,b.hasAccessories=!1,b.hasLoaded=!1,b.priceReplaceKey="{PRICE}",b.currentTab="exterior",b.analytics={category:{model:"Models",drive:"Drive",colortrim:"Color & Trim",accessories:"Accessories"},subcat:{interior:"interior",ext:"exterior",opt:"optionals",utilsafety:"utility-safety",specs:"specifications",media:"multimedia"}},b.frm={vehicle:null,model:null,modelCrmId:null,modelName:null,modelPricePublishDate:"",drive:null,driveName:null,optionsKeys:null,optionPackage:{},colortrim:{exterior:null,interior:null,exteriorName:null,interiorName:null,extCarousel:null,intCarousel:null},accessories:{exterior:{},interior:{},optionals:{},specifications:{},utilitySafety:{},multimedia:{}}},b.ctmap=[],b.prs={model:null,drive:null,colortrim:{exterior:null,interior:null},accessories:{exterior:{},interior:{},optionals:{},specifications:{},utilitySafety:{},multimedia:{}}},b.onClickTab=function(e){b.currentTab=e.id,"interior"===b.currentTab?g(".viewport-controller-pane").attr("id","tab-int"):g(".viewport-controller-pane").attr("id","tab-ext"),I(b.currentTab,g(".viewport-carousel#"+b.currentTab),!1)},b.isActiveTab=function(e){return e===b.currentTab},b.initResultsObj=function(){b.frm.vehicle=b.vehicle.key,b.nameplateCrmId=b.vehicle.crmId||"",b.hasDrives=!1,b.hasColortrim=!1,b.hasColortrimExterior=!1,b.hasColortrimInterior=!1,b.hasAccessories=!1,k.forEach(b.vehicle.models,function(e,t){if(e.extfeature&&k.forEach(e.extfeature,function(e,t){e={cid:e.modelFeatureID,tid:e.subModelFeatureID};b.ctmap.push(e)}),e.optionPackage&&e.optionPackage.optionals&&k.forEach(e.optionPackage.optionals.items,function(e,t){e.cost=e.cost?parseFloat(e.cost):0}),!0===e.isDefault)return b.frm.model=e.key,b.frm.modelName=e.label,b.frm.modelPricePublishDate=e.pricePublishDate||"",b.frm.modelCrmId=e.crmId||"",b.totalPrice=0,b.setTotalPrice(e.price),b.setBasePrice(e.price),"true"===g('input[name="validationZone"]').val()?(b.totalPrice=0,b.setTotalPrice(e.zone0StartingPrice),b.setBasePrice(e.zone0StartingPrice)):(b.totalPrice=0,b.setTotalPrice(e.price),b.setBasePrice(e.price)),e.drive&&(k.forEach(e.drive.items,function(e,t){if(!0===e.isDefault)return b.frm.drive=e.featureKey,b.frm.driveName=e.featureName,b.frm.driveCost=e.cost,b.setTotalPrice(e.cost),!1}),b.hasDrives=!0),e.colortrim&&(e.colortrim.color&&(k.forEach(e.colortrim.color.items,function(e,t){if(!0===e.isDefault)return b.ctMapping(e.id),b.frm.colortrim.exterior=e.featureKey,b.frm.colortrim.exteriorName=e.featureName,b.frm.colortrim.colorid=e.id,b.frm.colortrim.extCarousel=e.carouselImage,b.setTotalPrice(e.cost),d&&(m.exterior=e.cost),!1}),b.hasColortrim=!0,b.hasColortrimExterior=!0,b.viewportImagesExt()),e.colortrim.trim?(k.forEach(e.colortrim.trim.items,function(e,t){if(!0===e.isDefault)return b.frm.colortrim.interior=e.featureKey,b.frm.colortrim.interiorName=e.featureName,b.frm.colortrim.trimid=e.id,b.frm.colortrim.intCarousel=e.carouselImage,b.setTotalPrice(e.cost),d&&(m.interior=e.cost),!1}),b.hasColortrim=!0,b.hasColortrimInterior=!0,b.viewportImagesInt()):setTimeout(function(){b.viewportImagesExt()},200)),e.accessories&&(e.accessories.exterior&&(k.forEach(e.accessories.exterior.items,function(e,t){e.cost=e.cost?parseFloat(e.cost):0,!0===e.isDefault&&(b.frm.accessories.exterior[e.featureKey]=!0,b.setTotalPrice(e.cost))}),b.hasAccessories=!0),e.accessories.interior&&(k.forEach(e.accessories.interior.items,function(e,t){e.cost=e.cost?parseFloat(e.cost):0,!0===e.isDefault&&(b.frm.accessories.interior[e.featureKey]=!0,b.setTotalPrice(e.cost))}),b.hasAccessories=!0),e.accessories.optionals&&(k.forEach(e.accessories.optionals.items,function(e,t){e.cost=e.cost?parseFloat(e.cost):0,!0===e.isDefault&&(b.frm.accessories.optionals[e.featureKey]=!0,b.setTotalPrice(e.cost))}),b.hasAccessories=!0),e.accessories.specifications&&(k.forEach(e.accessories.specifications.items,function(e,t){e.cost=e.cost?parseFloat(e.cost):0,!0===e.isDefault&&(b.frm.accessories.specifications[e.featureKey]=!0,b.setTotalPrice(e.cost))}),b.hasAccessories=!0),e.accessories.utilitySafety&&(k.forEach(e.accessories.utilitySafety.items,function(e,t){e.cost=e.cost?parseFloat(e.cost):0,!0===e.isDefault&&(b.frm.accessories.utilitySafety[e.featureKey]=!0,b.setTotalPrice(e.cost),console.log("Accesories 1"))}),b.hasAccessories=!0),e.accessories.multimedia)&&(k.forEach(e.accessories.multimedia.items,function(e,t){e.cost=e.cost?parseFloat(e.cost):0,!0===e.isDefault&&(b.frm.accessories.multimedia[e.featureKey]=!0,b.setTotalPrice(e.cost))}),b.hasAccessories=!0),!1}),b.hasLoaded=!0},b.initParamObj=function(){b.frm.vehicle=b.vehicle.key;var i=0,n=0;b.hasDrives=!1,b.hasColortrim=!1,b.hasColortrimExterior=!1,b.hasColortrimInterior=!1,b.hasAccessories=!1,k.forEach(b.vehicle.models,function(e,t){if(e.key===b.prs.model)return b.frm.model=e.key,b.frm.modelName=e.label,b.frm.modelPricePublishDate=e.pricePublishDate||"",b.frm.modelCrmId=e.crmId||"",b.totalPrice=0,b.setTotalPrice(e.price),b.setBasePrice(e.price),e.drive&&(k.forEach(e.drive.items,function(e,t){if(e.featureKey===b.prs.drive)return b.frm.drive=e.featureKey,b.frm.driveName=e.featureName,b.frm.driveCost=e.cost,b.setTotalPrice(e.cost),!1}),b.hasDrives=!0),e.colortrim&&(e.colortrim.color&&(k.forEach(e.colortrim.color.items,function(e,t){if(e.featureKey===b.prs.colortrim.exterior)return b.frm.colortrim.exterior=e.featureKey,b.frm.colortrim.exteriorName=e.featureName,b.frm.colortrim.colorid=e.id,b.frm.colortrim.extCarousel=e.carouselImage,b.setTotalPrice(e.cost),i+=parseInt(e.cost),!1}),b.hasColortrim=!0,b.hasColortrimExterior=!0,b.viewportImagesExt()),e.colortrim.trim?(k.forEach(e.colortrim.trim.items,function(e,t){if(e.featureKey===b.prs.colortrim.interior)return b.frm.colortrim.interior=e.featureKey,b.frm.colortrim.interiorName=e.featureName,b.frm.colortrim.trimid=e.id,b.frm.colortrim.intCarousel=e.carouselImage,b.setTotalPrice(e.cost),i+=parseInt(e.cost),!1}),b.hasColortrim=!0,b.hasColortrimInterior=!0,b.viewportImagesInt()):setTimeout(function(){b.viewportImagesExt()},200)),e.accessories&&(e.accessories.exterior&&(k.forEach(e.accessories.exterior.items,function(e,t){for(var a in e.isDefault=!1,b.prs.accessories.exterior)e.featureKey===a&&(b.frm.accessories.exterior[e.featureKey]=!0,e.isDefault=!0,e.cost=e.cost?parseFloat(e.cost):0,b.setTotalPrice(e.cost),n+=parseInt(e.cost))}),b.hasAccessories=!0),e.accessories.interior&&(k.forEach(e.accessories.interior.items,function(e,t){for(var a in e.isDefault=!1,b.prs.accessories.interior)e.featureKey===a&&(b.frm.accessories.interior[e.featureKey]=!0,e.isDefault=!0,e.cost=e.cost?parseFloat(e.cost):0,b.setTotalPrice(e.cost),n+=parseInt(e.cost))}),b.hasAccessories=!0),e.accessories.optionals&&(k.forEach(e.accessories.optionals.items,function(e,t){for(var a in e.isDefault=!1,b.prs.accessories.optionals)e.featureKey===a&&(b.frm.accessories.optionals[e.featureKey]=!0,e.isDefault=!0,e.cost=e.cost?parseFloat(e.cost):0,b.setTotalPrice(e.cost),i+=parseInt(e.cost))}),b.hasAccessories=!0),e.accessories.specifications&&(k.forEach(e.accessories.specifications.items,function(e,t){for(var a in e.isDefault=!1,b.prs.accessories.specifications)e.featureKey===a&&(b.frm.accessories.specifications[e.featureKey]=!0,e.isDefault=!0,e.cost=e.cost?parseFloat(e.cost):0,b.setTotalPrice(e.cost),n+=parseInt(e.cost))}),b.hasAccessories=!0),console.log("Model 03454"+JSON.stringify(e.accessories.utilitySafety)),e.accessories.utilitySafety&&(k.forEach(e.accessories.utilitySafety.items,function(e,t){for(var a in e.isDefault=!1,b.prs.accessories.utilitySafety)e.featureKey===a&&(b.frm.accessories.utilitySafety[e.featureKey]=!0,e.isDefault=!0,e.cost=e.cost?parseFloat(e.cost):0,b.setTotalPrice(e.cost),n+=parseInt(e.cost))}),b.hasAccessories=!0),e.accessories.multimedia)&&(k.forEach(e.accessories.multimedia.items,function(e,t){for(var a in e.isDefault=!1,b.prs.accessories.multimedia)e.featureKey===a&&(b.frm.accessories.multimedia[e.featureKey]=!0,e.isDefault=!0,e.cost=e.cost?parseFloat(e.cost):0,b.setTotalPrice(e.cost),n+=parseInt(e.cost))}),b.hasAccessories=!0),d&&(a=!0,h(i,0,n),setTimeout(function(){g(".panel-price .priceDropdown  ul li:first-child").remove(),g("#model .content-wrapper .sub-text").remove(),g("#model .content-wrapper .control").css("padding-top","5px")},100)),!1}),b.viewportImagesExt(),b.viewportImagesInt(),b.hasLoaded=!0},0);b.changeDisclosure=function(e){for(var t,a,i=0;i<b.vehicle.models.length;i++)k.forEach(b.vehicle.models[i],function(){b.vehicle.models[i].key==e&&(b.vehicle.models[i].key,t=b.vehicle.models[i].attributeDisclosure,a=b.vehicle.models[i].currencySup)});g(".panel-price").each(function(){priceDisPane=g(".price span .replaceDis"),a?(priceDisPane.find(".bnpDisCurrency").remove(),priceDisPane.append('<sup class="bnpDisCurrency"  tabindex="0" style="display: inline;">'+a+" </sup>")):priceDisPane.find(".bnpDisCurrency").remove(),t?(priceDisPane.find(".bnpDisData").remove(),priceDisPane.append('<sup class="bnpDisData" data-disclosure="'+t+'" tabindex="1" style="display: inline;"> </sup>')):priceDisPane.find(".bnpDisData").remove()}),x.init()};function h(e,t,a){var i=0,a=(b.hasLoadedRequest=!1,0==t?(i=parseInt(e),o=parseInt(e),p=parseInt(a),parseInt(a)):3==t?(m.optionals=0,m.exterior=0,m.interior=0,i=parseInt(e),o=parseInt(e)):i=4==t||5==t?1<=o&&o!=+m.optionals+ +m.exterior+ +m.interior?+o+ +m.optionals+ +m.exterior+ +m.interior:+m.optionals+ +m.exterior+ +m.interior:1<=o?+o+ +m.optionals+ +m.exterior+ +m.interior:+m.optionals+ +m.exterior+ +m.interior,{url:l,method:"GET",params:{modelKey:b.frm.model,accessoryPrice:p,optionPrice:i,transmissionFeatureKey:b.frm.drive,location:b.locationNew,usageType:b.usageType,env:u}});n(a).then(function(e){var t;200===e.data.returnCode&&(e=e.data.vehicle[0].driveAwayPrice,t=b.priceFormat(e,b.currency),g(".priceDropdown ul li:nth-child(3) span").html(""),g(".panel-price .price-title .price > span").html(""),setTimeout(function(){g(".priceDropdown ul .last span").html("").append(t),g(".panel-price .price-title .price > span").html("").append(t)},100)),b.hasLoadedRequest=!0},function(e){console.log(e),b.hasLoadedRequest=!0})}b.$watch("hasLoaded",function(){if(2==++i&&(g(window).trigger("buildpriceloaded"),setTimeout(function(){w=C.attr("style")},1e3)),b.validationLocation=g('input[name="validationZone"]').val(),"true"===b.validationLocation&&setTimeout(function(){g(".zonePriceBuilding").css("display","none"),g(".zonePriceYes").css("display","block"),g(".zonePriceYes").css("visibility","visible")},100),2==i&&r){for(var e,t=0;t<b.vehicle.models.length;t++)k.forEach(b.vehicle.models[t],function(){!0===b.vehicle.models[t].isDefault&&(e=b.vehicle.models[t].key,b.vehicle.models[t].attributeDisclosure,b.vehicle.models[t].currencySup)});b.changeDisclosure(e)}2==i&&d&&!a&&(h("",1,"load"),setTimeout(function(){g(".panel-price .priceDropdown  ul li:first-child").remove(),g("#model .content-wrapper .sub-text").remove(),g("#model .content-wrapper .control").css("padding-top","5px")},100)),"NZL"===c&&g(".viewport-controller-pane").addClass("au-tab"),2==i&&"AUS"===c&&(b.auMarket=!0,b.locationNew||(b.hasData=!1,g(".city-change p a").trigger("click")),g(".build-and-price-v2").each(function(){setTimeout(function(){g(".model-label h2 strong").hide()},1e3)}),g(".viewport-controller-pane").addClass("au-tab")),g('input[name="validationZone"]').on("change",function(){"true"===g('input[name="validationZone"]').val()&&g(".modelZone").each(function(){var e=g(this).find(".zonePriceBuilding").text(),t=e.search("R"),t=e.substring(0,t),a=g(this).children(".priceModelBuildZone").val(),i=b.priceFormat(a,b.currency);""!=e&&""!=a&&g(this).find(".zonePriceBuilding").text(t+" "+i),g(".zonePriceBuilding").css("display","none"),g(".zonePriceYes").css("display","block"),g(".zonePriceYes").css("visibility","visible")})})}),b.rebuildFormData=function(e){g(window).trigger("buildpricemodelchange"),b.frm={vehicle:null,model:null,modelCrmId:null,modelName:null,modelPricePublishDate:"",drive:null,colortrim:{exterior:null,interior:null,extCarousel:null,intCarousel:null},accessories:{exterior:{},interior:{},optionals:{},specifications:{},utilitySafety:{},multimedia:{}}};var t,a=0,i=0;return r&&b.changeDisclosure(e.key),b.hasDrives=!1,b.hasColortrim=!1,b.hasColortrimExterior=!1,b.hasColortrimInterior=!1,b.hasAccessories=!1,b.frm.model=e.key,b.frm.modelName=e.label,b.frm.modelPricePublishDate=e.pricePublishDate||"",b.frm.modelCrmId=e.crmId||"",b.modelImgUrl=e.imgUrl,console.log("entro"),b.totalPrice=0,b.setTotalPrice(e.price),b.setBasePrice(e.price),"true"===g('input[name="validationZone"]').val()&&(b.totalPrice=0,b.setTotalPrice(e.zone0StartingPrice),b.setBasePrice(e.zone0StartingPrice)),e.drive&&(k.forEach(e.drive.items,function(e,t){if(!0===e.isDefault)return b.frm.drive=e.featureKey,b.frm.driveName=e.featureName,b.frm.driveCost=e.cost,b.setTotalPrice(e.cost),!1}),b.hasDrives=!0),e.colortrim&&(e.colortrim.color&&(k.forEach(e.colortrim.color.items,function(e,t){if(!0===e.isDefault)return b.ctMapping(e.id),b.frm.colortrim.exterior=e.featureKey,b.frm.colortrim.exteriorName=e.featureName,b.frm.colortrim.colorid=e.id,b.frm.colortrim.extCarousel=e.carouselImage,b.setTotalPrice(e.cost),a=parseInt(e.cost),!1}),b.hasColortrim=!0,b.hasColortrimExterior=!0),e.colortrim.trim)&&(k.forEach(e.colortrim.trim.items,function(e,t){if(!0===e.isDefault)return b.frm.colortrim.interior=e.featureKey,b.frm.colortrim.interiorName=e.featureName,b.frm.colortrim.trimid=e.id,b.frm.colortrim.intCarousel=e.carouselImage,b.setTotalPrice(e.cost),i=parseInt(e.cost),!1}),b.hasColortrim=!0,b.hasColortrimInterior=!0),e.accessories&&(e.accessories.exterior&&(k.forEach(e.accessories.exterior.items,function(e,t){!0===e.isDefault&&(e.isDefault=!1)}),b.hasAccessories=!0),e.accessories.interior&&(k.forEach(e.accessories.interior.items,function(e,t){!0===e.isDefault&&(e.isDefault=!1)}),b.hasAccessories=!0),e.accessories.optionals&&(k.forEach(e.accessories.optionals.items,function(e,t){!0===e.isDefault&&(e.isDefault=!1)}),b.hasAccessories=!0),e.accessories.specifications&&(k.forEach(e.accessories.specifications.items,function(e,t){!0===e.isDefault&&(e.isDefault=!1)}),b.hasAccessories=!0),e.accessories.utilitySafety&&(k.forEach(e.accessories.utilitySafety.items,function(e,t){!0===e.isDefault&&(e.isDefault=!1)}),b.hasAccessories=!0,console.log("A1")),e.accessories.multimedia)&&(k.forEach(e.accessories.multimedia.items,function(e,t){!0===e.isDefault&&(e.isDefault=!1)}),b.hasAccessories=!0),t=a+i,d&&setTimeout(function(){h(t,3,"model")},500),!1},b.setAccessories=function(e,t,a,i,n){n=n.target.checked&&g('#optionsPackage input[featureKey="'+e.featureKey+'"]').is(":checked");d&&(b.frm.accessories[t][e.featureKey]?"optionals"===t?b.optionPackages&&b.optionPackagesAU&&n||(m.optionals-=+parseFloat(a)):b.optionPackages&&b.optionPackagesAU&&n||(p-=+a):"optionals"===t?b.optionPackages&&b.optionPackagesAU&&n||(m.optionals+=+parseFloat(a)):b.optionPackages&&b.optionPackagesAU&&n||(p+=+a)),t=t.toLowerCase(),void 0!==i&&0!=i&&(i=i.toString(),g("#"+i).prop("checked",!0)),a=parseInt(a),n&&b.optionPackages&&b.optionPackagesAU?g('#optionsPackage input[featureKey="'+e.featureKey+'"]').prop("checked",!1):(t==b.tabs[0].id?null!=b.frm.accessories.exterior[e.featureKey]?(delete b.frm.accessories.exterior[e.featureKey],"included"==a&&0==a||(b.totalPrice=b.totalPrice-parseInt(a))):(b.frm.accessories.exterior[e.featureKey]=!0,b.fireAnalytics(b.analytics.category.accessories,b.analytics.subcat.ext,e.featureKey),"included"==a&&0==a||(b.totalPrice=b.totalPrice+parseInt(a))):t==b.tabs[1].id?null!=b.frm.accessories.interior[e.featureKey]?(delete b.frm.accessories.interior[e.featureKey],"included"==a&&0==a||(b.totalPrice=b.totalPrice-parseInt(a))):(b.frm.accessories.interior[e.featureKey]=!0,b.fireAnalytics(b.analytics.category.accessories,b.analytics.subcat.interior,e.featureKey),"included"==a&&0==a||(b.totalPrice=b.totalPrice+parseInt(a))):"specifications"==t?null!=b.frm.accessories.specifications[e.featureKey]?(delete b.frm.accessories.specifications[e.featureKey],"included"==a&&0==a||(b.totalPrice=b.totalPrice-parseInt(a))):(b.frm.accessories.specifications[e.featureKey]=!0,b.fireAnalytics(b.analytics.category.accessories,b.analytics.subcat.specs,e.featureKey),"included"==a&&0==a||(b.totalPrice=b.totalPrice+parseInt(a))):"utilitysafety"==t?null!=b.frm.accessories.utilitySafety[e.featureKey]?(delete b.frm.accessories.utilitySafety[e.featureKey],"included"==a&&0==a||(b.totalPrice=b.totalPrice-parseInt(a))):(b.frm.accessories.utilitySafety[e.featureKey]=!0,b.fireAnalytics(b.analytics.category.accessories,b.analytics.subcat.utilsafety,e.featureKey),"included"==a&&0==a||(b.totalPrice=b.totalPrice+parseInt(a))):"multimedia"==t?null!=b.frm.accessories.multimedia[e.featureKey]?(delete b.frm.accessories.multimedia[e.featureKey],"included"==a&&0==a||(b.totalPrice=b.totalPrice-parseInt(a))):(b.frm.accessories.multimedia[e.featureKey]=!0,b.fireAnalytics(b.analytics.category.accessories,b.analytics.subcat.media,e.featureKey),"included"==a&&0==a||(b.totalPrice=b.totalPrice+parseInt(a))):null!=b.frm.accessories.optionals[e.featureKey]?(delete b.frm.accessories.optionals[e.featureKey],"included"==a&&0==a||(b.totalPrice=b.totalPrice-parseInt(a))):(b.frm.accessories.optionals[e.featureKey]=!0,b.fireAnalytics(b.analytics.category.accessories,t,e.featureKey),"included"==a&&0==a||(b.totalPrice=b.totalPrice+parseInt(a))),d&&setTimeout(function(){h("",5,"accessories")},400),"optionals"===t&&(i=JSON.stringify(Object.keys(b.frm.accessories.optionals)),b.frm.optionsKeys=i?i.replace(/[\[\]"]+/g,""):""))},b.setOptionPrices=function(e,t,a,i,n){var o=n.target.checked&&g('input[featureKey="'+e.featureKey+'"]').not('#optionsPackage input[featureKey="'+e.featureKey+'"]').is(":checked"),r="";"color"==(t=(t=t.toLowerCase()).replace("optional","optionals").replace("utilitysafety","utilitySafety"))||"trim"==t||"drive"==t?("color"==t?(r="exterior",setTimeout(function(){g(".color-selection-list.color-list input").prop("checked",!1)},1e3)):"trim"==t?(r="interior",setTimeout(function(){g(".color-selection-list.trim-list input").prop("checked",!1)},1e3)):"drive"==t&&(r=t,setTimeout(function(){g(".drive-list input").prop("checked",!1)},1e3)),b.updatePrice(a,r,!1,e,n,!0),"drive"==t&&b.updateDrive()):(d&&(b.frm.accessories[t][e.featureKey]?"optionals"===t?o||(m.optionals-=+parseFloat(a)):o||(p-=+a):"optionals"===t?o||(m.optionals+=+parseFloat(a)):o||(p+=+a)),a=parseInt(a),o?g('input[featureKey="'+e.featureKey+'"]').not('#optionsPackage input[featureKey="'+e.featureKey+'"]').prop("checked",!1):("exterior"==t?null!=b.frm.accessories.exterior[e.featureKey]?(delete b.frm.accessories.exterior[e.featureKey],"included"==a&&0==a||(b.totalPrice=b.totalPrice-parseInt(a))):(b.frm.accessories.exterior[e.featureKey]=!0,b.fireAnalytics(b.analytics.category.accessories,b.analytics.subcat.ext,e.featureKey),"included"==a&&0==a||(b.totalPrice=b.totalPrice+parseInt(a))):"interior"==t?null!=b.frm.accessories.interior[e.featureKey]?(delete b.frm.accessories.interior[e.featureKey],"included"==a&&0==a||(b.totalPrice=b.totalPrice-parseInt(a))):(b.frm.accessories.interior[e.featureKey]=!0,b.fireAnalytics(b.analytics.category.accessories,b.analytics.subcat.interior,e.featureKey),"included"==a&&0==a||(b.totalPrice=b.totalPrice+parseInt(a))):"specifications"==t?null!=b.frm.accessories.specifications[e.featureKey]?(delete b.frm.accessories.specifications[e.featureKey],"included"==a&&0==a||(b.totalPrice=b.totalPrice-parseInt(a))):(b.frm.accessories.specifications[e.featureKey]=!0,b.fireAnalytics(b.analytics.category.accessories,b.analytics.subcat.specs,e.featureKey),"included"==a&&0==a||(b.totalPrice=b.totalPrice+parseInt(a))):"utilitySafety"==t?null!=b.frm.accessories.utilitySafety[e.featureKey]?(delete b.frm.accessories.utilitySafety[e.featureKey],"included"==a&&0==a||(b.totalPrice=b.totalPrice-parseInt(a))):(b.frm.accessories.utilitySafety[e.featureKey]=!0,b.fireAnalytics(b.analytics.category.accessories,b.analytics.subcat.utilsafety,e.featureKey),"included"==a&&0==a||(b.totalPrice=b.totalPrice+parseInt(a))):"multimedia"==t?null!=b.frm.accessories.multimedia[e.featureKey]?(delete b.frm.accessories.multimedia[e.featureKey],"included"==a&&0==a||(b.totalPrice=b.totalPrice-parseInt(a))):(b.frm.accessories.multimedia[e.featureKey]=!0,b.fireAnalytics(b.analytics.category.accessories,b.analytics.subcat.media,e.featureKey),"included"==a&&0==a||(b.totalPrice=b.totalPrice+parseInt(a))):null!=b.frm.accessories.optionals[e.featureKey]?(delete b.frm.accessories.optionals[e.featureKey],"included"==a&&0==a||(b.totalPrice=b.totalPrice-parseInt(a))):(b.frm.accessories.optionals[e.featureKey]=!0,b.fireAnalytics(b.analytics.category.accessories,t,e.featureKey),"included"==a&&0==a||(b.totalPrice=b.totalPrice+parseInt(a))),d&&setTimeout(function(){h("",5,"accessories")},400),"optionals"===t&&(r=JSON.stringify(Object.keys(b.frm.accessories.optionals)),b.frm.optionsKeys=r?r.replace(/[\[\]"]+/g,""):"")))},b.getDrives=function(){var a,e=b.vehicle.models,i=b.frm.model;return k.forEach(e,function(e,t){e.key===i&&k.forEach(e.drive,function(e,t){return a=e,!1})}),a},b.getColorTrim=function(){var a,e=b.vehicle.models,i=b.frm.model;return k.forEach(e,function(e,t){if(e.key===i)return e.colortrim&&delete e.colortrim.label,a=e.colortrim,!1}),a},b.getAccessories=function(){var a,e=b.vehicle.models,i=b.frm.model;return k.forEach(e,function(e,t){if(e.key===i)return e.accessories&&delete e.accessories.label,a=e.accessories,!1}),a},b.getOptionPackages=function(){var a,e=b.vehicle.models,i=b.frm.model;return k.forEach(e,function(e,t){if(e.key===i)return e.optionPackage&&delete e.optionPackage.label,a=e.optionPackage,!1}),a},b.initAccordion=function(e){g(".nav-title-wrapper a").off("click.accordion"),D.buildandprice.accordionEvents(),b.fireAnalytics(e),N(100)},b.priceFormat=function(e,t,a,i,n){var o="",r="",l="",l=t&&""!==t?t:getSymbolByMKTconfig(b.currencyFormatPattern),t=getSymbolPosition(b.currencyFormatPattern);return e||d||s?(e=updatePriceFormat(e,b.currencyFormatPattern),void 0!==i&&0!=i&&(r=void 0!==n&&0!=n?i.replace(n,""):i),o=void 0!==a&&0!=a?e:"after"===t?e+" "+l:l+" "+e,d&&s&&0==parseInt(e)&&"nozero"!=n&&(o=s,r=""),r+o):"after"===t?"0 "+l:l+" 0"};p=0;function f(){"left"==(g("html.rtl").length?"right":"left")?g(".build-and-price-v2 .slide-menu").animate({left:"-305px"},700):g(".build-and-price-v2 .slide-menu").animate({right:"-305px"},700)}b.hideOptionPackages=function(e,t,a){var i=!0;return"optionals"===e&&t&&a?i=!1:heck=!0,i},b.updateColorTrim=function(e,t){d&&0==t&&setTimeout(function(){h(t,4,e)},700)},b.updateDrive=function(){d&&setTimeout(function(){h("",2,"drive")},100)},b.priceDrive=0,b.priceExt=0,b.priceInt=0,b.updatePrice=function(e,t,a,i,n,o){var r="",r="exterior"==t?"color":"interior"==t?"trim":t,o=(!o&&b.optionPackages&&b.optionPackagesAU&&setTimeout(function(){g('#optionsPackage input[name="form-'+r+'"]').prop("checked",!1)},1e3),"drive"==t&&(b.frm.driveCost=e),d&&(m[t]=+e,p||m.exterior||m.interior||m.optionals)&&"model"!=t&&(m[t]=e,"drive"!=t&&p||m.exterior||m.interior||m.optionals)&&(optionals=m.optionals+m.exterior+m.interior,setTimeout(function(){h(optionals,4,t)},500)),b.selectedItems=[],"included"==e?0:e),l=0;switch(t){case"model":k.forEach(b.vehicle.models,function(e,t){e.key==b.frm.model&&("true"===g('input[name="validationZone"]').val()?(l=e.zone0StartingPrice,b.basePrice=parseInt(l)):l="included"==e.price?0:e.price,b.fireAnalytics(b.analytics.category.model,"model",e.key))}),void 0!==a&&0!=a&&(b.modelLabel=a),b.priceDrive=0,b.priceExt=0,b.priceInt=0;break;case"drive":k.forEach(b.vehicle.models,function(e,t){e.key==b.frm.model&&k.forEach(e.drive.items,function(e,t){e.featureKey==b.frm.drive&&(l="included"==e.cost?0:e.cost,b.fireAnalytics(b.analytics.category.drive,"drive",e.featureKey))})}),b.priceDrive=l;break;case"exterior":k.forEach(b.vehicle.models,function(e,t){e.key==b.frm.model&&k.forEach(e.colortrim.color.items,function(e,t){e.featureKey==b.frm.colortrim.exterior&&(l="included"==e.cost?0:e.cost,b.frm.colortrim.extCarousel=e.carouselImage,b.fireAnalytics(b.analytics.category.colortrim,b.analytics.subcat.ext,e.featureKey))})}),b.priceExt=l;break;case"interior":k.forEach(b.vehicle.models,function(e,t){e.key==b.frm.model&&k.forEach(e.colortrim.trim.items,function(e,t){e.featureKey==b.frm.colortrim.interior&&(l="included"==e.cost?0:e.cost,b.frm.colortrim.intCarousel=e.carouselImage,b.fireAnalytics(b.analytics.category.colortrim,b.analytics.subcat.interior,e.featureKey))})}),b.priceInt=l}0==o&&0!=l?(parseInt(o),parseInt(l)):0!=o&&0==l?parseInt(o):0==o&&0==l||0!=o&&0!=l&&(parseInt(o),parseInt(l)),b.totalPrice=b.basePrice+parseInt(b.priceDrive)+parseInt(b.priceExt)+parseInt(b.priceInt)},b.setBasePrice=function(e){b.basePrice=parseInt(Math.round(e))},b.setTotalPrice=function(e){b.totalPrice=b.totalPrice+parseInt(Math.round(e))},b.switchTab=function(e,t){b.currentTab=e,"interior"===b.currentTab?(g(".viewport-controller-pane").attr("id","tab-int"),t&&b.fireAnalytics(b.analytics.category.colortrim,b.analytics.subcat.interior)):(g(".viewport-controller-pane").attr("id","tab-ext"),t&&b.fireAnalytics(b.analytics.category.colortrim,b.analytics.subcat.ext)),I(b.currentTab,g(".viewport-carousel#"+b.currentTab))},b.fireAnalytics=function(e,t,a){y&&(e&&t&&a?y.getBuildAndPriceBuildEvents().menu(e,t,a):e&&t?y.getBuildAndPriceBuildEvents().menu(e,t):e&&y.getBuildAndPriceBuildEvents().menu(e))},b.toggleMenu=function(e){g(".build-and-price-v2 .overlay").fadeToggle(),"open"===e?"left"==(g("html.rtl").length?"right":"left")?g(".build-and-price-v2 .slide-menu").animate({left:"0px"},700):g(".build-and-price-v2 .slide-menu").animate({right:"0px"},700):"close"===e?f():"overlay-startBuild"===e?(g(".overlay-startBuild").show(300),g(".overlay").show(300)):"close-startBuild"===e?(g(".overlay-startBuild").hide(),g(".overlay").hide(300),f()):"open-exitConfig"===e?(g(".overlay-exitConfig").show(300),g(".overlay").show(300)):"close-exitConfig"===e?(g(".overlay-exitConfig").hide(),g(".overlay").hide(300),f()):"open-changeVehicle"===e?(g(".overlay-changeVehicle").show(300),g(".overlay").show(300)):"close-changeVehicle"===e?(g(".overlay-changeVehicle").hide(),g(".overlay").hide(300),f()):"startBuild"===e?(g(".overlay").hide(300),g(".overlay-startBuild").hide(),f(),b.initResultsObj()):"reviewSave"===e&&(f(),b.reviewAndSave())},g(".panel-price .price .priceDrop").on("click keypress",function(e){"click"!==e.type&&"Enter"!==e.key||((e=g(this).closest(".panel-price")).toggleClass("active"),e.hasClass("active")&&y.getBuildAndPriceBuildEvents().price())}),g(".toggle-nav-content").on("click keypress",function(e){var t;"click"!==e.type&&"Enter"!==e.key||((e=g(".slide-menu")).hasClass(t="is-slide-menu-opened")?b.toggleMenu("close"):b.toggleMenu("open"),e.toggleClass(t))}),b.modelPrefix="model-item-",b.drivePrefix="drive-item-",b.colortrimPrefix="colortrim-item-",b.accessoriesPrefix="accessories-item-",b.showExtaInfo=function(e,t,a){void 0!==a&&a.preventDefault();var a=".infoball-content-wrap",i=".infoball-item",n=a+" ."+(e=e.toString())+(t=t.toString()),o=(g(n).find(".infoball-nav"),g(n).find(".prev-item")),r=g(n).prev(i).find(".feature-name"),l=g(n).find(".next-item"),s=g(n).next(i).find(".feature-name");return g(a+" "+i).removeClass("active"),"MEX"!=c&&"BRA"!=c&&"VEN"!=c||(g(a).find("a.add-btn").css("display","none"),g(a).find("a.added-btn").css("display","none")),g(n).hasClass("first-item last-item")?g(n).addClass("nav-disabled"):g(n).hasClass("first-item")?s.length?(g(n).removeClass("nav-disabled"),o.addClass("disabled").find(".name").html(""),l.removeClass("disabled").find(".name").html(s.text())):g(n).addClass("nav-disabled"):g(n).hasClass("last-item")?r.length?(g(n).removeClass("nav-disabled"),l.addClass("disabled").find(".name").html(""),o.removeClass("disabled").find(".name").html(r.text())):g(n).addClass("nav-disabled"):(g(n).removeClass("nav-disabled"),o.removeClass("disabled").find(".name").html(r.text()),l.removeClass("disabled").find(".name").html(s.text())),g("#"+e+t).is(":checked")?g(n).addClass("option-selected"):g(n).removeClass("option-selected"),D.buildandprice.setInfoPaddingBottom(n),g("body").addClass("infoball-modal-active"),g(n).addClass("active").closest(a).addClass("active"),D.buildandprice.changeBtn(),b.fireAnalytics("info"),!1},b.removeOption=function(e,t,a){return void 0!==t&&t.preventDefault(),1==a?(e=e.toString(),g("#"+e).prop("checked",!1),g(".infoball-item."+e).removeClass("option-selected")):b.hideExtaInfo(),!1},b.hideExtaInfo=function(e){return void 0!==e&&e.preventDefault(),g(".infoball-content-wrap .infoball-item").removeClass("active"),g(".infoball-content-wrap").removeClass("active"),g("body").removeClass("infoball-modal-active"),!1},b.getSuffix=function(){var e="";return e=-1<window.location.href.indexOf("wcmmode")?"&wcmmode=disabled":e},b.linkSuffix=b.getSuffix(),b.pushUrlHashForOverlay=function(i,n,o,r,l,s){setTimeout(function(){var e,t="",a=window.location.href;return e=d?"Model="+i+"&Series="+n+"&engine="+o+"&exteriorColor="+r+"&interiorColor="+l+"&options="+s:"Model="+i+"&Series="+n,-1<a.indexOf("#")?(t=a.split("#")[1],!1!==S.byNameInHash("Model")&&(t=S.removeParam("Model",t)),!1!==S.byNameInHash("Series")&&(t=S.removeParam("Series",t)),!1!==S.byNameInHash("engine")&&(t=S.removeParam("engine",t)),!1!==S.byNameInHash("exteriorColor")&&(t=S.removeParam("exteriorColor",t)),!1!==S.byNameInHash("interiorColor")&&(t=S.removeParam("interiorColor",t)),-1<(t=!1!==S.byNameInHash("options")?S.removeParam("options",t):t).indexOf("?")?window.location.hash=t+"&"+e:window.location.hash=t+"?"+e):window.location.hash="?"+e},500)},b.sortBy=function(e){b.reverse=b.propertyName===e&&!b.reverse,b.propertyName=e},b.closeFullscr=function(){document.getElementById("fullScr").style.width="0%",N(100)},b.openFullscr=function(e){var t;["exterior","interior"].includes(e)&&((t=g("#"+e).data("flexslider"))?(t=t.currentSlide,b.imgNowsrc=g("#"+e+" .flex-viewport .slides div:nth-child("+(t+=1)+")").find("img").attr("data-billboard-img")):b.imgNowsrc=g(".viewport-content  .slides img:visible").attr("data-billboard-img"),document.getElementById("fullScr").style.width="100%",y.getBuildAndPriceBuildEvents().gallery(e,"expand"),N(100))},b.reviewAndSave=function(){C.attr("style",w);b.apiUrl;var a,i,n,o,r="",l="",s="",c="",d="",u="",p="",m=b.locationNew,h=b.nameplate,f=b.totalPrice,g=b.usageType,v=b.vehicle.year,y=encodeURIComponent(encodeURIComponent(b.vehicle.categoryName?b.vehicle.categoryName.replace(/ /g,"_"):""));k.forEach(b.frm,function(e,t){a=b.frm.model,null!=(r=b.frm.drive||"")&&void 0!==r&&"null"!=r&&"undefined"!=r||(r=""),i=b.frm.colortrim.exterior,n=b.frm.colortrim.interior,o=b.frm.colortrim.interiorName,l=JSON.stringify(Object.keys(b.frm.accessories.exterior)),s=JSON.stringify(Object.keys(b.frm.accessories.interior)),c=JSON.stringify(Object.keys(b.frm.accessories.optionals)),d=JSON.stringify(Object.keys(b.frm.accessories.specifications)),u=JSON.stringify(Object.keys(b.frm.accessories.utilitySafety)),p=JSON.stringify(Object.keys(b.frm.accessories.multimedia)),b.sendURL="l="+m+"&u="+g+"&n="+h+"&m="+a+"&d="+r+"&e="+i+"&t="+n+"&y="+v+"&vc="+y+"&p="+f+"&ae="+l.replace(/[\[\]"]+/g,"")+"&ai="+s.replace(/[\[\]"]+/g,"")+"&ao="+c.replace(/[\[\]"]+/g,"")+"&as="+d.replace(/[\[\]"]+/g,"")+"&au="+u.replace(/[\[\]"]+/g,"")+"&am="+p.replace(/[\[\]"]+/g,"")+"&tn="+o})},k.element(document).ready(function(){b.modelChanged=function(e,t,a){void(p=0)!==t&&0!=t&&(b.frm.model=t),void 0!==a&&0!=a&&(a=a.toString(),g("#"+a).prop("checked",!0)),e.colortrim&&(e.colortrim.color&&e.colortrim.color.items&&e.colortrim.color.items.length&&(b.frm.colortrim.extCarousel=e.colortrim.color.items[0].carouselImage),e.colortrim.trim)&&e.colortrim.trim.items&&e.colortrim.trim.items.length&&(b.frm.colortrim.intCarousel=e.colortrim.trim.items[0].carouselImage),b.rebuildFormData(e),b.$broadcast("onModelUpdate"),b.viewportImagesExt(),b.viewportImagesInt()},b.ctMapping=function(o){b.showTrim=[],k.forEach(b.ctmap,function(e,t){if(o===e.cid)for(var a=e.tid,i=0;i<a.length;i++){var n=a[i];b.showTrim.push(n)}})},b.trimFilter=function(e){return-1!=b.showTrim.indexOf(e.id)||0==b.showTrim.length},b.colorChanged=function(e,t,a,i,n,o){null!=o&&("extCarousel"==e&&(b.frm.colortrim.exteriorName=o),"intCarousel"==e)&&(b.frm.colortrim.interiorName=o),void 0!==a&&0!=a&&("extCarousel"==e&&(b.frm.colortrim.exterior=a),"intCarousel"===e)&&(b.frm.colortrim.interior=a),b.frm.colortrim[e]=t,g(".flex-viewport .slides .flex-active-slide").find("img").removeData(),g("ul.slides").removeAttr("style"),void 0!==i&&0!=i&&""!==i?(b.viewportImagesExt(i),b.viewportImagesInt(i)):(b.viewportImagesExt(),b.viewportImagesInt())},b.slidesExt=[],b.slidesInt=[],b.$watch("frm.colortrim.exterior",function(e,t){b.viewportImagesExt()}),b.$watch("frm.colortrim.interior",function(e,t){b.viewportImagesInt()}),b.viewportImagesExt=function(e){var t=e?e:"";if(b.frm.colortrim.extCarousel){for(var a=[],i=1;i<=b.extCarouselSize;i++)a[i-1]={image:b.frm.colortrim.extCarousel.replace("{INDEX}",i),bbImg:""===t?b.frm.colortrim.extCarousel.replace("{INDEX}",i):t};b.slidesExt=a,I(b.tabs[0].id,g(".viewport-carousel#"+b.tabs[0].id))}},b.viewportImagesInt=function(e){var t=e?e:"";if(b.frm.colortrim.intCarousel){for(var a=[],i=1;i<=b.intCarouselSize;i++)a[i-1]={image:b.frm.colortrim.intCarousel.replace("{INDEX}",i),bbImg:""===t?b.frm.colortrim.intCarousel.replace("{INDEX}",i):t};b.slidesInt=a,I(b.tabs[1].id,g(".viewport-carousel#"+b.tabs[1].id))}},b.trimData=function(e){if(e&&e.items&&0<e.items.length)for(var t,a=0;a<e.items.length;a++)e.items[a].featureName&&(t=e.items[a].featureName,e.items[a].featureName=t.toString().replace(/^\s+|\s+$/g,"")),e.items[a].cost&&(t=e.items[a].cost,e.items[a].cost=parseFloat(t))}}),e.onload=function(){g("body").addClass("bp-v2");var e="",e=g('input[name="priceGeolocalizationEnable"]').length?g('input[name="priceGeolocalizationEnable"]').val():"false",t=b.apiUrl,a=g("input.js-featureKey-list"),i="";t=(t=(t=t.replace("{NAMEPLATE}",b.nameplate)).replace("{LOCATION}",b.locationNew)).replace("{USAGETYPE}",b.usageType),b.nameplate||(b.hasData=!1),a.length&&a.each(function(e,t){i+=g(t).val()+(e!==a.length-1?",":"")}),n.get(t,{params:{featureKeys:i,multiplePrices:e}}).then(function(e){if(console.log(e),e.data&&e.data.models&&0!==e.data.models.length){b.hasData=!0;var t=e.data.models.length;if(e.data.models[0].attributeDisclosure&&(r=!0),0!=t){for(var a=0;a<e.data.models.length;a++)e.data.models[a].accessories&&(b.trimData(e.data.models[a].accessories.exterior),b.trimData(e.data.models[a].accessories.interior),b.trimData(e.data.models[a].accessories.optionals));k.forEach(e.data.models[0].accessories,function(){P++}),k.forEach(e.data.models[0].colortrim,function(){T++})}b.vehicle=e.data,b.ValidationAccesories=g("input[name='shortNameGeo']").val(),b.country=g("input[name='countryAccessories']").val(),"true"===g("input[name='priceAccessoryState']").val()&&void 0!==b.vehicle.models&&k.forEach(b.vehicle.models,function(e,i){void 0!==e.accessories&&(e.accessories.utilitySafety&&k.forEach(e.accessories.utilitySafety.items,function(e,a){e.priceState&&(e=e.priceState,e=new Function("return {"+e+"};")(),jQuery.each(e,function(e,t){""!=b.ValidationAccesories&&b.ValidationAccesories.includes(e)&&b.country==g("input[name='priceGeolocalizationCountry']").val().toUpperCase()&&(b.vehicle.models[i].accessories.utilitySafety.items[a].cost=t)}))}),e.accessories.exterior&&k.forEach(e.accessories.exterior.items,function(e,a){e.priceState&&(e=e.priceState,e=new Function("return {"+e+"};")(),jQuery.each(e,function(e,t){""!=b.ValidationAccesories&&b.ValidationAccesories.includes(e)&&b.country==g("input[name='priceGeolocalizationCountry']").val().toUpperCase()&&(b.vehicle.models[i].accessories.exterior.items[a].cost=t)}))}),e.accessories.interior&&k.forEach(e.accessories.interior.items,function(e,a){e.priceState&&(e=e.priceState,e=new Function("return {"+e+"};")(),jQuery.each(e,function(e,t){""!=b.ValidationAccesories&&b.ValidationAccesories.includes(e)&&b.country==g("input[name='priceGeolocalizationCountry']").val().toUpperCase()&&(b.vehicle.models[i].accessories.interior.items[a].cost=t)}))}),e.accessories.optionals&&k.forEach(e.accessories.optionals.items,function(e,a){e.priceState&&(e=e.priceState,e=new Function("return {"+e+"};")(),jQuery.each(e,function(e,t){""!=b.ValidationAccesories&&b.ValidationAccesories.includes(e)&&b.country==g("input[name='priceGeolocalizationCountry']").val().toUpperCase()&&(b.vehicle.models[i].accessories.optionals.items[a].cost=t)}))}),e.accessories.specifications&&k.forEach(e.accessories.specifications.items,function(e,a){e.priceState&&(e=e.priceState,e=new Function("return {"+e+"};")(),jQuery.each(e,function(e,t){""!=b.ValidationAccesories&&b.ValidationAccesories.includes(e)&&b.country==g("input[name='priceGeolocalizationCountry']").val().toUpperCase()&&(b.vehicle.models[i].accessories.specifications.items[a].cost=t)}))}),e.accessories.multimedia)&&k.forEach(e.accessories.multimedia.items,function(e,a){e.priceState&&(e=e.priceState,e=new Function("return {"+e+"};")(),jQuery.each(e,function(e,t){""!=b.ValidationAccesories&&b.ValidationAccesories.includes(e)&&b.country==g("input[name='priceGeolocalizationCountry']").val().toUpperCase()&&(b.vehicle.models[i].accessories.multimedia.items[a].cost=t)}))})}),g("#build-and-price-v2-wrap").attr("data-view-latest-offers")&&b.loadLatestOffersData(),b.locationLabel=b.vehicle.location&&b.vehicle.location.value||b.locationLabel,b.vehicle.jsCurrencyFormat=b.vehicle.jsCurrencyFormat||{};var t=b.vehicle.jsCurrencyFormat.groupingSize||3;b.vehicle.jsCurrencyFormatRegEx=new RegExp("(\\d)(?=(\\d{"+t+"})+(?!\\d))","g"),k.forEach(b.vehicle.models,function(e,t){e.isDefault&&(b.modelLabel=b.vehicle.models[t].label)}),b.modelImgUrl=b.vehicle.models[0].imgUrl,null!=b.modelKey&&""!=b.modelKey&&null!=b.exteriorColorKey&&""!=b.exteriorColorKey&&null!=b.trimKey&&""!=b.trimKey&&(b.newparms=1,k.forEach(b.prs,function(e,t){b.prs.model=b.modelKey,b.prs.colortrim.exterior=b.exteriorColorKey,b.prs.colortrim.interior=b.trimKey,b.accext=[]})),null!=b.driveKey&&""!=b.driveKey&&0!=b.newparms&&(b.newparms=2,k.forEach(b.prs,function(e,t){b.prs.drive=b.driveKey})),null!=b.exteriorAccessoriesKeyList&&""!=b.exteriorAccessoriesKeyList&&0!=b.newparms&&(b.newparms=3,k.forEach(b.prs,function(e,t){b.accext=[];for(var a=b.exteriorAccessoriesKeyList.split(","),i=0;i<a.length;i++)b.prs.accessories.exterior[a[i]]=!0})),null!=b.interiorAccessoriesKeyList&&""!=b.interiorAccessoriesKeyList&&0!=b.newparms&&(b.newparms=4,k.forEach(b.prs,function(e,t){b.accint=[];for(var a=b.interiorAccessoriesKeyList.split(","),i=0;i<a.length;i++)b.prs.accessories.interior[a[i]]=!0})),null!=b.optionalAccessoriesKeyList&&""!=b.optionalAccessoriesKeyList&&0!=b.newparms&&(b.newparms=5,k.forEach(b.prs,function(e,t){b.accOpt=[];for(var a=b.optionalAccessoriesKeyList.split(","),i=0;i<a.length;i++)b.prs.accessories.optionals[a[i]]=!0})),null!=b.specificationsAccessoriesKeyList&&""!=b.specificationsAccessoriesKeyList&&0!=b.newparms&&(b.newparms=5,k.forEach(b.prs,function(e,t){b.accint=[];for(var a=b.specificationsAccessoriesKeyList.split(","),i=0;i<a.length;i++)b.prs.accessories.specifications[a[i]]=!0})),null!=b.utilitySafetyAccessoriesKeyList&&""!=b.utilitySafetyAccessoriesKeyList&&0!=b.newparms&&(b.newparms=5,k.forEach(b.prs,function(e,t){b.accutil=[];for(var a=b.utilitySafetyAccessoriesKeyList.split(","),i=0;i<a.length;i++)b.prs.accessories.utilitySafety[a[i]]=!0})),null!=b.multimediaAccessoriesKeyList&&""!=b.multimediaAccessoriesKeyList&&0!=b.newparms&&(b.newparms=5,k.forEach(b.prs,function(e,t){b.accmultimedia=[];for(var a=b.multimediaAccessoriesKeyList.split(","),i=0;i<a.length;i++)b.prs.accessories.multimedia[a[i]]=!0})),0!=b.newparms?b.initParamObj():b.initResultsObj(),g('input[name="validationZone"]').on("change",function(){"true"===g('input[name="validationZone"]').val()&&g(".modelZone").each(function(){g(".zonePriceBuilding").css("display","none"),g(".zonePriceYes").css("display","block"),g(".zonePriceYes").css("visibility","visible")})}),A(1e3),g(".city-change").html()&&(t=g(".city-change").html().replace("{DATE}",b.frm.modelPricePublishDate).replace("{LOCATION}",b.vehicle.location&&b.vehicle.location.value||b.locationNew),g(".city-change").html(t)),y.getBuildAndPriceBuildEvents().load(b.vehicle.categoryName,b.vehicle.key,b.vehicle.year),b.AAComplianceTab(!0)}else b.hasData=!1},function(){b.hasData=!1})},g('input[name="validationZone"]').on("change",function(){"true"===g('input[name="validationZone"]').val()&&g(".modelZone").each(function(){g(".zonePriceBuilding").css("display","none"),g(".zonePriceYes").css("display","block"),g(".zonePriceYes").css("visibility","visible")})}),b.loadLatestOffersData=function(){var e=g("#build-and-price-v2-wrap").attr("data-offers-data-url");g.ajax({type:"GET",url:e,dataType:"json",async:!1,success:function(e){b.latestOffersData=e,b.addOffersUrlToVehiclesJson()}.bind(this),error:function(e){}.bind(this)})},b.addOffersUrlToVehiclesJson=function(){var e=b.vehicle.models;if(e)for(var t=0;t<e.length;t++)e[t].offersPageUrl=b.getDynamicUrl(b.vehicle.key,e[t].key)},b.getDynamicUrl=function(e,t){var a=g("#build-and-price-v2-wrap").attr("data-latest-offers-landing-page")+"?offer=";if(e&&t)for(var i=0;i<b.latestOffersData.length;i++)if(b.latestOffersData[i].nameplateCode==e)for(var n=b.latestOffersData[i].modelDetails.length,o=0;o<n;o++)if(b.latestOffersData[i].modelDetails[o].modelCode===t&&b.verifyOfferExpiry(b.latestOffersData[i].modelDetails[o].offerExpiry)){if(!b.checkEnvURL())return a+b.latestOffersData[i].modelDetails[o].modelName;var r=g("#build-and-price-v2-wrap").attr("data-offers-details-root");if(r)return r+"/"+b.latestOffersData[i].modelDetails[o].modelName+".html"}return""},b.checkEnvURL=function(){var e=window.location.pathname.slice(1).split("/");return 0<e[e.length-1].indexOf(".html")},b.verifyOfferExpiry=function(e){var t=new Date,e=new Date(b.parseDate(e));return e.getYear()>=t.getYear()&&e.getMonth()+1>=t.getMonth()+1&&e.getDate()>=t.getDate()},b.parseDate=function(e){e=e.split("/");return new Date(e[2],e[1]-1,e[0])},b.hideSelectOption=function(){return g("body").removeClass("active-select-option"),g(".panel-price").removeClass("active"),!1}}]),app.directive("checkImage",["$q",function(n){return{restrict:"A",link:function(e,i,t){t.$observe("ngSrc",function(e){var t=n.defer(),a=new Image;return a.onerror=function(){var e=window.location.href.split("/"),e=e[0]+"//"+e[2];t.resolve(!1),i.attr("src",e+"/etc/designs/guxfoap/clientlibs/guxfoap/img/noimg.png"),i.css("display","none"),g(".color-item label img").css("display","block"),g(".fullScrContent img").css("display","block")},a.onload=function(){t.resolve(!0)},a.src=e,t.promise})}}}]),app.directive("ngRepeatRange",["$compile",function(o){return{replace:!0,scope:{from:"=",to:"=",step:"="},link:function(e,t,a){var i=e.from||0,n=e.step||1,a=e.to||a.ngRepeatRange;0===g("#colorandtrim.secondary-nav-controls").length?(i=((e,t,a)=>{for(var i=[];e+a<=t;)i[i.length]=e+=a;return i})(i,a+1,n).join(","),k.element(t).attr("ng-repeat","n in ["+i+"]"),k.element(t).removeAttr("ng-repeat-range"),o(t)(e)):0<g("sup.ng-isolate-scope").length&&g("sup.ng-isolate-scope").remove()}}}]),app.directive("setAccordionStyling",function(){function i(e,t){var a;t&&(t=(t=e).closest("ul.setThemeColor"),e=t.data("color"),a=t.find(".nav-title-wrapper a"),t=t.find(".nav-title-wrapper a .icon-chevron-thin-down"),a.css({"background-color":"#"+e,color:"#ffffff","border-bottom":"1px solid #fff"}),t.css({"background-color":"#"+e}))}return function(e,t,a){i(t,e.$last),e.$parent.$on("onModelUpdate",function(){setTimeout(function(){i(t,e.$last)},200)})}}),g("#build-and-price-v2-wrap").each(function(e,t){k.bootstrap(t,["BuildAndPriceV2AngularApp"])}),o.prototype._listen=function(){g(window).load(function(){var e;g(".setThemeColor").each(function(){currObj=g(this),e=currObj.data("color"),currObj.hasClass("isAccordionHeader")&&(currObj.find(".nav-title-wrapper a").css({"background-color":"#"+e,color:"#ffffff"}),currObj.find(".nav-title-wrapper a .icon-chevron-thin-down").css({"background-color":"#"+e})),currObj.css("color","#"+e)}),g(".mobile-back-btn").each(function(){g(this).click(function(){A()})}),g(".city-change").on("click keypress",function(e){var t,a;"click"!==e.type&&"Enter"!==e.key||(t=g(e.target).attr("href"))&&(a=1<(a=location.href.split("?")).length?a[1]:"",a+="&c="+g(".city-change").data("locationlabel"),t+=(t.match(/\?/)?"&":"?")+a,g(e.target).attr("href",t))})}),g(window).on("load",function(){if(window.innerWidth<=this._mobileResolution)return this.makeToolbarSticky(),!1;this.makeToolbarNonSticky()}.bind(this)),g(window).on("resize scroll",function(){if(window.innerWidth<=this._mobileResolution)return g("body").hasClass("active-select-option")?(this.makeToolbarSticky(),!1):this.getCommonOffset()>this.getContainerOffset()?(this.makeToolbarNonSticky(),!1):void this.makeToolbarSticky();this.makeToolbarNonSticky()}.bind(this)),this._$buttonsToolbar.find("li").on("click keypress",function(e){"click"!==e.type&&"Enter"!==e.key||(window.innerWidth<=this._mobileResolution?this.makeToolbarSticky():this.makeToolbarNonSticky())}.bind(this)),g(".mobile-header .mobile-back-btn").on("click keypress",function(e){if("click"===e.type||"Enter"===e.key)if(window.innerWidth<=this._mobileResolution){if(this.getCommonOffset()>this.getContainerOffset())return this.makeToolbarNonSticky(),!1;this.makeToolbarSticky()}else this.makeToolbarNonSticky()}.bind(this))},o.prototype.getContainerOffset=function(){var e=g(".main-container");return e.innerHeight()+e.offset().top},o.prototype.getCommonOffset=function(){return window.innerHeight+g(window).scrollTop()-this._$buttonsToolbar.height()},o.prototype.makeToolbarSticky=function(){this._$buttonsToolbar.addClass(this._stickyTollbarClassName)},o.prototype.makeToolbarNonSticky=function(){this._$buttonsToolbar.removeClass(this._stickyTollbarClassName)},o.prototype.changeBtn=function(){g(".infoball-content-wrap .action .cta-blue").on("click keypress",function(t){if("click"===t.type||"Enter"===t.key)return e.preventDefault(),g(this).closest(".infoball-item").addClass("option-selected"),!1})},o.prototype.setInfoPaddingBottom=function(e){g(e).find(".content-wrapper").css({"padding-bottom":g(e).find(".infoball-nav").outerHeight()+15})},o.prototype.setContainerHeights=function(){A(),g(window).on("resize",v.throttle(function(){A()},1e3)),g(window).load(function(){A(1e3)})},o.prototype.setSlideItemWidth=function(){N(),g(window).on("resize",v.throttle(function(){N()},1e3)),g(window).load(function(){N(1e3)})},o.prototype.primaryNavEvents=function(){var t=this.$primaryNav.find("a");t.on("click keypress",function(e){"click"!==e.type&&"Enter"!==e.key||(e.preventDefault(),e=g(this).attr("href"),g(this).hasClass("active")?g("body").addClass("active-select-option"):(t.removeClass("active"),g(this).addClass("active"),g("body").addClass("active-select-option"),e=e,g(".secondary-nav-controls").removeClass("active"),g(".secondary-nav-controls"+e).addClass("active"),A(1e3)),A())})},o.prototype.accordionEvents=function(){g(".nav-title-wrapper a").on("click.accordion keypress",function(e){var t;"click"!==e.type&&"Enter"!==e.key||(e.preventDefault(),e=g(window).width(),t=g(this).closest("li"),767<e&&t.siblings("li").removeClass("active"),t.hasClass("active")?t.removeClass("active"):t.addClass("active"))})},D.init=function(e){D.buildandprice=new o(e)},D}),define("build-and-price-dual/component.buildAndPriceDual",["jquery","angular","angular-route","jquery-flexslider","mediaQuery","_","angular-sanitize","analytics/analyticsEventLayer","utils/getParamValue","disclosure/component.disclosure"],function(m,w,e,t,a,s,i,c,d,u){var p={},h=((app=w.module("BuildAndPriceAngularApp",["ngRoute","ngSanitize"])).filter("unsafe",["$sce",function(t){return function(e){return t.trustAsHtml(e)}}]),-1),f=-1;function n(e){this.$elem=m(e),this.$primaryNav=this.$elem.find(".primary-nav-controls"),this.$secondaryNav=this.$elem.find(".secondary-nav-controls"),this.$leftContent=this.$elem.find(".left-scrolling-content"),this.$mainContent=this.$elem.find(".main-container"),this.$viewportContainer=this.$mainContent.find(".viewport-container"),this.setContainerHeights(),this.accordionEvents(),this.primaryNavEvents(),this.setSlideItemWidth(),m(window).load(function(){var e;m(".setThemeColor").each(function(){currObj=m(this),e=currObj.data("color"),currObj.hasClass("isAccordionHeader")&&(currObj.find(".nav-title-wrapper a").css({"background-color":"#"+e,color:"#ffffff"}),currObj.find(".nav-title-wrapper a .icon-chevron-thin-down").css({"background-color":"#"+e})),currObj.css("color","#"+e)}),m(".mobile-back-btn").each(function(){m(this).click(function(){C()})}),m(".city-change").click(function(e){var t,a=m(e.target).attr("href");a&&(t=1<(t=location.href.split("?")).length?t[1]:"",t+="&c="+m(".city-change").data("locationlabel"),a+=(a.match(/\?/)?"&":"?")+t,m(e.target).attr("href",a))})})}function g(e){var t=".build-and-price-dual .main-container .viewport-carousel",a=".build-and-price-dual .main-container .viewport-carousel .slide";m(a).length&&(void 0!==e&&!isNaN(e)&&0<e?(m(t).addClass("change-image"),setTimeout(function(){m(a).width(m(t).first().width()),m(t).removeClass("change-image")},e)):m(a).width(m(t).first().width()))}function C(e){var t,a=".build-and-price-dual .left-scrolling-content",i=".build-and-price-dual .left-scrolling-content #colorandtrim ul li .content",n=".build-and-price-dual .left-scrolling-content #accessories ul li .content";m(a).length&&m(".build-and-price-dual .main-container").length&&(m(a).css("height","auto"),767<m(window).width()?setTimeout(function(){m(a).css({height:"720px",overflow:"auto"}),m("body").removeClass("no-scroll"),m(".build-and-price-dual .left-scrolling-content #bundle ul li .content").css("height","635px"),m(".build-and-price-dual .left-scrolling-content #model ul li .content").css("height","635px"),m(".build-and-price-dual .left-scrolling-content #drive ul li .content").css("height","635px"),2==f&&m(i).css("height","550px"),1==f&&m(i).css("height","635px"),3==h&&m(n).css("height","465px"),2==h&&m(n).css("height","550px"),1==h&&m(n).css("height","635px")},e):(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||(m(a).css({height:"720px",overflow:"visible"}),m("body").hasClass("active-select-option")?m("body").addClass("no-scroll"):m("body").removeClass("no-scroll"),2==f&&m(i).css("height","400px"),1==f&&m(i).css("height","485px"),3==h&&m(n).css("height","315px"),2==h&&m(n).css("height","400px"),1==h&&m(n).css("height","485px")),t=m(window).height()+25,void 0!==e&&!isNaN(e)&&0<e?setTimeout(function(){m(a).css("height",t)},e):m(a).css("height",t)))}function k(e,t,a){void 0!==a&&0==a?g():g(1e3),t.flexslider({selector:".slides > .slide",animation:"slide",directionNav:!1,slideshow:!1,animationLoop:!1,minItems:1,maxItems:1,move:1,after:function(){c.getBuildAndPriceBuildEvents().gallery(e,"carousel scroll")}})}return app.controller("BuildPriceAppController",["$scope","$http","$window","$sce",function(v,t,e,a){var y,i=new URL(e.location),n=(v.urlParams=s.object(s.compact(s.map(i.search.slice(1).split("&"),function(e){if(e)return s.map(e.split("="),function(e){return decodeURIComponent(e)})}))),m("#countryCodeISO").attr("value")),b=m(".flex-viewport .slides .slide"),i=m("#build-and-price-dual-wrap"),o=(i.attr("data-fetch-from-polk"),i.attr("data-remove-zero-price"),!1),r=(i.attr("data-domain-sl"),i.attr("data-usage-type"),m(".city-change").attr("data-locationlabel"),v.isoVE=!1,v.hasLoadedRequest=!0,v.nameplate=v.urlParams.n,v.nameplateKey=v.urlParams.n,v.locationNew=v.urlParams.l||"_",v.locationLabel=v.locationNew,v.usageType=v.urlParams.u,v.modelKey=v.urlParams.m,v.driveKey=v.urlParams.d,v.exteriorColorKey=v.urlParams.e,v.trimKey=v.urlParams.t,v.exteriorAccessoriesKeyList=v.urlParams.ae,v.interiorAccessoriesKeyList=v.urlParams.ai,v.optionalAccessoriesKeyList=v.urlParams.ao,v.specificationsAccessoriesKeyList=v.urlParams.as,v.utilitySafetyAccessoriesKeyList=v.urlParams.au,v.multimediaAccessoriesKeyList=v.urlParams.am,v.nameplateCrmId="",v.showTrim=[],v.vehicle=[],v.totalPrice=0,v.basePrice=0,v.totalPriceDual=0,v.basePriceDual=0,v.currencyFormatPattern=m("#currencyFormatPattern").val(),v.currencyFormatPattern1=m("#currencyFormatPattern2").val(),v.currency=getSymbolByMKTconfig(v.currencyFormatPattern),v.currency1=getSymbolByMKTconfig(v.currencyFormatPattern1),v.selectedItems=[],v.sendURL=[],v.modelLabel="",v.modelImgUrl="/etc/designs/guxfoap/clientlibs/guxfoap/img/car-grayscale.png",v.newparms=0,v.auMarket=!1,v.hasData=!0,v.hasDrives=!1,v.hasColortrim=!1,v.hasColortrimExterior=!1,v.hasColortrimInterior=!1,v.hasAccessories=!1,v.hasLoaded=!1,v.priceReplaceKey="{PRICE}",v.currentTab="exterior",v.analytics={category:{model:"Models",drive:"Drive",colortrim:"Color & Trim",accessories:"Accessories"},subcat:{interior:"interior",ext:"exterior",opt:"optionals",utilsafety:"utility-safety",specs:"specifications",media:"multimedia"}},v.frm={vehicle:null,model:null,modelCrmId:null,modelName:null,modelPricePublishDate:"",drive:null,driveName:null,optionsKeys:null,colortrim:{exterior:null,interior:null,exteriorName:null,interiorName:null,extCarousel:null,intCarousel:null},accessories:{exterior:{},interior:{},optionals:{},specifications:{},utilitySafety:{},multimedia:{}}},v.ctmap=[],v.prs={model:null,drive:null,colortrim:{exterior:null,interior:null},accessories:{exterior:{},interior:{},optionals:{},specifications:{},utilitySafety:{},multimedia:{}}},v.dual={model:{},drive:{},colortrim:{color:{},trim:{}},accessories:{exterior:{},interior:{},optionals:{},specifications:{},utilitySafety:{},multimedia:{}}},v.onClickTab=function(e){v.currentTab=e.id,"interior"===v.currentTab?m(".viewport-controller-pane").attr("id","tab-int"):m(".viewport-controller-pane").attr("id","tab-ext"),k(v.currentTab,m(".viewport-carousel#"+v.currentTab),!1)},v.isActiveTab=function(e){return e===v.currentTab},v.initResultsObj=function(){v.frm.vehicle=v.vehicle.key,v.nameplateCrmId=v.vehicle.crmId||"",v.hasDrives=!1,v.hasColortrim=!1,v.hasColortrimExterior=!1,v.hasColortrimInterior=!1,v.hasAccessories=!1,w.forEach(v.vehicle.models,function(e,t){if(e.extfeature&&w.forEach(e.extfeature,function(e,t){e={cid:e.modelFeatureID,tid:e.subModelFeatureID};v.ctmap.push(e)}),e.optionPackage&&e.optionPackage.optionals&&w.forEach(e.optionPackage.optionals.items,function(e,t){e.cost=e.cost?parseFloat(e.cost):0}),!0===e.isDefault)return v.frm.model=e.key,v.frm.modelName=e.label,v.frm.modelPricePublishDate=e.pricePublishDate||"",v.frm.modelCrmId=e.crmId||"",v.totalPrice=0,v.setTotalPrice(e.price),v.setBasePrice(e.price),v.totalPriceDual=0,v.setTotalPriceDual(e.price1),v.setBasePriceDual(e.price1),e.drive&&(w.forEach(e.drive.items,function(e,t){if(!0===e.isDefault)return v.frm.drive=e.featureKey,v.frm.driveName=e.featureName,v.frm.driveCost=e.cost,v.setTotalPrice(e.cost),v.setTotalPriceDual(e.cost1),!1}),v.hasDrives=!0),e.colortrim&&(e.colortrim.color&&(w.forEach(e.colortrim.color.items,function(e,t){if(!0===e.isDefault)return v.ctMapping(e.id),v.frm.colortrim.exterior=e.featureKey,v.frm.colortrim.exteriorName=e.featureName,v.frm.colortrim.colorid=e.id,v.frm.colortrim.extCarousel=e.carouselImage,v.setTotalPrice(e.cost),v.setTotalPriceDual(e.cost1),!1}),v.hasColortrim=!0,v.hasColortrimExterior=!0,v.viewportImagesExt()),e.colortrim.trim?(w.forEach(e.colortrim.trim.items,function(e,t){if(!0===e.isDefault)return v.frm.colortrim.interior=e.featureKey,v.frm.colortrim.interiorName=e.featureName,v.frm.colortrim.trimid=e.id,v.frm.colortrim.intCarousel=e.carouselImage,v.setTotalPrice(e.cost),v.setTotalPriceDual(e.cost1),!1}),v.hasColortrim=!0,v.hasColortrimInterior=!0,v.viewportImagesInt()):setTimeout(function(){v.viewportImagesExt()},200)),e.accessories&&(e.accessories.exterior&&(w.forEach(e.accessories.exterior.items,function(e,t){e.cost=e.cost?parseFloat(e.cost):0,!0===e.isDefault&&(v.frm.accessories.exterior[e.featureKey]=!0,v.setTotalPrice(e.cost),v.setTotalPriceDual(e.cost1))}),v.hasAccessories=!0),e.accessories.interior&&(w.forEach(e.accessories.interior.items,function(e,t){e.cost=e.cost?parseFloat(e.cost):0,!0===e.isDefault&&(v.frm.accessories.interior[e.featureKey]=!0,v.setTotalPrice(e.cost),v.setTotalPriceDual(e.cost1))}),v.hasAccessories=!0),e.accessories.optionals&&(w.forEach(e.accessories.optionals.items,function(e,t){e.cost=e.cost?parseFloat(e.cost):0,!0===e.isDefault&&(v.frm.accessories.optionals[e.featureKey]=!0,v.setTotalPrice(e.cost),v.setTotalPriceDual(e.cost1))}),v.hasAccessories=!0),e.accessories.specifications&&(w.forEach(e.accessories.specifications.items,function(e,t){e.cost=e.cost?parseFloat(e.cost):0,!0===e.isDefault&&(v.frm.accessories.specifications[e.featureKey]=!0,v.setTotalPrice(e.cost))}),v.hasAccessories=!0),e.accessories.utilitySafety&&(w.forEach(e.accessories.utilitySafety.items,function(e,t){e.cost=e.cost?parseFloat(e.cost):0,!0===e.isDefault&&(v.frm.accessories.utilitySafety[e.featureKey]=!0,v.setTotalPrice(e.cost),v.setTotalPriceDual(e.cost1))}),v.hasAccessories=!0),e.accessories.multimedia)&&(w.forEach(e.accessories.multimedia.items,function(e,t){e.cost=e.cost?parseFloat(e.cost):0,!0===e.isDefault&&(v.frm.accessories.multimedia[e.featureKey]=!0,v.setTotalPrice(e.cost),v.setTotalPriceDual(e.cost1))}),v.hasAccessories=!0),!1}),v.hasLoaded=!0,v.initDualValues()},v.initParamObj=function(){v.frm.vehicle=v.vehicle.key,v.hasDrives=!1,v.hasColortrim=!1,v.hasColortrimExterior=!1,v.hasColortrimInterior=!1,v.hasAccessories=!1,w.forEach(v.vehicle.models,function(e,t){if(e.key===v.prs.model)return v.frm.model=e.key,v.frm.modelName=e.label,v.frm.modelPricePublishDate=e.pricePublishDate||"",v.frm.modelCrmId=e.crmId||"",v.totalPrice=0,v.setTotalPrice(e.price),v.setBasePrice(e.price),v.setTotalPriceDual(e.price1),v.setBasePriceDual(e.price1),e.drive&&(w.forEach(e.drive.items,function(e,t){if(e.featureKey===v.prs.drive)return v.frm.drive=e.featureKey,v.frm.driveName=e.featureName,v.frm.driveCost=e.cost,v.setTotalPrice(e.cost),v.setTotalPriceDual(e.cost1),!1}),v.hasDrives=!0),e.colortrim&&(e.colortrim.color&&(w.forEach(e.colortrim.color.items,function(e,t){if(e.featureKey===v.prs.colortrim.exterior)return v.frm.colortrim.exterior=e.featureKey,v.frm.colortrim.exteriorName=e.featureName,v.frm.colortrim.colorid=e.id,v.frm.colortrim.extCarousel=e.carouselImage,v.setTotalPrice(e.cost),v.setTotalPriceDual(e.cost1),!1}),v.hasColortrim=!0,v.hasColortrimExterior=!0,v.viewportImagesExt()),e.colortrim.trim?(w.forEach(e.colortrim.trim.items,function(e,t){if(e.featureKey===v.prs.colortrim.interior)return v.frm.colortrim.interior=e.featureKey,v.frm.colortrim.interiorName=e.featureName,v.frm.colortrim.trimid=e.id,v.frm.colortrim.intCarousel=e.carouselImage,v.setTotalPrice(e.cost),v.setTotalPriceDual(e.cost1),!1}),v.hasColortrim=!0,v.hasColortrimInterior=!0,v.viewportImagesInt()):setTimeout(function(){v.viewportImagesExt()},200)),e.accessories&&(e.accessories.exterior&&(w.forEach(e.accessories.exterior.items,function(e,t){for(var a in e.isDefault=!1,v.prs.accessories.exterior)e.featureKey===a&&(v.frm.accessories.exterior[e.featureKey]=!0,e.isDefault=!0,e.cost=e.cost?parseFloat(e.cost):0,v.setTotalPrice(e.cost),v.setTotalPriceDual(e.cost1))}),v.hasAccessories=!0),e.accessories.interior&&(w.forEach(e.accessories.interior.items,function(e,t){for(var a in e.isDefault=!1,v.prs.accessories.interior)e.featureKey===a&&(v.frm.accessories.interior[e.featureKey]=!0,e.isDefault=!0,e.cost=e.cost?parseFloat(e.cost):0,v.setTotalPrice(e.cost),v.setTotalPriceDual(e.cost1))}),v.hasAccessories=!0),e.accessories.optionals&&(w.forEach(e.accessories.optionals.items,function(e,t){for(var a in e.isDefault=!1,v.prs.accessories.optionals)e.featureKey===a&&(v.frm.accessories.optionals[e.featureKey]=!0,e.isDefault=!0,e.cost=e.cost?parseFloat(e.cost):0,v.setTotalPrice(e.cost),v.setTotalPriceDual(e.cost1))}),v.hasAccessories=!0),e.accessories.specifications&&(w.forEach(e.accessories.specifications.items,function(e,t){for(var a in e.isDefault=!1,v.prs.accessories.specifications)e.featureKey===a&&(v.frm.accessories.specifications[e.featureKey]=!0,e.isDefault=!0,e.cost=e.cost?parseFloat(e.cost):0,v.setTotalPrice(e.cost),v.setTotalPriceDaul(e.cost1))}),v.hasAccessories=!0),e.accessories.utilitySafety&&(w.forEach(e.accessories.utilitySafety.items,function(e,t){for(var a in e.isDefault=!1,v.prs.accessories.utilitySafety)e.featureKey===a&&(v.frm.accessories.utilitySafety[e.featureKey]=!0,e.isDefault=!0,e.cost=e.cost?parseFloat(e.cost):0,v.setTotalPrice(e.cost),v.setTotalPriceDual(e.cost1))}),v.hasAccessories=!0),e.accessories.multimedia)&&(w.forEach(e.accessories.multimedia.items,function(e,t){for(var a in e.isDefault=!1,v.prs.accessories.multimedia)e.featureKey===a&&(v.frm.accessories.multimedia[e.featureKey]=!0,e.isDefault=!0,e.cost=e.cost?parseFloat(e.cost):0,v.setTotalPrice(e.cost),v.setTotalPriceDaul(e.cost1))}),v.hasAccessories=!0),!1}),v.viewportImagesExt(),v.viewportImagesInt(),v.hasLoaded=!0,v.initDualValues()},v.showPricePop=function(e,t,a,i){var n,o,r,l,s,c;"model"===t?(n=v.dual.model.PricingSummary,o=v.dual.model.primaryPriceLabel,r=v.dual.model.dualPriceLabel,l=v.dual.model.vatLabel,s=v.dual.model.vatText,c=v.dual.model.vatDescription):"drive"===t?(n=v.dual.drive.PricingSummary,o=v.dual.drive.primaryPriceLabel,r=v.dual.drive.dualPriceLabel,l=v.dual.drive.vatLabel,s=v.dual.drive.vatText,c=v.dual.drive.vatDescription):"color"===t?(n=v.dual.colortrim.color.PricingSummary,o=v.dual.colortrim.color.primaryPriceLabel,r=v.dual.colortrim.color.dualPriceLabel,l=v.dual.colortrim.color.vatLabel,s=v.dual.colortrim.color.vatText,c=v.dual.colortrim.color.vatDescription):"trim"===t?(n=v.dual.colortrim.trim.PricingSummary,o=v.dual.colortrim.trim.primaryPriceLabel,r=v.dual.colortrim.trim.dualPriceLabel,l=v.dual.colortrim.trim.vatLabel,s=v.dual.colortrim.trim.vatText,c=v.dual.colortrim.trim.vatDescription):"exterior"===t?(n=v.dual.accessories.exterior.PricingSummary,o=v.dual.accessories.exterior.primaryPriceLabel,r=v.dual.accessories.exterior.dualPriceLabel,l=v.dual.accessories.exterior.vatLabel,s=v.dual.accessories.exterior.vatText,c=v.dual.accessories.exterior.vatDescription):"interior"===t?(n=v.dual.accessories.interior.PricingSummary,o=v.dual.accessories.interior.primaryPriceLabel,r=v.dual.accessories.interior.dualPriceLabel,l=v.dual.accessories.interior.vatLabel,s=v.dual.accessories.interior.vatText,c=v.dual.accessories.interior.vatDescription):"optionals"===t?(n=v.dual.accessories.optionals.PricingSummary,o=v.dual.accessories.optionals.primaryPriceLabel,r=v.dual.accessories.optionals.dualPriceLabel,l=v.dual.accessories.optionals.vatLabel,s=v.dual.accessories.optionals.vatText,c=v.dual.accessories.optionals.vatDescription):"specifications"===t?(n=v.dual.accessories.specifications.PricingSummary,o=v.dual.accessories.specifications.primaryPriceLabel,r=v.dual.accessories.specifications.dualPriceLabel,l=v.dual.accessories.specifications.vatLabel,s=v.dual.accessories.specifications.vatText,c=v.dual.accessories.specifications.vatDescription):"utilitySafety"===t?(n=v.dual.accessories.utilitySafety.PricingSummary,o=v.dual.accessories.utilitySafety.primaryPriceLabel,r=v.dual.accessories.utilitySafety.dualPriceLabel,l=v.dual.accessories.utilitySafety.vatLabel,s=v.dual.accessories.utilitySafety.vatText,c=v.dual.accessories.utilitySafety.vatDescription):"multimedia"===t&&(n=v.dual.accessories.multimedia.PricingSummary,o=v.dual.accessories.multimedia.primaryPriceLabel,r=v.dual.accessories.multimedia.dualPriceLabel,l=v.dual.accessories.multimedia.vatLabel,s=v.dual.accessories.multimedia.vatText,c=v.dual.accessories.multimedia.vatDescription),v.popPricingSummary=n,v.popPrimaryPriceLabel=o,v.popPrice1=a,v.popDualPriceLabel=r,v.popPrice2=i,v.popVatLabel=l,v.popVatText=s,v.popVatDescription=c,setTimeout(function(){u.init(),m(".left-scrolling-content .panel-price#bnpitems").addClass("active"),m(".left-scrolling-content .panel-price#bnpitems .priceDropdown").css({left:e.screenX,top:e.clientY-80})},500)},0);v.initDualValues=function(){v.vehicle.pricing&&(v.vehicle.pricing.models&&(v.dual.model=v.vehicle.pricing.models.dualcurrency),v.vehicle.pricing.drive&&(v.dual.drive=v.vehicle.pricing.drive.dualcurrency),v.vehicle.pricing.colortrim&&(v.vehicle.pricing.colortrim.color&&(v.dual.colortrim.color=v.vehicle.pricing.colortrim.color.dualcurrency),v.vehicle.pricing.colortrim.trim)&&(v.dual.colortrim.trim=v.vehicle.pricing.colortrim.trim.dualcurrency),v.vehicle.pricing.accessories)&&(v.vehicle.pricing.accessories.exterior&&(v.dual.accessories.exterior=v.vehicle.pricing.accessories.exterior.dualcurrency),v.vehicle.pricing.accessories.interior&&(v.dual.accessories.interior=v.vehicle.pricing.accessories.interior.dualcurrency),v.vehicle.pricing.accessories.optionals&&(v.dual.accessories.optionals=v.vehicle.pricing.accessories.optionals.dualcurrency),v.vehicle.pricing.accessories.specifications&&(v.dual.accessories.specifications=v.vehicle.pricing.accessories.specifications.dualcurrency),v.vehicle.pricing.accessories.utilitySafety&&(v.dual.accessories.utilitySafety=v.vehicle.pricing.accessories.utilitySafety.dualcurrency),v.vehicle.pricing.accessories.multimedia)&&(v.dual.accessories.multimedia=v.vehicle.pricing.accessories.multimedia.dualcurrency)},v.$watch("hasLoaded",function(){if(2==++r&&(m(window).trigger("buildpriceloaded"),setTimeout(function(){y=b.attr("style")},1e3)),2==r&&o){for(var e,t=0;t<v.vehicle.models.length;t++)w.forEach(v.vehicle.models[t],function(){!0===v.vehicle.models[t].isDefault&&(e=v.vehicle.models[t].key,v.vehicle.models[t].attributeDisclosure,v.vehicle.models[t].currencySup)});v.changeDisclosure(e)}"VEN"===n&&(v.isoVE=!0)}),v.rebuildFormData=function(e){m(window).trigger("buildpricemodelchange"),v.frm={vehicle:null,model:null,modelCrmId:null,modelName:null,modelPricePublishDate:"",drive:null,colortrim:{exterior:null,interior:null,extCarousel:null,intCarousel:null},accessories:{exterior:{},interior:{},optionals:{},specifications:{},utilitySafety:{},multimedia:{}}};return o&&v.changeDisclosure(e.key),v.hasDrives=!1,v.hasColortrim=!1,v.hasColortrimExterior=!1,v.hasColortrimInterior=!1,v.hasAccessories=!1,v.frm.model=e.key,v.frm.modelName=e.label,v.frm.modelPricePublishDate=e.pricePublishDate||"",v.frm.modelCrmId=e.crmId||"",v.modelImgUrl=e.imgUrl,v.totalPrice=0,v.setTotalPrice(e.price),v.setBasePrice(e.price),v.totalPriceDual=0,v.setTotalPriceDual(e.price1),v.setBasePriceDual(e.price1),e.drive&&(w.forEach(e.drive.items,function(e,t){if(!0===e.isDefault)return v.frm.drive=e.featureKey,v.frm.driveName=e.featureName,v.frm.driveCost=e.cost,v.setTotalPrice(e.cost),v.setTotalPriceDual(e.cost1),!1}),v.hasDrives=!0),e.colortrim&&(e.colortrim.color&&(w.forEach(e.colortrim.color.items,function(e,t){if(!0===e.isDefault)return v.ctMapping(e.id),v.frm.colortrim.exterior=e.featureKey,v.frm.colortrim.exteriorName=e.featureName,v.frm.colortrim.colorid=e.id,v.frm.colortrim.extCarousel=e.carouselImage,v.setTotalPrice(e.cost),v.setTotalPriceDual(e.cost1),!1}),v.hasColortrim=!0,v.hasColortrimExterior=!0),e.colortrim.trim)&&(w.forEach(e.colortrim.trim.items,function(e,t){if(!0===e.isDefault)return v.frm.colortrim.interior=e.featureKey,v.frm.colortrim.interiorName=e.featureName,v.frm.colortrim.trimid=e.id,v.frm.colortrim.intCarousel=e.carouselImage,v.setTotalPrice(e.cost),v.setTotalPriceDual(e.cost1),!1}),v.hasColortrim=!0,v.hasColortrimInterior=!0),e.accessories&&(e.accessories.exterior&&(w.forEach(e.accessories.exterior.items,function(e,t){!0===e.isDefault&&(e.isDefault=!1)}),v.hasAccessories=!0),e.accessories.interior&&(w.forEach(e.accessories.interior.items,function(e,t){!0===e.isDefault&&(e.isDefault=!1)}),v.hasAccessories=!0),e.accessories.optionals&&(w.forEach(e.accessories.optionals.items,function(e,t){!0===e.isDefault&&(e.isDefault=!1)}),v.hasAccessories=!0),e.accessories.specifications&&(w.forEach(e.accessories.specifications.items,function(e,t){!0===e.isDefault&&(e.isDefault=!1)}),v.hasAccessories=!0),e.accessories.utilitySafety&&(w.forEach(e.accessories.utilitySafety.items,function(e,t){!0===e.isDefault&&(e.isDefault=!1)}),v.hasAccessories=!0),e.accessories.multimedia)&&(w.forEach(e.accessories.multimedia.items,function(e,t){!0===e.isDefault&&(e.isDefault=!1)}),v.hasAccessories=!0),!1},v.setAccessories=function(e,t,a,i,n,o){o=o.target.checked&&m('#optionsPackage input[featureKey="'+e+'"]').is(":checked");t=t.toLowerCase(),void 0!==n&&0!=n&&(n=n.toString(),m("#"+n).prop("checked",!0)),a=parseFloat(a),i=parseFloat(i),o&&"true"==v.optionPackages?m('#optionsPackage input[featureKey="'+e+'"]').prop("checked",!1):t==v.tabs[0].id?null!=v.frm.accessories.exterior[e]?(delete v.frm.accessories.exterior[e],"included"==a&&0==a||(v.totalPrice=v.totalPrice-parseFloat(a)),"included"==i&&0==i||(v.totalPriceDual=v.totalPriceDual-parseFloat(i))):(v.frm.accessories.exterior[e]=!0,v.fireAnalytics(v.analytics.category.accessories,v.analytics.subcat.ext,e),"included"==a&&0==a||(v.totalPrice=v.totalPrice+parseFloat(a)),"included"==i&&0==i||(v.totalPriceDual=v.totalPriceDual+parseFloat(i))):t==v.tabs[1].id?null!=v.frm.accessories.interior[e]?(delete v.frm.accessories.interior[e],"included"==a&&0==a||(v.totalPrice=v.totalPrice-parseFloat(a)),"included"==i&&0==i||(v.totalPriceDual=v.totalPriceDual-parseFloat(i))):(v.frm.accessories.interior[e]=!0,v.fireAnalytics(v.analytics.category.accessories,v.analytics.subcat.interior,e),"included"==a&&0==a||(v.totalPrice=v.totalPrice+parseFloat(a)),"included"==i&&0==i||(v.totalPriceDual=v.totalPriceDual+parseFloat(i))):"specifications"==t?null!=v.frm.accessories.specifications[e]?(delete v.frm.accessories.specifications[e],"included"==a&&0==a||(v.totalPrice=v.totalPrice-parseFloat(a)),"included"==i&&0==i||(v.totalPriceDual=v.totalPriceDual-parseFloat(i))):(v.frm.accessories.specifications[e]=!0,v.fireAnalytics(v.analytics.category.accessories,v.analytics.subcat.specs,e),"included"==a&&0==a||(v.totalPrice=v.totalPrice+parseFloat(a)),"included"==i&&0==i||(v.totalPriceDual=v.totalPriceDual+parseFloat(i))):"utilitysafety"==t?null!=v.frm.accessories.utilitySafety[e]?(delete v.frm.accessories.utilitySafety[e],"included"==a&&0==a||(v.totalPrice=v.totalPrice-parseFloat(a)),"included"==i&&0==i||(v.totalPriceDual=v.totalPriceDual-parseFloat(i))):(v.frm.accessories.utilitySafety[e]=!0,v.fireAnalytics(v.analytics.category.accessories,v.analytics.subcat.utilsafety,e),"included"==a&&0==a||(v.totalPrice=v.totalPrice+parseFloat(a)),"included"==i&&0==i||(v.totalPriceDual=v.totalPriceDual+parseFloat(i))):"multimedia"==t?null!=v.frm.accessories.multimedia[e]?(delete v.frm.accessories.multimedia[e],"included"==a&&0==a||(v.totalPrice=v.totalPrice-parseFloat(a)),"included"==i&&0==i||(v.totalPriceDual=v.totalPriceDual-parseFloat(i))):(v.frm.accessories.multimedia[e]=!0,v.fireAnalytics(v.analytics.category.accessories,v.analytics.subcat.media,e),"included"==a&&0==a||(v.totalPrice=v.totalPrice+parseFloat(a)),"included"==i&&0==i||(v.totalPriceDual=v.totalPriceDual+parseFloat(i))):null!=v.frm.accessories.optionals[e]?(delete v.frm.accessories.optionals[e],"included"==a&&0==a||(v.totalPrice=v.totalPrice-parseFloat(a)),"included"==i&&0==i||(v.totalPriceDual=v.totalPriceDual-parseFloat(i))):(v.frm.accessories.optionals[e]=!0,v.fireAnalytics(v.analytics.category.accessories,t,e),"included"==a&&0==a||(v.totalPrice=v.totalPrice+parseFloat(a)),"included"==i&&0==i||(v.totalPriceDual=v.totalPriceDual+parseFloat(i)))},v.setOptionPrices=function(e,t,a,i,n,o){var r=o.target.checked&&m('input[featureKey="'+e.featureKey+'"]').not('#optionsPackage input[featureKey="'+e.featureKey+'"]').is(":checked"),l="";"color"==(t=(t=t.toLowerCase()).replace("optional","optionals").replace("utilitysafety","utilitySafety"))||"trim"==t||"drive"==t?("color"==t?(l="exterior",setTimeout(function(){m(".color-selection-list.color-list input").prop("checked",!1)},1e3)):"trim"==t?(l="interior",setTimeout(function(){m(".color-selection-list.trim-list input").prop("checked",!1)},1e3)):"drive"==t&&(l=t,setTimeout(function(){m(".drive-list input").prop("checked",!1)},1e3)),v.updatePrice(a,i,l,!1,e,o,!0),"drive"==t&&v.updateDrive()):r?m('input[featureKey="'+e.featureKey+'"]').not('#optionsPackage input[featureKey="'+e.featureKey+'"]').prop("checked",!1):(t=t.toLowerCase(),void 0!==n&&0!=n&&(n=n.toString(),m("#"+n).prop("checked",!0)),a=parseFloat(a),i=parseFloat(i),t==v.tabs[0].id?null!=v.frm.accessories.exterior[e.featureKey]?(delete v.frm.accessories.exterior[e.featureKey],"included"==a&&0==a||(v.totalPrice=v.totalPrice-parseFloat(a)),"included"==i&&0==i||(v.totalPriceDual=v.totalPriceDual-parseFloat(i))):(v.frm.accessories.exterior[e.featureKey]=!0,v.fireAnalytics(v.analytics.category.accessories,v.analytics.subcat.ext,e.featureKey),"included"==a&&0==a||(v.totalPrice=v.totalPrice+parseFloat(a)),"included"==i&&0==i||(v.totalPriceDual=v.totalPriceDual+parseFloat(i))):t==v.tabs[1].id?null!=v.frm.accessories.interior[e.featureKey]?(delete v.frm.accessories.interior[e.featureKey],"included"==a&&0==a||(v.totalPrice=v.totalPrice-parseFloat(a)),"included"==i&&0==i||(v.totalPriceDual=v.totalPriceDual-parseFloat(i))):(v.frm.accessories.interior[e.featureKey]=!0,v.fireAnalytics(v.analytics.category.accessories,v.analytics.subcat.interior,e.featureKey),"included"==a&&0==a||(v.totalPrice=v.totalPrice+parseFloat(a)),"included"==i&&0==i||(v.totalPriceDual=v.totalPriceDual+parseFloat(i))):"specifications"==t?null!=v.frm.accessories.specifications[e.featureKey]?(delete v.frm.accessories.specifications[e.featureKey],"included"==a&&0==a||(v.totalPrice=v.totalPrice-parseFloat(a)),"included"==i&&0==i||(v.totalPriceDual=v.totalPriceDual-parseFloat(i))):(v.frm.accessories.specifications[e.featureKey]=!0,v.fireAnalytics(v.analytics.category.accessories,v.analytics.subcat.specs,e.featureKey),"included"==a&&0==a||(v.totalPrice=v.totalPrice+parseFloat(a)),"included"==i&&0==i||(v.totalPriceDual=v.totalPriceDual+parseFloat(i))):"utilitysafety"==t?null!=v.frm.accessories.utilitySafety[e.featureKey]?(delete v.frm.accessories.utilitySafety[e.featureKey],"included"==a&&0==a||(v.totalPrice=v.totalPrice-parseFloat(a)),"included"==i&&0==i||(v.totalPriceDual=v.totalPriceDual-parseFloat(i))):(v.frm.accessories.utilitySafety[e.featureKey]=!0,v.fireAnalytics(v.analytics.category.accessories,v.analytics.subcat.utilsafety,e.featureKey),"included"==a&&0==a||(v.totalPrice=v.totalPrice+parseFloat(a)),"included"==i&&0==i||(v.totalPriceDual=v.totalPriceDual+parseFloat(i))):"multimedia"==t?null!=v.frm.accessories.multimedia[e.featureKey]?(delete v.frm.accessories.multimedia[e.featureKey],"included"==a&&0==a||(v.totalPrice=v.totalPrice-parseFloat(a)),"included"==i&&0==i||(v.totalPriceDual=v.totalPriceDual-parseFloat(i))):(v.frm.accessories.multimedia[e.featureKey]=!0,v.fireAnalytics(v.analytics.category.accessories,v.analytics.subcat.media,e.featureKey),"included"==a&&0==a||(v.totalPrice=v.totalPrice+parseFloat(a)),"included"==i&&0==i||(v.totalPriceDual=v.totalPriceDual+parseFloat(i))):null!=v.frm.accessories.optionals[e.featureKey]?(delete v.frm.accessories.optionals[e.featureKey],"included"==a&&0==a||(v.totalPrice=v.totalPrice-parseFloat(a)),"included"==i&&0==i||(v.totalPriceDual=v.totalPriceDual-parseFloat(i))):(v.frm.accessories.optionals[e.featureKey]=!0,v.fireAnalytics(v.analytics.category.accessories,t,e.featureKey),"included"==a&&0==a||(v.totalPrice=v.totalPrice+parseFloat(a)),"included"==i&&0==i||(v.totalPriceDual=v.totalPriceDual+parseFloat(i))))},v.getDrives=function(){var a,e=v.vehicle.models,i=v.frm.model;return w.forEach(e,function(e,t){e.key===i&&w.forEach(e.drive,function(e,t){return a=e,!1})}),a},v.getColorTrim=function(){var a,e=v.vehicle.models,i=v.frm.model;return w.forEach(e,function(e,t){if(e.key===i)return e.colortrim&&delete e.colortrim.label,a=e.colortrim,!1}),a},v.getAccessories=function(){var a,e=v.vehicle.models,i=v.frm.model;return w.forEach(e,function(e,t){if(e.key===i)return e.accessories&&delete e.accessories.label,a=e.accessories,!1}),a},v.getOptionPackages=function(){var a,e=v.vehicle.models,i=v.frm.model;return w.forEach(e,function(e,t){if(e.key===i)return e.optionPackage&&delete e.optionPackage.label,a=e.optionPackage,!1}),a},v.hideOptionPackages=function(e,t){return"optionals"!==e||"true"!==t},v.initAccordion=function(e){m(".nav-title-wrapper a").off("click.accordion"),p.buildandprice.accordionEvents(),v.fireAnalytics(e),g(100)},v.priceFormat=function(e,t,a,i,n,o){var r="",l="",l=t&&""!==t?t:getSymbolByMKTconfig(v.currencyFormatPattern),t=getSymbolPosition(v.currencyFormatPattern),s=getSymbolPosition(v.currencyFormatPattern1);return e=updatePriceFormat(e=setRoundingMode(e,m("#currencyFormatPattern").data("rounding-format")),"dual"===o?v.currencyFormatPattern1:v.currencyFormatPattern),(r=void 0!==i&&0!=i?void 0!==n&&0!=n?i.replace(n,""):i:r)+("dual"!=o?void 0!==a&&0!=a?e:"after"===t?e+" "+l:l+" "+e:"undefined"!=typeof ignoreCurrency1&&0!=ignoreCurrency1?e:"after"===s?e+" "+l:l+" "+e)};function l(){"left"==(m("html.rtl").length?"right":"left")?m(".build-and-price-dual .slide-menu").animate({left:"-305px"},700):m(".build-and-price-dual .slide-menu").animate({right:"-305px"},700)}v.updateColorTrim=function(e,t){},v.updateDrive=function(){},v.updatePrice=function(e,t,a,i,n,o,r){var l="",l="exterior"==a?"color":"interior"==a?"trim":a,r=(r||"true"!=v.optionPackages||setTimeout(function(){m('#optionsPackage input[name="form-'+l+'"]').prop("checked",!1)},1e3),"drive"==a&&(v.frm.driveCost=e),v.selectedItems=[],v.totalPrice),s=v.totalPriceDual,e="included"==e?0:e,t="included"==t?0:t,c=0,d=0,u=0,p=0;switch(a){case"model":w.forEach(v.vehicle.models,function(e,t){e.key==v.frm.model&&(u="included"==e.price?0:e.price,p="included"==e.price1?0:e.price1,v.fireAnalytics(v.analytics.category.model,"model",e.key))}),void 0!==i&&0!=i&&(v.modelLabel=i);break;case"drive":w.forEach(v.vehicle.models,function(e,t){e.key==v.frm.model&&w.forEach(e.drive.items,function(e,t){e.featureKey==v.frm.drive&&(u="included"==e.cost?0:e.cost,p="included"==e.cost1?0:e.cost1,v.fireAnalytics(v.analytics.category.drive,"drive",e.featureKey))})});break;case"exterior":w.forEach(v.vehicle.models,function(e,t){e.key==v.frm.model&&w.forEach(e.colortrim.color.items,function(e,t){e.featureKey==v.frm.colortrim.exterior&&(u="included"==e.cost?0:e.cost,p="included"==e.cost1?0:e.cost1,v.frm.colortrim.extCarousel=e.carouselImage,v.fireAnalytics(v.analytics.category.colortrim,v.analytics.subcat.ext,e.featureKey))})});break;case"interior":w.forEach(v.vehicle.models,function(e,t){e.key==v.frm.model&&w.forEach(e.colortrim.trim.items,function(e,t){e.featureKey==v.frm.colortrim.interior&&(u="included"==e.cost?0:e.cost,p="included"==e.cost1?0:e.cost1,v.frm.colortrim.intCarousel=e.carouselImage,v.fireAnalytics(v.analytics.category.colortrim,v.analytics.subcat.interior,e.featureKey))})})}e=parseFloat(e),u=parseFloat(u),0==e&&0!=u?c=e-u:0!=e&&0==u?c=e:0==e&&0==u?c=0:0!=e&&0!=u&&(c=e-u),t=parseFloat(t),p=parseFloat(p),0==t&&0!=p?d=t-p:0!=t&&0==p?d=0+t:0==t&&0==p?d=0:0!=t&&0!=p&&(d=t-p),v.totalPrice=r+c,v.totalPriceDual=s+d},v.setBasePrice=function(e){v.basePrice=parseFloat(e)},v.setTotalPrice=function(e){v.totalPrice=v.totalPrice+parseFloat(e)},v.setBasePriceDual=function(e){v.basePriceDual=parseFloat(e)},v.setTotalPriceDual=function(e){v.totalPriceDual=v.totalPriceDual+parseFloat(e)},v.switchTab=function(e,t){v.currentTab=e,"interior"===v.currentTab?(m(".viewport-controller-pane").attr("id","tab-int"),t&&v.fireAnalytics(v.analytics.category.colortrim,v.analytics.subcat.interior)):(m(".viewport-controller-pane").attr("id","tab-ext"),t&&v.fireAnalytics(v.analytics.category.colortrim,v.analytics.subcat.ext)),k(v.currentTab,m(".viewport-carousel#"+v.currentTab))},v.fireAnalytics=function(e,t,a){c&&(e&&t&&a?c.getBuildAndPriceBuildEvents().menu(e,t,a):e&&t?c.getBuildAndPriceBuildEvents().menu(e,t):e&&c.getBuildAndPriceBuildEvents().menu(e))},v.toggleMenu=function(e){m(".build-and-price-dual .overlay").fadeToggle(),"open"===e?"left"==(m("html.rtl").length?"right":"left")?m(".build-and-price-dual .slide-menu").animate({left:"0px"},700):m(".build-and-price-dual .slide-menu").animate({right:"0px"},700):"close"===e?l():"overlay-startBuild"===e?(m(".overlay-startBuild").show(300),m(".overlay").show(300)):"close-startBuild"===e?(m(".overlay-startBuild").hide(),m(".overlay").hide(300),l()):"open-exitConfig"===e?(m(".overlay-exitConfig").show(300),m(".overlay").show(300)):"close-exitConfig"===e?(m(".overlay-exitConfig").hide(),m(".overlay").hide(300),l()):"open-changeVehicle"===e?(m(".overlay-changeVehicle").show(300),m(".overlay").show(300)):"close-changeVehicle"===e?(m(".overlay-changeVehicle").hide(),m(".overlay").hide(300),l()):"startBuild"===e?(m(".overlay").hide(300),m(".overlay-startBuild").hide(),l(),v.initResultsObj()):"reviewSave"===e&&(l(),v.reviewAndSave())},m(".right-content-wrapper .panel-price .price .priceDrop").on("click",function(){m(this).closest(".panel-price").addClass("active")}),m(".right-content-wrapper .panel-price .priceDropdown .close-btn").on("click",function(){m(this).closest(".panel-price").removeClass("active")}),v.modelPrefix="model-item-",v.drivePrefix="drive-item-",v.colortrimPrefix="colortrim-item-",v.accessoriesPrefix="accessories-item-",v.showExtaInfo=function(e,t,a){void 0!==a&&a.preventDefault();var a=".infoball-content-wrap",i=".infoball-item",n=a+" ."+(e=e.toString())+(t=t.toString()),o=(m(n).find(".infoball-nav"),m(n).find(".prev-item")),r=m(n).prev(i).find(".feature-name"),l=m(n).find(".next-item"),s=m(n).next(i).find(".feature-name");return m(a+" "+i).removeClass("active"),m(n).hasClass("first-item last-item")?m(n).addClass("nav-disabled"):m(n).hasClass("first-item")?s.length?(m(n).removeClass("nav-disabled"),o.addClass("disabled").find(".name").html(""),l.removeClass("disabled").find(".name").html(s.text())):m(n).addClass("nav-disabled"):m(n).hasClass("last-item")?r.length?(m(n).removeClass("nav-disabled"),l.addClass("disabled").find(".name").html(""),o.removeClass("disabled").find(".name").html(r.text())):m(n).addClass("nav-disabled"):(m(n).removeClass("nav-disabled"),o.removeClass("disabled").find(".name").html(r.text()),l.removeClass("disabled").find(".name").html(s.text())),m("#"+e+t).is(":checked")?m(n).addClass("option-selected"):m(n).removeClass("option-selected"),p.buildandprice.setInfoPaddingBottom(n),m("body").addClass("infoball-modal-active"),m(n).addClass("active").closest(a).addClass("active"),p.buildandprice.changeBtn(),!1},v.removeOption=function(e,t,a){return void 0!==t&&t.preventDefault(),1==a?(e=e.toString(),m("#"+e).prop("checked",!1),m(".infoball-item."+e).removeClass("option-selected")):v.hideExtaInfo(),!1},v.hideExtaInfo=function(e){return void 0!==e&&e.preventDefault(),m(".infoball-content-wrap .infoball-item").removeClass("active"),m(".infoball-content-wrap").removeClass("active"),m("body").removeClass("infoball-modal-active"),!1},v.getSuffix=function(){var e="";return e=-1<window.location.href.indexOf("wcmmode")?"&wcmmode=disabled":e},v.linkSuffix=v.getSuffix(),v.pushUrlHashForOverlay=function(i,n,e,t,a,o){setTimeout(function(){var e="",t=window.location.href,a="Model="+i+"&Series="+n;return-1<t.indexOf("#")?(e=t.split("#")[1],!1!==d.byNameInHash("Model")&&(e=d.removeParam("Model",e)),!1!==d.byNameInHash("Series")&&(e=d.removeParam("Series",e)),!1!==d.byNameInHash("engine")&&(e=d.removeParam("engine",e)),!1!==d.byNameInHash("exteriorColor")&&(e=d.removeParam("exteriorColor",e)),!1!==d.byNameInHash("interiorColor")&&(e=d.removeParam("interiorColor",e)),-1<(e=!1!==d.byNameInHash("options")?d.removeParam("options",e):e).indexOf("?")?window.location.hash=e+"&"+a:window.location.hash=e+"?"+a):window.location.hash="?"+a},500)},v.sortBy=function(e){v.reverse=v.propertyName===e&&!v.reverse,v.propertyName=e},v.closeFullscr=function(){document.getElementById("fullScr").style.width="0%",g(100)},v.openFullscr=function(e){var t;["exterior","interior"].includes(e)&&((t=m("#"+e).data("flexslider"))?(t=t.currentSlide,v.imgNowsrc=m("#"+e+" .flex-viewport .slides div:nth-child("+(t+=1)+")").find("img").attr("data-billboard-img")):v.imgNowsrc=m(".viewport-content  .slides img:visible").attr("data-billboard-img"),document.getElementById("fullScr").style.width="100%",c.getBuildAndPriceBuildEvents().gallery(e,"expand"),g(100))},v.reviewAndSave=function(){b.attr("style",y);v.apiUrl;var a,i,n,o,r="",l="",s="",c="",d="",u="",p=v.locationNew,m=v.nameplate,h=v.totalPrice,f=v.usageType,g=v.vehicle.year;w.forEach(v.frm,function(e,t){a=v.frm.model,i=v.frm.drive,n=v.frm.colortrim.exterior,o=v.frm.colortrim.interior,r=JSON.stringify(Object.keys(v.frm.accessories.exterior)),l=JSON.stringify(Object.keys(v.frm.accessories.interior)),s=JSON.stringify(Object.keys(v.frm.accessories.optionals)),c=JSON.stringify(Object.keys(v.frm.accessories.specifications)),d=JSON.stringify(Object.keys(v.frm.accessories.utilitySafety)),u=JSON.stringify(Object.keys(v.frm.accessories.multimedia)),v.sendURL="l="+p+"&u="+f+"&n="+m+"&m="+a+"&d="+i+"&e="+n+"&t="+o+"&y="+g+"&p="+h+"&ae="+r.replace(/[\[\]"]+/g,"")+"&ai="+l.replace(/[\[\]"]+/g,"")+"&ao="+s.replace(/[\[\]"]+/g,"")+"&as="+c.replace(/[\[\]"]+/g,"")+"&au="+d.replace(/[\[\]"]+/g,"")+"&am="+u.replace(/[\[\]"]+/g,"")})},w.element(document).ready(function(){v.modelChanged=function(e,t,a){void 0!==t&&0!=t&&(v.frm.model=t),void 0!==a&&0!=a&&(a=a.toString(),m("#"+a).prop("checked",!0)),e.colortrim&&(e.colortrim.color&&e.colortrim.color.items&&e.colortrim.color.items.length&&(v.frm.colortrim.extCarousel=e.colortrim.color.items[0].carouselImage),e.colortrim.trim)&&e.colortrim.trim.items&&e.colortrim.trim.items.length&&(v.frm.colortrim.intCarousel=e.colortrim.trim.items[0].carouselImage),v.rebuildFormData(e),v.$broadcast("onModelUpdate"),v.viewportImagesExt(),v.viewportImagesInt()},v.ctMapping=function(o){v.showTrim=[],w.forEach(v.ctmap,function(e,t){if(o===e.cid)for(var a=e.tid,i=0;i<a.length;i++){var n=a[i];v.showTrim.push(n)}})},v.trimFilter=function(e){return-1!=v.showTrim.indexOf(e.id)||0==v.showTrim.length},v.colorChanged=function(e,t,a,i,n){void 0!==a&&0!=a&&("extCarousel"==e&&(v.frm.colortrim.exterior=a),"intCarousel"===e)&&(v.frm.colortrim.interior=a),v.frm.colortrim[e]=t,m(".flex-viewport .slides .flex-active-slide").find("img").removeData(),m("ul.slides").removeAttr("style"),void 0!==i&&0!=i&&""!==i?(v.viewportImagesExt(i),v.viewportImagesInt(i)):(v.viewportImagesExt(),v.viewportImagesInt())},v.slidesExt=[],v.slidesInt=[],v.$watch("frm.colortrim.exterior",function(e,t){v.viewportImagesExt()}),v.$watch("frm.colortrim.interior",function(e,t){v.viewportImagesInt()}),v.HtmlTrusted=function(e){return a.trustAsHtml(e)},v.viewportImagesExt=function(e){var t=e?e:"";if(v.frm.colortrim.extCarousel){for(var a=[],i=1;i<=v.extCarouselSize;i++)a[i-1]={image:v.frm.colortrim.extCarousel.replace("{INDEX}",i),bbImg:""===t?v.frm.colortrim.extCarousel.replace("{INDEX}",i):t};v.slidesExt=a,k(v.tabs[0].id,m(".viewport-carousel#"+v.tabs[0].id))}},v.viewportImagesInt=function(e){var t=e?e:"";if(v.frm.colortrim.intCarousel){for(var a=[],i=1;i<=v.intCarouselSize;i++)a[i-1]={image:v.frm.colortrim.intCarousel.replace("{INDEX}",i),bbImg:""===t?v.frm.colortrim.intCarousel.replace("{INDEX}",i):t};v.slidesInt=a,k(v.tabs[1].id,m(".viewport-carousel#"+v.tabs[1].id))}},v.trimData=function(e){if(e&&e.items&&0<e.items.length)for(var t,a=0;a<e.items.length;a++)e.items[a].featureName&&(t=e.items[a].featureName,e.items[a].featureName=t.toString().replace(/^\s+|\s+$/g,"")),e.items[a].cost&&(t=e.items[a].cost,e.items[a].cost=parseFloat(t))}}),e.onload=function(){var e=v.apiUrl,a=m("input.js-featureKey-list"),i="";e=(e=(e=e.replace("{NAMEPLATE}",v.nameplate)).replace("{LOCATION}",v.locationNew)).replace("{USAGETYPE}",v.usageType),v.nameplate||(v.hasData=!1),a.length&&a.each(function(e,t){i+=m(t).val()+(e!==a.length-1?",":"")}),t.get(e,{params:{featureKeys:i}}).then(function(e){if(console.log(e),e.data&&e.data.models&&0!==e.data.models.length){v.hasData=!0;var t=e.data.models.length;if(e.data.models[0].attributeDisclosure&&(o=!0),0!=t){for(var a=0;a<e.data.models.length;a++)e.data.models[a].accessories&&(v.trimData(e.data.models[a].accessories.exterior),v.trimData(e.data.models[a].accessories.interior),v.trimData(e.data.models[a].accessories.optionals));w.forEach(e.data.models[0].accessories,function(){h++}),w.forEach(e.data.models[0].colortrim,function(){f++})}v.vehicle=e.data,v.locationLabel=v.vehicle.location&&v.vehicle.location.value||v.locationLabel,v.vehicle.jsCurrencyFormat=v.vehicle.jsCurrencyFormat||{};var t=v.vehicle.jsCurrencyFormat.groupingSize||3;v.vehicle.jsCurrencyFormatRegEx=new RegExp("(\\d)(?=(\\d{"+t+"})+(?!\\d))","g"),w.forEach(v.vehicle.models,function(e,t){e.isDefault&&(v.modelLabel=v.vehicle.models[t].label)}),v.modelImgUrl=v.vehicle.models[0].imgUrl,null!=v.modelKey&&""!=v.modelKey&&null!=v.exteriorColorKey&&""!=v.exteriorColorKey&&null!=v.trimKey&&""!=v.trimKey&&(v.newparms=1,w.forEach(v.prs,function(e,t){v.prs.model=v.modelKey,v.prs.colortrim.exterior=v.exteriorColorKey,v.prs.colortrim.interior=v.trimKey,v.accext=[]})),null!=v.driveKey&&""!=v.driveKey&&0!=v.newparms&&(v.newparms=2,w.forEach(v.prs,function(e,t){v.prs.drive=v.driveKey})),null!=v.exteriorAccessoriesKeyList&&""!=v.exteriorAccessoriesKeyList&&0!=v.newparms&&(v.newparms=3,w.forEach(v.prs,function(e,t){v.accext=[];for(var a=v.exteriorAccessoriesKeyList.split(","),i=0;i<a.length;i++)v.prs.accessories.exterior[a[i]]=!0})),null!=v.interiorAccessoriesKeyList&&""!=v.interiorAccessoriesKeyList&&0!=v.newparms&&(v.newparms=4,w.forEach(v.prs,function(e,t){v.accint=[];for(var a=v.interiorAccessoriesKeyList.split(","),i=0;i<a.length;i++)v.prs.accessories.interior[a[i]]=!0})),null!=v.optionalAccessoriesKeyList&&""!=v.optionalAccessoriesKeyList&&0!=v.newparms&&(v.newparms=5,w.forEach(v.prs,function(e,t){v.accOpt=[];for(var a=v.optionalAccessoriesKeyList.split(","),i=0;i<a.length;i++)v.prs.accessories.optionals[a[i]]=!0})),null!=v.specificationsAccessoriesKeyList&&""!=v.specificationsAccessoriesKeyList&&0!=v.newparms&&(v.newparms=5,w.forEach(v.prs,function(e,t){v.accint=[];for(var a=v.specificationsAccessoriesKeyList.split(","),i=0;i<a.length;i++)v.prs.accessories.specifications[a[i]]=!0})),null!=v.utilitySafetyAccessoriesKeyList&&""!=v.utilitySafetyAccessoriesKeyList&&0!=v.newparms&&(v.newparms=5,w.forEach(v.prs,function(e,t){v.accutil=[];for(var a=v.utilitySafetyAccessoriesKeyList.split(","),i=0;i<a.length;i++)v.prs.accessories.utilitySafety[a[i]]=!0})),null!=v.multimediaAccessoriesKeyList&&""!=v.multimediaAccessoriesKeyList&&0!=v.newparms&&(v.newparms=5,w.forEach(v.prs,function(e,t){v.accmultimedia=[];for(var a=v.multimediaAccessoriesKeyList.split(","),i=0;i<a.length;i++)v.prs.accessories.multimedia[a[i]]=!0})),0!=v.newparms?v.initParamObj():v.initResultsObj(),C(1e3),m(".city-change").html()&&(t=m(".city-change").html().replace("{DATE}",v.frm.modelPricePublishDate).replace("{LOCATION}",v.vehicle.location&&v.vehicle.location.value||v.locationNew),m(".city-change").html(t)),c.getBuildAndPriceBuildEvents().load(v.vehicle.categoryName,v.vehicle.key,v.vehicle.year)}else v.hasData=!1},function(){v.hasData=!1})},v.hideSelectOption=function(){return m("body").removeClass("active-select-option"),m(".panel-price").removeClass("active"),!1}}]),app.directive("checkImage",["$q",function(n){return{restrict:"A",link:function(e,i,t){t.$observe("ngSrc",function(e){var t=n.defer(),a=new Image;return a.onerror=function(){var e=window.location.href.split("/"),e=e[0]+"//"+e[2];t.resolve(!1),i.attr("src",e+"/etc/designs/guxfoap/clientlibs/guxfoap/img/noimg.png"),i.css("display","none"),m(".color-item label img").css("display","block"),m(".fullScrContent img").css("display","block")},a.onload=function(){t.resolve(!0)},a.src=e,t.promise})}}}]),app.directive("ngRepeatRange",["$compile",function(i){return{replace:!0,scope:{from:"=",to:"=",step:"="},link:function(e,t,a){a=((e,t,a)=>{for(var i=[];e+a<=t;)i[i.length]=e+=a;return i})(e.from||0,(e.to||a.ngRepeatRange)+1,e.step||1).join(",");w.element(t).attr("ng-repeat","n in ["+a+"]"),w.element(t).removeAttr("ng-repeat-range"),i(t)(e)}}}]),app.directive("setAccordionStyling",function(){function i(e,t){var a;t&&(t=(t=e).closest("ul.setThemeColor"),e=t.data("color"),a=t.find(".nav-title-wrapper a"),t=t.find(".nav-title-wrapper a .icon-chevron-thin-down"),a.css({"background-color":"#"+e,color:"#ffffff","border-bottom":"1px solid #fff"}),t.css({"background-color":"#"+e}))}return function(e,t,a){i(t,e.$last),e.$parent.$on("onModelUpdate",function(){setTimeout(function(){i(t,e.$last)},200)})}}),m("#build-and-price-dual-wrap").each(function(e,t){w.bootstrap(t,["BuildAndPriceAngularApp"])}),n.prototype.changeBtn=function(){m(".infoball-content-wrap .action .cta-blue").on("click",function(e){return e.preventDefault(),m(this).closest(".infoball-item").addClass("option-selected"),!1})},n.prototype.setInfoPaddingBottom=function(e){m(e).find(".content-wrapper").css({"padding-bottom":m(e).find(".infoball-nav").outerHeight()+15})},n.prototype.setContainerHeights=function(){C(),m(window).on("resize",s.throttle(function(){C()},1e3)),m(window).load(function(){C(1e3)})},n.prototype.setSlideItemWidth=function(){g(),m(window).on("resize",s.throttle(function(){g()},1e3)),m(window).load(function(){g(1e3)})},n.prototype.primaryNavEvents=function(){var t=this.$primaryNav.find("a");t.on("click",function(e){e.preventDefault();var e=m(this).attr("href");m(this).hasClass("active")?m("body").addClass("active-select-option"):(t.removeClass("active"),m(this).addClass("active"),m("body").addClass("active-select-option"),e=e,m(".secondary-nav-controls").removeClass("active"),m(".secondary-nav-controls"+e).addClass("active"),C(1e3)),C()})},n.prototype.accordionEvents=function(){m(".nav-title-wrapper a").on("click.accordion",function(e){e.preventDefault();var e=m(window).width(),t=m(this).closest("li");767<e&&t.siblings("li").removeClass("active"),t.hasClass("active")?t.removeClass("active"):t.addClass("active")})},p.init=function(e){p.buildandprice=new n(e)},p}),define("build-price-review-savepage/component.buildPriceReviewSavePage",["jquery","marketConfigGlobal","_","angular","angular-route","jquery-flexslider","mediaQuery","angular-sanitize","analytics/analyticsEventLayer","utils/getParamValue","disclosure/component.disclosure","overlay/component.overlay","paymentCalculator/component.paymentCalculator"],function(y,b,n,w,e,t,a,i,C,o,k,S,x){return(app=w.module("BuildPriceReviewSaveApp",["ngRoute"])).filter("unsafe",["$sce",function(t){return function(e){return t.trustAsHtml(e)}}]),app.controller("ReviewSaveController",["$scope","$http","$window","$location",function(u,r,s,c){var e=new URL(s.location),p=(u.urlParams=n.object(n.compact(n.map(e.search.slice(1).split("&"),function(e){if(e)return n.map(e.split("="),function(e){return decodeURIComponent(e)})}))),u.nameplate=u.urlParams.n,u.nameplateKey=u.urlParams.n,u.year=u.urlParams.y,u.locationNew=u.urlParams.l||"_",u.usageType=u.urlParams.u,u.modelKey=u.urlParams.m,u.driveKey=u.urlParams.d,u.exteriorColorKey=u.urlParams.e,u.trimKey=u.urlParams.t,u.exteriorAccessoriesKeyList=u.urlParams.ae,u.interiorAccessoriesKeyList=u.urlParams.ai,u.optionalAccessoriesKeyList=u.urlParams.ao,u.safetyAccessoriesKeyList=u.urlParams.au,u.multimediaAccessoriesKeyList=u.urlParams.am,u.specAccessoriesKeyList=u.urlParams.as,u.currency=getSymbolByMKTconfig(),u.currencyFormatPattern=y("#currencyFormatPattern").val(),u.accPrice=0,u.optPrice=0,u.modelyear="",u.modeldesc="",u.seriesdesc="",u.formatedBalance="",u.polkPrice="",u.stockCount=0,u.hideAfter=0,u.showStock=!1,u.disableButton=!0,u.fewStock=!1,u.outofstock=!1,y("#countryCodeISO").attr("value")),d=y("#build-price-review-container .build-price-review-save"),m=d.attr("data-fetch-from-polk"),l=d.attr("data-remove-zero-price"),h=!1,f=d.attr("data-domain-sl"),g=d.attr("data-env-type");u.driveAwayPrice=0,u.brMarket=!1,u.brRaqYear="",u.brRaqVersion="",u.brRaqModel="",u.showFeaturesPrice=!0,u.hasLoaded=!1,u.getAvailableStock=function(){var e=y("#serviceLayerUrl").val(),t=y(".txt-billboard").data("show-count");y.ajax({url:e+"/fordleads/leads/onlineBooking/stockAvailable",type:"GET",async:!0,dataType:"json",data:{modelKey:u.nameplateKey,marketName:p},success:function(e){"024"===e.status?(u.showStock=!0,u.showStockCount=!1,u.disableButton=!1):"023"===e.status&&(u.stockCount=e.stock,Number(e.stock)<=0?(u.disableButton=!0,u.outofstock=!0):Number(e.stock)<Number(e.hideAfter)?(u.fewStock=!0,u.disableButton=!1):Number(e.hideAfter)<=Number(e.stock)&&Number(e.stock)<=Number(e.thrashold)&&(u.showStock=!0,u.disableButton=!1),1==t)&&(Number(e.stock)<Number(e.thrashold)&&Number(e.hideAfter)<Number(e.stock)?u.showStockCount=!0:u.showStockCount=!1),u.$apply()},error:function(e){console.log(e)}})},u.toggleFeaturesPrice=function(e){var t=y(e.target).closest("tr");e.preventDefault(),t.length&&t.hasClass("active")?(t.removeClass("active"),u.showFeaturesPrice=!1):(t.addClass("active"),u.showFeaturesPrice=!0)},u.pluckModel=function(a,e,i){y.each(e,function(e,t){if(t.key==a)return i.model=t,!1})},u.getLocalstoRage=function(){var e;u.financeSummaryRequestData=localStorage.getItem("requestData"),void 0!==u.financeSummaryRequestData&&null!=u.financeSummaryRequestData?(u.financeSummaryRequestData=JSON.parse(u.financeSummaryRequestData),y(u.financeSummaryRequestData).length&&(y(".financeSummary table").show(),y(".payment-button").hide(),e={url:y("#serviceLayerUrl").val()+"/fordowner/vehicle/buildandprice/credit/models/calculatePaymentForZA?",method:"GET",params:u.financeSummaryRequestData},r(e).then(function(e){200===e.data.returnCode&&setTimeout(function(){y(".financeSummary table").html(x.getFinanceSummaryTemplate(e.data)),x.setSummerySameHeight()},500)}))):(y(".payment-button").show(),y(".financeSummary").hide())};var a,i=y(".overlay-exit-bp").length,v=(u.exitBuildAndPrice=function(){window.location.href=a},y(document).ready(function(){var t;0<i&&(t=y(".buildPriceReviewSavePage"),y("a:link").click(function(e){a=y(this).attr("href"),t.is(e.target)||0!==t.has(e.target).length||(e.preventDefault(),u.toggleMenu("open-exit-bp"))})),console.log("pruebfgufd "+y('input[name="validationZone"]').val()),"true"===y('input[name="validationZone"]').val()&&(u.basePrice=u.selections.model.zone0StartingPrice,u.totalPrice=parseInt(features.total)+parseInt(u.selections.model.zone0StartingPrice),u.netPrice=u.totalPrice)}),u.toggleMenu=function(e){"open-exit-bp"===e?(y(".overlay-exit-bp").show(300),y(".overlay").show(300)):"close-exit-bp"===e&&(y(".overlay-exit-bp").hide(),y(".overlay").hide(300))},u.pluckItem=function(a,e,i,n){e&&y.each(e,function(e,t){if(t.featureKey==a)return i[n]=t,!1})},u.pluckMultipleItems=function(e,t,a,i){var n;t&&t.length&&(n=[],y.each(e.split(","),function(e,a){y.each(t,function(e,t){t.featureKey=t.featureKey.replace('"',"").replace("'",""),t.featureKey==a&&n.push(t)})}),a[i]=n)},u.getSelections=function(){function e(e,t){return{key:e,value:t}}var a,i,n,o,r,l,t=[];return t.push(e(u.yvModelLabel,u.selections.model.label)),u.selections.drive&&u.selections.drive.featureName&&!u.isPackage&&t.push(e(u.yvDriveLabel||u.driveLabel,u.selections.drive.featureName)),u.selections.model.colortrim&&(u.selections.model.colortrim.color&&t.push(e(u.yvColorLabel||u.selections.model.colortrim.color.label,u.selections.exteriorColor.featureName)),u.selections.model.colortrim.trim)&&t.push(e(u.yvTrimLabel||u.selections.model.colortrim.trim.label,u.selections.trim.featureName)),u.selections.model.accessories&&(u.selections.model.accessories.exterior&&u.exteriorAccessoriesKeyList&&(a=[],y.each(u.selections.accessoriesExt,function(e,t){a.push(t.featureName)}),t.push(e(u.yvExtAccLabel||u.selections.model.accessories.exterior.label,a.join(", ")))),u.selections.model.accessories.interior&&u.interiorAccessoriesKeyList&&(i=[],y.each(u.selections.accessoriesInt,function(e,t){i.push(t.featureName)}),t.push(e(u.yvIntAccLabel||u.selections.model.accessories.interior.label,i.join(", ")))),u.selections.model.accessories.optionals&&u.optionalAccessoriesKeyList&&(n=[],y.each(u.selections.accessoriesOpt,function(e,t){n.push(t.featureName)}),t.push(e(u.yvOptAccLabel||u.selections.model.accessories.optionals.label,n.join(", ")))),u.selections.model.accessories.utilitySafety&&u.safetyAccessoriesKeyList&&(o=[],y.each(u.selections.accessoriesSafety,function(e,t){o.push(t.featureName)}),t.push(e(u.yvSafetyAccLabel||u.selections.model.accessories.utilitySafety.label,o.join(", ")))),u.selections.model.accessories.specifications&&u.multimediaAccessoriesKeyList&&(r=[],y.each(u.selections.accessoriesSpec,function(e,t){r.push(t.featureName)}),t.push(e(u.yvSpecAccLabel||u.selections.model.accessories.specifications.label,r.join(", ")))),u.selections.model.accessories.multimedia)&&u.specAccessoriesKeyList&&(l=[],y.each(u.selections.accessoriesMultimedia,function(e,t){l.push(t.featureName)}),t.push(e(u.yvMultimediaAccLabel||u.selections.model.accessories.multimedia.label,l.join(", ")))),t},u.getFeatures=function(){function a(e,t){return t=t?parseFloat(t):0,n+=t,{label:e,price:t}}function e(e){e&&y.each(e,function(e,t){t.cost=t.cost||0,y.isNumeric(t.cost)&&i.push(a(t.featureName,t.cost))})}var i=[],n=0;u.selections.drive&&y.isNumeric(u.selections.drive.cost||0)&&u.selections.model.drive&&!u.isPackage&&i.push(a(u.selections.drive.featureName,u.selections.drive.cost)),u.selections.exteriorColor&&y.isNumeric(u.selections.exteriorColor.cost||0)&&i.push(a(u.selections.exteriorColor.featureName,u.selections.exteriorColor.cost)),u.selections.trim.featureName&&y.isNumeric(u.selections.trim.cost)&&i.push(a(u.selections.trim.featureName,u.selections.trim.cost));return e(u.selections.accessoriesExt),e(u.selections.accessoriesInt),e(u.selections.accessoriesOpt),e(u.selections.accessoriesSafety),e(u.selections.accessoriesSpec),e(u.selections.accessoriesMultimedia),{total:n,items:i}},u.numberFormat=function(e,t){var a="",i="",n=getSymbolPosition(u.currencyFormatPattern),o=y("#currencyFormatPattern").data("rounding-format");if(!e%1==0)switch(o){case"UNNECESSARY":break;case"UP":e=Math.ceil(e);break;case"DOWN":e=Math.floor(e);break;case"HALF_UP":e=!(0<=e)&&e%.5==0?Math.floor(e):Math.round(e);break;case"HALF_DOWN":e=e%.5!=0||e<0?Math.round(e):Math.floor(e);break;case"HALF_EVEN":e=e%.5==0&&Math.floor(e)%2==0?Math.floor(e):Math.round(e)}return i=t&&""!==t?t:getSymbolByMKTconfig(u.currencyFormatPattern),e||m||l?(e=updatePriceFormat(e,"IND"==p?u.currencyFormatPattern.substring(1):u.currencyFormatPattern),a="after"===n?e+" "+i:i+" "+e,m&&l&&0==parseInt(e)&&(a=l,prefix=""),"IND"===p?a.replace(/,/g," "):a):"after"===n?"0 "+i:i+" 0"},u.loadData=function(){var a,e,i,n,t=(t=u.apiUrl).replace("{NAMEPLATE}",u.nameplate).replace("{LOCATION}",u.locationNew).replace("{USAGETYPE}",u.usageType),o=(o=u.apiUrl).replace("{NAMEPLATE}",u.nameplate+"."+u.modelKey).replace("{LOCATION}",u.locationNew).replace("{USAGETYPE}",u.usageType);e=t,i=o,n=u,null==(t=void r.get(e).then(function(e){if(null!=(a=e.data)&&0<a.models.length)for(var t=0;t<a.models.length;t++)w.forEach(a.models[t],function(){if(a.models[t].key!==n.modelKey)return console.log("success response"),i})},function(e){return console.log("no data"),i}))&&(t=(t=u.apiUrl).replace("{NAMEPLATE}",u.nameplate+"."+u.modelKey).replace("{LOCATION}",u.locationNew).replace("{USAGETYPE}",u.usageType)),r.get(t).then(function(e){var t=e.data;if(t&&t.models){u.isPackage=t.isBundle,u.modelyear=t.year,u.modeldesc=t.label,(u.jsonData=t).models[0].attributeDisclosure&&(h=!0),t.jsCurrencyFormat=t.jsCurrencyFormat||{};e=t.jsCurrencyFormat.groupingSize||3;u.jsCurrencyFormatRegEx=new RegExp("(\\d)(?=(\\d{"+e+"})+(?!\\d))","g"),u.locationLabel=encodeURI(u.locationNew),t.location&&t.location.value&&(u.locationLabel=t.location.value),u.year=t.year,u.categoryName=t.categoryName;for(var a,i,n,o,r,l,s=0;s<t.models.length;s++)w.forEach(u.jsonData.models[s],function(){u.jsonData.models[s].key===u.modelKey&&(u.nameplateCrmId=u.jsonData.models[s].nameplateCrmId)});u.nameplateCrmId=u.nameplateCrmId||t.crmId,u.jsCurrencyFormat=t.jsCurrencyFormat,u.nameplateLabel=t.label,u.selections={drive:{},exteriorColor:{},trim:{},accessoriesExt:{},accessoriesInt:[],accessoriesOpt:{}},u.pluckModel(u.modelKey,t.models,u.selections),u.ValidationAccesories=y("input[name='shortNameGeo']").val(),u.country=y("input[name='countryAccessories']").val(),"true"===y("input[name='priceAccessoryState']").val()&&void 0!==u.selections.model.accessories&&(u.selections.model.accessories.utilitySafety&&w.forEach(u.selections.model.accessories.utilitySafety.items,function(e,a){e.priceState&&(e=e.priceState,e=new Function("return {"+e+"};")(),jQuery.each(e,function(e,t){""!=u.ValidationAccesories&&u.ValidationAccesories.includes(e)&&u.country==y("input[name='priceGeolocalizationCountry']").val().toUpperCase()&&(u.selections.model.accessories.utilitySafety.items[a].cost=t)}))}),u.selections.model.accessories.exterior&&w.forEach(u.selections.model.accessories.exterior.items,function(e,a){e.priceState&&(e=e.priceState,e=new Function("return {"+e+"};")(),jQuery.each(e,function(e,t){""!=u.ValidationAccesories&&u.ValidationAccesories.includes(e)&&u.country==y("input[name='priceGeolocalizationCountry']").val().toUpperCase()&&(u.selections.model.accessories.exterior.items[a].cost=t)}))}),u.selections.model.accessories.interior&&w.forEach(u.selections.model.accessories.interior.items,function(e,a){e.priceState&&(e=e.priceState,e=new Function("return {"+e+"};")(),jQuery.each(e,function(e,t){""!=u.ValidationAccesories&&u.ValidationAccesories.includes(e)&&u.country==y("input[name='priceGeolocalizationCountry']").val().toUpperCase()&&(u.selections.model.accessories.interior.items[a].cost=t)}))}),u.selections.model.accessories.optionals&&w.forEach(u.selections.model.accessories.optionals.items,function(e,a){e.priceState&&(e=e.priceState,e=new Function("return {"+e+"};")(),jQuery.each(e,function(e,t){""!=u.ValidationAccesories&&u.ValidationAccesories.includes(e)&&u.country==y("input[name='priceGeolocalizationCountry']").val().toUpperCase()&&(u.selections.model.accessories.optionals.items[a].cost=t)}))}),u.selections.model.accessories.specifications&&w.forEach(u.selections.model.accessories.specifications.items,function(e,a){e.priceState&&(e=e.priceState,e=new Function("return {"+e+"};")(),jQuery.each(e,function(e,t){""!=u.ValidationAccesories&&u.ValidationAccesories.includes(e)&&u.country==y("input[name='priceGeolocalizationCountry']").val().toUpperCase()&&(u.selections.model.accessories.specifications.items[a].cost=t)}))}),u.selections.model.accessories.multimedia)&&w.forEach(u.selections.model.accessories.multimedia.items,function(e,a){e.priceState&&(e=e.priceState,e=new Function("return {"+e+"};")(),jQuery.each(e,function(e,t){""!=u.ValidationAccesories&&u.ValidationAccesories.includes(e)&&u.country==y("input[name='priceGeolocalizationCountry']").val().toUpperCase()&&(u.selections.model.accessories.multimedia.items[a].cost=t)}))}),u.selections.model&&(u.selections.model.drive&&u.pluckItem(u.driveKey,u.selections.model.drive.items,u.selections,"drive"),u.selections.model.colortrim&&(u.selections.model.colortrim.color&&u.pluckItem(u.exteriorColorKey,u.selections.model.colortrim.color.items,u.selections,"exteriorColor"),u.selections.model.colortrim.trim)&&u.pluckItem(u.trimKey,u.selections.model.colortrim.trim.items,u.selections,"trim"),u.selections.model.accessories&&(u.selections.model.accessories.exterior&&u.pluckMultipleItems(u.exteriorAccessoriesKeyList,u.selections.model.accessories.exterior.items,u.selections,"accessoriesExt"),u.selections.model.accessories.interior&&u.pluckMultipleItems(u.interiorAccessoriesKeyList,u.selections.model.accessories.interior.items,u.selections,"accessoriesInt"),e=(e=u.selections.model.accessories.optionals)?e.items:[],u.pluckMultipleItems(u.optionalAccessoriesKeyList,e,u.selections,"accessoriesOpt"),e=(e=u.selections.model.accessories.utilitySafety)?e.items:[],u.pluckMultipleItems(u.safetyAccessoriesKeyList,e,u.selections,"accessoriesSafety"),e=(e=u.selections.model.accessories.multimedia)?e.items:[],u.pluckMultipleItems(u.multimediaAccessoriesKeyList,e,u.selections,"accessoriesMultimedia"),e=(e=u.selections.model.accessories.specifications)?e.items:[],u.pluckMultipleItems(u.specAccessoriesKeyList,e,u.selections,"accessoriesSpec")),u.modelCrmId=u.selections.model.crmId||"",u.modelPricePublishDate=u.selections.model.pricePublishDate||"",u.exteriorColorLabel=u.selections.exteriorColor.featureName,u.billboardImg=u.selections.exteriorColor.billboardImage,u.interiorColorLabel=u.selections.trim.featureName,u.transmissionImg=u.selections.drive.derivativeFeatureImage,u.exteriorColorImg=u.selections.exteriorColor.derivativeFeatureImage,u.interiorImg=u.selections.trim.derivativeFeatureImage,u.driveLabel="",u.selections.drive&&u.selections.model.drive&&(u.driveLabel=u.selections.model.drive.label,u.driveName=u.selections.drive.featureName),u.basePrice=u.selections.model.price,e=u.getFeatures(),u.features=e.items,u.totalFeaturesPrice=e.total,u.totalPrice=parseInt(e.total)+parseInt(u.selections.model.price),u.netPrice=u.totalPrice,u.bookingAmount=u.selections.model.bookingAmount,u.balanceAmount=parseInt(u.netPrice)-parseInt(u.bookingAmount),u.isOnlineBooking=u.selections.model.isOnlineBookingEnabled,u.featureSelections=u.getSelections(),console.log("prueba18"+y('input[name="validationZone"]').val()),"true"===y('input[name="validationZone"]').val()&&(u.basePrice=u.selections.model.zone0StartingPrice,u.totalPrice=parseInt(e.total)+parseInt(u.selections.model.zone0StartingPrice),u.netPrice=u.totalPrice),u.seriesdesc=u.selections.model.label,u.acckeyList="",e=u.exteriorAccessoriesKeyList&&u.interiorAccessoriesKeyList?","+u.interiorAccessoriesKeyList:u.interiorAccessoriesKeyList,a=(u.exteriorAccessoriesKeyList||u.interiorAccessoriesKeyList)&&u.optionalAccessoriesKeyList?","+u.optionalAccessoriesKeyList:u.optionalAccessoriesKeyList,i=(u.exteriorAccessoriesKeyList||u.interiorAccessoriesKeyList||u.optionalAccessoriesKeyList)&&u.safetyAccessoriesKeyList?","+u.safetyAccessoriesKeyList:u.safetyAccessoriesKeyList,n=(u.exteriorAccessoriesKeyList||u.interiorAccessoriesKeyList||u.optionalAccessoriesKeyList||u.safetyAccessoriesKeyList)&&u.multimediaAccessoriesKeyList?","+u.multimediaAccessoriesKeyList:u.multimediaAccessoriesKeyList,r=(u.exteriorAccessoriesKeyList||u.interiorAccessoriesKeyList||u.optionalAccessoriesKeyList||u.safetyAccessoriesKeyList||u.multimediaAccessoriesKeyList)&&u.specAccessoriesKeyList?","+u.specAccessoriesKeyList:u.specAccessoriesKeyList,u.acckeyList=(u.exteriorAccessoriesKeyList||"")+e+a+i+n+r,u.reqAQuoteQueryParams=["Model=",u.nameplateCrmId,"&Series=",u.modelCrmId,"&engine=",u.crmEngine,"&exteriorColor=",u.crmExteriorColor,"&interiorColor=",u.crmInteriorColor,"&options=",u.crmOptions].join(""),e={bp_k:u.nameplate,bp_n:u.nameplateLabel,bp_img:t.imgUrl,bp_fef:t.fuelEfficiencyFrom,bp_mk:u.selections.model.key,bp_mn:u.selections.model.label,bp_mp:u.selections.model.price,bp_map:u.totalFeaturesPrice,bp_mimg:u.selections.model.imgUrl},a={bp_l:u.locationNew,bp_u:u.usageType,bp_n:u.nameplate,bp_m:u.selections.model.key,bp_d:u.driveKey,bp_e:u.exteriorColorKey,bp_t:u.trimKey,bp_ae:u.exteriorAccessoriesKeyList,bp_ai:u.interiorAccessoriesKeyList,bp_ao:u.optionalAccessoriesKeyList,bp_au:u.safetyAccessoriesKeyList,bp_as:u.specAccessoriesKeyList,bp_am:u.multimediaAccessoriesKeyList,bp_dap:m,bp_mpt:d.attr("data-market-predefined-pdf-name"),bp_state:u.ValidationAccesories,bp_country:u.country,bp_country_conf:y("input[name='priceGeolocalizationCountry']").val().toUpperCase(),bp_state_geo:y('input[name="validationZone"]').val()},i={l:u.locationNew,u:u.usageType,n:u.nameplate,y:u.year,vc:u.categoryName?u.categoryName.replace(/ /g,"_"):"",m:u.selections.model.key,d:u.driveKey,e:u.exteriorColorKey,t:u.trimKey,ae:u.exteriorAccessoriesKeyList,ai:u.interiorAccessoriesKeyList,ao:u.optionalAccessoriesKeyList,au:u.safetyAccessoriesKeyList,as:u.specAccessoriesKeyList,am:u.multimediaAccessoriesKeyList},u.pdfQueryParams=y.param(a),u.backButtonQueryParams=y.param(i),u.fincalcQueryParams=y.param(e)+"&"+u.backButtonQueryParams,y(".city-change").html()&&(n=y(".city-change").html().replace("{DATE}",u.modelPricePublishDate).replace("{LOCATION}",u.locationLabel),y(".city-change").html(n)),u.hasLoaded=!0,C.getBuildAndPriceReviewEvents().load(u.categoryName,u.nameplateKey,u.year,u.modelKey,u.exteriorColorKey+":"+u.trimKey,u.exteriorAccessoriesKeyList+":"+u.interiorAccessoriesKeyList+":"+u.optionalAccessoriesKeyList+":"+u.safetyAccessoriesKeyList+":"+u.specAccessoriesKeyList+":"+u.multimediaAccessoriesKeyList,"","",u.driveKey,u.totalPrice),o=document.querySelector("[data-finance-calc]"),r=y("#serviceLayerUrl").val()+"/fordowner/vehicle/buildandprice/credit/models/checkForModel?modelKey="+u.selections.model.key,l=(l=b.GLOBAL_MARKET_CONF.marketCode)&&l.toLowerCase(),u.isOnlineBooking&&u.getAvailableStock(),y.ajax({url:r,type:"GET",async:!0,dataType:"json",success:function(e){"br"===l&&"true"===e.hideFinanceCalcCTA&&o&&o.remove()},error:function(e){console.log(e)}}))}})},u.getSuffix=function(){var e="";return e=-1<window.location.href.indexOf("wcmmode")?"&wcmmode=disabled":e},u.linkSuffix=u.getSuffix(),u.pushUrlHashForOverlay=function(e,t,a,i,n,o){C.getBuildAndPriceReviewEvents().quoteFormLoad();window.location.href;a=(a=m&&"BRA"!=p?"Model="+e+"&Series="+t+"&engine="+a+"&exteriorColor="+i+"&interiorColor="+n+"&options="+o+"&modeldesc="+u.modeldesc+"&seriesdesc="+u.seriesdesc+"&modelyear="+u.modelyear:"BRA"===p?"Model="+e+"&Series="+t+"&BRModel="+u.brRaqModel+"&BRVersion="+u.brRaqVersion+"&modelyear="+u.brRaqYear:"Model="+e+"&Series="+t).replace("/","%2f"),S.storeParam(a)},u.trackDownloadPDF=function(){C.getBuildAndPriceReviewEvents().pdfDownload()},u.trackShare=function(){C.getShareEvents().shareLaunchEvent()},u.pushHashOfFinanceCalculator=function(){setTimeout(function(){var e="",t=window.location.href;return-1<t.indexOf("#")?-1<(e=t.split("#")[1]).indexOf("?")?window.location.hash=e+"&"+u.fincalcQueryParams:window.location.hash=e+"?"+u.fincalcQueryParams:window.location.hash="?"+u.fincalcQueryParams},500)},u.onlineBooking=function(e,t){e.preventDefault();var e=y(e.target).attr("href"),a=c.absUrl(),i=u.numberFormat(u.netPrice,u.currency),n=u.netPrice,o=u.numberFormat(u.balanceAmount,u.currency),r=(u.polkPrice&&(i=u.polkPrice,n=u.driveAwayPrice),u.formatedBalance&&(o=u.formatedBalance),[]),l=(w.forEach(u.selections.accessoriesExt,function(e,t){r.push(e.featureName)}),w.forEach(u.selections.accessoriesInt,function(e,t){r.push(e.featureName)}),w.forEach(u.selections.accessoriesSafety,function(e,t){r.push(e.featureName)}),[]),i=(w.forEach(u.selections.accessoriesOpt,function(e,t){l.push(e.featureName)}),{netPrice:i,netPrice_Number:n,bookingPrice:u.numberFormat(u.bookingAmount,u.currency),bookingPrice_Number:u.bookingAmount,balancePrice:o,balancePrice_Number:u.balanceAmount,nameplate:u.nameplateLabel,modelName:u.selections.model.label,modelKey:u.selections.model.key,modelImage:encodeURIComponent(u.billboardImg),engine:u.selections.drive.featureName,color:u.selections.exteriorColor.featureName,accessories:r.join(),options:l.join(),bnpURL:encodeURIComponent(a)});s.sessionStorage.setItem("BNP.MODELDATA.OBJ",JSON.stringify(i)),s.open(e,t)},0);u.$watch("hasLoaded",function(){if(2==++v&&y(window).trigger("reviewsaveloaded"),2==v&&h){for(var e,t,a=0;a<u.jsonData.models.length;a++)w.forEach(u.jsonData.models[a],function(){u.jsonData.models[a].key===u.modelKey&&(u.jsonData.models[a].key,e=u.jsonData.models[a].attributeDisclosure,t=u.jsonData.models[a].currencySup)});var i=y(".txt-billboard .txt-price #replaceDis");t?i.html("").append('<sup class="bnpDisCurrency"  tabindex="0" style="display: inline;">'+t+" </sup>"):i.find(".bnpDisCurrency").remove(),e?i.append('<sup class="bnpDisData" data-disclosure="'+e+'" tabindex="1" style="display: inline;"> </sup>'):i.find(".bnpDisData").remove(),k.init()}var n,o,r,l,s,c,d;2==v&&m&&(c=s=l=r=o=n=0,u.selections.accessoriesExt&&y.each(u.selections.accessoriesExt,function(e,t){y.each(t,function(e,t){"cost"==e&&(n+=parseFloat(t))})}),u.selections.accessoriesInt&&y.each(u.selections.accessoriesInt,function(e,t){y.each(t,function(e,t){"cost"==e&&(o+=parseFloat(t))})}),u.selections.accessoriesSafety&&y.each(u.selections.accessoriesSafety,function(e,t){y.each(t,function(e,t){"cost"==e&&(l+=parseFloat(t))})}),u.selections.accessoriesSpec&&y.each(u.selections.accessoriesSpec,function(e,t){y.each(t,function(e,t){"cost"==e&&(s+=parseFloat(t))})}),u.selections.accessoriesMultimedia&&y.each(u.selections.accessoriesMultimedia,function(e,t){y.each(t,function(e,t){"cost"==e&&(c+=parseFloat(t))})}),u.selections.accessoriesOpt&&y.each(u.selections.accessoriesOpt,function(e,t){y.each(t,function(e,t){"cost"==e&&(r+=parseFloat(t))})}),u.accPrice=n+o+l+s+c,u.selections.trim.cost?u.optPrice=parseFloat(r)+parseFloat(u.selections.trim.cost):u.selections.exteriorColor.cost?u.optPrice=parseFloat(r)+parseFloat(u.selections.exteriorColor.cost):u.selections.trim.cost&&u.selections.exteriorColor.cost&&(u.optPrice=parseFloat(r)+parseFloat(u.selections.trim.cost)+parseFloat(u.selections.exteriorColor.cost)),setTimeout(function(){var e;e={modelKey:u.modelKey,accessoryPrice:u.accPrice,optionPrice:u.optPrice,transmissionFeatureKey:u.driveKey,location:u.locationNew,usageType:u.usageType,env:g},y.ajax({url:f,type:"GET",async:!0,data:e,dataType:"json",success:function(e){200===e.returnCode&&(u.driveAwayPrice=parseInt(e.vehicle[0].driveAwayPrice),u.polkPrice=u.numberFormat(u.driveAwayPrice,u.currency),y(".billboard-review-save .content-billboard .txt-billboard .netPrice").html("").append(u.polkPrice),u.isOnlineBooking&&(e=parseInt(u.driveAwayPrice)-parseInt(u.bookingAmount),u.formatedBalance=u.numberFormat(e,u.currency),y(".billboard-review-save .content-billboard .txt-billboard .balanceAmount").html("").append(u.formatedBalance)),y(".table-pricing tbody tr:last-child td:last-child").html("").append(u.polkPrice))},error:function(e){console.log(e)}}),y(".table-pricing .feature-line:eq(0)").hide(),y(".table-pricing tr:first-child").hide()},800),y(".billboard-review-save .content-billboard .txt-billboard .netPrice").html(""),y(".table-pricing tbody tr:last-child td:last-child").html("")),2==v&&"BRA"===p&&(u.brMarket=!0,d=u.numberFormat(u.netPrice,u.currency),setTimeout(function(){u.brRaqYear=u.year,u.brRaqVersion=u.selections.model.label,u.brRaqModel=u.nameplateLabel+"-"+d},1e3)),2==v&&"AUS"===p&&(u.auMarket=!0,setTimeout(function(){y(".build-price-review-save .table-pricing tbody tr:eq(3) .txt-price:contains('$')").append("<sup> ^<sup>"),y(".build-price-review-save .table-pricing tbody tr:eq(4) .txt-price:contains('$')").append("<sup> ^<sup>"),y(".build-price-review-save .table-pricing tbody tr:gt(4) .txt-price:contains('$')").append("<sup> 1<sup>"),y(".build-price-review-save .table-pricing tbody tr:gt(2) .txt-price").css("font-weight","normal"),y(".build-price-review-save .table-pricing tbody tr:last-child .txt-price").css("font-weight","bold")},1e3),setTimeout(function(){var e;if(y(".build-price-review-save .cols-build-price-review-left .table-vehicle tbody tr").each(function(){e=y("td:contains('Optional')").next("td").html()}),e){var t=new Array;t=(t=e.split(",")).map(function(e){return e.trim()});for(var a=0;a<=t.length-1;a++)y(".build-price-review-save .table-pricing tbody tr td span.feature-name:contains("+t[a]+")").parents("tr").find(".txt-price").find("sup").html("^")}},1500),setTimeout(function(){y(".build-price-review-save .table-pricing tbody tr:last-child .txt-price").append("<sup> * <sup>")},2500))}),s.onload=function(){u.loadData(),setTimeout(function(){u.getLocalstoRage()},500),y('input[name="validationZone"]').on("change",function(){y('input[name="validationZone"]').val()&&"true"===y('input[name="validationZone"]').val()&&(console.log("entro"),void 0!==u.selections)&&(u.basePrice=u.selections.model.zone0StartingPrice,u.totalPrice=parseInt(u.selections.model.zone0StartingPrice),u.netPrice=u.totalPrice,y(".zonePriceYes").text(u.numberFormat(u.totalPrice,u.currency)),y(".priceZonePricing").text(u.numberFormat(u.totalPrice,u.currency)),y(".zonePriceBuilding").css("display","none"),y(".zonePriceYes").css("display","block"),y(".zonePriceYes").css("visibility","visible"))})}}]),app.directive("checkImage",["$q",function(n){return{restrict:"A",link:function(e,i,t){t.$observe("ngSrc",function(e){var t=n.defer(),a=new Image;return a.onerror=function(){var e=window.location.href.split("/"),e=e[0]+"//"+e[2];t.resolve(!1),i.attr("src",e+"/etc/designs/guxfoap/clientlibs/guxfoap/img/noimg.png")},a.onload=function(){t.resolve(!0)},null!==e&&"undefined"!==e&&void 0!==e&&(a.src=e),t.promise})}}}]),y("#build-price-review-container").each(function(e,t){null!==t&&"undefined"!==t&&void 0!==t&&w.bootstrap(t,["BuildPriceReviewSaveApp"])}),{init:function(e){this.buildPriceReviewSave(e),this.heightElementBuild(e),y(".city-change").click(function(e){var t,a=y(e.target).attr("href");a&&(t=1<(t=location.href.split("?")).length?t[1]:"",t+="&c="+y(".city-change").data("locationlabel"),a+=(a.match(/\?/)?"&":"?")+t,y(e.target).attr("href",a))})},buildPriceReviewSave:function(e){e.find(".link-social-mobile .show-links").on("click",function(){y(this).next("div.content-social-m").toggleClass("dis-block")})},heightElementBuild:function(e){function t(e){y(e).css({height:"auto","min-height":"inherit"});var t=y(e).map(function(){return y(this).height()}).get(),t=Math.max.apply(null,t);y(e).css("min-height",t+"px")}992<=y(window).width()&&y(window).load(function(){t(".same-height-price-build")}),y(window).on("resize",n.throttle(function(){992<=y(window).width()?t(".same-height-price-build"):y(".same-height-price-build").css("min-height","inherit")},150))}}}),define("build-price-review-savepage-dual/component.buildPriceReviewSavePageDual",["jquery","_","angular","angular-route","jquery-flexslider","mediaQuery","angular-sanitize","analytics/analyticsEventLayer","utils/getParamValue","disclosure/component.disclosure"],function(c,n,a,e,t,i,o,r,l,s){return(app=a.module("BuildPriceReviewSaveDualApp",["ngRoute"])).filter("unsafe",["$sce",function(t){return function(e){return t.trustAsHtml(e)}}]),app.controller("ReviewSaveController",["$scope","$http","$window",function(s,t,e){var a=new URL(e.location),a=(s.urlParams=n.object(n.compact(n.map(a.search.slice(1).split("&"),function(e){if(e)return n.map(e.split("="),function(e){return decodeURIComponent(e)})}))),s.nameplate=s.urlParams.n,s.nameplateKey=s.urlParams.n,s.year=s.urlParams.y,s.locationNew=s.urlParams.l||"_",s.usageType=s.urlParams.u,s.modelKey=s.urlParams.m,s.driveKey=s.urlParams.d,s.exteriorColorKey=s.urlParams.e,s.trimKey=s.urlParams.t,s.exteriorAccessoriesKeyList=s.urlParams.ae,s.interiorAccessoriesKeyList=s.urlParams.ai,s.optionalAccessoriesKeyList=s.urlParams.ao,s.safetyAccessoriesKeyList=s.urlParams.au,s.multimediaAccessoriesKeyList=s.urlParams.am,s.specAccessoriesKeyList=s.urlParams.as,s.currencyFormatPattern=c("#currencyFormatPattern").val(),s.currencyFormatPattern1=c("#currencyFormatPattern2").val(),s.currency=getSymbolByMKTconfig(s.currencyFormatPattern),s.currency1=getSymbolByMKTconfig(s.currencyFormatPattern1),s.accPrice=0,s.optPrice=0,s.modelyear="",s.modeldesc="",s.seriesdesc="",s.isoVE=!1,c("#countryCodeISO").attr("value")),i=(s.showFeaturesPrice=!0,s.hasLoaded=!1,s.toggleFeaturesPrice=function(e){var t=c(e.target).closest("tr");e.preventDefault(),t.length&&t.hasClass("active")?(t.removeClass("active"),s.showFeaturesPrice=!1):(t.addClass("active"),s.showFeaturesPrice=!0)},s.pluckModel=function(a,e,i){c.each(e,function(e,t){if(t.key==a)return i.model=t,!1})},s.pluckItem=function(a,e,i,n){e&&c.each(e,function(e,t){if(t.featureKey==a)return i[n]=t,!1})},s.pluckMultipleItems=function(e,t,a,i){var n;t&&t.length&&(n=[],c.each(e.split(","),function(e,a){c.each(t,function(e,t){t.featureKey==a&&n.push(t)})}),a[i]=n)},s.getSelections=function(){function e(e,t){return{key:e,value:t}}var a,i,n,o,r,l,t=[];return t.push(e(s.yvModelLabel,s.selections.model.label)),s.selections.drive&&s.selections.drive.featureName&&!s.isPackage&&t.push(e(s.yvDriveLabel||s.driveLabel,s.selections.drive.featureName)),s.selections.model.colortrim&&(s.selections.model.colortrim.color&&t.push(e(s.yvColorLabel||s.selections.model.colortrim.color.label,s.selections.exteriorColor.featureName)),s.selections.model.colortrim.trim)&&t.push(e(s.yvTrimLabel||s.selections.model.colortrim.trim.label,s.selections.trim.featureName)),s.selections.model.accessories&&(s.selections.model.accessories.exterior&&s.exteriorAccessoriesKeyList&&(a=[],c.each(s.selections.accessoriesExt,function(e,t){a.push(t.featureName)}),t.push(e(s.yvExtAccLabel||s.selections.model.accessories.exterior.label,a.join(", ")))),s.selections.model.accessories.interior&&s.interiorAccessoriesKeyList&&(i=[],c.each(s.selections.accessoriesInt,function(e,t){i.push(t.featureName)}),t.push(e(s.yvIntAccLabel||s.selections.model.accessories.interior.label,i.join(", ")))),s.selections.model.accessories.optionals&&s.optionalAccessoriesKeyList&&(n=[],c.each(s.selections.accessoriesOpt,function(e,t){n.push(t.featureName)}),t.push(e(s.yvOptAccLabel||s.selections.model.accessories.optionals.label,n.join(", ")))),s.selections.model.accessories.utilitySafety&&s.safetyAccessoriesKeyList&&(o=[],c.each(s.selections.accessoriesSafety,function(e,t){o.push(t.featureName)}),t.push(e(s.yvSafetyAccLabel||s.selections.model.accessories.utilitySafety.label,o.join(", ")))),s.selections.model.accessories.specifications&&s.multimediaAccessoriesKeyList&&(r=[],c.each(s.selections.accessoriesSpec,function(e,t){r.push(t.featureName)}),t.push(e(s.yvSpecAccLabel||s.selections.model.accessories.specifications.label,r.join(", ")))),s.selections.model.accessories.multimedia)&&s.specAccessoriesKeyList&&(l=[],c.each(s.selections.accessoriesMultimedia,function(e,t){l.push(t.featureName)}),t.push(e(s.yvMultimediaAccLabel||s.selections.model.accessories.multimedia.label,l.join(", ")))),t},s.getFeatures=function(){function a(e,t,a){return t=t?parseFloat(t):0,a=a?parseFloat(a):0,n+=t,o+=a,{label:e,price:t,price1:a}}function e(e){e&&c.each(e,function(e,t){t.cost=t.cost||0,c.isNumeric(t.cost)&&i.push(a(t.featureName,t.cost,t.cost1))})}var i=[],n=0,o=0;s.selections.drive&&c.isNumeric(s.selections.drive.cost||0)&&s.selections.model.drive&&!s.isPackage&&i.push(a(s.selections.drive.featureName,s.selections.drive.cost,s.selections.drive.cost1)),s.selections.exteriorColor&&c.isNumeric(s.selections.exteriorColor.cost||0)&&i.push(a(s.selections.exteriorColor.featureName,s.selections.exteriorColor.cost,s.selections.exteriorColor.cost1)),s.selections.trim.featureName&&c.isNumeric(s.selections.trim.cost)&&i.push(a(s.selections.trim.featureName,s.selections.trim.cost,s.selections.trim.cost1));return e(s.selections.accessoriesExt),e(s.selections.accessoriesInt),e(s.selections.accessoriesOpt),e(s.selections.accessoriesSafety),e(s.selections.accessoriesSpec),e(s.selections.accessoriesMultimedia),{total:n,total1:o,items:i}},s.numberFormat=function(e,t,a){var i="",n=getSymbolPosition(s.currencyFormatPattern),o=getSymbolPosition(s.currencyFormatPattern1);return e=setRoundingMode(e,c("#currencyFormatPattern").data("rounding-format")),i=t&&""!==t?t:getSymbolByMKTconfig(s.currencyFormatPattern),e=updatePriceFormat(e,"dual"===a?s.currencyFormatPattern1:s.currencyFormatPattern),"dual"!=a?"after"===o?e+" "+i:i+" "+e:"after"===n?e+" "+i:i+" "+e},s.loadData=function(){var e=s.apiUrl;e=(e=(e=e.replace("{NAMEPLATE}",s.nameplate)).replace("{LOCATION}",s.locationNew)).replace("{USAGETYPE}",s.usageType),t.get(e).then(function(e){var t,a,i,e=e.data;e&&e.models&&(s.isPackage=e.isBundle,s.modelyear=e.year,s.modeldesc=e.label,(s.jsonData=e).models[0].attributeDisclosure&&(hasAttDisclosure=!0),e.jsCurrencyFormat=e.jsCurrencyFormat||{},t=e.jsCurrencyFormat.groupingSize||3,s.jsCurrencyFormatRegEx=new RegExp("(\\d)(?=(\\d{"+t+"})+(?!\\d))","g"),s.locationLabel=s.locationNew,e.location&&e.location.value&&(s.locationLabel=e.location.value),s.year=e.year,s.categoryName=e.categoryName,s.nameplateCrmId=e.crmId||"",s.jsCurrencyFormat=e.jsCurrencyFormat,s.nameplateLabel=e.label,s.selections={drive:{},exteriorColor:{},trim:{},accessoriesExt:{},accessoriesInt:[],accessoriesOpt:{}},s.pluckModel(s.modelKey,e.models,s.selections),s.selections.model)&&(s.selections.model.drive&&s.pluckItem(s.driveKey,s.selections.model.drive.items,s.selections,"drive"),s.selections.model.colortrim&&(s.selections.model.colortrim.color&&s.pluckItem(s.exteriorColorKey,s.selections.model.colortrim.color.items,s.selections,"exteriorColor"),s.selections.model.colortrim.trim)&&s.pluckItem(s.trimKey,s.selections.model.colortrim.trim.items,s.selections,"trim"),s.selections.model.accessories&&(s.selections.model.accessories.exterior&&s.pluckMultipleItems(s.exteriorAccessoriesKeyList,s.selections.model.accessories.exterior.items,s.selections,"accessoriesExt"),s.selections.model.accessories.interior&&s.pluckMultipleItems(s.interiorAccessoriesKeyList,s.selections.model.accessories.interior.items,s.selections,"accessoriesInt"),t=(t=s.selections.model.accessories.optionals)?t.items:[],s.pluckMultipleItems(s.optionalAccessoriesKeyList,t,s.selections,"accessoriesOpt"),t=(t=s.selections.model.accessories.utilitySafety)?t.items:[],s.pluckMultipleItems(s.safetyAccessoriesKeyList,t,s.selections,"accessoriesSafety"),t=(t=s.selections.model.accessories.multimedia)?t.items:[],s.pluckMultipleItems(s.multimediaAccessoriesKeyList,t,s.selections,"accessoriesMultimedia"),t=(t=s.selections.model.accessories.specifications)?t.items:[],s.pluckMultipleItems(s.specAccessoriesKeyList,t,s.selections,"accessoriesSpec")),s.modelCrmId=s.selections.model.crmId||"",s.modelPricePublishDate=s.selections.model.pricePublishDate||"",s.exteriorColorLabel=s.selections.exteriorColor.featureName,s.billboardImg=s.selections.exteriorColor.billboardImage,s.interiorColorLabel=s.selections.trim.featureName,s.transmissionImg=s.selections.drive.derivativeFeatureImage,s.exteriorColorImg=s.selections.exteriorColor.derivativeFeatureImage,s.interiorImg=s.selections.trim.derivativeFeatureImage,s.driveLabel="",s.selections.drive&&s.selections.model.drive&&(s.driveLabel=s.selections.model.drive.label,s.driveName=s.selections.drive.featureName),s.basePrice=s.selections.model.price,s.basePrice1=s.selections.model.price1,t=s.getFeatures(),s.features=t.items,s.totalFeaturesPrice=t.total,s.totalPrice=parseFloat(t.total)+parseFloat(s.selections.model.price),s.totalPrice1=parseFloat(t.total1)+parseFloat(s.selections.model.price1),s.netPrice=s.totalPrice,s.dualPrice=s.totalPrice1,s.featureSelections=s.getSelections(),s.seriesdesc=s.selections.model.label,s.acckeyList="",t=s.exteriorAccessoriesKeyList&&s.interiorAccessoriesKeyList?","+s.interiorAccessoriesKeyList:s.interiorAccessoriesKeyList,a=s.exteriorAccessoriesKeyList||s.interiorAccessoriesKeyList?","+s.optionalAccessoriesKeyList:s.optionalAccessoriesKeyList,i=s.exteriorAccessoriesKeyList||s.interiorAccessoriesKeyList||s.optionalAccessoriesKeyList?","+s.safetyAccessoriesKeyList:s.safetyAccessoriesKeyList,s.acckeyList=(s.exteriorAccessoriesKeyList||"")+t+a+i,s.reqAQuoteQueryParams=["Model=",s.nameplateCrmId,"&Series=",s.modelCrmId,"&engine=",s.crmEngine,"&exteriorColor=",s.crmExteriorColor,"&interiorColor=",s.crmInteriorColor,"&options=",s.crmOptions].join(""),t={bp_k:s.nameplate,bp_n:s.nameplateLabel,bp_img:e.imgUrl,bp_fef:e.fuelEfficiencyFrom,bp_mk:s.selections.model.key,bp_mn:s.selections.model.label,bp_mp:s.selections.model.price,bp_map:s.totalFeaturesPrice,bp_mimg:s.selections.model.imgUrl},a={bp_l:s.locationNew,bp_u:s.usageType,bp_n:s.nameplate,bp_m:s.selections.model.key,bp_d:s.driveKey,bp_e:s.exteriorColorKey,bp_t:s.trimKey,bp_ae:s.exteriorAccessoriesKeyList,bp_ai:s.interiorAccessoriesKeyList,bp_ao:s.optionalAccessoriesKeyList,bp_au:s.safetyAccessoriesKeyList,bp_as:s.specAccessoriesKeyList,bp_am:s.multimediaAccessoriesKeyList},i={l:s.locationNew,u:s.usageType,n:s.nameplate,y:s.year,m:s.selections.model.key,d:s.driveKey,e:s.exteriorColorKey,t:s.trimKey,ae:s.exteriorAccessoriesKeyList,ai:s.interiorAccessoriesKeyList,ao:s.optionalAccessoriesKeyList,au:s.safetyAccessoriesKeyList,as:s.specAccessoriesKeyList,am:s.multimediaAccessoriesKeyList},s.pdfQueryParams=c.param(a),s.backButtonQueryParams=c.param(i),s.fincalcQueryParams=c.param(t)+"&"+s.backButtonQueryParams,c(".city-change").html()&&(e=c(".city-change").html().replace("{DATE}",s.modelPricePublishDate).replace("{LOCATION}",s.locationLabel),c(".city-change").html(e)),s.hasLoaded=!0,r.getBuildAndPriceReviewEvents().load(s.categoryName,s.nameplateKey,s.year,s.modelKey,s.exteriorColorKey+":"+s.trimKey,s.exteriorAccessoriesKeyList+":"+s.interiorAccessoriesKeyList+":"+s.optionalAccessoriesKeyList+":"+s.safetyAccessoriesKeyList+":"+s.specAccessoriesKeyList+":"+s.multimediaAccessoriesKeyList,"","",s.driveKey,s.totalPrice))})},s.getSuffix=function(){var e="";return e=-1<window.location.href.indexOf("wcmmode")?"&wcmmode=disabled":e},s.linkSuffix=s.getSuffix(),s.pushUrlHashForOverlay=function(i,n,e,t,a,o){r.getBuildAndPriceReviewEvents().quoteFormLoad(),setTimeout(function(){var e="",t=window.location.href,a="Model="+i+"&Series="+n;return-1<t.indexOf("#")?(e=t.split("#")[1],!1!==l.byNameInHash("Model")&&(e=l.removeParam("Model",e)),!1!==l.byNameInHash("Series")&&(e=l.removeParam("Series",e)),!1!==l.byNameInHash("engine")&&(e=l.removeParam("engine",e)),!1!==l.byNameInHash("exteriorColor")&&(e=l.removeParam("exteriorColor",e)),!1!==l.byNameInHash("interiorColor")&&(e=l.removeParam("interiorColor",e)),-1<(e=!1!==l.byNameInHash("options")?l.removeParam("options",e):e).indexOf("?")?window.location.hash=e+"&"+a:window.location.hash=e+"?"+a):window.location.hash="?"+a},500)},s.pushHashOfFinanceCalculator=function(){setTimeout(function(){var e="",t=window.location.href;return-1<t.indexOf("#")?-1<(e=t.split("#")[1]).indexOf("?")?window.location.hash=e+"&"+s.fincalcQueryParams:window.location.hash=e+"?"+s.fincalcQueryParams:window.location.hash="?"+s.fincalcQueryParams},500)},"VEN"===a&&(s.isoVE=!0),c(".panel-price .price .priceDrop").on("click",function(){c(this).closest(".panel-price").addClass("active")}),c(".panel-price .priceDropdown .close-btn").on("click",function(){c(this).closest(".panel-price").removeClass("active")}),0);s.$watch("hasLoaded",function(){2==++i&&c(window).trigger("reviewsaveloaded")}),e.onload=function(){s.loadData()}}]),app.directive("checkImage",["$q",function(n){return{restrict:"A",link:function(e,i,t){t.$observe("ngSrc",function(e){var t=n.defer(),a=new Image;return a.onerror=function(){var e=window.location.href.split("/"),e=e[0]+"//"+e[2];t.resolve(!1),i.attr("src",e+"/etc/designs/guxfoap/clientlibs/guxfoap/img/noimg.png")},a.onload=function(){t.resolve(!0)},a.src=e,t.promise})}}}]),c("#build-price-review-dual-container").each(function(e,t){a.bootstrap(t,["BuildPriceReviewSaveDualApp"])}),{init:function(e){this.buildPriceReviewSave(e),this.heightElementBuild(e),c(".city-change").click(function(e){var t,a=c(e.target).attr("href");a&&(t=1<(t=location.href.split("?")).length?t[1]:"",t+="&c="+c(".city-change").data("locationlabel"),a+=(a.match(/\?/)?"&":"?")+t,c(e.target).attr("href",a))})},buildPriceReviewSave:function(e){e.find(".link-social-mobile .show-links").on("click",function(){c(this).next("div.content-social-m").toggleClass("dis-block")})},heightElementBuild:function(e){function t(e){c(e).css({height:"auto","min-height":"inherit"});var t=c(e).map(function(){return c(this).height()}).get(),t=Math.max.apply(null,t);c(e).css("min-height",t+"px")}992<=c(window).width()&&c(window).load(function(){t(".same-height-price-build")}),c(window).on("resize",n.throttle(function(){992<=c(window).width()?t(".same-height-price-build"):c(".same-height-price-build").css("min-height","inherit")},150))}}}),define("owner-download-manual/component.ownerDownloadManual",["jquery","form/component.form.validation","utils/mediaTracking","analytics/analyticsEventLayer"],function(r,t,e,n){var a={},o=r("#owner-download-manual-lang").html(),l=r("#serviceLayerUrl").val()+"/fordowner/vehicle/users/manual/downloads";function s(){var e=r(".ownerDownloadManual .textfield-vincode"),t=e.find("input[name=vincode]"),a=e.find("small");e.find(".input-field").removeClass("error"),t.removeClass("error"),a.length&&a.hide(),e.removeClass("error")}function c(t){var a=t.modelname,i=!!r("#vnamemap").text()&&JSON.parse(r("#vnamemap").text());return i&&r.each(i,function(e){if(i[e].vehicleLine==t.vehicleLine)return a=i[e].altName}),a}function d(e){r("select.owner-download-manual-year").val()!=r(e).val()&&""!=r("select.owner-download-manual-year").val()||r("select.owner-download-manual-nameplate").val()!=r(e).val()&&""!=r("select.owner-download-manual-nameplate").val()?(r(".your-vin input").prop("disabled",!0),s()):r(".your-vin input").prop("disabled",!1)}return a.init=function(){r(".your-vin input").on("input",function(e){""==r(".your-vin input").val()?(r(".owner-download-manual-nameplate.select2-offscreen").prop("disabled",!1),r("select.owner-download-manual-year").prop("disabled",!1)):(r(".owner-download-manual-nameplate.select2-offscreen").prop("disabled",!0),r("select.owner-download-manual-year").prop("disabled",!0))}),r("select.owner-download-manual-year").change(function(e){d(this)}),e={countryCodeISO:o},r.ajax({type:"POST",url:l,data:e,success:function(e){if(e.result&&void 0!==e.model&&0<e.model.length){var o=e.model;if(o)for(var t=0;t<o.length;t++)r("select.owner-download-manual-nameplate").append("<option altval='"+c(o[t])+" ' value=\""+o[t].modelname+'">'+c(o[t])+"</option>");r("select.owner-download-manual-nameplate").on("change",function(e){for(var t=!0,a=0;a<o.length;a++)if(r(this).val()==o[a].modelname){t=!1,r("select.owner-download-manual-year").html("");for(var i=1,n=0;n<o[a].vehicle.length;n++)i<o[a].vehicle[n].modelyear&&(i=o[a].vehicle[n].modelyear);o[a].vehicle=o[a].vehicle.sort(function(e,t){return e.modelyear<t.modelyear?-1:1});for(n=0;n<o[a].vehicle.length;n++)i==o[a].vehicle[n].modelyear?r("select.owner-download-manual-year").append('<option selected=true value="'+o[a].vehicle[n].modelyear+"|"+o[a].vehicle[n].id+'">'+o[a].vehicle[n].modelyear+"</option>"):r("select.owner-download-manual-year").append('<option value="'+o[a].vehicle[n].modelyear+"|"+o[a].vehicle[n].id+'">'+o[a].vehicle[n].modelyear+"</option>");r("select.owner-download-manual-year").select2({minimumResultsForSearch:1/0});break}t&&(r("select.owner-download-manual-year").html(""),r("select.owner-download-manual-year").append("<option>"+r(this).val()+"</option>"),r("select.owner-download-manual-year").select2({minimumResultsForSearch:1/0})),d(this)})}},error:function(e){}});var e,a=r(".ownerDownloadManual form"),i=(t.init(a),a.find(".form-submit a"));i.parent().append('<button class="cta-button cta-button-primary" type="submit" id="submitManual">'+i.text()+"</button>"),i.hide(),r("#submitManual").on("click",function(){n.getOwnerVehicleSupportEvents().trackManualSubmitClick();var e,t=a.find("input[name=vincode]");(e=r(".ownerDownloadManual .textfield-vincode").find("input[name=vincode]")).prop("disabled")?(s(),setTimeout(function(){s()},200)):e.trigger("blur"),t.hasClass("error")||i.click()})},a}),define("owner-download-manual/component.ownerDownloadManualOverlay",["jquery","utils/mediaTracking","analytics/analyticsEventLayer"],function(m,e,h,t){var a={},s=m("#owner-download-manual-lang").html(),i=m("#serviceLayerUrl").val(),c=m("#owner-download-manual-admin-path").html(),d=i+"/fordowner/vehicle/users/manual/year",u=i+"/fordowner/vehicle/users/manual/downloadvin",p=i+"/fordowner/vehicle/users/vehiclemanual";function f(e){var t;e.errorCode&&((t=m(".list-download")).length&&t.show().html('<span class="fail">'+getErrorMessageByCode(e.errorCode)+"</span>"),g())}function g(){m(".content-ownerdownload").find(".loading-icon").remove()}function v(e){try{return e.result?"Success"==e.message&&200==e.returnCode&&e.model&&!(e.model.length<=0||!e.model[0].manuallink||e.model[0].id<=0):void 0}catch(e){}}function y(e,t){var a=m(".list-download");if(a&&e&&0<e.length){var i,n=m("#numberButtonDisplay"),o=m("#owner-download-manual-pdf-cta"),r=m("#owner-download-manual-html-cta"),l=m("#owner-download-manual-guide-cta"),s=e.length;n&&(n=parseInt(n.val()))&&!isNaN(n)&&n<s&&(s=n);for(var c=0;c<s;c++){var d,u=e[c].buildEndDate,p=m('<p style="margin: 0;font-size:12px;-webkit-transform:scale(0.9);"></p>');p.html(u),"PDF"===e[c].type&&o?((i=o.clone()).find("a").text(e[c].categoryType),e[c].categoryType&&e[c].categoryType.length<=30?""!=e[c].buildEndDate?i.find("a").append(p):""==e[c].buildEndDate&&i.find("a").css({height:"53px","line-height":"41px"}):""!=e[c].buildEndDate&&i.find("a").append(p),d="Download "+e[c].type+" "+e[c].title,i.find("a").attr("title",d),i.find("a").attr("href",e[c].link),i.find("a").css("width","16.875rem"),a.append("<li>"+i.html()+"</li>"),t&&h.getOwnerVehicleSupportEvents().trackManualDownloadBtnClick(i.find("a"))):"HTML"===e[c].type&&r?((i=r.clone()).find("a").text(e[c].categoryType),e[c].categoryType&&e[c].categoryType.length<=30?""!=e[c].buildEndDate?i.find("a").append(p):""==e[c].buildEndDate&&i.find("a").css({height:"53px","line-height":"41px"}):""!=e[c].buildEndDate&&i.find("a").append(p),d="Download "+e[c].type+" "+e[c].title,i.find("a").attr("title",d),i.find("a").attr("href",e[c].link),i.find("a").css("width","16.875rem"),a.append("<li>"+i.html()+"</li>")):l&&((i=l.clone()).find("a").text(e[c].categoryType),e[c].categoryType&&e[c].categoryType.length<=30?""!=e[c].buildEndDate?i.find("a").append(p):""==e[c].buildEndDate&&i.find("a").css({height:"53px","line-height":"41px"}):""!=e[c].buildEndDate&&i.find("a").append(p),d="Download "+e[c].type+" "+e[c].title,i.find("a").attr("title",d),i.find("a").attr("href",e[c].link),i.find("a").css("width","16.875rem"),a.append("<li>"+i.html()+"</li>"))}}g()}return a.init=function(){var e,t,a,i,n,o,r,l;m("ul.list-download li").hide(),""==m(".your-vin input").val()?(a=m("select.owner-download-manual-nameplate").val(),e=m.trim(m("select.owner-download-manual-nameplate option[value='"+a+"']").attr("altval")),t=m("select.owner-download-manual-year").val().split("|"),i=t[0],t=t[1],m(".title-manual").text(e+" "+i),n={countryCodeISO:s,masterId:n=t},m.ajax({type:"POST",url:d,data:n,success:function(e){v(e)?y(e.model[0].manuallink,!0):f(e)},error:function(e){}}),n=c+".manual."+(n=a)+"."+i+".json",m.get(n,{},function(e){try{var t=e[0].years[0].manuals;m(t).each(function(e,t){y(t.manualLink,!0)})}catch(e){}},"JSON").fail(function(e){})):void 0!==(e=m(".your-vin input").val())&&""!=e?(null!=(n=e)&&(n=n.replace(/\s/g,"").toUpperCase()),n={countryCodeISO:s,vincode:n},m.ajax({type:"POST",url:u,data:n,success:function(e){v(e)?y(e.model[0].manuallink,!0):f(e)},error:function(e){f(e)}})):(t=m.cookie("OWNER_SESSION"),a=m.cookie("OWNER_USERNAME"),i=m("input[name=vincode]"),(()=>!!m(".tabs-nav-item.first.is-active").length)()?i.length&&(e=m(i.get(0)).val()):i.length&&1<i.length&&(e=m(i.get(1)).val()),o=e,l=a,void 0!==(r=t)&&""!=r&&(null!=o&&(o=o.replace(/\s/g,"").toUpperCase()),l={userName:l,vincode:o,sessionToken:r},m.ajax({type:"POST",url:p,data:l,success:function(e){"200"==e.returnCode?e.user&&e.user[0]&&e.user[0].vehicle&&e.user[0].vehicle[0]&&e.user[0].vehicle[0].manual&&e.user[0].vehicle[0].manual[0]&&e.user[0].vehicle[0].manual[0].manuallink&&y(e.user[0].vehicle[0].manual[0].manuallink,!1):f(e)},error:function(e){f(e)}})))},a}),define("report-sync/component.reportSync",["jquery","utils/mediaTracking","analytics/analyticsEventLayer"],function(a,e,i){var t={},n=a("#serviceLayerUrl").val()+"/fordowner/vehicle/users/profiles/Sync/report";function o(e){switch(a(".report-your-sync").hide(),a(".installation-success-overlay").hide(),a(".installation-fail-overlay").hide(),a("."+e).show(),e){case"report-your-sync":i.getOwnerMyProfileEvents().syncReportOverlayLoad();break;case"installation-fail-overlay":i.getOwnerMyProfileEvents().syncReportCompleteOverlayLoad("failed");break;case"installation-success-overlay":i.getOwnerMyProfileEvents().syncReportCompleteOverlayLoad("begin")}}return t.init=function(){o("report-your-sync"),a("#sync-upload").on("click.analyticsSyncReportBrowse",function(){i.getOwnerMyProfileEvents().syncReportCTA("browse")}),a(".report-button button").on("click",function(){var e,t;i.getOwnerMyProfileEvents().syncReportCTA("report installation"),i.getOwnerMyProfileEvents().syncReportCompleteOverlayLoad("begin"),e=a.cookie("OWNER_SESSION"),(t=new FormData).append("sessionToken",e),t.append("file",a("#sync-upload")[0].files[0]),a.ajax({type:"POST",url:n,async:!1,contentType:!1,processData:!1,cache:!1,dataType:returnJsonTypeBaseonBrowser(),data:t,success:function(e){e.result?o("installation-success-overlay"):o("installation-fail-overlay")},error:function(e){o("installation-fail-overlay")}})}),a(".installationSuccess .cta-button").each(function(){a(this).click(function(){a(".overlay-close").click()})}),a(".installationFail .cta-button").each(function(){a(this).click(function(){a(".overlay-close").click()})}),a("#sync-upload").change(function(){var e=a("#sync-upload")[0].files[0].name;a("#sync-upload").val(),a("#sync-file-name").html(e)})},t}),define("cascading-dropdown/component.cascadingDropdown",["jquery","isAuthor"],function(r,e){var t={};function a(e){this.$element=e,this.$element.length,this.bindEvents()}return a.prototype.bindEvents=function(){var a=this,i={},n=(this.$subjectSelect=this.$element.find("select[name=subject]"),this.$element.find("select[name=subCategory]")),e=this.$element.find("button"),o=this.$element.find("form");e.on("click",function(){event.preventDefault();var e=(e=a.$element.find("select[name=subject]").val())&&e.replace(/\//g,"{SLASH}"),t=(t=a.$element.find("select[name=subCategory]").val())&&t.replace(/\//g,"{SLASH}");i.searType="TAG",i.queryTerm="",i.subject=e,i.subCategory=t,a.forwardPage(o,i)}),this.$subjectSelect.on("change",function(e){e.preventDefault(),""==r(this).val()||n.is(":disabled")||r.ajax({type:"GET",url:"/cascading-dropdown.listChildTagOption.data",data:{tagID:r(this).val()},success:function(e){if(0<e.length)for(var t in r("option",n).not(":eq(0)").remove(),e)n.append('<option value="'+e[t].key+'" data-match="'+e[t].term+" "+e[t].value+'">'+e[t].value+"</option>");n.trigger("change")},error:function(e){}})})},a.prototype.forwardPage=function(e,t){e=-1!=(e=e.attr("action")).indexOf(".html")?e.replace(".html",".supportSearchResult."+t.searType+"."+t.queryTerm+"."+t.subject+"."+t.subCategory+".html"):e+".supportSearchResult."+t.searType+"."+t.queryTerm+"."+t.subject+"."+t.subCategory+".html";window.location.href=e},t.cascadingDropdown=[],t.init=function(e){e=new a(e);t.cascadingDropdown.push(e)},t}),define("single-dropdown/component.single-dropdown",["jquery","_"],function(i,e){var t={};return t.init=function(){var e,a;e=i(".single-dropdown"),a=i(".single-dropdown").val(),e.on("change",function(){var e,t;null!=i(this).val()&&a!==i(this).val()&&(-1!=i(this).val().indexOf("http")?window.location.assign(i(this).val()):-1!=i(this).val().indexOf("/")&&(t="",t=-1!=(e=i(this).val()).indexOf("#")?e:e+".html",window.location.assign(t)))})},t}),define("activate-user/component.activate-user",["jquery","_","utils/mediaTracking"],function(i,e,t){var a={};return a.init=function(){i(document).ready(function(){var e=(e=>{for(var t,a=decodeURIComponent(window.location.search.substring(1)).split("&"),i=0;i<a.length;i++)if((t=a[i].split("="))[0]===e)return void 0===t[1]||t[1]})("activateToken"),t=(void 0===e&&(e=""),getEmailKeyUrl("SUCREG")),a=i("#serviceLayerUrl").val(),e={activateToken:e,emailKey:t};"true"==i("#isLightHouse").val()&&(e.isLightHouse=!0),i.ajax({type:"POST",url:a+"/fordowner/vehicle/users/registrationCompleteEmail",dataType:returnJsonTypeBaseonBrowser(),data:e,async:!1,success:function(e){(200==e.returnCode||201==e.returnCode?i("#successText"):401==e.returnCode?i("#alreadyActivatedText"):i("#errorText")).attr("style","")},error:function(e){i("#errorText").attr("style","")}})})},a}),define("support-search/component.supportSearch",["jquery","isAuthor","utils/utils.search","analytics/analyticsEventLayer"],function(n,e,o,a){var t={};function i(e){this.$element=e,this.$element.length,this.bindEvents()}return i.prototype.bindEvents=function(){var t=this,e=this.$element.find("button"),a=this.$element.find("form"),i={searType:"Q"};e.on("click",function(e){e.preventDefault();e=a.find("input[name=q]").val();i.queryTerm=o.getRealInputSearch(e),t.setCookieSearch(),t.forwardPage(a,i)}),a.find("input[name=q]").keydown(function(e){13==e.keyCode&&(i.queryTerm=o.getRealInputSearch(n(this).val()),t.setCookieSearch(),t.forwardPage(a,i))})},i.prototype.setCookieSearch=function(){var e=n("input[type=search]").val();n.cookie("cookietxtSearch",e,{path:"/"})},i.prototype.forwardPage=function(e,t){e=-1!=(e=e.attr("action")).indexOf(".html")?e.replace(".html",".supportSearchResult."+t.searType+"."+t.queryTerm+".html"):e+".supportSearchResult."+t.searType+"."+t.queryTerm+".html";a.getCreditSupportEvents().supportSearchSubmit(t.queryTerm,"","manual"),window.location.href=e},t.supportSearch=[],t.init=function(e){e=new i(e);t.supportSearch.push(e)},t}),define("support-search-result/component.supportSearchResult",["jquery","isAuthor","analytics/analyticsEventLayer","utils/utils.search"],function(w,e,C,o){var s={},r="";function t(e){void 0===w.cookie("cookietxtSearch")?(this.$element=e,s.SEARCH_PLACEHOLDER=e.find("input[name=placeholderLabel]").val(),this.$element.length&&(this.bindEvents(),x(e,!0,1))):(s.SEARCH_PLACEHOLDER=w.cookie("cookietxtSearch"),w("input[name=search]").val(w.cookie("cookietxtSearch")),w("input[name=queryTerm]").val(w.cookie("cookietxtSearch")),this.$element=e,this.bindEvents(),x(e,!0,1),w.removeCookie("cookietxtSearch"))}function k(e,t,a,i,n){var o="",r=!1;a<n?n=a+1:r=!0;for(var l=i;l<n;l++)o=l==t?"page-number page-current":"page-number",w("<a/>").addClass(o).attr("href","#").html(l).appendTo(e);r&&w("<span/>").html("...").appendTo(e)}function S(e,t){var a,i,n,o,r,l=e.find(".search-results-list"),e=e.find("input[name=search]");e.length&&w(e).attr("placeholder",s.SEARCH_PLACEHOLDER),l.empty(),0<t.length&&(a={},i={},n={},o={},r={},w.each(t,function(e){a=w("<div/>").addClass("search-results-item").appendTo(l),i=w("<div/>").addClass("item-name").appendTo(a),n=w("<h3/>").appendTo(i),w("<a/>").attr("href",t[e].url).attr("data-analyticsPosition",e+1).html(t[e].title).appendTo(n),w(".search-results").hasClass("search-result-sa")&&(r=w("<div/>").addClass("item-url").appendTo(a),w("<a/>").addClass("search-result-link").attr("href",t[e].url).html((e=>{var t=(e=(e=-1<(e=-1<e.indexOf("?")?e.split("?")[0]:e).indexOf("/content")?"/content"+e.split("/content")[1]:e).split("/"))[1],a=e[e.length-2],i=e[e.length-1],n=null;return""!==e[0]?(n=e[0]+"//"+e[2],""!==i&&(n=3===e.length?n+"/"+i:n+"/.../"+i)):n="/"+t+"/.../"+a+"/"+i,n=-1!=n.indexOf(".html")?n.replace(".html",""):n})(t[e].url)).appendTo(r)),o=w("<div/>").addClass("item-description").appendTo(a),w("<p/>").html(t[e].excerpt).appendTo(o)}))}function x(m,h,f){var g=m.find("input[name=resultsLabel]").val(),v=m.find("input[name=noresult]").val(),y=r,e=m.find("input[name=searchType]").val(),t=(null!=e&&""!=e||(e="Q"),y=(h?m.find("input[name=queryTerm]"):(e="Q",m.find("input[name=search]"))).val(),y=o.getRealInputSearch(encodeURI(y)),m.find("input[name=subject]").val()),a=m.find("input[name=subCategory]").val(),b=m.find("input[name=numberOfResults]").val(),i=(f-1)*parseInt(b),n=window.location.pathname,n=(n=(n=-1!=n.indexOf(".")?n.substring(0,n.indexOf(".")):n).length==n.lastIndexOf("/")+1?n.substring(0,n.lastIndexOf("/")):n)+".supportSearchResult."+(e||"_")+"."+(y||"_")+"."+(t||"_")+"."+(a||"_")+"."+(i||"_")+".data";m.find(".search-results-list").empty(),m.find(".search-results-pagination .content-search").empty(),m.find("#searchError").remove(),"en_ZA"===w("[data-locale]").data("locale")?m.find(".search-results-list").append('<p style="text-align:center; margin-top:20px"><img class="loading-icon" src="/etc/designs/guxfoap/clientlibs/guxfoap/img/load.gif" style="width:30px;"></p>'):m.find(".search-results-header").append('<img class="loading-icon" src="/etc/designs/guxfoap/clientlibs/guxfoap/img/load.gif" style="width:30px;"/>'),w.ajax({type:"GET",url:n,data:{},dataType:"json",success:function(e){var t,a,i,n,o,r,l,s,c,d,u,p;m.find(".loading-icon").remove(),null!=e&&(t=e.totalMatches,m.find(".configuration").data("resultscount",t),m.find(".configuration").attr("data-resultscount",t),w(".search-results").hasClass("search-result-sa")?0<t?((c=m.find(".search-results .search-results-header .with-results")).html(e.totalMatches+" "+g),c.append('<span class="keyword"></span>'),m.find(".search-results .search-results-header .with-results .keyword").text(" '"+e.searchPhrase+"'"),m.find(".search-results .search-results-header .no-results .keyword").text("")):(m.find(".search-results .search-results-header .with-results").html(""),m.find(".search-results .search-results-header .no-results .keyword").text(v+" '"+e.searchPhrase+"'")):0<t?(m.find(".search-results .search-results-header .with-results .keyword").text(g+' "'+e.searchPhrase+'"'),m.find(".search-results .search-results-header .no-results .keyword").text("")):(m.find(".search-results .search-results-header .with-results .keyword").text(""),m.find(".search-results .search-results-header .no-results .keyword").text(v+' "'+e.searchPhrase+'"')),S(m,e.hits),w(".search-results").hasClass("search-result-sa")?(l=m,s=h,c=t,d=f,e=parseInt(b),(u=l.find(".search-results-pagination .content-search")).empty(),p=(p=Math.round(c/e))*e<c?p+1:p,c<1||p<2||(e="",e=1==d?"pagination-btn inactive pagination-previous":"pagination-btn pagination-previous",c=w("<div/>").addClass(e).attr("tabindex","-1").appendTo(u),w("<a/>").addClass("icon icon-chevron-thin-left").attr("href","#").appendTo(c),e=w("<div/>").addClass("pagination-numbers").appendTo(u),parseInt(l.find("input[name=numberOfPageDisplay]").val()),w("<span/>").html(d).addClass("current").appendTo(e),w("<span/>").html(" / ").appendTo(e),w("<span/>").html(p).addClass("total").appendTo(e),c="",c=d==p?"pagination-btn inactive pagination-next":"pagination-btn pagination-next",e=w("<div/>").addClass(c).attr("tabindex","-1").appendTo(u),w("<a/>").addClass("icon icon-chevron-thin-right").attr("href","#").appendTo(e),1<d&&w(".pagination-previous").find("a").on("click",function(){x(l,s,d-1)}),d<p&&w(".pagination-next").on("click",function(){x(l,s,d+1)}))):(i=m,n=h,u=t,o=f,e=parseInt(b),(p=i.find(".search-results-pagination .content-search")).empty(),r=(r=Math.round(u/e))*e<u?r+1:r,u<1||r<2||(e="",e=1==o?"pagination-btn inactive pagination-previous":"pagination-btn pagination-previous",u=w("<div/>").addClass(e).attr("tabindex","-1").appendTo(p),w("<a/>").addClass("icon icon-chevron-thin-left").attr("href","#").appendTo(u),e=w("<div/>").addClass("pagination-numbers").appendTo(p),u=parseInt(i.find("input[name=numberOfPageDisplay]").val()),o<u?k(e,o,r,1,u+1):k(e,o,r,o-u/2,o+u/2),e="",e=o==r?"pagination-btn inactive pagination-next":"pagination-btn pagination-next",u=w("<div/>").addClass(e).attr("tabindex","-1").appendTo(p),w("<a/>").addClass("icon icon-chevron-thin-right").attr("href","#").appendTo(u),1<o&&w(".pagination-previous").find("a").on("click",function(){x(i,n,o-1)}),o<r&&w(".pagination-next").on("click",function(){x(i,n,o+1)}),w(".pagination-numbers").find("a").each(function(){w(this).on("click",function(){x(i,n,parseInt(w(this).text()))})}))),e=m,r=y,0==(a=t)?C.getSearchEvents().searchNoResult():C.getSearchEvents().searchShowsResult(r),e.find(".search-results-item a").on("click",function(){_analytics_createCookie("resultNo",w(this).attr("data-analyticsPosition")),_analytics_createCookie("totalResultsNo",a)}))},error:function(e,t,a){m.find(".loading-icon").remove(),m.find(".search-results-header").append('<span id="searchError" style="color:red">Something went wrong with the server please try again later</span>')}})}return s.SEARCH_PLACEHOLDER=r,t.prototype.bindEvents=function(){var t=this,e=this.$element.find("button"),a=this.$element.find("form"),i=this.$element;e.on("click",function(e){e.preventDefault(),t.setCookieSearch(),i.find("input[name=subject]").val(""),i.find("input[name=subCategory]").val(""),x(i,!1,1)}),a.find("input[name=search]").keydown(function(e){13==e.keyCode&&(t.setCookieSearch(),i.find("input[name=subject]").val(""),i.find("input[name=subCategory]").val(""),x(i,!1,1))})},t.prototype.setCookieSearch=function(){var e=w("input[name=search]").val();w.cookie("cookietxtSearch",e,{path:"/"})},s.supportSearchResult=[],s.init=function(e){e=new t(e);s.supportSearchResult.push(e)},s}),define("sync-compatibility-chart/component.syncCompatibilityChart",["jquery","mediaQuery","_"],function(d,e,t){var u,i,a={};function o(){var t;d(window).width(),d(".tooltip-top-chart").width();"mobile"===e.getMediaType()?(t=d(".syncCompabilityChart .zebraChartTile-table:visible tbody tr:not(.title-row):first > td").length,document.ontouchstart,d(".tooltip-content .circle-compatibility").on("touchstart click",function(){var e=d(this).closest("td").index();d(this).offset();8<t?t-5<e?(d(".tooltip-content .tooltip-top-chart").css({right:"-20px",left:"auto"}),d(".tooltip-top-chart .arrown-tooltip").css({right:"20px",left:"auto"})):(d(".tooltip-content .tooltip-top-chart").css({left:"-20px",right:"auto"}),d(".tooltip-top-chart .arrown-tooltip").css({left:"20px",right:"auto"})):e==t-1||e==t-2||e==t-3?(d(".tooltip-content .tooltip-top-chart").css({right:"-20px",left:"auto"}),d(".tooltip-top-chart .arrown-tooltip").css({right:"20px",left:"auto"})):(d(".tooltip-content .tooltip-top-chart").css({left:"-20px",right:"auto"}),d(".tooltip-top-chart .arrown-tooltip").css({left:"20px",right:"auto"}))})):(d(".tooltip-content .circle-compatibility").hover(function(){d(window).width()/2<d(this).offset().left?(d(".tooltip-content .tooltip-top-chart").css({right:"-20px",left:"auto"}),d(".tooltip-top-chart .arrown-tooltip").css({right:"20px",left:"auto"})):(d(".tooltip-content .tooltip-top-chart").css({left:"-20px",right:"auto"}),d(".tooltip-top-chart .arrown-tooltip").css({left:"20px",right:"auto"}))}),d(".tooltip-content .circle-compatibility").mouseout(function(){d(".tooltip-content .tooltip-top-chart").css({right:"auto",left:"auto"}),d(".tooltip-top-chart .arrown-tooltip").css({right:"auto",left:"auto"})})),d(".tooltip-content .scc-deviceName").hover(function(){d(this).offset();d(".tooltip-content .tooltip-top-chart").css({left:"-20px",right:"auto"}),d(".tooltip-top-chart .arrown-tooltip").css({left:"20px",right:"auto"})}),d(".tooltip-content .scc-deviceName").mouseout(function(){d(".tooltip-content .tooltip-top-chart").css({right:"auto",left:"auto"}),d(".tooltip-top-chart .arrown-tooltip").css({right:"auto",left:"auto"})})}function r(){d(".syncCompabilityChart table").each(function(){var n,o,e,r,l,s,t,a,c;0<d(this).find("thead").length&&0<d(this).find("th").length&&(n=d(window),e=(o=d(this)).find("thead").clone(),o.addClass("sticky-enabled").css({margin:0,width:"100%"}).wrap('<div class="sticky-wrap" />'),o.hasClass("overflow-y")&&o.removeClass("overflow-y").parent().addClass("overflow-y"),o.after('<table class="zebraChartTile-table sticky-thead" />'),r=d(this).siblings(".sticky-thead"),l=d(this).siblings(".sticky-intersect"),s=d(this).parent(".sticky-wrap"),r.append(e),l.html("<thead><tr><th>"+o.find("thead th:first-child").html()+"</th></tr></thead>"),a=function(){var e,t,a,i=c();o.height()>s.height()?0<s.scrollTop()?r.add(l).css({opacity:1,top:s.scrollTop()}):r.add(l).css({opacity:0,top:0}):n.scrollTop()>o.offset().top&&n.scrollTop()<o.offset().top+o.outerHeight()-i?(i=d(".secondaryNavigation .navigation"),e=d(".secondaryNavigation .navigation").outerHeight(),t=d(".syncCompabilityChart .scc-header"),a=d(".syncCompabilityChart .scc-header:visible").outerHeight(),(d(i).hasClass("fixed")&&d(t).hasClass("fixed")||d(t).hasClass("fixed"))&&r.add(l).css({opacity:1,top:n.scrollTop()-o.offset().top+e+a})):r.add(l).css({opacity:0,top:0})},c=function(){var e=0;return o.find("tbody tr:lt(3)").each(function(){e+=d(this).height()}),e>.25*n.height()&&(e=.25*n.height()),e+=r.height()},(t=function(){o.find("thead th").each(function(e){r.find("th").eq(e).width(d(this).width())}),r.width(o.width())})(),o.parent(".sticky-wrap").scroll(d.throttle(250,function(){a()})),n.load(t).resize(d.debounce(250,function(){t(),a()})).scroll(d.throttle(250,a)))})}return a.init=function(){var t,e,a,i,n;t=null,d(".circle-compatibility,.scc-deviceName").hover(function(){var a=d(this).parent();d(a).find(".tooltip-top-chart:first").show(),t=setInterval(function(){var e=d(a).find(".tooltip-top-chart:visible:first"),t=d(e).next(".tooltip-top-chart");t.length&&(d(e).hide(),d(t).show())},4e3)},function(){window.clearInterval(t);var e=d(this).parent();d(e).find(".tooltip-top-chart").hide()}),o(),e=d(".scc-header"),a=d(".secondaryNavigation .navigation"),i=d(".zebraChartTile .zebraChartTile-table:visible").width(),n=d(".secondaryNavigation .navigation").outerHeight(),d(window).scroll(function(){d(this).scrollTop()>n?e.each(function(){d(this).addClass("fixed"),d(e).css({width:i})}):e.each(function(){d(this).removeClass("fixed")}),d(a).hasClass("fixed")?d(e).css({top:n,width:i}):d(e).css({top:0,width:i})}),r(),d(".tabPanel .tabs-nav-list .tabs-nav-item").click(function(){r(),o()}),d(".tabs-container .tabs-animator .mob-accordion-tab").click(function(){r(),o()})},d.throttle=i=function(n,o,r,l){var s,c=0;function e(){var e=this,t=+new Date-c,a=arguments;function i(){c=+new Date,r.apply(e,a)}l&&!s&&i(),s&&clearTimeout(s),l===u&&n<t?i():!0!==o&&(s=setTimeout(l?function(){s=u}:i,l===u?n-t:n))}return"boolean"!=typeof o&&(l=r,r=o,o=u),d.guid&&(e.guid=r.guid=r.guid||d.guid++),e},d.debounce=function(e,t,a){return a===u?i(e,t,!1):i(e,a,!1!==t)},a}),define("finance-option-tool/component.financeOptionTool.app",["angular"],function(e){return e.module("financeOptionTool",[])}),define("finance-option-tool/component.financeOptionTool.controllers",["finance-option-tool/component.financeOptionTool.app","finance-option-tool/controllers/financeOptionTool.controller.main"],function(e,t){e.controller("MainCtrl",["$scope",t])}),define("finance-option-tool/component.financeOptionTool",["jquery","_","angular","finance-option-tool/component.financeOptionTool.app","finance-option-tool/component.financeOptionTool.controllers"],function(t,e,a,i,n){var o={};return o.init=function(){t(".radio-question-section label"),t(document.body).on("click",".radio-question-section label",function(e){t(this);t(this).closest(".radio-question-section").find(".checked").removeClass("checked"),t(this).addClass("checked")}),t(document.body).on("click.updateHeight",".last-qu",function(e){e.preventDefault(),t(".accordion-body.active").height(t(".accordion-body.active > .accordion-content").height()),t("html, body").animate({scrollTop:0},500)}),t(document.body).on("click.scrollToAcc",".buying-description .info a.show-more-res",function(e){e.preventDefault(),t("html, body").animate({scrollTop:t(t(this).attr("href")).offset().top-20-t(".secondaryNavigation .navigation").height()},500)}),t(".finance-option-tool-wrap").length&&t(".financeOptionTool.section").each(function(e,t){a.bootstrap(t,["financeOptionTool"])})},o}),define("finance-option-tool/controllers/financeOptionTool.controller.main",["analytics/analyticsEventLayer"],function(n){return function(e,t){var r=this,a=angular.element(document.querySelector("#data-chart-json")).data("chart"),i=angular.element(document.querySelector("#data-quiz-json")).data("quiz");r.showResult=!1,r.workFlowData=[],r.isNoAnswer=!0,r.answersArray={},r.lengthQU=i.length,r.currentQU=i[0],r.currentAnsw="",r.bestProd="",r.lastQu=!1,r.finalResult="",r.chart=a,r.chartType=r.chart.type,r.series=r.chart.series,r.valuesSeries={},r.showErrorMsg=!1,Object.keys(a).length&&Object.keys(i).length?(r.calculateCurrentResult=function(e){r.isNoAnswer=!1;var a,n,o,i="asw"+r.currentQU.indexInArray;r.answersArray[i]={idAnsw:r.currentAnsw,dataAnsw:r.currentQU.answers[r.currentAnsw-1].values,dataAnswNamepalete:"",questionTitle:r.currentQU.titleOfVariants,questionExpl:r.currentQU.explanation,answerExpl:r.currentQU.answers[r.currentAnsw-1].explanation,answerTitle:r.currentQU.answers[r.currentAnsw-1].textVariant},$.each(r.currentQU.answers[r.currentAnsw-1].values[0],function(e,t){0<t&&(r.answersArray[i].dataAnswNamepalete=r.chart.series[e].nameplate)}),r.valuesSeries={},$.each(r.answersArray,function(e,t){$.each(t.dataAnsw[0],function(e,t){void 0!==r.valuesSeries[e]?r.valuesSeries[e]+=t:r.valuesSeries[e]=t})}),o=n=0,$.each(r.answersArray,function(e,t){t.dataAnswNamepalete.length&&o++}),"hbar"==r.chartType?($.each(r.valuesSeries,function(e,t){var a=100*t/o,i=1.8*a;void 0!==r.series[e]&&(r.series[e].value=Math.round(a),r.series[e].valuereg=Math.round(i)),n<t&&(n=t,r.bestProd=r.series[e].caption)}),0===o&&(a=0,$.each(r.series,function(e,t){a<t.value&&(a=t.value)}),0===a)&&$.each(r.series,function(e,t){t.value=50,t.valuereg=90})):"columns"==r.chartType&&$.each(r.valuesSeries,function(e,t){var a=100*t/o;void 0!==r.series[e]&&(r.series[e].value=Math.round(a)),n<t&&(n=t,r.bestProd=r.series[e].caption)})},r.nextQuestion=function(){var a,e=r.currentQU.indexInArray+1;e===r.lengthQU?(r.lastQu=!0,r.showResult=!0,a=0,$.each(r.valuesSeries,function(e,t){a<t&&(a=t,r.finalResult=r.series[e].caption)})):r.currentQU=i[e],r.answersArray&&r.answersArray["asw"+r.currentQU.indexInArray]?r.currentAnsw=r.answersArray["asw"+r.currentQU.indexInArray].idAnsw:r.currentAnsw="",r.lastQu?n.getCreditFinanceOptionsToolEvents().trackResultLoad(r.finalResult):n.getCreditFinanceOptionsToolEvents().trackQuestionNumber(e+1)},r.prevQuestion=function(){r.currentQU.indexInArray;var e=r.currentQU.indexInArray-1;r.currentQU=i[e],r.currentAnsw=r.answersArray["asw"+r.currentQU.indexInArray].idAnsw},r.startOver=function(){for(var e in r.showResult=!1,r.isNoAnswer=!0,r.answersArray={},r.currentQU=i[0],r.currentAnsw="",r.lastQu=!1,r.finalResult="",r.valuesSeries={},r.bestProd="",r.series)r.series[e].value=50,r.series[e].valuereg=90;n.getCreditFinanceOptionsToolEvents().trackStartOver()}):r.showErrorMsg=!0}}),define("dealer-locator-china/component.dealerLocatorChina.app",["angular"],function(e){return e.module("dealerLocatorChina",[])}),define("dealer-locator-china/component.dealerLocatorChina.controllers",["dealer-locator-china/component.dealerLocatorChina.app","dealer-locator-china/controllers/dealerLocatorChina.controller.Main","dealer-locator-china/controllers/dealerLocatorChina.controller.DealerSearch"],function(e,t,a,i){e.controller("MainController",["$scope","$filter","dealerService",t]),e.controller("DealerSearchController",["$scope","dealerService","$location",a])}),define("dealer-locator-china/component.dealerLocatorChina.directives",["dealer-locator-china/component.dealerLocatorChina.app","dealer-locator-china/directives/dealerLocatorChina.directive.autocomplete","dealer-locator-china/directives/dealerLocatorChina.directive.eventPropogation"],function(e,t,a){e.directive("sfTypeahead",["$filter",t]),e.directive("eventPropogation",["$filter",a])}),define("dealer-locator-china/component.dealerLocatorChina.filters",["dealer-locator-china/component.dealerLocatorChina.app","dealer-locator-china/filters/dealerLocatorChina.filter.encodeUriComponent"],function(e,t){e.filter("filterEncodeUriComponent",[t])}),define("dealer-locator-china/component.dealerLocatorChina",["jquery","angular","analytics/analyticsEventLayer","dealer-locator-china/component.dealerLocatorChina.app","dealer-locator-china/component.dealerLocatorChina.controllers","dealer-locator-china/component.dealerLocatorChina.directives","dealer-locator-china/component.dealerLocatorChina.services","dealer-locator-china/component.dealerLocatorChina.filters"],function(a,i,n,e,t,o,r){return{init:function(){a(".select-control");for(var e=a(".checkbox-wrap"),t=0;t<e.length;t++)a(e[t]).find('input[type="checkbox"]').is(":checked")&&a(e[t]).find("label").addClass("clicked");a(document.body).on("click",".dl-form-holder label",function(){var e=a(this);e.toggleClass("clicked"),e.closest(".wrap").find(".slide-box .form-dropdown")&&(a(".dl-form-holder .form-dropdown .select2-container").remove(),a(".dl-form-holder .form-dropdown select").removeClass("select2-offscreen").select2({minimumResultsForSearch:-1}),a("div.select-control .select2-choice .select2-chosen").unbind().bind("DOMSubtreeModified",function(){clearTimeout(void 0);setTimeout(function(){a(".dl-form-holder .form-dropdown .select2-container.select-change").remove(),a(".dl-form-holder .form-dropdown select.select-change").removeClass("select2-offscreen").select2({minimumResultsForSearch:-1})},300)}))}),a(document.body).on("click",".dealer-accordion .accordion-title",function(){a(this).hasClass("clicked")?(a(this).removeClass("clicked"),a(this).closest(".dealer-accordion").removeClass("active").find(".slide-box").height(0)):(a(this).addClass("clicked"),a(this).closest(".dealer-accordion").addClass("active").find(".slide-box").css("height","auto"),n.getDealerLocatorEvents().trackExpandDealerInfo(a(this).find(".title").text()))}),a(document.body).on("click",".dl-dealer-name-details, .dl-details span",function(){a("#dealer-locator-china .dl-results .dl-results-list").scrollTop(0)}),a(document.body).on("click",".dl-collection",function(){a(this).toggleClass("active")}),a("#dealer-locator-china").each(function(e,t){i.bootstrap(t,["dealerLocatorChina"])})}}}),define("dealer-locator-china/component.dealerLocatorChina.services",["dealer-locator-china/component.dealerLocatorChina.app","dealer-locator-china/services/dealerLocatorChina.service.Dealer"],function(e,t){e.service("dealerService",["$rootScope",t])}),define("dealer-locator-china/controllers/dealerLocatorChina.controller.DealerSearch",["common","analytics/analyticsEventLayer"],function(p,m){return function(r,l,s){var c=this,d=p.localeStorage();function u(){c.searchByLocation=!0,c.searchObjParams={},c.searchObjParams.province=l.getData().selectedProvince,c.searchObjParams.city=l.getData().selectedCity,c.searchByLocation=!0,c.dealersProvinces.forEach(function(e,t,a){e.provinceValue===c.searchObjParams.province&&(c.selectedProvince=t,e.cityList.forEach(function(e,t,a){e.cityValue===c.searchObjParams.city&&(c.selectedCity=t)}))}),c.dealersProvinces=l.getData().provinces,c.dealersCities=c.dealersProvinces[c.selectedProvince].cityList,c.showFormSearch=l.getData().showFilter,c.showErrorMsg=l.getData().errorFilter,r.$apply(),clearTimeout(void 0);setTimeout(function(){for(var e=$(".checkbox-wrap"),t=0;t<e.length;t++)$(e[t]).find('input[type="checkbox"]').is(":checked")&&$(e[t]).find("label").addClass("clicked");$(".dl-form-holder .form-dropdown .select2-container").remove(),$(".dl-form-holder .form-dropdown select").removeClass("select2-offscreen").select2({minimumResultsForSearch:-1})},1500)}c.dealerService=l,c.dealerServiceData=c.dealerService.getData(),c.selectedProvince="",c.selectedCity="",c.selectedName="",c.selectedVehicle="",c.disableCities=!0,c.searchByLocation=!1,c.searchByName=!1,c.searchByVehicle=!1,c.eDaijiaFlag=!1,c.showFormSearch=l.getData().showFilter,c.showErrorMsg=l.getData().errorFilter,c.showErrorLocation=!1,c.showErrorGetLocation=!1,c.showErrorProvince=!1,c.showErrorCity=!1,c.showErrorName=!1,c.showErrorVehicle=!1,c.disableButton=!1,c.findByGeoNav=!1,c.showGetLocation=!1,c.dealersProvinces=[],c.dealersCities=[],c.dealersNames=c.dealerServiceData.names,c.dealersVehicles=[],c.searchObjParams={},c.userLocationBasedSearch=angular.element(document.querySelector("#data-json")).data("location-based-search"),c.openSearchForm=function(){c.showFormSearch=!c.showFormSearch,l.openCloseDetails(c.showFormSearch),c.findByGeoNav=!1},c.checkIfFromMini=function(){var e,t,a,i,n,o;d?localStorage.getItem("DealersDataFromMini")&&l.getDealersFromLS():(n=(n=window.location.search).replace(/\?/,"").split("&"),o={},$.each(n,function(e,t){return t=t.split("="),o[t[0]]=t[1]}),a=t=n="",i={},(e=o).province&&e.city&&(n=decodeURI(e.province),t=decodeURI(e.city),i.province=n,i.city=t,delete e.province,delete e.city,a=window.location.origin+window.location.pathname+"?"+JSON.stringify(e).replace(/['"{}]+/g,"").replace(/[:]+/g,"=").replace(/[,]+/g,"&"),s.$$absUrl=a,c.dealerService.setDataFromURL(i),c.dealerService.getDealers(i),c.disableCities=!1,m.getDealerLocatorEvents().trackInitSearch({usingCurrentLocation:c.findByGeoNav}),u(),r.$apply()))},c.getLocation=function(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(e){c.showGetLocation=!0,r.$apply()},function(e){c.showGetLocation=!1,r.$apply()})},c.getLocation();for(var e=[],t=0;t<c.dealersNames.length;t++){var a={name:c.dealersNames[t]};e.push(a)}function i(e){resultCoordinates=e.coords.longitude+","+e.coords.latitude,c.dealerService.getDealers(c.searchObjParams,resultCoordinates,!0)}function n(){c.dealerService.getDealers(c.searchObjParams)}(o=new Bloodhound({datumTokenizer:function(e){return Bloodhound.tokenizers.whitespace(e.name)},queryTokenizer:Bloodhound.tokenizers.whitespace,local:e})).initialize(),c.namesDataset={displayKey:"name",source:o.ttAdapter()},c.options={highlight:!0},c.updateVisiblesSelects=function(){c.searchByLocation||(c.selectedProvince="",c.selectedCity="",c.showErrorProvince=!1,c.showErrorCity=!1,c.showErrorLocation=!1),c.searchByName||(c.selectedName="",c.showErrorName=!1),c.searchByVehicle||(c.selectedVehicle="",c.showErrorVehicle=!1)},c.changeProvince=function(){c.disableCities=!1,c.dealersCities=c.dealersProvinces[c.selectedProvince].cityList,c.selectedCity="",$(".city-select").find(".select2-chosen").text($($(".city-select").find("option")[0]).text()),c.showErrorLocation=!1,c.showErrorProvince=!1,c.showErrorCity=!1},c.changeCity=function(){c.showErrorProvince=!1,c.showErrorCity=!1},c.changeVehicle=function(){c.showErrorVehicle=!1},c.eDaijia=function(){},c.createSearchParams=function(){var e={},t=c.disableButton=!0;""!==c.selectedProvince&&(e.province=c.dealersProvinces[c.selectedProvince].provinceValue),""!==c.selectedCity&&(e.city=c.dealersProvinces[c.selectedProvince].cityList[c.selectedCity].cityValue),c.selectedName.length&&(e.name=c.selectedName),c.selectedVehicle.length&&(e.vehicle=c.selectedVehicle),e.eDaijiaFlag=c.eDaijiaFlag=$("#dealerFilter").prop("checked"),c.searchObjParams=e,Object.keys(c.searchObjParams).length&&(c.searchByLocation?(c.showErrorProvince=void 0===c.searchObjParams.province,c.showErrorCity=void 0===c.searchObjParams.city,c.showErrorCity&&(t=!1)):t=!(c.showErrorLocation=!0),t?navigator.geolocation&&c.userLocationBasedSearch?navigator.geolocation.getCurrentPosition(i,n):c.dealerService.getDealers(c.searchObjParams):c.disableButton=!1),m.getDealerLocatorEvents().trackInitSearch({usingCurrentLocation:c.findByGeoNav})},c.getMyLocation=function(){navigator.geolocation&&($(".dl-form-holder label[for='location']").hasClass("clicked")?(c.selectedProvince="",c.selectedCity="",setTimeout(function(){$(".dl-form-holder .form-dropdown .select2-container").remove(),$(".dl-form-holder .form-dropdown select").removeClass("select2-offscreen").select2({minimumResultsForSearch:-1})},300)):$(".dl-form-holder label[for='location']").trigger("click"),c.findByGeoNav=!0,c.searchByLocation=!0,navigator.geolocation.getCurrentPosition(function(e){e={lat:e.coords.latitude,lon:e.coords.longitude};r.$parent.mainCtrl.controllerMap.setCenter(new AMap.LngLat(e.lon,e.lat)),r.$parent.mainCtrl.controllerMap.getCity(function(e){0<e.city.length?(c.dealerService.getDealers({province:e.province,city:e.city}),c.showErrorGetLocation=!1):(c.findByGeoNav=!1,c.showErrorGetLocation=!0),c.disableButton=!1,r.$apply()})}))};var o=r.$on("provincesAdded",function(e){c.dealersProvinces=l.getData().provinces,c.dealersCities=c.dealersProvinces[0].cityList,c.checkIfFromMini(),r.$apply()}),o=(r.$on("$destroy",o),r.$on("vehiclesAdded",function(e){c.dealersVehicles=l.getData().vehicles,r.$apply()}),r.$on("$destroy",o),r.$on("filtersApplyed",function(e){c.showFormSearch=l.getData().showFilter,c.showErrorMsg=l.getData().errorFilter,c.disableButton=!1,r.$apply()})),o=(r.$on("$destroy",o),r.$on("getDealersFromMiniApplyed",function(e){c.showFormSearch=l.getData().showFilter,c.showErrorMsg=l.getData().errorFilter,c.disableButton=!1,c.disableCities=!1,u(),r.$apply()})),o=(r.$on("$destroy",o),r.$on("errorAfterSearch",function(e){c.showErrorMsg=l.getData().errorFilter,c.disableButton=!1,r.$apply()}));r.$on("$destroy",o)}}),define("dealer-locator-china/controllers/dealerLocatorChina.controller.Main",["_","mediaQuery","analytics/analyticsEventLayer"],function(h,o,f){return function(i,t,a){var l,r,s,c=this,d=$("#dealer-locator-china"),u=(c.dealerService=a,c.dealerServiceData=c.dealerService.getData(),c.collectionLimit=+angular.element(document.querySelector("#data-limit")).data("limit-dealers")?+angular.element(document.querySelector("#data-limit")).data("limit-dealers"):5,c.oldLimit=0,c.searchCompleted=!1,c.showDetailsAside=c.dealerService.getData().showDetailsAside,c.showDetail=!1,c.dealersList=[],c.selectedDealer=[],c.hideDetailsOnly=!1,c.labelUrlPrices=angular.element(document.querySelector("#data-btns")).data("label-price"),c.urlPrices=angular.element(document.querySelector("#data-btns")).data("href-price"),c.labelUrlBookTestDrive=angular.element(document.querySelector("#data-btns")).data("label-test-drive"),c.urlBookTestDrive=angular.element(document.querySelector("#data-btns")).data("href-test-drive"),c.labelUrlBookTestDriveJMC=angular.element(document.querySelector("#data-btns")).data("label-test-drive-jmc"),c.urlBookTestDriveJMC=angular.element(document.querySelector("#data-btns")).data("href-test-drive-jmc"),c.selectedDealerId="0",{}),p=new AMap.Map("map",{zoom:11.5});function m(e,t,a,i){if(c.showDetail?(d.find(".dl-results .dl-results-list").scrollTop(0),/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&$(window).width()<767&&!i&&(r=d.find(".dl-results .dl-results-list").offset().top,$("html, body").animate({scrollTop:r-10},1e3))):(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&$(window).width()<767&&!i&&(r=d.find(".dl-results .dl-results-list .result").eq(e).offset().top,$("html, body").animate({scrollTop:r-10},1e3)),r=d.find(".dl-results .dl-results-list .result").eq(e).position().top,e=d.find(".dl-results .dl-results-list").scrollTop(),e=0<r?Math.abs(r)+e:e-Math.abs(r),i?/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&$(window).width()<767&&(clearTimeout(o),o=setTimeout(function(){var e=d.find(".dl-results .dl-results-list .result").eq(c.oldLimit).offset().top;$("html, body").animate({scrollTop:e-10},1e3)},300)):d.find(".dl-results .dl-results-list").animate({scrollTop:e},1e3)),f.getDealerLocatorEvents().trackClickDealer(),s&&t.DealerID!=c.selectedDealerId&&$(".dl-info-window.info-window-content").remove(),void 0!==t._name&&($(".dl-info-window .dl-dealer-name").html(t._name),$(".dl-info-window .dl-dealer-name").attr("data-index",t._id)),void 0!==t._address&&$(".dl-info-window .dl-address-line").html(t._address),void 0!==t.PrimaryPhone){$(".dl-info-window .phones").html("");for(var n=0;n<t.DisplayPhoneNum.length;n++)$(".dl-info-window .phones").append('<p><a href="tel:'+t.DisplayPhoneNum[n]+'"><span class="icon-phone"></span>'+t.DisplayPhoneNum[n]+"</a></p>")}else $(".dl-info-window .phones").html("");void 0!==t.Fax?($(".dl-info-window .faxes").html(""),$(".dl-info-window .faxes").append('<p><span class="icon-fax"></span>'+t.Fax+"</p>")):$(".dl-info-window .faxes").html(""),void 0!==t.ctalist&&0<t.ctalist.length?($(".dl-info-window .dl-links").html(""),t.ctalist.forEach(function(e,t){$(".dl-info-window .dl-links").append('<a href="'+e.path+'" class="cta-button '+e.style+'">'+e.text+"</a>")})):$(".dl-info-window .dl-links").html(""),t.showTestDrive=!1,t.showJMCTestDrive=!1,-1==t.JVFlag.indexOf("CAF")&&-1==t.JVFlag.indexOf("FCO")||(t.showTestDrive=!0),-1!=t.JVFlag.indexOf("JMC")&&(t.showJMCTestDrive=!0);var o,r="Province="+window.encodeURIComponent(t.AdministrativeArea)+"&City="+window.encodeURIComponent(t.Locality)+"&Dealer="+window.encodeURIComponent(t._name)+"&Model="+window.encodeURIComponent(c.dealerServiceData.filterByVehicle),e=($(".dl-info-window .btn-holder").html(""),t.showTestDrive&&c.labelUrlBookTestDrive&&(i="<a target='_blank' class='cta-blue test-drive' href='"+(c.urlBookTestDrive+r)+"'>"+c.labelUrlBookTestDrive+"</a>",$(".dl-info-window .btn-holder").append(i)),t.showJMCTestDrive&&c.labelUrlBookTestDriveJMC&&(o="<a target='_blank' class='cta-blue jmc-test-drive' href='"+(c.urlBookTestDriveJMC+r)+"'>"+c.labelUrlBookTestDriveJMC+"</a>",$(".dl-info-window .btn-holder").append(o)),'<div class="dl-info-window columns info-window-content">'+$(".dl-info-window").html()+"</div>"),i=p.getZoom();s=new AMap.InfoWindow({isCustom:!0,content:e,autoMove:!1,offset:new AMap.Pixel(205,0)}),t.DealerID===c.selectedDealerId&&!a||(c.selectedDealerId=t.DealerID,s.open(p,[t._location.split(",")[0],t._location.split(",")[1]]),p.setZoomAndCenter(i,new AMap.LngLat(t._location.split(",")[0],t._location.split(",")[1]))),$(document).off("click.openDirection").on("click.openDirection",".amap-info .dl-info-window .dl-directions",function(e){f.getDealerLocatorEvents().trackClickCTA("directions"),l.search(new AMap.LngLat(u.lon,u.lat),new AMap.LngLat(t._location.split(",")[0],t._location.split(",")[1]),{},function(e,t){l.searchOnAMAP({origin:t.origin,destination:t.destination})})}),$(document).off("click.openDetailTool").on("click.openDetailTool",".amap-info .dl-info-window .dl-dealer-name-details",function(e){c.openDetail($(this).data("index"),!0)}),$(document).off("click.openInfo").on("click.openInfo","#dealer-locator-china .dl-results .dealer-details-holder .dl-dealer-name",function(e){c.selectedDealerId=t.DealerID,m(!1,t,!0)})}function n(e,t){var a,i=angular.element(document.querySelector("#data-btns")).data("isorderbydistance");if(!(c.dealersList instanceof Array||0===e.length))return!1;p.clearMap(),u.lat=c.dealerServiceData.cityCenterCord[1],u.lon=c.dealerServiceData.cityCenterCord[0],i&&(e=h.sortBy(e,"distance"));for(var n=0;n<e.length;n++){var o=e[n];e[n].catNum=e[n].DealerAffiliation.toLowerCase().split("category")[1],1==+e[n].catNum?a=$(".markers .blue").html():2==+e[n].catNum?a=$(".markers .green").html():3==+e[n].catNum&&(a=$(".markers .red").html()),r=new AMap.Marker({position:[o._location.split(",")[0],o._location.split(",")[1]],content:'<div class="map-marker">'+a+'<span class="marker-label">'+(n+1)+"</span></div>",offset:new AMap.Pixel(-31,-82),animation:"AMAP_ANIMATION_NONE",map:p}),o.index=n,r.on("click",m.bind(null,n,o))}t&&void 0!==t&&m(0,e[0],!0,!1)}c.controllerMap=p,AMap.plugin(["AMap.Driving","AMap.ToolBar"],function(){var e={policy:AMap.DrivingPolicy.LEAST_TIME};l=new AMap.Driving(e),"mobile"!==o.getMediaType()&&p.addControl(new AMap.ToolBar({ruler:!1}))}),this.addMarkers=n,$(document.body).on("click",".amap-container",function(e){$(e.target).closest(".amap-info").length||$(e.target).closest(".amap-markers").length||(s.close(),c.hideDetailsOnly=!0,i.$apply())}),$(document.body).on("click",".close-info-window",function(){s.close()}),d.find(".dl-results-header").on("mouseover",function(){c.hideDetailsOnly=!1,i.$apply()});var e=i.$on("filtersApplyed",function(e){a.getData().showFilter||(c.searchCompleted=!0,c.dealersList=c.dealerServiceData.filteredDealers,c.showDetail=!1,c.collectionLimit=+angular.element(document.querySelector("#data-limit")).data("limit-dealers")?+angular.element(document.querySelector("#data-limit")).data("limit-dealers"):5,n(t("limitTo")(c.dealersList,c.collectionLimit),!0),c.showDetailsAside=c.dealerService.getData().showDetailsAside)}),e=(i.$on("$destroy",e),i.$on("getDealersFromMiniApplyed",function(e){var i;a.getData().showFilter||(c.searchCompleted=!0,0<c.dealerServiceData.filterByVehicle.length?(i=[],c.dealerServiceData.filteredDealers.forEach(function(e,t,a){-1!==e.DealerNewVehicle.indexOf(c.dealerServiceData.filterByVehicle)&&i.push(e)}),c.dealersList=i):c.dealersList=c.dealerServiceData.filteredDealers,n(t("limitTo")(c.dealersList,c.collectionLimit),!0),c.showDetailsAside=c.dealerService.getData().showDetailsAside)})),e=(i.$on("$destroy",e),i.$on("openCloseDetails",function(e){c.showDetailsAside=c.dealerService.getData().showDetailsAside,c.hideDetailsOnly=!1}));i.$on("$destroy",e),c.openDetail=function(e,t){c.showDetail=!0;for(var a=0;a<c.dealersList.length;a++)parseInt(c.dealersList[a]._id)===parseInt(e)&&(c.selectedDealer=JSON.parse(JSON.stringify(c.dealersList[a])),c.selectedDealer.indexInArray=c.dealersList[a].index+1,c.selectedDealer.DealerNewVehicle=c.selectedDealer.DealerNewVehicle.split(","),t?i.$apply():m(c.dealersList[a].index,c.selectedDealer,!1,!1),f.getDealerLocatorEvents().trackClickDealer())},c.openInfoWindow=function(e){var t=e,a=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);f.getDealerLocatorEvents().trackClickCTA("directions"),u.lat=c.dealerServiceData.cityCenterCord[1],u.lon=c.dealerServiceData.cityCenterCord[0],a?c.newWindow(e):l.search(new AMap.LngLat(u.lon,u.lat),new AMap.LngLat(t._location.split(",")[0],t._location.split(",")[1]),{},function(e,t){l.searchOnAMAP({origin:t.origin,destination:t.destination})})},c.newWindow=function(e){var a=window.open();l.search(new AMap.LngLat(u.lon,u.lat),new AMap.LngLat(e._location.split(",")[0],e._location.split(",")[1]),{},function(e,t){t="http://m.amap.com/navigation/carmap/saddr="+t.origin.lng+","+t.origin.lat+"&daddr="+t.destination.lng+","+t.destination.lat+"&sort=dist";a.location=t})},c.showMore=function(){c.oldLimit=c.collectionLimit,c.collectionLimit=c.collectionLimit+5,n(t("limitTo")(c.dealersList,c.collectionLimit),!1),m(0,c.dealersList[0],!1,!0)},c.closeDetail=function(){c.showDetail=!1}}}),define("dealer-locator-china/services/dealerLocatorChina.service.Dealer",["_","analytics/analyticsEventLayer"],function(h,n){return function(s){var e={},c={},t=angular.element(document.querySelector("#data-json")).data("dealers-json"),a=angular.element(document.querySelector("#data-json")).data("vehicle-dropdown"),i=angular.element(document.querySelector("#data-json")).data("province-dropdown"),d=angular.element(document.querySelector("#data-urls")).data("yuntuapi"),u=angular.element(document.querySelector("#data-urls")).data("restapi"),p=angular.element(document.querySelector("#data-btns")).data("isorderbydistance"),m=angular.element(document.querySelector("#data-json")).data("cta-links");return 0<a.length&&$.ajax({url:a,dataType:"json",type:"GET"}).done(function(e){c.vehicles=e,s.$broadcast("vehiclesAdded")}).fail(function(e){}),0<i.length&&$.ajax({url:i,dataType:"json",type:"GET"}).done(function(e){c.provinces=e,s.$broadcast("provincesAdded")}).fail(function(e){}),c.dataFromServer=t,c.names=[],c.filterByVehicle="",c.cities=[],c.errorFilter=!1,c.showFilter=!0,c.filteredDealers=[],c.showDetailsAside=!0,e.getDealersFromLS=function(){var e=JSON.parse(localStorage.getItem("DealersDataFromMini"));c.cityCenterCord=e.cityCenterCord,c.errorFilter=e.errorFilter,c.filteredDealers=e.filteredDealers,c.showFilter=e.showFilter,c.selectedProvince=e.selectedProvince,c.selectedCity=e.selectedCity,n.getDealerLocatorEvents().trackInitSearch({usingCurrentLocation:!1}),localStorage.setItem("DealersDataFromMini",""),c.showDetailsAside=!0,s.$broadcast("getDealersFromMiniApplyed")},e.setDataFromURL=function(e){c.selectedProvince=e.province,c.selectedCity=e.city},e.openCloseDetails=function(e){c.showDetailsAside=!e,s.$broadcast("openCloseDetails")},e.getDealers=function(e,t,a){var i=d,n=u+e.province+e.city,o="&center=",r="&city="+e.city+"&filter=AdministrativeArea:"+e.province;function l(t){$.ajax({url:n,jsonpCallback:"jsonp_232",dataType:"JSONP",type:"GET"}).done(function(e){e.geocodes.length?(void 0===t&&(t=e.geocodes[0].location),o+=""+t,c.cityCenterCord=t.split(","),i+=""+o+r,$.ajax({url:i,jsonpCallback:"jsonp_333",dataType:"JSONP",type:"GET"}).done(function(e){var i={};c.filteredDealers=c.filterByVehicle?e.datas.filter(function(e,t,a){return-1!==e.DealerNewVehicle.indexOf(c.filterByVehicle)}):e.datas,void 0!==m&&(c.filteredDealers[0].ctalist=m),0<c.filteredDealers.length&&0<e.count?(c.showFilter=!1,c.errorFilter=!1):(c.errorFilter=!0,c.showFilter=!0),i.lat=c.cityCenterCord[1],i.lon=c.cityCenterCord[0],c.filteredDealers.forEach(function(e,t,a){e.DisplayPhoneNum=e.PrimaryPhone.replace(/\s+/g,"").split(/[;,]+/),e.PhoneForCall=e.DisplayPhoneNum[0].replace(/^\D+/g,""),e.distance=new AMap.LngLat(i.lon,i.lat).distance(new AMap.LngLat(e._location.split(",")[0],e._location.split(",")[1]))/1e3,e.distance=+e.distance.toFixed(1)}),p&&(c.filteredDealers=h.sortBy(c.filteredDealers,"distance")),c.showDetailsAside=!0,s.$broadcast("filtersApplyed")}).fail(function(e){})):(c.errorFilter=!0,c.showFilter=!0,s.$broadcast("errorAfterSearch"))}).fail(function(e){})}c.filterByVehicle=void 0!==e.vehicle?e.vehicle:"",void 0!==e.name&&(r+=" _name:"+e.name),(e=t)?l(e):l()},e.getData=function(){return c},e}}),define("dealer-locator-china/directives/dealerLocatorChina.directive.autocomplete",[],function(){return function(){return{restrict:"AC",require:"?ngModel",scope:{options:"=",datasets:"=",suggestionKey:"@"},link:function(l,s,e,c){var d=l.options||{},u=(angular.isArray(l.datasets)?l.datasets:[l.datasets])||[],t=!0;function a(){var e;t?(s.typeahead(l.options,l.datasets),t=!1):(e=s.val(),s.typeahead("destroy"),s.typeahead(l.options,l.datasets),c.$setViewValue(e),s.triggerHandler("typeahead:opened"))}function i(e,t){l.$apply(function(){var e=angular.isDefined(l.suggestionKey)?t[l.suggestionKey]:t;c.$setViewValue(e)})}a(),l.$watch("options",a),angular.isArray(l.datasets)?l.$watchCollection("datasets",a):l.$watch("datasets",a),c.$parsers.push(function(e){var t;return angular.isObject(c.$modelValue)&&e===s.typeahead("val")?c.$modelValue:(t=angular.isObject(e),!1!==d.editable||(c.$setValidity("typeahead",t),t)?e:void 0)}),c.$formatters.push(function(o){var r;return angular.isObject(o)?(r=!1,$.each(u,function(t,e){var a=e.source,e=e.displayKey||"value",n=(angular.isFunction(e)?e(o):o[e])||"";if(r)return!1;function i(e){var a,i;a=o,i=-1,angular.forEach(e,function(e,t){angular.equals(a,e)&&(i=t)}),0<=i?(c.$setViewValue(o),r=!0):c.$setViewValue(!1===d.editable?void 0:o),!r&&t!==u.length-1||setTimeout(function(){l.$apply(function(){s.typeahead("val",n)})},0)}n?a(n,i):i([])}),""):(null==o&&s.typeahead("val",null),o)}),s.bind("typeahead:selected",function(e,t,a){i(0,t),l.$emit("typeahead:selected",t,a)}),s.bind("typeahead:autocompleted",function(e,t,a){i(0,t),l.$emit("typeahead:autocompleted",t,a)}),s.bind("typeahead:opened",function(){l.$emit("typeahead:opened")}),s.bind("typeahead:closed",function(){l.$emit("typeahead:closed")}),s.bind("typeahead:asyncrequest",function(){l.$emit("typeahead:asyncrequest")}),s.bind("typeahead:asynccancel",function(){l.$emit("typeahead:asynccancel")}),s.bind("typeahead:asyncreceive",function(){l.$emit("typeahead:asyncreceive")}),s.bind("typeahead:render",function(){l.$emit("typeahead:render")}),s.bind("typeahead:cursorchanged",function(e,t,a){l.$emit("typeahead:cursorchanged",e,t,a)})}}}}),define("dealer-locator-china/directives/dealerLocatorChina.directive.eventPropogation",[],function(){return function(){return{require:"ngModel",link:function(e,t,a,i){t.on("focus blur keyup change input",function(e){e.stopPropagation()})}}}}),define("dealer-locator-china/filters/dealerLocatorChina.filter.encodeUriComponent",[],function(){return function(){return window.encodeURIComponent}}),define("mini-dealer-locator-china/component.miniDealerLocatorChina.app",["angular"],function(e){return e.module("miniDealerLocatorChina",[])}),define("mini-dealer-locator-china/component.miniDealerLocatorChina.controllers",["mini-dealer-locator-china/component.miniDealerLocatorChina.app","mini-dealer-locator-china/controllers/miniDealerLocatorChina.controller.Main"],function(e,t){e.controller("MainController",["$scope","$filter",t])}),define("mini-dealer-locator-china/component.miniDealerLocatorChina",["jquery","angular","mini-dealer-locator-china/component.miniDealerLocatorChina.app","mini-dealer-locator-china/component.miniDealerLocatorChina.controllers"],function(t,a,e,i){return{init:function(){t("div.search-form-container .select-control .select2-choice .select2-chosen").unbind().bind("DOMSubtreeModified",function(){clearTimeout(void 0);setTimeout(function(){t(".search-form-container .form-dropdown .select2-container.select-change").remove();var e=t(".search-form-container .form-dropdown select.select-change").removeClass("select2-offscreen");null!=e&&null!=e.select2&&e.select2({minimumResultsForSearch:-1})},300)}),t(window).on("load",function(){t("#mini-dealer-locator-china").length&&t("#mini-dealer-locator-china").each(function(e,t){a.bootstrap(t,["miniDealerLocatorChina"])})}),clearTimeout(void 0),setTimeout(function(){t(".search-form-container .form-dropdown .select2-container").remove();var e=t(".search-form-container .form-dropdown select").removeClass("select2-offscreen");null!=e&&null!=e.select2&&e.select2({minimumResultsForSearch:-1})},500)}}}),define("mini-dealer-locator-china/controllers/miniDealerLocatorChina.controller.Main",["_","common","analytics/analyticsEventLayer","analytics/analyticsPageLayer"],function(e,n,f,g){return function(c,e){var d=this,t=(d.useMobileLocation=!0,angular.element(document.querySelector("#data-json-locations")).data("json")),u=angular.element(document.querySelector("#data-rest-url")).data("yuntuapi"),p=angular.element(document.querySelector("#data-rest-url")).data("restapi"),m=angular.element(document.querySelector("#data-search-url")).data("url"),a=new AMap.Map("map",{zoom:10}),h=n.localeStorage();function i(e,t){var a=u,i=p+e+t,n="&center=",o={},r="&filter=AdministrativeArea:"+e+" Locality:"+t,l="",s=m;0<window.location.search.length&&(l=window.location.search),o.selectedProvince=e,o.selectedCity=t,$.ajax({url:i,jsonpCallback:"jsonp_232",dataType:"JSONP",type:"GET"}).done(function(e){0<e.geocodes.length?(n+=""+e.geocodes[0].location,o.cityCenterCord=e.geocodes[0].location.split(","),a+=n+r,$.ajax({url:a,jsonpCallback:"jsonp_333",dataType:"JSONP",type:"GET"}).done(function(e){o.filteredDealers=e.datas,0<e.datas.length&&0<e.count?(o.showFilter=!1,o.errorFilter=!1):(o.errorFilter=!0,o.showFilter=!0),o.filteredDealers.forEach(function(e,t,a){e.DisplayPhoneNum=e.PrimaryPhone.replace(/\s+/g,"").split(/[;,]+/),e.PhoneForCall=e.DisplayPhoneNum[0].replace(/^\D+/g,"")}),f.getHomePageEvents().trackHPOnClick("dealer search"),h?(localStorage.setItem("DealersDataFromMini",JSON.stringify(o)),window.location.assign(g.getInternalCampaignPageLoad().appendGenericLink(s+l))):d.createLink()}).fail(function(e){}),d.errorGetDealers=!1):d.errorGetDealers=!0,c.$apply()}).fail(function(e){})}d.locations=[],d.selectedCities=[],d.numProvince="",d.numCity="",d.selectedProvince="",d.selectedCity="",0<t.length&&$.ajax({url:t,dataType:"json",type:"GET"}).done(function(e){c.$apply(function(){d.locations=e,d.selectedCities=d.locations[0].cityList[0]})}).fail(function(e){}),d.errorCurrentLocation=!1,d.errorSelectLocation=!1,d.errorSelectCity=!1,d.gotLocation=!1,d.goGetLocation=!1,d.errorGetDealers=!1,d.showGetLocation=!1,d.locationFromGPS="",d.checkLocation=function(){d.locationFromGPS.length||2<JSON.stringify(d.locationFromGPS).length?(d.gotLocation=!0,d.selectedProvince=d.locationFromGPS.province,d.selectedCity=d.locationFromGPS.city):d.errorCurrentLocation=!0},navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(e){e={lat:e.coords.latitude,lon:e.coords.longitude};a.setCenter(new AMap.LngLat(e.lon,e.lat)),a.getCity(function(e){0<e.city.length&&(d.locationFromGPS=e),d.goGetLocation=!0,c.$apply()}),d.showGetLocation=!0},function(e){d.showGetLocation=!1}),d.createLink=function(){var e=d.selectedProvince.split(" ").join("%"),t=d.selectedCity.split(" ").join("%"),e="province="+encodeURI(e)+"&city="+encodeURI(t),t=window.location.origin+m,e=0<window.location.search.length?window.location.search+"&"+e:"?"+e;window.location.assign(g.getInternalCampaignPageLoad().appendGenericLink(t+oldParameters))},d.submitForm=function(){d.selectedProvince.length&&d.selectedCity.length||(0<!d.numProvince.length?d.errorSelectLocation=!0:0<!d.numCity.length?(d.errorSelectLocation=!1,d.errorSelectCity=!0):(d.errorSelectLocation=!1,d.errorSelectCity=!1,d.selectedProvince=d.locations[d.numProvince].provinceValue,d.selectedCity=d.locations[d.numProvince].cityList[d.numCity].cityValue,i(d.selectedProvince,d.selectedCity)))},d.chageProvince=function(){d.selectedCities=d.locations[d.numProvince].cityList,d.errorSelectLocation=!1,d.selectedCity="",$(".city-select").find(".select2-chosen").text($($(".city-select").find("option")[0]).text()),d.numCity="",d.errorGetDealers=!1},d.chageCity=function(){d.errorSelectLocation=!1,d.errorSelectCity=!1,d.errorGetDealers=!1}}}),define("get-image-by-url-param/component.getImageByUrlParam",["jquery","utils/getParamValue"],function($,getParamValue){var getImageByParam={setImage:function(ele,url){var params,flag=!1,key=$(ele).find(".configuration").attr("data-param-key"),images=eval("("+$(ele).find(".configuration").attr("data-images")+")"),imgTag=$(ele).find(".img-wrap img"),params=url?getParamValue.getParamsObject(url):getParamValue.getParamsObject();$.isEmptyObject(images)||""===images||$.each(params,function(e,a){e===key&&$.each(images,function(e,t){a===e&&(imgTag.attr("src",t),flag=!0)})}),setTimeout(function(){flag||imgTag.attr("src",$(ele).find(".configuration").attr("data-default-img"))},1e3)},init:function(){$(".get-image-by-url-param").each(function(e,t){getImageByParam.setImage(t)})}};return getImageByParam}),define("service-price-calculator/component.servicePriceCalculator.app",["angular"],function(e){return e.module("servicePriceCalculator",[])}),define("service-price-calculator/component.servicePriceCalculator.controllers",["service-price-calculator/component.servicePriceCalculator.app","service-price-calculator/Controllers/servicePriceCalculator.controller.Main"],function(e,t){e.controller("MainController",["$scope","workFlowData","$http","$interval","$window","$timeout","$location",t])}),define("service-price-calculator/component.servicePriceCalculator",["jquery","_","angular","analytics/analyticsEventLayer","service-price-calculator/component.servicePriceCalculator.app","service-price-calculator/component.servicePriceCalculator.controllers","service-price-calculator/Directives/angularflexslider","service-price-calculator/Directives/angularSelect2","service-price-calculator/Services/component.servicePriceCalculator.service.workflowdata"],function(e,t,a,i,n,o,r,l,s,c,d,u,p){return{init:function(){e(".servicePriceCalculator").each(function(e,t){a.bootstrap(t,["servicePriceCalculator"])}),e("body").addClass("service-calc-dropdown-opened")}}}),define("service-price-calculator/Services/component.servicePriceCalculator.service.workflowdata",["service-price-calculator/component.servicePriceCalculator.app"],function(e){e.factory("workFlowData",["$window",function(e){var t={formatKilometers:function(e){return e.toString().replace(/(\d)(?=(\d\d\d)+([^\d]|$))/g,"$1,")},prepareDate:function(e){var e=e.split("/"),t=e[0];return e[0]=e[1],e[1]=t,e},showHideServiceBox:function(e,t){return 105e3<+e[t].km||7<+e[t].months/12},scrollToCalculator:function(){$("html, body").animate({scrollTop:$(".vehicle-registration").offset().top},650),"0px"===$(".accordion-body").css("height")?setTimeout(function(){t.toggleAccordian()},0):setTimeout(function(){t.toggleAccordian(),t.toggleAccordian()},0)},toggleAccordian:function(){$(".accordion-title").trigger("click")},changePublishQuoteDate:function(e,t){var a=new Date,i=(a.setDate(a.getDate()+30),a.getDate()),n=a.getMonth(),a=a.getFullYear();return result=i+" "+e[+n][t[+n]]+" "+a},scrollToAccordion:function(){setTimeout(function(){$("html, body").animate({scrollTop:$(".accordion-item").offset().top},650)},0)},getWindowWith:function(){return e.innerWidth||document.documentElement.clientWidth||document.body.clientWidth},finalServiceInteval:function(e,t,a){var i=$(".final-service-interval-text p")[0],n=i.innerHTML.split("[@serviceInterval]");1<n.length&&(t=" "+e[e.length-2].agetext+" "+t+"/"+e[e.length-2].km+" "+a,n.splice(1,0,t),i.innerHTML=n.join(" "))},scrollToServicePriceBox:function(){$("html, body").animate({scrollTop:$(".service-price-box").offset().top},650)}};return t}])}),define("service-price-calculator/Directives/angularflexslider",["angular","service-price-calculator/component.servicePriceCalculator.app"],function(L,e){e.directive("flexSlider",["$parse","$timeout","workFlowData",function(n,I,$){return{restrict:"A",scope:!1,replace:!0,transclude:!0,template:'<div class="flexslider-container"></div>',compile:function(e,a,r){return function(T,N){var A;T.$on("initSlider",function(){var S,e,x,o,t,D,P,i;return L.element(".flexslider").remove(),t=(a.slide||a.flexSlide).match(/^\s*(.+)\s+in\s+(.*?)(?:\s+track\s+by\s+(.+?))?\s*$/),o=t[1],e=t[2],i=L.isDefined(t[3])?n(t[3]):n(""+o),A=null,P={},x=function(e,t){var a={};return a[o]=e,a.$index=t,i(T,a)},S=function(t,e,a){var i,n=x(t,e);if(null!=P[n])throw"Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys.";return(i=T.$new())[o]=t,i.$index=e,r(i,function(e){e={collectionItem:t,childScope:i,element:e};return P[n]=e,"function"==typeof a?a(e):void 0})},D=function(e,t){e=x(e,t),t=P[e];if(null!=t)return delete P[e],t.childScope.$destroy(),t},T.$watchCollection(e,function(i,e){var n,t,a,o,r,l,s,c,d,u,p,m,h,f,g,v,y,b,w;if(null!=i&&i.length||null!=e&&e.length){if(null!=A){for(l=A.data("flexslider"),t=Object.keys(P).length,p={},o=m=0,v=(i=null==i?[]:i).length;m<v;o=++m)n=i[o],p[x(n,o)]=n;if(d=(()=>{var e,t,a=[];for(o=e=0,t=i.length;e<t;o=++e)n=i[o],null==P[x(n,o)]&&a.push({value:n,index:o});return a})(),u=(()=>{var e=[];for(c in P)o=P[c],null==p[c]&&e.push(o.collectionItem);return e})(),1<=d.length&&0===u.length||0===d.length){for(h=0,y=u.length;h<y;h++)a=u[h],(a=D(a,i.indexOf(a)))&&l.removeSlide(a.element);for(f=0,b=d.length;f<b;f++)a=d[f],r=a.index,S(a.value,r,function(e){return t<=r&&(r=void 0),T.$evalAsync(function(){if(l)return l.addSlide(e.element,r)})});return}}for(P={},null!=A&&A.remove(),s=L.element('<ul class="slides"></ul>'),(A=L.element('<div class="flexslider"></div>')).append(s),N.append(A),o=g=0,w=i.length;g<w;o=++g)n=i[o],S(n,o,function(e){return s.append(e.element)});var C=$.getWindowWith()<768?1:3,k={keyboard:!1,multipleKeyboard:!1,slideshow:!1,animation:"slide",directionNav:!0,controlNav:!1,useCSS:!1,touch:1<i.length,itemWidth:210,itemMargin:0,minItems:C,maxItems:C,move:1,after:function(){T.$broadcast("get current slide",A.data("flexslider").currentSlide)}};return I(function(){A.flexslider(k),T.$broadcast("slider rendered",C),T.$broadcast("get current slide",A.data("flexslider").currentSlide)},0)}})}),T.$on("go to slide",function(e,t){A.flexslider(t)})}}}}])}),define("service-price-calculator/Directives/angularSelect2",["angular","service-price-calculator/component.servicePriceCalculator.app"],function(n,e){e.directive("select2",["$parse","$timeout",function(e,t){return{restrict:"AE",link:function(e,a,i){"false"===n.element(".service-price-calculator-holder").attr("data-hide-select2")&&(a.select2({minimumResultsForSearch:-1}),e.$watch(i.ngModel,function(e,t){e!==t&&(a.select2({minimumResultsForSearch:-1}),"mainCtrl.selected.serviceYear"===i.ngModel)&&(n.element("#select6").select2("destroy"),setTimeout(function(){n.element("#select6").trigger("change")},0),setTimeout(function(){n.element("#select6").select2({minimumResultsForSearch:-1})},0))}))}}}]),e.directive("comaParser",["$parse","$timeout","workFlowData",function(e,t,i){return{restrict:"AE",scope:{ngModel:"=ngModel"},link:function(e,a,t){a[0].onkeypress=function(e){if(!((e=e||event).ctrlKey||e.altKey||e.metaKey)){e=null!=(e=e).which?0===e.which||0===e.charCode||e.which<32?null:String.fromCharCode(e.which):e.keyCode<32?null:String.fromCharCode(e.keyCode);if(null!=e)return!(e<"0"||"9"<e)&&void 0}},e.$watch(function(){return e.ngModel},function(e,t){e!==t&&("string"==typeof(t=e)&&(t=+a[0].value.split(",").join("")),a[0].value=i.formatKilometers(t))})}}}]),e.directive("comaParser",["$parse","$timeout","workFlowData",function(e,t,i){return{restrict:"AE",compile:function(e,t,a){return function(e,a){e.$watch(t.ngModel,function(e,t){e!==t&&(a[0].value=i.formatKilometers(+a[0].value.split(",").join("")))})}}}}])}),define("service-price-calculator/Controllers/servicePriceCalculator.controller.Main",["analytics/analyticsEventLayer","form/component.form.dropdowncustomize","jquery"],function(y,e,b){return function(d,u,t,e,a,i,n){var o,r,l,p=this,s=b(".service-price-calculator-holder"),c=s.attr("data-resource-path"),m=s.attr("data-selector"),h=c+".servicepricecalcload.data",f=(b("#wcmedit").val(),p.yearText={single:b("#singleYear").val(),multiple:b("#multipleYears").val()},p.currencySymbol=b.trim(b("#currencySymbol").val()),p.kilometersLabel=b("#kilometersLabel").val(),p.or=b("#or").val(),p.every=b("#everyLabel").val(),p.monthLabel=b("#months").val(),(new Date).getFullYear()),g=new Date;function v(){p.labelName="";var e=p.carouselData[p.activeSlide],t=(p.standardTip=e.standardTip.split("|"),p.KmsActive=e.km,p.MonthActive=e.number,+e.agetext?e.agetext:""),e=(p.labelName+=t,t&&(p.labelName+=1<+e.agetext?" "+p.yearText.multiple:" "+p.yearText.single),+e.agetextMonths?e.agetextMonths+" "+p.monthLabel:"");p.labelName+=t&&e?" "+e:e}p.selected={},p.activeServiceItems=0,p.checkboxArr=[],p.activeSlide=2,p.isSearch=!1,p.backToPreviousStep=!1,p.months="",p.monthsArr=["January","February","March","April","May","June","July","August","September","October","November","December"],p.pdf={},p.disabled=!0,p.isRegistrationChange=!1,t.get(h).then(function(e){p.years=e.data.data.years,p.models=e.data.data.models},function(e){p.errorMessageNoData=!0}),p.yearSelectedByUser=function(){p.selected.model="",p.selected.style="",p.activeServiceItems=0,p.selected.engine="",p.checkboxArr=[],p.disabled=!0,p.backToPreviousStep=!0,p.modelsList=_.filter(p.models,function(e){return e.endyear>=p.selected.year&&e.startyear<=p.selected.year})},p.modelSelectedByUser=function(){var e;p.selected.style="",p.selected.engine="",p.activeServiceItems=0,p.checkboxArr=[],p.disabled=!0,p.backToPreviousStep=!0,p.selected.model&&(e=_.find(p.modelsList,function(e){return e.name===p.selected.model}),p.styleList=_.find(e.years,function(e){return e.year==p.selected.year})),p.startProductionYear=e.startyear},p.styleSelectedByUser=function(){p.selected.engine="",p.checkboxArr=[],p.activeServiceItems=0,p.disabled=!0,p.backToPreviousStep=!0,p.engineList=_.find(p.styleList.style,function(e){return e.name==p.selected.style}),p.engineList=_.sortBy(p.engineList.engines,function(e){return e.type}),_.each(p.engineList,function(a,e){var i=0;_.each(p.engineList,function(e,t){a.type===e.type&&i++}),1<i&&(a.showDate=!0)})},p.engineSelectedByUser=function(){p.selected.engine&&(p.disabled=!1,o=p.selected.engine.split("@")[0],r=p.selected.engine.split("@")[1],l=p.selected.engine.split("@")[2]),d.$watch(function(){return p.selected.engine},function(e,t){e!==t&&(p.backToPreviousStep=!0,p.checkboxArr=[],p.activeServiceItems=0)})},p.showCarouselData=function(e){e.preventDefault(),y.getServicePriceCalculatorEvents().fireNextEvent(),p.showLoader=!0,p.disabled=!0;var e=_.find(p.engineList,function(e){return e.type==o&&e.originalEndDate==l&&e.originalStartDate==r});p.id=e.id,(()=>p.selected.engine&&(p.backToPreviousStep=!0))()&&(e=c+".servicepricecalaresults."+p.id+".data?id="+p.id,t.get(e).then(function(e){p.showLoader=!1,p.disabled=!1,p.backToPreviousStep=!1,p.isSearch=!0,p.months=e.data.monthsDropdown,p.carouselData=e.data.serviceinterval,p.firstService=+e.data.data.firstService,p.standardTip=e.data.data.standardTip.split("|"),p.isMobile=u.getWindowWith()<768,p.carouselData.unshift({agetext:"empty",id:"0",km:"empty",agetextMonths:"empty",months:"empty",number:"empty",price:"empty",standardTip:"empty"});var t=_.clone(p.carouselData[p.carouselData.length-1]);t.id=+t.id+1,p.carouselData.push(t),p.carouselData.push({agetext:"empty",id:"999999999",km:"empty",agetextMonths:"empty",months:"empty",number:"empty",price:"empty",standardTip:"empty"}),p.accordionData=e.data.additionaloptions,p.additionalInformation=e.data.data,p.paginationButton=new Array(Math.floor(p.carouselData.length/3)),d.$broadcast("initSlider")},function(e){console.log(e)}))},d.$on("slider rendered",function(e,t){p.quantityObjectOnSlide=t,p.calculateService(null,!0),s.find(".flex-direction-nav a").on("click",function(){y.getServicePriceCalculatorEvents().fireCarouselScroll()})}),p.calculateService=function(e,t){e&&e.preventDefault(),null!==e&&y.getServicePriceCalculatorEvents().fireCalculateEvent(),p.isRegistrationChange=!1;for(var e=g.getFullYear(),a=g.getMonth(),i=(t&&(p.selected.serviceYear=p.selected.year,p.selected.serviceMonth=(()=>{for(var e=0;e<p.monthsArr.length;e++)if(p.actualTime(e,p.months[e]))return p.months[e][p.monthsArr[e]]})(),p.selected.mileage=u.formatKilometers(Math.floor(+p.additionalInformation.interval/p.firstService*Math.round((new Date(g.getFullYear(),g.getMonth())-new Date(Date.parse(p.selected.serviceMonth+", 01, "+p.selected.serviceYear)))/1e3/60/60/24/365*12)))),p.carouselData),n=1,o=1,t=new Date(p.selected.serviceMonth+", 01, "+p.selected.serviceYear),r=12*(e-+p.selected.serviceYear)+(a-t.getMonth()),l=(12===p.firstService&&(r+=5),+p.selected.mileage.toString().split(",").join("")),s=+p.additionalInformation.interval-5e3,c=1;c<i.length-1;c++)+i[c].km-s<l&&(n=c),12*+i[c].agetext+ +i[c].agetextMonths<=r&&(o=c);resultSlide=o<n?n:o,p.activePaginButton=Math.floor((resultSlide+2)/3)-1,d.$broadcast("go to slide",resultSlide-1>p.carouselData.length-3?p.carouselData.length-3:resultSlide-1),p.changeActiveSlide(resultSlide),u.scrollToCalculator(),u.finalServiceInteval(p.carouselData,p.yearText.multiple,p.kilometersLabel),p.publishQuoteDate=u.changePublishQuoteDate(p.months,p.monthsArr),require("disclosure/component.disclosure").init()},p.changeSlide=function(e,t){e&&e.preventDefault(),y.getServicePriceCalculatorEvents().fireCarouselScroll(),d.$broadcast("go to slide",3*t+1>p.carouselData.length-3?p.carouselData.length-3:3*t+1),p.activePaginButton=t,v()},p.goToSlide=function(e,t){e&&e.preventDefault(),e="start"===t?0:p.carouselData.length-3,d.$broadcast("go to slide",e)},p.registrationChange=function(){p.isRegistrationChange=!0},p.changeActiveSlide=function(e,t){p.activeSlide=e,t&&(t.preventDefault(),p.activeSlide!==p.carouselData.length-2)&&u.scrollToAccordion(),v()},p.sumPrice=function(e){y.getServicePriceCalculatorEvents().fireCheckboxEvent(),p.checkboxArr[e]?p.activeServiceItems+=+p.accordionData[e].price:p.activeServiceItems-=+p.accordionData[e].price},p.getTotalPrice=function(e,t){return p.index=e,+p.carouselData[p.index].price+p.activeServiceItems+(e=>{var t=0;if(e)for(var a=0;a<p.accordionData.length;a++)0!=+p.accordionData[a].price&&(t+=+p.accordionData[a].price);return t})(t)},p.getInstallText=function(e){return p.index=e,p.carouselData[p.index]&&p.carouselData[p.index].installText?p.carouselData[p.index].installText:""},p.getInstallPrice=function(e){return p.index=e,p.carouselData[p.index]&&p.carouselData[p.index].installPrice?p.carouselData[p.index].installPrice:""},p.getServiceDescription=function(e){return p.index=e,p.carouselData[p.index]&&p.carouselData[p.index].serviceDescription?p.carouselData[p.index].serviceDescription:""},p.greaterThan=function(t){return function(e){return t<=e}},d.$on("get current slide",function(e,t){p.currentSlide=t+1,p.activeSlide=p.currentSlide,p.activeSlide>p.carouselData.length-2&&(p.activeSlide=p.carouselData.length-2),p.activePaginButton=Math.round((t+2)/3)-1,v(),d.$apply()}),p.actualTime=function(e,t){if(p.selected.serviceYear==p.additionalInformation.startdatebreak&&p.additionalInformation.originalStartDate){var a=u.prepareDate(p.additionalInformation.originalStartDate);if(a&&(a[0]=p.monthsArr[+a[0]-1],a[1]="01",new Date(t[p.monthsArr[e]]+", 01, "+p.selected.serviceYear)<new Date(a.join(", "))))return p.selected.serviceMonth=p.monthsArr[e+1],!1}return!(f==p.selected.serviceYear&&new Date(t[p.monthsArr[e]]+", 01, "+f)>g)},p.sendPdfToServer=function(){p.carouselData[p.activeSlide];var e="?modelid="+p.id+"&additems="+(()=>{for(var e="",t=0;t<p.accordionData.length;t++)0!=+p.accordionData[t].price&&p.checkboxArr[t]&&(e+=p.accordionData[t].id+",");return e=e.substring(0,e.length-1)})()+"&tp="+p.getTotalPrice(p.index)+"&km="+u.formatKilometers(p.carouselData[p.activeSlide].km)+"&cs="+p.currencySymbol+"&ssp="+p.carouselData[p.activeSlide].price+"&pd="+p.publishQuoteDate.split(" ").join("-")+"&sy="+p.carouselData[p.activeSlide].agetext+"&sm="+p.carouselData[p.activeSlide].agetextMonths;b(".spc-view-pdf.new-window").attr("href",c+m+e),y.getServicePriceCalculatorEvents().viewAndPrintPdf(p.selected.model)},p.formatDistance=function(e){return u.formatKilometers(e)},p.isOldCar=function(){return u.showHideServiceBox(p.carouselData,p.activeSlide,f)},p.scrollToServicePriceBox=function(){y.getServicePriceCalculatorEvents().fireServicePriceEvent(),u.scrollToServicePriceBox()},p.layerTipShow=function(){var e=b("div.service-price-calculator-accordion.accordion ul > li.tip.pointer > div.content").siblings(".calculator-hide").html();e&&layer.open({type:1,title:!1,closeBtn:1,shadeClose:!0,maxWidth:700,content:e})}}}),define("brazil-service-price-calculator/component.brazilServicePriceCalculator.app",["angular"],function(e){return e.module("brazilServicePriceCalculator",[])}),define("brazil-service-price-calculator/component.brazilServicePriceCalculator.controllers",["brazil-service-price-calculator/component.brazilServicePriceCalculator.app","brazil-service-price-calculator/Controllers/brazilServicePriceCalculator.controller.Main"],function(e,t){e.controller("MainController",["$scope","workFlowData","$http","$interval","$window","$timeout","$location",t])}),define("brazil-service-price-calculator/component.brazilServicePriceCalculator",["jquery","_","angular","analytics/analyticsEventLayer","brazil-service-price-calculator/component.brazilServicePriceCalculator.app","brazil-service-price-calculator/component.brazilServicePriceCalculator.controllers","brazil-service-price-calculator/Directives/angularflexslider","brazil-service-price-calculator/Directives/angularSelect2","brazil-service-price-calculator/Services/component.brazilServicePriceCalculator.service.workflowdata"],function(e,t,a,i,n,o,r,l,s,c,d,u,p){return{init:function(){e(".brazilServicePriceCalculator").each(function(e,t){a.bootstrap(t,["brazilServicePriceCalculator"])}),e("body").addClass("service-calc-dropdown-opened")}}}),define("brazil-service-price-calculator/Services/component.brazilServicePriceCalculator.service.workflowdata",["brazil-service-price-calculator/component.brazilServicePriceCalculator.app"],function(e){e.factory("workFlowData",["$window",function(e){var t={formatKilometers:function(e){return e.toString().replace(/(\d)(?=(\d\d\d)+([^\d]|$))/g,"$1,")},prepareDate:function(e){var e=e.split("/"),t=e[0];return e[0]=e[1],e[1]=t,e},showHideServiceBox:function(e,t){return 105e3<+e[t].km||7<+e[t].months/12},scrollToCalculator:function(){$("html, body").animate({scrollTop:$("[data-bpsc-carousel]").offset().top},650),"0px"===$(".accordion-body").css("height")?setTimeout(function(){t.toggleAccordian()},0):setTimeout(function(){t.toggleAccordian(),t.toggleAccordian()},0)},toggleAccordian:function(){$(".accordion-title").trigger("click")},scrollToAccordion:function(){setTimeout(function(){$("html, body").animate({scrollTop:$(".accordion-item").offset().top},650)},0)},getWindowWith:function(){return e.innerWidth||document.documentElement.clientWidth||document.body.clientWidth},finalServiceInteval:function(e,t,a){var i=$(".final-service-interval-text p")[0],n=i&&i.innerHTML.split("[@serviceInterval]");n&&1<n.length&&(t=" "+e[e.length-2].agetext+" "+t+"/"+e[e.length-2].km+" "+a,n.splice(1,0,t),i.innerHTML=n.join(" "))},scrollToServicePriceBox:function(){$("html, body").animate({scrollTop:$(".service-price-box").offset().top},650)}};return t}])}),define("brazil-service-price-calculator/Directives/angularflexslider",["angular","brazil-service-price-calculator/component.brazilServicePriceCalculator.app"],function(L,e){e.directive("flexSlider",["$parse","$timeout","workFlowData",function(n,I,$){return{restrict:"A",scope:!1,replace:!0,transclude:!0,template:'<div class="flexslider-container"></div>',compile:function(e,a,r){return function(T,N){var A;T.$on("initSlider",function(){var S,e,x,o,t,D,P,i;return L.element(".flexslider").remove(),t=(a.slide||a.flexSlide).match(/^\s*(.+)\s+in\s+(.*?)(?:\s+track\s+by\s+(.+?))?\s*$/),o=t[1],e=t[2],i=L.isDefined(t[3])?n(t[3]):n(""+o),A=null,P={},x=function(e,t){var a={};return a[o]=e,a.$index=t,i(T,a)},S=function(t,e,a){var i,n=x(t,e);if(null!=P[n])throw"Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys.";return(i=T.$new())[o]=t,i.$index=e,r(i,function(e){e={collectionItem:t,childScope:i,element:e};return P[n]=e,"function"==typeof a?a(e):void 0})},D=function(e,t){e=x(e,t),t=P[e];if(null!=t)return delete P[e],t.childScope.$destroy(),t},T.$watchCollection(e,function(i,e){var n,t,a,o,r,l,s,c,d,u,p,m,h,f,g,v,y,b,w;if(null!=i&&i.length||null!=e&&e.length){if(null!=A){for(l=A.data("flexslider"),t=Object.keys(P).length,p={},o=m=0,v=(i=null==i?[]:i).length;m<v;o=++m)n=i[o],p[x(n,o)]=n;if(d=(()=>{var e,t,a=[];for(o=e=0,t=i.length;e<t;o=++e)n=i[o],null==P[x(n,o)]&&a.push({value:n,index:o});return a})(),u=(()=>{var e=[];for(c in P)o=P[c],null==p[c]&&e.push(o.collectionItem);return e})(),1<=d.length&&0===u.length||0===d.length){for(h=0,y=u.length;h<y;h++)a=u[h],(a=D(a,i.indexOf(a)))&&l.removeSlide(a.element);for(f=0,b=d.length;f<b;f++)a=d[f],r=a.index,S(a.value,r,function(e){return t<=r&&(r=void 0),T.$evalAsync(function(){if(l)return l.addSlide(e.element,r)})});return}}for(P={},null!=A&&A.remove(),s=L.element('<ul class="slides"></ul>'),(A=L.element('<div class="flexslider"></div>')).append(s),N.append(A),o=g=0,w=i.length;g<w;o=++g)n=i[o],S(n,o,function(e){return s.append(e.element)});var C=$.getWindowWith()<768?1:3,k={keyboard:!1,multipleKeyboard:!1,slideshow:!1,animation:"slide",directionNav:!0,controlNav:!1,useCSS:!1,touch:1<i.length,itemWidth:210,itemMargin:0,minItems:C,maxItems:C,move:1,after:function(){T.$broadcast("get current slide",A.data("flexslider").currentSlide)}};return I(function(){A.flexslider(k),T.$broadcast("slider rendered",C),T.$broadcast("get current slide",A.data("flexslider").currentSlide)},0)}})}),T.$on("go to slide",function(e,t){A.flexslider(t)})}}}}])}),define("brazil-service-price-calculator/Directives/angularSelect2",["angular","brazil-service-price-calculator/component.brazilServicePriceCalculator.app"],function(n,e){e.directive("select2",["$parse","$timeout",function(e,t){return{restrict:"AE",link:function(e,a,i){"false"===n.element(".service-price-calculator-holder").attr("data-hide-select2")&&(a.select2({minimumResultsForSearch:-1}),e.$watch(i.ngModel,function(e,t){e!==t&&(a.select2({minimumResultsForSearch:-1}),"mainCtrl.selected.serviceYear"===i.ngModel)&&(n.element("#select6").select2("destroy"),setTimeout(function(){n.element("#select6").trigger("change")},0),setTimeout(function(){n.element("#select6").select2({minimumResultsForSearch:-1})},0))}))}}}]),e.directive("comaParser",["$parse","$timeout","workFlowData",function(e,t,i){return{restrict:"AE",scope:{ngModel:"=ngModel"},link:function(e,a,t){a[0].onkeypress=function(e){if(!((e=e||event).ctrlKey||e.altKey||e.metaKey)){e=null!=(e=e).which?0===e.which||0===e.charCode||e.which<32?null:String.fromCharCode(e.which):e.keyCode<32?null:String.fromCharCode(e.keyCode);if(null!=e)return!(e<"0"||"9"<e)&&void 0}},e.$watch(function(){return e.ngModel},function(e,t){e!==t&&("string"==typeof(t=e)&&(t=+a[0].value.split(",").join("")),a[0].value=i.formatKilometers(t))})}}}]),e.directive("comaParser",["$parse","$timeout","workFlowData",function(e,t,i){return{restrict:"AE",compile:function(e,t,a){return function(e,a){e.$watch(t.ngModel,function(e,t){e!==t&&(a[0].value=i.formatKilometers(+a[0].value.split(",").join("")))})}}}}])}),define("brazil-service-price-calculator/Controllers/brazilServicePriceCalculator.controller.Main",["analytics/analyticsEventLayer","form/component.form.dropdowncustomize","jquery"],function(h,e,f){return function(i,n,t,e,a,o,r){var l,s=this,c=f(".service-price-calculator-holder"),d=c.attr("data-resource-path"),u=d+".brazilservicepricecalcload.data",p=(f("#wcmedit").val(),s.yearText={single:f("#singleYear").val(),multiple:f("#multipleYears").val()},s.currencySymbol=f.trim(f("#currencySymbol").val()),s.kilometersLabel=f("#kilometersLabel").val(),s.or=f("#or").val(),s.every=f("#everyLabel").val(),s.monthLabel=f("#months").val(),(new Date).getFullYear(),new Date);function m(){s.labelName="";var e=s.carouselData[s.activeSlide],t=(s.KmsActive=e&&e.km,+e.agetext?e.agetext:""),e=(s.labelName+=t,t&&(s.labelName+=1<+e.agetext?" "+s.yearText.multiple:" "+s.yearText.single),+e.agetextMonths?e.agetextMonths+" "+s.monthLabel:"");s.labelName+=t&&e?" "+e:e}s.selected={},s.activeServiceItems=0,s.checkboxArr=[],s.activeSlide=2,s.isSearch=!1,s.backToPreviousStep=!1,s.disabled=!0,s.resultSlide=0,t.get(u).then(function(e){s.years=e.data.years,s.models=e.data.category},function(e){s.errorMessageNoData=!0}),s.yearSelectedByUser=function(){s.selected.model="",s.selected.style="",s.activeServiceItems=0,s.selected.engine="",s.checkboxArr=[],s.disabled=!0,s.backToPreviousStep=!0,s.modelsList=_.filter(s.models,function(e){return e.year===s.selected.year})},s.modelSelectedByUser=function(){var e;s.selected.style="",s.selected.engine="",s.activeServiceItems=0,s.checkboxArr=[],s.disabled=!0,s.backToPreviousStep=!0,s.selected.model&&(e=_.find(s.modelsList,function(e){return e.name===s.selected.model}),s.styleList=_.filter(e.vehicle,function(e){return e}))},s.styleSelectedByUser=function(){s.selected.engine="",s.checkboxArr=[],s.activeServiceItems=0,s.disabled=!0,s.backToPreviousStep=!0,s.engineList=_.find(s.styleList,function(e){return e.name==s.selected.style}),s.engineList=_.sortBy(s.engineList.motor,function(e){return e.name}),_.each(s.engineList,function(a,e){var i=0;_.each(s.engineList,function(e,t){a.type===e.type&&i++}),1<i&&(a.showDate=!0)})},s.engineSelectedByUser=function(){s.selected.engine&&(s.disabled=!1,l=s.selected.engine.split("@")[0],s.selected.engine.split("@")[1],s.selected.engine.split("@")[2]),i.$watch(function(){return s.selected.engine},function(e,t){e!==t&&(s.backToPreviousStep=!0,s.checkboxArr=[],s.activeServiceItems=0)})},s.showCarouselData=function(e){e.preventDefault(),h.getServicePriceCalculatorEvents().fireNextEvent(),s.showLoader=!0,s.disabled=!0;var e=_.find(s.engineList,function(e){return e.name==l});s.id=e.id,(()=>s.selected.engine&&(s.backToPreviousStep=!0))()&&(e=d+".brazilPriceCalcResults."+s.id+".data",t.get(e).then(function(e){s.showLoader=!1,s.disabled=!1,s.backToPreviousStep=!1,s.isSearch=!0,s.carouselData=e.data.serviceInterval,s.firstService=+e.data.data.firstService,s.isMobile=n.getWindowWith()<768,s.carouselData.unshift({agetext:"empty",id:"0",km:"empty",agetextMonths:"empty",months:"empty",number:"empty",price:"empty"}),s.carouselData.push({agetext:"empty",id:"999999999",km:"empty",agetextMonths:"empty",months:"empty",number:"empty",price:"empty"}),s.additionalInformation=e.data,s.paginationButton=new Array(Math.floor(s.carouselData.length/3)),i.$broadcast("initSlider")},function(e){console.log(e)}))},i.$on("slider rendered",function(e,t){s.quantityObjectOnSlide=t,s.calculateService(null,!0),c.find(".flex-direction-nav a").on("click",function(){h.getServicePriceCalculatorEvents().fireCarouselScroll()})}),s.calculateService=function(e,t){e&&e.preventDefault(),null!==e&&h.getServicePriceCalculatorEvents().fireCalculateEvent();p.getFullYear();t&&(s.selected.serviceYear=s.selected.year,s.selected.mileage=s.additionalInformation.data&&s.additionalInformation.data.interval);var e=s.carouselData,a=s.selected.mileage&&1e4*Math.round(s.selected.mileage.toString().split(",").join("")/1e4);e.forEach(function(e,t){"#"===e.km&&s.resultSlide--,+e.km<=+a&&(s.resultSlide=t)}),+a<=9999&&(s.resultSlide=1),void 0===a?(s.resultSlide=1,s.activePaginButton=1):s.activePaginButton=Math.floor((s.resultSlide+2)/3)-1,i.$broadcast("go to slide",s.resultSlide-1>s.carouselData.length-3?s.carouselData.length-3:s.resultSlide-1),s.changeActiveSlide(s.resultSlide),n.scrollToCalculator(),n.finalServiceInteval(s.carouselData,s.yearText.multiple,s.kilometersLabel),require("disclosure/component.disclosure").init()},s.changeSlide=function(e,t){e&&e.preventDefault(),h.getServicePriceCalculatorEvents().fireCarouselScroll(),i.$broadcast("go to slide",3*t+1>s.carouselData.length-3?s.carouselData.length-3:3*t+1),s.activePaginButton=t,m()},s.goToSlide=function(e,t){e&&e.preventDefault(),e="start"===t?0:s.carouselData.length-3,i.$broadcast("go to slide",e)},s.changeActiveSlide=function(e,t){s.activeSlide=e,t&&(t.preventDefault(),s.activeSlide!==s.carouselData.length-2)&&n.scrollToAccordion(),m()},s.sumPrice=function(e){h.getServicePriceCalculatorEvents().fireCheckboxEvent(),s.checkboxArr[e]?s.activeServiceItems+=+s.accordionData[e].price:s.activeServiceItems-=+s.accordionData[e].price},s.getTotalPrice=function(e,t){return s.index=e,+s.carouselData[s.index].price+s.activeServiceItems+(e=>{var t=0;if(e)for(var a=0;a<s.accordionData.length;a++)0!=+s.accordionData[a].price&&(t+=+s.accordionData[a].price);return t})(t)},s.getInstallText=function(e){return s.index=e,s.carouselData[s.index]&&s.carouselData[s.index].priceInitial?s.carouselData[s.index].priceInitial:""},s.getInstallPrice=function(e){return s.index=e,s.carouselData[s.index]&&s.carouselData[s.index].priceEnd?s.carouselData[s.index].priceEnd:""},s.getServiceDescription=function(e){return s.index=e,s.carouselData[s.index]&&s.carouselData[s.index].serviceDescription?s.carouselData[s.index].serviceDescription:""},s.getSplitServiceDescription=function(e){var t,e=s.carouselData[e];return t=e&&e.serviceDescription?e.serviceDescription.split(","):t},s.greaterThan=function(t){return function(e){return t<=e}},i.$on("get current slide",function(e,t){s.currentSlide=t+1,s.activeSlide=s.currentSlide,s.activeSlide>s.carouselData.length-2&&(s.activeSlide=s.carouselData.length-2),s.activePaginButton=Math.round((t+2)/3)-1,m(),i.$apply()}),s.formatDistance=function(e){return n.formatKilometers(e)},s.formatPrice=function(e){e=updatePriceFormat(e,f("#currencyFormatPattern").val(),!0);return""===e?"-":e},s.scrollToServicePriceBox=function(){h.getServicePriceCalculatorEvents().fireServicePriceEvent(),n.scrollToServicePriceBox()},s.layerTipShow=function(){var e=f("div.service-price-calculator-accordion.accordion ul > li.tip.pointer > div.content").siblings(".calculator-hide").html();e&&layer.open({type:1,title:!1,closeBtn:1,shadeClose:!0,maxWidth:700,content:e})}}}),define("service-booking/component.serviceBooking.app",["angular"],function(e){return e.module("serviceBooking",[]).config(["$locationProvider",function(e){window.history&&window.history.pushState?e.html5Mode({enabled:!0,requireBase:!1}):e.html5Mode(!1)}]).filter("startFrom",function(){return function(e,t){if(e)return e.slice(t=+t)}})}),define("service-booking/component.serviceBooking.controllers",["service-booking/component.serviceBooking.app","service-booking/controllers/component.serviceBooking.controller.Main"],function(e,t){e.controller("MainController",["$scope","mapService","searchService","$timeout","$interval","_","$window","$sce","$location","$http","workFlowData","CONF",t])}),define("service-booking/component.serviceBooking.directives",["service-booking/component.serviceBooking.app","credit-payment-estimator/directives/creditPaymentEstimator.directive.eventPropogation"],function(e,t){e.directive("ngGuxGoogleMap",["mapService",function(i){return{restrict:"A",link:function(e,t,a){i.initMap(t.get(0))}}}]),e.directive("eventPropogation",t)}),define("service-booking/component.serviceBooking",["jquery","_","angular","configurationProvider","analytics/analyticsEventLayer","service-booking/component.serviceBooking.app","service-booking/component.serviceBooking.controllers","service-booking/component.serviceBooking.directives","service-booking/controllers/component.serviceBooking.controller.Main","service-booking/services/component.serviceBooking.service.MapService","service-booking/services/component.serviceBooking.service.SearchService","service-booking/services/component.serviceBooking.service.AddressService","service-booking/services/component.serviceBooking.service.workFlowData"],function(p,m,a,h,e,f){var t={},g=h.get(p("#global-market-configuration"));function n(e){return void 0===e?"":e}return window.serviceBooking={},serviceBooking.init=function(){function u(e){var t={};return m.each(e,function(e){t[e.key]=e.value}),t}p(".serviceBooking").each(function(e,t){var a,n,o,r=h.get(p(t)),l=u(r.serviceConfig),s=(n=[],o=u((o=r).localisationConfig),m.each(o.polygon.split("%2C"),function(e){e=e.split("+");n.push({lng:e[0],lat:e[1]})}),o.polygon=n,(e=>{var t=e.addressFormatConfig,e={},a=[];for(i=0;i<t.entries.length;i++)a[i]=t.entries[i].entry;return e.addressSeparator=t.separator,e.addressFormat=a,e})(r)),c=r.distanceConfig[0],d=r.filterConfig[0],t=(a={},p(t).find(".error-messages p").each(function(){a[p(this).attr("class")]=p(this).text()}),a);r.config.dealerLocatorURL=r.dealerLocatorUrl,f.constant("CONF",r.config),f.constant("SERVICE_CONF",l),f.constant("LOCALISATION_CONF",o),f.constant("GLOBAL_CONF",g),f.constant("ADDRESS_FORMAT_CONF",s),f.constant("DISTANCE_CONF",c),f.constant("FILTER_CONF",d),f.constant("ERROR_MESSAGES",t),f.constant("_",m)}),p(".serviceBooking").each(function(e,t){a.bootstrap(t,["serviceBooking"])})},t.init=function(){var e,t;console.log("by func init"),e="https://maps.googleapis.com/maps/api/js?client=gme-fordmotorcompany2&language="+n((e=g).localeLowerHyphenUpper)+"&region="+n(g.marketCode)+"&libraries=places&channel="+g.marketCode+"&callback=serviceBooking.init",(t=document.createElement("script")).setAttribute("type","text/javascript"),t.setAttribute("src",e),document.body.appendChild(t)},t}),define("service-booking/controllers/component.serviceBooking.controller.Main",["analytics/analyticsEventLayer","jquery"],function(w,e){return function(t,e,o,a,i,c,n,d,r,l,u,s){var p,m=this,h=(m.dealerName="",m.dealerLocation="",m.isSearch=!1,m.dealerNameAutocompleteList=[],m.showAutocompleteDealerName=!1,m.showAutocompleteDealerLocation=!1,m.isMobile=(n.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)<768,m.openBooking=!1,m.resultXtimePartners=[],m.searchFilterDealerName="",m.selectedBookingDealer={},m.paginationPosition=0,m.pageSize=10,m.paginationButtonCount=10,s.defaultMaxResults&&(m.pageSize=+s.defaultMaxResults),{});function f(){m.suggestions={dealers:[],locations:[]}}function g(){m.resultsDealers=[],m.loading=!1,m.showResults=!1,m.dealerId="",f()}function v(e,t){var a,i,n,o=c.find(e.urls,{portal:"MOBILE"}),r=c.find(e.urls,{portal:"CONSUMER"}),e=c.find(e.urls,{portal:"MENU"}),l=u.newXtimeUrl(),s=r.link,s=(n="webKey",s=(s=s).split("?")[1],new URLSearchParams(s).get(n));l?s?i=a=d.trustAsResourceUrl(l+"&webKey="+s):m.hideDesktopBookingCTA=!(i=a=""):o&&o.link?(i=o.link,a=r&&r.link?d.trustAsResourceUrl(r.link):d.trustAsResourceUrl(e.link)):(m.hideMobBookingCTA=!(i=""),e&&e.link?a=d.trustAsResourceUrl(e.link):r&&r.link?a=d.trustAsResourceUrl(r.link):m.hideDesktopBookingCTA=!(a="")),m.resultXtimePartners.push({partner:{dealerId:t,desktopBookingLink:a,mobileBookingLink:i}})}function y(){if(window.history&&window.history.pushState){var t,e=r.search();e.dealer&&(e=e.dealer.split("-"),t=e[e.length-1])}else{for(var a,i=location.search.split("&"),n=0;n<i.length;n++)"dealer"===i[n].split("=")[0]&&(a=i[n].split("=")[1].split("-"));if(!a)return;t=a[a.length-1]}if(t){var e=c.find(h,function(e){return+e.code==+t});if(e)return v(e,t),e=t,o.searchByDealer(null,null,e).then(function(e){m.selectedBookingDealer=e[0]}),m.loadBooking(0,!1),1;b()}}function b(){r.search("dealer",null),r.search("keyword",null),r.search("isxtime",null)}u.getXTimeData().then(function(e){h=e.data.dealers,y()}),u.getDealerList().then(function(e){m.dealerNameList=e.data.data}),m.searchClicked=function(e){var t;e.preventDefault(),m.errorMessageEmptyResult=!1,m.errorMessageEmptyClick=!1,m.errorMessageNoDealer=!1,m.dealerName.length&&m.dealerLocation.length?(t=m.dealerLocation,p=isNaN(t)||4!==t.length?"both field":"postal code"):m.dealerName.length?(t=m.dealerName,p="dealer"):m.dealerLocation.length&&(t=m.dealerLocation,p=isNaN(t)||4!==t.length?"location":"postal code"),m.errorMessage="",t?0<t.length&&(f(),("dealer"===p?o.searchByDealer(t):"postal code"===p?(e=+t<2e3?{Ge:2e3,Lt:3e3}:{Ge:1e3*Math.floor(+t/1e3),Lt:1e3*Math.floor(+t/1e3)+1e3},o.searchByDealer(t,e)):o.searchByLocation(t)).then(function(e){if("both field"===p||"postal code"===p&&m.dealerName.length?m.resultsDealers=((e,t)=>{for(var a=[],i=0;i<e.length;i++)-1!==e[i].DealerNameSearch.indexOf(t)&&a.push(e[i]);return a})(e,m.dealerName.toLowerCase()):m.resultsDealers=e,m.resultsDealers.length){var a;e=m.resultsDealers,a=h,m.resultXtimePartners=[],m.hideMobBookingCTA=!1,m.hideDesktopBookingCTA=!1,c.each(e,function(e){var t=c.find(a,{code:e.DealerID});t?v(t,e.DealerID):m.resultXtimePartners.push({partner:{}})}),m.paginationPosition=0,m.hideSpread=!1,m.currentPage=0,m.paginationArray=[],m.paginationLength=Math.ceil(m.resultsDealers.length/m.pageSize);for(var t=0;t<m.paginationLength;t++)m.paginationArray.push(t);m.paginationLength<m.paginationButtonCount&&(m.hideSpread=!0),m.isSearch=!0,m.showResults=!0,m.dealerId="",1===m.resultsDealers.length&&u.openAccordion(),w.getServiceBookingEvent().showAllDealersList()}else m.errorMessageNoDealer=!0,g()},function(e){"dealer"===p?m.errorMessageNoDealer=!0:m.errorMessageEmptyResult=!0,g()})):(m.errorMessageEmptyClick=!0,f())},m.autocompleteLocation=function(){var e=m.dealerLocation;m.myCurrentLocationVisible=!1,3<=e.length?(m.showAutocompleteDealerLocation=!0,o.locationAutocomplete(e).then(function(e){m.suggestions=e,m.errorMessage=null,m.errorMessageEmptyClick=!1,m.errorMessageEmptyResult=!1})):f()},m.autocompleteDealerName=function(){m.showAutocompleteDealerName=!1,m.searchFilterDealerName=m.dealerName},m.autocompleteHandler=function(e,t){m[t]=e,m.dealerId="",f()},m.blurAutocomplete=function(e){a(function(){m.searchFilterDealerName="",m.showAutocompleteDealerName=!1,m.showAutocompleteDealerLocation=!1},400)},m.searchAgain=function(e){e.preventDefault(),m.showAutocompleteDealerName=!1,m.isSearch=!1},m.showNewPage=function(e,t){m.hideSpread=!1,t.preventDefault(),e<0||e>=m.paginationLength||(m.currentPage=e,m.paginationLength<m.paginationButtonCount&&(m.hideSpread=!0),m.paginationLength-m.paginationButtonCount/2<=m.currentPage?(m.paginationPosition=0<=m.paginationLength-m.paginationButtonCount?m.paginationLength-m.paginationButtonCount:0,m.hideSpread=!0):m.paginationButtonCount/2<=m.currentPage?m.paginationPosition=m.currentPage-m.paginationButtonCount/2:m.paginationPosition=0)},m.filterDealerAutocomplete=function(t){return function(e){if(t&&!(t.length<3))return~e.dealerName.toLowerCase().indexOf(t.toLowerCase())&&(m.showAutocompleteDealerName=!0),~e.dealerName.toLowerCase().indexOf(t.toLowerCase())}},m.loadBooking=function(e,t){t&&(m.selectedBookingDealer=m.resultsDealers[e],t=m.selectedBookingDealer,t=u.formatURLpath((t.AdministrativeArea+"-"+t.Locality+"-"+t.DealerName.split(" ").join("-")+"-"+t.DealerID).toLowerCase()),window.history&&window.history.pushState?(r.search("dealer",t),r.search("keyword","undefined"),r.search("isxtime","y")):location.search.length?location.search=location.search+"&dealer="+t:location.search.length="?dealer="+t+"&keyword=undefined&isxtime=y"),w.getServiceBookingEvent().bookOnline(),m.openBooking=!0,w.getServiceBookingEvent().serviceBookingLoadXtime(),m.desktopBookingLink=m.resultXtimePartners[e].partner.desktopBookingLink,m.mobileBookingLink=m.resultXtimePartners[e].partner.mobileBookingLink},m.openNewBookingTab=function(){m.openBooking=!1,window.location.href=m.mobileBookingLink},angular.element(n).bind("resize",function(){var e=m.isMobile;m.isMobile=(n.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)<768,e!=m.isMobile&&t.$apply()}),window.history&&window.history.pushState&&angular.element(n).bind("popstate",function(e){y()||(b(),m.isSearch=!1,m.openBooking=!1,t.$apply())})}}),define("service-booking/services/component.serviceBooking.service.AddressService",["service-booking/component.serviceBooking.app"],function(e){e.factory("addressService",["ADDRESS_FORMAT_CONF",function(d){var e={};return e.formatAddress=function(e){for(var t,a,i,n=[],o=0,r=d.addressFormat,l=d.addressSeparator,s=0;s<r.length;s++)n[o]||(n[o]=[]),"newLine"==r[s]&&0<n[o].length?o++:(t=e,"separator"==(a=r)[i=s]&&t&&t.hasOwnProperty(a[i+1])&&t[a[i+1]].trim()&&0!==t[a[i+1]]?n[o].push(l):e&&e.hasOwnProperty(r[s])&&n[o].push(e[r[s]]));for(var c=0;c<n.length;c++)n[c]=n[c].join(" ");return n},e}])}),define("service-booking/services/component.serviceBooking.service.MapService",["service-booking/component.serviceBooking.app","dealerlocator/google-maps"],function(e,r){e.factory("mapService",["$log","LOCALISATION_CONF","GLOBAL_CONF",function(t,e,a){var i,n={},o=new r({language:a.locale,countryCode:a.marketCode,countryCodes:e.countryCodes,imagePath:"/etc/designs/guxfoap/clientlibs/guxfoap-dealerlocator/img/dealerlocator/",countryBounds:e.polygon,autocompleteCallbackURL:"",autocompleteCallbackName:"autoCompleteDealers",keyCode:a.keyCode});return n.initMap=function(e){o?i=new o.map(e,{disableBusinessPOI:!0}):t.debug("Failed to initalized maps API")},n.getMap=function(){return i},n}])}),define("service-booking/services/component.serviceBooking.service.SearchService",["service-booking/component.serviceBooking.app","analytics/analyticsEventLayer"],function(e,t,a){e.factory("searchService",["$q","$log","LOCALISATION_CONF","GLOBAL_CONF","mapService","CONF","DISTANCE_CONF","$timeout","SERVICE_CONF","addressService",function(c,d,e,u,p,m,l,h,s,f){var g={},v=e.addressformat.split(","),y={Miles:1.60934,Km:1},b=(g.meaMarketList=["AFG","BHR","IRQ","JOR","KWT","LBN","OMN","QAT","SAU","ARE","YEM"],g.ccaMarketList=["ATG","ABW","BHS","BMU","CYM","CUW","DMA","DOM","GRD","HTI","JAM","LCA","MAF","SUR","TTO"],g.arMarketList=["ARG"],g.ecMarketList=["ECU"],g.zaMarketList=["ZAF"],g.twMarketList=["TWN"],g.auMarketList=["AUS"],g.nzMarketList=["NZL"],g.otherMarketList=["PRI","PER","COL"],g.searchNameMarketList=["CHL","VEN","COL"],g.meaLocalityList=["Abha","Abu Dhabi","Al Ahssa","Al Ain","Al Hassa","Amman","Baghdad","Barka","Basra","Beirut","Bureimi","Dammam","Doha","Dubai","Duhok","Erbil","Fujairah","Ha'fr Al Batin","Hail","Hazmieh","Irbid","Jeddah","Jizan","Jubail","Kabul","Madinah","Makkah","Muscat","Najran","Nizwa","Qassim","Ras Al Khaimah","Riyadh","Salalah","Sanaa","Seeb","Sharjah","Shuwaikh","Sitra","Sohar","Sulaymaniyah","Sur","Tabuk","Yanbu","Zarqa"],g.meaCountryList=["Afghanistan","Bahrain","Iraq","Jordan","Kuwait","Lebanon","Oman","Qatar","Saudi Arabia","United Arab Emirates","Yemen"],5);m.defaultMaxResults&&(b=m.defaultMaxResults);function w(e,t,a){return function(){$rootScope.$broadcast("mapPinClicked",t),a.deselectMarkers(),a.selectMarker(t),(selectedMarker=a.markers[t]).showInfoWindow()}}function C(e){var t={};return _.each(e,function(e){t[e.dealerAttribute]=1}),t}function k(e,t,a,i){g.collectSearchData(e,t,a).postalCode=i}return g.dealerNameAutocomplete=function(t){var a,i=c.defer(),e=p.getMap();return 3<=t.length&&e.autocomplete(t,100,function(e){a=3<=t.length?e:{dealers:[],locations:[]},i.resolve(a)},"dealers"),i.promise},g.locationAutocomplete=function(t){var a,i=c.defer(),e=p.getMap();return 3<=t.length&&e.autocomplete(t,5,function(e){a=3<=t.length?e:{dealers:[],locations:[]},i.resolve(a)},"locations"),i.promise},g.searchByLocation=function(e,t){var a,i=c.defer(),n={},o=p.getMap(),r=e;return _.isUndefined(o)&&d.debug("Map has not been initialized"),n.CountryCode=u.iso3MarketCode,t?n.DealerName=t:n=C(m.googleDealerAttributes),$.inArray(u.iso3MarketCode,this.nzMarketList)<0&&(n.Language=u.languageCode),g.updateFilterLanguage(n,e),navigator&&!1===navigator.onLine?i.reject("No connection"):(a=h(function(){i.reject("Timed out")},2e4),o.geocodeLocation(e,function(e){var t=!1;!_.isEmpty(e)&&e[0].types&&(t=_.contains(e[0].types,"postal_code")),_.isEmpty(e)?(o.clearDealers(),h.cancel(a),i.reject("No location found")):(queryLocation=e[0],o.searchDealersByDistance(queryLocation,+m.defaultDistance,+b,function(e){k("location",r,e.length,t),_.isEmpty(e)?(o.clearDealers(),h.cancel(a),i.reject("No results found")):(dealerIndex=0,_.forEach(e,function(e){var t,a,i;e.directions=o.getAddressDirectionsURL(e,v,queryLocation,s.googleMapApi),e.formattedAddress=f.formatAddress(e),e.formattedDistance=(t=e.distance/(1e3*y[l.unit]),a=l.unit,(i=(i=parseFloat(t))&&(1<=i?parseInt(t):Math.round(10*i)/10))?i+" "+a:t),e.callback=w(0,dealerIndex,o),dealerIndex++}),h.cancel(a),i.resolve(e))},n))})),i.promise},g.getAllDealrsList=function(){var n,o=c.defer(),e=C(m.googleDealerAttributes),r=p.getMap();return _.isUndefined(r)&&d.debug("Map has not been initialized"),e.CountryCode=u.iso3MarketCode,$.inArray(u.iso3MarketCode,this.nzMarketList)<0&&(e.Language=u.languageCode),g.updateFilterLanguage(e),navigator&&!1===navigator.onLine?o.reject("No connection"):(n=h(function(){o.reject("Timed out")},2e4),r.searchDealersByDistance("",void 0,1e3,function(e){if(_.isEmpty(e))r.clearDealers(),h.cancel(n),o.reject("No results found");else{for(var t=[],a=0;a<e.length;a++)t.push(e[a].DealerNameSearch);var i={dealers:e,resultDealers:t};h.cancel(n),o.resolve(i)}},e)),o.promise},g.searchByDealer=function(e,t,a){var i,n,o=c.defer(),r=C(m.googleDealerAttributes),l=p.getMap(),s=e;return _.isUndefined(l)&&d.debug("Map has not been initialized"),r.CountryCode=u.iso3MarketCode,$.inArray(u.iso3MarketCode,this.nzMarketList)<0&&(r.Language=u.languageCode),g.updateFilterLanguage(r,e),t&&(r.PostCode=t),!t&&e&&(i={DealerNameSearch:e.toLowerCase()}),a&&(r.DealerID=a),navigator&&!1===navigator.onLine?o.reject("No connection"):(n=h(function(){o.reject("Timed out")},2e4),l.searchDealersByProperties(b,function(e){k("dealer",s,e.length),_.isEmpty(e)?(l.clearDealers(),h.cancel(n),o.reject("No results found")):(dealerIndex=0,_.forEach(e,function(e){e.directions=l.getAddressDirectionsURL(e,v),e.formattedAddress=f.formatAddress(e),e.callback=w(0,dealerIndex,l),dealerIndex++}),h.cancel(n),o.resolve(e))},r,i)),o.promise},g.updateFilterLanguage=function(e,t){e.Brand="Ford",-1<$.inArray(u.iso3MarketCode,this.meaMarketList)&&("en"==u.languageCode?e.Language="English":e.Language="Arabic",e.Brand="Ford",delete e.CountryCode,t)&&-1<$.inArray(t,this.meaLocalityList)&&(e.Locality=t),-1<$.inArray(u.iso3MarketCode,this.ccaMarketList)&&(e.Brand="Ford",delete e.Language,delete e.CountryCode),-1<$.inArray(u.iso3MarketCode,this.arMarketList)&&(e.Brand="Ford"),-1<$.inArray(u.iso3MarketCode,this.ecMarketList)&&(e.Brand="Ford",e.CountryCode="EC",delete e.Language),-1<$.inArray(u.iso3MarketCode,this.zaMarketList)&&(e.Brand="Ford",e.Language="English"),-1<$.inArray(u.iso3MarketCode,this.twMarketList)&&(e.Brand="Ford",delete e.Language,delete e.CountryCode),-1<$.inArray(u.iso3MarketCode,this.otherMarketList)&&(e.Brand="Ford",delete e.Language),-1<$.inArray(u.iso3MarketCode,this.auMarketList)&&(e.Brand="Ford",delete e.Language),-1<$.inArray(u.iso3MarketCode,this.searchNameMarketList)&&(e.Brand="Ford",delete e.Language),-1<$.inArray(u.iso3MarketCode,this.nzMarketList)&&(e.Brand="Ford",delete e.Language)},g.collectSearchData=function(e,t,a){return{searchType:e,searchTerm:t,totalResults:a,distance:m.defaultDistance}},g}])}),define("service-booking/services/component.serviceBooking.service.workFlowData",["service-booking/component.serviceBooking.app"],function(e){e.service("workFlowData",["$http",function(t){var e={getXTimeData:function(){var e=angular.element(".service-booking-search-block").attr("data-resource-path")+".servicebookingserlvet.data";return t({method:"GET",url:e})},getDealerList:function(){var e=angular.element(".service-booking-search-block").attr("data-resource-path")+".servicebookingdealer.data";return t({method:"GET",url:e})},prepareDealerName:function(e){for(var t=e.split(" "),a="",i=0;i<t.length;i++)a+=t[i],i!==t.length-1&&(a+="%20");return a},openAccordion:function(){setTimeout(function(){$(".accordion-title").trigger("click")},0)},formatURLpath:function(e){return e?(e=(e=(e=e.replace(/^\s+|\s+$/g,"")).replace(/[`~!@#$%^&*()_|+\=?;:'",.<>\{\}\[\]\\\/]/gi,"")).replace(/\s+/g,"-").toLowerCase()).replace(/-{2,}/g,"-"):""},newXtimeUrl:function(){var e=angular.element(".service-booking-search-block").attr("data-xtime-link");return e||""}};return e}])}),define("partner-login-form/component.partnerLoginForm.app",["angular"],function(e){return e.module("partnerLoginForm",[]).config(["$locationProvider","$httpProvider",function(e,t){t.defaults.withCredentials=!0,window.history&&window.history.pushState?e.html5Mode({enabled:!0,requireBase:!1}):e.html5Mode(!1)}]).filter("startFrom",function(){return function(e,t){if(e)return e.slice(t=+t)}})}),define("partner-login-form/component.partnerLoginForm.controllers",["partner-login-form/component.partnerLoginForm.app","partner-login-form/controllers/component.partnerLoginForm.controller.Main"],function(e,t){e.controller("MainController",["$scope","$location","$http",t])}),define("partner-login-form/component.partnerLoginForm",["jquery","_","angular","partner-login-form/component.partnerLoginForm.app","partner-login-form/component.partnerLoginForm.controllers","partner-login-form/controllers/component.partnerLoginForm.controller.Main"],function(e,t,a,i){var n={init:function(){e(".partner-login").each(function(e,t){a.bootstrap(t,["partnerLoginForm"])})}};return n}),define("partner-login-form/controllers/component.partnerLoginForm.controller.Main",["analytics/analyticsEventLayer","jquery"],function(e,l){return function(o,e,t){var r=this;r.$http=t,r.$http.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded;charset=utf-8",r.error={loginCode:!1,recaptcha:!1,submission:!1},r.errorMessage="",r.submitForm=function(e){e.stopPropagation();var t=l("#partner-login-form").data("success"),e=l(".pl-config"),a=l('#partner-login-form input[type="text"]:first-child'),i=l('input[name="'+e.data("captcha")+'"]'),n=l('input[name="'+e.data("secret-key")+'"]');invalidCodeError=l('input[name="invalidCodeError"]').val(),invalidCaptchaError=l('input[name="invalidCaptchaError"]').val(),a.val()&&0!==a.val().length?(r.error.loginCode=!1,a.parent().removeClass("error"),i.val()&&0!==i.val().length?(r.error.recaptcha=!1,i.parent().removeClass("error"),l.ajax({type:"POST",url:e.data("submit-path")+"/fordowner/vehicle/users/dealerLogin",data:{loginCode:a.val(),secretKey:n.val(),recaptcha:i.val()},async:!0,dataType:"json",crossDomain:!0,success:function(e){200===e.returnCode?(e.sessionToken&&(e=>{try{var t=new Date;t.setTime(t.getTime()+72e5),expires="; expires="+t.toUTCString(),document.cookie="partnerLoginToken="+e+expires+"; path=/"}catch(e){return}})(e.sessionToken),window.location=t,r.error.submission=!1,r.errorMessage=""):(502===e.returnCode?(r.error.submission=!0,r.error.recaptcha=!1,r.error.loginCode=!1,r.errorMessage=invalidCaptchaError):500===e.returnCode?(r.error.submission=!0,r.error.recaptcha=!1,r.error.loginCode=!1,r.errorMessage=invalidCodeError):(r.error.submission=!0,r.error.recaptcha=!1,r.error.loginCode=!1,r.errorMessage=e.message),l("#imgRecaptcha").click());o.$apply()}})):(r.error.recaptcha=!0,r.error.loginCode=!1,r.error.submission=!1,i.parent().removeClass("error"))):(a.parent().addClass("error"),r.error.loginCode=!0,r.error.recaptcha=!1,r.error.submission=!1)}}}),define("paymentCalculator/component.paymentCalculator",["jquery","angular"],function(o,e){var t,a,i,r,n={},l=window.localStorage,s=o("#serviceLayerUrl").val(),c="",d="";function u(e,t){var a=o("#currencyFormatPattern3").val(),i=getSymbolByMKTconfig(a),n=getSymbolPosition(a);return e?(e=updatePriceFormat(e,a),void 0!==t&&0!=t?e:"after"===n?e+" "+i:i+" "+e):"after"===n?"0 "+i:i+" 0"}function p(e){e.data&&e.data.paymentDetail&&(o("p[name='payment-left']").text(u(e.data.paymentDetail.monthlyPayment)),o("p[name='payment-right']").text(u(e.data.paymentDetail.fixedInterestRate,!0)+"%"))}function m(e){if(null!=e.data.paymentDetail)return e=e.data.paymentDetail,"<tr class='paymentList'><td>Monthly payment</td><td>"+u(e.monthlyPayment)+"</td><tr><tr class='paymentList'><td>Finance term (months)</td><td>"+e.financeTerm+"</td><tr><tr class='paymentList'><td>Amount of credit</td><td>"+u(e.amountOfCredit)+"</td><tr><tr class='paymentList'><td>Total interest charges</td><td>"+u(e.totalInterestCharges)+"</td><tr><tr class='paymentList'><td>Total amount payable</td><td>"+u(e.totalAmountPayable)+"</td><tr><tr class='paymentList'><td>Guaranteed future value</td><td>"+u(e.gauranteedFutureValue)+"</td><tr><tr class='paymentList'><td>Excess mileage charge (Rand per km)</td><td>"+e.excessMileageCharge+"0</td><tr><tr class='paymentList border-no'><td>Interest rate-"+e.tariffName+"</td><td>"+e.fixedInterestRate+"%</td><tr>"}function h(){return"<tr class='paymentList'><td>Monthly payment</td><td></td><tr><tr class='paymentList'><td>Finance term (months)</td><td></td><tr><tr class='paymentList'><td>Amount of credit</td><td></td><tr><tr class='paymentList'><td>Total interest charges</td><td></td><tr><tr class='paymentList'><td>Total amount payable</td><td></td><tr><tr class='paymentList'><td>Guaranteed future value</td><td></td><tr><tr class='paymentList'><td>Excess mileage charge (Rand per km)</td><td></td><tr><tr class='paymentList border-no'><td>Interest rate-fixed</td><td></td><tr>"}function f(e,t){l.setItem(e,JSON.stringify(t))}function g(){""==o(".form-1 input[name='deposit']").val()&&o(".form-1 input[name='deposit']").val("0");var e=("undefined"==o(".form-1 input[name='deposit']").val()||""==o(".form-1 input[name='deposit']").val()||null==o(".form-1 input[name='deposit']").val()?o(".depositHidden"):o(".form-1 input[name='deposit']")).val(),t=("undefined"==o(".form-1 select[name='number_Of_Monthly_Payments']").val()||""==o(".form-1 select[name='number_Of_Monthly_Payments']").val()||null==o(".form-1 select[name='number_Of_Monthly_Payments']").val()?o(".monthlyPaymentHidden"):o(".form-1 select[name='number_Of_Monthly_Payments']")).val(),a=("undefined"==o(".form-1 select[name='mileage_per_annum']").val()||""==o(".form-1 select[name='mileage_per_annum']").val()||null==o(".form-1 select[name='mileage_per_annum']").val()?o(".mileageHidden"):o(".form-1 select[name='mileage_per_annum']")).val(),i=("undefined"==o(".form-1 select[name='financePlan']").val()||""==o(".form-1 select[name='financePlan']").val()||null==o(".form-1 select[name='financePlan']").val()?o(".financePlanHidden"):o(".form-1 select[name='financePlan']")).val(),n=parseInt(o("#extraItems").val());return{deposit:e,term:t,milesOrKMPerAnnum:a,derivativeKey:c,sellingPrice:d,defaultRequest:r,FinancePlanCode:i,optionTotalPrice:n}}function v(e){var t=0,t=parseInt(o("#extraItems").val());return isNaN(t)&&null!=a.optionTotalPrice&&(t=a.optionTotalPrice),e?{defaultRequest:r=!0,sellingPrice:d,derivativeKey:c}:(r=!1,{deposit:a.deposit,term:a.term,milesOrKMPerAnnum:a.milesOrKMPerAnnum,defaultRequest:r,derivativeKey:c,sellingPrice:d,optionTotalPrice:t})}return o(".getpayment").click(function(){l.removeItem("requestData")}),o(".build-quote-btn").click(function(){o(".getpayment").is(":visible")&&l.removeItem("requestData")}),n.setSummerySameHeight=function(){o(".same-height-price-build").css({height:"auto","min-height":"inherit"});var e=o(".same-height-price-build").map(function(){return o(this).height()}).get(),e=Math.max.apply(null,e);return o(".same-height-price-build").css("min-height",e+"px")},n.getFinanceSummaryTemplate=function(e){var t,e=e.data.paymentDetail;return"<tr><td>Finance Plan</td><td>"+e.financePlanName+"</td><tr><tr class='tableColorWhite' ><td>Customer deposit</td><td>"+u(e.customerDeposit)+"</td><tr><tr ><td>Finance term(months)</td><td>"+e.financeTerm+"</td><tr><tr class='tableColorWhite'><td>Mileage per annum(km)</td><td>"+((t=e.milagePerAnnum)&&t.toString().replace(/\d+/,function(e){return e.replace(/(\d)(?=(\d{3})+$)/g,"$1,")}))+"</td><tr><tr ><td>Monthly payment</td><td>"+u(e.monthlyPayment)+"</td><tr><tr class='tableColorWhite' ><td>Guaranteed future value</td><td>"+u(e.gauranteedFutureValue)+"</td><tr><tr><td>Interest rate-"+e.tariffName+"</td><td>"+e.fixedInterestRate+"%</td><tr>"},n.getPaymentData=function(){a=localStorage.getItem("requestData"),a=JSON.parse(a),o(".getpayment").is(":visible")&&(d=o(".heading .getpayment").attr("data-sellingprice"),c=o(".heading .getpayment").attr("data-derivativekey"),t=v(!0)),o(".editpayment").is(":visible")&&(d=o(".heading .editpayment").attr("data-sellingprice"),c=o(".heading .editpayment").attr("data-derivativekey"),t=v(!1)),o(".financeSummary").length&&(d=o(".financeSummary").data("sellingprice"),c=o(".financeSummary").data("derivativekey"),t=v(void 0===a||null==a||""==a)),o.ajax({url:s+"/fordowner/vehicle/buildandprice/credit/models/calculatePaymentForZA?",dataType:"json",data:t,success:function(e){console.log(e),200!=e.returnCode&&400==e.errorCode||(o(a).length?(o(".form-1 select[name='financePlan']").val(a.FinancePlanCode).trigger("change"),o(".form-1 select[name='mileage_per_annum']").val(a.milesOrKMPerAnnum).trigger("change"),o(".form-1 select[name='number_Of_Monthly_Payments']").val(a.term).trigger("change"),o(".form-1 input[name='deposit']").val(a.deposit),o(".financePlanHidden").val(a.FinancePlanCode),o(".mileageHidden").val(a.milesOrKMPerAnnum),o(".monthlyPaymentHidden").val(a.term),o(".depositHidden").val(a.deposit),"null"==e.data.paymentDetail&&o(".calculator-wrapper table").html(h()),o(".calculator-wrapper table").html(m(e)),o(".continue-button").css("visibility","visible"),n.setSummerySameHeight(),f("requestData",g())):(o(".calculator-wrapper table").html(h()),o(".form-1 input[name='deposit']").val("0")),p(e))},error:function(){o(".calculator-wrapper table").html(h()),o(".sl-error-msg").css("display","block")}})},n.init=function(){setTimeout(function(){n.getPaymentData()},1e3),o(".continue").click(function(){o(".overlay-container .overlay-close").trigger("click"),n.setSummerySameHeight()}),o(".overlay-close").click(function(){n.setSummerySameHeight()}),o(".form-1 input[name='deposit']").bind("input propertychange",function(){var e=o(".form-1 input[name='deposit']").val();1==/^\d+(\.\d{1,10})?$(?!.*[a-zA-Z]\s*\d)/.test(e)?(o(".regwrong").css("display","none"),o(".form-1 .cta-button").removeAttr("disabled")):(""==e?(o(".regwrong").css("display","block"),o(".regwrong").text("Please enter deposit")):(o(".regwrong").css("display","block"),o(".regwrong").text("Please enter correct deposit")),o(".form-1 .cta-button").attr("disabled","true"))}),o(".form-1 select[name='financePlan']").on("change",function(e){o(".form-1 select[name='mileage_per_annum'] option").remove(),o(".form-1 select[name='number_Of_Monthly_Payments']  option").remove(),o(".form-1 select[name='mileage_per_annum']").select2("val",""),o(".form-1 select[name='number_Of_Monthly_Payments']").select2("val","");var t=o(".form-1 select[name='financePlan']").find("option:selected").val();"0"==t&&(o(".form-1 select[name='number_Of_Monthly_Payments']").append("<option value= 24>24</option><option value= 36>36</option><option value= 48>48</option>"),o(".form-1 select[name='mileage_per_annum']").append("<option value= 10000>10 000</option><option value= 15000>15 000</option><option value= 20000>20 000</option><option value= 25000>25 000</option><option value= 30000>30 000</option><option value= 35000>35 000</option><option value= 40000>40 000</option>")),"1"==t&&o(".form-1 select[name='number_Of_Monthly_Payments']").append("<option value= 12>12</option><option value= 24>24</option><option value= 36>36</option><option value= 48>48</option><option value= 60>60</option><option value= 72>72</option>")}),o(".form-1 .input-field ").append("<i class=unit>"+o("#currencySymbol").val()+"</i>"),o(".form-1 .input-field ").append("<span class=regwrong></span>");var e=o(".paymentCalculator .configuration").data("payment-json").paymentPlanList[0];o(".discription").html(e.disclaimer),o(".form-1 .cta-button").click(function(e){e.preventDefault(),r=!1,setTimeout(function(){var e;""==(i=o(".form-1 input[name='deposit']").val())&&(i=0),e=parseInt(o("#extraItems").val()),o.ajax({url:s+"/fordowner/vehicle/buildandprice/credit/models/calculatePaymentForZA?",dataType:"json",type:"get",data:{defaultRequest:r,deposit:i,term:o(".form-1 select[name='number_Of_Monthly_Payments']").val(),milesOrKMPerAnnum:o(".form-1 select[name='mileage_per_annum']").val(),derivativeKey:c,sellingPrice:d,optionTotalPrice:e},success:function(e){200==e.returnCode&&"400"!=e.errorCode&&"500"!=e.errorCode?(o(".calculator-wrapper table").html(""),o(".calculator-wrapper table").html(m(e)),"null"!=e.data.baseinfo.messageCode&&(o(".regwrong").css("display","block"),o(".regwrong").text(e.data.baseinfo.messageText),o(".form-1 input[name='deposit']").val(e.data.paymentDetail.customerDeposit+"0"),f("requestData",g())),o(".continue-button").css("visibility","visible"),o(".payment-title").css("display","block"),o(".getpayment").css("display","none"),o(".editpayment").css("display","block"),o(".sl-error-msg").css("display","none"),o(".payment-button").hide(),p(e),o(".financeSummary").length&&(o(".financeSummary").show(),setTimeout(function(){o(".financeSummary table").html(n.getFinanceSummaryTemplate(e))},500))):(o(".sl-error-msg").css("display","block"),o(".continue-button").css("visibility","hidden"),o(".calculator-wrapper table").html(h()))},error:function(){o(".sl-error-msg").css("display","block")}})},2e3);e=o(".build-quote-btn").data("reviewsavetext");o(".build-quote-btn").html(e),f("requestData",g()),o(".heading .panel-actions").css("display","block")}),clearTimeout(void 0),setTimeout(function(){o(".paymentCalculator .finaceplan .form-dropdown").length&&o(".select2-drop  .select2-search").hide()},300)},n}),define("compare-model-across-vehicle/component.compareModelAcrossVehicle.app",["angular"],function(e){return e.module("compareModelAcrossVehicle",[])}),define("compare-model-across-vehicle/component.compareModelAcrossVehicle.controllers",["compare-model-across-vehicle/component.compareModelAcrossVehicle.app","compare-model-across-vehicle/controllers/compareModelAcrossVehicle.controller.Main"],function(e,t){e.controller("MainController",["$scope","$filter","$location","compareService",t])}),define("compare-model-across-vehicle/component.compareModelAcrossVehicle.filters",["compare-model-across-vehicle/component.compareModelAcrossVehicle.app","compare-model-across-vehicle/filters/compareModelAcrossVehicle.filter.sortFeatures"],function(e,t){e.filter("sortFeatures",[t]),e.filter("unsafe",["$sce",function(t){return function(e){return t.trustAsHtml(e)}}])}),define("compare-model-across-vehicle/component.compareModelAcrossVehicle",["jquery","angular","disclosure/component.disclosure","tooltip-gux/global.ux.tooltip","compare-model-across-vehicle/component.compareModelAcrossVehicle.app","compare-model-across-vehicle/component.compareModelAcrossVehicle.controllers","compare-model-across-vehicle/component.compareModelAcrossVehicle.services","compare-model-across-vehicle/component.compareModelAcrossVehicle.filters"],function(s,r,l,e){function c(){for(var e=s(".compare-model-vehicel .model-vehicel-item"),t=s(".compare-model-vehicel .model-vehicel-item .item-data-wrap"),a=0,i=0;i<t.length;i++)s(t[i]).outerHeight()>a&&(a=s(t[i]).outerHeight());for(var n=0;n<e.length;n++)s(e[n]).height(a)}return s(window).on("resize",function(){c();var e=s(".model-table");s(".model-table .model-table-row").removeAttr("style");for(var t=0;t<e.length;t++)for(var a=s(e[t]).find(".model-table-col").eq(0).find(".model-table-row"),i=0;i<a.length;i++){for(var n=s(a[i]).height(),o=s(e[t]).find(".model-table-col"),r=0;r<o.length;r++)s(o[r]).find(".model-table-row").eq(i).height()>n&&(n=s(o[r]).find(".model-table-row").eq(i).height());s(a[i]).height(n);for(var l=0;l<o.length;l++)s(o[l]).find(".model-table-row").eq(i).height(n)}}),{init:function(){var e=window,t=s(window),a=s(".table-holder"),i=s(".compare-model-select-sticky"),n=(s(".model-table-item.model-table-sticky"),a.offset().top-30);function o(){var e=t.scrollTop();n<e?(a.hasClass("active")?(i.addClass("active"),s(".model-table-item.model-table-sticky").addClass("active")):(i.removeClass("active"),s(".model-table-item.model-table-sticky").removeClass("active")),s(".secondaryNavigation").length&&i.css("top",s(".secondaryNavigation").outerHeight())):(i.removeClass("active"),s(".model-table-item.model-table-sticky").removeClass("active")),e>n+s(".table-holder").height()-t.height()&&s(".model-table-item.model-table-sticky").removeClass("active"),e>n+s(".table-holder").height()+i.height()/2&&(i.removeClass("active"),s(".model-table-item.model-table-sticky").removeClass("active"))}s(window).on("resize",function(){n=a.offset().top-30}),s(document.body).on("click",".model-btn-box button, .model-table-sticky button",function(){o()}),e.onscroll=function(){o()},c(),s("#compare-model-vehicle").each(function(e,t){r.bootstrap(t,["compareModelAcrossVehicle"])}),s(".form-dropdown .select2-container").remove(),s(".form-dropdown select").removeClass("select2-offscreen").select2({minimumResultsForSearch:-1}),l.init()}}}),define("compare-model-across-vehicle/component.compareModelAcrossVehicle.services",["compare-model-across-vehicle/component.compareModelAcrossVehicle.app","compare-model-across-vehicle/services/compareModelAcrossVehicle.service.compare"],function(e,t){e.service("compareService",["$rootScope",t])}),define("compare-model-across-vehicle/controllers/compareModelAcrossVehicle.controller.Main",["_","angular","jquery"],function(v,y,b){return function(i,t,e){var m=this,a=y.element(document.querySelector("#data-json-models")).data("json"),r=y.element(document.querySelector("#data-json-attr")).data("json"),n=y.element(document.querySelector("#data-location")).data("required");if(window.location.pathname.replace(".html","").split("/").slice(-1)[0].replace("-","").toLowerCase(),void 0!==a){m.listItems=[{},{},{}],m.listAtributes={},m.checkDiff=!1,m.lengthItems=0,m.filterState=!1,m.listFeatures=[],m.dataJsonServer=JSON.parse(JSON.stringify(a)),m.listVehicles=m.dataJsonServer.nameplates,m.listVehiclesUnUse=JSON.parse(JSON.stringify(m.dataJsonServer.nameplates)),m.listModels=m.dataJsonServer.modelsForNameplates,m.specificData=m.dataJsonServer.modelsRelatedSpecificData,m.tableData={},m.sortedTableData={},m.unsortedTableData={},m.featuresLength={},m.featuresSortedLength={},m.showTable=!1,m.selectedModel="",m.selectedVehUrl="",m.afterUrl=!1,m.openedOverlay=!1,m.inputValue=void 0!==b.cookie("common.location.LOC")?b.cookie("common.location.LOC"):"",m.useType=void 0!==b.cookie("common.location.type")?b.cookie("common.location.type"):"P",m.addedModels={},m.errorAjax=!1;var o=b("html");if(b(document).on("keyup",function(e){27===e.keyCode&&(e.preventDefault(),m.openedOverlay=!1,o.removeClass("is-overlay-open"),i.$apply())}),m.openOverlay=function(){m.openedOverlay=!0,o.addClass("is-overlay-open")},m.closeOverlay=function(){m.openedOverlay=!1,o.removeClass("is-overlay-open")},m.updateDescData=function(e){for(var t in m.specificData){var a,i=m.specificData[t];for(a in i.descInfo=[],r){var n=v.keys(r).indexOf(a);"fuelRange"===a?void 0!==i.fuelEfficiencyFrom&&void 0!==i.fuelEfficiencyTo&&(i.descInfo[n]=JSON.parse(JSON.stringify(r[a])),i.descInfo[n].value=i.fuelEfficiencyFrom+"-"+i.fuelEfficiencyTo):"priceRange"===a?void 0!==i.startingPrice&&void 0!==i.maxPrice&&(i.descInfo[n]=JSON.parse(JSON.stringify(r[a])),i.descInfo[n].value=i.startingPrice+"-"+i.maxPrice):void 0!==i[a]&&(i.descInfo[n]=JSON.parse(JSON.stringify(r[a])),i.descInfo[n].value=i[a])}}if(e)for(var o in m.addedModels){o=m.addedModels[o];m.addVehicle(o.index,o.veh,o.model)}},m.updateDescData(),m.updatePrices=function(e,t){if(e){if(t)for(var a=b("#currencyFormatPattern").val(),i=0;i<e.length;i++){var n=e[i];void 0!==n.maxPrice&&(m.specificData[n.key].maxPrice=a?updatePriceFormat(n.maxPrice,a):n.maxPrice),void 0!==n.startingPrice&&(m.specificData[n.key].startingPrice=a?updatePriceFormat(n.startingPrice,a):n.startingPrice)}else for(var o=0;o<e.model.length;o++)for(var r=e.model[o],l=0;l<r.derivatives.length;l++)void 0!==m.specificData[r.derivatives[l].id]&&(m.specificData[r.derivatives[l].id].maxPrice=r.derivatives[l].maxPrice,m.specificData[r.derivatives[l].id].startingPrice=r.derivatives[l].startingPrice);m.updateDescData(!0)}},m.getNewPrices=function(t,a){t&&b.ajax({url:b("#serviceLayerUrl").val()+"/fordowner/vehicle/buildandprice/getAUSModelPriceByPostalcode",beforeSend:function(e){e.setRequestHeader("Content-Type","application/json")},dataType:"json",data:t,type:"POST"}).done(function(e){e.result&&(m.updatePrices(e.vehicles[0]),a)&&(b.cookie("common.location.LOC",a),b.cookie("common.location.type",t.usageType),m.inputValue=b.cookie("common.location.LOC"),m.useType=b.cookie("common.location.type"),m.closeOverlay(),m.errorAjax=!1),i.$apply()}).fail(function(){console.error("Fail ajax call to SL"),m.closeOverlay(),a&&(m.errorAjax=!0),i.$apply()})},m.getNewDynamicPrices=function(e,t){e&&b.ajax({url:t,dataType:"json",data:e,type:"GET"}).done(function(e){e.result&&m.updatePrices(e.vehicle,!0),i.$apply()}).fail(function(){console.error("Fail ajax call to SL")})},void 0!==n&&0<n.length){var l,s=[],a={};for(l in m.listVehiclesUnUse)s.push(m.listVehiclesUnUse[l]);a.nameplates=s,a.location=m.inputValue,a.usageType=m.useType,m.getNewPrices(JSON.stringify(a))}else{var n=b("#isDynamicPrice").val(),a=b("#serviceLayerUrl").val()+"/fordowner/vehicle/model/price",c="",c=(c+="derivativeKeys="+v.keys(JSON.parse(JSON.stringify(m.specificData))).join(","))+("&countryCodeISO="+b("#countryCodeISO").val());"true"===n&&m.getNewDynamicPrices(c,a)}m.sendForm=function(e,t){if(m.errorAjax=!1,void 0!==e&&void 0!==t){var a,i=JSON.stringify(m.addedModels),n=[],o={};for(a in m.listVehiclesUnUse)n.push(m.listVehiclesUnUse[a]);o.nameplates=n,o.location=e,o.usageType=t,m.getNewPrices(JSON.stringify(o),e),Object.keys(m.addedModels).length&&b.cookie("addedModels",i)}},m.updateJsonData=function(e){m.listVehicles=JSON.parse(JSON.stringify(m.dataJsonServer.nameplates)),m.listModels=JSON.parse(JSON.stringify(m.dataJsonServer.modelsForNameplates));for(var t=0;t<m.listItems.length;t++){var a=m.listItems[t];if(a.activeItem){var i,n=m.listModels[a.activeIDVeh],o=a.activeIDMod;for(i in n)n[i]===o&&delete m.listModels[a.activeIDVeh][i];if(0<!Object.keys(n).length)for(var r in delete m.listModels[a.activeIDVeh],m.listVehicles)m.listVehicles[r]===a.activeIDVeh&&delete m.listVehicles[r]}}e?-1!==v.values(m.listVehicles).indexOf(e)&&(m.selectedVehUrl=e):m.selectedVehUrl="",m.updateCustomSelects(!0)},m.addVehicle=function(e,t,a,i){void 0!==m.specificData[a]&&(m.listItems[e].dataSpec=m.specificData[a],m.listItems[e].activeItem=!0,m.listItems[e].activeIDMod=a,m.listItems[e].activeIDVeh=t,m.updateCustomSelects(!0),m.updateTableData(),m.updateJsonData(i),m.addedModels[e]={},m.addedModels[e].index=e,m.addedModels[e].veh=t,m.addedModels[e].model=a)},m.removeVehicle=function(e){delete m.listItems[e].dataSpec,delete m.addedModels[e],m.listItems[e].activeItem=!1,m.listItems[e].activeIDMod="",m.listItems[e].activeIDVeh="",m.updateTableData(),m.updateJsonData()},m.updateCustomSelects=function(e){clearTimeout(void 0);setTimeout(function(){(e?(b(".form-dropdown .select2-container").remove(),b(".form-dropdown select")):(b(".form-dropdown.select-model .select2-container").remove(),b(".form-dropdown.select-model select"))).removeClass("select2-offscreen").select2({minimumResultsForSearch:-1}),b(".select-control").trigger("change")},100)},m.updateTableData=function(){for(var e in m.tableData={},m.featuresLength={},m.lengthItems=0,m.listItems.forEach(function(e,t){if(e.activeItem&&(m.lengthItems=m.lengthItems+1),void 0===e.dataSpec||void 0===e.dataSpec.features)e.dataSpec={},e.dataSpec.features={};else for(var a in e.dataSpec.features){for(var i in e.dataSpec.features[a]){var n;""!=e.dataSpec.features[a][i]&&((n=e.dataSpec.features[a][i])[1],""==n[1])&&(e.dataSpec.features[a][i]=e.dataSpec.features[a][i][0])}var o=a.replace(/[&\/\\#,+()$~%.'":*?<>{}\s]/g,"").toLowerCase();void 0===m.tableData[o]&&(m.tableData[o]={},m.tableData[o].categoryName=a,m.tableData[o].features={},m.tableData[o].features=[[],[],[]]),m.tableData[o].features[t]=Array.prototype.slice.call(e.dataSpec.features[a]),(void 0===m.featuresLength[o]||m.featuresLength[o]<e.dataSpec.features[a].length)&&(m.featuresLength[o]=e.dataSpec.features[a].length)}}),m.tableData){var t,a=e;for(t in m.tableData[e].features)if(m.tableData[a].features[t].length<m.featuresLength[a])for(var i=m.featuresLength[a]-m.tableData[a].features[t].length,n=0;n<i;n++)m.tableData[a].features[t];for(var o=b("#data-disclosure-feature").data("disclosure-feature-mapping"),r=[[],[],[]],l=0;l<m.tableData[a].features[0].length;l++)if(""!==m.tableData[a].features[0][l]||""!==m.tableData[a].features[1][l]||""!==m.tableData[a].features[2][l]){var s,c=String(m.tableData[a].features[0][l]).replace(/ /g,"").split(":")[0].toLowerCase(),d=String(m.tableData[a].features[1][l]).replace(/ /g,"").split(":")[0].toLowerCase(),u=String(m.tableData[a].features[2][l]).replace(/ /g,"").split(":")[0].toLowerCase();for(s in o){var p=String(s).replace(/ /g,"").toLowerCase();p==c&&(m.tableData[a].features[0][l]=m.tableData[a].features[0][l]+'<span class="gux-tooltip" data-gux-tooltip-text="'+o[s]+'"><sup class="gux-tooltip-rte-label">Tooltip</sup></span>'),p==d&&(m.tableData[a].features[1][l]=m.tableData[a].features[1][l]+'<span class="gux-tooltip" data-gux-tooltip-text="'+o[s]+'"><sup class="gux-tooltip-rte-label">Tooltip</sup></span>'),p==u&&(m.tableData[a].features[2][l]=m.tableData[a].features[2][l]+'<span class="gux-tooltip" data-gux-tooltip-text="'+o[s]+'"><sup class="gux-tooltip-rte-label">Tooltip</sup></span>')}r[0].push(m.tableData[a].features[0][l]),r[1].push(m.tableData[a].features[1][l]),r[2].push(m.tableData[a].features[2][l])}0==r[0].length&&0==r[1].length&&0==r[2].length?delete m.tableData[e]:(r=m.changeSorting(r),m.tableData[e].features=r)}m.showTable=0<Object.keys(m.tableData).length,m.showTable||(m.filterState=!1),m.unsortedTableData=JSON.parse(JSON.stringify(m.tableData)),clearTimeout(void 0);setTimeout(function(){m.updateHeightsItems(0<Object.keys(m.tableData).length)},30)},m.changeSorting=function(e){var t=b(b(".compare-model-select .model-select-holder")[0]).find(".model-select-item.active").length;return e[0]=m.arraySorting(e[0]),e[1]=m.arraySorting(e[1]),e[2]=m.arraySorting(e[2]),1==t||3==t?0!=e[0].length&&0!=e[1].length?e[1]=m.swapingValue(e[0],e[1]):0!=e[1].length&&0!=e[2].length?e[2]=m.swapingValue(e[1],e[2]):0!=e[2].length&&0!=e[0].length&&(e[2]=m.swapingValue(e[0],e[2])):2==t&&(0!=e[0].length&&0!=e[1].length&&0!=e[2].length?(e[1]=m.swapingValue(e[0],e[1]),e[2]=m.swapingValue(e[1],e[2])):0!=e[0].length&&0!=e[1].length?e[1]=m.swapingValue(e[0],e[1]):0!=e[1].length&&0!=e[2].length?e[2]=m.swapingValue(e[1],e[2]):0!=e[2].length&&0!=e[0].length&&(e[2]=m.swapingValue(e[0],e[2]))),m.makeEqualLength(e[0],e[1],e[2])},m.arraySorting=function(e){return e.filter(Boolean).sort(function(e,t){return e.trim().toLowerCase().localeCompare(t.toLowerCase().trim())})},m.swapingValue=function(e,t){for(var a=[],i=0;i<e.length;i++){var n=e[i].replace(/ /g,"").split(":")[0].toLowerCase();a[i]="";for(var o=0;o<t.length;o++)n==t[o].replace(/ /g,"").split(":")[0].toLowerCase()&&(a[i]=t[o],t.splice(o,1))}return a=a.concat(t)},m.makeEqualLength=function(e,t,a){var i=e.length,n=t.length,o=a.length,r=[],l=Math.max(i,n,o),s=0;if(i!=l)for(var s=l-i,c=0;c<s;c++)e.push("");if(n!=l){s=l-n;for(c=0;c<s;c++)t.push("")}if(o!=l){s=l-o;for(c=0;c<s;c++)a.push("")}for(var d=[],c=0;c<e.length;c++)""==e[c]&&""==t[c]&&""==a[c]&&d.push(c);for(c=0;c<d.length;c++)e.splice(d[c],1),t.splice(d[c],1),a.splice(d[c],1);return r.push(e,t,a),r},m.showDifferences=function(e){clearTimeout(void 0);setTimeout(function(){m.updateHeightsItems(!0)},1e3);m.tableData=e?t("sortFeatures")(JSON.parse(JSON.stringify(m.unsortedTableData)),!0,m.listItems):JSON.parse(JSON.stringify(m.unsortedTableData))},m.updateHeightsItems=function(e){if(e){var t=b(".model-table.row-table");b(".model-table.row-table .model-table-row").removeAttr("style");for(var a=0;a<t.length;a++)for(var i=b(t[a]).find(".model-table-col").eq(0).find(".model-table-row"),n=0;n<i.length;n++){for(var o=b(i[n]).height(),r=b(t[a]).find(".model-table-col"),l=0;l<r.length;l++)b(r[l]).find(".model-table-row").eq(n).height()>o&&(o=b(r[l]).find(".model-table-row").eq(n).height());b(i[n]).height(o);for(var s=0;s<r.length;s++)b(r[s]).find(".model-table-row").eq(n).height(o)}}},void 0!==r&&(m.attrData=r),m.queryToHash=function(e){var e=e.replace(/\?/,"").split("&"),a={};return b.each(e,function(e,t){return t=t.split("="),a[t[0]]=t[1]}),a};var d,u,n=window.location.search,c=m.queryToHash(n),p=JSON.parse(JSON.stringify(m.dataJsonServer.modelsForNameplates));if(void 0!==c.nameplate)void 0!==p[a=c.nameplate]&&(n=Object.keys(p[a])[0],m.addVehicle(0,a,p[a][n],a));else if(b.cookie("modelCompare")){var h=b.cookie("modelCompare").split(":");b.removeCookie("modelCompare",{path:"/"});for(var f=0;f<h.length;f++){for(var g in d=h[f],u="",p)-1!==v.values(p[g]).indexOf(d)&&(u=g);m.addVehicle(f,u,d)}}}else console.error("JSON from BE is undefined")}}),define("compare-model-across-vehicle/services/compareModelAcrossVehicle.service.compare",[],function(){return function(){var e={},t={};return e.getData=function(){return t},e}}),define("compare-model-across-vehicle/filters/compareModelAcrossVehicle.filter.sortFeatures",["_"],function(h){return function(){return function(e,t,a){if(t){for(var i,n={},o=[],r=0;r<a.length;r++)a[r].activeItem&&o.push(r);for(i in e){for(var l=e[i].features,s=[],c=0;c<l[0].length;c++){var d=h.filter(h.pluck(l,c),function(e,t){return-1!=o.indexOf(t)}),u=d[0];h.every(d,function(e){return e.replace(" ","").replace(/[&\/\\#,+()$~%.'":*?<>{}\s]/g,"").toLowerCase()===u.replace(" ","").replace(/[&\/\\#,+()$~%.'":*?<>{}\s]/g,"").toLowerCase()})||s.push(c)}if(0<s.length){n[i]={},n[i].categoryName=e[i].categoryName,n[i].features=[];for(var p=0;p<l.length;p++){var m=h.filter(l[p],function(e,t){return-1!=s.indexOf(t)});n[i].features[p]=m}}}return n}return e}}}),define("sync-usb-download/analytics.syncUsbDownload",["tagging-framework/analyticsDirectCall","tagging-framework/analyticsVariables"],function(s,c){var d,e={},u="";return e.fireInteractionEvents=function(e,t,a,i){var n="",o="",r="",l="";""===u&&(u=c.getPageName()),void 0!==t&&0<t.length&&(n=":"+t),void 0!==a&&0<a.length&&(o=":"+a),void 0!==e&&0<e.length&&(r=":"+e),void 0!==i&&0<i.length&&(l=":"+i),d=c.getPageTitle()+o,t=u+n+o+r,s.onclick(t,d+r+l)},e.fireLoadEvents=function(e,t){var a="",i="";""===u&&(u=c.getPageName()),void 0!==e&&0<e.length&&(a=":"+e),void 0!==t&&0<t.length&&(i=":"+t),e=u+a+i,s.genericOverlay(e,"","",e)},e}),define("sync-usb-download/component.syncUsbDownload.app",["angular"],function(e){return e.module("syncUsbDownload",[])}),define("sync-usb-download/component.syncUsbDownload.controllers",["sync-usb-download/component.syncUsbDownload.app","sync-usb-download/controllers/syncUsbDownload.controller.Main"],function(e,t){e.controller("MainController",["$scope","$attrs","$window",t])}),define("sync-usb-download/component.syncUsbDownload.directives",["sync-usb-download/component.syncUsbDownload.app","sync-usb-download/directives/syncUsbDownload.directive.fileLoad"],function(e,t){e.directive("fileLoad",["$filter",t])}),define("sync-usb-download/component.syncUsbDownload",["jquery","angular","marketConfigGlobal","overlay/component.overlay","sync-usb-download/analytics.syncUsbDownload","sync-usb-download/component.syncUsbDownload.app","sync-usb-download/component.syncUsbDownload.controllers","sync-usb-download/component.syncUsbDownload.directives"],function(m,a,e,h,f){var g=!1,v="",u="",y="",b=!1,w=e.getCurrentMarketCode();function C(e){var e=e.replace(/\?/,"").split("&"),a={};return m.each(e,function(e,t){return t=t.split("="),a[t[0]]=t[1]}),a}function p(){var e=m(".overlay-container .overlay-content"),t=document.querySelector(".vinSearch .not-sync-updated");m(".vinSearch .recall-block").removeAttr("style"),m(".vinSearch .active").removeClass("active"),m(".recall-block .email-field").addClass(".hide-email"),m(".recall-block .email-field input").attr("data-validation",v),t&&t.classList.remove("active"),e.attr("class",y),e.addClass("recall-block-active"),"br"!==w||"ar"!==w?m(".recall-block .esn-field").addClass(".hide-esn"):m(".recall-block .esn-field").removeClass("hide-esn"),(null===document.querySelector("input[name=esn]")?m(".esn-field"):m(".email-field")).remove()}function k(){var e=m(".overlay-container .recall-block").attr("data-redirectionpath")+".html";C(window.location.search).wcmmode&&(e+="?wcmmode=disabled"),e&&window.location.assign(e)}function S(e,t){null!=sessionStorage.getItem("selectedVin")&&null!=sessionStorage.getItem("email")&&(sessionStorage.removeItem("selectedVin"),sessionStorage.removeItem("email"));var a,i,n,o,r=m(".overlay-container .overlay-content");if("No New Updates"===e.status?(g=!1,m(".vinSearch .no-new-updates").length&&(m(".vinSearch .recall-block").css("display","none"),m(".vinSearch .no-new-updates").addClass("active"),r.attr("class",y),r.addClass("no-new-updates-active"),m(".no-new-updates .cta-button").on("click.closeOverlay",function(){h.overlays[0].hideOverlay(),p(),m("#sync-usb-download").length&&k()}))):"Requested But Processing"===e.status?(g=!1,m(".vinSearch .requested-but-processing").length&&(m(".vinSearch .recall-block").css("display","none"),m(".vinSearch .requested-but-processing").addClass("active"),r.attr("class",y),r.addClass("requested-but-processing-active"),m(".requested-but-processing .cta-button").on("click.closeOverlay",function(){h.overlays[0].hideOverlay(),p(),m("#sync-usb-download").length&&k()}))):"Request Success"===e.status?(a=window.location.origin+m(".recall-block").attr("data-redirectionpath"),i="",n=window.location.search,(o=C(window.location.search)).vin?n.replace(o.vin,m(".vih-field input").val()):n=o.wcmmode?window.location.search+"&vin="+m(".vih-field input").val():"?vin="+m(".vih-field input").val(),i=".html"+n,h.overlays[0].hideOverlay(),window.location.assign(a+i)):"Request Fail"===e.status?(g=!1,m(".vinSearch .request-fail").length&&(m(".vinSearch .recall-block").css("display","none"),m(".vinSearch .request-fail").addClass("active"),r.attr("class",y),r.addClass("request-fail-active"),m(".request-fail .cta-button").on("click.closeOverlay",function(){h.overlays[0].hideOverlay(),p(),m("#sync-usb-download").length&&k()}))):"Not Requested"===e.status?(g=!0,m(".overlay-container .recall-holder .vih-field input").attr("disabled",!0),m(".overlay-container .recall-holder .vih-field input").addClass("disabled-btn"),m(".recall-block .email-field").removeClass("hide-email"),0===m(".email-field input").val().length?(m(".overlay-container .recall-holder .btn-holder .cta-button").attr("disabled",!0),m(".overlay-container .recall-holder .btn-holder .cta-button").addClass("disabled-btn"),m(".overlay-container .recall-holder .email-field input").addClass("untouch"),m(".overlay-container .recall-holder .esn-field input").addClass("untouch")):(m(".overlay-container .recall-holder .btn-holder .cta-button").attr("disabled",!1),m(".overlay-container .recall-holder .btn-holder .cta-button").removeClass("disabled-btn"),m(".overlay-container .recall-holder .email-field input").trigger("blur"),m(".overlay-container .recall-holder .email-field input").removeClass("untouch"))):"No sync update"===e.status?(g=!0,p(),(o=document.querySelector(".vinSearch .not-sync-updated"))&&o.classList.add("active")):t||(g=!1,m(".vinSearch .request-fail").length&&(m(".vinSearch .recall-block").css("display","none"),m(".vinSearch .request-fail").addClass("active"),r.attr("class",y),r.addClass("request-fail-active"),m(".request-fail .cta-button").on("click.closeOverlay",function(){h.overlays[0].hideOverlay(),p(),m("#sync-usb-download").length&&k()}))),t&&e.result){if(g=!1,m(".vinSearch .not-requested").length){u=m(".email-field input").val();var l=m(".not-requested p"),s=u||"";if(l.length)for(var c=0;c<l.length;c++){var d=m(l[c]);"[@email]"===d.text()&&d.html('<a href="mailto:'+s+'">'+s+"</a>")}r.attr("class",y),r.addClass("not-requested-active"),m(".vinSearch .recall-block").css("display","none"),m(".vinSearch .not-requested").addClass("active"),m(".not-requested .cta-button").on("click.closeOverlay",function(){h.overlays[0].hideOverlay(),p(),m("#sync-usb-download").length&&k()})}}else t&&!e.result&&(g=!1,m(".vinSearch .invalid-vin").length)&&(u=m(".email-field input").val(),r.attr("class",y),r.addClass("invalid-vin"),m(".vinSearch .recall-block").css("display","none"),m(".vinSearch .invalid-vin").addClass("active"),m(".invalid-vin .cta-button").on("click.closeOverlay",function(){h.overlays[0].hideOverlay(),p(),m("#sync-usb-download").length&&k()}));h.overlays[0].hideInitPreloader(),m(".overlay-container.has-form").removeAttr("style")}function x(e){var t=m(".overlay-container .overlay-content");g=!1,m(".vinSearch ."+e).length&&(m(".vinSearch .recall-block").css("display","none"),m(".vinSearch ."+e).addClass("active"),t.attr("class",y),t.addClass(e+"-active"),m("."+e+" .cta-button").on("click.closeOverlay",function(){h.overlays[0].hideOverlay(),p(),m("#sync-usb-download").length&&k()}))}return{init:function(){m("#sync-usb-download").each(function(e,t){a.bootstrap(t,["syncUsbDownload"])})},initOverlay:function(){var e=m(".recall-block").data("tooltip-html"),t=m(".recall-block").data("title-tooltip"),a=m(".recall-block").data("text-tooltip"),i=m(".recall-block").data("global-check"),n=m(".overlay-container .overlay-content"),o=m(".overlay-container .recall-holder input"),r=m(".overlay-container .recall-holder .vih-field input"),l=m(".overlay-container .recall-holder .email-field input"),s=m(".overlay-container .recall-holder .esn-field input"),c=m(".overlay-container .recall-holder .btn-holder .cta-button"),d=m(".recall-block").data("analytics-variables"),d=(f.fireLoadEvents(d.step1.id,d.step1.label),c.attr("disabled",!0),c.addClass("disabled-btn"),r.addClass("untouch"),null!==typeof s&&null!==document.querySelector("input[name=esn]")&&s.addClass("untouch"),r.on("focus",function(){m(this).removeClass("untouch")}),l.on("focus",function(){m(this).removeClass("untouch")}),null!==typeof s&&null!==document.querySelector("input[name=esn]")&&(s.on("focus",function(){m(this).removeClass("untouch")}),"br"!==w&&"ar"!==w||null===typeof s||null===document.querySelector("input[name=esn]")?m(".recall-block .email-field").removeClass(".hide-email"):m(".recall-block .esn-field").removeClass("hide-esn")),null!=sessionStorage.getItem("selectedVin")&&null!=sessionStorage.getItem("email")&&i&&(r.val(sessionStorage.getItem("selectedVin")),l.val(sessionStorage.getItem("email")),r.trigger("blur"),l.trigger("blur"),c.removeClass("disabled-btn"),c.attr("disabled",!1),r.removeClass("untouch"),l.removeClass("untouch")),r.on("keyup",function(){if(("br"===w||"ar"===w)&&null!==typeof s&&null!==document.querySelector("input[name=esn]")&&9<=this.value.length){var e,t=this.value.charAt(9).toString();for(e in{K:"2019",L:"2020",M:"2021",N:"2022",P:"2023",R:"2024",S:"2025",T:"2026",V:"2027",W:"2028",X:"2029",Y:"2030"}){if(e===t){b=!0;break}b=!1}}var a,i=JSON.parse(r.attr("data-validation"));void 0!==i&&(i=i.rules[1].regexp,a=r.val(),void 0!==i)&&void 0!==a&&(a.match(i)?r.trigger("blur"):(c.attr("disabled",!0),c.addClass("disabled-btn")))}),"br"!==w&&"ar"!==w||null===typeof s||null===document.querySelector("input[name=esn]")||s.on("keyup",function(){var e,t=JSON.parse(s.attr("data-validation"));void 0!==t&&(t=t.rules[1].regexp,e=s.val(),void 0!==t)&&void 0!==e&&(e.match(t)?s.trigger("blur"):(c.attr("disabled",!0),c.addClass("disabled-btn")))}),null===typeof l&&void 0===l||l.on("keyup",function(){var e,t=JSON.parse(l.attr("data-validation"));void 0!==t&&(t=t.rules[1].regexp,e=l.val(),void 0!==t)&&void 0!==e&&e.match(t)&&(c.attr("disabled",!1),c.removeClass("disabled-btn"))}),o.on("blur",function(){c.attr("disabled",!(!m(".overlay-container .recall-holder input.error").length&&!m(".overlay-container .recall-holder input.untouch").length)),m(".overlay-container .recall-holder input.error").length||m(".overlay-container .recall-holder input.untouch").length?c.addClass("disabled-btn"):c.removeClass("disabled-btn")}),e&&(m(".recall-block .vih-field .form-textfield").append(m(e)),t&&m(".recall-block .vih-field .gux-tooltip").attr("data-gux-tooltip-title",t),a)&&m(".recall-block .vih-field .gux-tooltip").attr("data-gux-tooltip-text",a),y="overlay-content",n.attr("class","overlay-content recall-block-active"),v=m(".recall-block .email-field input").attr("data-validation"),m("#sync-usb-download").length&&m(".overlay-container .overlay-close").on("click",function(){k()}),m(".recall-form")),u=m("#serviceLayerUrl").val(),p=m("#countryCodeISO").val();d&&d.off("submit").on("submit",function(e){e.preventDefault(),h.overlays[0].showInitPreloader(),m(".overlay-container.has-form").css("display","none");var t,e=m(this).find(".vih-field input").val(),a=m(this).find(".email-field input").val(),i={},n="",o=!0;return g?(n=u+"/fordowner/vehicle/unauthenticated/sync/requestSyncDownload",i.email=a,t=getEmailKeyUrl(m(".recall-block").attr("data-email-template")),i.emailKey=t,0<!a.length&&(o=!1,m(this).find(".email-field .input-field").addClass("error"),m(this).find(".email-field input").addClass("error"))):n=u+"/fordowner/vehicle/unauthenticated/sync/vinSyncStatus",i.vincode=e,i.countryCodeISO3=p,i.mapcare=document.querySelector("[data-mapcare]")&&document.querySelector("[data-mapcare]").getAttribute("data-mapcare")||!1,(null===document.querySelector("input[name=esn]")?m(".esn-field"):m(".email-field")).remove(),e&&o&&("br"!==w&&"ar"!==w||null===typeof s||null===document.querySelector("input[name=esn]")?(m.ajax({url:n,dataType:"json",data:i,type:"POST"}).done(function(e){S(e,g)}).fail(function(){console.error("Bad answer from SL"),null!=sessionStorage.getItem("selectedVin")&&null!=sessionStorage.getItem("email")&&(sessionStorage.removeItem("selectedVin"),sessionStorage.removeItem("email"))}),m(".esn-field").remove()):(t=u,a=i,b?(e=document.querySelector("input[name=esn]").value,a.esn=e,e=t+"/fordowner/vehicle/unauthenticated/sync/map/validateEligibility",m.ajax({url:e,dataType:"json",data:a,type:"GET"}).done(function(e){var t,a,i,n;200==e.returnCode?(t=window.location.origin+m(".recall-block").attr("data-redirectionpath"),a="",i=window.location.search,(n=C(window.location.search)).vin&&n.esn?(i.replace(n.vin,m(".vih-field input").val()),i.replace(n.esn,m(".esn-field input").val())):i=n.wcmmode?window.location.search+"&vin="+m(".vih-field input").val()+"&esn="+m(".esn-field input").val():"?vin="+m(".vih-field input").val()+"&esn="+m(".esn-field input").val(),a=".html"+i,h.overlays[0].hideOverlay(),window.location.assign(t+a)):10==e.returnCode?(x("request-fail"),console.error(e.message)):x((e=(e=e.message).slice(0,e.indexOf("."))).toLowerCase().trim().split(" ").join("-")),h.overlays[0].hideInitPreloader(),m(".overlay-container.has-form").removeAttr("style")}).fail(function(){console.error("Bad answer from SL")})):(x("vin-not-elegible-for-the-year"),h.overlays[0].hideInitPreloader(),m(".overlay-container.has-form").removeAttr("style")))),!1})}}}),define("sync-usb-download/controllers/syncUsbDownload.controller.Main",["_","angular","jquery","form/component.form.validation","marketConfigGlobal","overlay/component.overlay","isAuthor","sync-usb-download/analytics.syncUsbDownload"],function(e,t,f,a,g,v,y,b){return function(i,e,t){var a,n,o=this,r=y.getAuthorStatus(),l=(o.doneElms=[],o.activeItem=1,o.downloadSuccess=!1,o.filePath="",o.fileInput="",o.fileRead=!1,o.showAll=!1,o.iSOpenOverlay=!0,o.showContent=!1,o.userEmail="test.e-mail@gmail.com",o.hrefTofile="",o.redirectAfterUpload=!0,o.analyticsVars=e.analyticsVariables?JSON.parse(e.analyticsVariables):"",h(o.activeItem),f("html")),s=(o.showOverlay=!1,o.activeOverlayPart="",g.getCurrentMarketCode()),c=f("#serviceLayerUrl").val();function d(e){var e=e.replace(/\?/,"").split("&"),a={};return f.each(e,function(e,t){return t=t.split("="),a[t[0]]=t[1]}),a}function u(e){var t=f("#sync-usb-download").attr("data-redirectionpath"),a="#/overlay"+f("#sync-usb-download").attr("data-vinoverlaypath");d(window.location.search).wcmmode&&(t+="?wcmmode=disabled",a+="?wcmmode=disabled"),e&&(t+=a),t&&window.location.assign(t)}function p(e,t,a){"Request Success"===e?(f.ajax({url:c+"/fordowner/vehicle/unauthenticated/sync/downloadFile",dataType:"json",data:{vincode:t,countryCodeISO3:a},type:"GET"}).done(function(e){o.hrefTofile=e.fileUrl,o.showContent=!0,i.$apply()}).fail(function(){}),f(".overlay-container .overlay-content-inner .cta-button").attr("disable",!0)):"Not Requested"===e?o.openOverlay("notRequestedNotEmail"):"Requested But Processing"===e?o.openOverlay("requestedButProcessing"):"No New Updates"===e?o.openOverlay("noNewUpdates"):(o.openOverlay("requestFail"),i.$apply()),f(document).on("click",".overlay-content-inner .cta-button",function(e){e.preventDefault(),o.redirectAfterUpload&&u()}),f(".overlay-container .overlay-close").off("click keydown").on("click keydown",function(e){e.preventDefault(),o.redirectAfterUpload&&u()}),i.$apply()}function m(t,a){f.ajax({url:c+"/fordowner/vehicle/unauthenticated/sync/vinSyncStatus",dataType:"json",data:{vincode:t,countryCodeISO3:a},type:"GET"}).done(function(e){p(e.status,t,a)}).fail(function(){})}function h(e){switch(e){case 1:b.fireLoadEvents(o.analyticsVars.step1.id,o.analyticsVars.step1.label);break;case 2:b.fireLoadEvents(o.analyticsVars.step2.id,o.analyticsVars.step2.label);break;case 3:b.fireLoadEvents(o.analyticsVars.step3.id,o.analyticsVars.step3.label);break;case 4:b.fireLoadEvents(o.analyticsVars.step4.id,o.analyticsVars.step4.label)}}o.scrollToUp=function(){var e=f("html, body"),t=f(".sync-usb-steps-block").offset().top;e.stop().animate({scrollTop:t},500)},f("#edit-mode").length&&(o.showAll=!0,o.isOpenOverlay=!1),"br"!==s&&"ar"!==s||void 0===d(window.location.search).esn||(e=document.getElementById("syncPath"),a=document.getElementById("licenseSync"),n=document.getElementById("startDownload"),e&&a&&n&&void 0!==d(window.location.search).esn?(e.classList.toggle("hide"),a.classList.toggle("hide"),n.classList.toggle("hide")):e&&a&&(e.classList.toggle("hide"),a.classList.toggle("hide"))),o.sendCallSL=function(){var e=d(window.location.search).vin,t=f("#countryCodeISO").val(),a=d(window.location.search).esn;("br"===s||"ar"===s)&&void 0!==a&&e&&a?o.showContent=!0:e?m(e,t):r||u(!(o.showContent=!1))},o.sendCallSL(),o.checkEmail=function(){for(var e=f(".overlay-content-inner p"),t=0;t<e.length;t++){var a=f(e[t]);"[@email]"===a.text()&&a.html('<a href="mailto:'+o.userEmail+'">'+o.userEmail+"</a>")}},o.checkFileName=function(e){for(var t=f(".step-content p > span"),a=0;a<t.length;a++){var i=f(t[a]);"[@filename]"===i.text()&&i.text(e)}},o.downloadLicense=function(){var e=d(window.location.search).vin,t=f("#countryCodeISO").val(),a=d(window.location.search).esn,t=((param={}).vincode=e,param.esn=a,param.countryCodeISO3=t,c+"/fordowner/vehicle/unauthenticated/sync/map/downloadLicense");e&&a&&(v.overlays[0].showInitPreloader(),f.ajax({url:t,dataType:"json",data:param,type:"GET"}).done(function(e){v.overlays[0].hideInitPreloader(),e.result&&((buttonDownloadLicense=document.createElement("a")).id="DownloadLicense",buttonDownloadLicense.href=e.fileUrl,buttonDownloadLicense.click())}).fail(function(){}))},o.openOverlay=function(e,t){var a,i=o.hrefTofile||t,t=f("#sync-usb-download").attr("data-disclaimer-overlay-disabled");e&&("syncLicense"===e&&b.fireInteractionEvents(o.analyticsVars.ctastart,o.analyticsVars.step1.id,o.analyticsVars.step1.label),"true"==t?(o.showOverlay=!1,i&&(b.fireInteractionEvents(o.analyticsVars.ctaagreement,o.analyticsVars.step1.id,o.analyticsVars.step1.label,o.analyticsVars.ctaagree),window.location.assign(i),clearTimeout(a),a=setTimeout(function(){o.checkFileName(i.split("/").slice(-1).join(""))},300))):(o.showOverlay=!0,l.addClass("is-overlay-open")),o.activeOverlayPart=e,clearTimeout(a),a=setTimeout(function(){o.checkEmail()},300))},o.closeOverlay=function(e){var t,a=o.hrefTofile||e,e=(o.showOverlay=!1,o.showContent=!0,o.activeOverlayPart="",l.removeClass("is-overlay-open"),f(".overlay-content-inner.is-active div.section .sync-license").length);a&&(b.fireInteractionEvents(o.analyticsVars.ctaagreement,o.analyticsVars.step1.id,o.analyticsVars.step1.label,o.analyticsVars.ctaagree),1==e?window.location.assign(a):window.location.assign(" "),clearTimeout(t),t=setTimeout(function(){o.checkFileName(a.split("/").slice(-1).join(""))},300))},o.goToNext=function(){var e=o.activeItem;o.doneElms.push(e),o.activeItem++,o.scrollToUp(),e!==o.activeItem&&h(o.activeItem)},o.selectFile=function(e,t){o.filePath=e,o.fileInput=t},o.uploadFile=function(){var e;f(document).on("click",".overlay-content-inner .cta-button, .overlay-content .overlay-close",function(e){e.preventDefault(),o.closeOverlay(),i.$apply()}),o.fileInput&&((e=new FormData).append("file",o.fileInput),f.ajax({url:c+"/fordowner/vehicle/unauthenticated/sync/uploadReport",dataType:"json",data:e,contentType:!1,processData:!1,type:"POST"}).done(function(e){e.result&&200==e.returnCode?(o.openOverlay("uploadSuccess"),b.fireInteractionEvents(o.analyticsVars.uploadsuccess,o.analyticsVars.step4.id,o.analyticsVars.step4.label)):e.result||500!=e.returnCode||o.openOverlay("uploadFail"),o.redirectAfterUpload=!1,i.$apply()}).fail(function(){}))},o.setCurrentTab=function(e){var t=o.activeItem;o.doneElms=[];for(var a=1;a<+e;a++)o.doneElms.push(a);o.activeItem=e,t!==o.activeItem&&h(o.activeItem)},o.fireSelectFileAnalytics=function(){b.fireInteractionEvents(o.analyticsVars.ctaselectfile,o.analyticsVars.step4.id,o.analyticsVars.step4.label)},t.onload=function(){var e;f(".steps li").length&&(e=f(".steps li").map(function(){return f(this).height()}).get(),e=Math.max.apply(null,e),f(".steps li").height(e))}}}),define("sync-usb-download/directives/syncUsbDownload.directive.fileLoad",[],function(){return function(e,t){return{restrict:"A",require:"ngModel",link:function(a,e){e.bind("change",function(e){var t=e.currentTarget.value,e=e.currentTarget.files[0];e&&(a.mainCtrl.selectFile(t,e),a.$apply())})}}}}),define("feature-slider/component.featureSlider",["jquery","_"],function(r,e){return{init:function(){var e,a=r(".slider-block .slides > li"),t=a.length,i=r("html").hasClass("rtl"),n=r(".feature-slider-nav .btn-open"),o=r(".feature-slider-nav .btn-close");a.length&&(a.eq(0).addClass("active"),e=r("#feature-slider-track").slider({animate:!0,min:0,max:t-1,isRTL:i,step:1,change:function(e,t){a.removeClass("active"),a.eq(t.value).addClass("active")}}),n.on("click",function(){-1<e.slider("value")-e.slider("option","step")&&e.slider("value",e.slider("value")-e.slider("option","step"))}),o.on("click",function(){e.slider("value")+e.slider("option","step")<=e.slider("option","max")&&e.slider("value",e.slider("value")+e.slider("option","step"))}))}}}),define("latest-offers/component.latestOffers.app",["angular"],function(e){return e.module("latestOffers",[])}),define("latest-offers/component.latestOffers.controllers",["latest-offers/component.latestOffers.app","latest-offers/controllers/latestOffers.controller.main"],function(e,t){e.controller("MainCtrl",["$scope","$window","$compile","$timeout","workFlowData",t])}),define("latest-offers/component.latestOffers.directives",["latest-offers/component.latestOffers.app","latest-offers/directives/latestOffers.directive.slider","latest-offers/directives/latestOffers.directive.eventPropogation"],function(e,t,a){e.directive("slider",[t]),e.directive("propogation",["$timeout","$filter",a])}),define("latest-offers/component.latestOffers",["jquery","angular","latest-offers/component.latestOffers.app","latest-offers/component.latestOffers.services","latest-offers/component.latestOffers.controllers","latest-offers/component.latestOffers.directives","analytics/analyticsEventLayer"],function(n,a,e,t,i,o,r){var l={},s=n(".latestOffers"),c=n(document.body);function d(){var e,i;i=".filter-radio-holder",(e=n(e=".radio-filter-section")).length&&n.each(e,function(){var t=0,e=n(this),a=e.find(i);a.length&&(n.each(a,function(){var e=n(this);e.removeAttr("style"),e.outerHeight()>t&&(t=e.outerHeight())}),0<t)&&(a=t,e.find(i).height(a))})}return l.init=function(){var i,t;s.length&&(i=new Date,s.find(".item").each(function(e,t){var t=n(t),a=t.data("model-expiry-date").split("/");new Date(a[1]+"/"+a[0]+"/"+a[2])<i&&t.remove()})),setTimeout(function(){d()},500),t=n(".mobile-filters-popup"),c.on("click",".latestOffers .dropdown-vehicle-sort ul li a",function(e){e.preventDefault()}),c.on("click",".local-offers .local-offers-holder .btn-holder .cancel",function(e){e.preventDefault(),n(".local-offers .local-offers-holder .local-offers-form .input-field").removeClass("error"),n(".local-offers .local-offers-holder .local-offers-form .input-field input").removeClass("error"),n(".local-offers .local-offers-holder .local-offers-form small.error").remove()}),n(".filter-btn.show-mob-only").on("click",function(e){e.preventDefault(),t.show()}),n(".mobile-filters-popup .cancel-btn, .mobile-filters-popup .apply-btn").on("click",function(e){e.preventDefault(),t.hide()}),c.on("keyup",function(e){27===e.keyCode&&(e.preventDefault(),t.hide(),setTimeout(function(){n(".local-offers .local-offers-holder .local-offers-form .input-field").removeClass("error"),n(".local-offers .local-offers-holder .local-offers-form .input-field input").removeClass("error"),n(".local-offers .local-offers-holder .local-offers-form small.error").remove()},500))}),r&&(c.on("click",".offers-filter-section label",function(){r.getLatestOffersEvents().offersClick()}),c.on("click",".bodytypes-filter-section label",function(){r.getLatestOffersEvents().bodyTypesClick()}),c.on("click",".models-filter-section label",function(){r.getLatestOffersEvents().modelClick()})),n(".latestOffers").length&&n(".latestOffers.section").each(function(e,t){a.bootstrap(t,["latestOffers"])})},l}),define("latest-offers/component.latestOffers.services",["latest-offers/component.latestOffers.app","latest-offers/services/latestOffers.services.workflowdata"],function(e,t){e.service("workFlowData",[t])}),define("latest-offers/services/latestOffers.services.workflowdata",["jquery","_","marketConfigGlobal"],function(N,A,I){return function(){var e={},t=N("#json-api"),i=N(".latest-offers-results"),a=t.attr("data-base-url"),o=i.find(".item"),n=i.find(".offers-holder.sorted"),r={},l=JSON.parse(t.attr("data-filters-json"))||"[]",s=JSON.parse(t.attr("data-prices-json"))||"{}",c=(r.currencyFormatPattern=N("#currencyFormatPattern").val(),r.modelFilterData={},r.filterData={},r.itemPrices={},r.itemsData={},r.paramsUrl={},r.validUrl=!1,r.location="",r.flagNotRequiredPostcodes=N(".overlay-container .local-offers-holder").data("postcode-feature-not-required"),{}),d=i.attr("data-national-postcode"),u="",p=JSON.parse(t.attr("data-regions"))||"{}",m=[],h=[],f=[],g=!0,v=!(0<(t=window.location.pathname.slice(1).split("/"))[t.length-1].indexOf(".html"));function y(){var e;function n(e,t){var a=t[0].split("="),i=decodeURIComponent(a[0]),a=decodeURIComponent(a.slice(1).join("="));return void 0===e[i]?e[i]=a:e[i]=[].concat(e[i],a),1==t.length?e:n(e,t.slice(1))}g&&(u=b(S()),r.paramsUrl=0==(e=window.location.search).length?{}:n({},e.substr(1).split("&")),A.each(o,function(e,t){e=N(e);e.attr("data-id",t),r.itemsData[e.attr("id")]={id:e.attr("id"),catId:e.attr("data-category"),offer:e.attr("data-modelOffer"),bodytype:e.attr("data-modelBodyType"),model:e.attr("data-modelNameplate")}}),N.each(l,function(e,i){var t=i;switch(t.listName){case"body_type":r.bodyTypes=t,(m=A.cloneDeep(t)).listItems=A.map(m.listItems,function(e){return{key:t.listName+e.key,value:b(e.value)}});break;case"model":r.models=t,(f=A.cloneDeep(t)).listItems=A.map(f.listItems,function(e){return{key:t.listName+e.key,value:b(e.value)}});break;case"offers":"au"===I.GLOBAL_MARKET_CONF.marketCode.toLowerCase()&&N(".search-filter-holder .offers-filter-section").css("display","none"),r.offers=t,(h=A.cloneDeep(t)).listItems=A.map(h.listItems,function(e){return{key:t.listName+e.key,value:b(e.value)}})}var a=i.listItems;Object.keys(a).length&&N.each(a,function(e,t){var a;t.key=i.listName+t.key,t=t,"model"==(a=i.listName)?r.modelFilterData[t.key]={type:a,selected:!1,text:t.value}:r.filterData[t.key]={type:a,selected:!1,text:t.value}})}),e=(e=>!!(e=A.find(p,{regionTitle:e}))&&(0<=e.regionPostcode.indexOf("-")?e.regionPostcode.split("-")[0]:e.regionPostcode))(u),r.validUrl=(()=>{var e,t,a,i;return!!(r.paramsUrl.model||r.paramsUrl.campaign||r.paramsUrl.category||r.paramsUrl.startingPrice||r.paramsUrl.endingPrice)&&(e=!(r.paramsUrl.model&&r.paramsUrl.campaign||r.paramsUrl.model&&r.paramsUrl.category||r.paramsUrl.model&&r.paramsUrl.startingPrice||r.paramsUrl.model&&r.paramsUrl.endingPrice||"object"==typeof r.paramsUrl.model||"object"==typeof r.paramsUrl.campaign||"object"==typeof r.paramsUrl.category),a=!r.paramsUrl.model||A.some(f.listItems,{value:b(r.paramsUrl.model)}),i=!r.paramsUrl.campaign||A.some(h.listItems,{value:b(r.paramsUrl.campaign)}),t=!r.paramsUrl.category||A.some(m.listItems,{value:b(r.paramsUrl.category)}),a=a&&i&&t,i=!0,(r.paramsUrl.startingPrice||r.paramsUrl.endingPrice)&&(i=+r.paramsUrl.startingPrice>=+s.sliderMinVal&&+r.paramsUrl.endingPrice<=+s.sliderMaxVal&&+r.paramsUrl.startingPrice<+s.sliderMaxVal&&+r.paramsUrl.endingPrice>+s.sliderMinVal||+r.paramsUrl.startingPrice>=+s.sliderMinVal&&+r.paramsUrl.startingPrice<+s.sliderMaxVal&&!+r.paramsUrl.endingPrice||+r.paramsUrl.endingPrice<=+s.sliderMaxVal&&+r.paramsUrl.endingPrice>+s.sliderMinVal&&!+r.paramsUrl.startingPrice),e)&&a&&i})(),r.location=(e=>{var t;if(g)return t=(e=>{for(var t=e+"=",a=document.cookie.split(";"),i=0;i<a.length;i++){for(var n=a[i];" "==n.charAt(0);)n=n.substring(1,n.length);if(0==n.indexOf(t))return n.substring(t.length,n.length)}return null})("common.location.LOC")||"",u&&e?t&&P(t).regionTitle===u?t:(N.cookie("common.location.LOC",e,{path:"/"}),e):c.hasOwnProperty(t)||w(c,t)?(T(t),t):(T(d),"")})(e)),r.shownRegion=r.location||d,A.each(o,function(e,t){var e=N(e),a=C(JSON.parse(e.attr("data-prices-nocurrencies")));e.attr("data-price",a),r.itemPrices[e.attr("id")]=C(JSON.parse(e.attr("data-prices"))),r.itemsData[e.attr("id")].price=+e.attr("data-price")}),r.price=s,r.validUrl?(r.price.selectedRange={min:+r.paramsUrl.startingPrice||+s.sliderMinVal,max:+r.paramsUrl.endingPrice||+s.sliderMaxVal},r.selectedPriceFlag=!0):r.price.selectedRange={min:+s.sliderMinVal,max:+s.sliderMaxVal},r.validUrl&&g&&(r.paramsUrl.model&&(x(f.listItems,b(r.paramsUrl.model),r.modelFilterData),r.selectedModelsFlag=!0,r.selectedPriceFlag=!1),r.paramsUrl.campaign&&(x(h.listItems,b(r.paramsUrl.campaign),r.filterData),r.selectedOffersFlag=!0),r.paramsUrl.category)&&(x(m.listItems,b(r.paramsUrl.category),r.filterData),r.selectedBodytypesFlag=!0)}function b(e){return decodeURIComponent(e).trim().toLowerCase().replace(/\s+/g,"-")}function w(e,a){return A.find(e,function(e,t){if(0<=t.indexOf("-"))return+(t=t.split("-"))[0]<=+a&&+a<=+t[1]})}function C(e){return e.hasOwnProperty(r.shownRegion)?e[r.shownRegion]:w(e,r.shownRegion)||0}function k(){v&&i.find(".item-holder").each(function(){var e=N(this);e.attr("href",window.location.pathname+"?offer="+decodeURIComponent(e.data("model-name")))})}function S(){var e,t;return v?(t=decodeURIComponent(window.location.pathname).slice(1).split("/"),0<=(e=A.findLastIndex(t,function(e){return e==a}))?t[e+1]:""):(t=window.location.href.split("#"))[t.length-1]}function x(e,t,a){e=A.find(e,{value:t});e&&(a[e.key].selected=!0)}function D(a,i){return o.sort(function(e,t){e=+e.getAttribute(i),t=+t.getAttribute(i);if(t<e){if("up"==a)return 1;if("down"==a)return-1}if(e<t){if("up"==a)return-1;if("down"==a)return 1}return 0})}function P(t){return A.find(p,function(e){return+e.regionPostcode==+t||(0<=e.regionPostcode.indexOf("-")?(e=e.regionPostcode.split("-"),+t>=+e[0]&&+t<=e[1]):void 0)})}function T(e){var t,e=P(e);e&&(t=S(),v?(t=t?window.location.origin+window.location.pathname.replace(encodeURIComponent(t),encodeURIComponent(e.regionTitle)):window.location.origin+window.location.pathname+encodeURIComponent(e.regionTitle),"{}"!==JSON.stringify(r.paramsUrl)&&(t=t+"?"+N.param(r.paramsUrl)),history.replaceState(null,null,t),k()):window.location.hash="#"+encodeURIComponent(e.regionTitle))}return r.isLive=v,o.length?c=JSON.parse(o.attr("data-prices")):r.emptyData=!0,A.each(l,function(t){var a=[];A.each(t.listItems,function(e,t){0==o.filter('[data-modeloffer="'+e.value+'"]').length&&0==o.filter('[data-modelbodytype="'+e.value+'"]').length&&0==o.filter('[data-modelnameplate="'+e.value+'"]').length&&a.push(t)}),A.each(a,function(e){t.listItems.splice(e,1)})}),A.map(p,function(e){return{regionPostcode:e.regionPostcode,regionTitle:b(e.regionTitle)}}),k(),y(),e.sortPriceLowToHigh=function(){D("up","data-price").detach().appendTo(n)},e.sortPriceHighToLow=function(){D("down","data-price").detach().appendTo(n)},e.sortPriceDefault=function(){D("up","data-id").each(function(e,t){var t=N(t),a=t.data("category");t.detach().appendTo(i.find(".offers-holder[data-category="+a+"]"))})},e.checkLocation=function(e){return g=!1,!(!c.hasOwnProperty(e)&&!w(c,e)||(T(e),r.location=e,0))},e.setWorkFlowData=function(e,t){r[e]=t,y()},e.getWorkFlowData=function(){return r},e}}),define("latest-offers/controllers/latestOffers.controller.main",["jquery"],function(u){return function(a,e,t,i,n){var o=this,r=(o.serviceData=n.getWorkFlowData(),o.filteredJson=[],_.each(o.serviceData.itemsData,function(e){o.filteredJson.push(e)}),!!u(".author-only-placeholder").length);function l(e){_.each(e,function(e){e.selected=!1})}function s(e,t,a,i){return!i||_.some(e,function(e){return e.selected&&e.type==a&&t==e.text})}function c(){localStorage.setItem("modelFilterData",JSON.stringify(o.modelFilterData)),localStorage.setItem("filterData",JSON.stringify(o.filterData)),localStorage.setItem("selectedPrice",JSON.stringify(o.rangeFilter.selectedRange)),localStorage.setItem("selectedOffersFlag",o.selectedOffersFlag),localStorage.setItem("selectedBodytypesFlag",o.selectedBodytypesFlag),localStorage.setItem("selectedModelsFlag",o.selectedModelsFlag),localStorage.setItem("selectedPriceFlag",o.selectedPriceFlag)}o.currentLocation=o.serviceData.location,o.currentLocationVal=o.serviceData.location,o.openedOverlay=!1,o.alreadyOpened=!1,o.openedDesclaimerOverlay=!1,o.alreadyDesclaimerOpened=!1,o.errorLocation=!1,o.rangeFilter=o.serviceData.price,o.rangeFilter.formattedRange={min:updatePriceFormat(+o.serviceData.price.sliderMinVal,o.serviceData.currencyFormatPattern,!1),max:updatePriceFormat(+o.serviceData.price.sliderMaxVal,o.serviceData.currencyFormatPattern,!1)},o.offers=o.serviceData.offers,o.models=o.serviceData.models,o.bodyTypes=o.serviceData.bodyTypes,o.filtersListItems=o.serviceData.filtersListItems,o.filterData=o.serviceData.filterData,o.modelFilterData=o.serviceData.modelFilterData,o.selectedOffersFlag=o.serviceData.selectedOffersFlag||!1,o.selectedBodytypesFlag=o.serviceData.selectedBodytypesFlag||!1,o.selectedPriceFlag=o.serviceData.selectedPriceFlag||!1,o.selectedModelsFlag=o.serviceData.selectedModelsFlag||!1,o.sortByOpen=!1,o.setSortBy=function(e,t){switch(o.sortBy=t,e){case"default":n.sortPriceDefault(),o.hideHeader=!1;break;case"priceDown":n.sortPriceHighToLow(),o.hideHeader=!0;break;case"priceUp":n.sortPriceLowToHigh(),o.hideHeader=!0}},o.hideEmpty=function(t){return!!o.hideHeader||!_.filter(o.serviceData.itemsData,function(e){return e.catId==t&&!o.hideItem(e.id)}).length},o.resetFilter=function(){(o.selectedOffersFlag||o.selectedBodytypesFlag)&&(l(o.filterData),o.filterByOffersTypes()),o.selectedModelsFlag&&(l(o.modelFilterData),o.filterByModels()),a.$emit("resetLatestOffersPrice")},o.removeFilterItem=function(e){(o.selectedOffersFlag||o.selectedBodytypesFlag)&&(o.filterData[e].selected=!1,o.filterByOffersTypes()),o.selectedModelsFlag&&(o.modelFilterData[e].selected=!1,o.filterByModels())},o.checkIfFilterData=function(e){return _.some(e,function(e){return 1==e.selected})?o.selectedFiltersFlag=!0:o.selectedFiltersFlag=!1},a.$on("changeLatestOffersPrice",function(e,t){o.rangeFilter.selectedRange=t.values,o.rangeFilter.formattedRange.min=updatePriceFormat(+t.values.min,o.serviceData.currencyFormatPattern,!1),o.rangeFilter.formattedRange.max=updatePriceFormat(+t.values.max,o.serviceData.currencyFormatPattern,!1),o.filterByOffersTypes(t.resetFlag),o.selectedPriceFlag=!(Math.round(+t.values.min)==Math.round(o.serviceData.price.sliderMinVal)&&Math.round(+t.values.max)==Math.round(o.serviceData.price.sliderMaxVal)),localStorage.setItem("selectedPriceFlag",o.selectedPriceFlag),t.resetFlag||a.$apply()}),o.filterByOffersTypes=function(e){o.selectedModelsFlag=!1,e||l(o.modelFilterData),_.some(o.filterData,function(e){return o.selectedOffersFlag=e.selected&&"offers"==e.type}),_.some(o.filterData,function(e){return o.selectedBodytypesFlag=e.selected&&"body_type"==e.type}),c();e=_.filter(o.serviceData.itemsData,function(e){return s(o.filterData,e.offer,"offers",o.selectedOffersFlag)}),e=_.filter(e,function(e){return s(o.filterData,e.bodytype,"body_type",o.selectedBodytypesFlag)});o.filteredJson=_.filter(e,function(e){return e.price>=o.rangeFilter.selectedRange.min&&e.price<=o.rangeFilter.selectedRange.max})},o.filterByModels=function(){o.selectedOffersFlag=!1,o.selectedBodytypesFlag=!1,l(o.filterData),a.$emit("resetLatestOffersPrice"),_.some(o.modelFilterData,function(e){return o.selectedModelsFlag=e.selected&&"model"==e.type}),c(),o.filteredJson=_.filter(o.serviceData.itemsData,function(e){return s(o.modelFilterData,e.model,"model",o.selectedModelsFlag)})},o.serviceData.validUrl?((o.selectedOffersFlag||o.selectedBodytypesFlag||o.selectedPriceFlag)&&o.filterByOffersTypes(),o.selectedModelsFlag&&o.filterByModels()):(o.selectedOffersFlag=JSON.parse(localStorage.getItem("selectedOffersFlag")),o.selectedBodytypesFlag=JSON.parse(localStorage.getItem("selectedBodytypesFlag")),o.selectedModelsFlag=JSON.parse(localStorage.getItem("selectedModelsFlag")),o.selectedPriceFlag=JSON.parse(localStorage.getItem("selectedPriceFlag")),(o.selectedOffersFlag||o.selectedBodytypesFlag||o.selectedModelsFlag||o.selectedPriceFlag)&&(o.filterData=JSON.parse(localStorage.getItem("filterData")),o.modelFilterData=JSON.parse(localStorage.getItem("modelFilterData")),o.rangeFilter.selectedRange=JSON.parse(localStorage.getItem("selectedPrice")),(o.selectedOffersFlag||o.selectedBodytypesFlag)&&o.filterByOffersTypes(),o.selectedModelsFlag)&&o.filterByModels()),a.$on("priceSliderIsInited",function(){o.selectedPriceFlag&&a.$emit("setNewLatestOffersPrice",{values:[o.rangeFilter.selectedRange.min,o.rangeFilter.selectedRange.max]})}),o.storeMobFilters=function(){localStorage.setItem("MobmodelFilterData",JSON.stringify(o.modelFilterData)),localStorage.setItem("MobfilterData",JSON.stringify(o.filterData)),localStorage.setItem("MobselectedPrice",JSON.stringify(o.rangeFilter.selectedRange)),localStorage.setItem("MobselectedOffersFlag",o.selectedOffersFlag),localStorage.setItem("MobselectedBodytypesFlag",o.selectedBodytypesFlag),localStorage.setItem("MobselectedModelsFlag",o.selectedModelsFlag),localStorage.setItem("MobselectedPriceFlag",o.selectedPriceFlag)},o.restoreMobFilters=function(){o.filterData=JSON.parse(localStorage.getItem("MobfilterData")),o.modelFilterData=JSON.parse(localStorage.getItem("MobmodelFilterData")),o.selectedOffersFlag=JSON.parse(localStorage.getItem("MobselectedOffersFlag")),o.selectedBodytypesFlag=JSON.parse(localStorage.getItem("MobselectedBodytypesFlag")),o.selectedModelsFlag=JSON.parse(localStorage.getItem("MobselectedModelsFlag")),o.selectedPriceFlag=JSON.parse(localStorage.getItem("MobselectedPriceFlag")),o.rangeFilter.selectedRange=JSON.parse(localStorage.getItem("MobselectedPrice")),a.$emit("setNewLatestOffersPrice",{values:[o.rangeFilter.selectedRange.min,o.rangeFilter.selectedRange.max]}),(o.selectedOffersFlag||o.selectedBodytypesFlag||o.selectedPriceFlag)&&o.filterByOffersTypes(),o.selectedModelsFlag&&o.filterByModels()},o.hideItem=function(t){return!_.some(o.filteredJson,function(e){return e.id==t})},u(document).on("keyup",function(e){27!=e.keyCode&&27!=e.which||(e.preventDefault(),o.closeLocationOverlay(),a.$apply())});var d=u("html");o.openLocationOverlay=function(){o.openedOverlay=!0,d.addClass("is-overlay-open"),o.alreadyOpened=!0},o.currentLocation.length||r||o.serviceData.flagNotRequiredPostcodes||o.openLocationOverlay(),o.closeLocationOverlay=function(){o.openedOverlay=!1,d.removeClass("is-overlay-open")},o.checkCurrentLocation=function(){return new RegExp(/^[0-9]{4}$/g).test(o.currentLocationVal)&&n.checkLocation(o.currentLocationVal)?!(o.errorLocation=!1):!(o.errorLocation=!0)},o.setCurrentLocation=function(e){o.checkCurrentLocation()&&(u.cookie("common.location.LOC",o.currentLocationVal,{path:"/"}),o.currentLocation=o.currentLocationVal,o.closeLocationOverlay(),n.setWorkFlowData("location",o.currentLocation))},o.openDisclaimerOverlay=function(){o.openedDisclaimerOverlay=!0,d.addClass("is-overlay-open"),o.alreadyDesclaimerOpened=!0},o.closeDisclaimerOverlay=function(){o.openedDisclaimerOverlay=!1,d.removeClass("is-overlay-open")}}}),define("latest-offers/directives/latestOffers.directive.eventPropogation",[],function(){return function(){return{link:function(e,t,a,i){t.on("focus blur keyup change input click",function(e){e.preventDefault()})}}}}),define("latest-offers/directives/latestOffers.directive.slider",["analytics/analyticsEventLayer"],function(r){return function(){return{link:function(a,i,t){a.$parent.$on("resetLatestOffersPrice",function(){i.slider("values",[o.min,o.max])}),a.$parent.$on("setNewLatestOffersPrice",function(e,t){i.slider("values",[t.values[0],t.values[1]])});var n=function(e,t){a.$parent.$broadcast("changeLatestOffersPrice",{values:{min:e.values[0],max:e.values[1]},resetFlag:t})},e=["min","max","step"],o={};angular.forEach(e,function(e){angular.isDefined(t[e])&&(o[e]=parseInt(t[e],10))}),o.range=!0,o.values=[o.min,o.max],o.slide=function(e,t){n(t,!1)},o.change=function(e,t){n(t,!0)},o.stop=function(e,t){r&&r.getLatestOffersEvents().changePrice()},o.create=function(e){a.$parent.$broadcast("priceSliderIsInited")},i.slider(o)}}}}),define("latest-offers-detail/component.latestOffersDetail.app",["angular"],function(e){return e.module("latestOffersDetail",[])}),define("latest-offers-detail/component.latestOffersDetail.controllers",["latest-offers-detail/component.latestOffersDetail.app","latest-offers-detail/controllers/latestOffersDetail.controller.detail"],function(e,t){e.controller("DetailCtrl",["$scope","$window","$compile","workFlowData",t])}),define("latest-offers-detail/component.latestOffersDetail",["jquery","angular","latest-offers-detail/component.latestOffersDetail.app","latest-offers-detail/component.latestOffersDetail.services","latest-offers-detail/component.latestOffersDetail.controllers","analytics/analyticsEventLayer"],function(n,o,e,t,a,r){var i={};return i.init=function(){n(".latestOffersModelDetails").length&&n(".latestOffersModelDetails.section").each(function(e,t){var a,i;a=n(document.body),i=a.find(".latestOffersModelDetails .configuration-block .item-name .name").text().toLowerCase(),r&&(a.on("click",".latestOffersModelDetails .latest-offers-details-wrap .btn-holder .cta-button",function(e){r.getLatestOffersEvents().clickAllOffers(i)}),n(".last-offers-holder .accordion").find(".accordion-item").click(function(){r.getLatestOffersEvents().clickAccordion(i)})),o.bootstrap(t,["latestOffersDetail"])})},i}),define("latest-offers-detail/component.latestOffersDetail.services",["latest-offers-detail/component.latestOffersDetail.app","latest-offers-detail/services/latestOffersDetail.services.sort"],function(e,t){e.service("workFlowData",[t])}),define("latest-offers-detail/services/latestOffersDetail.services.sort",["jquery","_"],function(k,S){return function(){var e={},i={},t=k("#data-prices"),a=k("#feature-specification-drive-price"),n=k(".latest-offers-details-wrap"),o=n.attr("data-base-url"),r=n.attr("data-national-postcode"),l=n.attr("data-regions")?JSON.parse(n.attr("data-regions")):"{}",s={},c={},d=n.find(".offers-holder"),u=d.find(".item"),p=!0,m=k("#currencyFormatPattern").val();function h(e,t){e=e.hasOwnProperty(t)||f(e,t)?t:r;return e}function f(e,a){return S.find(e,function(e,t){if(0<=t.indexOf("-"))return+(t=t.split("-"))[0]<=+a&&+a<=+t[1]})}function g(e){return e.hasOwnProperty(i.shownRegion)?e[i.shownRegion]:f(e,i.shownRegion)||0}function v(){i.location=(()=>{var e=(e=>{for(var t=e+"=",a=document.cookie.split(";"),i=0;i<a.length;i++){for(var n=a[i];" "==n.charAt(0);)n=n.substring(1,n.length);if(0==n.indexOf(t))return n.substring(t.length,n.length)}return null})("common.location.LOC")||"";if(i.isLive&&p){var t=b(),a=(e=>!!(e=S.find(l,{regionTitle:e}))&&(0<=e.regionPostcode.indexOf("-")?e.regionPostcode.split("-")[0]:e.regionPostcode))(t);if(t&&a)return e&&w(e).regionTitle===t?e:(k.cookie("common.location.LOC",a,{path:"/"}),a)}return t=e})(),i.shownRegion=h(s,i.location),i.shownSpecificationRegion=h(c,i.location),i.price=g(s),i.specificationPrice=g(c),S.each(u,function(e,t){var e=k(e),a=g(JSON.parse(e.attr("data-prices-nocurrencies")));e.attr("data-id",t),e.attr("data-price",a),e.find(".more-offers-price").html(updatePriceFormat(a,m,!0)),i.itemPrices[e.attr("id")]=g(JSON.parse(e.attr("data-prices")))}),p=!1}function y(){i.isLive&&d.find(".item-holder").each(function(){var e=k(this);e.attr("href",window.location.pathname+"?offer="+decodeURIComponent(e.data("model-name")))})}function b(){var e=decodeURIComponent(window.location.pathname).slice(1).split("/"),t=S.findLastIndex(e,function(e){return e==o});return 0<=t?e[t+1]:""}function w(t){return S.find(l,function(e){return+e.regionPostcode==+t||(0<=e.regionPostcode.indexOf("-")?(e=e.regionPostcode.split("-"),+t>=+e[0]&&+t<=e[1]):void 0)})}function C(e){if(i.isLive){e=w(e);if(e){var t=window.location.search,a=b();if(a==e.regionTitle)return;a=a?window.location.origin+window.location.pathname.replace(encodeURIComponent(a),encodeURIComponent(e.regionTitle)):window.location.origin+window.location.pathname+encodeURIComponent(e.regionTitle),a+=t,history.replaceState(null,null,a)}y()}}return t.attr("data-prices")&&(s=JSON.parse(t.attr("data-prices"))),a.attr("data-prices")&&(c=JSON.parse(a.attr("data-prices"))),i.itemPrices={},i.flagNotRequiredPostcodes=n.find(".last-offers-holder .item-name").data("postcode-feature-not-required"),i.isLive=!(0<(t=window.location.pathname.slice(1).split("/"))[t.length-1].indexOf(".html")),a=new Date,t=n.data("model-expiry-date").split("/"),t=new Date(t[1]+"/"+t[0]+"/"+t[2]),i.emptyData=t<a,v(),C(i.location),y(),e.checkLocation=function(e){return s.hasOwnProperty(e)||f(s,e)},e.checkSpecificationLocation=function(e){return c.hasOwnProperty(e)||f(c,e)},e.setWorkFlowData=function(e,t){i[e]=t,C(t),v()},e.getWorkFlowData=function(){return i},e}}),define("latest-offers-detail/controllers/latestOffersDetail.controller.detail",["jquery","analytics/analyticsEventLayer"],function(s,c){return function(t,e,a,i){var n=this,o=(n.serviceData=i.getWorkFlowData(),n.currentLocation=i.checkLocation(n.serviceData.location)?n.serviceData.location:"",n.currentLocationVal=i.checkLocation(n.serviceData.location)?n.serviceData.location:"",!!s(".author-only-placeholder").length),r=angular.element(".configuration-block .item-name .name").text().toLowerCase(),l=(n.openedOverlay=!1,n.alreadyOpened=!1,n.openedDesclaimerOverlay=!1,n.alreadyDesclaimerOpened=!1,n.errorLocation=!1,s(document).on("keyup",function(e){27!=e.keyCode&&27!=e.which||(e.preventDefault(),n.closeLocationOverlay(),n.closeDisclaimerOverlay(),t.$apply())}),s("html"));n.openLocationOverlay=function(){n.openedOverlay=!0,l.addClass("is-overlay-open"),n.alreadyOpened=!0,c&&c.getLatestOffersEvents().changeDetailPostalCode(r)},n.closeLocationOverlay=function(){n.openedOverlay=!1,l.removeClass("is-overlay-open"),i.setWorkFlowData("location",n.currentLocation)},n.currentLocation.length||o||n.serviceData.flagNotRequiredPostcodes||n.openLocationOverlay(),n.checkCurrentLocation=function(){if(new RegExp(/^[0-9]{4}$/g).test(n.currentLocationVal))return i.checkLocation(n.currentLocationVal)?!(n.errorLocation=!1):!(n.errorLocation=!0)},n.setCurrentLocation=function(e){n.checkCurrentLocation()&&(s.cookie("common.location.LOC",n.currentLocationVal,{path:"/"}),n.currentLocation=n.currentLocationVal,n.closeLocationOverlay(),i.setWorkFlowData("location",n.currentLocation))},n.openDisclaimerOverlay=function(){n.openedDisclaimerOverlay=!0,l.addClass("is-overlay-open"),n.alreadyDesclaimerOpened=!0,c&&c.getLatestOffersEvents().clickDetailDisclaimer(r)},n.closeDisclaimerOverlay=function(){n.openedDisclaimerOverlay=!1,l.removeClass("is-overlay-open")},s(document).ready(function(){var e=s(".item-name").data("nameplate"),t=s(".item-name").data("modelseries");s(".cta-button.cta-button-primary.link-overlay.base-url.popup-link-initialized").attr("data-autopopulate","true"),s(".cta-button.cta-button-primary.link-overlay.base-url.popup-link-initialized").attr("data-nameplate",e),s(".cta-button.cta-button-primary.link-overlay.base-url.popup-link-initialized").attr("data-modelname",t)})}}),define("latest-offers-build-price-carousel/component.latestOffersBuildPriceCarousel.app",["angular"],function(e){return e.module("latestOffersBuildPriceCarousel",[])}),define("latest-offers-build-price-carousel/component.latestOffersBuildPriceCarousel.controllers",["latest-offers-build-price-carousel/component.latestOffersBuildPriceCarousel.app","latest-offers-build-price-carousel/controllers/latestOffersBuildPriceCarousel.controller.main"],function(e,t){e.controller("MainCtrl",["$scope","$window","$compile","$timeout","workFlowData",t])}),define("latest-offers-build-price-carousel/component.latestOffersBuildPriceCarousel",["jquery","angular","latest-offers-build-price-carousel/component.latestOffersBuildPriceCarousel.app","latest-offers-build-price-carousel/component.latestOffersBuildPriceCarousel.services","latest-offers-build-price-carousel/component.latestOffersBuildPriceCarousel.controllers"],function(e,a,t,i,n){var o={init:function(){e(".latestOffersBuildPriceCarousel").length&&e(".latestOffersBuildPriceCarousel.section").each(function(e,t){a.bootstrap(t,["latestOffersBuildPriceCarousel"])})}};return o}),define("latest-offers-build-price-carousel/component.latestOffersBuildPriceCarousel.services",["latest-offers-build-price-carousel/component.latestOffersBuildPriceCarousel.app","latest-offers-build-price-carousel/services/latestOffersBuildPriceCarousel.services.workflowdata"],function(e,t){e.service("workFlowData",[t])}),define("latest-offers-build-price-carousel/services/latestOffersBuildPriceCarousel.services.workflowdata",["jquery","_"],function(s,t){function c(e,a){return e.hasOwnProperty(a)?e[a]:t.find(e,function(e,t){if(0<=t.indexOf("-"))return+(t=t.split("-"))[0]<=+a&&+a<=+t[1]})}function d(e){return new Date<=new Date((e=>(e=e.split("/"),new Date(e[2],e[1]-1,e[0])))(e))}return function(){var e={},t=function(){var t,e=s(".wrapper").attr("data-offers-carousel-data-url");return s.ajax({type:"GET",url:e,dataType:"json",async:!1,success:function(e){t=e}.bind(this),error:function(e){}.bind(this)}),t}();function n(e,t){var a=t[0].split("="),i=decodeURIComponent(a[0]),a=decodeURIComponent(a.slice(1).join("="));return void 0===e[i]?e[i]=a:e[i]=[].concat(e[i],a),1==t.length?e:n(e,t.slice(1))}var a=(i=0==(i=window.location.search).length?{}:n({},i.substr(1).split("&"))).n,i=(i=i.l)||s.cookie("common.location.LOC");return e.carouselDataList=((e,t,a)=>{for(var i,n=[],o=s(".wrapper").attr("data-offers-count-in-carousel"),r=0;r<e.length;r++)if(e[r].nameplateCode==t){i=e[r].category;var l=e[r].modelDetails;for(j=0;j<l.length;j++){if(!(n.length<o))return n;d(l[j].offerExpiry)&&(a=a||l[j].defaultLocation,l[j].price=c(JSON.parse(l[j].pricesWithCurrency),a),n.push(l[j]))}}if(i&&n.length<o)for(r=0;r<e.length;r++)if(e[r].category==i&&e[r].nameplateCode!=t){l=e[r].modelDetails;for(j=0;j<l.length;j++){if(!(n.length<o))return n;d(l[j].offerExpiry)&&(a=a||l[j].defaultLocation,l[j].price=c(JSON.parse(l[j].pricesWithCurrency),a),n.push(l[j]))}}if(n.length<o)for(r=0;r<e.length;r++)if(e[r].category!=i&&e[r].nameplateCode!=t){l=e[r].modelDetails;for(j=0;j<l.length;j++){if(!(n.length<o))return n;d(l[j].offerExpiry)&&(a=a||l[j].defaultLocation,l[j].price=c(JSON.parse(l[j].pricesWithCurrency),a),n.push(l[j]))}}return n})(t,a,i),e.isNotLive=0<(t=window.location.pathname.slice(1).split("/"))[t.length-1].indexOf(".html"),e}}),define("latest-offers-build-price-carousel/controllers/latestOffersBuildPriceCarousel.controller.main",["jquery"],function(e){return function(e,t,a,i,n){e.carouselDataList=n.carouselDataList,e.isNotLive=n.isNotLive}}),define("pre-delivery-manual-form/component.preDeliveryManualForm.app",["angular"],function(e){return e.module("preDeliveryManualForm",["ngSanitize"])}),define("pre-delivery-manual-form/component.preDeliveryManualForm.controllers",["pre-delivery-manual-form/component.preDeliveryManualForm.app","pre-delivery-manual-form/controllers/preDeliveryManualForm.controller.main"],function(e,t){e.controller("MainCtrl",["$rootScope","$scope","$sce","$http","preDeliveryData",t])}),define("pre-delivery-manual-form/component.preDeliveryManualForm.directives",["pre-delivery-manual-form/component.preDeliveryManualForm.app","pre-delivery-manual-form/directives/preDeliveryManualForm.directive.compile"],function(e,t){e.directive("compile",["$compile",t]),e.directive("ngGuxGoogleMap",["preDeliveryData",function(i){return{restrict:"A",link:function(e,t,a){i.initMap(t.get(0))}}}])}),define("pre-delivery-manual-form/component.preDeliveryManualForm",["jquery","angular","analytics/analyticsEventLayer","pre-delivery-manual-form/component.preDeliveryManualForm.app","pre-delivery-manual-form/component.preDeliveryManualForm.controllers","pre-delivery-manual-form/component.preDeliveryManualForm.directives","pre-delivery-manual-form/component.preDeliveryManualForm.services"],function(a,t,e){var i={};return i.init=function(e){var t=document.createElement("script");t.setAttribute("type","text/javascript"),t.setAttribute("src","https://maps.googleapis.com/maps/api/js?client=gme-fordmotorcompany2&language=en-AU&region=AU&libraries=places&channel=AU&callback=preDeliveryInit"),document.body.appendChild(t)},window.preDeliveryInit=function(){var e;a(".preDeliveryManualForm").length&&((e=a(".footer")).find(".search.footer-search").remove(),e.find(".footer-links").remove(),e.find(".footer-middle").remove(),e.find(".footer-bottom .footer-bottom-assistance").remove()),a(".preDeliveryManualForm .homeBillboard").each(function(e,t){!(t=a(t)).find(".billboard-paragraph").text().trim()&&window.innerWidth<768&&a(t).hide()}),t.bootstrap(document,["preDeliveryManualForm"])},i}),define("pre-delivery-manual-form/component.preDeliveryManualForm.services",["pre-delivery-manual-form/component.preDeliveryManualForm.app","pre-delivery-manual-form/services/preDeliveryManualForm.service.predeliverydata"],function(e,t){e.service("preDeliveryData",["$rootScope","$q","$timeout",t])}),define("pre-delivery-manual-form/controllers/preDeliveryManualForm.controller.main",["tooltip-gux/global.ux.tooltip","form/component.form.validation","overlay/component.overlay","analytics/analyticsEventLayer","form/component.form.recaptcha","getImgSlToken"],function(n,o,l,r,e,t,a,i){function s(e,t,a,i,r){this._guxTooltip=n,this._formValidation=o,this._overlay=l,this._$scope=t,this._sce=a,this._$http=i,this._preDeliveryData=r,this.isLive=!(0<(t=window.location.pathname.slice(1).split("/"))[t.length-1].indexOf(".html")),this.justLoaded=!0,this.predeliveryPath="predelivery",this.urlsPath={common:"predelivery",welcome:"welcome",steps:"steps",summary:"summary",confirmation:"confirmation"},this.paramsUrl=window.location.search,this.equalityModelToLocalStorage=!0,this.restoredFromGUID=!1,this.restoringDataInProgress=!1,this.models=r.getModelsData(),this.expiredTime=r.getSessionExpiryTime(),this._API=r.getAPIURL(),this._emailTemplateId=r.getEmailTemplateId(),this._dealerMailTemplate=this._preDeliveryData.getDealerMailTemplate(),this._fordMailTemplate=this._preDeliveryData.getFordMailTemplate(),this._userStoredData={},this.userData={title:"",firstName:"",lastName:"",email:"",contactNumber:"",addr1:"",addr2:"",suburb:"",postCode:"",state:"",phone:"",climateControl:""},this.carModel="",this._oldModel="",this.selectedCarSeries="",this._oldSeries="",this.carSeriesList={},this.isSeriesDropdownDisabled=!0,this.isOptionsReady=!1,this.selectedColor="",this.carColorsList={},this.isColorDropdownDisabled=!0,this.isPreviewReady=!1,this._isModelChanged=!1,this._isSeriesChanged=!1,this.dealerState="",this.dealersList=[],this.selectedCar={},this.vinCode="",this.dealerShip="",this.optionsList=[],this.selectedOptionsList=[],this.isDealerShipDropdownDisabled=!0,this.radioSections=[],this._$body=$("body"),this._$model=$("#select-model"),this._$series=$("#select-series"),this._$color=$("#select-color"),this._$userTitle=$(".user-title select"),this._$firstName=$(".user-first-name input"),this._$lastName=$(".user-last-name input"),this._$email=$(".user-email input"),this._$contactNumber=$(".user-contact-number input"),this._$addr1=$(".user-addr1 input"),this._$addr2=$(".user-addr2 input"),this._$suburb=$(".user-suburb input"),this._$postCode=$(".user-postcode input"),this._$state=$(".user-state select"),this._$VINCode=$(".vinData input"),this._$dealerState=$("#select-dealership"),this._$dealer=$("#select-dealer"),this._$content=$(".content"),this.isImgSLEnabled="true"==$("#isImgSLEnabled").val(),this.imgSlEndpoint=$("#apigeeDomain").val(),this.saveJourneyData=this.isImgSLEnabled?$("#saveJourneyData").val():"/fordleads/leads/PreDelivery/saveDataToRetrieve",this.sendEmailPdfAU=this.isImgSLEnabled?$("#sendEmailPdfAU").val():"/fordleads/leads/PreDelivery/submitToDealer",this.verifyCaptcha=this.isImgSLEnabled?$("#verifyCaptcha").val():"/fordleads/leads/PreDelivery/verifyCaptcha",this.getTokenAtFirst=!0,this.requestHeaders={},this.tokenCreationTime="",this.isTokenExpired=!1,this.sections={welcome:{active:!this._userStep},steps:{active:!!this._userStep},summary:{active:!1},todo:{active:!1},message:{active:!1}},this.stations={fm:[],am:[]},this.userAddresses={addr1:"",addr2:""},this.lighting="",this.userNotes="",this.isSummaryInnerReady=!1,this.step1HTML="",this.step2HTML="",this.step3HTML="",this.step4part1="",this.step4part2="",this.formSubmitData=null,this.optionPack=[],this.isSaveSuccessfull=!1,this.isSaveFailed=!1,this.PDF="",this.isSubmitSuccessfull=!1,this.isSubmitFailed=!1,this.isStepsSectionReady=!1,this._href=window.location.href,this._oldCar="",this.isAuthorMode=Boolean(this._$body.find(".author-only-placeholder").length),this._countryCode={name:"countryCodeISO3",value:$("#countryCodeISO").val()},this.messages={submittedGUID:!1,wrongGUID:!1},this._states=this._preDeliveryData.getStates(),this._userStep=parseInt(this._getParameterByName("step")),this._userGUID=String(this._getParameterByName("id")),this.steps={count:document.querySelectorAll(".predelivery-step").length,activeStep:this._userStep||1},this.captchaStatus={isSuccess:!1,isFailed:!1,isInvalid:!1,isTimeot:!1},this._dealersEmails=[],this._init(),e.$on("predeliveryMapApiLoaded",function(){var t=this,i=(this._showPreloader(),[]),n=[],e=$("#map-container").data("dealerslist-to-delete"),o=[];e&&(e=e.endsWith(",")?e.slice(0,-1):e,o=e.replace(/\s/g,"").split(",")),r.getAllDealrsList().then(function(e){t.allDealersList=e.dealers,_.each(t.allDealersList,function(t){var a;-1==_.indexOf(o,t.DealerID)&&(n.push({dealershipKey:t.DealerID,dealershipEmail:t.PrimaryEmail}),0!==i.length&&(a=!1,_.each(i,function(e){e.dealerShipStateKey===t.AdministrativeArea&&(e.dealershipList.push({dealershipKey:t.DealerID,dealershipValue:t.DealerName+" ("+t.Locality+")"}),a=!0)}),a)||i.push({dealerShipStateKey:t.AdministrativeArea,dealerShipStateValue:t.AdministrativeArea,dealershipList:[{dealershipKey:t.DealerID,dealershipValue:t.DealerName+" ("+t.Locality+")"}]}))}),t.dealers=i,t._dealersEmails=n,setTimeout(function(){t._userGUID&&"null"!=t._userGUID?t._getDataByGUID():(t._changeURL(),t.restoreStepsFromUrl())},0)})}.bind(this))}s.prototype.prepareLinks=async function(e){return this.isImgSLEnabled&&await this.getToken(),{apiLink:this.isImgSLEnabled?this.imgSlEndpoint+e:this._API+e,header:this.isImgSLEnabled?this.requestHeaders:{}}},s.prototype.getToken=async function(){if(""!=this.tokenCreationTime&&(this.isTokenExpired=t.checkTokenIsExpired(this.tokenCreationTime)),this.getTokenAtFirst||this.isTokenExpired)try{await t.getShopToken().then(function(e){e?.token&&(this.requestHeaders.Authorization="Bearer "+e?.token),this.tokenCreationTime=e?.createdOn,this.getTokenAtFirst=!1}.bind(this)).catch(function(e){this._errordata(e?.message)}.bind(this))}catch(e){console.error(e)}};var c=$(".pre-loader");function d(e,t){var a,i="";return i=window.location.origin||window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:""),(i=(i+=window.location.pathname).endsWith(".html")?i.substring(0,i.lastIndexOf(".")):0<(a=i.indexOf(t))?i.substring(0,a)+t+"/":i)+".edm."+e+".data"}function u(){$(".homeBillboard").length&&$(".homeBillboard").css("display","none")}return s.prototype._hidePageOnExpiredTime=function(e){if(!e.expiredTime)return!1;var t=e.expiredTime,a=0,i=setInterval(function(){a+=10},1e4),n=setInterval(function(){if("{}"==JSON.stringify(e.getDataFromLocalStorage()))return!1;t<=a&&(e._showMessageSection("submittedGUID"),e._$scope.$apply(),e.clearLocalStorage("all"),clearInterval(i),clearInterval(n))},1e4);document.onmousemove=function(){a=0}},s.prototype._init=function(){this._formValidation.init($(".pdm-form")),setTimeout(function(){$('.privacyPolicy input[type="checkbox"]').removeAttr("disabled"),$('.preview-options input[type="checkbox"]').prop("checked",!1)},0),this._hidePageOnExpiredTime(this),this._listen(),setTimeout(function(){$(".select2-focusser, .select2-input").length&&$(".select2-focusser, .select2-input").remove()},0)},s.prototype.setDataToLocalStorage=function(e,t){if(this.restoreLocalStorageFlag)return!1;switch(t){case"all":this.getAllFieldValues();var a,i=JSON.parse(this.formSubmitData.formData),n={welcomeData:{},stepsData:{}};for(a in i)"step2"!=a&&"step3"!=a&&"step4"!=a&&i.hasOwnProperty(a)&&(n.welcomeData[a]=i[a]);n.stepsData.step2=i.step2,n.stepsData.step3=i.step3,n.stepsData.step4=i.step4,sessionStorage.setItem("predeliveryFieldsData",JSON.stringify(n));break;case"welcome":var o=this.getDataFromLocalStorage();o.welcomeData=this.getWelcomeData(),sessionStorage.setItem("predeliveryFieldsData",JSON.stringify(o))}},s.prototype.getDataFromLocalStorage=function(){return sessionStorage.getItem("predeliveryFieldsData")?JSON.parse(sessionStorage.getItem("predeliveryFieldsData")):{}},s.prototype.getModelFromLocalStorage=function(){var e=this.getDataFromLocalStorage();return"{}"!=JSON.stringify(e)?{model:(e=e.welcomeData).VCL_PRODUCT,series:e.VCL_MODEL}:""},s.prototype.clearLocalStorage=function(e){switch(e){case"all":sessionStorage.removeItem("predeliveryFieldsData");break;case"steps":var t=this.getDataFromLocalStorage();t.stepsData={},sessionStorage.setItem("predeliveryFieldsData",JSON.stringify(t))}},s.prototype.getStepsFromUrl=function(){var e,t,a=this.predeliveryPath;return this.isLive?(t=decodeURIComponent(window.location.pathname).slice(1).split("/"),0<=(e=_.findLastIndex(t,function(e){return e==a}))?t[e+1]:""):(t=window.location.href.split("#"),0<window.location.href.indexOf("#")?t[t.length-1]:"")},s.prototype.restoreStepsFromUrl=function(){var e=this.getStepsFromUrl(),t=this.getDataFromLocalStorage();if(JSON.stringify(t).length<=2)return e!=this.urlsPath.steps&&e!=this.urlsPath.summary||(this.sections.welcome.active=!1,this.sections.steps.active=!1,this.sections.message.active=!1,this.sections.todo.active=!1,this.sections.message.active=!0,this.messages.submittedGUID=!0,u()),this._hidePreloader(),!1;var a=_.merge(t.welcomeData,t.stepsData.step4);switch(delete t.stepsData.step4,this._userStoredData=_.merge(a,t.stepsData),this.restoreLocalStorageFlag=!0,this.restoringDataInProgress=!0,e){case this.urlsPath.welcome:this._fillInWelcomeSection(this.restoreLocalStorageFlag);break;case this.urlsPath.steps:this._fillInWelcomeSection();var i=this._$scope.$on("pageStepsRender",function(){this.restoreLocalStorageFlag=!1,i()}.bind(this));break;case this.urlsPath.summary:this._fillInWelcomeSection();var n=this._$scope.$on("pageStepsRender",function(){this.showSummarySection(),this.restoreLocalStorageFlag=!1,this._$scope.$apply(),n()}.bind(this));break;case this.urlsPath.confirmation:this._showToDoSection()}},s.prototype._changeURL=function(e,t){if(this._preDeliveryData.isGUIDReceivedUnsuccessfully||this.restoreLocalStorageFlag)return!1;e=(e=(t=t||this.getStepsFromUrl())?e:this.urlsPath.welcome)||t,this.justLoaded&&this._preDeliveryData.isGUIDReceivedSuccessfully&&(e=this._userStep?this.urlsPath.steps:this.urlsPath.welcome,this.justLoaded=!1),this.isLive?(t=t?window.location.origin+window.location.pathname.replace(encodeURIComponent(t),encodeURIComponent(e)):window.location.origin+window.location.pathname+encodeURIComponent(e),this.paramsUrl&&(t+=this.paramsUrl),history.replaceState(null,null,t)):window.location.hash="#"+encodeURIComponent(e)},s.prototype._listen=function(){var t={};this._$body.on("change",'.zebraChartTile-table tbody input[type="checkbox"]',function(){var t,a,e=$(this),i=e.parents("td"),n=i.index(),o=e.parents(".zebraChartTile-table").find("th.checkbox-column"),r=e.parents(".zebraChartTile-table").find("td.checkbox-column");$tbody=e.parents(".zebraChartTile-table").find("tbody"),o.each(function(){$(this).find('input[type="checkbox"]').prop("checked",!1)}),e.is(":checked")?(i.siblings().find('input[type="checkbox"]').prop("checked",!1),a=t=0,r.each(function(e){$(this).index()==n&&(t+=1,$(this).find('input[type="checkbox"]').is(":checked"))&&(a+=1)}),t==a&&o.each(function(){$(this).index()==n&&$(this).find('input[type="checkbox"]').prop("checked",!0)})):(e.parents("tr").find('input[type="checkbox"]').length,e.parents("tr").find('input[type="checkbox"]').each(function(){$(this).not(":checked")&&0}))}),this._$postCode.on("keyup",function(){var e,t=this._$postCode.val();return!!this._states&&(e=this._getStateByPostCode(t),0==t.length?(this._$state.val("").trigger("change.select2"),this._$dealerState.val("").trigger("change").trigger("change.select2"),this._$state.change(),!1):(e&&(this._$state.val(e).trigger("change.select2"),this._$dealerState.val(e).trigger("change").trigger("change.select2")),void this._$state.change()))}.bind(this)),this._$body.on("click",".step-1-container .link-overlay",function(){r&&r.getPredeliveryEvents().st1ViewVideo()}),this._$body.on("click",".step-1-container .gux-tooltip",function(){r&&r.getPredeliveryEvents().st1FindOut($(this).parents("td").siblings("td").eq(0).text())}),this._$body.on("click",".step3-container .link-overlay",function(){r&&r.getPredeliveryEvents().st3ViewVideo()}),$(window).on("onoverlayhide",function(){this._changeURL("steps","steps")}.bind(this)),this._$body.on("click",".step3-container .gux-tooltip",function(){r&&r.getPredeliveryEvents().st3FindOut($(this).parents("td").siblings("td").eq(0).text())}),this._$body.on("click",".personalisation-form .user-phone-name input",function(){var e;r&&(e=$(this).closest(".radioButton.section").find("h5.heading").text(),t[e]||(r.getPredeliveryEvents().clickInEACH(e),t[e]=!0))}),this._$body.on("select2-open",".personalisation-form .radio-stations select",function(){var e;r&&(e=$(this).closest(".radioButton.section").find("h5.heading").text(),t[e]||(r.getPredeliveryEvents().clickInEACH(e),t[e]=!0))}),this._$body.on("click",".personalisation-form .radio-stations input",function(){var e;r&&(e=$(this).closest(".radioButton.section").find("h5.heading").text(),t[e]||(r.getPredeliveryEvents().clickInEACH(e),t[e]=!0))}),this._$body.on("click",".personalisation-form .address-row input",function(){var e;r&&(e=$(this).closest(".radioButton.section").find("h5.heading").text(),t[e]||(r.getPredeliveryEvents().clickInEACH(e),t[e]=!0))}),this._$body.on("select2-open",".personalisation-form .address-row select",function(){var e;r&&(e=$(this).closest(".radioButton.section").find("h5.heading").text(),t[e]||(r.getPredeliveryEvents().clickInEACH(e),t[e]=!0))}),this._$body.on("select2-open",".personalisation-form .summary-climate-control select",function(){var e;r&&(e=$(this).closest(".radioButton.section").find("h5.heading").text(),t[e]||(r.getPredeliveryEvents().clickInEACH(e),t[e]=!0))}),this._$body.on("click",".personalisation-form .form-radioButtons-holder .form-radioButtons",function(){var e;r&&(e=$(this).closest(".radioButton.section").find("h5.heading").text(),t[e]||(r.getPredeliveryEvents().clickInEACH(e),t[e]=!0))}),this._$body.on("click",".personalisation-form .colorizer .item-holder",function(){var e;r&&(e=$(this).closest(".radioButton.section").find("h5.heading").eq(0).text(),t[e]||(r.getPredeliveryEvents().clickInEACH(e),t[e]=!0))}),this._$body.on("click",".personalisation-form textarea",function(){var e;r&&(e=$(this).closest(".radioButton.section").find("h5.heading").text(),t[e]||(r.getPredeliveryEvents().clickInEACH(e),t[e]=!0))}),this._$body.on("keyup",".address-row .summary-postcode input",function(e){var t,e=$(e.target),a=e.parents(".address-row").find(".summary-state .form-dropdown").find("select"),e=e.val();return!!this._states&&(t=this._getStateByPostCode(e),0==e.length?(a.val("").trigger("change.select2"),!1):void(t&&a.val(t).trigger("change.select2")))}.bind(this)),this._$body.on("blur",".form-recaptcha input",function(){this.captchaStatus.isFailed&&!$(event.target).val()&&(this.captchaStatus={isSuccess:!1,isFailed:!1,isInvalid:!1,isTimeot:!1},this._$scope.$apply())}.bind(this))},s.prototype._getValue=function(e,t,a){e.val()&&(this.userData[t]=a?e.val().charAt(0).toUpperCase()+e.val().slice(1):e.val())},s.prototype._scrollTo=function(e,t){$("html, body").animate({scrollTop:$(e).offset().top},t)},s.prototype._getParameterByName=function(e,t){t=t||this._href,e=e.replace(/[\[\]]/g,"\\$&");e=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return e?e[2]?decodeURIComponent(e[2].replace(/\+/g," ")):"":null},s.prototype._getColourId=function(e){if($(".your-ford-section").attr("data-color-id-config")){var t,a=JSON.parse($(".your-ford-section").attr("data-color-id-config"));for(t in a)if(e===a[t].colourName)return a[t].colourId}},s.prototype._getProductCode=function(e,t,a){var i,n="",o=e||t.val();for(i in a)if(o===i){n=a[i];break}return n},s.prototype._getStepsAttr=function(){return Boolean($(".your-ford-section").data("steps-data-config-for-series"))},s.prototype._togglePreloader=function(){c.fadeToggle(300)},s.prototype._showPreloader=function(){if(c.hasClass("active"))return!1;c.addClass("active")},s.prototype._hidePreloader=function(){if(this.restoringDataInProgress)return!1;c.removeClass("active")},s.prototype._getStateByPostCode=function(t){var e=_.find(this._states,function(e){return 0==e.regionPostcode.indexOf(t)||(0<=e.regionPostcode.indexOf("-")?0==(e=e.regionPostcode.split("-"))[0].indexOf(t)||0==e[1].indexOf(t)||+t>=+e[0].slice(0,t.length)&&+t<=+e[1].slice(0,t.length):void 0)});return e?e.regionTitle:""},s.prototype._getDataByGUID=function(){this._showPreloader(),this._preDeliveryData.getGUID(this._userGUID),this._preDeliveryData.isGUIDReceivedSuccessfully?(this._userStep?(this._userStoredData=this._preDeliveryData.GUIDData,this._userStoredData=_.merge(this._userStoredData,this._userStoredData.step4),delete this._userStoredData.step4):(this._userStoredData=this._preDeliveryData.GUIDData,delete this._userStoredData.step2,delete this._userStoredData.step3,delete this._userStoredData.step4,this._changeURL()),this._checkGUIDData()):this._preDeliveryData.isGUIDReceivedUnsuccessfully&&(this._userStoredData="",this._showMessageSection("wrongGUID"),this.steps.activeStep=1,this._hidePreloader())},s.prototype._checkGUIDData=function(){var e;this._userStoredData.isGUIDSubmitted?(this._showMessageSection("submittedGUID"),this._hidePreloader()):(this.restoringDataInProgress=!0,e=!this._userStep,this._fillInWelcomeSection(e))},s.prototype._renderPageByGUID=function(){setTimeout(function(){this._renderStepsSection(),this._$scope.$apply()}.bind(this),10),setTimeout(function(){for(var a in this._userStoredData){var e=$('.steps-section *[name="'+a+'"]');e.is('input[type="radio"]')&&1<e.length&&e.each(function(e,t){$(t).attr("name")===a&&$(t).val()===this._userStoredData[a]&&$(t).attr("checked","checked")}.bind(this)),(e.is('[type="text"]')||e.is('[type="checkbox"]'))&&e.val(this._userStoredData[a]),e.is("select")&&e.val(this._userStoredData[a]).trigger("change"),a===$(".colorizer").find(".heading").data("colorizer-id")&&this.onLightingChange(this._userStoredData[a]),a===$(".hightlighted-section textarea").attr("name")&&(this.userNotes=this._userStoredData[a])}this._$scope.$apply()}.bind(this),50),setTimeout(function(){var e,t=$(".stations-row").data("frequency-id");if(e=this._userStoredData[t]?JSON.parse(this._userStoredData[t]):e)for(var a in e){var i=$(".summary-frequency").eq(a),n=i.find(".form-dropdown select"),o=n.attr("name"),o=e[a][o],i=i.find(".input-field input"),r=i.attr("name"),a=e[a][r];n.val(o).trigger("change"),i.val(a)}}.bind(this),100),setTimeout(function(){var e,t,a=this._userStoredData.step2,i=this._userStoredData.step3;for(e in a)$(".step2-container tbody").find("td."+a[e]).find('input[name="'+e+'"]').click();for(t in i)$(".step3-container tbody").find("td."+i[t]).find('input[name="'+t+'"]').click()}.bind(this),10),setTimeout(function(){this.getVINCode(),this._$scope.$apply(),this.restoringDataInProgress=!1,this._hidePreloader(),this.restoredFromGUID=!0,this._$scope.$broadcast("pageStepsRender")}.bind(this),110)},s.prototype._fillInWelcomeSection=function(t){for(var e in this._showPreloader(),this.missedFields=[],this._userStoredData){var a=$('.welcome-section *[name="'+e+'"]');a.length&&(a.is('[type="text"]')&&("null"===this._userStoredData[e]?a.val(" "):a.val(this._userStoredData[e])),a.is("select"))&&a.val(this._userStoredData[e]).trigger("change")}setTimeout(function(){this.carModel=this._userStoredData[$("#select-model").attr("name")],this._$model.val(this.carModel).trigger("change"),this.selectedCarSeries=this._userStoredData[$("#select-series").attr("name")],this._$series.val(this.selectedCarSeries).trigger("change");var e,t=this._userStoredData[$(".your-ford-section").data("color-variable-id")],a=(this.selectedColor=this._getColourId(t)||this._userStoredData[$("#select-color").attr("name")],this._$color.val(this.selectedColor).trigger("change"),this._userStoredData[$(".your-ford-section").data("dealership-variable-id")]);for(e in this.dealers)for(var i in this.dealers[e].dealershipList)a===this.dealers[e].dealershipList[i].dealershipKey&&(this.dealerState=this.dealers[e].dealerShipStateKey);$("#select-dealership").val(this.dealerState).trigger("change"),this.dealerShip=this._userStoredData[$("#select-dealer").attr("name")],$("#select-dealer").val(this.dealerShip).trigger("change"),$(".welcome-section .form-dropdown select, .welcome-section .input-field input").each(function(e,t){t=$(t);t.trigger("blur"),t.hasClass("error")&&t.data("validation")&&"required"===t.data("validation").rules[0].type&&this.missedFields.push(t.attr("name"))}.bind(this))}.bind(this),0);var i=this._userStoredData[$(".preview-options").data("name")];i&&setTimeout(function(){var t=this;$(".preview-options").find('input[type="checkbox"]').prop("checked",!1),i.forEach(function(e){t.selectedOptionsList[e.slice(5)].checked=!0}),this.selectedOptionsList=t.selectedOptionsList}.bind(this),50),t||$('.privacyPolicy input[type="checkbox"]').attr("checked","checked"),setTimeout(function(){if(this.missedFields.length)for(var e in this.missedFields){e=$('.details-section *[name="'+this.missedFields[e]+'"]');e.is("select")?e.trigger("change"):e.trigger("blur")}t?(this.restoringDataInProgress=!1,this._hidePreloader(),this._$scope.$apply(),this.restoreLocalStorageFlag=!1):this.missedFields.length?(this._preDeliveryData.isGUIDReceivedSuccessfully=!1,this.steps.activeStep=1,this.showWelcomeSection(),this.restoringDataInProgress=!1,this._hidePreloader(),this._$scope.$apply()):this._renderPageByGUID()}.bind(this),200)},s.prototype.showWelcomeSection=function(){this.setDataToLocalStorage(this.restoreLocalStorageFlag,"all"),this.sections.welcome.active=!0,this.sections.steps.active=!1,this.sections.summary.active=!1,this.isSaveSuccessfull=!1,this.isSaveFailed=!1,this._scrollTo("body",1e3),$(".homeBillboard").length&&$(".homeBillboard").css("display","block"),$('.privacyPolicy input[type="checkbox"]').prop("checked",!1),this._changeURL(this.urlsPath.welcome)},s.prototype.checkWelcomeSection=function(e){if(!this.isAuthorMode){$(".preview-details input").length;var a=[];if(this.isStepsSectionReady=!1,$(".welcome-section .form-dropdown select, .welcome-section .input-field input").each(function(e,t){""===$(t).val()&&$(t).data("validation")&&"required"===$(t).data("validation").rules[0].type&&a.push($(t).attr("name"))}),a.length)return this._scrollTo('.welcome-section *[name="'+a[0]+'"]:eq(0)',500),this.isStepsSectionReady=!1;if(!$('.privacy-block input[type="checkbox"]').prop("checked"))return this._scrollTo(".privacy-block",500),this.isStepsSectionReady=!1;if($(".welcome-section").find("small.error").length)return this._scrollTo($(".welcome-section").find("small.error").eq(0).parents("div").eq(0),500),this.isStepsSectionReady=!1;if("null"!=this._userGUID&&!this.restoredFromGUID)return this.isStepsSectionReady=!0,this._renderPageByGUID(),void r.getPredeliveryEvents().onLoadBasics();this.isStepsSectionReady=!0}this._showPreloader(),this.equalityModelToLocalStorage||(this.clearLocalStorage("steps"),this.equalityModelToLocalStorage=!0),this._renderStepsSection(),r.getPredeliveryEvents().onLoadBasics(),e.preventDefault()},s.prototype.onCarModelChange=function(){if(""===this.carModel)this.isSeriesDropdownDisabled=!0,this.isOptionsReady=!1,this.optionsList=[],this.selectedOptionsList=[],this.isColorDropdownDisabled=!0,this.isPreviewReady=!1,this.selectedCarSeries="",this.selectedColor="",this.selectedCar.model="",this.selectedCar.modelKey="",this.selectedCar.series="",this.selectedCar.seriesValue="",this.selectedCar.color="",this.selectedCar.colorKey="",$("#select-model, #select-series, #select-color").val("").trigger("change.select2");else{for(var e in this.selectedCar.model="",this.selectedCar.modelKey="",this.selectedCar.series="",this.selectedCar.seriesValue="",this.selectedCar.color="",this.selectedCar.colorKey="",this.isOptionsReady=!1,this.isPreviewReady=!1,this.optionsList=[],this.selectedOptionsList=[],$("#select-series, #select-color").val("").trigger("change.select2"),this.models)if(this.models[e].modelKey==this.carModel){this.selectedCar.model=this.models[e].modelValue,this.selectedCar.modelKey=this.models[e].modelKey,this.carSeriesList=this.models[e].seriesList;break}this._preDeliveryData.isGUIDReceivedSuccessfully?this.carModel!=this._userStoredData.VCL_PRODUCT&&(this.equalityModelToLocalStorage=!1):this.carModel!=this.getModelFromLocalStorage().model&&(this.equalityModelToLocalStorage=!1),this.isSeriesDropdownDisabled=!1}},s.prototype.onModelSeriesChange=function(){if(""===this.selectedCarSeries)this.isColorDropdownDisabled=!0,this.isOptionsReady=!1,this.isPreviewReady=!1,this.selectedColor="",this.selectedCar.series="",this.selectedCar.color="",this.selectedCar.colorKey="",this.selectedCar.image="",this.selectedCar.seriesValue="",this._isSeriesChanged=!0,$("#select-color").val("").trigger("change.select2");else{for(var e in this.selectedCar.series="",this.selectedCar.seriesValue="",this.selectedCar.color="",this.selectedCar.colorKey="",this.selectedCar.image="",this.isOptionsReady=!1,this.isPreviewReady=!1,this.optionsList=[],$("#select-color").val("").trigger("change.select2"),this.carSeriesList)if(this.carSeriesList[e].seriesKey==this.selectedCarSeries){this.selectedCar.series=this.carSeriesList[e].seriesValue,this.selectedCar.seriesValue=this.carSeriesList[e].seriesKey,this.carColorsList=this.carSeriesList[e].colorsList,this.carSeriesList[e].optionalPacksList.length?(this.optionsList=this.carSeriesList[e].optionalPacksList,this.selectedOptionsList=this.optionsList,this.selectedOptionsList.forEach(function(e,t){e.checked=!1}),this.isOptionsReady=!0):(this.optionsList=[],this.selectedOptionsList=[],this.isOptionsReady=!1);break}this._preDeliveryData.isGUIDReceivedSuccessfully?this.selectedCarSeries!=this._userStoredData.VCL_MODEL&&(this.equalityModelToLocalStorage=!1):this.selectedCarSeries!=this.getModelFromLocalStorage().series&&(this.equalityModelToLocalStorage=!1),this._isSeriesChanged=!0,this.isColorDropdownDisabled=!1}},s.prototype.onColorChange=function(){if(""==this.selectedColor)this.isPreviewReady=!1;else{for(var e in this._showPreloader(),this.carColorsList)if(this.selectedColor==this.carColorsList[e].colorKey){this.selectedCar.color=this.carColorsList[e].colorValue,this.selectedCar.colorKey=this.carColorsList[e].colorKey;break}for(var t in this.selectedCar.image="",this.carSeriesList)if(this.selectedCar.seriesValue===this.carSeriesList[t].seriesKey&&this.carSeriesList[t].imagesList)for(var a in this.carSeriesList[t].imagesList)if(this.selectedColor==this.carSeriesList[t].imagesList[a].colorKey){this.selectedCar.image=this.carSeriesList[t].imagesList[a].imagePath;break}this.isPreviewReady=!!this.selectedCar.image,this._hidePreloader()}},s.prototype.onDealerStateChange=function(){if(""===this.dealerState||!this.dealerState)return this.isDealerShipDropdownDisabled=!0,this.dealerShip="",this.selectedCar.dealerState="",this.selectedCar.dealer="",this.selectedCar.dealerID="",$("#select-dealer").val("").trigger("change.select2"),!1;for(var e in this.selectedCar.dealerState="",this.selectedCar.dealer="",this.selectedCar.dealerID="",this.dealerShip="",$("#select-dealer").val("").trigger("change.select2"),this.models)if(this.dealers[e].dealerShipStateKey==this.dealerState){this.dealersList=this.dealers[e].dealershipList,this.selectedCar.dealerID=this.dealers[e].dealerShipStateKey;break}this.selectedCar.dealerState=this.dealerState,this.isDealerShipDropdownDisabled=!1},s.prototype.onDealerChange=function(){if("PL"!=this.dealerShip)for(var e in this.dealersList)if(this.dealersList[e].dealershipKey==this.dealerShip){this.selectedCar.dealer=this.dealersList[e].dealershipValue,this.selectedCar.dealerID=this.dealersList[e].dealershipKey;break}},s.prototype.getVINCode=function(){this.vinCode=this._$VINCode.val()},s.prototype.getPreviewOptions=function(){this.optionPack=[],$('.preview-options input[type="checkbox"]').each(function(e,t){$(t).is(":checked")&&this.optionPack.push($(t).attr("name"))}.bind(this))},s.prototype.setActiveStep=function(e){function t(e){var e=$(".step"+e+"-container .zebraChartTile-table"),t=e.find("tr.decorated-row"),e=e.find('input[type="checkbox"]:checked').length;t.length!=e&&t.each(function(){var e=$(this);e.find('input[type="checkbox"]:checked').length||e.find('.col-3 input[type="checkbox"]').prop("checked",!0)})}switch(this.steps.activeStep=e||1,e){case 1:r.getPredeliveryEvents().onLoadBasics();break;case 2:r.getPredeliveryEvents().onLoadFeatured();break;case 3:r.getPredeliveryEvents().onLoadExpanded(),t(2);break;case 4:r.getPredeliveryEvents().onLoadPersonalisation(),t(3)}setTimeout(function(){e&&this._scrollTo(".predelivery-step.is-active-step",500)}.bind(this),50),this.isSaveSuccessfull=!1,this.isSaveFailed=!1},s.prototype.isStepActive=function(e){return e==this.getActiveStep()},s.prototype.getActiveStep=function(){return this.steps.activeStep},s.prototype._renderStepsSection=function(){this._getCarPage(),this._guxTooltip.init(),this.showStepsSection()},s.prototype.showStepsSection=function(){this.setDataToLocalStorage(this.restoreLocalStorageFlag,"welcome"),u(),this.isSubmitSuccessfull=!1,this.isSubmitFailed=!1,this.captchaStatus={isSuccess:!1,isFailed:!1,isInvalid:!1,isTimeot:!1},this.getVINCode(),this._scrollTo("body",1e3),this.sections.welcome.active=!1,this.sections.summary.active=!1,this.sections.steps.active=!0,this._unWrapSummaryColumns(),setTimeout(function(){$(".steps-section select").select2({minimumResultsForSearch:-1,blurOnChange:!1,selectOnBlur:!1,loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:""}),setTimeout(function(){$(".select2-focusser, .select2-input").length&&$(".select2-focusser, .select2-input").remove()},0),this._overlay.init()}.bind(this),0),setTimeout(function(){var e,t;e=this.selectedOptionsList,(t=$(".step2-container .zebraChartTile-table .decorated-row")).show(),t.each(function(){var t=$(this),a=t.find(".description-column .heading").text().toLowerCase();e.forEach(function(e){e.optionalPack.toLowerCase()!==a||e.checked||(t.hide(),t.find('[type="checkbox"]').prop("checked",!1))})}),this._hidePreloader()}.bind(this),1e3),this._changeURL(this.urlsPath.steps)},s.prototype.onLightingChange=function(e){this.lighting==e?this.lighting="":(this.lighting=e,this.isSummaryInnerReady=!0)},s.prototype._getOperations=function(){var a=[],i=[],n=[],o=[],r=this._sce,e=(this.featuredOperationsCol1=[],this.expandedOperationsCol1=[],this.featuredOperationsCol2=[],this.expandedOperationsCol2=[],$(".step2-container .zebraChartTile-table")),t=$(".step3-container .zebraChartTile-table");e.find("td.col-1").each(function(e,t){$(t).find('input[type="checkbox"]').is(":checked")&&a.push({name:r.trustAsHtml($(t).siblings(".description-column").find("p").html())})}),e.find("td.col-2").each(function(e,t){$(t).find('input[type="checkbox"]').is(":checked")&&i.push({name:r.trustAsHtml($(t).siblings(".description-column").find("p").html())})}),t.find("td.col-1").each(function(e,t){$(t).find('input[type="checkbox"]').is(":checked")&&n.push({name:r.trustAsHtml($(t).siblings(".description-column").find("p").html())})}),t.find("td.col-2").each(function(e,t){$(t).find('input[type="checkbox"]').is(":checked")&&o.push({name:r.trustAsHtml($(t).siblings(".description-column").find("p").html())})}),this.featuredOperationsCol1=a,this.expandedOperationsCol1=n,this.featuredOperationsCol2=i,this.expandedOperationsCol2=o},s.prototype._renderNewPage=function(){var e=this.isLive?this.predeliveryPath:window.location.pathname,t="",a="",i="",n="",o="",r=this._getStepsAttr()?this.selectedCar.seriesValue:this.selectedCar.modelKey;this.step1HTML="",this.step2HTML="",this.step3HTML="",this.step4part1="",this.step4part2="",$(".personalisation-form").find('input[type="text"], select').val("").parents(".personalisation-form").find('input[type="radio"]').prop("checked",!1),this.lighting="",this.userNotes="",-1!=e.indexOf(".html")&&(e=e.substring(0,e.indexOf(".html"))),$.ajax({type:"GET",url:e+".preDeliveryModelConfig."+r+".data",dataType:"html",async:!1,success:function(e){allModelConfigs=$(e).find(".model-config-container"),0<$(allModelConfigs).length&&$(allModelConfigs).each(function(){$(this).attr("data-model-name")===r&&(t=$(this).find(".step1-container").html(),a=$(this).find(".step2-container").html(),i=$(this).find(".step3-container").html(),n=$(this).find(".step4-container").html(),o=$(this).find(".personalization-container").html())})}}),this._oldModel=this.selectedCar.model,this._oldSeries=this.selectedCar.series,this.step1HTML=t,this.step2HTML=a,this.step3HTML=i,this.step4part1=n,this.step4part2=o},s.prototype._getCarPage=function(){this._getStepsAttr()?this._oldModel===this.selectedCar.model&&this._oldSeries===this.selectedCar.series||this._renderNewPage():this._oldModel!==this.selectedCar.model&&this._renderNewPage()},s.prototype.getWelcomeData=function(){var e={},t=$(".preDeliveryManualForm");return e[t.find(".details-section .user-title select").attr("name")]=$(".preDeliveryManualForm .details-section .user-title select").val(),e[t.find(".details-section .user-first-name input").attr("name")]=$(".preDeliveryManualForm .details-section .user-first-name input").val(),e[t.find(".details-section .user-last-name  input").attr("name")]=$(".preDeliveryManualForm .details-section .user-last-name input").val(),e[t.find(".details-section .user-email  input").attr("name")]=$(".preDeliveryManualForm .details-section .user-email input").val(),e[t.find(".details-section .user-contact-number  input").attr("name")]=$(".preDeliveryManualForm .details-section .user-contact-number input").val(),e[t.find(".details-section .user-addr1  input").attr("name")]=$(".preDeliveryManualForm .details-section .user-addr1 input").val(),e[t.find(".details-section .user-suburb  input").attr("name")]=$(".preDeliveryManualForm .details-section .user-suburb input").val(),e[t.find(".details-section .user-addr2  input").attr("name")]=$(".preDeliveryManualForm .details-section .user-addr2 input").val(),e[t.find(".details-section .user-postcode  input").attr("name")]=$(".preDeliveryManualForm .details-section .user-postcode input").val(),e[t.find(".details-section .user-state  select").attr("name")]=$(".preDeliveryManualForm .details-section .user-state select").val(),this.getPreviewOptions(),e[t.find(".your-ford-section").attr("data-model-variable-id")]=this.selectedCar.modelKey,e[t.find(".your-ford-section").attr("data-series-variable-id")]=this.selectedCar.seriesValue,e[t.find(".your-ford-section").attr("data-optional-pack-variable-id")]=this.optionPack,e[t.find(".your-ford-section").attr("data-color-variable-id")]=this.selectedCar.colorKey,e[t.find(".your-ford-section .user-vin-number  input").attr("name")]=$(".preDeliveryManualForm .your-ford-section .user-vin-number  input").val(),e[t.find(".your-ford-section").attr("data-dealership-state-variable-id")]=this.selectedCar.dealerState,e[t.find(".your-ford-section").attr("data-dealership-variable-id")]=this.selectedCar.dealerID,e[t.find(".privacy-block  input").attr("name")]=t.find(".privacy-block input").val(),e},s.prototype.getAllFieldValues=function(){var t=this.getWelcomeData(),e=(t.step2={},t.step3={},t.step4={},{}),l=[],a=$(".hightlighted-section");$(".preDeliveryManualForm .step2-container .zebraChartTile-table tbody tr").each(function(){$(this).find(".decorated-radio").each(function(){var e;$(this).is(":checked")&&(e=$(this).attr("data-index"),$(this).attr("name"),t.step2[$(this).attr("name")]="col-"+e)})}),$(".preDeliveryManualForm .step3-container .zebraChartTile-table tbody tr").each(function(){$(this).find(".decorated-radio").each(function(){var e;$(this).is(":checked")&&(e=$(this).attr("data-index"),t.step3[$(this).attr("name")]="col-"+e)})}),t.step4[a.find(".user-phone-name input").attr("name")]=a.find(".user-phone-name input").val(),$(".summary-frequency").each(function(e,t){var a,i=$(this).find("select").attr("name"),n=$(this).find("select").val(),o=$(this).find(".input-field input").attr("name"),r=$(this).find(".input-field input").val();$(this).find("select").val()&&$(this).find(".input-field input").val()&&((a={})[i]=n,a[o]=r,l.push(a))}),t.step4[a.find(".stations-row").attr("data-frequency-id")]=JSON.stringify(l),a.find(".address-row").each(function(){t.step4[$(this).find(".summary-address-type input").attr("name")]=$(this).find(".summary-address-type input").val(),t.step4[$(this).find(".summary-address input").attr("name")]=$(this).find(".summary-address input").val(),t.step4[$(this).find(".summary-suburb input").attr("name")]=$(this).find(".summary-suburb input").val(),t.step4[$(this).find(".summary-city input").attr("name")]=$(this).find(".summary-city input").val(),t.step4[$(this).find(".summary-postcode input").attr("name")]=$(this).find(".summary-postcode input").val(),t.step4[$(this).find(".summary-state .form-dropdown select").attr("name")]=$(this).find(".summary-state .form-dropdown select").val()}),t.step4[a.find(".summary-climate-control select").attr("name")]=a.find(".summary-climate-control select").val(),$(".form-radioButtons-holder .form-radioButtons").each(function(){$(this).find("input").is(":checked")&&(t.step4[$(this).find("input").attr("name")]=$(this).find("input").val())}),t.step4[a.find(".colorizer .heading").attr("data-colorizer-id")]=this.lighting,t.step4[a.find("textarea").attr("name")]=a.find("textarea").val(),e.formData=JSON.stringify(t),this._getValue(this._$firstName,"firstName"),this._getValue(this._$lastName,"lastName"),this._getValue(this._$email,"email"),e.firstName=this.userData.firstName,e.lastName=this.userData.lastName,e.emailAddress=this.userData.email,e.GUID="",this.formSubmitData=e},s.prototype.saveAndContinue=async function(e){r&&!e&&r.getPredeliveryEvents().saveAndContinue(),this.getAllFieldValues();var t=this.formSubmitData,a=JSON.parse(t.formData),i=this._getStepsAttr()?this.selectedCar.series:this.selectedCar.model,a=(t.step=this.steps.activeStep,t.formData=a,this.isAuthorMode?t[this._emailTemplateId]="https://wwwdev.brandap.ford.com/content/ford/au/en_au/home.edm.PDSC.data":t[this._emailTemplateId]=d("PDSC",this.predeliveryPath),t.Nameplate=i,t[this._countryCode.name]=this._countryCode.value,"null"!=this._userGUID?t.GUID=this._userGUID:t.GUID=sessionStorage.getItem("predeliveryGUID")||"",this.isSaveSuccessfull=!1,this.isSaveFailed=!1,await this.prepareLinks(this.saveJourneyData));this._showPreloader(),e&&(i=t.formData,$.extend(i,e),t.formData=i,t.emailAddress=""),$.ajax({type:"POST",url:a.apiLink,headers:a.header,data:JSON.stringify(t),dataType:"json",contentType:"application/json; charset=utf-8",async:!1,success:function(e){200==e.status||200==e.returnCode?(this.isSaveFailed=!1,this.isSaveSuccessfull=!0,this.CUID=e.value,sessionStorage.setItem("predeliveryGUID",e.value)):(this.isSaveSuccessfull=!1,this.isSaveFailed=!0)}.bind(this),error:function(e){this.isSaveSuccessfull=!1,this.isSaveFailed=!0}.bind(this)}),this._hidePreloader()},s.prototype._getSummaryRadioStations=function(){this.stations={fm:[],am:[]};$(".stations-row > .columns > .row");var a=$(".stations-row > .columns > .row select");a.each(function(e){var t=a.eq(e).parents(".stations-row > .columns > .row").find(".textfield input").val();switch(a.eq(e).val()){case"AM":t&&(this.stations.am.push({name:t}),this.isSummaryInnerReady=!0);break;case"FM":t&&(this.stations.fm.push({name:t}),this.isSummaryInnerReady=!0)}}.bind(this))},s.prototype._getSummaryAddresses=function(){this.userAddresses={addr1:"",addr2:""},$(".address-row").each(function(e){var t=$(".address-row").eq(e),a="",i=!1,n=!1,o=!1,r=!1,l=!1;t.find(".summary-address-type input").val()?(i=!0,a=t.find(".summary-address-type input").val()):i=!1,t.find(".summary-address input").val()?(n=!0,i?a+=", "+t.find(".summary-address input").val():a=t.find(".summary-address input").val()):n=!1,t.find(".summary-suburb input").val()?(o=!0,i||n?a+=", "+t.find(".summary-suburb input").val():a=t.find(".summary-suburb input").val()):o=!1,t.find(".summary-city input").val()?(r=!0,i||n||o?a+=", "+t.find(".summary-city input").val():a=t.find(".summary-city input").val()):r=!1,t.find(".summary-state select").val()?(l=!0,i||n||o||r?a+=", "+t.find(".summary-state select").val():a=t.find(".summary-state select").val()):l=!1,t.find(".summary-postcode input").val()&&(i||n||o||r||l?a+=", "+t.find(".summary-postcode input").val():a=t.find(".summary-postcode input").val()),a&&(this.isSummaryInnerReady=!0),this.userAddresses["addr"+(e+1)]=a}.bind(this))},s.prototype.getClimateControl=function(){return $(".summary-climate-control select").val()},s.prototype._getRadiosValues=function(){var a=!1,i=!1;$('.personalisation-form .radioButton input[type="radio"]').each(function(){var e,t;i=!1,$(this).is(":checked")?(e=$(this).val(),t=$(this).parents(".radioButton").find(".heading").text(),a=i=!0,$(".summary-section .details-title").each(function(){$(this).text()===t&&$(this).parents(".column").removeClass("ng-hide").find(".details-data").text(e)})):a&&(i=!0)}),i&&(this.isSummaryInnerReady=!0)},s.prototype._getUserMobilePhone=function(){this.userData.phone="",this._getValue($(".user-phone-name input"),"phone"),this.userData.phone&&(this.isSummaryInnerReady=!0)},s.prototype._getSummary=function(){this.isSummaryInnerReady=!1,this.getVINCode(),this._getValue(this._$userTitle,"title",!0),this._getValue(this._$firstName,"firstName"),this._getValue(this._$lastName,"lastName"),this._getValue(this._$email,"email"),this._getValue(this._$contactNumber,"contactNumber"),this._getValue(this._$addr1,"addr1"),this._getValue(this._$addr2,"addr2"),this._getValue(this._$suburb,"suburb"),this._getValue(this._$postCode,"postCode"),this._getValue(this._$state,"state"),this._getSummaryRadioStations(),this._getOperations()},s.prototype._generateSummarySection=function(){this.userAddresses={addr1:"",addr2:""},this.radioSections=[];var a,i,n,e=$(".personalisation-form .radioButton"),o=!1,r=!1,t=$('.personalisation-form .hightlighted-section[data-type-of-component="favouriteStations"]').parent(".radioButton").index(),l=$('.personalisation-form .hightlighted-section[data-type-of-component="navigationSettings"]').parent(".radioButton").index();if(e.each(function(e,t){switch(i="",a=$(t).find(".hightlighted-section").data("type-of-component"),r=n=!1,a){case"mobilePhone":if(""===$(t).find(".user-phone-name input").val())return;i=$(t).find(".user-phone-name input").val(),this.isSummaryInnerReady=!0,$(t).find(".hightlighted-section").data("verify-full-width")&&(n=!0);break;case"climateControl":if(""===$(t).find("select").val())return;i=$(t).find("select").val(),this.isSummaryInnerReady=!0,$(t).find(".hightlighted-section").data("verify-full-width")&&(n=!0);break;case"radioButtons":$(t).find('input[type="radio"]');if(!(i=$(t).find('input[type="radio"]:checked').val()))return;this.isSummaryInnerReady=!0,$(t).find(".hightlighted-section").data("verify-full-width")&&(n=!0);break;case"colorizer":if(!this.lighting)return;i=this.lighting,this.isSummaryInnerReady=!0,$(t).find(".hightlighted-section").data("verify-full-width")&&(n=!0);break;case"customerNotes":if(!this.userNotes)return;i=this.userNotes,this.isSummaryInnerReady=!0,$(t).find(".hightlighted-section").data("verify-full-width")&&(n=!0);break;case"navigationSettings":if(this._getSummaryAddresses(),!this.userAddresses.addr1&&!this.userAddresses.addr2)return;this.isSummaryInnerReady=!0,$(t).find(".hightlighted-section").data("verify-full-width")&&(r=!0);break;case"favouriteStations":return void($(t).find(".hightlighted-section").data("verify-full-width")&&(o=!0))}this.radioSections.push({heading:$(t).find(".heading").eq(0).text(),value:i,isSeparateRow:n})}.bind(this)),this.userAddresses.addr1&&this.radioSections.splice(l,0,{heading:$('.hightlighted-section[data-type-of-component="navigationSettings"]').find(".hightlighted-section-inner.address-row").data("navigation-settings-1"),value:this.userAddresses.addr1,isSeparateRow:r}),this.userAddresses.addr2&&this.radioSections.splice(l+1,0,{heading:$('.hightlighted-section[data-type-of-component="navigationSettings"]').find(".hightlighted-section-inner.address-row").data("navigation-settings-2"),value:this.userAddresses.addr2,isSeparateRow:r}),this.stations.fm.length){var s,c=[];for(s in this.stations.fm)c.push(this.stations.fm[s]);this.radioSections.splice(t,0,{heading:$('.hightlighted-section[data-type-of-component="favouriteStations"]').find(".stations-row").data("fm-radio-settings"),value:"",array:c,isSeparateRow:o,isFMRow:!0})}if(this.stations.am.length){var d,u=[];for(d in this.stations.am)u.push(this.stations.am[d]);this.radioSections.splice(t+1,0,{heading:$('.hightlighted-section[data-type-of-component="favouriteStations"]').find(".stations-row").data("am-radio-settings"),value:"",array:u,isSeparateRow:o,isAMRow:!0})}},s.prototype.showSummarySection=function(){this._getSummary(),this._generateSummarySection(),this._scrollTo("body",1e3),this.sections.welcome.active=!1,this.sections.steps.active=!1,this.sections.summary.active=!0,setTimeout(function(){var e=$(".summary-page-captcha");e.find(".input-field").removeClass("error"),e.find(".input-field input").removeClass("error"),e.find("small.error").hide(1),e.css("opacity",1),this._wrapSummaryColumns()}.bind(this),0),r.getPredeliveryEvents().onLoadMainSummary(this.selectedCar.model),this.setDataToLocalStorage(this.restoreLocalStorageFlag,"all"),this._changeURL(this.urlsPath.summary)},s.prototype._wrapSummaryColumns=function(){var e=$(".summary-columns-container");if(e.length){var t=e.find(".col"),a=t.length,i=$('<div class="clearfix" />'),e=$('<div class="clearfix radio-stations" />');$(".clean-row.fm-col").length&&$(".clean-row.am-col").length&&$(".clean-row.fm-col, .clean-row.am-col").wrapAll(e);for(var n=0;n<a;n+=2)t.filter(":eq("+n+"),:eq("+(n+1)+")").wrapAll(i)}},s.prototype._unWrapSummaryColumns=function(){var e=$(".summary-columns-container");e.length&&e.find(".col").unwrap()},s.prototype._getPDFData=function(){var l,a=[],s=[],e=[],t=[],i=[];this.userAddresses={addr1:"",addr2:""},$(".step-1-container .zebraChartTile-table").each(function(e,t){a=[],$(t).find("tbody tr").each(function(e,t){-1!==$(t).find("td").eq(0).text().indexOf("sup")?a.push($(t).find("td").eq(0).text().replace(/<sup>/g,"###").replace(/<\/sup>/g,"@@@").replace(/Â/g,"")):-1!==$(t).find("td").eq(0).text().indexOf("™")?a.push($(t).find("td").eq(0).text().replace(/™/g,"###™@@@").replace(/Â/g,"")):-1!==$(t).find("td").eq(0).text().indexOf("®")?a.push($(t).find("td").eq(0).text().replace(/®/g,"###®@@@").replace(/Â/g,"")):a.push($(t).find("td").eq(0).text())}),s.push({subHeading:$(t).find("th").eq(0).text(),items:a})}),t.push({stepHeading:$(".predelivery-step").eq(0).find(".step-name").text(),stepItems:s}),s=[],$(".personalisation-form .radioButton").each(function(e,t){var a,i,t=$(t),n=[];if("mobilePhone"===(l=t.find(".hightlighted-section").data("type-of-component")))""!==t.find(".user-phone-name input").val()&&((n=[]).push(t.find(".user-phone-name input").val()),s.push({subHeading:t.find(".heading").eq(0).text(),items:n}));else if("favouriteStations"===l){if(this.stations.fm.length){for(var o in n=[],this.stations.fm)n.push(this.stations.fm[o].name);s.push({subHeading:$('.hightlighted-section[data-type-of-component="favouriteStations"]').find(".stations-row").data("fm-radio-settings"),items:n})}if(this.stations.am.length){for(var r in n=[],this.stations.am)n.push(this.stations.am[r].name);s.push({subHeading:$('.hightlighted-section[data-type-of-component="favouriteStations"]').find(".stations-row").data("am-radio-settings"),items:n})}}else"navigationSettings"===l?(n=[],this._getSummaryAddresses(),a=this.userAddresses.addr1,i=this.userAddresses.addr2,(a||i)&&(a&&n.push(a),i&&n.push(i),s.push({subHeading:t.find(".heading").eq(0).text(),items:n}))):"climateControl"===l?""!==t.find("select").val()&&((n=[]).push(t.find("select").val()),s.push({subHeading:t.find(".heading").eq(0).text(),items:n})):"radioButtons"===l?(n=[],t.find('input[type="radio"]:checked').length&&(n.push(t.find('input[type="radio"]:checked').val()),s.push({subHeading:t.find(".heading").eq(0).text(),items:n}))):"colorizer"===l?this.lighting&&((n=[]).push(this.lighting),s.push({subHeading:t.find(".heading").eq(0).text(),items:n})):"customerNotes"===l&&this.userNotes&&((n=[]).push(this.userNotes),s.push({subHeading:t.find(".heading").eq(0).text(),items:n}))}.bind(this)),i.push({stepHeading:$(".predelivery-step").eq(3).find(".step-name").text(),stepItems:s}),e.push({model:this.selectedCar.model,series:this.selectedCar.series,colour:this.selectedCar.color,vin:this.vinCode,image:this.selectedCar.image,dealer:this.selectedCar.dealer+" / "+this.selectedCar.dealerID,name:this.userData.title+" "+this.userData.firstName+" "+this.userData.lastName,email:this.userData.email,phone:this.userData.contactNumber,address:this.userData.addr2?this.userData.addr1+", "+this.userData.addr2:this.userData.addr1,suburb:this.userData.suburb,post:this.userData.postCode,state:this.userData.state,logoImage:$(".preDeliveryManualForm .pdf-config").data("logo-image"),headerImage:$(".preDeliveryManualForm .pdf-config").data("header-image"),unCheckedImg:$(".preDeliveryManualForm .pdf-config").data("unchecked-image"),textBoxImg:$(".preDeliveryManualForm .pdf-config").data("textbox-image"),fordOwnerImg:$(".preDeliveryManualForm .pdf-config").data("fordowner-image"),youTubeImg:$(".preDeliveryManualForm .pdf-config").data("youtube-image"),faceBookImg:$(".preDeliveryManualForm .pdf-config").data("facebook-image"),pdfXslDamPath:$(".preDeliveryManualForm .pdf-config").data("pdf-path")}),this._PDFData={welcome:e,step1:t,step4:i}},s.prototype._getTableData=function(){this.column1Step2=[],this.column2Step2=[],this.column1Step3=[],this.column2Step3=[];var i=[],e=$(".step2-container .zebraChartTile-table"),t=$(".step3-container .zebraChartTile-table");function n(e){e=$(e).siblings(".description-column").find(".heading").html();return e&&(-1!==e.indexOf("sup")?e=e.replace(/<sup>/g,"###").replace(/<\/sup>/g,"@@@").replace(/Â/g,""):-1!==e.indexOf("™")?e=e.replace(/™/g,"###™@@@").replace(/Â/g,""):-1!==e.indexOf("®")&&(e=e.replace(/®/g,"###®@@@").replace(/Â/g,"")),e=e.replace(/(<\/?\w+?>)\s*?(<\/?\w+?>)|(<\/?\w+?>)/g,"")),e}e.find("td.col-1").each(function(e,t){var a;$(t).find('input[type="checkbox"]').is(":checked")&&(a=[],$(t).siblings(".description-column").find(".item").each(function(e,t){a.push($(t).text())}),i.push({subHeading:n(t),items:a}))}.bind(this)),this.column1Step2.push({stepHeading:$(".predelivery-step").eq(1).find(".step-name").text(),stepItems:i}),i=[],e.find("td.col-2").each(function(e,t){var a;$(t).find('input[type="checkbox"]').is(":checked")&&(a=[],$(t).siblings(".description-column").find(".item").each(function(e,t){a.push($(t).text())}),i.push({subHeading:n(t),items:a}))}.bind(this)),this.column2Step2.push({stepHeading:$(".predelivery-step").eq(1).find(".step-name").text(),stepItems:i}),i=[],t.find("td.col-1").each(function(e,t){var a;$(t).find('input[type="checkbox"]').is(":checked")&&(a=[],$(t).siblings(".description-column").find(".item").each(function(e,t){a.push($(t).text())}),i.push({subHeading:n(t),items:a}))}),this.column1Step3.push({stepHeading:$(".predelivery-step").eq(2).find(".step-name").text(),stepItems:i}),i=[],t.find("td.col-2").each(function(e,t){var a;$(t).find('input[type="checkbox"]').is(":checked")&&(a=[],$(t).siblings(".description-column").find(".item").each(function(e,t){a.push($(t).text())}),i.push({subHeading:n(t),items:a}))}),this.column2Step3.push({stepHeading:$(".predelivery-step").eq(2).find(".step-name").text(),stepItems:i})},s.prototype.viewSummaryPDF=function(){r&&r.getPredeliveryEvents().viewPdf(this.selectedCar.model),this._showPreloader(),this._getPDFData(),this._getTableData(),this.PDF="";var e={welcome:this._PDFData.welcome,step1:this._PDFData.step1,column1Step2:this.column1Step2,column2Step2:this.column2Step2,column1Step3:this.column1Step3,column2Step3:this.column2Step3,step4Data:this._PDFData.step4},e=(this.saveAndContinue(e),(new Date).getTime());window.open("predelivery.preDeliveryViewAsPdf.pdf?pd_id="+this.CUID+"&t="+e)},s.prototype._getDelaerEmail=function(){var t,e=this._dealersEmails;return e.length&&(t=this.selectedCar.dealerID,(e=e.filter(function(e){return+JSON.parse(e.dealershipKey)==+t})).length)?e[0].dealershipEmail:""},s.prototype.submitHandler=async function(){this.captchaStatus={isSuccess:!1,isFailed:!1,isInvalid:!1,isTimeot:!1};var e,t=$("#recaptchaval").val(),t=decodeURIComponent(t),a=$(".form-recaptcha .input-field input").val();a&&((e={}).captchaKey=t,e.recaptcha=a,t=await this.prepareLinks(this.verifyCaptcha),$.ajax({type:"POST",url:t.apiLink,headers:t.header,data:JSON.stringify(e),dataType:"json",contentType:"application/json; charset=utf-8",async:!1,success:function(e){200==e.status||200==e.returnCode?(this.captchaStatus.isSuccess=!0,this.captchaStatus.isFailed=!1,this.clearLocalStorage("all"),this._getPDF()):(this.captchaStatus.isSuccess=!1,this.captchaStatus.isFailed=!0,-1!==e.value.toString().indexOf("invalid")&&(this.captchaStatus.isInvalid=!0),$(".form-recaptcha .input-field input").val(""),$(".captcha-refresh").click(),this._$scope.$apply())}.bind(this),error:function(e){this.captchaStatus.isSuccess=!1,this.captchaStatus.isFailed=!0,-1!==e.value.toString().indexOf("invalid")&&(this.captchaStatus.isInvalid=!0),$(".form-recaptcha .input-field input").val(""),$(".captcha-refresh").click(),this._$scope.$apply()}.bind(this)}))},s.prototype._getPDF=function(){r&&r.getPredeliveryEvents().submitToDealer(this.selectedCar.model),this._showPreloader(),this.PDF="";this._getStepsAttr()?this.selectedCar.seriesValue:this.selectedCar.modelKey;this._getPDFData(),this._getTableData();var e="welcome="+JSON.stringify(this._PDFData.welcome).replace(/&/g,encodeURIComponent("&"))+"&step1="+JSON.stringify(this._PDFData.step1).replace(/&/g,encodeURIComponent("&"))+"&column1Step2="+JSON.stringify(this.column1Step2).replace(/&/g,encodeURIComponent("&"))+"&column2Step2="+JSON.stringify(this.column2Step2).replace(/&/g,encodeURIComponent("&"))+"&column1Step3="+JSON.stringify(this.column1Step3).replace(/&/g,encodeURIComponent("&"))+"&column2Step3="+JSON.stringify(this.column2Step3).replace(/&/g,encodeURIComponent("&"))+"&step4="+JSON.stringify(this._PDFData.step4).replace(/&/g,encodeURIComponent("&"))+"&isSubmit=true",t=new XMLHttpRequest;t.open("POST","/bin/services/getPdfToSubmit",!0),t.setRequestHeader("Content-type","application/x-www-form-urlencoded"),t.send(e),t.onreadystatechange=function(){4==t.readyState&&(200==t.status&&(this.isSubmitSuccessfull=!1,this.isSubmitFailed=!0,this._$scope.$apply(),this._hidePreloader(),t.response)?(this.PDF=t.response,this.isSubmitFailed=!1,this._$scope.$apply(),this._onFormSubmit()):(this.isSubmitSuccessfull=!1,this.isSubmitFailed=!0,this._$scope.$apply(),this._hidePreloader()))}.bind(this)},s.prototype._onFormSubmit=async function(){this.isSubmitSuccessfull=!1,this.isSubmitFailed=!1,this.getAllFieldValues();var e,t=new FormData,a=this._getStepsAttr()?this.selectedCar.series:this.selectedCar.model,i=$("#recaptchaval").val(),i=decodeURIComponent(i),n=$(".form-recaptcha .input-field input").val(),a=(t.append("firstName",this.userData.firstName),t.append("lastName",this.userData.lastName),t.append("emailAddress",this.userData.email),t.append("Nameplate",a),t.append("dealerEmail",this._getDelaerEmail()),t.append(this._countryCode.name,this._countryCode.value),t.append("strFile",this.PDF),t.append("captchaKey",i),t.append("recaptcha",n),"null"!=this._userGUID?(t.append("GUID",this._userGUID),(e=JSON.parse(this.formSubmitData.formData)).isGUIDSubmitted=!0):sessionStorage.getItem("predeliveryGUID")?(t.append("GUID",sessionStorage.getItem("predeliveryGUID")),(e=JSON.parse(this.formSubmitData.formData)).isGUIDSubmitted=!0):(t.append("GUID",""),(e=JSON.parse(this.formSubmitData.formData)).isGUIDSubmitted=!1),this.formSubmitData.formData=e,t.append("formData",JSON.stringify(this.formSubmitData.formData)),this.isAuthorMode?(t.append(this._emailTemplateId,"https://wwwdev.brandap.ford.com/content/ford/au/en_au/home.edm.PDS.data"),t.append(this._dealerMailTemplate,"https://wwwdev.brandap.ford.com/content/ford/au/en_au/home.edm.PDSD.data"),t.append(this._fordMailTemplate,"https://wwwdev.brandap.ford.com/content/ford/au/en_au/home.edm.PDSF.data")):(t.append(this._emailTemplateId,d("PDS",this.predeliveryPath)),t.append(this._dealerMailTemplate,d("PDSD",this.predeliveryPath)),t.append(this._fordMailTemplate,d("PDSF",this.predeliveryPath))),t.append("fordEmail",$(".your-ford-section").data("ford-mail-id")),Object.fromEntries(t.entries())),i=(a.formData=JSON.parse(a.formData),await this.prepareLinks(this.sendEmailPdfAU));$.ajax({type:"POST",url:i.apiLink,headers:i.header,data:this.isImgSLEnabled?JSON.stringify(a):a,dataType:this.isImgSLEnabled?"json":"application/json",contentType:this.isImgSLEnabled?"application/json; charset=utf-8":"application/x-www-form-urlencoded; charset=UTF-8",async:!1,success:function(e){200==e.status||200==e.returnCode?(this._showToDoSection(),this.isSubmitSuccessfull=!0,this.isSubmitFailed=!1,this._$scope.$apply(),this.clearLocalStorage("all")):(this.isSubmitFailed=!0,this._$scope.$apply())}.bind(this),error:function(){this.isSubmitFailed=!0,this._$scope.$apply()}.bind(this)}),sessionStorage.removeItem("predeliveryGUID"),this._hidePreloader()},s.prototype._showToDoSection=function(){u(),this._scrollTo("body",1e3),this.sections.welcome.active=!1,this.sections.steps.active=!1,this.sections.summary.active=!1,this.sections.todo.active=!0,this._$scope.$apply(),this._changeURL(this.urlsPath.confirmation)},s.prototype._showMessageSection=function(e){this.sections.welcome.active=!1,this.sections.steps.active=!1,this.sections.summary.active=!1,this.sections.message.active=!0,this.messages[e]=!0,u()},s}),define("pre-delivery-manual-form/directives/preDeliveryManualForm.directive.compile",[],function(){return function(n){return function(t,a,i){t.$watch(function(e){return e.$eval(i.compile)},function(e){a.html(e),n(a.contents())(t)})}}}),define("pre-delivery-manual-form/services/preDeliveryManualForm.service.predeliverydata",["dealerlocator/google-maps"],function(u){return function(t,e,r){var l,a={},i=$(".your-ford-section"),n=$(".market-config-data"),o=document.querySelector("[data-key-code]").getAttribute("data-key-code"),s=(a.isGUIDReceivedSuccessfully=!1,a.isGUIDReceivedUnsuccessfully=!1,a.GUIDData="",a.getSessionExpiryTime=function(){return n.data("session-expiry-time")||0},a.getModelsData=function(){return i.data("sectiondata")},a.getDealersData=function(){return $(".dealership-section").data("dealershipdata")},a.getDealersEmails=function(){return $(".dealership-section").data("dealership-email-data")},a.getDealerMailTemplate=function(){return $(".your-ford-section").data("dealer-mail-template-url-variable-id")},a.getFordMailTemplate=function(){return $(".your-ford-section").data("ford-mail-template-url-variable-id")},a.getAPIURL=function(){return $("#serviceLayerUrl").val()},a.getEmailTemplateId=function(){return i.data("mail-template-url-variable-id")},a.getGUID=function(e){a.GUIDData="";var t=a.getAPIURL()+"/fordleads/leads/PreDelivery/loadingInformation";""!=$("#publicDomainEnabled").val()&&(t="/fordleads/leads/PreDelivery/loadingInformation"),$.ajax({type:"POST",url:t,data:{GUID:e},dataType:"json",async:!1,success:function(e){200===e.returnCode?(a.GUIDData=e,a.isGUIDReceivedSuccessfully=!0,a.isGUIDReceivedUnsuccessfully=!1):(a.isGUIDReceivedSuccessfully=!1,a.isGUIDReceivedUnsuccessfully=!0,a.GUIDData="")},error:function(){a.isGUIDReceivedSuccessfully=!1,a.isGUIDReceivedUnsuccessfully=!0,a.GUIDData=""}})},a.getStates=function(){var e=$(".user-postcode"),t="regions-config-json";return e.length&&e.data(t)?e.data(t):""},[]),c=JSON.parse($("#marketPolygonJson").val()),d=(_.each(c,function(e){"polygon"===e.key&&(e=e.value.split("%2C"),_.each(e,function(e){e=e.split("+");s.push({lat:e[1],lng:e[0]})}))}),new u({language:"en_AU",countryCode:"AU",countryCodes:void 0,imagePath:"/etc/designs/guxfoap/clientlibs/guxfoap-dealerlocator/img/dealerlocator/",countryBounds:s,autocompleteCallbackURL:"",autocompleteCallbackName:"",keyCode:o}));return a.initMap=function(e){d&&(l=new d.map(e,{disableBusinessPOI:!0}),t.$broadcast("predeliveryMapApiLoaded"))},a.getAllDealrsList=function(){var n,o=e.defer();return navigator&&!1===navigator.onLine?o.reject("No connection"):(n=r(function(){o.reject("Timed out")},2e4),l.searchDealersByDistance("",void 0,1e3,function(e){if(_.isEmpty(e))l.clearDealers(),r.cancel(n),o.reject("No results found");else{for(var t=[],a=0;a<e.length;a++)t.push(e[a].DealerNameSearch);var i={dealers:e,resultDealers:t};r.cancel(n),o.resolve(i)}},{CountryCode:"AUS",Brand:"Ford"})),o.promise},a}}),define("threesixtyPanoExperience/analytics.threesixtyPanoExperience",["tagging-framework/analyticsDirectCall","tagging-framework/analyticsVariables"],function(i,e){var t,a={},n="",o="",r="",l="",s="",c="",d=e.getPageModelYear(),u=e.getVehicleCategory(),p=e.getPageNameplate();return a.getSettings=function(e){t=e[0].componentName;l=e[0].siteSection;s=(r=l+":"+t)+":"+d+":"+u+":"+p,n=(c=r)+":content action:"+p,o=t+" content"},a.fireInteractionEvents=function(e){var t="",t=void 0!==e&&0<e.length?o+":"+e:o;i.onclick(n,t)},a.fireLoadEvents=function(e){var t="",a="",t=void 0!==e&&0<e.length?(a=r+":"+e+":"+p,c+":"+e):(a=r+":"+p,c);i.genericOverlay(a,l,s,t)},a}),define("threesixtyPanoExperience/component.threesixtyPanoExperience",["jquery","mediaQuery","overlay/component.overlay","utils/getParamValue","threesixtyPanoExperience/analytics.threesixtyPanoExperience","analytics/events/brightcoveVideoEvents"],function(b,e,w,l,C,u){function p(t,a,i){var n={},e=b(t).find(".js-intro-video"),o=(e.attr("id"),t.parents(".js-threesixty")),r=o.find(".js-instructions"),l=o.find(".js-init-panorama"),s=o.find(".js-init-panorama .panorama-images"),c=(r.length,!1),d=!1,r=o.height();n.accountId=e.data("account-id"),n.videoId=k?a.config[0].introVideoMobile:a.config[0].introVideoDesktop,n.playerId="default",n.playerName=e.data("player-name"),e.html(k?'<video width="100%" height="'+r+'" id="'+n.playerName+'" data-video-id="'+n.videoId+'"  data-account="'+n.accountId+'" data-player="'+n.playerId+'" data-embed="default" class="video-js" playsinline preload muted></video>':'<video width="100%" height="'+r+'" id="'+n.playerName+'" data-video-id="'+n.videoId+'"  data-account="'+n.accountId+'" data-player="'+n.playerId+'" data-embed="default" class="video-js" playsinline preload></video>'),require.config({paths:{bc:"//players.brightcove.net/"+n.accountId+"/default_default/index.min"},timeout:30}),require(["bc"],function(e){window.bcinit=e,videojs(n.playerName).ready(function(){var e=S(b(t).width());b(window).trigger("videoloaded"),(f=this).on("loadedmetadata",function(){fordAnalytics.videoName=f.mediainfo.name}),b("#"+n.playerName).height(e),b(window).on("resize",function(){e=S(b(t).width()),b("#"+n.playerName).height(e)}),i&&(f.play(),l.show(500),A(s,a,l,x(),D())),f.on("play",function(){var e=f.mediainfo.duration,t=f.currentTime(),e=(t/e*100).toFixed(2),a=f.isFullscreen()?"video full screen":"video play";C.fireInteractionEvents(a),fordAnalytics.videoName=f.mediainfo.name,u.trackVideoStart(f),25<=Math.floor(e)&&!c&&("undefined"!=typeof digitaldata&&u.trackVideoProgress(f,t),c=!0)}),f.on("timeupdate",function(){var e=f.mediainfo.duration,t=f.currentTime(),e=(t/e*100).toFixed(2);25<=Math.floor(e)&&!c&&("undefined"!=typeof digitaldata&&u.trackVideoProgress(f,t),c=!0),75<=Math.floor(e)&&!d&&("undefined"!=typeof digitaldata&&u.trackVideoProgress(f,t),d=!0)}),f.on("ended",function(){T(t.parent(),a),setTimeout(function(){videojs(n.playerName).dispose()},1e3)})})})}function m(e,t,a){var i=e.find(".js-landing"),n=e.find(".js-intro"),o=e.find(".js-instructions"),r=e.find(".js-init-panorama"),e=e.find(".js-init-panorama .panorama-images"),l=0<n.length,s=0<o.length,n=0<n.find(".js-intro-video").length;i.addClass("hide-layer").hide(500),l&&!s?n&&!a?f.play():C.fireInteractionEvents("gif asset"):!l&&s?(o.show(),C.fireLoadEvents("instruction layer")):l&&s?(n&&!a?f.play():C.fireInteractionEvents("gif asset"),o.show()):l||s||r.removeClass("js-load-in-bg"),r.show(500),A(e,t,r,x(),D())}function t(d){var e=b(d).data("config");b.ajax({type:"GET",dataType:"json",url:e,success:function(y){C.getSettings(y.config),d.css({width:"100%",height:S(d.parents(".page").width())}),d.each(function(){var i=b(this),e=i.find(".js-landing"),t=i.find(".js-intro"),a=i.find(".js-instructions"),v=i.find(".js-init-panorama"),n=i.find(".js-init-panorama .panorama-images"),o=0<e.length,r=0<t.length,l=0<a.length,s=0<v.length,c=0<t.find(".js-intro-video").length;o&&e.hide(),r&&t.hide(),l&&a.hide(),s&&v.hide(),x()&&D()?(C.fireLoadEvents(),o&&e.hide(),r&&t.hide(),l&&a.hide(),s&&(v.show(),A(n,y,v,x(),D())),b(window).on("resize",function(){var e=v.parents(".threesixty-component").width();d.css({width:"100%",height:S(e)}),d.find(".threesixty-container").css({width:"100%",height:S(e)})})):(s&&(o?(e.show(),e.find("a").addClass("js-close-landing"),r&&t.show(),c&&p(t,y,!1)):(v.addClass("js-load-in-bg"),r&&l?(c&&(p(t,y,!0),t.show()),a.show()):r&&!l?(t.show(),c&&p(t,y,!0)):!r&&l?(a.show(),C.fireLoadEvents("instruction layer"),v.show(500),A(n,y,v,x(),D())):r||l||(v.removeClass("js-load-in-bg"),v.show(500),A(n,y,v,x(),D())))),i.find(".js-close-landing").on("click.closeLanding",function(e){e.preventDefault(),C.fireLoadEvents(),v.addClass("js-load-in-bg"),setTimeout(function(){m(i,y,!1)},300)}),i.find(".js-close-landing").on("touchend",function(e){e.preventDefault(),f.play(),C.fireLoadEvents(),v.addClass("js-load-in-bg"),setTimeout(function(){m(i,y,!0)},300)}),i.find(".js-close-intro").on("click.closeIntro",function(e){e.preventDefault(),T(i,y)}),i.find(".js-close-instructions").on("click.closeInstructions",function(e){var t,a;e.preventDefault(),N(v.find(".threesixty-container").first().attr("id"),"1"),t=(e=i).find(".js-instructions"),e=e.find(".js-init-panorama"),a=0<e.length,t.addClass("hide-layer").hide(500),a&&(e.show(),t=e.find(".threesixty-container").first().data("analytics")+":"+D(e.find(".threesixty-container").first()),C.fireLoadEvents(t))})),b(window).on("resize",function(){var e=v.parents(".threesixty-component").width();d.css({width:"100%",height:S(e)}),d.find(".threesixty-container").css({width:"100%",height:S(e)})}),b(window).on("overlayloaded",function(){b(".overlay-container.visible").addClass("js-panorama-overlay-content");var e,t,a,i=v,n=y,o=x(),r=D(),l=n.config,s="",c="",d="",u="",p="",m="",h="",f="",g="";0<b(".js-panorama-overlay-content").length&&0<b(".overlay-navigation").length&&b(".overlay-navigation").remove(),u=P(),n=k?n.mobileframes:n.desktopframes,!1===o&&(o=i.find(".threesixty-container").attr("id")),h=i.find(".threesixty-container").data("analytics"),void 0===r||!1===r?(o=i.find(".hotspots-wrapper .current-image").attr("class"),i=[],e="",t=[],0<o.length&&(i=o.split("frame-"),e=i[i.length-1],t=e.split(" current-image"),r=t[0])):r=D(),b.each(n,function(e,t){t.id===r&&b.each(t.hotspots,function(e,t){t.target===u&&(p=t.hotspotcategory,m=t.title,c=void 0!==t.previous?'<a href="'+t.previous+'.html" class="link-overlay button-previous js-previous-overlay">'+l[0].prevlabel+'<span class="icon icon-chevron-thin-left"></span></a>':"",d=void 0!==t.next?'<a href="'+t.next+'.html" class="link-overlay button-next js-next-overlay">'+l[0].nextlabel+'<span class="icon icon-chevron-thin-right"></span></a>':"",s='<div class="overlay-navigation hide">'+c+d+"</div>")})}),f=h+":"+p+":"+m,C.fireLoadEvents(f),o=p+":"+m,0<b(".js-panorama-overlay-content .overlay-content .js-brightcove-player").length&&(a=b("body"),g=a.hasClass("pano-video")?o+":video play":o+":photo click",C.fireInteractionEvents(g),b(".js-panorama-overlay-content .overlay-content .overlay-close").on("click",function(){a.hasClass("pano-video")&&a.removeClass("pano-video")})),b(window).on("videofullscreen viewImageFullScreen",function(){g=f+":view full screen",C.fireInteractionEvents(g)}),b(".js-panorama-overlay-content .overlay-content").each(function(){b(this).append(s),b(this).find(".accordion-title").hasClass("js-clicked")||b(this).find(".accordion-title").trigger("click").addClass("js-clicked")}),w.overlays[0].addBaseUrl()}),b(window).on("baseUrlsload",function(){0<b(".overlay-navigation").length&&b(".overlay-navigation").removeClass("hide")})})}})}var h,f,a={},k="mobile"===e.getMediaType(),g=function(e,a,t,i){var n,o=0,r=a.$el;e.attr("max",t-1),e.attr("min",0),e.panoslider({polyfill:!1,componentClass:"panoslider",horizontalClass:"panoslider-horizontal",sliderBarClass:"panoslider-bar",draggerClass:"panoslider-dragger",onInit:function(){a.gotoAndPlay(i-1)},onSlide:function(e,t){!1===h?n=0!==t?t:0:n!==o&&(o<n?a.previous():n<o&&a.next(),o=n)},onSlideEnd:function(e,t){a.getNormalizedCurrentFrame()!==t&&(a.gotoAndPlay(t),b(r).hasClass("js-slided")||(t=r.data("analytics")+":frame:slider",C.fireInteractionEvents(t),b(r).addClass("js-slided"))),h=!1}})},S=function(e){return e/((k?375:1438)/(k?375:630))},x=function(e){var t="";return l.byName("hubid")?t=l.byName("hubid"):void 0!==e&&(t=e.data("analytics")),t},D=function(e){var t,a="";return void 0===e&&l.byName("frameid")?a=l.byName("frameid"):void 0!==e&&"number"!=typeof e?a="frame"+(t=e.find(".panorama-images .current-image").attr("class").split("frame-"))[t.length-1].split(" current-image")[0]:"number"==typeof e&&(a="frame"+(e+1)),a},P=function(){var e=window.location.href;if(-1<e.indexOf("#overlay"))return(e=e.split("#overlay"))[e.length-1].split("?")[0]},T=function(e,t){var a=e.find(".js-intro"),i=e.find(".js-instructions"),e=e.find(".js-init-panorama"),i=0<i.length;a.addClass("hide-layer").hide(500),i?C.fireLoadEvents("instruction layer"):(loadEvent=e.find(".threesixty-container").first().data("analytics")+":"+D(e.find(".threesixty-container").first()),C.fireLoadEvents(loadEvent))},N=function(e,t){var a,i=window.location.href,n="",o="",r="";n=1<(n=i.split("?")).length?n[0]:"",o=1<(o=i.split("#")).length?"#"+o[o.length-1]:"",l.byName("bannerid")&&(r+="&bannerid="+l.byName("bannerid")),l.byName("searchid")&&(r+="&searchid="+l.byName("searchid")),l.byName("emailid")&&(r+="&emailid="+l.byName("emailid")),l.byName("memo")&&(r+="&memo="+l.byName("memo")),l.byName("wcmmode")?a=n+"?wcmmode="+l.byName("wcmmode")+"&hubid="+e+"&frameid="+t+r+o:l.byName("wcmmode")||l.byName("hubid")||l.byName("frameid")?!l.byName("wcmmode")&&l.byName("hubid")&&l.byName("frameid")&&(a=n+"?hubid="+e+"&frameid="+t+r+o):a=i+"?hubid="+e+"&frameid="+t+r+o,"function"==typeof window.history.pushState?window.history.pushState(null,null,a):window.location.hash="#!"+a},c=function(o,e,r,l){var s,t=o.find(".panorama-images li").length,a={},c=o.find(".threesixty-container"),i=c.attr("id"),i=b("#"+i),d=c.parents(".threesixty-component").width(),a={totalFrames:t,endFrame:i.data("landing-frame"),currentFrame:1,imgList:".panorama-images",container:".threesixty-container",progress:".spinner",height:S(d),width:d,navigation:!k,hotspots:k?e.mobileframes:e.desktopframes,framerate:24,playSpeed:300,rangeSlider:!0,self:i,configuration:e,onReady:function(){var a,i,t,n=this.self;b.each(this.configuration.config,function(e,t){t.rightarrow=t.rightarrow,t.leftarrow=t.leftarrow,a=void 0!==t.hotspotmarker&&""!==t.hotspotmarker?t.hotspotmarker:"/content/dam/Ford/website-assets/threesixtypano/hotspot.png",i=void 0!==t.arrowOnlick?t.arrowOnlick:"",n.find(".nav-bar-previous").css({backgroundImage:'url("'+t.rightarrow+'")'}),n.find(".nav-bar-next").css({backgroundImage:'url("'+t.leftarrow+'")'})}),this.hotspots&&v(n.find(this.imgList),this.hotspots,a),this.rangeSlider&&(n.find(".spinner").after('<div id="slider-range" class="slider-range-wrapper"><input type="range" value="0" data-panoslider><output></output></div>'),s=n.find('input[type="range"]'),r&&"#"+r===u.$el.selector&&(this.endFrame=parseInt(l)),s.val(this.endFrame-1).change(),g(s,u,this.totalFrames,this.endFrame)),k||n.find(".nav-bar-previous, .nav-bar-next").on("click.panoramaNavigation",function(e){e.preventDefault(),h=!0,s.val(u.getNormalizedCurrentFrame()).change(),b(n).hasClass("js-scrolled")?(t=n.data("analytics")+":"+D(n),C.fireLoadEvents(t)):(e=n.data("analytics")+":frame:"+i,C.fireInteractionEvents(e),b(n).addClass("js-scrolled"),b(n).removeClass("js-mute-scroll"))}),n.hasClass("panoloaded")&&N(b(n).attr("id"),l),b(window).on("swipestop",function(){var e;b(n).hasClass("js-swiped")||(e=n.data("analytics")+":frame:swipe",C.fireInteractionEvents(e),b(n).addClass("js-swiped"))}),b(window).on("playedpano",function(){var e,t="";o.hasClass("js-load-in-bg")||(n.hasClass("js-mute-scroll")||(e=n.data("analytics")+":"+D(n),C.fireLoadEvents(e)),o.addClass("js-load-in-bg")),e=(t=(t=D(n)).split("frame"))[t.length-1],N(b(n).attr("id"),e)}),c.parents(".threesixty-component").css({width:"100%",height:S(d)})},onDragStart:function(){var e=this.self;b(e).addClass("js-mute-scroll")},onDragStop:function(){var e=this.self;b(window).on("frameIndexChanged",function(){s=e.find('input[type="range"]'),h=!0,s.val(u.getNormalizedCurrentFrame()).change()})}},u=(1===i.data("total-frames")&&(a.rangeSlider=!1,a.navigation=!1,a.onReady=function(){var e=this.self.find(this.imgList);this.hotspots&&v(e,this.hotspots,hotspotmarker),e.find(".previous-image").addClass("current-image").removeClass("previous-image")}),i.panoRotate(a));b(window).on("resize",function(){var e;0<c.length&&(e=c.parent().width(),c.css({width:"100%",height:S(e)}),c.parents(".threesixty-component").css({width:"100%",height:S(e)}))})},A=function(e,a,i,n,o){var r,l,s=b(e);void 0!==a.frameImageRenditions&&(l=a.frameImageRenditions.length,b.each(a.frameImageRenditions,function(e,t){r='<li><picture><source srcset="'+t.renditions[0].path+'" media="(min-width: 1200px)"><source srcset="'+t.renditions[1].path+'" media="(min-width: 992px)"><source srcset="'+t.renditions[2].path+'" media="(min-width: 768px)"><source srcset="'+t.renditions[3].path+'" media="(min-width: 480px)"><source srcset="'+t.renditions[4].path+'" media="(min-width: 0px)"><img src="'+t.renditions[0].path+'"></picture></li>',s.append(r),e===l-1&&c(i,a,n,o)}))},v=function(e,t,o){e.find("li").length;var a,i=b('<ol class="hotspots-wrapper"></ol>'),r=(b("<li></li>"),e.parents(".threesixty-container").attr("id"));e.find("li").each(function(e){var t=b(this).attr("class");a=b('<li class="'+t+'"></li>'),i.append(a)}),i.find("li").each(function(){var a,i=b(this),n="";b.each(t,function(e,t){i.hasClass("js-"+r+"-"+t.id)&&0<t.hotspots.length&&b.each(t.hotspots,function(e,t){a=void 0!==t.hoverLabel&&0<t.hoverLabel.length?'<div class="hotspot-label"><span class="hotspot-label-text">'+t.hoverLabel+"</span></div>":"",0<o.length&&(n='<img src="'+o+'">'),i.prepend('<a class="hotspot link-overlay js-panorama-overlay" href="'+t.target+'" style="bottom:'+t.bottom+"%; left:"+t.left+'%;">'+n+'<div class="pulse-1"></div>'+a+"</a>")})})}),i.find(".hotspot").on("click",function(){var e=b("body");e.hasClass("pano-video")||e.addClass("pano-video")}),e.parents(".threesixty-component-experience").prepend(i),w.overlays[0].addBaseUrl()};return a.init=function(e){t(e)},a}),(r=>{r.panoRotate=function(e,t){var n,o=this,a=[];o.$el=r(e),o.el=e,o.$el.data("panoRotate",o),o.init=function(){(n=r.extend({},r.panoRotate.defaultSettings,t)).disableSpin&&(n.currentFrame=1,n.endFrame=1),o.initProgress(),o.loadImages()},o.initProgress=function(){o.$el.css({width:n.width+"px",height:n.height+"px","background-image":"none !important"}),n.styles&&o.$el.css(n.styles),o.windowResized(),o.$el.find(n.progress).css({marginTop:n.height/2-15+"px"}),o.$el.find(n.progress).fadeIn("slow"),o.$el.find(n.imgList).hide()},o.loadImages=function(){var e=o.$el.find(n.imgList),t=e.parents(n.container).attr("id");e.find("li").each(function(e){r(this).addClass("js-"+t+"-"+(e+1)).addClass("frame-"+(e+1)).addClass("previous-image"),a.push(r(this))}),o.imageLoaded()},o.imageLoaded=function(){n.loadedImages+=1,r(n.progress+" span").text(Math.floor(n.loadedImages/n.totalFrames*100)+"%"),n.loadedImages>=n.totalFrames?(n.disableSpin&&a[0].removeClass("previous-image").addClass("current-image"),r(n.progress).fadeOut("slow",function(){r(this).hide(),o.showImages(),o.showNavigation()})):o.loadImages()},o.showImages=function(){o.$el.find(".txtC").fadeIn(),o.ready=!0,n.ready=!0,n.drag&&o.initEvents(),o.refresh(),n.navigation||n.onReady(),setTimeout(function(){o.windowResized()},50)},o.showNavigation=function(){var e,t,a,i;n.navigation&&!n.navigation_init&&(e=r("<div/>").attr("class","nav-bar"),t=r("<span/>").attr({class:"nav-bar-next"}).html("next"),a=r("<span/>").attr({class:"nav-bar-previous"}).html("previous"),i=r("<a/>").attr({href:"#",class:"nav-bar-play"}).html("play"),e.append(a),e.append(i),e.append(t),o.$el.prepend(e),t.bind("mousedown touchstart",o.next),a.bind("mousedown touchstart",o.previous),i.bind("mousedown touchstart",o.play_stop),n.navigation_init=!0,n.onReady())},o.play_stop=function(e){e.preventDefault(),n.autoplay?(n.autoplay=!1,r(e.currentTarget).removeClass("nav_bar_stop").addClass("nav_bar_play"),clearInterval(n.play),n.play=null):(n.autoplay=!0,n.play=setInterval(o.moveToNextFrame,n.playSpeed),r(e.currentTarget).removeClass("nav_bar_play").addClass("nav_bar_stop"))},o.next=function(e){e&&e.preventDefault(),--n.endFrame,o.refresh()},o.previous=function(e){e&&e.preventDefault(),n.endFrame+=1,o.refresh()},o.play=function(e,t){e=e||n.playSpeed,t=t||n.autoplayDirection;n.autoplayDirection=t,n.autoplay||(n.autoplay=!0,n.play=setInterval(o.moveToNextFrame,e))},o.stop=function(){n.autoplay&&(n.autoplay=!1,clearInterval(n.play),n.play=null)},o.moveToNextFrame=function(){1===n.autoplayDirection?--n.endFrame:n.endFrame+=1,o.refresh()},o.gotoAndPlay=function(e){var t,a,i;n.disableWrap?(n.endFrame=e,o.refresh()):(t=1<(t=0===(t=Math.ceil(n.endFrame/n.totalFrames))?1:t)?n.endFrame-(t-1)*n.totalFrames:n.endFrame,a=n.totalFrames-t,i=(i=0)<e-t?e-t<t+(n.totalFrames-e)?n.endFrame+(e-t):n.endFrame-(t+(n.totalFrames-e)):t-e<a+e?n.endFrame-(t-e):n.endFrame+(a+e),t!==e&&(n.endFrame=i,o.refresh()))},o.initEvents=function(){var t=0;o.$el.find(".panorama-images").bind("mousedown touchstart touchmove touchend mousemove click",function(e){e.preventDefault(),"mousedown"===e.type&&1===e.which||"touchstart"===e.type?(n.pointerStartPosX=o.getPointerEvent(e).pageX,n.dragging=!0,n.onDragStart(n.currentFrame),t=n.currentFrame):"touchmove"===e.type?o.trackCursor(e):"touchend"===e.type&&(n.dragging=!1,n.onDragStop(n.endFrame),t!==n.endFrame)&&r(this).trigger("swipestop")}),o.$el.find(".panorama-images").bind("mouseup",function(e){n.dragging=!1,n.onDragStop(n.endFrame),r(this).css("cursor","default"),t!==n.endFrame&&r(this).trigger("swipestop")}),r(window).bind("resize",function(e){o.windowResized()}),r(document).bind("mousemove",function(e){n.dragging?(e.preventDefault(),!o.browser.isIE&&n.showCursor&&o.$el.css({cursor:"-webkit-grabbing"})):!o.browser.isIE&&n.showCursor&&o.$el.css({cursor:"-webkit-grab"}),o.trackCursor(e)}),r(window).resize(function(){o.resize()})},o.getPointerEvent=function(e){return e.originalEvent.targetTouches?e.originalEvent.targetTouches[0]:e},o.trackCursor=function(e){n.ready&&n.dragging&&(n.currentFrame,n.pointerEndPosX=o.getPointerEvent(e).pageX,n.monitorStartTime<(new Date).getTime()-n.monitorInt)&&(n.pointerDistance=n.pointerEndPosX-n.pointerStartPosX,0<n.pointerDistance?n.endFrame=n.currentFrame+Math.ceil((n.totalFrames-1)*n.speedMultiplier*(n.pointerDistance/o.$el.width())):n.endFrame=n.currentFrame+Math.floor((n.totalFrames-1)*n.speedMultiplier*(n.pointerDistance/o.$el.width())),n.disableWrap&&(n.endFrame=Math.min(n.totalFrames-(n.zerocomponentd?1:0),n.endFrame),n.endFrame=Math.max(n.zerocomponentd?0:1,n.endFrame)),o.refresh(),n.monitorStartTime=(new Date).getTime(),n.pointerStartPosX=o.getPointerEvent(e).pageX)},o.refresh=function(){0===n.ticker&&(n.ticker=setInterval(o.render,Math.round(1e3/n.framerate)))},o.render=function(){var e;n.currentFrame!==n.endFrame?(e=n.endFrame<n.currentFrame?Math.floor(.1*(n.endFrame-n.currentFrame)):Math.ceil(.1*(n.endFrame-n.currentFrame)),o.hidePreviousFrame(),n.currentFrame+=e,o.showCurrentFrame(),setTimeout(function(){o.$el.trigger("frameIndexChanged",[o.getNormalizedCurrentFrame(),n.totalFrames])},500)):(window.clearInterval(n.ticker),n.ticker=0,o.showCurrentFrame(),o.$el.find(n.imgList).fadeIn(),setTimeout(function(){o.$el.trigger("frameIndexChanged"),o.$el.hasClass("panoloaded")||o.$el.addClass("panoloaded"),o.$el.trigger("playedpano")},500))},o.hidePreviousFrame=function(){var e=o.$el.find(n.imgList).parents(n.container).attr("id"),t=o.getNormalizedCurrentFrame();a[o.getNormalizedCurrentFrame()].removeClass("current-image").addClass("previous-image"),o.$el.parent().find(".hotspots-wrapper").find("li.js-"+e+"-"+(t+1)).removeClass("current-image").addClass("previous-image")},o.showCurrentFrame=function(){var e=o.$el.find(n.imgList).parents(n.container).attr("id"),t=o.getNormalizedCurrentFrame();a[o.getNormalizedCurrentFrame()].removeClass("previous-image").addClass("current-image"),o.$el.parent().find(".hotspots-wrapper").find("li.js-"+e+"-"+(t+1)).removeClass("previous-image").addClass("current-image")},o.getNormalizedCurrentFrame=function(){var e,t;return n.disableWrap?(e=Math.min(n.currentFrame,n.totalFrames-(n.zerocomponentd?1:0)),t=Math.min(n.endFrame,n.totalFrames-(n.zerocomponentd?1:0)),e=Math.max(e,n.zerocomponentd?0:1),t=Math.max(t,n.zerocomponentd?0:1),n.currentFrame=e,n.endFrame=t):(e=Math.ceil(n.currentFrame%n.totalFrames))<0&&(e+=n.totalFrames-(n.zerocomponentd?1:0)),e},o.getCurrentFrame=function(){return n.currentFrame},o.windowResized=function(){n.windowResized&&o.$el.css({height:o.$el.find(".current-image").first().css("height"),width:"100%"})},o.zeroPad=function(e){var t=Math.log(n.totalFrames)/Math.LN10,t=Math.round(1e3*t)/1e3,a=Math.floor(t)+1,i=e.toString();if(n.zeroPadding)for(;i.length<a;)i="0"+i;return i},o.browser={},o.browser.isIE=function(){var e,t=-1;return-1!==(t="Microsoft Internet Explorer"===navigator.appName&&(e=navigator.userAgent,null!==new RegExp("MSIE ([0-9]{1,}[\\.0-9]{0,})").exec(e))?parseFloat(RegExp.$1):t)},r.panoRotate.defaultSettings={dragging:!1,ready:!1,pointerStartPosX:0,pointerEndPosX:0,pointerDistance:0,monitorStartTime:0,monitorInt:10,ticker:0,speedMultiplier:7,totalFrames:180,currentFrame:0,endFrame:0,loadedImages:0,framerate:60,domains:null,domain:"",parallel:!1,queueAmount:8,idle:0,filePrefix:"",ext:"png",height:300,width:300,styles:{},navigation:!1,autoplay:!1,autoplayDirection:1,disableSpin:!1,disableWrap:!1,windowResized:!1,zeroPadding:!1,zerocomponentd:!1,plugins:[],showCursor:!1,drag:!0,onReady:function(){},onDragStart:function(){},onDragStop:function(){},imgList:".panorama-images",container:".panorama-container",imgArray:null,playSpeed:100},o.init()},r.fn.panoRotate=function(e){return Object.create(new r.panoRotate(this,e))}})(jQuery),"function"!=typeof Object.create&&(Object.create=function(e){function t(){}return t.prototype=e,new t}),(o=>{Number.isNaN=Number.isNaN||function(e){return"number"==typeof e&&e!=e};var e,r="panoslider",l=0,s=((e=document.createElement("input")).setAttribute("type","range"),"text"!==e.type),c={polyfill:!0,orientation:"horizontal",componentClass:"panoslider",disabledClass:"panoslider-disabled",activeClass:"panoslider-active",horizontalClass:"panoslider-horizontal",verticalClass:"panoslider-vertical",sliderBarClass:"panoslider-bar",draggerClass:"panoslider-dragger",startEvent:["mousedown","touchstart","pointerdown"],moveEvent:["mousemove","touchmove","pointermove"],endEvent:["mouseup","touchend","pointerup"]},d={orientation:{horizontal:{dimension:"width",direction:"left",directionStyle:"left",coordinate:"x"},vertical:{dimension:"height",direction:"top",directionStyle:"bottom",coordinate:"y"}}};function a(e,t){var a=(e=>{for(var t,a=[],i=e.parentNode;(t=i)&&(0===t.offsetWidth||0===t.offsetHeight||!1===t.open);)a.push(i),i=i.parentNode;return a})(e),i=a.length,n=[],o=e[t];function r(e){void 0!==e.open&&(e.open=!e.open)}if(i){for(var l=0;l<i;l++)n[l]=a[l].style.cssText,a[l].style.setProperty?a[l].style.setProperty("display","block","important"):a[l].style.cssText+=";display: block !important",a[l].style.height="0",a[l].style.overflow="hidden",a[l].style.visibility="hidden",r(a[l]);for(var o=e[t],s=0;s<i;s++)a[s].style.cssText=n[s],r(a[s])}return o}function i(e,t){e=parseFloat(e);return Number.isNaN(e)?t:e}function n(e){return e.charAt(0).toUpperCase()+e.substr(1)}function u(e,t){if(this.$window=o(window),this.$document=o(document),this.$element=o(e),this.options=o.extend({},c,t),this.polyfill=this.options.polyfill,this.orientation=this.$element[0].getAttribute("data-orientation")||this.options.orientation,this.onInit=this.options.onInit,this.onSlide=this.options.onSlide,this.onSlideEnd=this.options.onSlideEnd,this.DIMENSION=d.orientation[this.orientation].dimension,this.DIRECTION=d.orientation[this.orientation].direction,this.DIRECTION_STYLE=d.orientation[this.orientation].directionStyle,this.COORDINATE=d.orientation[this.orientation].coordinate,this.polyfill&&s)return!1;this.identifier="js-"+r+"-"+l++,this.startEvent=this.options.startEvent.join("."+this.identifier+" ")+"."+this.identifier,this.moveEvent=this.options.moveEvent.join("."+this.identifier+" ")+"."+this.identifier,this.endEvent=this.options.endEvent.join("."+this.identifier+" ")+"."+this.identifier,this.toFixed=(this.step+"").replace(".","").length-1,this.$bar=o('<div class="'+this.options.sliderBarClass+'" />'),this.$dragger=o('<div class="'+this.options.draggerClass+'" />'),this.$component=o('<div class="'+this.options.componentClass+" "+this.options[this.orientation+"Class"]+'" id="'+this.identifier+'" />').insertAfter(this.$element).prepend(this.$bar,this.$dragger),this.$element.css({position:"absolute",width:"1px",height:"1px",overflow:"hidden",opacity:"0"}),this.dragDown=o.proxy(this.dragDown,this),this.dragMove=o.proxy(this.dragMove,this),this.dragEnd=o.proxy(this.dragEnd,this),this.init();var a,i,n=this;this.$window.on("resize."+this.identifier,(a=function(){!function(e,t){var a=Array.prototype.slice.call(arguments,2);setTimeout(function(){return e.apply(null,a)},t)}(function(){n.update(!1,!1)},300)},i=(i=20)||100,function(){var e;return a.debouncing||(e=Array.prototype.slice.apply(arguments),a.lastReturnVal=a.apply(window,e),a.debouncing=!0),clearTimeout(a.debounceTimeout),a.debounceTimeout=setTimeout(function(){a.debouncing=!1},i),a.lastReturnVal})),this.$document.on(this.startEvent,"#"+this.identifier+":not(."+this.options.disabledClass+")",this.dragDown),this.$element.on("change."+this.identifier,function(e,t){t&&t.origin===n.identifier||(t=e.target.value,e=n.getPositionFromValue(t),n.setPosition(e))})}u.prototype.init=function(){this.update(!0,!1),this.onInit&&"function"==typeof this.onInit&&this.onInit()},u.prototype.update=function(e,t){(e=e||!1)&&(this.min=i(this.$element[0].getAttribute("min"),0),this.max=i(this.$element[0].getAttribute("max"),100),this.value=i(this.$element[0].value,Math.round(this.min+(this.max-this.min)/2)),this.step=i(this.$element[0].getAttribute("step"),1)),this.draggerDimension=a(this.$dragger[0],"offset"+n(this.DIMENSION)),this.barDimension=a(this.$component[0],"offset"+n(this.DIMENSION)),this.maxDraggerPos=this.barDimension-this.draggerDimension,this.grabPos=this.draggerDimension/2,this.position=this.getPositionFromValue(this.value),this.$element[0].disabled?this.$component.addClass(this.options.disabledClass):this.$component.removeClass(this.options.disabledClass),this.setPosition(this.position,t)},u.prototype.dragDown=function(e){var t,a;e.preventDefault(),this.$document.on(this.moveEvent,this.dragMove),this.$document.on(this.endEvent,this.dragEnd),this.$component.addClass(this.options.activeClass),-1<(" "+e.target.className+" ").replace(/[\n\t]/g," ").indexOf(this.options.draggerClass)||(e=this.getRelativePosition(e),t=this.$component[0].getBoundingClientRect()[this.DIRECTION],t=this.getPositionFromNode(this.$dragger[0])-t,a="vertical"===this.orientation?this.maxDraggerPos-(e-this.grabPos):e-this.grabPos,this.setPosition(a),t<=e&&e<t+this.draggerDimension&&(this.grabPos=e-t))},u.prototype.dragMove=function(e){e.preventDefault();e=this.getRelativePosition(e),e="vertical"===this.orientation?this.maxDraggerPos-(e-this.grabPos):e-this.grabPos;this.setPosition(e)},u.prototype.dragEnd=function(e){e.preventDefault(),this.$document.off(this.moveEvent,this.dragMove),this.$document.off(this.endEvent,this.dragEnd),this.$component.removeClass(this.options.activeClass),this.$element.trigger("change",{origin:this.identifier}),this.onSlideEnd&&"function"==typeof this.onSlideEnd&&this.onSlideEnd(this.position,this.value)},u.prototype.cap=function(e,t,a){return e<t?t:a<e?a:e},u.prototype.setPosition=function(e,t){var a;void 0===t&&(t=!0),e=this.getValueFromPosition(this.cap(e,0,this.maxDraggerPos)),a=this.getPositionFromValue(e),this.$bar[0].style[this.DIMENSION]=a+this.grabPos+"px",this.$dragger[0].style[this.DIRECTION_STYLE]=a+"px",this.setValue(e),this.position=a,this.value=e,t&&this.onSlide&&"function"==typeof this.onSlide&&this.onSlide(a,e)},u.prototype.getPositionFromNode=function(e){for(var t=0;null!==e;)t+=e.offsetLeft,e=e.offsetParent;return t},u.prototype.getRelativePosition=function(e){var t=n(this.COORDINATE),a=this.$component[0].getBoundingClientRect()[this.DIRECTION],i=0;return void 0!==e.originalEvent["client"+t]?i=e.originalEvent["client"+t]:e.originalEvent.touches&&e.originalEvent.touches[0]&&void 0!==e.originalEvent.touches[0]["client"+t]?i=e.originalEvent.touches[0]["client"+t]:e.currentPoint&&void 0!==e.currentPoint[this.COORDINATE]&&(i=e.currentPoint[this.COORDINATE]),i-a},u.prototype.getPositionFromValue=function(e){e=(e-this.min)/(this.max-this.min);return Number.isNaN(e)?0:e*this.maxDraggerPos},u.prototype.getValueFromPosition=function(e){e/=this.maxDraggerPos||1,e=this.step*Math.round(e*(this.max-this.min)/this.step)+this.min;return Number(e.toFixed(this.toFixed))},u.prototype.setValue=function(e){e===this.value&&""!==this.$element[0].value||this.$element.val(e).trigger("input",{origin:this.identifier})},u.prototype.destroy=function(){this.$document.off("."+this.identifier),this.$window.off("."+this.identifier),this.$element.off("."+this.identifier).removeAttr("style").removeData("plugin_"+r),this.$component&&this.$component.length&&this.$component[0].parentNode.removeChild(this.$component[0])},o.fn[r]=function(a){var i=Array.prototype.slice.call(arguments,1);return this.each(function(){var e=o(this),t=e.data("plugin_"+r);t||e.data("plugin_"+r,t=new u(this,a)),"string"==typeof a&&t[a].apply(t,i)})}})(jQuery),define("pre-delivery-manual-data-form/component.preDeliveryManualForm.app",["angular"],function(e){return e.module("preDeliveryManualDataForm",["ngSanitize"])}),define("pre-delivery-manual-data-form/component.preDeliveryManualForm.controllers",["pre-delivery-manual-data-form/component.preDeliveryManualForm.app","pre-delivery-manual-data-form/controllers/preDeliveryManualForm.controller.main"],function(e,t){e.controller("MainCtrl",["$scope","$sce","$http","preDeliveryDataFormService",t])}),define("pre-delivery-manual-data-form/component.preDeliveryManualForm.directives",["pre-delivery-manual-data-form/component.preDeliveryManualForm.app","pre-delivery-manual-data-form/directives/preDeliveryManualForm.directive.compile"],function(e,t){e.directive("compile",["$compile",t])}),define("pre-delivery-manual-data-form/component.preDeliveryManualForm",["jquery","angular","analytics/analyticsEventLayer","marketConfigGlobal","pre-delivery-manual-data-form/component.preDeliveryManualForm.app","pre-delivery-manual-data-form/component.preDeliveryManualForm.controllers","pre-delivery-manual-data-form/component.preDeliveryManualForm.directives","pre-delivery-manual-data-form/component.preDeliveryManualForm.services","analytics/analyticsUtilities"],function(c,t,e,n){var a={};function o(){window.onscroll=function(){for(var s=new Array,e=(c(".zebraChartTile-table").each(function(e){var t=e,a="addedHead"+String(t);if(0==c("#"+a).length){var i=new Array,n=c(".zebraChartTile-table").eq(t).find("thead").eq(0).find("th").length,o=c(".zebraChartTile-table").eq(t).find("thead").eq(0).height();if(0!=o){for(var r=0;r<n;r++)i.push(c(".zebraChartTile-table").eq(t).find("thead").eq(0).find("th").eq(r).width());var l=c(".zebraChartTile-table").eq(t).find("thead").eq(0).clone();l.css({position:"fixed",top:0,display:"none",background:"white",height:o}),l.attr("id",a),c(".zebraChartTile-table").eq(t).append(l);for(r=0;r<i.length;r++)c("#"+a).find("th").eq(r).width(i[r])}}s.push(Math.ceil(c(".zebraChartTile-table").eq(e).find("thead").eq(0).offset().top))}),c(window).scrollTop()),t=0;t<s.length;t++)e>s[t]&&c(".zebraChartTile-table").eq(t).height()+s[t]>e+70?c("#addedHead"+t).css("display","block"):c("#addedHead"+t).css("display","none")}}function l(){var e,n=new Array,o=new Array,t=new Object;c(".welcome-section").find("input").each(function(e,t){var t=c(t),a=t.attr("id"),i=t.parent().parent().parent().parent().parent();return-1!=i.attr("class").indexOf("user-date")?(o.push(i.attr("class")),n.push(t.val()),!0):a?-1!=t.attr("id").indexOf("search")||(-1!=t.attr("id").indexOf("s2id")?(t.parents(".select2-container").select2("data")&&n.push(t.parents(".select2-container").select2("data").id),t.parent().attr("id")&&o.push(t.parent().attr("id")),!0):void 0):t.attr("name")?(n.push(t.val()),o.push(t.attr("name")),!0):(n.push(t.val()),void o.push(t.parent().parent().parent().parent().parent().attr("class")))}),localStorage.enterSetup&&(e=JSON.parse(localStorage.enterSetup)).colorPic&&(o.push("colorPic"),n.push(e.colorPic));for(var a=0;a<o.length;a++)o[a]&&(t[o[a]]=n[a]);t=JSON.stringify(t),localStorage.enterSetup=t,localStorage.latestUrl=window.location.pathname}return a.init=function(){var e,r;function i(e){return e<10?"0"+e:e}c(".preDeliveryManualDataForm").length&&((e=c(".footer")).find(".search.footer-search").remove(),e.find(".footer-links").remove(),e.find(".footer-middle").hide(),e.find(".footer-bottom .footer-bottom-assistance").remove()),digitaldata.page.pageName="ford owners:predelivery:welcome",digitaldata.page.siteSection="owners",digitaldata.page.hierarchy="owners:ford owner:owners:predelivery",digitaldata.page.pageNameNoVehicle="ford owners:predelivery:welcome",digitaldata.page.variantName="global-load",o(),c("#modelTrain").val()&&(localStorage.latestUrl&&localStorage.latestUrl!=window.location.pathname&&(localStorage.removeItem("enterSetup"),localStorage.removeItem("step12Setup"),localStorage.removeItem("step3Setup")),localStorage.enterSetup||l(),r=JSON.parse(localStorage.enterSetup),c(".welcome-section").find("input").each(function(e,t){var a,i,n=c(t),t=n.attr("id"),o=n.parent().parent().parent().parent().parent();if(-1!=o.attr("class").indexOf("user-date"))return r[o.attr("class")]&&setTimeout(function(){n.val(r[o.attr("class")]).change()},1),n.change(l),!0;t?n.parent().attr("id")&&!isNaN(n.parent().attr("id").indexOf("autogen"))&&-1!=n.parent().attr("id").indexOf("autogen")?(r[n.parent().attr("id")]&&n.parent().next().select2("val",r[n.parent().attr("id")]).change(),n.parent().next().change(l)):n.parent().attr("id")&&(a="#"+n.parent().attr("id").substring(5),(i=r[n.parent().attr("id")])&&setTimeout(function(){var e=new Array;n.parent().next().find("option").each(function(){c(this).val()&&e.push(c(this).val())}),-1!=c.inArray(i,e)&&c(a).select2("val",i).change()},1),c(a).change(l)):(n.attr("name")?r[n.attr("name")]&&n.val(r[n.attr("name")]).change():(t=n.parent().parent().parent().parent().parent(),r[t.attr("class")]&&n.val(r[t.attr("class")]).change()),n.change(l))}),setTimeout(function(){var e,t,a;c(".user-date1").length&&!(e=c(".user-date1").find("input").eq(0)).val()&&((t=new Date).setDate(t.getDate()+2),a="nz"===n.getCurrentMarketCode()?(a=i(t.getDate())+"/",(a+=i(t.getMonth()+1)+"/")+t.getFullYear()):(a=i(t.getMonth()+1)+"/",(a+=i(t.getDate())+"/")+t.getFullYear()),e.val(a).change())},100)),setTimeout(function(){var a=JSON.parse(localStorage.enterSetup);a.colorPic&&c(".form-group-input #colorPic").length&&c(".form-group-input #colorPic").find("img").each(function(e,t){t=c(t);t.attr("alt")==a.colorPic&&t.click()})},300),c(".preDeliveryManualForm .homeBillboard").each(function(e,t){!(t=c(t)).find(".billboard-paragraph").text().trim()&&window.innerWidth<768&&c(t).hide()}),t.bootstrap(document,["preDeliveryManualDataForm"])},a}),define("pre-delivery-manual-data-form/component.preDeliveryManualForm.services",["pre-delivery-manual-data-form/component.preDeliveryManualForm.app","pre-delivery-manual-data-form/services/preDeliveryManualForm.service.predeliverydata"],function(e,t){e.service("preDeliveryDataFormService",[t])}),define("pre-delivery-manual-data-form/controllers/preDeliveryManualForm.controller.main",["tooltip-gux/global.ux.tooltip","form/component.form.validation","overlay/component.overlay","analytics/analyticsEventLayer","mediaQuery","marketConfigGlobal","form/component.form.recaptcha"],function(n,o,r,i,y,b,e,t){function a(e,t,a,i){this._guxTooltip=n,this._formValidation=o,this._overlay=r,this._$scope=e,this._sce=t,this._$http=a,this._preDeliveryData=i,this.dmsdata="",$("#modelTrain").val()?this.models=(e=>{var t=e;if(void 0!==t&&0<t.length)for(var a=0;a<t.length;a++){var i=t[a].seriesList;t[a].seriesList=((e,t)=>{for(var a=[],i={},n=0;n<e.length;n++)void 0===i[e[n][t]]&&(i[e[n][t]]=e[n][t],a.push(e[n]));return a})(i,"seriesValue")}return t})(i.getModelsData()):this.models=i.getModelsData(),this.colorVdmKeys=$(".your-ford-section").data("colorvdmkey"),this.featureWalkThroughTime=$(".your-ford-section").data("featurewalkthroughtime"),this.featureWalkThroughTimeUnit=$("#featureWalkThroughTimeUnit").val();this.dealers=i.getDealersData();this.province=$(".dealeraddress-section").data("dealeraddressdata"),this._API=i.getAPIURL(),this._emailTemplateId=i.getEmailTemplateId(),this._dealerMailTemplate=this._preDeliveryData.getDealerMailTemplate(),this._fordMailTemplate=this._preDeliveryData.getFordMailTemplate(),this._userStoredData={},this.userData={title:"",firstName:"",lastName:"",email:"",contactNumber:"",addr1:"",addr2:"",suburb:"",postCode:"",state:"",phone:"",climateControl:"",deliverydate:"",dealeremail:"",dealerlocation:"",dealerAddress:"",VinFGE:""},this.carModel="",this._oldModel="",this.carImg="",this.xmldata="",this.selectedCarSeries="",this._oldSeries="",this.carSeriesList={},this.isSeriesDropdownDisabled=!0,this.isOptionsReady=!1,this.preferredTime=!0,this.selectedColor="",this.carColorsList={},this.isColorDropdownDisabled=!0,this.isPreviewReady=!1,this._isModelChanged=!1,this._isSeriesChanged=!1,this.dealerState="",this.dealersList=[],this.dealerProvince="",this.dealerKhetAmphoe="",this.dealerName="",this.KhetAmphoeList=[],this.DealerNameList=[],this.dealerAddressList=[],this.isDealerKhetAmphoeDropdownDisabled=!0,this.isDealernameDropdownDisabled=!0,this.isDealerAddressDropdownDisabled=!0,this.selectedCar={},this.vinCode="",this.dealerShip="",this.optionsList=[],this.selectedOptionsList=[],this.isDealerShipDropdownDisabled=!0,this.radioSections=[],this.walkThroughTime=0,this._$body=$("body"),this._$model=$("#select-model"),this._$series=$("#select-series"),this._$color=$("#select-color"),this._$userTitle=$(".user-title select"),this._$firstName=$(".user-first-name input"),this._$middleName=$(".user-middle-name input"),this._$lastName=$(".user-last-name input"),this._$email=$(".user-email input"),this._$contactNumber=$(".user-contact-number input"),this._$addr1=$(".user-addr1 input"),this._$addr2=$(".user-addr2 input"),this._$suburb=$(".user-suburb input"),this._$postCode=$(".user-postcode input"),this._$state=$(".user-state select"),this._$VINCode=$(".vinData input"),this._$dealerState=$("#select-dealership"),this._$dealer=$("#select-dealer"),this._$content=$(".content"),this._$deliverydate=$(".PrepreredDeliveryDate input"),this._$dealerlocation=$(".dealerlocation input"),this.sections={welcome:{active:!this._userStep},steps:{active:!!this._userStep},summary:{active:!1},todo:{active:!1},message:{active:!1}},this.stations={fm:[],am:[]},this.userAddresses={addr1:"",addr2:""},this.lighting="",this.userNotes="",this.isSummaryInnerReady=!1,this.step1HTML="",this.step2HTML="",this.step3HTML="",this.step4part1="",this.step4part2="",this.emailnumber=[],this.formSubmitData=null,this.optionPack=[],this.isSaveSuccessfull=!1,this.isSaveFailed=!1,this.PDF="",this.isSubmitSuccessfull=!1,this.isSubmitFailed=!1,this.isStepsSectionReady=!1,this._href=window.location.href,this.dealerCodeEmailList=i.getDealerCodeEmailData(),this._oldCar="",this.xmlpdfData="",this.isAuthorMode=Boolean(this._$body.find(".author-only-placeholder").length),this._countryCode={name:"countryCodeISO3",value:$("#countryCodeISO").val()},this.messages={submittedGUID:!1,wrongGUID:!1},this._states=this._preDeliveryData.getStates(),this._userStep=parseInt(this._getParameterByName("step")),this._userGUID=String(this._getParameterByName("id")),this.steps={count:document.querySelectorAll(".predelivery-step").length,activeStep:this._userStep||1},this._userStep&&this._userGUID?this._getDataByGUID():this._getParameterByName("id")&&this._getParameterByName("step")||-1===window.location.search.indexOf("-")||(this._showMessageSection("wrongGUID"),this.steps.activeStep=1,this._hidePreloader()),this.captchaStatus={isSuccess:!1,isFailed:!1,isInvalid:!1,isTimeot:!1},this._init(),this._existDataForm()}function p(e){return-1!=e.search(/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/)}function w(e){return e<10?"0"+e:e}function C(){$("select.select2-offscreen").each(function(e,t){t=$(t).find("option:first");""==t.attr("value")&&t.attr("disabled","disabled")})}function l(e){""==$("#"+e).find("option:first").text()&&$("#"+e).find("option:first").detach(),$("#"+e).siblings("div").find("span.select2-chosen").text($("#"+e).find("option:first").text())}function k(e,t,a){for(var i=0;i<e.length;i++){if(e[i].modelCode==t&&1==a)return e[i].modelKey;if(e[i].seriesCode==t&&2==a)return e[i].seriesKey;if(e[i].entity==t&&3==a)return e[i].seriesKey}return""}function S(e){var i,n,o;e&&(i=e.step2,n=e.step3,o=e.step4,$(".preDeliveryManualForm .step2-container .zebraChartTile-table tbody tr").each(function(e,t){var a=$(t).find("input").eq(0).attr("name");i[a]&&$(t).find("."+i[a]+' input[type="checkbox"]').prop("checked",!0)}),$(".preDeliveryManualForm .step3-container .zebraChartTile-table tbody tr").each(function(e,t){var a=$(t).find("input").eq(0).attr("name");n[a]&&$(t).find("."+n[a]+' input[type="checkbox"]').prop("checked",!0)}),(e=$(".personalisation-form .radioButton .hightlighted-section")).find("input:text,select,textarea").each(function(e,t){var a=$(t).attr("name");o[a]&&$(t).val(o[a]).change()}),e.find("input:radio").each(function(e,t){var a=$(t).attr("name"),i=$(t).attr("value");o.radio[a]&&i==o.radio[a]&&$(t).attr("checked",!0).change()}))}function x(i){$(".row.summary-frequency").each(function(e,t){var a=$(t).find(".section.dropdown.columns.large-4");0==i?$(t).append(a):$(t).prepend(a)})}return a.prototype._emailPDF=function(e,t){var a=window.location.href.split("?")[0],i=(this.locationhost=a.replace(".html",""),"/"==this.locationhost.substr(this.locationhost.length-1,1)?(this.righttemplateURL=this.locationhost+"form-landing.edm.PDSD.data",this.errortemplateURL=this.locationhost+"form-landing.edm.B.data"):(this.righttemplateURL=this.locationhost+"/form-landing.edm.PDSD.data",this.errortemplateURL=this.locationhost+"/form-landing.edm.B.data"),a=e?this.righttemplateURL:this.errortemplateURL,"Email has been sent successfully"),n="Email has been sent failure",e=("cn"==$("#country").val()&&(i="邮件发送成功",n="邮件发送失败"),t.API+"/fordleads/leads/PreDelivery/emailPdfForIND");t.templateURL=a,t.API=void 0,$.ajax({type:"POST",url:e,data:t,async:!1,success:function(e){"Success"==e.value&&200==e.returnCode?layer.msg(i):layer.msg(n)}.bind(this),error:function(e){layer.msg(n)}.bind(this)})},a.prototype._inputEmail=function(){this._GetDataPDFXML();var l=this.xmlpdfData,s=(l.formData=void 0,l.GUID=void 0,l.dealerProvince=this.selectedCar.Province,l.dealerKhet=this.selectedCar.KhetAmphoe,l.dealerName=this.selectedCar.DealerName,l.dealerLocation=this.selectedCar.DealerLocation,l.dealerAddress=this.selectedCar.DealerAddress,l.dealerCity=this.selectedCar.DealerCity,l.title=this.userData.title,"ph"==$("#country").val()&&(l.email=this.userData.email,l.phone=this.userData.phone),this._emailPDF),c=this._API,e=($("#emailpdflayer input[name=emailpdf1]").val(this.userData.email),"465px !important");$(window).width()<768&&(e="80% !important"),layer.open({type:1,title:!1,scrollbar:!1,closeBtn:0,area:[e,""],btn:["OK","Cancel"],yes:function(e,t){for(var a=!0,i=[],n=0;n<$("#emailpdflayer input").length;n++)i.push($("#emailpdflayer input").eq(n).val());for(var o=!0,r=0;r<i.length;r++)if(i[r]&&!p(i[r])){a=o=!1,layer.msg("The "+(r+1)+" line email address is wrong.");break}o&&$("#emailpdflayer input").each(function(e,t){t=$(t).val();t&&(p(t)?(l.API=c,l.emailAddress=t,s(!0,l)):a=!1)}),a&&($("#emailpdflayer").hide(),$(".layui-layer-btn").hide(),layer.close(e))},btn2:function(e,t){$("#emailpdflayer").hide(),$(".layui-layer-btn").hide(),layer.close(e)},shadeClose:!1,content:$("#emailpdflayer")})},$.getUrlParam=function(e){e=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),e=window.location.search.substr(1).match(e);return null!=e?e[2]:null},a.prototype._existDataForm=function(){$("#downloadpdf").attr("action",this._API+"/fordleads/leads/PreDelivery/downloadPdf"),"mobile"===y.getMediaType()&&$("#downloadpdf").attr("method","get"),$("div.box-content .checkbox.section input").attr({id:"",name:""}),this.isExistData=!0;var e,o,r,l,s,t,a,i,n,c,d,u,p,m,h,f,g=window.location.href.split("?")[0];if(this.locationhost=g.replace(".html",""),"/"==this.locationhost.substr(this.locationhost.length-1,1)?(this.righttemplateURL=this.locationhost+"form-landing.edm.PDSD.data",this.errortemplateURL=this.locationhost+"form-landing.edm.B.data"):(this.righttemplateURL=this.locationhost+"/form-landing.edm.PDSD.data",this.errortemplateURL=this.locationhost+"/form-landing.edm.B.data"),$("#emailnumberLabel").val())for(var v=0;v<$("#emailnumberLabel").val();v++)this.emailnumber.push(v);else this.emailnumber.push(0);0<$("#modelTrain").length?($(".footer").find(".footer-middle").show(),this.selectedCar.DeliveryDate="",this.isSubmit=!1,this.isdatepast=!1,$("#modelTrain").val()&&(this.isExistData=!1,$(".welcome-section").show(),$(".cta-button.save").hide(),$(".yourdetail").hide(),$(".summary-page-captcha.form").hide(),$(".PrepreredDeliveryDate input")&&("nz"===b.getCurrentMarketCode()?($(".PrepreredDeliveryDate input").datepicker({minDate:new Date,dateFormat:"dd/mm/yy"}),JSON.parse(localStorage.enterSetup)["user-date1"]?$(".PrepreredDeliveryDate input").val(JSON.parse(localStorage.enterSetup)["user-date1"]):((a=new Date).setDate(a.getDate()+2),t=w(a.getDate())+"/",t=(t+=w(a.getMonth()+1)+"/")+a.getFullYear(),$(".PrepreredDeliveryDate input").val(t))):($(".PrepreredDeliveryDate input").datepicker({minDate:new Date}),JSON.parse(localStorage.enterSetup)["user-date1"]?$(".PrepreredDeliveryDate input").val(JSON.parse(localStorage.enterSetup)["user-date1"]):((a=new Date).setDate(a.getDate()+2),t=w(a.getMonth()+1)+"/",t=(t+=w(a.getDate())+"/")+a.getFullYear(),$(".PrepreredDeliveryDate input").val(t)))),(g=$.getUrlParam("dealerid"))&&(0<$(".dealership-section").length&&alert("dealership No this function"),0<$(".dealeraddress-section").length)&&(e=(e=>{for(var t=$(".dealeraddress-section").data("dealeraddressdata"),a=0;a<t.length;a++)for(var i=0;i<t[a].KhetAmphoeList.length;i++)for(var n,o=t[a].KhetAmphoeList[i],r=0;r<o.DealerNameList.length;r++)if(o.DealerNameList[r].id==e)return n=o.DealerNameList[r],{provicevalue:t[a].Provincevalue,khetamphoevalue:o.KhetAmphoevalue,dealernamevalue:n.value};return!1})(g))&&$(document).ready(function(){$("#select-Province").select2("val",e.provicevalue).change(),$("#select-KhetAmphoe").select2("val",e.khetamphoevalue).change(),$("#select-Dealername").select2("val",e.dealernamevalue).change(),$("#select-Province,#select-KhetAmphoe,#select-Dealername,.dealerlocation input").attr("disabled","disabled")}),C(),$(".pdm-form").show()),1==this.isExistData&&("edit"!=$("#iseditor").val()&&$(".welcome-section").hide(),$(".cta-button.save").hide(),$(".cta-button.back.first").hide().css("width","250px"),$(".yourdetail").hide(),$(".cta-button.save").eq(0).css("float","left"),a=$.getUrlParam("dmsdata"),s=new RegExp(" ","g"),new RegExp("/","g"),this.dmsdata=a,$.ajax({type:"GET",url:this._API+"/fordleads/leads/PreDelivery/loadingByUrlForIND?dmsdata="+a,dataType:"json",async:!1,success:function(e){if("fail"!=e.value||"200"==e.returnCode){if(this.selectedCar.dealer=e.DealerName,this.selectedCar.dealerID=e.DealerCode,this.selectedCar.DeliveryDate=e.DeliveryDate.replace(".","/").replace(".","/"),$("#useEntity").val()){l=e.Entity;for(var t=0;t<this.models.length;t++)for(var a=0;a<this.models[t].seriesList.length;a++){var i=this.models[t].seriesList[a];l==i.entity&&(o=this.models[t].modelCode)}}else if(e.Series&&e.Engine&&e.Transmission)o=e.Model,r=e.Series+"+"+e.Engine+"+"+e.Transmission;else{null!==(r=e.Model)&&"cn"==$("#country").val()&&(r=r.substr(0,5));for(t=0;t<this.models.length;t++)for(a=0;a<this.models[t].seriesList.length;a++){i=this.models[t].seriesList[a];r==i.seriesCode&&(o=this.models[t].modelCode)}}this.userData.title="男"==(n=e.Gender)?"先生":"女"==n?"女士":"",this.selectedCar.color=e.Color.split("/")[0].replace(s,"-"),this._userGUID=e.DealerCode+"-"+e.ToDoNo+"-"+e.BpId,this.bpid=e.BpId,this.todono=e.ToDoNo,this.userData.firstName=e.FirstName,this.userData.lastName=e.LastName,this.userData.email=e.Email,this.userData.phone=e.MobilePhoneNo,this.userData.VinFGE=e.VIN||""}var n}.bind(this),error:function(e){}.bind(this)}),g=(t=new Date).getFullYear()+""+(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+(t.getDate()<10?"0"+t.getDate():t.getDate()),(a=this.selectedCar.DeliveryDate.split("/"))[2]+a[1]+a[0]<g&&(this.isdatepast=!0),$.ajax({type:"GET",url:this._API+"/fordleads/leads/PreDelivery/loadingInformationForIND?GUID="+this._userGUID,dataType:"json",async:!1,success:function(e){200==e.returnCode?(e.isSubmit&&1==e.isSubmit&&(this.isSubmit=!0),i=e):500==e.returnCode&&alert("The API Is Wrong!")}.bind(this),error:function(e){}.bind(this)}),(n={}).firstName=this.userData.firstName,n.lastName=this.userData.lastName,n.emailAddress=this.userData.email,n.API=this._API,c=this.isSubmit,d=this.isdatepast,u=this._errordata,p=this._moblie,m=this.selectedCar.color,this._radioinit,h=this._emailPDF,ModelsVal=k(this.models,o,1),country=this._countryCode.value,f=this,$(document).ready(function(){var e;0<$(".StepLanuageChange").length&&(e=$(".StepLanuageChange").attr("href")+$("#DmsData").val(),$(".StepLanuageChange").attr("href",e)),$("#select-model").select2("val",ModelsVal).change(),"undefined"!=typeof SeriesVal?(($("#useEntity").val()?$("#select-series").select2("val",k(SeriesVal,l,3)):$("#select-series").select2("val",k(SeriesVal,r,2))).change(),$("#select-color").select2("val",m).change()):(u($("#failurecheck p").text()),"IND"==country&&h(!1,n)),$(".submit.section .form-submit button.cta-button.accordion-indicator").click(),$('#global-ux > div.content.clearfix.show-content > div:nth-child(3) > div > div > form.pdm-form.ng-valid.ng-dirty > div > div.summary-section > div.summary-page-captcha.form > div > div > label > span.input-field > input[type="text"]').unbind(),$(".captcha-refresh").click(function(){$("#global-ux > div.content.clearfix.show-content > div:nth-child(3) > div > div > form.pdm-form.ng-valid.ng-dirty > div > div.summary-section > div.summary-page-captcha.form > div > div > label > small.error").hide()}),0!=$(".form-dropdown").find("small.error").length&&"undefined"!=typeof SeriesVal?(u($("#failurecheck p").text()),"THE"!=country&&"THA"!=country&&h(!1,n)):d?(e="Your preference submission date is past, please contact your dealer.","cn"==$("#country").val()&&(e="您的问卷已经过期，请联系经销商。"),$(".form .cta-button.submit.accordion-indicator").css({"background-color":"gray","border-color":"gray"}).attr("title",e).removeAttr("data-ng-click").unbind("click"),$(".form .cta-button.submit.accordion-indicator").attr("disabled","disabled")):c?($("input , select , textarea").not("#downloadpdf input , #emailpdflayer input , #emailnumberLabel , #modelTrain").attr("disabled","disabled"),$(".form .cta-button.submit.accordion-indicator").css({"background-color":"gray","border-color":"gray"}).attr("title","You have already submitted your preferences.").removeAttr("data-ng-click").unbind("click"),S(i),$(".cta-button.save").css({"background-color":"gray","border-color":"gray"}).removeAttr("data-ng-click").unbind("click"),f.onFeatureChange($(".preDeliveryManualForm .step2-container .zebraChartTile-table tbody")),f.onFeatureChange($(".preDeliveryManualForm .step3-container .zebraChartTile-table tbody")),$(".showSummarySection").click(),$(".form .cta-button.submit.accordion-indicator").attr("disabled","disabled"),$(".summary-page-captcha.form").hide()):(S(i),f.onFeatureChange($(".preDeliveryManualForm .step2-container .zebraChartTile-table tbody")),f.onFeatureChange($(".preDeliveryManualForm .step3-container .zebraChartTile-table tbody"))),$(window).resize(function(){p(x)}),$(".pdm-form").show()}))):($(".footer").find(".footer-middle").remove(),this.isExistData=!1)},a.prototype._moblie=function(e){var t=navigator.userAgent.toLowerCase(),a="iphone os"==t.match(/iphone os/i),i="midp"==t.match(/midp/i),n="rv:1.2.3.4"==t.match(/rv:1.2.3.4/i),o="ucweb"==t.match(/ucweb/i),r="android"==t.match(/android/i),l="windows ce"==t.match(/windows ce/i),t="windows mobile"==t.match(/windows mobile/i);a||i||n||o||r||l||t||$(window).width()<=768?e(0):e(1)},a.prototype._errordata=function(e){e='<div class="content"><div class="section summary"><div class="row"><div class="columns"><p class="intro">'+e+"</p></div></div></div>",$(".pdm-form").html(""),$(".pdm-form").append(e)},a.prototype._init=function(){this._formValidation.init($(".pdm-form")),setTimeout(function(){$('.privacyPolicy input[type="checkbox"]').removeAttr("disabled"),$('.preview-options input[type="checkbox"]').prop("checked",!1)},0),this._listen()},a.prototype._listen=function(){var t={},l=this;this._$body.on("change",'.zebraChartTile-table tbody input[type="checkbox"]',function(){var t,a,e=$(this),i=e.parents("td"),n=i.index(),o=e.parents(".zebraChartTile-table").find("th.checkbox-column"),r=e.parents(".zebraChartTile-table").find("td.checkbox-column");$tbody=e.parents(".zebraChartTile-table").find("tbody"),o.each(function(){$(this).find('input[type="checkbox"]').prop("checked",!1)}),e.is(":checked")?(i.siblings().find('input[type="checkbox"]').prop("checked",!1),a=t=0,r.each(function(e){$(this).index()==n&&(t+=1,$(this).find('input[type="checkbox"]').is(":checked"))&&(a+=1)}),t==a&&o.each(function(){$(this).index()==n&&$(this).find('input[type="checkbox"]').prop("checked",!0)})):(e.parents("tr").find('input[type="checkbox"]').length,e.parents("tr").find('input[type="checkbox"]').each(function(){$(this).not(":checked")&&0})),l.onFeatureChange(e)}),this._$postCode.on("keyup",function(){var e=this._$postCode.val();if(!this._states)return!1;e=this._getStateByPostCode(e);e&&(this._$state.val(e).trigger("change.select2"),this._$dealerState.val(e).trigger("change").trigger("change.select2"))}.bind(this)),this._$body.on("click",".inVideo",function(){var e="630px",t="360px";$(window).width()<768&&(e="378px",t="216px"),layer.open({scrollbar:!1,scrollbar:!1,type:2,title:!1,area:[e,t],shade:.8,closeBtn:1,shadeClose:!0,content:$(this).attr("data-href")}),$(".layui-layer-setwin .layui-layer-close2").css({"background-position":"2px -1px","background-size":"contain",right:"-15px",top:"-15px",width:"18px"})}),this._$body.on("click",".personalisation-form .user-phone-name input",function(){var e;i&&(e=$(this).closest(".radioButton.section").find("h5.heading").text(),t[e]||(i.getPredeliveryEvents().clickInEACH(e),t[e]=!0))}),this._$body.on("select2-open",".personalisation-form .radio-stations select",function(){var e;i&&(e=$(this).closest(".radioButton.section").find("h5.heading").text(),t[e]||(i.getPredeliveryEvents().clickInEACH(e),t[e]=!0))}),this._$body.on("click",".personalisation-form .radio-stations input",function(){var e;i&&(e=$(this).closest(".radioButton.section").find("h5.heading").text(),t[e]||(i.getPredeliveryEvents().clickInEACH(e),t[e]=!0))}),this._$body.on("click",".personalisation-form .address-row input",function(){var e;i&&(e=$(this).closest(".radioButton.section").find("h5.heading").text(),t[e]||(i.getPredeliveryEvents().clickInEACH(e),t[e]=!0))}),this._$body.on("select2-open",".personalisation-form .address-row select",function(){var e;i&&(e=$(this).closest(".radioButton.section").find("h5.heading").text(),t[e]||(i.getPredeliveryEvents().clickInEACH(e),t[e]=!0))}),this._$body.on("select2-open",".personalisation-form .summary-climate-control select",function(){var e;i&&(e=$(this).closest(".radioButton.section").find("h5.heading").text(),t[e]||(i.getPredeliveryEvents().clickInEACH(e),t[e]=!0))}),this._$body.on("click",".personalisation-form .form-radioButtons-holder .form-radioButtons",function(){var e;i&&(e=$(this).closest(".radioButton.section").find("h5.heading").text(),t[e]||(i.getPredeliveryEvents().clickInEACH(e),t[e]=!0))}),this._$body.on("click",".personalisation-form .colorizer .item-holder",function(){var e;i&&(e=$(this).closest(".radioButton.section").find("h5.heading").eq(0).text(),t[e]||(i.getPredeliveryEvents().clickInEACH(e),t[e]=!0))}),this._$body.on("click",".personalisation-form .customer-notes",function(){var e;i&&(e=$(this).closest(".radioButton.section").find("h5.heading").text(),t[e]||(i.getPredeliveryEvents().clickInEACH(e),t[e]=!0))}),this._$body.on("keyup",".address-row .summary-postcode input",function(e){var e=$(e.target),t=e.parents(".address-row").find(".summary-state .form-dropdown").find("select"),e=e.val();if(!this._states)return!1;e=this._getStateByPostCode(e);e&&t.val(e).trigger("change.select2")}.bind(this))},a.prototype._getValue=function(e,t,a){e.val()&&(this.userData[t]=a?e.val().charAt(0).toUpperCase()+e.val().slice(1):e.val())},a.prototype._scrollTo=function(e,t){$("html, body").animate({scrollTop:$(e).offset().top},t)},a.prototype._getParameterByName=function(e,t){t=t||this._href,e=e.replace(/[\[\]]/g,"\\$&");e=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return e?e[2]?decodeURIComponent(e[2].replace(/\+/g," ")):"":null},a.prototype._getColourId=function(e){if($(".your-ford-section").attr("data-color-id-config")){var t,a=JSON.parse($(".your-ford-section").attr("data-color-id-config"));for(t in a)if(e===a[t].colourName)return a[t].colourId}},a.prototype._getProductCode=function(e,t,a){var i,n="",o=e||t.val();for(i in a)if(o===i){n=a[i];break}return n},a.prototype._getStepsAttr=function(){return Boolean($(".your-ford-section").data("steps-data-config-for-series"))},a.prototype._togglePreloader=function(){$(".pre-loader").fadeToggle(300)},a.prototype._showPreloader=function(){$(".pre-loader").fadeIn(300)},a.prototype._hidePreloader=function(){$(".pre-loader").fadeOut(300)},a.prototype._getStateByPostCode=function(t){var e=_.find(this._states,function(e){return 0==e.regionPostcode.indexOf(t)||(0<=e.regionPostcode.indexOf("-")?0==(e=e.regionPostcode.split("-"))[0].indexOf(t)||0==e[1].indexOf(t)||+t>=+e[0].slice(0,t.length)&&+t<=+e[1].slice(0,t.length):void 0)});return e?e.regionTitle:""},a.prototype._getDataByGUID=function(){this._showPreloader(),this._preDeliveryData.getGUID(this._userGUID),this._preDeliveryData.isGUIDReceivedSuccessfully?(this._userStoredData=this._preDeliveryData.GUIDData,this._checkGUIDData()):this._preDeliveryData.isGUIDReceivedUnsuccessfully&&(this._userStoredData="",this._showMessageSection("wrongGUID"),this.steps.activeStep=1,this._hidePreloader())},a.prototype._checkGUIDData=function(){this._hidePreloader(),this._userStoredData.isGUIDSubmitted?(this._showMessageSection("submittedGUID"),this._hidePreloader()):this._fillInWelcomeSection()},a.prototype._renderPageByGUID=function(){setTimeout(function(){this._renderStepsSection(),this._$scope.$apply()}.bind(this),10),setTimeout(function(){for(var a in this._userStoredData){var e=$('.steps-section *[name="'+a+'"]');e.is('input[type="radio"]')&&1<e.length&&e.each(function(e,t){$(t).attr("name")===a&&$(t).val()===this._userStoredData[a]&&$(t).attr("checked","checked")}.bind(this)),(e.is('[type="text"]')||e.is('[type="checkbox"]'))&&e.val(this._userStoredData[a]),e.is("select")&&e.val(this._userStoredData[a]).trigger("change"),a===$(".colorizer").find(".heading").data("colorizer-id")&&this.onLightingChange(this._userStoredData[a]),a===$(".hightlighted-section textarea").attr("name")&&(this.userNotes=this._userStoredData[a])}this._$scope.$apply()}.bind(this),50),setTimeout(function(){var e,t=$(".stations-row").data("frequency-id");if(e=this._userStoredData[t]?JSON.parse(this._userStoredData[t]):e)for(var a in e){var i=$(".summary-frequency").eq(a),n=i.find(".form-dropdown select"),o=n.attr("name"),o=e[a][o],i=i.find(".input-field input"),r=i.attr("name"),a=e[a][r];n.val(o).trigger("change"),i.val(a)}}.bind(this),100),setTimeout(function(){var e,t,a=this._userStoredData.step2,i=this._userStoredData.step3;for(e in a)$(".step2-container tbody").find("td."+a[e]).find('input[name="'+e+'"]').click();for(t in i)$(".step3-container tbody").find("td."+i[t]).find('input[name="'+t+'"]').click()}.bind(this),10),setTimeout(function(){this.getVINCode(),this._$scope.$apply(),this._hidePreloader()}.bind(this),50)},a.prototype._fillInWelcomeSection=function(){for(var e in this._showPreloader(),this.missedFields=[],this._userStoredData){var t=$('.welcome-section *[name="'+e+'"]');t.length&&(t.is('[type="text"]')&&("null"===this._userStoredData[e]?t.val(" "):t.val(this._userStoredData[e])),t.is("select"))&&t.val(this._userStoredData[e]).trigger("change")}setTimeout(function(){this.carModel=this._userStoredData[$("#select-model").attr("name")],this._$model.val(this.carModel).trigger("change"),this.selectedCarSeries=this._userStoredData[$("#select-series").attr("name")],this._$series.val(this.selectedCarSeries).trigger("change");var e,t=this._userStoredData[$(".your-ford-section").data("color-variable-id")],a=(this.selectedColor=this._getColourId(t)||this._userStoredData[$("#select-color").attr("name")],this._$color.val(this.selectedColor).trigger("change"),this._userStoredData[$(".your-ford-section").data("dealership-variable-id")]);for(e in this.dealers)for(var i in this.dealers[e].dealershipList)a===this.dealers[e].dealershipList[i].dealershipKey&&(this.dealerState=this.dealers[e].dealerShipStateKey);$("#select-dealership").val(this.dealerState).trigger("change"),this.dealerShip=this._userStoredData[$("#select-dealer").attr("name")],$("#select-dealer").val(this.dealerShip).trigger("change"),$(".welcome-section .form-dropdown select, .welcome-section .input-field input").each(function(e,t){""===$(t).val()&&$(t).data("validation")&&"required"===$(t).data("validation").rules[0].type&&this.missedFields.push($(t).attr("name"))}.bind(this))}.bind(this),0);var a=this._userStoredData[$(".preview-options").data("name")];a&&setTimeout(function(){var t=this;$(".preview-options").find('input[type="checkbox"]').prop("checked",!1),a.forEach(function(e){t.selectedOptionsList[e.slice(5)].checked=!0})}.bind(this),50),$('.privacyPolicy input[type="checkbox"]').attr("checked","checked"),setTimeout(function(){if(this.missedFields.length)for(var e in this.missedFields){e=$('.details-section *[name="'+this.missedFields[e]+'"]');e.is("select")?e.trigger("change"):e.trigger("blur")}this.missedFields.length?(this.showWelcomeSection(),this._hidePreloader(),this._$scope.$apply()):(this._renderPageByGUID(),this._hidePreloader())}.bind(this),200)},a.prototype.showWelcomeSection=function(){this.sections.welcome.active=!0,this.sections.steps.active=!1,this.sections.summary.active=!1,this.isSaveSuccessfull=!1,this.isSaveFailed=!1,this._scrollTo("body",1e3),$(".homeBillboard").length&&$(".homeBillboard").css("display","block"),$('.privacyPolicy input[type="checkbox"]').prop("checked",!1)},a.prototype.checkWelcomeSection=function(e){if(!this.isAuthorMode){$(".preview-details input").length;var a=[];if(0==this.isExistData){if(this._getValue(this._$userTitle,"title",!0),this._getValue(this._$firstName,"firstName"),this._getValue(this._$middleName,"middleName"),this._getValue(this._$lastName,"lastName"),this._getValue(this._$email,"email"),this._getValue(this._$contactNumber,"contactNumber"),this._getValue(this._$addr1,"addr1"),this._getValue(this._$addr2,"addr2"),this._getValue(this._$suburb,"suburb"),this._getValue(this._$postCode,"postCode"),this._getValue(this._$state,"state"),this._getValue(this._$deliverydate,"deliverydate"),this._getValue(this._$dealerlocation,"dealerlocation"),this.selectedCar.DeliveryDate=this.userData.deliverydate,this.selectedCar.DealerLocation=this.userData.dealerlocation,this.isStepsSectionReady=!1,$(".welcome-section .form-dropdown select, .welcome-section .input-field input").each(function(e,t){$(t).val()||$(t).data("validation")&&"required"===$(t).data("validation").rules[0].type&&$(t).attr("name")&&a.push($(t).attr("name"))}),a.length)return this._scrollTo('.welcome-section *[name="'+a[0]+'"]:eq(0)',500),this.isStepsSectionReady=!1;if($(".welcome-section").find("small.error").length)return this._scrollTo($(".welcome-section").find("small.error").eq(0).parents("div").eq(0),500),this.isStepsSectionReady=!1;if("null"!=this._userGUID)return this.isStepsSectionReady=!0,this._renderPageByGUID(),void i.getPredeliveryEvents().onLoadBasics();this.isStepsSectionReady=!0}}$(".homeBillboard.billboard").show(),this._renderStepsSection(),i.getPredeliveryEvents().onLoadBasics(),e.preventDefault()},a.prototype.onDealerProvinceChange=function(){if(""===this.dealerProvince)this.isDealerKhetAmphoeDropdownDisabled=!0,this.isDealernameDropdownDisabled=!0,this.KhetAmphoeList=[],this.dealerProvince="",this.dealerKhetAmphoe="",this.dealerName="",this.selectedCar.Province="",this.selectedCar.KhetAmphoe="",this.selectedCar.DealerName="",l("select-KhetAmphoe"),l("select-Dealername");else{for(var e in this.KhetAmphoeList=[],this.isDealernameDropdownDisabled=!0,this.dealerKhetAmphoe="",this.dealerName="",this.selectedCar.Province="",this.selectedCar.KhetAmphoe="",this.selectedCar.DealerName="",l("select-KhetAmphoe"),l("select-Dealername"),this.province)if(this.province[e].Provincevalue==this.dealerProvince){this.selectedCar.Province=this.province[e].Province,this.KhetAmphoeList=this.province[e].KhetAmphoeList;break}$(".dealerlocation input").val(""),KhetAmphoe=this.KhetAmphoeList,this.isDealerKhetAmphoeDropdownDisabled=!1}},a.prototype.onDealerKhetAmphoeChange=function(){if(""===this.dealerKhetAmphoe)this.isDealernameDropdownDisabled=!0,this.DealerNameList=[],this.dealerKhetAmphoe="",this.dealerName="",this.selectedCar.KhetAmphoe="",this.selectedCar.DealerName="",l("select-Dealername");else{for(var e in this.dealerName="",this.selectedCar.KhetAmphoe="",this.selectedCar.DealerName="",this.DealerNameList=[],l("select-Dealername"),this.KhetAmphoeList)if(this.KhetAmphoeList[e].KhetAmphoevalue==this.dealerKhetAmphoe){this.DealerNameList=this.KhetAmphoeList[e].DealerNameList,this.selectedCar.KhetAmphoe=this.KhetAmphoeList[e].KhetAmphoe;break}$(".dealerlocation input").val(""),this.isDealernameDropdownDisabled=!1}},a.prototype.onDealerNameChange=function(){if(""===this.dealerName)this.dealerName="",this.selectedCar.DealerName="",l("select-Dealername");else for(var e in this.DealerNameList)this.dealerName==this.DealerNameList[e].value&&(e=this.DealerNameList[e],this.selectedCar.DealerName=e.name,$(".dealerlocation input").val(e.location),this.selectedCar.DealerLocation=e.location,this.userData.dealeremail=e.emails)},a.prototype.onFeatureChange=function(e){var a=this.featureWalkThroughTime,i=this.walkThroughTime;$(e).parent().parent().parent().parent().find(".chosenFeature").each(function(){if($(this).is(":checked")){var e,t=$(this).attr("name");for(e in a)t==a[e].featureName&&(i+=parseInt(a[e].mins))}}),$(e).parent().parent().parent().parent().find(".chosenFeatureTotalTime").text(i+" "+(this.featureWalkThroughTimeUnit||"minutes"))},a.prototype.onCarModelChange=function(){if(""===this.carModel)this.isSeriesDropdownDisabled=!0,this.isOptionsReady=!1,this.optionsList=[],this.selectedOptionsList=[],this.carColorsList=[],this.isColorDropdownDisabled=!0,this.isPreviewReady=!1,this.selectedCarSeries="",this.selectedColor="",this.selectedCar.model="",this.selectedCar.nameplatevdmkey="",this.selectedCar.packagevdmkey="",this.selectedCar.modelKey="",this.selectedCar.series="",this.selectedCar.seriesValue="",this.selectedCar.color="",this.selectedCar.colorKey="",this.selectedCar.colorVdmKey="",this.selectedCar.nameplatevdmkey="",l("select-color"),l("select-model"),l("select-series");else{for(var e in this.selectedCar.model="",this.selectedCar.nameplatevdmkey="",this.selectedCar.colorVdmKey="",this.selectedCar.packagevdmkey="",this.selectedCar.modelKey="",this.selectedCar.series="",this.selectedCar.seriesValue="",this.selectedCar.color="",this.selectedCar.colorKey="",this.isOptionsReady=!1,this.isPreviewReady=!1,this.optionsList=[],this.selectedOptionsList=[],this.carColorsList=[],this.selectedCarSeries="",l("select-color"),l("select-series"),this.models)if(this.models[e].modelKey==this.carModel){this.selectedCar.model=this.models[e].modelValue,this.selectedCar.nameplatevdmkey=this.models[e].nameplatevdmkey||"",this.selectedCar.modelKey=this.models[e].modelKey,this.carSeriesList=this.models[e].seriesList;break}SeriesVal=this.carSeriesList,this.isSeriesDropdownDisabled=!1}},a.prototype.onModelSeriesChange=function(){if(""===this.selectedCarSeries)this.isColorDropdownDisabled=!0,this.isOptionsReady=!1,this.isPreviewReady=!1,this.selectedColor="",this.selectedCar.series="",this.selectedCar.packagevdmkey="",this.selectedCar.color="",this.selectedCar.colorKey="",this.selectedCar.image="",this.selectedCar.seriesValue="",this._isSeriesChanged=!0,this.carColorsList=[],this.selectedCar.colorVdmKey="",l("select-color"),l("select-series");else{for(var e in this.selectedCar.series="",this.selectedCar.packagevdmkey="",this.selectedCar.seriesValue="",this.selectedCar.color="",this.selectedCar.colorKey="",this.selectedCar.image="",this.isOptionsReady=!1,this.isPreviewReady=!1,this.optionsList=[],this.carColorsList=[],this.selectedColor="",this.selectedCar.colorVdmKey="",l("select-color"),this.carSeriesList)if(this.carSeriesList[e].seriesKey==this.selectedCarSeries){this.selectedCar.series=this.carSeriesList[e].seriesValue,this.selectedCar.packagevdmkey=this.carSeriesList[e].packagevdmkey||"",this.selectedCar.seriesValue=this.carSeriesList[e].seriesKey,this.carColorsList=this.carSeriesList[e].colorsList,this.carSeriesList[e].optionalPacksList.length?(this.optionsList=this.carSeriesList[e].optionalPacksList,this.selectedOptionsList=this.optionsList,this.selectedOptionsList.forEach(function(e,t){e.checked=!1}),this.isOptionsReady=!0):(this.optionsList=[],this.selectedOptionsList=[],this.isOptionsReady=!1);break}this._isSeriesChanged=!0,this.isColorDropdownDisabled=!1}},a.prototype.onColorChange=function(){if(""==this.selectedColor)this.isPreviewReady=!1;else{for(var e in this._showPreloader(),this.carColorsList)if(this.selectedColor==this.carColorsList[e].colorKey){this.selectedCar.color=this.carColorsList[e].colorValue,this.selectedCar.colorKey=this.carColorsList[e].colorKey;break}for(var t in this.colorVdmKeys)if(this.selectedCar.color==this.colorVdmKeys[t].colour){this.selectedCar.colorVdmKey=this.colorVdmKeys[t].colourvdmkey;break}for(var a in this.selectedCar.image="",this.carSeriesList)if(this.selectedCar.seriesValue===this.carSeriesList[a].seriesKey&&this.carSeriesList[a].imagesList)for(var t in this.carSeriesList[a].imagesList)if(this.selectedColor==this.carSeriesList[a].imagesList[t].colorKey){this.selectedCar.image=this.carSeriesList[a].imagesList[t].imagePath;break}this.isPreviewReady=!!this.selectedCar.image,this._hidePreloader()}},a.prototype.onColorPicChange=function(e){var t,a,e=e.target,i=($(e).parent().siblings("li").find("img").removeClass("active"),$(e).addClass("active"),$(e).attr("alt")),e=JSON.parse(localStorage.enterSetup);for(t in e.colorPic=i,localStorage.enterSetup=JSON.stringify(e),this.carColorsList)if(i==this.carColorsList[t].colorKey){this.selectedCar.color=this.carColorsList[t].colorValue,this.selectedCar.colorKey=this.carColorsList[t].colorKey;break}for(a in this.selectedCar.image="",this.carSeriesList)if(this.selectedCar.seriesValue===this.carSeriesList[a].seriesKey&&this.carSeriesList[a].imagesList)for(var n in this.carSeriesList[a].imagesList)if(i==this.carSeriesList[a].imagesList[n].colorKey){this.selectedCar.image=this.carSeriesList[a].imagesList[n].imagePath;break}this.isPreviewReady=!!this.selectedCar.image},a.prototype.onDealerStateChange=function(){if(""===this.dealerState)this.isDealerShipDropdownDisabled=!0,this.dealerShip="",this.selectedCar.dealerState="",this.selectedCar.dealer="",this.selectedCar.dealerID="",this.selectedCar.DealerAddress="",this.dealerAddress="",l("select-dealer"),l("select-dealerAdreess");else{for(var e in this.selectedCar.dealerState="",this.selectedCar.dealer="",this.selectedCar.dealerID="",this.selectedCar.DealerAddress="",this.dealerAddress="",this.dealerShip="",l("select-dealer"),l("select-dealerAdreess"),this.dealers)if(this.dealers[e].dealerShipStateKey==this.dealerState){this.dealersList=this.dealers[e].dealershipList,this.selectedCar.dealerID=this.dealers[e].dealerShipStateKey,this.selectedCar.DealerCity=this.dealers[e].dealerShipStateValue;break}this.selectedCar.dealerState=this.dealerState,this.isDealerShipDropdownDisabled=!1}},a.prototype.onDealerChange=function(){if("PL"!=this.dealerShip)if(""==this.dealerShip)this.dealerAddress="",this.selectedCar.dealer="",this.selectedCar.dealerID="",this.selectedCar.DealerName="",this.selectedCar.DealerAddress="",this.userData.dealeremail="",l("select-dealerAdreess");else{for(var e in this.dealerAddress="",this.selectedCar.dealer="",this.selectedCar.dealerID="",this.selectedCar.DealerName="",this.selectedCar.DealerAddress="",this.userData.dealeremail="",l("select-dealerAdreess"),this.dealersList)if(this.dealersList[e].dealershipKey==this.dealerShip){this.selectedCar.dealer=this.dealersList[e].dealershipValue,this.selectedCar.dealerID=this.dealersList[e].dealershipKey,this.dealerAddressList=this.dealersList[e].dealerlocation,this.selectedCar.DealerName=this.dealersList[e].dealershipValue;break}this.isDealerAddressDropdownDisabled=!1}},a.prototype.onDealerAddressChange=function(){if(""===this.dealerAddress)this.dealerAddress="",this.selectedCar.DealerAddress="",this.userData.dealeremail="";else for(var e in this.selectedCar.DealerAddress="",this.userData.dealeremail="",this.dealerAddressList)if(this.dealerAddressList[e].dealerlocationvalue==this.dealerAddress){this.selectedCar.DealerAddress=this.dealerAddressList[e].dealerlocationvalue,this.userData.dealeremail=this.dealerAddressList[e].dealeremail;break}},a.prototype.getVINCode=function(){this.vinCode=this._$VINCode.val()},a.prototype.getPreviewOptions=function(){this.optionPack=[],$('.preview-options input[type="checkbox"]').each(function(e,t){$(t).is(":checked")&&this.optionPack.push($(t).attr("name"))}.bind(this))},a.prototype.setActiveStep=function(e){function t(e){var e=$(".step"+e+"-container .zebraChartTile-table"),t=e.find("tr.decorated-row"),e=e.find('input[type="checkbox"]:checked').length;t.length!=e&&t.each(function(){var e=$(this);e.find('input[type="checkbox"]:checked').length||e.find('.col-3 input[type="checkbox"]').prop("checked",!0)})}switch(this.steps.activeStep=e||$(".stepactivenumber").eq(0).val(),0==e&&(this.steps.activeStep=4,e=4),e){case 1:i.getPredeliveryEvents().onLoadBasics();break;case 2:i.getPredeliveryEvents().onLoadFeatured();break;case 3:i.getPredeliveryEvents().onLoadExpanded(),t(2);break;case 4:i.getPredeliveryEvents().onLoadPersonalisation(),t(3),$(".personalisation-form .radioButton").each(function(e,t){switch($(t).find(".hightlighted-section").data("type-of-component")){case"vehicledecoration":$(t).find("select").attr("disabled","disabled"),$(t).find("input").change(function(){var e=$(t).find("input:checked").val();"Yes"==e||"是"==e||"CÓ"==e?$(t).find("select").removeAttr("disabled"):$(t).find("select").attr("disabled","disabled")}),$(t).find("input").change();break;case"specialOccasion":$(t).find("input[type=text]").attr("disabled","disabled"),$(t).find("select").change(function(){var e=$(t).find("select option:checked").val();"Other."==e||"Khác."==e?$(t).find("input[type=text]").removeAttr("disabled"):$(t).find("input[type=text]").attr("disabled","disabled").val("")}),$(t).find("select").change();break;case"poojaceremony":var a=(i=$(t).find("textarea")).attr("maxlength");$(t).find(".counter").text(a),i.attr("readonly","readonly"),$(t).find("input").change(function(){var e=$(t).find("input:checked").val();"Yes"==e||"是"==e||"CÓ"==e?(e=$(t).find("textarea").val().length,e=a-e,$(t).find(".counter").text(e),i.removeAttr("readonly").on("input propertychange",function(){var e=$(t).find("textarea").val().length,e=a-e;$(t).find(".counter").text(e)})):i.attr("readonly","readonly")}),$(t).find("input").change();break;case"customerNotes":var i,a=(i=$(t).find("textarea")).attr("maxlength");$(t).find(".counter").text(a),i.bind("keyup keydown change",function(){var e=$(t).find("textarea").val().length,e=a-e;$(t).find(".counter").text(e)}),i.change();break;case"favouriteStations":var n=$(".stations-row > .columns > .row select").parents(".stations-row > .columns > .row").find(".textfield input");function o(e){var t,a,i;e.unbind(),e.parent().find("small.error").remove(),e.attr("data-validation")&&(t=JSON.parse(e.attr("data-validation")).rules,a=t[t.length-1].regexp?t[t.length-1].regexp:"",i=t[t.length-1].message||"",e.parent().append('<small class="error" style="height:22.29px;"></small>'),""!=a)&&e.blur(function(){!(a=new RegExp(a)).test(e.val())&&e.val()?e.parent().find("small.error").text(i):e.parent().find("small.error").text("")})}o(n.eq(0)),o(n.eq(1)),o(n.eq(2)),o(n.eq(3)),o(n.eq(4)),o(n.eq(5));break;case"preferredTime":(r=$(t).find("select")).change(function(){r.eq(0).val()&&r.eq(1).val()&&r.eq(2).val()&&$(t).find("small.preferredtimeerror").text("")});break;case"preferredTimeTwo":var r;(r=$(t).find("select")).change(function(){r.eq(0).val()&&r.eq(1).val()&&$(t).find("small.preferredtimeerror").text("")})}})}setTimeout(function(){e&&this._scrollTo(".predelivery-step.is-active-step",500)}.bind(this),50),$("#modelTrain").val()||this.isSubmit||this.saveAndContinue(),this.isSaveSuccessfull=!1,this.isSaveFailed=!1,C()},a.prototype.isStepActive=function(e){return e==this.getActiveStep()},a.prototype.getActiveStep=function(){return this.steps.activeStep},a.prototype._renderStepsSection=function(){this._getCarPage(),this._guxTooltip.init(),this._togglePreloader(),this.showStepsSection(),this.setActiveStep()},a.prototype.showStepsSection=function(){this.isSubmitSuccessfull=!1,this.isSubmitFailed=!1,this.captchaStatus={isSuccess:!1,isFailed:!1,isInvalid:!1,isTimeot:!1},this.getVINCode(),this._hidePreloader(),this._scrollTo("body",1e3),this.sections.welcome.active=!1,this.sections.summary.active=!1,this.sections.steps.active=!0,this._unWrapSummaryColumns(),setTimeout(function(){$(".steps-section select").select2({minimumResultsForSearch:-1,blurOnChange:!1,selectOnBlur:!1,loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:""}),this._overlay.init()}.bind(this),0),setTimeout(function(){var e,t;e=this.selectedOptionsList,(t=$(".step2-container .zebraChartTile-table .decorated-row")).show(),t.each(function(){var t=$(this),a=t.find(".description-column .heading").text().toLowerCase();e.forEach(function(e){e.optionalPack.toLowerCase()!==a||e.checked||t.hide()})})}.bind(this),1e3)},a.prototype.onLightingChange=function(e){this.lighting==e?this.lighting="":(this.lighting=e,this.isSummaryInnerReady=!0)},a.prototype._getOperations=function(){var a=[],i=[],n=[],o=[],r=(featuredOperationsCol3=[],expandedOperationsCol3=[],featureTotalWalkThroughTime=0,this._sce),e=(this.featuredOperationsCol1=[],this.expandedOperationsCol1=[],this.featuredOperationsCol2=[],this.expandedOperationsCol2=[],this.featuredOperationsCol3=[],this.expandedOperationsCol3=[],this.featureTotalWalkThroughTime=0,$(".step2-container .zebraChartTile-table")),t=$(".step3-container .zebraChartTile-table");e.find("td.col-1").each(function(e,t){$(t).find('input[type="checkbox"]').is(":checked")&&a.push({name:r.trustAsHtml($(t).siblings(".description-column").find("p").html()),id:$(t).parent().attr("id"),xmlname:$(t).find("input").attr("name")})}),e.find("td.col-2").each(function(e,t){$(t).find('input[type="checkbox"]').is(":checked")&&i.push({name:r.trustAsHtml($(t).siblings(".description-column").find("p").html()),id:$(t).parent().attr("id"),xmlname:$(t).find("input").attr("name")})}),e.find("td.col-3").each(function(e,t){$(t).find('input[type="checkbox"]').is(":checked")&&featuredOperationsCol3.push({name:r.trustAsHtml($(t).siblings(".description-column").find("p").html()),id:$(t).parent().attr("id"),xmlname:$(t).find("input").attr("name")})}),t.find("td.col-1").each(function(e,t){$(t).find('input[type="checkbox"]').is(":checked")&&n.push({name:r.trustAsHtml($(t).siblings(".description-column").find("p").html()),id:$(t).parent().attr("id"),xmlname:$(t).find("input").attr("name")})}),t.find("td.col-2").each(function(e,t){$(t).find('input[type="checkbox"]').is(":checked")&&o.push({name:r.trustAsHtml($(t).siblings(".description-column").find("p").html()),id:$(t).parent().attr("id"),xmlname:$(t).find("input").attr("name")})}),t.find("td.col-3").each(function(e,t){$(t).find('input[type="checkbox"]').is(":checked")&&expandedOperationsCol3.push({name:r.trustAsHtml($(t).siblings(".description-column").find("p").html()),id:$(t).parent().attr("id"),xmlname:$(t).find("input").attr("name")})}),$(".zebraChartTile-table .chosenFeatureTotalTime").each(function(){featureTotalWalkThroughTime+=parseInt($(this).text())}),this.featureTotalWalkThroughTime=featureTotalWalkThroughTime,this.featuredOperationsCol1=a,this.expandedOperationsCol1=n,this.featuredOperationsCol2=i,this.expandedOperationsCol2=o,this.expandedOperationsCol3=expandedOperationsCol3,this.featuredOperationsCol3=featuredOperationsCol3},a.prototype._renderNewPage=function(){var e=window.location.pathname,t="",a="",i="",n="",o="",l=this._getStepsAttr()?this.selectedCar.seriesValue:this.selectedCar.modelKey;this.step1HTML="",this.step2HTML="",this.step3HTML="",this.step4part1="",this.step4part2="",$(".personalisation-form").find('input[type="text"], select').val("").parents(".personalisation-form").find('input[type="radio"]').prop("checked",!1),this.lighting="",this.userNotes="",-1!=e.indexOf(".html")&&(e=e.substring(0,e.indexOf(".html"))),$.ajax({type:"GET",url:e+".preDeliveryDataModelConfig."+l+".data",dataType:"html",async:!1,success:function(e){allModelConfigs=$(e).find(".model-config-container"),0<$(allModelConfigs).length&&$(allModelConfigs).each(function(){$(this).attr("data-model-name")===l&&($("#chonsenFeatureWalkThroughTimeLabel").val()&&$(this).find(".td-chosenFeatureTotalTime").text($("#chonsenFeatureWalkThroughTimeLabel").val()),t=$(this).find(".step1-container").html(),a=$(this).find(".step2-container").html(),i=$(this).find(".step3-container").html(),n=$(this).find(".step4-container").html(),o=$(this).find(".personalization-container").html())})}}),this._oldModel=this.selectedCar.model,this._oldSeries=this.selectedCar.series,this.step1HTML=t,this.step2HTML=a,this.step3HTML=i,this.step4part1=n,this.step4part2=o,$("#modelTrain").val()&&setTimeout(function(){function e(){setTimeout(function(){for(var e=$(".zebraChartTile-table").find("input").length,t=new Array,a=new Object,i=$(".zebraChartTile-table").find("input"),n=0;n<e;n++)"checkbox"==i.eq(n).attr("type")&&t.push($(i.eq(n)[0]).context.checked);a[l]=t,localStorage.step12Setup=JSON.stringify(a)},200)}function i(){var i=new Array,n=new Array,e=new Object;$(".step-4-container").find("input").each(function(e,t){var t=$(t),a=t.attr("id");if("radio"==t.attr("type"))return n.push(a),i.push(t.context.checked),!0;a&&-1!=a.indexOf("autogen")&&-1==a.indexOf("search")&&t.parent().select2("data")?(t.parent().next().attr("name")?n.push(t.parent().next().attr("name")):n.push(t.parent().parent().parent().parent().attr("class").split(" ")[0]),i.push(t.parent().select2("data").id)):a||(t.attr("name")?n.push(t.attr("name")):(a=1-t.parent().parent().parent().parent().attr("class").split(" ").indexOf("textfield"),n.push(t.parent().parent().parent().parent().attr("class").split(" ")[a])),i.push(t.val()))}),$(".step-4-container").find("textarea").each(function(e,t){t=$(t);n.push(t.attr("name")),i.push(t.val())});for(var t=0;t<n.length;t++)e[n[t]]=i[t];e=JSON.stringify(e),localStorage.step3Setup=e}for(var t,n,a=$(".zebraChartTile-table").find("input").length,o=$(".zebraChartTile-table").find("input"),r=0;r<a;r++)"checkbox"==o.eq(r).attr("type")&&(localStorage.step12Setup&&(t=JSON.parse(localStorage.step12Setup))[l]&&($(o.eq(r)[0]).context.checked=t[l][r]),o.eq(r).change(e).change());localStorage.step3Setup||i(),n=JSON.parse(localStorage.step3Setup),$(".step-4-container").find("input").each(function(e,t){var t=$(t),a=t.attr("id");"radio"==t.attr("type")?(t.context.checked=n[a],t.change(),t.change(i)):a&&-1!=a.indexOf("autogen")&&-1==a.indexOf("search")?((t.parent().next().attr("name")?t.parent().select2("val",n[t.parent().next().attr("name")]):t.parent().select2("val",n[t.parent().parent().parent().parent().attr("class").split(" ")[0]])).change(),t.parent().next().change(i)):a||(t.attr("name")?t.val(n[t.attr("name")]):(a=1-t.parent().parent().parent().parent().attr("class").split(" ").indexOf("textfield"),t.val(n[t.parent().parent().parent().parent().attr("class").split(" ")[a]]).change()),t.change(i))}),$(".step-4-container").find("textarea").each(function(e,t){t=$(t);t.val(n[t.attr("name")]).change(),t.change(i)})},100)},a.prototype._getCarPage=function(){this._getStepsAttr()?this._oldModel===this.selectedCar.model&&this._oldSeries===this.selectedCar.series||this._renderNewPage():this._oldModel!==this.selectedCar.model&&this._renderNewPage()},a.prototype.getAllFieldValues=function(){var a={step2:{},step3:{},step4:{radio:{}},DealerCode:this._userGUID.split("-")[0],ToDoNo:this._userGUID.split("-")[1],BpId:this._userGUID.split("-")[2],FirstName:this.userData.firstName,LastName:this.userData.lastName,Dealer:this.selectedCar.dealer,Model:this.selectedCar.model,Series:this.selectedCar.series,Colour:this.selectedCar.color,DeliveryDate:this.selectedCar.DeliveryDate.replace("/",".").replace("/","."),VinFGE:this.userData.VinFGE,NameplateFGE:this.selectedCar.nameplatevdmkey,ModelFGE:this.selectedCar.packagevdmkey,DeliveryDateFGE:this.selectedCar.DeliveryDate.replace("/",".").replace("/","."),ColorFGE:this.selectedCar.colorVdmKey},e={},t=(a[$(".preDeliveryManualForm .details-section .user-title select").attr("name")]=$(".preDeliveryManualForm .details-section .user-title select").val(),a[$(".preDeliveryManualForm .details-section .user-first-name input").attr("name")]=$(".preDeliveryManualForm .details-section .user-first-name input").val(),a[$(".preDeliveryManualForm .details-section .user-last-name  input").attr("name")]=$(".preDeliveryManualForm .details-section .user-last-name input").val(),a[$(".preDeliveryManualForm .details-section .user-email  input").attr("name")]=$(".preDeliveryManualForm .details-section .user-email input").val(),a[$(".preDeliveryManualForm .details-section .user-contact-number  input").attr("name")]=$(".preDeliveryManualForm .details-section .user-contact-number input").val(),a[$(".preDeliveryManualForm .details-section .user-addr1  input").attr("name")]=$(".preDeliveryManualForm .details-section .user-addr1 input").val(),a[$(".preDeliveryManualForm .details-section .user-suburb  input").attr("name")]=$(".preDeliveryManualForm .details-section .user-suburb input").val(),a[$(".preDeliveryManualForm .details-section .user-addr2  input").attr("name")]=$(".preDeliveryManualForm .details-section .user-addr2 input").val(),a[$(".preDeliveryManualForm .details-section .user-postcode  input").attr("name")]=$(".preDeliveryManualForm .details-section .user-postcode input").val(),a[$(".preDeliveryManualForm .details-section .user-state  select").attr("name")]=$(".preDeliveryManualForm .details-section .user-state select").val(),this.getPreviewOptions(),a[$(".preDeliveryManualForm .your-ford-section").attr("data-model-variable-id")]=this.selectedCar.modelKey,a[$(".preDeliveryManualForm .your-ford-section").attr("data-series-variable-id")]=this.selectedCar.seriesValue,a[$(".preDeliveryManualForm .your-ford-section").attr("data-optional-pack-variable-id")]=this.optionPack,a[$(".preDeliveryManualForm .your-ford-section").attr("data-color-variable-id")]=this.selectedCar.colorKey,a[$(".preDeliveryManualForm .your-ford-section .user-vin-number  input").attr("name")]=$(".preDeliveryManualForm .your-ford-section .user-vin-number  input").val(),a[$(".preDeliveryManualForm .your-ford-section").attr("data-dealership-state-variable-id")]=this.selectedCar.dealerState,a[$(".preDeliveryManualForm .your-ford-section").attr("data-dealership-variable-id")]=this.selectedCar.dealerID,a[$(".preDeliveryManualForm .privacy-block  input").attr("name")]=$(".preDeliveryManualForm .privacy-block input").val(),$(".preDeliveryManualForm .step2-container .zebraChartTile-table tbody tr").each(function(){$(this).find(".decorated-radio").each(function(){var e;$(this).is(":checked")&&(e=$(this).attr("data-index"),$(this).attr("name"),a.step2[$(this).attr("name")]="col-"+e)})}),$(".preDeliveryManualForm .step3-container .zebraChartTile-table tbody tr").each(function(){$(this).find(".decorated-radio").each(function(){var e;$(this).is(":checked")&&(e=$(this).attr("data-index"),a.step3[$(this).attr("name")]="col-"+e)})}),$(".personalisation-form .radioButton .hightlighted-section"));t.find("input:text,select,textarea").each(function(e,t){$(t).val()&&(a.step4[$(t).attr("name")]=$(t).val())}),t.find("input:radio:checked").each(function(e,t){$(t).val()&&(a.step4.radio[$(t).attr("name")]=$(t).val())}),e.formData=JSON.stringify(a),this._getValue(this._$firstName,"firstName"),this._getValue(this._$middleName,"middleName"),this._getValue(this._$lastName,"lastName"),this._getValue(this._$email,"email"),this._getValue(this._$contactNumber,"phone"),e.firstName=this.userData.firstName,"ph"==$("#country").val()&&$("#modelTrain").val()&&(e.middleName=this.userData.middleName),e.lastName=this.userData.lastName,e.emailAddress=this.userData.email,e.GUID="",this.formSubmitData=e},a.prototype.saveAndContinue=function(){i&&i.getPredeliveryEvents().saveAndContinue(),this.getAllFieldValues();var e=this.formSubmitData,t=JSON.parse(e.formData);e.step=this.steps.activeStep,t.isSubmit=!1,t.step=this.steps.activeStep,e[this._countryCode.name]=this._countryCode.value,"null"!=this._userGUID?e.GUID=this._userGUID:e.GUID=localStorage.getItem("predeliveryGUID")||"",t.DealerCode=this._userGUID.split("-")[0],t.ToDoNo=this._userGUID.split("-")[1],t.BpId=this._userGUID.split("-")[2],e.formData=t,e.firstName=void 0,e.lastName=void 0,e.emailAddress=void 0,this.isSaveSuccessfull=!1,this.isSaveFailed=!1,this._showPreloader(),$.ajax({type:"POST",url:this._API+"/fordleads/leads/PreDelivery/saveAndContinue",data:JSON.stringify(e),dataType:"json",contentType:"application/json; charset=utf-8",async:!1,success:function(e){200===e.returnCode?(this.isSaveFailed=!1,this.isSaveSuccessfull=!0,localStorage.setItem("predeliveryGUID",e.value)):(this.isSaveSuccessfull=!1,this.isSaveFailed=!0)}.bind(this),error:function(e){this.isSaveSuccessfull=!1,this.isSaveFailed=!0}.bind(this)}),this._hidePreloader()},a.prototype._getSummaryRadioStations=function(){this.stations={fm:[],am:[]};$(".stations-row > .columns > .row");var a=$(".stations-row > .columns > .row select");a.each(function(e){var t=a.eq(e).parents(".stations-row > .columns > .row").find(".textfield input").val();switch(a.eq(e).val()){case"AM":t&&(this.stations.am.push({name:t}),this.isSummaryInnerReady=!0);break;case"FM":t&&(this.stations.fm.push({name:t}),this.isSummaryInnerReady=!0)}}.bind(this))},a.prototype._getSummaryAddresses=function(){this.userAddresses={addr1:"",addr2:""},$(".address-row").each(function(e){var t=$(".address-row").eq(e),a="",i=!1,n=!1,o=!1,r=!1,l=!1;t.find(".summary-address-type input").val()?(i=!0,a=t.find(".summary-address-type input").val()):i=!1,t.find(".summary-address input").val()?(n=!0,i?a+=", "+t.find(".summary-address input").val():a=t.find(".summary-address input").val()):n=!1,t.find(".summary-suburb input").val()?(o=!0,i||n?a+=", "+t.find(".summary-suburb input").val():a=t.find(".summary-suburb input").val()):o=!1,t.find(".summary-city input").val()?(r=!0,i||n||o?a+=", "+t.find(".summary-city input").val():a=t.find(".summary-city input").val()):r=!1,t.find(".summary-state select").val()?(l=!0,i||n||o||r?a+=", "+t.find(".summary-state select").val():a=t.find(".summary-state select").val()):l=!1,t.find(".summary-postcode input").val()&&(i||n||o||r||l?a+=", "+t.find(".summary-postcode input").val():a=t.find(".summary-postcode input").val()),a&&(this.isSummaryInnerReady=!0),this.userAddresses["addr"+(e+1)]=a}.bind(this))},a.prototype.getClimateControl=function(){return $(".summary-climate-control select").val()},a.prototype._getRadiosValues=function(){var a=!1,i=!1;$('.personalisation-form .radioButton input[type="radio"]').each(function(){var e,t;i=!1,$(this).is(":checked")?(e=$(this).val(),t=$(this).parents(".radioButton").find(".heading").text(),a=i=!0,$(".summary-section .details-title").each(function(){$(this).text()===t&&$(this).parents(".column").removeClass("ng-hide").find(".details-data").text(e)})):a&&(i=!0)}),i&&(this.isSummaryInnerReady=!0)},a.prototype._getUserMobilePhone=function(){this.userData.phone="",this._getValue($(".user-phone-name input"),"phone"),this.userData.phone&&(this.isSummaryInnerReady=!0)},a.prototype._getSummary=function(){this.isSummaryInnerReady=!1,this.getVINCode(),this._getValue(this._$userTitle,"title",!0),this._getValue(this._$firstName,"firstName"),this._getValue(this._$middleName,"middleName"),this._getValue(this._$lastName,"lastName"),this._getValue(this._$email,"email"),this._getValue(this._$contactNumber,"contactNumber"),this._getValue(this._$addr1,"addr1"),this._getValue(this._$addr2,"addr2"),this._getValue(this._$suburb,"suburb"),this._getValue(this._$postCode,"postCode"),this._getValue(this._$state,"state"),this._getSummaryRadioStations(),this._getOperations()},a.prototype._generateSummarySection=function(){this.radioSections=[];var o,r,l,e=$(".personalisation-form .radioButton"),s=!1,c=!1,t=$('.personalisation-form .hightlighted-section[data-type-of-component="favouriteStations"]').parent(".radioButton").index(),a=$('.personalisation-form .hightlighted-section[data-type-of-component="navigationSettings"]').parent(".radioButton").index();if(e.each(function(e,t){switch(r="",o=$(t).find(".hightlighted-section").data("type-of-component"),c=l=!1,o){case"mobilePhone":if(""===$(t).find(".user-phone-name input").val())return;r=$(t).find(".user-phone-name input").val(),this.isSummaryInnerReady=!0,$(t).find(".hightlighted-section").data("verify-full-width")&&(l=!0);break;case"climateControl":if(""===$(t).find("select").val())return;r=$(t).find("select").val(),this.isSummaryInnerReady=!0,$(t).find(".hightlighted-section").data("verify-full-width")&&(l=!0);break;case"radioButtons":$(t).find('input[type="radio"]');if(!(r=$(t).find('input[type="radio"]:checked').val()))return;this.isSummaryInnerReady=!0,$(t).find(".hightlighted-section").data("verify-full-width")&&(l=!0);break;case"colorizer":if(!this.lighting)return;r=this.lighting,this.isSummaryInnerReady=!0,$(t).find(".hightlighted-section").data("verify-full-width")&&(l=!0);break;case"customerNotes":if(!(n=$(t).find("textarea").val()))return;r=n,this.isSummaryInnerReady=!0,$(t).find(".hightlighted-section").data("verify-full-width")&&(l=!0);break;case"navigationSettings":if(this._getSummaryAddresses(),!this.userAddresses.addr1&&!this.userAddresses.addr2)return;this.isSummaryInnerReady=!0,$(t).find(".hightlighted-section").data("verify-full-width")&&(c=!0);break;case"favouriteStations":return void($(t).find(".hightlighted-section").data("verify-full-width")&&(s=!0));case"preferredTime":var a=$(t).find("select");if(!(r=a.eq(0).val()&&a.eq(1).val()&&a.eq(2).val()?a.eq(0).val()+":"+a.eq(1).val()+" "+a.eq(2).val():r))return void(this.preferredTime=!1);this.isSummaryInnerReady=!0,$(t).find(".hightlighted-section").data("verify-full-width")&&(l=!0);break;case"preferredTimeTwo":a=$(t).find("select");if(!(r=a.eq(0).val()&&a.eq(1).val()?a.eq(0).val()+":"+a.eq(1).val():r))return void(this.preferredTime=!1);this.isSummaryInnerReady=!0,$(t).find(".hightlighted-section").data("verify-full-width")&&(l=!0);break;case"vehicledecoration":var i=$(t).find('input[type="radio"]:checked').val();if(!(r=(r=i?$(t).find("select option:checked").val():r)||i))return;this.isSummaryInnerReady=!0,$(t).find(".hightlighted-section").data("verify-full-width")&&(l=!0);break;case"specialOccasion":if("Other."==(i=$(t).find("select option:checked").val())||"Khác."==i?$(t).find("input:last").val()&&(r=$(t).find("input:last").val()):r=i,!r)return;this.isSummaryInnerReady=!0,$(t).find(".hightlighted-section").data("verify-full-width")&&(l=!0);break;case"poojaceremony":var i=$(t).find('input[type="radio"]:checked').val(),n=$(t).find("textarea").val();if(!(r=i&&n?n:r))return;this.isSummaryInnerReady=!0,$(t).find(".hightlighted-section").data("verify-full-width")&&(l=!0)}this.radioSections.push({heading:$(t).find("p").eq(0).text(),value:r,isSeparateRow:l})}.bind(this)),this.userAddresses.addr1&&this.radioSections.splice(a,0,{heading:$('.hightlighted-section[data-type-of-component="navigationSettings"]').find(".hightlighted-section-inner.address-row").data("navigation-settings-1"),value:this.userAddresses.addr1,isSeparateRow:c}),this.userAddresses.addr2&&this.radioSections.splice(a+1,0,{heading:$('.hightlighted-section[data-type-of-component="navigationSettings"]').find(".hightlighted-section-inner.address-row").data("navigation-settings-2"),value:this.userAddresses.addr2,isSeparateRow:c}),this.stations.fm.length){var i,n=[];for(i in this.stations.fm)n.push(this.stations.fm[i]);this.radioSections.splice(t,0,{heading:$('.hightlighted-section[data-type-of-component="favouriteStations"]').find(".stations-row").data("fm-radio-settings"),value:"",array:n,isSeparateRow:s,isFMRow:!0})}if(this.stations.am.length){var d,u=[];for(d in this.stations.am)u.push(this.stations.am[d]);this.radioSections.splice(t+1,0,{heading:$('.hightlighted-section[data-type-of-component="favouriteStations"]').find(".stations-row").data("am-radio-settings"),value:"",array:u,isSeparateRow:s,isAMRow:!0})}},a.prototype.showSummarySection=function(){$(".homeBillboard.billboard").show(),this.preferredTime=!0,this._getSummary(),this._generateSummarySection();var e=!0,t=$(".stations-row > .columns > .row select").parents(".stations-row > .columns > .row").find(".textfield input"),s=(t.parent().find("small.error").text()&&(e=!1,this._scrollTo(t.parent(),500)),this.preferredTime||($(".preferred-time").find("small.preferredtimeerror").text($("#preferredtimeerror").val()),$(".preferred-two-time").find("small.preferredtimeerror").text($("#preferredtimeerror").val()),this.setActiveStep(4),e=!1),e&&(this._scrollTo("body",1e3),this.sections.welcome.active=!1,this.sections.steps.active=!1,this.sections.summary.active=!0,$("#modelTrain").val()||this.isSubmit||this.saveAndContinue()),setTimeout(function(){$(".summary-page-captcha").find(".input-field").removeClass("error").find("input").removeClass("error").parents(".summary-page-captcha").find("small.error").hide(1).parents(".summary-page-captcha").css("opacity",1),$(".captcha-refresh").click(),this._wrapSummaryColumns()}.bind(this),0),i.getPredeliveryEvents().onLoadMainSummary(this.selectedCar.model),this);switch($("#submitvariant").val()){case"none":$(".form .cta-button.submit.accordion-indicator").hide();break;case"dealerShow":$(".form .cta-button.submit.accordion-indicator").show();break;case"dealerTip":$(".form .cta-button.submit.accordion-indicator").unbind(),$(".form .cta-button.submit.accordion-indicator").bind("click",function(){layer.open({scrollbar:!1,type:1,title:!1,closeBtn:0,area:["465px !important",""],btn:["OK","Cancel"],yes:function(e,t){s.submitHandler(),$("#sumbitlayer").hide(),$(".layui-layer-btn").hide(),layer.close(e)},btn2:function(e,t){$("#sumbitlayer").hide(),$(".layui-layer-btn").hide(),layer.close(e)},shadeClose:!1,content:$("#sumbitlayer")})});break;case"dealeremail":$(".form .cta-button.submit.accordion-indicator").unbind(),this._GetDataPDFXML();var c=this.xmlpdfData,d=(c.formData=void 0,c.GUID=void 0,c.API=this._API,"ph"==$("#country").val()&&(c.email=this.userData.email,c.phone=this.userData.phone),this._emailPDF),u=this._API,s=this;this.userData.dealeremail;$(".form .cta-button.submit.accordion-indicator").bind("click",function(){$("#sumbitlayer input").val()&&$("#sumbitlayer input").attr("disabled",!0);var e="465px !important";$(window).width()<768&&(e="80% !important"),layer.open({type:1,scrollbar:!1,title:!1,closeBtn:0,area:[e,""],btn:["OK","Cancel"],yes:function(e,t){for(var a=!0,i=$("#sumbitlayer input").val().split(";"),n=!0,o=0;o<i.length;o++)if(i[o]&&($("#sumbitlayer input").attr("disabled",!0),!p(i[o]))){a=n=!1,$("#sumbitlayer input").attr("disabled",!1),layer.msg("There are some email address wrong.");break}if(n){s._GetDataPDFXML(),c.pdfVO=s.xmlpdfData.pdfVO;for(var r=0;r<i.length;r++){var l=i[r];if(l){if(!p(l)){a=!1;break}c.API=u,c.emailAddress=l,d(!0,c)}}"cn"==$("#country").val()&&(c.dealerProvince=s.selectedCar.Province,c.dealerKhet=s.selectedCar.KhetAmphoe,c.dealerName=s.selectedCar.DealerName,c.dealerLocation=s.selectedCar.DealerLocation,c.dealerAddress=s.selectedCar.DealerAddress,c.dealerCity=s.selectedCar.DealerCity,c.title=s.userData.title,c.API=u,c.emailAddress=$(".user-email input").val(),p(c.emailAddress))&&d(!0,c)}a&&($("#sumbitlayer").hide(),$(".layui-layer-btn").hide(),layer.close(e))},btn2:function(e,t){$("#sumbitlayer").hide(),$(".layui-layer-btn").hide(),layer.close(e)},shadeClose:!1,content:$("#sumbitlayer")})});break;default:$(".form .cta-button.submit.accordion-indicator").show()}},a.prototype._wrapSummaryColumns=function(){var e=$(".summary-columns-container");if(e.length){var t=e.find(".col"),a=t.length,i=$('<div class="clearfix" />'),e=$('<div class="clearfix radio-stations" />');$(".clean-row.fm-col").length&&$(".clean-row.am-col").length&&$(".clean-row.fm-col, .clean-row.am-col").wrapAll(e);for(var n=0;n<a;n+=2)t.filter(":eq("+n+"),:eq("+(n+1)+")").wrapAll(i)}},a.prototype._unWrapSummaryColumns=function(){var e=$(".summary-columns-container");e.length&&e.find(".col").unwrap()},a.prototype._getPDFData=function(){var e={},t=this.locationhost.split("/"),t=(this.carImg=t[0]+"//"+t[2]+$("#global-ux > div.content.clearfix.show-content > div:nth-child(3) > div > div > form.pdm-form.ng-valid.ng-dirty > div > div.steps-section > div.form.section.predelivery-steps > header > div > div > div:nth-child(2) > div > img").attr("src"),e.firstName=this.userData.firstName,e.lastName=this.userData.lastName,e.nameplate=this.selectedCar.model,e.model=this.selectedCar.series,e.color=this.selectedCar.color,e.dealer=this.selectedCar.dealer,e.deliveryDate=this.selectedCar.DeliveryDate.replace("/",".").replace("/","."),e.carImg=this.carImg||"",e.pdfVO={},e.pdfVO),n=(t.personalList=[],t.personalList),i=($(".hightlighted-section.summary-personalisation .summary-columns-container .clearfix ul.predelivery-details li.item").each(function(e,t){var a={};if(a.title=$(t).find("span.details-title").text().trim(),1<$(t).find("span.details-data").length){a.value="";for(var i=$(t).find("span.details-data.ng-binding.ng-scope"),e=0;e<i.length;e++)a.value=0==e?i.eq(e).text().trim():a.value+","+i.eq(e).text().trim()}else a.value=$(t).find("span.details-data").text().trim();n.push(a)}),t.atDeliveryList=[],t.atDeliveryList),o=($("div.hightlighted-section.col1 .form.section.operations-section ul.predelivery-details li.item").each(function(e,t){var a={value:""};a.title=$(t).find("span").text().trim(),i.push(a)}),t.followUpList=[],t.followUpList),r=($("div.hightlighted-section.col2 .form.section.operations-section ul.predelivery-details li.item").each(function(e,t){var a={value:""};a.title=$(t).find("span").text().trim(),o.push(a)}),t.noNeedList=[],t.noNeedList);$("div.hightlighted-section.col3 .form.section.operations-section ul.predelivery-details li.item").each(function(e,t){var a={value:""};a.title=$(t).find("span").text().trim(),r.push(a)}),t.atDeliveryWalkThroughTime=this.featureTotalWalkThroughTime,this._PDFData=e},a.prototype._getTableData=function(){this.column1Step2=[],this.column2Step2=[],this.column1Step3=[],this.column2Step3=[];var i=[],e=$(".step2-container .zebraChartTile-table"),t=$(".step3-container .zebraChartTile-table");function n(e){var t=$(e).siblings(".description-column").find("p").eq(0).html();return t=(t=-1!==t.indexOf("sup")?t.replace(/<sup>[\s\S]*?<\/sup>/,"###"+$(e).siblings(".description-column").find(".heading").find("sup").text()+"@@@"):t).replace(/(<\/?\w+?>)\s*?(<\/?\w+?>)|(<\/?\w+?>)/g,"")}e.find("td.col-1").each(function(e,t){var a;$(t).find('input[type="checkbox"]').is(":checked")&&(a=[],$(t).siblings(".description-column").find(".item").each(function(e,t){a.push($(t).text())}),i.push({subHeading:n(t),items:a}))}.bind(this)),this.column1Step2.push({stepHeading:$(".predelivery-step").eq(1).find(".step-name").text(),stepItems:i}),i=[],e.find("td.col-2").each(function(e,t){var a;$(t).find('input[type="checkbox"]').is(":checked")&&(a=[],$(t).siblings(".description-column").find(".item").each(function(e,t){a.push($(t).text())}),i.push({subHeading:n(t),items:a}))}.bind(this)),this.column2Step2.push({stepHeading:$(".predelivery-step").eq(1).find(".step-name").text(),stepItems:i}),i=[],t.find("td.col-1").each(function(e,t){var a;$(t).find('input[type="checkbox"]').is(":checked")&&(a=[],$(t).siblings(".description-column").find(".item").each(function(e,t){a.push($(t).text())}),i.push({subHeading:n(t),items:a}))}),this.column1Step3.push({stepHeading:$(".predelivery-step").eq(2).find(".step-name").text(),stepItems:i}),i=[],t.find("td.col-2").each(function(e,t){var a;$(t).find('input[type="checkbox"]').is(":checked")&&(a=[],$(t).siblings(".description-column").find(".item").each(function(e,t){a.push($(t).text())}),i.push({subHeading:n(t),items:a}))}),this.column2Step3.push({stepHeading:$(".predelivery-step").eq(2).find(".step-name").text(),stepItems:i})},a.prototype.viewSummaryPDF=function(){i&&i.getPredeliveryEvents().viewPdf(this.selectedCar.model),this._GetDataPDFXML(),$("#downloadpdf input[name=Nameplate]").val(this.xmlpdfData.Nameplate),$("#downloadpdf input[name=firstName]").val(this.xmlpdfData.firstName),$("#downloadpdf input[name=middleName]").val(this.xmlpdfData.middleName),$("#downloadpdf input[name=lastName]").val(this.xmlpdfData.lastName),$("#downloadpdf input[name=model]").val(this.xmlpdfData.model),$("#downloadpdf input[name=color]").val(this.xmlpdfData.color),$("#downloadpdf input[name=dealer]").val(this.xmlpdfData.dealer),$("#downloadpdf input[name=deliveryDate]").val(this.xmlpdfData.deliveryDate),$("#downloadpdf input[name=carImg]").val(this.xmlpdfData.carImg),$("#downloadpdf input[name=GUID]").val(this.xmlpdfData.GUID),$("#downloadpdf input[name=countryCodeISO3]").val(this.xmlpdfData.countryCodeISO3),$("#downloadpdf input[name=templateURL]").val(this.xmlpdfData.templateURL),$("#downloadpdf input[name=emailAddress]").val(this.xmlpdfData.emailAddress),$("#downloadpdf input[name=pdfVO]").val(this.xmlpdfData.pdfVO),$("#downloadpdf input[name=dealerProvince]").val(this.selectedCar.Province),$("#downloadpdf input[name=dealerKhet]").val(this.selectedCar.KhetAmphoe),$("#downloadpdf input[name=dealerName]").val(this.selectedCar.DealerName),$("#downloadpdf input[name=dealerLocation]").val(this.selectedCar.DealerLocation),$("#downloadpdf input[name=dealerAddress]").val(this.selectedCar.DealerAddress),$("#downloadpdf input[name=dealerCity]").val(this.selectedCar.DealerCity),$("#downloadpdf input[name=title]").val(this.userData.title),"ph"==$("#country").val()&&($("#downloadpdf input[name=email]").val(this.userData.email),$("#downloadpdf input[name=phone]").val(this.userData.phone)),$("#downloadpdf").submit(),this._showPreloader(),this._hidePreloader()},a.prototype._getDelaerEmail=function(){var t,e=this._preDeliveryData.getDealersEmails();return e.length&&(t=this.selectedCar.dealerID,(e=e.filter(function(e){return+JSON.parse(e.dealershipKey)==+t})).length)?e[0].dealershipEmail:""},a.prototype._getXMLData=function(){var a={};a.customer={bpId:this.bpid,toDoCode:this.todono,pdf:"Ford_Personalised_Delivery_Checklist_"+this._userGUID.split("-")[2]+"_"+this._userGUID.split("-")[1]+"_"+this._userGUID.split("-")[0]+".pdf"},a.widgets=[],$(".personalisation-form .radioButton .hightlighted-section").each(function(e,t){var i={};i.name=$(t).attr("name"),i.name||(i.name=$(t).find("div.radio-stations").attr("data-frequency-id")),i.fields=[],$(t).find("input:text,select,textarea,input:radio:checked").each(function(e,t){var a={};$(t).val()&&(a.name=$(t).attr("name"),a.textContent=$(t).val(),i.fields.push(a))}),a.widgets.push(i)}),a.preferences=[],$("div.hightlighted-section.col").each(function(e,t){var i={};i.type=$(t).attr("name"),i.categorys=[{id:$(t).find("h4.heading.sub-heading").eq(0).attr("id"),name:$(t).find("h4.heading.sub-heading").eq(0).text(),items:[]},{id:$(t).find("h4.heading.sub-heading").eq(1).attr("id"),name:$(t).find("h4.heading.sub-heading").eq(1).text(),items:[]}],$(t).find(".form.section.operations-section ul.predelivery-details li.item").each(function(e,t){var a={};$(t).find("span.details-title.keyfeature").attr("id")?(a.id=$(t).find("span.details-title.keyfeature").attr("id"),a.name=$(t).find("span.details-title.keyfeature").attr("name"),i.categorys[0].items.push(a)):$(t).find("span.details-title.otherfeature").attr("id")&&(a.id=$(t).find("span.details-title.otherfeature").attr("id"),a.name=$(t).find("span.details-title.otherfeature").attr("name"),i.categorys[1].items.push(a))}),a.preferences.push(i)}),this.xmldata=a},a.prototype.submitHandler=function(){this.captchaStatus={isSuccess:!1,isFailed:!1,isInvalid:!1,isTimeot:!1};var e=$("#imgRecaptcha").attr("src").substr($("#imgRecaptcha").attr("src").lastIndexOf("/")+1),t=$(".form-recaptcha .input-field input").val(),a={},i=(a.captchaKey=e,a.recaptcha=t,$("#global-ux > div.content.clearfix.show-content > div:nth-child(3) > div > div > form.pdm-form.ng-valid.ng-dirty > div > div.summary-section > div.summary-page-captcha.form > div > div > label > small.error"));$.ajax({url:this._API+"/fordleads/leads/PreDelivery/verifyCaptcha",type:"POST",data:a,dataType:"json",async:!1,success:function(e){200==e.returnCode?(this.captchaStatus.isSuccess=!0,this.captchaStatus.isFailed=!1,localStorage.removeItem("enterSetup"),localStorage.removeItem("step12Setup"),localStorage.removeItem("step3Setup"),localStorage.removeItem("latestUrl"),this._$scope.$apply(),this._onFormSubmit()):(this.captchaStatus.isSuccess=!1,this.captchaStatus.isFailed=!0,-1!==e.value.toString().indexOf("invalid")&&(this.captchaStatus.isInvalid=!0),$(".form-recaptcha .input-field input").val(""),$(".captcha-refresh").click(),i.show())}.bind(this),error:function(e){this.captchaStatus.isSuccess=!1,this.captchaStatus.isFailed=!0,e.value&&-1!==e.value.toString().indexOf("invalid")&&(this.captchaStatus.isInvalid=!0),$(".form-recaptcha .input-field input").val(""),$(".captcha-refresh").click()}.bind(this)})},a.prototype._GetDataPDFXML=function(){this.getAllFieldValues(),this._getXMLData(),this._getPDFData();var e=this.formSubmitData,t=this.formSubmitData,a=JSON.parse(t.formData);t.step=void 0,t.color=this._PDFData.color,t.dealer=this._PDFData.dealer,t.deliveryDate=this._PDFData.deliveryDate,t.carImg=this._PDFData.carImg,t.pdfVO=JSON.stringify(this._PDFData.pdfVO),t.model=this._PDFData.model,t.dealerProvince=this._PDFData.dealerProvince,t.dealerLocation=this._PDFData.dealerLocation,t.dealerName=this._PDFData.dealerName,t.dealerKhetAmphoe=this._PDFData.dealerKhetAmphoe,a.isSubmit=!0,a.XmlData=this.xmldata,t.formData=a,e.formData=a,"null"!=this._userGUID?t.GUID=this._userGUID:t.GUID=localStorage.getItem("predeliveryGUID")||"",t[this._countryCode.name]=this._countryCode.value,t.Nameplate=this.selectedCar.model,t.templateURL=this.righttemplateURL,this.xmlpdfData=e},a.prototype._onFormSubmit=function(){if(this.isSubmitSuccessfull=!1,this.isSubmitFailed=!1,this._GetDataPDFXML(),"ph"==$("#country").val()&&(this.xmlpdfData.email=this.userData.email,this.xmlpdfData.phone=this.userData.phone),!$("#modelTrain").val()&&$("#emailToDealer").val()&&this.dealerCodeEmailList)for(var e in this.dealerCodeEmailList)if(this.selectedCar.dealerID==this.dealerCodeEmailList[e].dealercode){this.xmlpdfData.dealerEmail=this.dealerCodeEmailList[e].dealeremail,this.xmlpdfData.dealerTemplateURL=this.xmlpdfData.templateURL;break}$.ajax({url:this._API+"/fordleads/leads/PreDelivery/submitToDealerForIND",type:"POST",data:JSON.stringify(this.xmlpdfData),async:!1,contentType:"application/json; charset=utf-8",success:function(e){200===e.returnCode?($(".homeBillboard.billboard").hide(),this._showToDoSection(),this.isSubmitSuccessfull=!0,window.onbeforeunload=null):(this.isSubmitFailed=!0,this._$scope.$apply()),this.isSubmitFailed&&layer.msg($(".message.message-error.SubmitFailed").parent().find("p").eq(1).text())}.bind(this),error:function(){this.isSubmitFailed=!0,this.isSubmitFailed&&layer.msg($(".message.message-error.SubmitFailed").parent().find("p").eq(1).text()),this._$scope.$apply()}.bind(this)}),localStorage.removeItem("predeliveryGUID"),this._hidePreloader()},a.prototype._showToDoSection=function(){this._scrollTo("body",1e3),this.sections.welcome.active=!1,this.sections.steps.active=!1,this.sections.summary.active=!1,this.sections.todo.active=!0,$(".fordpass").click(function(){$("#fordPass").css("display","block"),$(".close").click(function(){$("#fordPass").css("display","none")})}),this._$scope.$apply()},a.prototype._showMessageSection=function(e){this.sections.welcome.active=!1,this.sections.steps.active=!1,this.sections.message.active=!0,this.messages[e]=!0,$(".homeBillboard").length&&$(".homeBillboard").css("display","none")},a}),define("pre-delivery-manual-data-form/directives/preDeliveryManualForm.directive.compile",[],function(){return function(n){return function(t,a,i){t.$watch(function(e){return e.$eval(i.compile)},function(e){a.html(e),n(a.contents())(t)})}}}),define("pre-delivery-manual-data-form/services/preDeliveryManualForm.service.predeliverydata",[],function(){return function(){var a={},e=$(".your-ford-section"),t=$(".market-config-data");return a.isGUIDReceivedSuccessfully=!1,a.isGUIDReceivedUnsuccessfully=!1,a.GUIDData="",a.getSessionExpiryTime=function(){return t.data("session-expiry-time")||0},a.getModelsData=function(){return e.data("sectiondata")},a.getDealerCodeEmailData=function(){return 0<$(".dealership-section").length?$(".dealership-section").data("dealercodeemail"):0<$(".dealeraddress-section").length?$(".dealeraddress-section").data("dealercodeemail"):null},a.getDealersData=function(){return $(".dealership-section").data("dealershipdata")},a.getDealersEmails=function(){return $(".dealership-section").data("dealership-email-data")},a.getDealerMailTemplate=function(){return $(".your-ford-section").data("dealer-mail-template-url-variable-id")},a.getFordMailTemplate=function(){return $(".your-ford-section").data("ford-mail-template-url-variable-id")},a.getAPIURL=function(){return $("#serviceLayerUrl").val()},a.getEmailTemplateId=function(){return e.data("mail-template-url-variable-id")},a.getGUID=function(e){a.GUIDData="";var t=a.getAPIURL()+"/fordleads/leads/PreDelivery/loadingInformation";""!=$("#publicDomainEnabled").val()&&(t="/fordleads/leads/PreDelivery/loadingInformation"),$.ajax({type:"POST",url:t,data:{GUID:e},dataType:"json",async:!1,success:function(e){200===e.returnCode?(a.GUIDData=e,a.isGUIDReceivedSuccessfully=!0,a.isGUIDReceivedUnsuccessfully=!1):(a.isGUIDReceivedSuccessfully=!1,a.isGUIDReceivedUnsuccessfully=!0,a.GUIDData="")},error:function(){a.isGUIDReceivedSuccessfully=!1,a.isGUIDReceivedUnsuccessfully=!0,a.GUIDData=""}})},a.getStates=function(){var e=$(".user-postcode"),t="regions-config-json";return e.length&&e.data(t)?e.data(t):""},a}}),define("pre-delivery-manual-data-refresh/component.preDeliveryManualForm.app",["angular"],function(e){return e.module("preDeliveryManualDataRefresh",["ngSanitize"])}),define("pre-delivery-manual-data-refresh/component.preDeliveryManualForm.controllers",["pre-delivery-manual-data-refresh/component.preDeliveryManualForm.app","pre-delivery-manual-data-refresh/controllers/preDeliveryManualForm.controller.main"],function(e,t){e.controller("MainCtrl",["$scope","$sce","$http","preDeliveryDataFormService","$timeout",t])}),define("pre-delivery-manual-data-refresh/component.preDeliveryManualForm.directives",["pre-delivery-manual-data-refresh/component.preDeliveryManualForm.app","pre-delivery-manual-data-refresh/directives/preDeliveryManualForm.directive.compile"],function(e,t){e.directive("compile",["$compile",t])}),define("pre-delivery-manual-data-refresh/component.preDeliveryManualForm",["jquery","angular","analytics/analyticsEventLayer","marketConfigGlobal","pre-delivery-manual-data-refresh/component.preDeliveryManualForm.app","pre-delivery-manual-data-refresh/component.preDeliveryManualForm.controllers","pre-delivery-manual-data-refresh/component.preDeliveryManualForm.directives","pre-delivery-manual-data-refresh/component.preDeliveryManualForm.services","analytics/analyticsUtilities"],function(l,t,e,a){var i={};function s(){var e,n=new Array,o=new Array,t=new Object;l(".welcome-section").find("input").each(function(e,t){var t=l(t),a=t.attr("id"),i=t.parent().parent().parent().parent().parent();return-1!=i.attr("class").indexOf("user-date")?(o.push(i.attr("class")),n.push(t.val()),!0):a?-1!=t.attr("id").indexOf("search")||(-1!=t.attr("id").indexOf("s2id")?(t.parents(".select2-container").select2("data")&&n.push(t.parents(".select2-container").select2("data").id),t.parent().attr("id")&&o.push(t.parent().attr("id")),!0):void 0):t.attr("name")?(n.push(t.val()),o.push(t.attr("name")),!0):(n.push(t.val()),void o.push(t.parent().parent().parent().parent().parent().attr("class")))}),null!=localStorage.enterSetup&&(e=JSON.parse(localStorage.enterSetup)).colorPic&&(o.push("colorPic"),n.push(e.colorPic));for(var a=0;a<o.length;a++)o[a]&&(t[o[a]]=n[a]);t=JSON.stringify(t),localStorage.enterSetup=t,localStorage.latestUrl=window.location.pathname}return i.init=function(){var e,r;function n(e){return e<10?"0"+e:e}l(".preDeliveryManualDataRefresh").length&&((e=l(".footer")).find(".search.footer-search").remove(),e.find(".footer-links").remove(),e.find(".footer-middle").hide(),e.find(".footer-bottom .footer-bottom-assistance").remove()),l("#modelTrain").val()&&(null!=localStorage.latestUrl&&localStorage.latestUrl!=window.location.pathname&&(localStorage.removeItem("enterSetup"),localStorage.removeItem("step12Setup"),localStorage.removeItem("step3Setup")),null!=localStorage.enterSetup?(r=JSON.parse(localStorage.enterSetup),l(".welcome-section").find("input").each(function(e,t){var a,i,n=l(t),t=n.attr("id"),o=n.parent().parent().parent().parent().parent();if(-1!=o.attr("class").indexOf("user-date"))return r[o.attr("class")]&&setTimeout(function(){n.val(r[o.attr("class")]).change()},1),n.change(s),!0;t?n.parent().attr("id")&&!isNaN(n.parent().attr("id").indexOf("autogen"))&&-1!=n.parent().attr("id").indexOf("autogen")?(r[n.parent().attr("id")]&&n.parent().next().select2("val",r[n.parent().attr("id")]).change(),n.parent().next().change(s)):n.parent().attr("id")&&(a="#"+n.parent().attr("id").substring(5),(i=r[n.parent().attr("id")])&&setTimeout(function(){var e=new Array;n.parent().next().find("option").each(function(){l(this).val()&&e.push(l(this).val())}),-1!=l.inArray(i,e)&&l(a).select2("val",i).change()},1),l(a).change(s)):(n.attr("name")?r[n.attr("name")]&&n.val(r[n.attr("name")]).change():(t=n.parent().parent().parent().parent().parent(),r[t.attr("class")]&&n.val(r[t.attr("class")]).change()),n.change(s))}),setTimeout(function(){var e,t,a,i=!(!l("#deliveryDateFMTDDMMYY").length||!l("#deliveryDateFMTDDMMYY").val());l(".user-date1").length&&!(e=l(".user-date1").find("input").eq(0)).val()&&((t=new Date).setDate(t.getDate()+2),a=i?(a=n(t.getDate())+"/",(a+=n(t.getMonth()+1)+"/")+t.getFullYear()):(a=n(t.getMonth()+1)+"/",(a+=n(t.getDate())+"/")+t.getFullYear()),e.val(a).change())},100)):s()),t.bootstrap(document,["preDeliveryManualDataRefresh"])},i}),define("pre-delivery-manual-data-refresh/component.preDeliveryManualForm.services",["pre-delivery-manual-data-refresh/component.preDeliveryManualForm.app","pre-delivery-manual-data-refresh/services/preDeliveryManualForm.service.predeliverydata"],function(e,t){e.service("preDeliveryDataFormService",[t])}),define("pre-delivery-manual-data-refresh/controllers/preDeliveryManualForm.controller.main",["form/component.form.validation","analytics/analyticsEventLayer","mediaQuery","marketConfigGlobal","getImgSlToken"],function(o,r,e,l,t,a,i,n){function s(e,t,a,i,n){this._formValidation=o,this._$scope=e,this._sce=t,this._$http=a,this._preDeliveryData=i,this._$timeout=n,this.dmsdata="",$("#modelTrain").val()?this.models=(e=>{var t=e;if(void 0!==t&&0<t.length)for(var a=0;a<t.length;a++){var i=t[a].seriesList;t[a].seriesList=((e,t)=>{for(var a=[],i={},n=0;n<e.length;n++)void 0===i[e[n][t]]&&(i[e[n][t]]=e[n][t],a.push(e[n]));return a})(i,"seriesValue")}return t})(i.getModelsData()):this.models=i.getModelsData(),this.featureWalkThroughTime=1,this.featureWalkThroughTimeUnit=$("#featureWalkThroughTimeUnit").val(),this.totalWalkthroughtime="00:00 "+this.featureWalkThroughTimeUnit,this.SeriesVal=[],this.dealers=i.getDealersData(),this.province=$(".dealeraddress-section").data("dealernewaddressdata"),this._API=i.getAPIURL(),this._emailTemplateId=i.getEmailTemplateId(),this._dealerMailTemplate=this._preDeliveryData.getDealerMailTemplate(),this._fordMailTemplate=this._preDeliveryData.getFordMailTemplate(),this._userStoredData={},this.userData={title:"",firstName:"",lastName:"",email:"",contactNumber:"",addr1:"",addr2:"",suburb:"",postCode:"",state:"",phone:"",climateControl:"",deliverydate:"",dealerEmail:"",dealerlocation:"",dealerAddress:"",VinFGE:""},this.carModel="",this._oldModel="",this.carImg="",this.xmldata="",this.selectedCarSeries="",this._oldSeries="",this.carSeriesList={},this.isSeriesDropdownDisabled=!0,this.isOptionsReady=!1,this.preferredTime=!0,this.selectedColor="",this.carColorsList={},this.isColorDropdownDisabled=!0,this.isPreviewReady=!1,this._isModelChanged=!1,this._isSeriesChanged=!1,this.dealerState="",this.dealersList=[],this.dealerProvince="",this.dealerKhetAmphoe="",this.dealerName="",this.KhetAmphoeList=[],this.DealerNameList=[],this.dealerAddressList=[],this.isDealerKhetAmphoeDropdownDisabled=!0,this.isDealernameDropdownDisabled=!0,this.isDealerAddressDropdownDisabled=!0,this.selectedCar={},this.vinCode="",this.dealerShip="",this.optionsList=[],this.selectedOptionsList=[],this.isDealerShipDropdownDisabled=!0,this.radioSections=[],this.walkThroughTime=0,this._$body=$("body"),this._$model=$("#select-model"),this._$series=$("#select-series"),this._$color=$("#select-color"),this._$userTitle=$(".user-title select"),this._$firstName=$(".user-first-name input"),this._$middleName=$(".user-middle-name input"),this._$lastName=$(".user-last-name input"),this._$email=$(".user-email input"),this._$contactNumber=$(".user-contact-number input"),this._$addr1=$(".user-addr1 input"),this._$addr2=$(".user-addr2 input"),this._$suburb=$(".user-suburb input"),this._$state=$(".user-state select"),this._$VINCode=$(".vinData input"),this._$dealerState=$("#select-dealership"),this._$dealer=$("#select-dealer"),this._$content=$(".content"),this._$deliverydate=$(".PrepreredDeliveryDate input"),this._$dealerlocation=$(".dealerlocation input"),this.sections={welcome:{active:!this._userStep},steps:{active:!!this._userStep},summary:{active:!1},thankyou:{active:!1},todo:{active:!1},message:{active:!1}},this.stations={fm:[],am:[]},this.splGuests=[],this.userAddresses={addr1:"",addr2:""},this.lighting="",this.userNotes="",this.isSummaryInnerReady=!1,this.step1HTML="",this.step2HTML="",this.step3HTML="",this.step4HTML="",this.step5HTML="",this.step4part1="",this.step4part2="",this.questionaireTabs="",this.questionaireStepsHTML="",this.emailnumber=[],this.formSubmitData=null,this.optionPack=[],this.isSaveSuccessfull=!1,this.isSaveFailed=!1,this.PDF="",this.isSubmitSuccessfull=!1,this.isSubmitFailed=!1,this.isStepsSectionReady=!1,this.personalizeSectionActive=!1,this._href=window.location.href,this.dealerCodeEmailList=i.getDealerCodeEmailData(),this._oldCar="",this.xmlpdfData="",this.isAuthorMode=Boolean(this._$body.find(".author-only-placeholder").length),this._countryCode={name:"countryCodeISO3",value:$("#countryCodeISO").val()},this.messages={submittedGUID:!1,wrongGUID:!1},this._states=this._preDeliveryData.getStates(),this._userStep=parseInt(this._getParameterByName("step")),this._userGUID=String(this._getParameterByName("id")),this.steps={count:document.querySelectorAll(".predelivery-step").length,activeStep:this._userStep||0},this.isEmailSent=!1,this.isFeaturePageLoaded=!1,this.featuresShowMeFlag=!1,this.featuresShowMeLaterFlag=!1,this.noModel=!1,this.questionaireNavTabs=[],this.questionaireNavPersonalizeTabs=[],this.PersonalizeTabsAnalytics=[],this.nextBtnLabel="",this.backBtnLabel="",this.questionairreTabs=$(".questionairre-tabs"),this.nextStepBtn=$(".nextStepBtn"),this.reviewStepBtn=$(".reviewBtn"),this.stepsHeader=$(".steps-header"),this.personalizePositon=$("#personalizePositon").val(),this.staticQns=$("#staticQns").val(),this.submitError="",this.emailPDFError="",this.featureListJson=[],this.modelAvailable=!1,this.GUIDresponseData="",this.otherOccasion=!1,this.stationValCount=0,this.stationCount=0,this.isEmailValid=!1,this.valueLength="",this.featuresHeaderArr=[],this.dummyGUID="12345-TEST123123-123123",this.preferredTimeError=$("#preferredtimeerror").val(),this.emailPDFErrorMsg=$("#emailPdfErrorMsg").val(),this.deleteBtnTxt=$("#deleteBtnTxt").val(),this.nameplateModel="",this.dealerIDModel="",this.additionalDealerEmail="",this.backToHomeTxt=$("#backToHomeTxt").val(),this.overlayCloseBtnTxt=$("#overlayCloseBtnTxt").val(),this.otherOccasionVal="",this.modelConfigPath=$("#modelConfigPath").val(),this.headerText=$("#headerText").val(),this.confirmPopupYesText=$("#confirmPopupYesText").val(),this.confirmPopupCancelText=$("#confirmPopupCancelText").val(),this.showConfirmPopupCountryList=["THA","THE"],this.fordPassPopUpYesText=$("#fordPassPopupYesText").val(),this.showFordPassPopupCountryList=["THA","THE","ZAF","NZL"],this.showFordPassPopupFlag=!1,this.isFordPassShown=!1,this.amRadioFrequencyUnit=$("#amRadioFrequencyUnit").val(),this.fmRadioFrequencyUnit=$("#fmRadioFrequencyUnit").val(),this.emailTemplatesJson=$(".your-ford-section").data("emailtemplatesjson"),this.dealerGroupMail=$("#dealerGroupMail").val(),this.encCountryCode=["NZL","PHL","VNM"],this.deliveryDateFMTDDMMYY=!!$("#deliveryDateFMTDDMMYY").val(),this.isImgSLEnabled="true"==$("#isImgSLEnabled").val(),this.imgSlEndpoint=$("#apigeeDomain").val(),this.saveJourneyData=this.isImgSLEnabled?$("#saveJourneyData").val():"/fordleads/leads/PreDelivery/saveDataToRetrieve",this.loadCustomerDealerInfo=this.isImgSLEnabled?$("#loadCustomerDealerInfo").val():"/fordleads/leads/PreDelivery/loadingByUrlForIND",this.sendEmailPdfToDealer=this.isImgSLEnabled?$("#sendEmailPdfToDealer").val():"/fordleads/leads/PreDelivery/submitToDealerEmailPdf",this.loadJourneyData=this.isImgSLEnabled?$("#loadJourneyData").val():"/fordleads/leads/PreDelivery/loadingInformationForIND",this.downloadPdf=this.isImgSLEnabled?$("#downloadPdf").val():"/fordleads/leads/PreDelivery/downloadPdf",this.getTokenAtFirst=!0,this.requestHeaders={},this.tokenCreationTime="",this.isTokenExpired=!1,this._initPreDelivery(),this._existDataFormNew()}function d(e){return-1!=e.search(/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/)}function c(e){return e<10?"0"+e:e}function u(){$("select.select2-offscreen").each(function(e,t){t=$(t).find("option:first");""==t.attr("value")&&t.attr("disabled","disabled")})}function p(e){""==$("#"+e).find("option:first").text()&&$("#"+e).find("option:first").detach(),$("#"+e).siblings("div").find("span.select2-chosen").text($("#"+e).find("option:first").text())}return s.prototype._emailNewPDF=async function(e,t,a){var i="PDSD",n=(this.emailTemplatesJson&&this.emailTemplatesJson.length&&this.emailTemplatesJson.forEach(function(e,t){if(e.modelKey==this.selectedCar.seriesValue&&"none"!=e.templateType)return i=e.templateType,!1}.bind(this)),new URL(window.location)),o=n.origin;this.locationhost=o+n.pathname.replace(".html",""),"/"==this.locationhost.substr(this.locationhost.length-1,1)?(this.righttemplateURL=this.locationhost+"form-landing.edm."+i+".data",this.errortemplateURL=this.locationhost+"form-landing.edm.B.data"):(this.righttemplateURL=this.locationhost+"/form-landing.edm."+i+".data",this.errortemplateURL=this.locationhost+"/form-landing.edm.B.data");o=e?this.righttemplateURL:this.errortemplateURL,n=await this.prepareLinks(this.sendEmailPdfToDealer);t.templateURL=o,t.API=void 0,$.ajax({type:"POST",url:n.apiLink,headers:n.header,data:this.isImgSLEnabled?JSON.stringify(t):t,dataType:this.isImgSLEnabled?"json":"application/json",contentType:this.isImgSLEnabled?"application/json; charset=utf-8":"application/x-www-form-urlencoded; charset=UTF-8",async:!1,success:function(e){this.sendEmailCompleteResponse(e,a)}.bind(this),error:function(e){this.sendEmailCompleteResponse(e)}.bind(this)})},s.prototype.sendEmailCompleteResponse=function(e,t){e=e?.responseText?JSON.parse(e?.responseText):e;this._hidePreloading(),"Success"!=e.value||200!=e.returnCode&&200!=e.status?this.sendEmailErrorResponse(e):setTimeout(function(){this.sections.thankyou.active?($("body").find(".emailPDF").addClass("email-sent"),this.emailPDFError=""):(this._showThankyouSection(),this.submitError=""),null!=t&&(this.isEmailSent=!0),this._$scope.$apply()}.bind(this),10)},s.prototype.sendEmailErrorResponse=function(e){var t="",t=this.isImgSLEnabled?e?.hasOwnProperty("responseJSON")?e?.responseJSON?.Error:e?.hasOwnProperty("error")?e?.messages&&e?.messages[0]:this.emailPDFErrorMsg:this.emailPDFErrorMsg;this.sections.thankyou.active?this.emailPDFError=t:this.submitError=t},$.fn.equalHeightContent=function(){var e=0;$(this).each(function(){e=Math.max($(this).height(),e)}),$(this).each(function(){$(this).height(e)})},s.prototype._inputEmail=function(){var l,s,c,e;this.isEmailSent||(this._GetDataPDFXML(),(l=this.xmlpdfData).formData=void 0,l.GUID=1==this.isExistData?this._userGUID:this.dummyGUID,l.dealerProvince=this.selectedCar.Province,l.dealerKhet=this.selectedCar.KhetAmphoe,l.dealerName=this.selectedCar.DealerName,l.dealerLocation=this.selectedCar.DealerLocation,l.dealerAddress=this.selectedCar.DealerAddress,l.dealerCity=this.selectedCar.DealerCity,l.title=this.userData.title,this.isImgSLEnabled&&(l.dealerEmail=this.userData.dealerEmail),"ph"==$("#country").val()&&(l.email=this.userData.email,l.phone=this.userData.phone),l.contactNumber=this.userData.contactNumber,l.submitStatus=1,s=this._API,c=this,$("#emailpdflayer input[name=emailpdf1]").val(this.userData.email),e="465px !important",$(window).width()<768&&(e="80% !important"),layer.open({type:1,title:!1,scrollbar:!1,closeBtn:0,area:[e,""],btn:["OK","Cancel"],yes:function(e,t){for(var a=!0,i=[],n=0;n<$("#emailpdflayer input").length;n++)i.push($("#emailpdflayer input").eq(n).val());for(var o=!0,r=0;r<i.length;r++)if(i[r]&&!d(i[r])){a=o=!1,layer.msg("The "+(r+1)+" line email address is wrong.");break}o&&(c._showPreloading(),$("#emailpdflayer input").each(function(e,t){t=$(t).val();t&&(d(t)?(l.API=s,l.emailAddress=t,setTimeout(function(){c._emailNewPDF(!0,l,!0),c._$scope.$apply()},10)):a=!1)})),a&&($("#emailpdflayer").hide(),$(".layui-layer-btn").hide(),layer.close(e))},btn2:function(e,t){$("#emailpdflayer").hide(),$(".layui-layer-btn").hide(),layer.close(e)},shadeClose:!1,content:$("#emailpdflayer")}))},$.getUrlParam=function(e){e=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),e=window.location.search.substr(1).match(e);return null!=e?e[2]:null},s.prototype._showLandingPage=function(){setTimeout(function(){document.getElementById("hideAll").style.display="none",this._$scope.$apply()}.bind(this),200)},s.prototype._existDataFormNew=async function(){$("#downloadpdf").attr("action",this._API+"/fordleads/leads/PreDelivery/downloadPdf"),$("div.box-content .checkbox.section input").attr({id:"",name:""}),this.isExistData=!0;var e,t,a=new URL(window.location),i=a.origin;if(this.locationhost=i+a.pathname.replace(".html",""),"/"==this.locationhost.substr(this.locationhost.length-1,1)?(this.righttemplateURL=this.locationhost+"form-landing.edm.PDSD.data",this.errortemplateURL=this.locationhost+"form-landing.edm.B.data"):(this.righttemplateURL=this.locationhost+"/form-landing.edm.PDSD.data",this.errortemplateURL=this.locationhost+"/form-landing.edm.B.data"),$("#emailnumberLabel").val())for(var n=0;n<$("#emailnumberLabel").val();n++)this.emailnumber.push(n);else this.emailnumber.push(0);0<$("#modelTrain").length?($(".footer").find(".footer-middle").show(),this.selectedCar.DeliveryDate="",this.isSubmit=!1,this.isdatepast=!1,$("#modelTrain").val()&&(this.isExistData=!1,$(".welcome-section").show(),$(".cta-button.save").hide(),$(".yourdetail").hide(),$(".summary-page-captcha.form").hide(),$(".welcome-section").length&&$(".welcome-section select").select2({dropdownCssClass:"pre-delivery-selected-style",minimumResultsForSearch:-1}),$(".PrepreredDeliveryDate input")&&(this.deliveryDateFMTDDMMYY?$(".PrepreredDeliveryDate input").datepicker({minDate:new Date,dateFormat:"dd/mm/yy"}):$(".PrepreredDeliveryDate input").datepicker({minDate:new Date}),null!=localStorage.enterSetup&&JSON.parse(localStorage.enterSetup)["user-date1"]?$(".PrepreredDeliveryDate input").val(JSON.parse(localStorage.enterSetup)["user-date1"]):((i=new Date).setDate(i.getDate()+2),a=c(i.getDate()),t=c(i.getMonth()+1),i=i.getFullYear(),t=this.deliveryDateFMTDDMMYY?a+"/"+t+"/"+i:t+"/"+a+"/"+i,$(".PrepreredDeliveryDate input").val(t))),(a=$.getUrlParam("dealerid"))&&(0<$(".dealership-section").length&&alert("dealership No this function"),0<$(".dealeraddress-section").length)&&(e=(e=>{for(var t=$(".dealeraddress-section").data("dealeraddressdata"),a=0;a<t.length;a++)for(var i=0;i<t[a].KhetAmphoeList.length;i++)for(var n,o=t[a].KhetAmphoeList[i],r=0;r<o.DealerNameList.length;r++)if(o.DealerNameList[r].id==e)return n=o.DealerNameList[r],{provicevalue:t[a].Provincevalue,khetamphoevalue:o.KhetAmphoevalue,dealernamevalue:n.value};return!1})(a))&&$(document).ready(function(){$("#select-Province").select2("val",e.provicevalue).change(),$("#select-KhetAmphoe").select2("val",e.khetamphoevalue).change(),$("#select-Dealername").select2("val",e.dealernamevalue).change(),$("#select-Province,#select-KhetAmphoe,#select-Dealername,.dealerlocation input").attr("disabled","disabled")}),u(),$(".pdm-form").show(),this._showLandingPage(),r.getPredeliveryRefreshEvents().loadTrainingPage()),1==this.isExistData&&("edit"!=$("#iseditor").val()&&$(".welcome-section").hide(),$(".yourdetail").hide(),i="",t=$.getUrlParam("dmsdata"),i="?dmsdata="+(this.dmsdata=t),this.encCountryCode.includes(this._countryCode.value)&&(void 0!==(a=$.getUrlParam("enckey"))&&(i+="&enckey="+a),void 0!==(t=$.getUrlParam("iv"))&&(i+="&iv="+t),i+="&countryCode="+this._countryCode.value),a=await this.prepareLinks(this.loadCustomerDealerInfo),$.ajax({type:"GET",url:a.apiLink+i,dataType:"json",headers:a.header,async:!1,success:function(e){if("fail"!=e.value||"200"==e.returnCode){if(this.selectedCar.dealer=e.DealerName,this.selectedCar.dealerID=e.DealerCode,this.selectedCar.DeliveryDate=e.DeliveryDate.replace(".","/").replace(".","/"),this.selectedCar.modelValue=e.Model,this.selectedCar.model=e.ModelName,this.selectedCar.color=e.Color,this.selectedCar.series=e.SeriesName,this.selectedCar.seriesValue=e.Series,this.selectedCar.DealerName=e.DealerName,this._userGUID=e.value,this.bpid=e.BpId,this.todono=e.ToDoNo,this.userData.firstName=e.FirstName,this.userData.lastName=e.LastName,this.userData.email=e.Email,this.userData.title=e.Gender,this.userData.contactNumber=e.MobilePhoneNo,this.userData.VinFGE=e.VIN||"",this.additionalDealerEmail=e.additionalDealerEmail||"",null!=this.selectedCar.dealerID)for(var t in this.province)for(var a in this.province[t].dealershipList)if(this.province[t].dealershipList[a].dealershipKey==this.selectedCar.dealerID){this.selectedCar.Province=this.province[t].dealerShipCityValue,this.userData.dealerEmail=this.province[t].dealershipList[a].dealerlocation[0].dealeremail;break}null!=this.selectedCar.series?(null!=this._userGUID&&this.getGUIDData(),this._getCarImage(),null!=this.selectedCar.DeliveryDate&&this._checkDeliveryDate(),this._renderStepsSection(),setTimeout(function(){this._prefillGUIDresponseData(this.GUIDresponseData),this._$scope.$apply()}.bind(this),400)):this._errordata(i="Your selected car series data is not found")}else{var i="Some error occured while fetching the data";this._errordata(this.isImgSLEnabled?e?.responseJSON?.Error:i)}}.bind(this),error:function(e){this._errordata(this.isImgSLEnabled?e?.responseJSON?.Error:"Some error occured while fetching the data")}.bind(this)}),$(".pdm-form").show(),this._showLandingPage())):($(".footer").find(".footer-middle").remove(),this.isExistData=!1)},s.prototype.prepareLinks=async function(e){return this.isImgSLEnabled&&await this.getToken(),{apiLink:this.isImgSLEnabled?this.imgSlEndpoint+e:this._API+e,header:this.isImgSLEnabled?this.requestHeaders:{}}},s.prototype.getToken=async function(){if(""!=this.tokenCreationTime&&(this.isTokenExpired=t.checkTokenIsExpired(this.tokenCreationTime)),this.getTokenAtFirst||this.isTokenExpired)try{await t.getShopToken().then(function(e){e?.token&&(this.requestHeaders.Authorization="Bearer "+e?.token),this.tokenCreationTime=e?.createdOn,this.getTokenAtFirst=!1}.bind(this)).catch(function(e){this._errordata(e?.message)}.bind(this))}catch(e){console.error(e)}},s.prototype._getCarImage=function(){var e=window.location.pathname;-1!=e.indexOf(".html")&&(e=e.substring(0,e.indexOf(".html"))),$.ajax({type:"GET",url:e+".landingpageimage."+this.selectedCar.modelValue+"."+this.selectedCar.seriesValue+"."+this.selectedCar.color+".data",dataType:"html",async:!1,success:function(e){"fail"!=e.value||"200"==e.returnCode?setTimeout(function(){this.selectedCar.image=e.replaceAll('"',""),this._$scope.$apply()}.bind(this),200):console.error("Some error occured while getting car image")}.bind(this),error:function(e){console.error("Some error occured while getting car image")}.bind(this)})},s.prototype.getGUIDData=async function(){var e=await this.prepareLinks(this.loadJourneyData),t="Some error occured while getting data using GUID";$.ajax({type:"GET",url:e.apiLink+"?GUID="+this._userGUID,headers:e.header,dataType:"json",async:!1,success:function(e){200==e.returnCode||"200"==e.status||"200"==e.returnCode?(e.submitStatus&&null!=e.submitStatus&&(this.isSubmit=1==e.submitStatus),this.totalWalkthroughtime=e.walkThroughTime,$(".footerTip > span").text(this.totalWalkthroughtime),this.GUIDresponseData=e):500==e.returnCode||"500"==e.status?console.error(this.isImgSLEnabled?e?.responseJSON?.Error:"The API Is Wrong!"):console.error(this.isImgSLEnabled?e?.responseJSON?.Error:t)}.bind(this),error:function(e){console.error(this.isImgSLEnabled?e?.responseJSON?.Error:t)}.bind(this)})},s.prototype._checkDeliveryDate=function(){var e=new Date,e=e.getFullYear()+""+(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+(e.getDate()<10?"0"+e.getDate():e.getDate()),t=this.selectedCar.DeliveryDate.split("/");t[2]+t[1]+t[0]<e&&setTimeout(function(){this.isdatepast=!0,this._$scope.$apply()}.bind(this),200)},s.prototype._prefillGUIDresponseData=function(e){var t=this;if(e){var a,i=e.hasOwnProperty("categoryList"),n=e.personaliseList,o=0;if("first"==this.personalizePositon?(a=this.questionaireNavPersonalizeTabs,o=1):a=this.questionaireNavTabs,1==i&&a.length){for(var r=e.categoryList,l=0;l<r.length;l++){var s=$(a[l+o].target).find(".subcatcategoryConfig");r[l].categoryIsVisited&&$(".questionairre-tabs .tabs-nav-list > li").eq(l+o).addClass("completed");for(var c=0;c<r[l].subCategory.length;c++)for(var d=0;d<r[l].subCategory[c].subcategoriesFeatureList.length;d++)(t.isdatepast||t.isSubmit)&&s.eq(c).find("li").eq(d).find('input[type="radio"]').attr("disabled",!0),null==r[l].subCategory[c].subcategoriesFeatureList[d].subcategoriesFeatureSelectedValue?s.eq(c).find("li").eq(d).find('input[type="radio"]').prop("checked",!1):s.eq(c).find("li").eq(d).find('input[type="radio"][value="'+r[l].subCategory[c].subcategoriesFeatureList[d].subcategoriesFeatureSelectedValue+'"]').prop("checked",!0)}e.isPersonaliseVisited&&("first"==this.personalizePositon?$(".questionairre-tabs .tabs-nav-list > li").eq(0):$(".questionairre-tabs .tabs-nav-list > li").eq(this.questionaireNavTabs.length-1)).addClass("completed")}else console.log("No datas are present in categories list");if(n.length)for(l=0;l<n.length;l++){var u=n[l].sectionName,p=n[l].value,m=n[l].heading,h=n[l].hasOwnProperty("isCheckboxHasOther")&&n[l].isCheckboxHasOther,f=n[l].hasOwnProperty("isRadioHasOther")&&n[l].isRadioHasOther,g="",v=$("#personalize .radioButton .hightlighted-section[data-type-of-component="+u+"]");switch(u){case"preferredTimeTwo":var y=p.split(":"),b=y[0],w=y[1];0==y[0].indexOf(0)&&(b=b.replace(/^0+/,"")),0==y[1].indexOf(0)&&(w=w.replace(/^0+/,"")),v.find(".Hour.dropdown select").val(b).trigger("change"),v.find(".Minute.dropdown select").val(w).trigger("change");break;case"radioButtons":v.each(function(){if(m==$(this).find(".left-title").text().trim())return $(this).find('input[type="radio"][value="'+p+'"]').prop("checked",!0),!1});break;case"radioButtonsWithTextbox":v.each(function(){if(m==$(this).find(".left-title").text().trim())return f?(splitOtherRadioValue=p.split("-"),$this.find('input[type="radio"][value="'+splitOtherRadioValue[0].trim()+'"]').prop("checked",!0),$this.find(".input-field input").val(splitOtherRadioValue[1].trim())):$(this).find('input[type="radio"][value="'+p+'"]').prop("checked",!0),!1});break;case"checkboxes":v.each(function(){var e,a=$(this);if(m==a.find(".left-title").text().trim())return e=p.split(","),$.each(e,function(e,t){a.find('input[type="checkbox"][value="'+t.trim()+'"]').prop("checked",!0)}),h&&(splitOtherValue=e[e.length-1].split("-"),a.find('input[type="checkbox"][value="'+splitOtherValue[0].trim()+'"]').prop("checked",!0),a.find(".input-field input").val(splitOtherValue[1].trim())),!1});break;case"mobilePhone":v.find(".input-field input").val(p);break;case"customerNotes":v.find(".remarks-section textarea").val(p).change();break;case"specialOccasion":n[l].hasOwnProperty("otherOccasion")?(v.find("select").val(v.find("select option:last").val()).trigger("change"),v.find(".Other.textfield input").val(p)):v.find("select").val(p).trigger("change");break;case"specialGuests":if(n[l].splarray&&n[l].isSplGuestRow)for(c=0;c<n[l].splarray.length;c++){var C=n[l].splarray[c].salutation,k=n[l].splarray[c].firstname,S=n[l].splarray[c].lastname;(0<c?($(".special-guests .addSpclGuestBtn").trigger("click"),v.find(".addSpecialGuestBox .special-guests-content").eq(c-1).find("select").val(C).trigger("change"),v.find(".addSpecialGuestBox .special-guests-content").eq(c-1).find(".mobileSpecialFristName .input-field input").val(k),v.find(".addSpecialGuestBox .special-guests-content").eq(c-1).find(".mobileSpecialLastName .input-field input")):(v.find(".special-guests-content select").val(C).trigger("change"),v.find(".special-guests-content .mobileSpecialFristName").find(".input-field input").val(k),v.find(".special-guests-content .mobileSpecialLastName").find(".input-field input"))).val(S)}break;case"favouriteStations":if(n[l].isFMRow&&1==n[l].isFMRow?g="FM":n[l].isAMRow&&1==n[l].isAMRow&&(g="AM"),0==t.stationCount)for(c=0;c<n[l].array.length;c++){var x=n[l].array[c].name;(0<c?($(".addStationBtn").trigger("click"),v.find(".addStationContentBox .addStation-content").eq(c-1).find("select").val(g).trigger("change"),v.find(".addStationContentBox .addStation-content").eq(c-1).find(".input-field input")):(v.find(".addStation-content select").val(g).trigger("change"),v.find(".addStation-content .input-field input"))).val(x),t.stationValCount+=c}else for(c=0;c<n[l].array.length;c++){$(".addStationBtn").trigger("click");var D=n[l].array[c].name;v.find(".addStationContentBox .addStation-content").eq(t.stationValCount).find("select").val(g).trigger("change"),v.find(".addStationContentBox .addStation-content").eq(t.stationValCount).find(".input-field input").val(D),t.stationValCount++}t.stationCount++}(t.isdatepast||t.isSubmit)&&($("#personalize .radioButton").each(function(){$(this).find("input[type=radio],input[type=checkbox],input[type=text],select,textarea").attr("disabled",!0)}),setTimeout(function(){$(".addStationBtn, .remove_btn, .addSpclGuestBtn, .remove_btn_special_guest, .submitToDealer, .btn-editFeatures").hide(),t._$scope.$apply()},200))}else console.log("No datas are present in personalize list")}else(t.isdatepast||t.isSubmit)&&($('.predelivery-step input[type="radio"]').attr("disabled",!0),$("#personalize .radioButton").each(function(){$(this).find("input[type=radio],input[type=checkbox],input[type=text],select,textarea").attr("disabled",!0)}),setTimeout(function(){$(".addStationBtn, .remove_btn, .addSpclGuestBtn, .remove_btn_special_guest, .submitToDealer, .btn-editFeatures").hide(),t._$scope.$apply()},200))},s.prototype._errordata=function(e){e='<div class="content"><div class="section summary"><div class="row"><div class="columns"><p class="intro">'+e+"</p></div></div></div>",$(".pdm-form").html(""),$(".pdm-form").append(e)},s.prototype._initPreDelivery=function(){this._formValidation.init($(".pdm-form")),this._listenForEvents()},s.prototype._listenForEvents=function(){var i=this,a=(this._$body.on("change",".featureDetails .feature_radio",function(){var e=$(this),t=e.parents(".tabs-content").attr("id"),a=e.parents(".accordianMain-content").attr("id"),t=$("#"+t+" ."+a+" .selectAll:checked");e.is(":checked")&&e.val()!=t.val()&&null!=t.val()&&t.prop("checked",!1),i.onFeatureChange($(".featureDetails .feature_radio"))}),$(".user-contact-number input").on("keyup",function(e){i.allowNubersOnly(this)}),this._$body.on("click",".details-content-checkbox .selectAll",function(){var e=$(this).val(),t=$(this).parents(".tabs-content").attr("id"),a=$(this).parents(".accordianMain-content").attr("id"),t=$("#"+t+" ."+a+" .details-content-checkbox .feature_radio");$(this).is(":checked")&&("0"===e?i.selectAllSubCatRadio(t,"0"):"1"===e?i.selectAllSubCatRadio(t,"1"):i.selectAllSubCatRadio(t,"2"),i.onFeatureChange($(".featureDetails .feature_radio")))}),this._$body.on("click",".accordianMain-tab",function(){var e=$(this),t=e.attr("data-target"),e=(i.subCategoryAccordian(e,t,!1),$(".tabs-nav-list .tabs-nav-item.active > a").data("title").toLowerCase()),t="accordion click:"+t.replaceAll("---"," and ").replaceAll("-"," ");r.getPredeliveryRefreshEvents().accordianClick(i._formatNameplate(i.selectedCar.model),e,t)}),this._$body.on("click",".categoryConfig .tabs-nav-list .tabs-nav-item a",function(e){e.preventDefault();var t=$(".categoryConfig .tabs-nav-list .tabs-nav-item.active").index(),e=$(e.currentTarget.offsetParent).index();t<e?this.stickyButtonNext(e,t):this.stickyButtonBack(e,t),this._$scope.$apply()}.bind(this)),this._$body.on("click",".review-personal-details-nav .tabs-nav-item a",function(e){e.preventDefault();e=$(this);i.personalDetailsTab(e,e.attr("href"))}),this._$body.on("click",".review-feature-details-nav .tabs-nav-item a",function(e){e.preventDefault();var e=$(this),t=e.parent().index();i.featureDetailsTab(e,e.attr("href"));e=$(".review-feature-details-nav .tabs-nav-item").eq(t).find(".feature-nav").attr("href"),t=$(e+" .subcatcategoryConfig").eq(0).find(".accordianMain-tab");i.subCategoryAccordian(t,t.attr("data-target"),!0)}),this._$body.on("click",".inVideo",function(){var e="940px",t="530px";$(window).width()<768&&(e="100vw",t="100vh"),layer.open({scrollbar:!1,scrollbar:!1,type:2,title:!1,area:[e,t],shade:.25,closeBtn:1,shadeClose:!0,content:$(this).attr("data-href"),success:function(){var e=$(".tabs-nav-list .tabs-nav-item.active > a").data("title").toLowerCase(),t="video play:"+$(this).parents(".details-content-left").find("span").text();r.getPredeliveryRefreshEvents().accordianClick(i._formatNameplate(i.selectedCar.model),e,t)}.bind(this)}),$(".layui-layer-setwin .layui-layer-close2").css({"background-image":"url(/etc/designs/guxfoap/clientlibs/guxfoap/img/search_icon.png)","background-position":"2px -1px","background-size":"contain",right:"-15px",top:"-15px",width:"60px",height:"60px"}),$(window).width()<768&&$(".layui-layer-setwin .layui-layer-close2").css("top","15px")}),this._$body.on("click",".info-popup",function(){var e="500px",t="100vh";$(window).width()<768&&(e="100%",t="100vh"),layer.open({type:1,anim:2,isOutAnim:!1,offset:"r",title:!1,area:[e,t],shade:.25,closeBtn:1,btn:[i.overlayCloseBtnTxt],shadeClose:!0,scrollbar:!1,content:$(this).attr("data-popup"),success:function(){null!=$(this).data("image")&&$(".layui-layer-content").prepend('<img src="'+$(this).attr("data-image")+'" alt="" />'),$("body").addClass("info-popup-open");var e=$(".tabs-nav-list .tabs-nav-item.active > a").data("title").toLowerCase(),t="tool tip:"+$(this).parents(".details-content-left").find("span").text();r.getPredeliveryRefreshEvents().accordianClick(i._formatNameplate(i.selectedCar.model),e,t)}.bind(this),end:function(){$("body").removeClass("info-popup-open")}})}),0),n=0;this._$body.on("click",".radio-stations .addStationBtn",function(){var e='<div class="columns large-4 remove_btn"><span class="close_btn">'+this.deleteBtnTxt+"</span></div>",t=$(".addStation-wrapper .addStation-content")[0].cloneNode(!0),t=($(".addStationContentBox").append(t),$(".addStationContentBox .addStation-content").eq(n));this.updateInitDropDown(t.find("select")),t.append(e),t.find("input").val(""),t.find(".select2-container").eq(0).remove(),t.find(".personal-button-box").remove(),t.find("select").val(t.find("select option:eq(0)").val()).trigger("change"),n+=1}.bind(this)),this._$body.on("click",".special-guests .addSpclGuestBtn",function(){var e='<div class="remove_btn_special_guest"><span class="close_btn">'+this.deleteBtnTxt+"</span></div>",t=$(".special-guests .special-guests-content")[0].cloneNode(!0),t=($(".addSpecialGuestBox").append(t),$(".addSpecialGuestBox .special-guests-content").eq(a));this.updateInitDropDown(t.find("select")),t.children(".columns:last-child").append(e),t.find("input").val(""),t.find(".select2-container").eq(0).remove(),t.find("select").val($(".special-guests-content .salutation select option:first").val()).trigger("change"),a+=1}.bind(this)),this._$body.on("click",".remove_btn",function(){$(this).parent().remove(),--n}),this._$body.on("click",".remove_btn_special_guest",function(){$(this).parents(".special-guests-content").remove(),--a})},s.prototype.allowNubersOnly=function(e){return e.value=e.value.replace(/[^0-9]/g,"").replace(/(\..*)\./g,"$1")},s.prototype.selectAllSubCatRadio=function(e,t){for(var a=0;a<e.length;a++)e[a].value===t&&(e[a].checked=!0)},s.prototype.featureDetailsTab=function(e,t){$(".review-feature-details-tabsContainer .tabs-content").fadeOut("fast").hide(),$(t).fadeIn("fast",function(){e.parent().siblings().removeClass("active"),e.parent().addClass("active")})},s.prototype.personalDetailsTab=function(e,t){$(".review-personal-details-tabsContainer .tabs-content").fadeOut("fast").hide(),$(t).fadeIn("fast",function(){e.parent().siblings().removeClass("active"),e.parent().addClass("active")})},s.prototype.mainCategoryTab=function(e,t){$(".categoryConfig .tabs-container .tabs-content").fadeOut("fast").hide(),$(t).fadeIn("fast",function(){e.parent().siblings().removeClass("active"),e.parent().addClass("active")})},s.prototype.subCategoryAccordian=function(e,t,a,i){var n;$(".accordianMain-content").fadeOut().hide(),n=e.parents(".tabs-content").find(".details-header").length?e.parents(".tabs-content").find(".details-header").outerHeight():0,null==i&&e.hasClass("active")?e.removeClass("active"):$("."+t).fadeIn("500",function(){a||null==a||$("html, body").animate({scrollTop:e.offset().top-n}),$(".accordianMain-tab").removeClass("active"),e.addClass("active")})},s.prototype._getValue=function(e,t,a){e.val()&&(this.userData[t]=a?e.val().charAt(0).toUpperCase()+e.val().slice(1):e.val())},s.prototype._scrollTo=function(e,t){$("html, body").animate({scrollTop:$(e).offset().top},t)},s.prototype._getParameterByName=function(e,t){t=t||this._href,e=e.replace(/[\[\]]/g,"\\$&");e=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return e?e[2]?decodeURIComponent(e[2].replace(/\+/g," ")):"":null},s.prototype._getStepsAttr=function(){return Boolean($(".your-ford-section").data("steps-data-config-for-series"))},s.prototype._togglePreloader=function(){$(".pre-loader").fadeToggle(300)},s.prototype._showPreloader=function(){$(".pre-loader").fadeIn(300)},s.prototype._hidePreloader=function(){$(".pre-loader").fadeOut(300)},s.prototype._showPreloading=function(){$("body").append('<div class="pre-loading"/>')},s.prototype._hidePreloading=function(){$("body").find(".pre-loading").remove()},s.prototype.checkWelcomeSection=function(e){if(!this.isAuthorMode){$(".preview-details input").length;var a=[];if(0==this.isExistData){if(this._getValue(this._$userTitle,"title",!0),this._getValue(this._$firstName,"firstName"),this._getValue(this._$middleName,"middleName"),this._getValue(this._$lastName,"lastName"),this._getValue(this._$email,"email"),this._getValue(this._$contactNumber,"contactNumber"),this._getValue(this._$addr1,"addr1"),this._getValue(this._$addr2,"addr2"),this._getValue(this._$suburb,"suburb"),this._getValue(this._$state,"state"),this._getValue(this._$deliverydate,"deliverydate"),this._getValue(this._$dealerlocation,"dealerlocation"),this.selectedCar.DeliveryDate=this.userData.deliverydate,this.selectedCar.DealerLocation=this.userData.dealerlocation,this.isStepsSectionReady=!1,$(".welcome-section .form-dropdown select, .welcome-section .input-field input").each(function(e,t){$(t).val()||$(t).data("validation")&&"required"===$(t).data("validation").rules[0].type&&$(t).attr("name")&&a.push($(t).attr("name"))}),a.length)return this._scrollTo('.welcome-section *[name="'+a[0]+'"]:eq(0)',500),this.isStepsSectionReady=!1;if($(".welcome-section").find("small.error").length)return this._scrollTo($(".welcome-section").find("small.error").eq(0).parents("div").eq(0),500),this.isStepsSectionReady=!1;if($(".welcome-section").find("span.error_contact").length)return this._scrollTo($(".welcome-section").find("span.error_contact").eq(0).parents("div").eq(0),500),this.isStepsSectionReady=!1;this.isStepsSectionReady=!0}}$(".homeBillboard.billboard").show(),this._renderStepsSection(),e.preventDefault()},s.prototype.onDealerProvinceChange=function(){if(""===this.dealerProvince)this.isDealerKhetAmphoeDropdownDisabled=!0,this.isDealernameDropdownDisabled=!0,this.KhetAmphoeList=[],this.dealerProvince="",this.dealerKhetAmphoe="",this.dealerName="",this.selectedCar.Province="",this.selectedCar.KhetAmphoe="",this.selectedCar.DealerName="",p("select-KhetAmphoe"),p("select-Dealername");else{for(var e in this.KhetAmphoeList=[],this.isDealernameDropdownDisabled=!0,this.dealerKhetAmphoe="",this.dealerName="",this.selectedCar.Province="",this.selectedCar.KhetAmphoe="",this.selectedCar.DealerName="",p("select-KhetAmphoe"),p("select-Dealername"),this.province)if(this.province[e].dealerShipCityValue==this.dealerProvince){this.selectedCar.Province=this.province[e].dealerShipCityValue,this.DealerNameList=this.province[e].dealershipList;break}$(".dealerlocation input").val(""),this.isDealernameDropdownDisabled=!1}},s.prototype.onDealerNameChange=function(){if(""===this.dealerName)this.dealerName="",this.selectedCar.DealerName="",p("select-Dealername");else for(var e in this.DealerNameList)this.dealerName==this.DealerNameList[e].dealershipKey&&(e=this.DealerNameList[e],this.selectedCar.DealerName=e.dealershipValue,this.userData.dealerEmail=e.dealerlocation[0].dealeremail,this.selectedCar.dealerID=e.dealershipKey)},s.prototype.onFeatureChange=function(e){var a=this.featureWalkThroughTime,i=this.walkThroughTime;$(e).each(function(e,t){$(t).is(":checked")&&$(t).hasClass("chosenFeature")&&(i+=a)}),this.totalWalkthroughtime="00:"+(i<10?"0"+i:i)+" "+(this.featureWalkThroughTimeUnit||"MINS"),$(".footerTip > span").text(this.totalWalkthroughtime)},s.prototype.onCarModelChange=function(){if(""===this.carModel)this.isSeriesDropdownDisabled=!0,this.isOptionsReady=!1,this.optionsList=[],this.selectedOptionsList=[],this.carColorsList=[],this.isColorDropdownDisabled=!0,this.isPreviewReady=!1,this.selectedCarSeries="",this.selectedColor="",this.selectedCar.model="",this.selectedCar.nameplatevdmkey="",this.selectedCar.packagevdmkey="",this.selectedCar.modelKey="",this.selectedCar.series="",this.selectedCar.seriesValue="",this.selectedCar.color="",this.selectedCar.colorKey="",this.selectedCar.colorVdmKey="",this.selectedCar.nameplatevdmkey="",p("select-color"),p("select-model"),p("select-series");else{for(var e in this.selectedCar.model="",this.selectedCar.nameplatevdmkey="",this.selectedCar.colorVdmKey="",this.selectedCar.packagevdmkey="",this.selectedCar.modelKey="",this.selectedCar.series="",this.selectedCar.seriesValue="",this.selectedCar.color="",this.selectedCar.colorKey="",this.isOptionsReady=!1,this.isPreviewReady=!1,this.optionsList=[],this.selectedOptionsList=[],this.carColorsList=[],this.selectedCarSeries="",p("select-color"),p("select-series"),this.models)if(this.models[e].key==this.carModel){this.selectedCar.model=this.models[e].label,this.selectedCar.nameplatevdmkey=this.models[e].key||"",this.selectedCar.modelKey=this.models[e].key,this.carSeriesList=this.models[e].models;break}this.SeriesVal=this.carSeriesList,this.isSeriesDropdownDisabled=!this.SeriesVal||!this.SeriesVal.length,this.isColorDropdownDisabled=!0}},s.prototype.onModelSeriesChange=function(){if(""===this.selectedCarSeries)this.isColorDropdownDisabled=!0,this.isOptionsReady=!1,this.isPreviewReady=!1,this.selectedColor="",this.selectedCar.series="",this.selectedCar.packagevdmkey="",this.selectedCar.color="",this.selectedCar.colorKey="",this.selectedCar.image="",this.selectedCar.seriesValue="",this._isSeriesChanged=!0,this.carColorsList=[],this.selectedCar.colorVdmKey="",p("select-color"),p("select-series");else{for(var e in this.selectedCar.series="",this.selectedCar.packagevdmkey="",this.selectedCar.seriesValue="",this.selectedCar.color="",this.selectedCar.colorKey="",this.selectedCar.image="",this.isOptionsReady=!1,this.isPreviewReady=!1,this.optionsList=[],this.carColorsList=[],this.selectedColor="",this.selectedCar.colorVdmKey="",p("select-color"),this.carSeriesList)if(this.carSeriesList[e].key==this.selectedCarSeries){this.selectedCar.series=this.carSeriesList[e].label,this.selectedCar.packagevdmkey="",this.selectedCar.seriesValue=this.carSeriesList[e].key,this.carColorsList=this.carSeriesList[e].colortrim&&this.carSeriesList[e].colortrim.color&&this.carSeriesList[e].colortrim.color.items;break}this._isSeriesChanged=!0,this.isColorDropdownDisabled=!this.carColorsList||!this.carColorsList.length}},s.prototype.onColorChange=function(){if(""==this.selectedColor)this.isPreviewReady=!1;else{for(var e in this._showPreloader(),this.carColorsList)if(this.selectedColor==this.carColorsList[e].featureKey){this.selectedCar.color=this.carColorsList[e].featureName,this.selectedCar.colorKey=this.carColorsList[e].featureKey,this.selectedCar.image=this.carColorsList[e].billboardImage;break}this.isPreviewReady=!!this.selectedCar.image,this._hidePreloader()}},s.prototype.onColorPicChange=function(e){var t,a,e=e.target,i=($(e).parent().siblings("li").find("img").removeClass("active"),$(e).addClass("active"),$(e).attr("alt"));for(t in null!=localStorage.enterSetup&&((e=JSON.parse(localStorage.enterSetup)).colorPic=i,localStorage.enterSetup=JSON.stringify(e)),this.carColorsList)if(i==this.carColorsList[t].colorKey){this.selectedCar.color=this.carColorsList[t].colorValue,this.selectedCar.colorKey=this.carColorsList[t].colorKey;break}for(a in this.selectedCar.image="",this.carSeriesList)if(this.selectedCar.seriesValue===this.carSeriesList[a].seriesKey&&this.carSeriesList[a].imagesList)for(var n in this.carSeriesList[a].imagesList)if(i==this.carSeriesList[a].imagesList[n].colorKey){this.selectedCar.image=this.carSeriesList[a].imagesList[n].imagePath;break}this.isPreviewReady=!!this.selectedCar.image},s.prototype.onDealerStateChange=function(){if(""===this.dealerState)this.isDealerShipDropdownDisabled=!0,this.dealerShip="",this.selectedCar.dealerState="",this.selectedCar.dealer="",this.selectedCar.dealerID="",this.selectedCar.DealerAddress="",this.dealerAddress="",p("select-dealer"),p("select-dealerAdreess");else{for(var e in this.selectedCar.dealerState="",this.selectedCar.dealer="",this.selectedCar.dealerID="",this.selectedCar.DealerAddress="",this.dealerAddress="",this.dealerShip="",p("select-dealer"),p("select-dealerAdreess"),this.dealers)if(this.dealers[e].dealerShipStateKey==this.dealerState){this.dealersList=this.dealers[e].dealershipList,this.selectedCar.dealerID=this.dealers[e].dealerShipStateKey,this.selectedCar.DealerCity=this.dealers[e].dealerShipStateValue;break}this.selectedCar.dealerState=this.dealerState,this.isDealerShipDropdownDisabled=!1}},s.prototype.onDealerChange=function(){if("PL"!=this.dealerShip)if(""==this.dealerShip)this.dealerAddress="",this.selectedCar.dealer="",this.selectedCar.dealerID="",this.selectedCar.DealerName="",this.selectedCar.DealerAddress="",this.userData.dealeremail="",p("select-dealerAdreess");else{for(var e in this.dealerAddress="",this.selectedCar.dealer="",this.selectedCar.dealerID="",this.selectedCar.DealerName="",this.selectedCar.DealerAddress="",this.userData.dealeremail="",p("select-dealerAdreess"),this.dealersList)if(this.dealersList[e].dealershipKey==this.dealerShip){this.selectedCar.dealer=this.dealersList[e].dealershipValue,this.selectedCar.dealerID=this.dealersList[e].dealershipKey,this.dealerAddressList=this.dealersList[e].dealerlocation,this.selectedCar.DealerName=this.dealersList[e].dealershipValue;break}this.isDealerAddressDropdownDisabled=!1}},s.prototype.onDealerAddressChange=function(){if(""===this.dealerAddress)this.dealerAddress="",this.selectedCar.DealerAddress="",this.userData.dealeremail="";else for(var e in this.selectedCar.DealerAddress="",this.userData.dealeremail="",this.dealerAddressList)if(this.dealerAddressList[e].dealerlocationvalue==this.dealerAddress){this.selectedCar.DealerAddress=this.dealerAddressList[e].dealerlocationvalue,this.userData.dealeremail=this.dealerAddressList[e].dealeremail;break}},s.prototype.getVINCode=function(){this.vinCode=this._$VINCode.val()},s.prototype.setActiveStep=function(e,t){this.steps.activeStep=e||$(".stepactivenumber").eq(0).val(),this.otherOccasionVal=$(".special-occasion").length&&$(".special-occasion select option:last").val();var l,a,i,e=this.steps.activeStep;this.nameplateModel=this.isExistData?this.selectedCar.modelValue:this.selectedCar.modelKey,this.dealerIDModel=this.selectedCar.dealerID,l=this,$("#personalize .radioButton").each(function(e,t){switch($(t).find(".hightlighted-section").data("type-of-component")){case"vehicledecoration":$(t).find("select").attr("disabled","disabled"),$(t).find("input").change(function(){var e=$(t).find("input:checked").val();"Yes"==e||"是"==e||"CÓ"==e?$(t).find("select").removeAttr("disabled"):$(t).find("select").attr("disabled","disabled")}),$(t).find("input").change();break;case"specialOccasion":$(t).find("input[type=text]").attr("disabled","disabled"),$(t).find("select").change(function(){$(t).find("select option:checked").val()==l.otherOccasionVal?$(t).find("input[type=text]").removeAttr("disabled"):$(t).find("input[type=text]").attr("disabled","disabled").val("")}),$(t).find("select").change();break;case"poojaceremony":var a=(i=$(t).find("textarea")).attr("maxlength");$(t).find(".counter").text(a),i.attr("readonly","readonly"),$(t).find("input").change(function(){var e=$(t).find("input:checked").val();"Yes"==e||"是"==e||"CÓ"==e?(e=$(t).find("textarea").val().length,e=a-e,$(t).find(".counter").text(e),i.removeAttr("readonly").on("input propertychange",function(){var e=$(t).find("textarea").val().length,e=a-e;$(t).find(".counter").text(e)})):i.attr("readonly","readonly")}),$(t).find("input").change();break;case"customerNotes":var i,a=(i=$(t).find("textarea")).attr("maxlength");$(t).find(".counter").text(a),i.bind("keyup keydown change",function(){var e=$(t).find("textarea").val().length,e=a-e;$(t).find(".counter").text(e)}),i.change();break;case"favouriteStations":var n=$(".stations-row .addStation-content select").parents(".addStation-content").find(".input-field input");function o(e){var t,a,i;e.unbind(),e.parent().find("small.error").remove(),e.attr("data-validation")&&(t=JSON.parse(e.attr("data-validation")).rules,a=t[t.length-1].regexp?t[t.length-1].regexp:"",i=t[t.length-1].message||"",e.parent().append('<small class="error" style="height:22.29px;"></small>'),""!=a)&&e.blur(function(){!(a=new RegExp(a)).test(e.val())&&e.val()?e.parent().find("small.error").text(i):e.parent().find("small.error").text("")})}o(n.eq(0)),o(n.eq(1)),o(n.eq(2)),o(n.eq(3)),o(n.eq(4)),o(n.eq(5));break;case"preferredTime":(r=$(t).find("select")).change(function(){r.eq(0).val()&&r.eq(1).val()&&r.eq(2).val()&&$(t).find("small.preferredtimeerror").text("")});break;case"preferredTimeTwo":var r;(r=$(t).find("select")).change(function(){r.eq(0).val()&&r.eq(1).val()&&$(t).find("small.preferredtimeerror").text("")});break;case"checkboxes":$(t).find("input[type=text]").attr("disabled","disabled"),$(t).find("input[type=checkbox]").change(function(){$(t).find("input.otherCheckOption").is(":checked")?$(t).find("input[type=text]").removeAttr("disabled"):$(t).find("input[type=text]").attr("disabled","disabled").val("")}),$(t).find("input[type=checkbox]").change();break;case"radioButtonsWithTextbox":$(t).find("input[type=text]").attr("disabled","disabled"),$(t).find("input[type=radio]").change(function(){$(t).find("input.showTextboxOption").is(":checked")?$(t).find("input[type=text]").removeAttr("disabled"):$(t).find("input[type=text]").attr("disabled","disabled").val("")}),$(t).find("input[type=radio]").change()}}),0==e?r.getPredeliveryRefreshEvents().loadLandingPage(this._formatNameplate(this.selectedCar.model),this._toLowercase(this.selectedCar.series),this.selectedCar.color,this.dealerIDModel,this.selectedCar.DealerName):(i="",(a=this.questionaireNavTabs).length?(i=a[e-1].title.toLowerCase().replaceAll("---"," and ").replaceAll("-"," "),digitaldata.onclick.onclick="",r.getPredeliveryRefreshEvents().loadFeaturesPage(this._formatNameplate(this.selectedCar.model),i,this._toLowercase(this.selectedCar.series),this.selectedCar.color,this.dealerIDModel,this.selectedCar.DealerName),r.getPredeliveryRefreshEvents().ctaClick(this._formatNameplate(this.selectedCar.model),i,this._toLowercase(this.selectedCar.series))):this.noModel&&r.getPredeliveryRefreshEvents().loadFeaturesPage(this._formatNameplate(this.selectedCar.model),"personalize",this._toLowercase(this.selectedCar.series),this.selectedCar.color,this.dealerIDModel,this.selectedCar.DealerName)),$("#modelTrain").val()||this.noModel||!(1<this.steps.activeStep)||1!=t||this.isdatepast||this.isSubmit||this.saveAndContinue(),this.isSaveSuccessfull=!1,this.isSaveFailed=!1,u()},s.prototype.checkEmailValid=function(){this.isEmailValid=!1;var e=$(".user-email-customized input").val();this.isEmailValid=/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(e)},s.prototype.goToPersonalizeSection=function(){var e,t;this.sections.welcome.active=!1,this.sections.steps.active=!0,this.sections.summary.active=!1,this.sections.thankyou.active=!1,this.stepsHeader.removeClass("deactivate"),this.personalizeSectionActive=!0,this.backBtnLabel=this.backToHomeTxt,this.noModel?(this.steps.activeStep=5,this.setActiveStep(this.steps.activeStep,!1),this.reviewStepBtn.show(),this.nextStepBtn.hide()):(e=$(".tabs-nav .tabs-nav-item"),this.questionairreTabs.show(),"first"==this.personalizePositon?(this.steps.activeStep=1,this.setActiveStep(this.steps.activeStep,!1),t=e.eq(0).find(".ownerVehicle"),this.mainCategoryTab(t,t.attr("href")),this.nextStepBtn.show(),this.reviewStepBtn.hide()):(this.steps.activeStep=this.questionaireNavTabs.length,this.setActiveStep(this.steps.activeStep,!1),t=e.eq(this.questionaireNavTabs.length-1).find(".ownerVehicle"),this.mainCategoryTab(t,t.attr("href")),this.nextStepBtn.hide(),this.reviewStepBtn.show(),this.backBtnLabel=this.questionaireNavTabs[this.questionaireNavTabs.length-2].title)),this._scrollTo("body",600)},s.prototype.goToFeatureSection=function(){var e,t,a;this.noModel?(this.sections.welcome.active=!1,this.sections.steps.active=!0,this.sections.summary.active=!1,this.sections.thankyou.active=!1,this.stepsHeader.removeClass("deactivate"),this.steps.activeStep=5,this.personalizeSectionActive=!0,this.setActiveStep(this.steps.activeStep,!0),this.reviewStepBtn.show(),this.nextStepBtn.hide()):this.questionairreTabs.length?(this.sections.welcome.active=!1,this.sections.steps.active=!0,this.sections.summary.active=!1,this.sections.thankyou.active=!1,this.stepsHeader.removeClass("deactivate"),this.questionairreTabs.show(),this.steps.activeStep=1,"first"==this.personalizePositon?this.personalizeSectionActive=!0:this.personalizeSectionActive=!1,this.setActiveStep(this.steps.activeStep,!0),t=(e=$(".tabs-nav .tabs-nav-item").eq(0).find(".ownerVehicle")).attr("href"),a=$(t+" .subcatcategoryConfig").eq(0).find(".accordianMain-tab"),this.mainCategoryTab(e,t),this.nextStepBtn.show(),this.reviewStepBtn.hide(),1===this.steps.activeStep&&(a.addClass("active"),this.subCategoryAccordian(a,a.attr("data-target"),!0,!0),this.nextBtnLabel=this.questionaireNavTabs[1].title)):layer.msg("No data present for this model!."),setTimeout(function(){$(".steps-section select").select2({minimumResultsForSearch:-1,blurOnChange:!1,selectOnBlur:!1,loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"pre-delivery-selected-style"}),this._$scope.$apply()}.bind(this),200),this.backBtnLabel=this.backToHomeTxt,this._scrollTo("body",600)},s.prototype.stickyButton=function(){var e;this.isdatepast&&this.isSubmit||(this.checkEmailValid(),this.isEmailValid?($(".user-email-customized .emailError").length&&($(".user-email-customized").removeClass("email-error"),$(".user-email-customized .emailError").remove()),this.goToFeatureSection()):($(".user-email-customized .emailError").length||(e=$(".user-email-customized > input").attr("data-validation"),$(".user-email-customized").addClass("email-error").append('<span class="emailError">'+e+"</span>")),setTimeout(function(){this._scrollTo(".user-email-customized",600)}.bind(this),200)))},s.prototype.updateInitDropDown=function(e){e.select2({minimumResultsForSearch:-1,blurOnChange:!1,selectOnBlur:!1,loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"pre-delivery-selected-style"})},s.prototype.isStepActive=function(e){return e==this.getActiveStep()},s.prototype.isClickStart=function(e){return 0!=this.getActiveStep()&&1!=this.sections.welcome.active?($(".preDelivery-header").addClass("is-click-start"),!0):($(".preDelivery-header").removeClass("is-click-start"),!1)},s.prototype.featureCatNavNext=function(e,t){var a=e,i=e-1,n=$(".tabs-nav .tabs-nav-item"),o=n.eq(i).find(".ownerVehicle"),r=o.attr("href"),l=$(r+" .subcatcategoryConfig").eq(0).find(".accordianMain-tab");0!==e&&(n.removeClass("active"),(null!=t?n.eq(t):n.eq(i-1)).addClass("completed")),this.mainCategoryTab(o,r),this.steps.activeStep!=this.questionaireNavTabs.length?(this.nextStepBtn.show(),this.reviewStepBtn.hide(),"first"==this.personalizePositon&&1===this.steps.activeStep?this.personalizeSectionActive=!0:this.personalizeSectionActive=!1,this.subCategoryAccordian(l,l.attr("data-target"),!0),this.nextBtnLabel=this.questionaireNavTabs[a].title):("first"==this.personalizePositon?(this.personalizeSectionActive=!1,this.subCategoryAccordian(l,l.attr("data-target"),!0)):this.personalizeSectionActive=!0,this.nextStepBtn.hide(),this.reviewStepBtn.show(),this.noModel||this._getOperations()),this.backBtnLabel=this.questionaireNavTabs[i-1].title,this._scrollTo(".questionairre-tabs",400)},s.prototype.featureCatNavBack=function(e,t){var a=e,i=e-1,n=$(".tabs-nav .tabs-nav-item"),o=n.eq(i).find(".ownerVehicle"),r=o.attr("href"),l=$(r+" .subcatcategoryConfig").eq(0).find(".accordianMain-tab");0!==e&&(n.removeClass("active"),(null!=t?n.eq(t):n.eq(e)).addClass("completed")),this.mainCategoryTab(o,r),this.subCategoryAccordian(l,l.attr("data-target"),!0),this.nextStepBtn.show(),this.reviewStepBtn.hide(),"first"==this.personalizePositon&&1===this.steps.activeStep?this.personalizeSectionActive=!0:this.personalizeSectionActive=!1,this.nextBtnLabel=this.questionaireNavTabs[a].title,this.backBtnLabel=1!=e?this.questionaireNavTabs[i-1].title:this.backToHomeTxt,this._scrollTo(".questionairre-tabs",400)},s.prototype.stickyButtonNext=function(e,t){var a=0;(a=null!=e&&null!=t?parseInt(e)+1:(a=Number($(".predelivery-step.is-active-step").find(".stepactivenumber").val()),parseInt(a)+1))==this.questionaireNavTabs.length+1?console.log("summary screen"):"first"==this.personalizePositon&&!0===this.personalizeSectionActive&&(this.personalizeValidation(),!this.preferredTime||this.showFordPassPopupFlag)||(this.setActiveStep(a,!0),$(".predelivery-step").removeClass("is-active-step"),$(".predelivery-step").eq(a).addClass("is-active-step"),null!=t?this.featureCatNavNext(a,t):this.featureCatNavNext(a))},s.prototype.stickyButtonBack=function(e,t){var a=0;(a=null!=e&&null!=t?parseInt(e)+1:(a=Number($(".predelivery-step.is-active-step").find(".stepactivenumber").val()),parseInt(a)-1))<=0||this.noModel?(console.log("Welcome screen"),this._renderStepsSection()):(this.steps.activeStep=a,this.setActiveStep(a),$(".predelivery-step").removeClass("is-active-step"),$(".predelivery-step").eq(a).addClass("is-active-step"),null!=t?this.featureCatNavBack(a,t):this.featureCatNavBack(a))},s.prototype.reviewBtn=function(){this.showSummarySection()},s.prototype.reviewFeatureAccordian=function(){setTimeout(function(){var e=$(".review-feature-details-nav .tabs-nav-item").eq(0).find(".feature-nav").attr("href"),e=$(e+" .subcatcategoryConfig").eq(0).find(".accordianMain-tab");this.subCategoryAccordian(e,e.attr("data-target"),!0,!0),this._$scope.$apply()}.bind(this),200)},s.prototype.getActiveStep=function(){return this.steps.activeStep},s.prototype._renderStepsSection=function(){this.isFeaturePageLoaded||this._getFeaturesPage(),this._togglePreloader(),this.showStepsSection(),this.setActiveStep()},s.prototype.showStepsSection=function(){this.isSubmitSuccessfull=!1,this.isSubmitFailed=!1,this.getVINCode(),this._hidePreloader(),this._scrollTo("body",1e3),this.sections.welcome.active=!1,this.sections.summary.active=!1,this.sections.thankyou.active=!1,this.sections.steps.active=!0,this.stepsHeader.removeClass("deactivate"),"first"==this.personalizePositon?this.personalizeSectionActive=!0:this.personalizeSectionActive=!1},s.prototype._getOperations=function(){this.featureListJson=[],this.featuresShowMeFlag=!1,this.featuresShowMeLaterFlag=!1,this.featureTotalWalkThroughTime=0;var e=[],t=[];"first"==this.personalizePositon?Array.prototype.push.apply(t,this.questionaireNavPersonalizeTabs):Array.prototype.push.apply(t,this.questionaireNavTabs);for(var a=0;a<t.length-1;a++){var n=[],o=[],r=this,l=!1,s=!1;$(t[a].target).find(".accordianMain-content").each(function(e,t){var i=(""+Math.random()).substring(2,8);$(t).find(".featureList").each(function(e,t){var a=$(t).find(".details-content-left > span").text();0==(t=Number($(t).find('input[type="radio"]:checked').val()))?(n.push({name:a,id:i}),l=!0,r.featuresShowMeFlag=l):1==t&&(o.push({name:a,id:i+1}),s=!0,r.featuresShowMeLaterFlag=s)})}),e.push({categoryTitle:t[a].title,categoryTitleId:t[a].target.substring(1),featuresShowMeFlag:l,featuresShowMeLaterFlag:s,featuresShowMeList:n,featuresShowMeLaterList:o})}this.featureListJson=e,this.featureTotalWalkThroughTime=this.totalWalkthroughtime},s.prototype._renderFeaturesPage=function(){var n,e,t=window.location.pathname,o="",r="",l=[],a=this.selectedCar.seriesValue,s=(this.questionaireTabs="",this.questionaireStepsHTML="",[]);this.lighting="",this.userNotes="",-1!=t.indexOf(".html")&&(t=t.substring(0,t.indexOf(".html"))),null!=a?(a="",(n=this).modelConfigPath.length&&(a=(e=this.modelConfigPath.split("/"))[e.length-1]),$.ajax({type:"GET",url:t+".preDeliveryDataModelRefreshConfig."+this.selectedCar.seriesValue+"."+(a.length?a:this.modelConfigPath)+".data",dataType:"html",async:!1,success:function(e){var a,i,t=$(e);o=t.find(".tabsContentWrapper"),r=t.find(".tabsNavWrapper"),o.length&&r.length?(this.noModel=!1,t.find(".tabs-nav-item").each(function(e,t){var a=$(this).children("a"),i=a.attr("href"),a=a.attr("data-title");l.push({target:i,title:a,id:e+1})}),Array.prototype.push.apply(s,l),"first"==this.personalizePositon?(a=[],s.forEach(function(e,t){e.title==s[Object.keys(s)[Object.keys(s).length-1]].title&&(s.splice(t,1),s.unshift(e))}),Array.prototype.push.apply(a,s),a.forEach(function(e,t){a[t].id=t+1}),Array.prototype.push.apply(n.PersonalizeTabsAnalytics,a),Array.prototype.push.apply(n.questionaireNavPersonalizeTabs,a),this.questionaireNavPersonalizeTabs.push(this.questionaireNavPersonalizeTabs.shift()),Array.prototype.push.apply(this.questionaireNavTabs,a)):Array.prototype.push.apply(this.questionaireNavTabs,s),setTimeout(function(){t.find(".tabs-content").each(function(e,t){("first"==n.personalizePositon?$(`.feature-questionaire-step${n.questionaireNavPersonalizeTabs[e].id}:not(.no-model-step)`):$(`.feature-questionaire-step${parseInt(e)+1}:not(.no-model-step)`)).append(t),n._$scope.$apply()})}.bind(this),200),this.isFeaturePageLoaded=!0,e=o.find(".details-header").eq(0).find("li"),i=[],e.each(function(e,t){i.push($(t).children("span").text())}),this.featuresHeaderArr=i):this._renderNoModelPage()}.bind(this),error:function(e){this.isFeaturePageLoaded=!1,console.error(e)}.bind(this)}),this._oldModel=this.selectedCar.model,this._oldSeries=this.selectedCar.series,r.length&&($(".questionairre-tabs").append(r),this.isExistData&&this._$scope.$apply(),"first"==this.personalizePositon)&&setTimeout(function(){$(".questionairre-tabs .tabs-nav-list").prepend($(".questionairre-tabs .tabs-nav-list .tabs-nav-item").eq(this.questionaireNavTabs.length-1)),this._$scope.$apply()}.bind(this),200)):(this._hidePreloading(),console.error("The selected car series is not available or undefined"))},s.prototype._renderNoModelPage=function(){var e=window.location.pathname;-1!=e.indexOf(".html")&&(e=e.substring(0,e.indexOf(".html"))),$.ajax({type:"GET",url:e+".preDeliveryPersonalisedConfig.data",dataType:"html",async:!1,success:function(e){var t=$(e);personalizeOnly=t.find(".personalize-only"),this.noModel=!0,setTimeout(function(){$(".feature-questionaire-step5").append('<div id="personalize">'+e+"</div>"),this.isFeaturePageLoaded=!0,this._$scope.$apply()}.bind(this),100)}.bind(this),error:function(e){this.isFeaturePageLoaded=!1,console.error(e)}.bind(this)})},s.prototype._getFeaturesPage=function(){this._getStepsAttr()?this._oldModel===this.selectedCar.model&&this._oldSeries===this.selectedCar.series||this._renderFeaturesPage():this._oldModel!==this.selectedCar.model&&this._renderFeaturesPage()},s.prototype.getAllFieldValues=function(){var e,t={personaliseList:[],isPersonaliseVisited:!1,walkThroughTime:this.totalWalkthroughtime,DealerCode:this._userGUID.split("-")[0],ToDoNo:this._userGUID.split("-")[1],BpId:this._userGUID.split("-")[2],FirstName:this.userData.firstName,LastName:this.userData.lastName,Dealer:this.selectedCar.dealer,Model:this.selectedCar.model,Series:this.selectedCar.series,Colour:this.selectedCar.color,DeliveryDate:this.selectedCar.DeliveryDate.replace("/",".").replace("/","."),VinFGE:this.userData.VinFGE,NameplateFGE:this.selectedCar.nameplatevdmkey,ModelFGE:this.selectedCar.packagevdmkey,DeliveryDateFGE:this.selectedCar.DeliveryDate.replace("/",".").replace("/","."),ColorFGE:this.selectedCar.colorVdmKey},a={},i=[],n=("first"==this.personalizePositon?(e=this.questionaireNavPersonalizeTabs,$(".questionairre-tabs .tabs-nav-list > li").eq(0).hasClass("completed")&&(t.isPersonaliseVisited=!0)):(e=this.questionaireNavTabs,$(".questionairre-tabs .tabs-nav-list > li").eq(this.questionaireNavTabs.length-1).hasClass("completed")&&(t.isPersonaliseVisited=!0)),this.featuresHeaderArr);if(e.length)for(var o=0;o<e.length-1;o++){var r=[],l=[],s=!1,c=$(e[o].target).find(".subcatcategoryConfig");c.length?c.each(function(e,t){l=[],$(t).find(".accordianMain-content > ul > li").each(function(e,t){var a=$(t).find(".details-content-left > span").text(),t=Number($(t).find('input[type="radio"]:checked').val());l.push({subcategoriesFeatureName:a,subcategoriesFeatureSelectedName:n[t],subcategoriesFeatureSelectedValue:t})}),r.push({subcategoriesTitle:$(t).find(".accordianMain-tab .title1").text().trim(),subcategorydescription:$(t).find(".accordianMain-tab .title2").text().trim(),subcategoriesFeatureList:l})}):console.log("subcategories are not found"),$(".questionairre-tabs .tabs-nav-list > li").eq(o).hasClass("completed")&&(s=!0),i.push({categoriesTitle:e[o].title,categoryIsVisited:s,subCategory:r})}i.length&&(t.categoryList=i),this._generateSummarySection(),Array.prototype.push.apply(t.personaliseList,this.radioSections),a.formData=JSON.stringify(t),this._getValue(this._$firstName,"firstName"),this._getValue(this._$middleName,"middleName"),this._getValue(this._$lastName,"lastName"),this._getValue(this._$email,"email"),this._getValue(this._$contactNumber,"phone"),a.firstName=this.userData.firstName,a.lastName=this.userData.lastName,a.emailAddress=this.userData.email,a.GUID="",this.formSubmitData=a},s.prototype.saveAndContinue=async function(){this.getAllFieldValues();var e=this.formSubmitData,t=JSON.parse(e.formData),t=(e.step=this.steps.activeStep,t.isSubmit=!1,t.step=this.steps.activeStep,e[this._countryCode.name]=this._countryCode.value,"null"!=this._userGUID?t.GUID=this._userGUID:t.GUID=localStorage.getItem("predeliveryGUID")||"",t.DealerCode=this._userGUID.split("-")[0],t.ToDoNo=this._userGUID.split("-")[1],t.BpId=this._userGUID.split("-")[2],e.formData=t,e.GUID=void 0,e.firstName=void 0,e.lastName=void 0,e.emailAddress=void 0,this.isSaveSuccessfull=!1,this.isSaveFailed=!1,setTimeout(function(){this._showPreloading()}.bind(this),100),await this.prepareLinks(this.saveJourneyData)),a="Failed to save data. Please retry";$.ajax({type:"POST",url:t.apiLink,headers:t.header,data:JSON.stringify(e),dataType:"json",contentType:"application/json; charset=utf-8",async:!1,success:function(e){200===e.returnCode||200==e.status?(this.isSaveFailed=!1,this.isSaveSuccessfull=!0,localStorage.setItem("predeliveryGUID",e.value)):(this.isSaveSuccessfull=!1,this.isSaveFailed=!0,console.error(this.isImgSLEnabled?e?.responseJSON?.Error:a))}.bind(this),error:function(e){this.isSaveSuccessfull=!1,this.isSaveFailed=!0,console.error(this.isImgSLEnabled?e?.responseJSON?.Error:a)}.bind(this)}),setTimeout(function(){this._hidePreloading()}.bind(this),100)},s.prototype._getSummaryRadioStations=function(){this.stations={fm:[],am:[]};$(".stations-row > .columns > .row");var a=$(".stations-row .addStation-content select"),e=$('.hightlighted-section[data-type-of-component="favouriteStations"]').find(".radio-stations"),i=e.data("am-radio-freq"),n=e.data("fm-radio-freq");a.each(function(e){var t=a.eq(e).parents(".addStation-content").find(".input-field input").val();switch(a.eq(e).val()){case"AM":t&&("vn"==l.getCurrentMarketCode()&&i&&(t+=" "+i),this.stations.am.push({name:t}),this.isSummaryInnerReady=!0);break;case"FM":t&&("vn"==l.getCurrentMarketCode()&&n&&(t+=" "+n),this.stations.fm.push({name:t}),this.isSummaryInnerReady=!0)}}.bind(this))},s.prototype._getSummarySpecialGuests=function(){this.splGuests=[];var i=$(".special-guests .special-guests-content select");i.each(function(e){var t=i.eq(e).parents(".special-guests-content").find(".mobileSpecialFristName .input-field input").val(),a=i.eq(e).parents(".special-guests-content").find(".mobileSpecialLastName .input-field input").val(),e=i.eq(e).val();(t||a)&&this.splGuests.push({salutation:e,firstname:t,lastname:a})}.bind(this))},s.prototype._getSummary=function(){this.isSummaryInnerReady=!1,this.getVINCode(),this._getValue(this._$userTitle,"title",!0),this._getValue(this._$firstName,"firstName"),this._getValue(this._$middleName,"middleName"),this._getValue(this._$lastName,"lastName"),this._getValue(this._$email,"email"),this._getValue(this._$contactNumber,"contactNumber"),this._getValue(this._$addr1,"addr1"),this._getValue(this._$addr2,"addr2"),this._getValue(this._$suburb,"suburb"),this._getValue(this._$state,"state"),this._getSummaryRadioStations(),this._getSummarySpecialGuests()},s.prototype._generateSummarySection=function(){this.radioSections=[];var r,l,s,e=$("#personalize .radioButton"),c=!1,d=!1,u=[],p=!1,m=!1,t=$('#personalize .hightlighted-section[data-type-of-component="favouriteStations"]').parent(".radioButton").index(),a=$('#personalize .hightlighted-section[data-type-of-component="specialGuests"]').parent(".radioButton").index(),i=$('#personalize .hightlighted-section[data-type-of-component="navigationSettings"]').parent(".radioButton").index();$('#personalize .hightlighted-section[data-type-of-component="specialOccasion"]').parent(".radioButton").index();if(e.each(function(e,t){switch(l="",r=$(t).find(".hightlighted-section").data("type-of-component"),d=s=!1,r){case"mobilePhone":if(""===$(t).find(".user-phone-name input").val())return;l=$(t).find(".user-phone-name input").val(),this.isSummaryInnerReady=!0,$(t).find(".hightlighted-section").data("verify-full-width")&&(s=!0);break;case"climateControl":if(""===$(t).find("select").val())return;l=$(t).find("select").val(),this.isSummaryInnerReady=!0,$(t).find(".hightlighted-section").data("verify-full-width")&&(s=!0);break;case"radioButtons":if(l=$(t).find('input[type="radio"]:checked').val(),$(t).find("input[type=radio].showFordPassPopup").length&&(null==l&&(this.isFordPassShown=!1),this.showFordPassPopupCountryList.includes(this._countryCode.value))&&(this.showFordPassPopupFlag=!(null!=l&&(!$(t).find('input[type="radio"].showFordPassPopup:checked').val()||this.isFordPassShown))),!l)return;this.isSummaryInnerReady=!0,$(t).find(".hightlighted-section").data("verify-full-width")&&(s=!0);break;case"radioButtonsWithTextbox":if(l=$(t).find('input[type="radio"]:checked').val(),(m=!!$(t).find('input[type="radio"]:checked').hasClass("showTextboxOption"))&&""!=$(t).find(".input-field input").val()&&(l+=" - "+$(t).find(".input-field input").val()),!l)return;this.isSummaryInnerReady=!0,$(t).find(".hightlighted-section").data("verify-full-width")&&(s=!0);break;case"checkboxes":if(p=!(u=[]),$(t).find('input[type="checkbox"]:checked').each(function(){$(this).hasClass("otherCheckOption")&&""!=$(t).find(".input-field input").val()?(u.push($(this).val()+" - "+$(t).find(".input-field input").val()),p=!0):$(this).hasClass("otherCheckOption")||u.push($(this).val())}),u.length&&$.each(u,function(e,t){l+=0<e?", "+t:t}),!l)return;this.isSummaryInnerReady=!0,$(t).find(".hightlighted-section").data("verify-full-width")&&(s=!0);break;case"colorizer":if(!this.lighting)return;l=this.lighting,this.isSummaryInnerReady=!0,$(t).find(".hightlighted-section").data("verify-full-width")&&(s=!0);break;case"customerNotes":if(!(o=$(t).find("textarea").val()))return;l=o,this.isSummaryInnerReady=!0,$(t).find(".hightlighted-section").data("verify-full-width")&&(s=!0);break;case"favouriteStations":return void($(t).find(".hightlighted-section").data("verify-full-width")&&(c=!0));case"preferredTime":var a=$(t).find("select");if(!(l=a.eq(0).val()&&a.eq(1).val()&&a.eq(2).val()?a.eq(0).val()+":"+a.eq(1).val()+" "+a.eq(2).val():l))return void(this.preferredTime=!1);this.isSummaryInnerReady=!0,$(t).find(".hightlighted-section").data("verify-full-width")&&(s=!0);break;case"preferredTimeTwo":var i=(a=$(t).find("select")).eq(0).val(),a=a.eq(1).val();if(!(l=i&&a?(i<10?"0":"")+i+":"+(a<10?"0":"")+a:l))return void(this.preferredTime=!1);this.isSummaryInnerReady=!0,$(t).find(".hightlighted-section").data("verify-full-width")&&(s=!0);break;case"vehicledecoration":var n=$(t).find('input[type="radio"]:checked').val();if(!(l=(l=n?$(t).find("select option:checked").val():l)||n))return;this.isSummaryInnerReady=!0,$(t).find(".hightlighted-section").data("verify-full-width")&&(s=!0);break;case"specialOccasion":if((n=$(t).find("select option:checked").val())==this.otherOccasionVal?this.otherOccasion=!0:this.otherOccasion=!1,!(l=n))return;this.isSummaryInnerReady=!0,$(t).find(".hightlighted-section").data("verify-full-width")&&(s=!0);break;case"poojaceremony":var n=$(t).find('input[type="radio"]:checked').val(),o=$(t).find("textarea").val();if(!(l=n&&o?o:l))return;this.isSummaryInnerReady=!0,$(t).find(".hightlighted-section").data("verify-full-width")&&(s=!0)}p?this.radioSections.push({heading:$(t).find(".left-title").text(),value:l,isSeparateRow:s,sectionName:r,isCheckboxHasOther:p}):m?this.radioSections.push({heading:$(t).find(".left-title").text(),value:l,isSeparateRow:s,sectionName:r,isRadioHasOther:m}):this.radioSections.push({heading:$(t).find(".left-title").text(),value:l,isSeparateRow:s,sectionName:r})}.bind(this)),e=this.radioSections.findIndex(function(e){return"specialOccasion"==e.sectionName}),this.otherOccasion?this.radioSections[e]={heading:$('.hightlighted-section[data-type-of-component="specialOccasion"]').find(".left-title").text(),value:$('.hightlighted-section[data-type-of-component="specialOccasion"]').find(".Other.textfield input").val(),sectionName:"specialOccasion",otherOccasion:this.otherOccasion}:-1!=e&&this.radioSections[e].hasOwnProperty("otherOccasion")&&delete this.radioSections[e].otherOccasion,this.userAddresses.addr1&&this.radioSections.splice(i,0,{heading:$('.hightlighted-section[data-type-of-component="navigationSettings"]').find(".hightlighted-section-inner.address-row").data("navigation-settings-1"),value:this.userAddresses.addr1,isSeparateRow:d}),this.userAddresses.addr2&&this.radioSections.splice(i+1,0,{heading:$('.hightlighted-section[data-type-of-component="navigationSettings"]').find(".hightlighted-section-inner.address-row").data("navigation-settings-2"),value:this.userAddresses.addr2,isSeparateRow:d}),this.stations.fm.length){var n,o=[];for(n in this.stations.fm)o.push(this.stations.fm[n]);this.radioSections.splice(t,0,{heading:$('.hightlighted-section[data-type-of-component="favouriteStations"]').find(".stations-row").data("fm-radio-settings"),value:"",array:o,isSeparateRow:c,isFMRow:!0,sectionName:"favouriteStations"})}if(this.stations.am.length){var h,f=[];for(h in this.stations.am)f.push(this.stations.am[h]);this.radioSections.splice(t+1,0,{heading:$('.hightlighted-section[data-type-of-component="favouriteStations"]').find(".stations-row").data("am-radio-settings"),value:"",array:f,isSeparateRow:c,isAMRow:!0,sectionName:"favouriteStations"})}if(this.splGuests.length){var g,v=[];for(g in this.splGuests)v.push(this.splGuests[g]);this.radioSections.splice(a,0,{heading:$('.hightlighted-section[data-type-of-component="specialGuests"]').find(".left-title").text(),value:"",splarray:v,isSplGuestRow:!0,sectionName:"specialGuests"})}},s.prototype.personalizeValidation=function(){this.preferredTime=!0,this._generateSummarySection(),this.preferredTime||($(".preferred-time").find("small.preferredtimeerror").text(this.preferredTimeError),$(".preferred-two-time").find("small.preferredtimeerror").text(this.preferredTimeError),this._scrollTo(".preferred-two-time",1e3)),this.preferredTime&&this.showFordPassPopupFlag&&!this.isFordPassShown&&(this.showFordPassPopup(),this._scrollTo($(".showFordPassPopup").parents(".hightlighted-section"),1e3))},s.prototype.showFordPassPopup=function(){var t=this,a=$("#fordPassPopup"),e=$(window).width()<768?"80%":"640px";layer.open({type:1,title:!1,scrollbar:!1,closeBtn:0,area:[e,""],btn:[t.fordPassPopUpYesText],success:function(e){t.isFordPassShown=!0,e.find(".layui-layer-btn > a").addClass("fds-primary-button small-fds-button"),e.find(".layui-layer-btn > a:not(:first-child)").addClass("fds-Outline")},yes:function(e){t.isFordPassShown=!0,a.hide(),$(".layui-layer-btn").hide(),layer.close(e)},shadeClose:!1,content:a})},s.prototype.showSummarySection=function(){this._showPreloading(),this.preferredTime=!0,this._getSummary(),this._generateSummarySection();var e=!0,t=$(".stations-row > .columns > .row select").parents(".stations-row > .columns > .row").find(".textfield input");t.parent().find("small.error").text()&&(e=!1,this._scrollTo(t.parent(),500),this._hidePreloading()),this.preferredTime||($(".preferred-time").find("small.preferredtimeerror").text(this.preferredTimeError),$(".preferred-two-time").find("small.preferredtimeerror").text(this.preferredTimeError),this.setActiveStep(this.steps.activeStep,!0),e=!1,this._hidePreloading(),this._scrollTo(".preferred-two-time",1e3)),this.preferredTime&&this.showFordPassPopupFlag&&!this.isFordPassShown&&(this.showFordPassPopup(),this.setActiveStep(this.steps.activeStep,!0),e=!1,this._hidePreloading(),this._scrollTo($(".showFordPassPopup").parents(".hightlighted-section"),1e3)),e&&(this.noModel||"first"!=this.personalizePositon||this._getOperations(),r.getPredeliveryRefreshEvents().loadReviewPage(this._formatNameplate(this.selectedCar.model),this._toLowercase(this.selectedCar.series),this.selectedCar.color,this.dealerIDModel,this.selectedCar.DealerName),this._hidePreloading(),this._scrollTo("body",1e3),this.sections.welcome.active=!1,this.sections.steps.active=!1,this.sections.thankyou.active=!1,this.sections.summary.active=!0,this.personalizeSectionActive=!1,this.stepsHeader.addClass("deactivate"),this.submitError="",$(".tabs-nav .tabs-nav-item").eq(this.questionaireNavTabs.length-1).addClass("completed"),this.questionairreTabs.hide(),e=(t=$(".review-personal-details-nav .tabs-nav-item.active")).find("a").attr("href"),this.personalDetailsTab(t,e),setTimeout(function(){$(".review-feature-details-nav .tabs-nav-item").removeClass("active").eq(0).addClass("active");var e=$(".review-feature-details-nav .tabs-nav-item.active"),t=e.find("a").attr("href");this.featureDetailsTab(e,t),this._$scope.$apply()}.bind(this),100),setTimeout(function(){this.reviewFeatureAccordian(),this._$scope.$apply()}.bind(this),100),$("#modelTrain").val()||this.isdatepast||this.isSubmit||this.saveAndContinue(),this._$timeout(function(){var e=$("#global-ux .preDeliveryManualDataReferesh .preDeliveryManualForm .summary-section .review-feature-details .tabs-nav-list .tabs-nav-item.two-col > a h4"),t=$("#global-ux .preDeliveryManualDataReferesh .preDeliveryManualForm .summary-section .review-feature-details .tabs-nav-list .tabs-nav-item.two-col > a p");e.length&&e.equalHeightContent(),t.length&&t.equalHeightContent()}))},s.prototype.capitalizeFirstLetter=function(e){e=e.toLowerCase();return e.charAt(0).toUpperCase()+e.slice(1)},s.prototype._getPDFData=function(){var e={},t=this.locationhost.split("/"),t=(this.selectedCar.image&&(this.carImg=t[0]+"//"+t[2]+this.selectedCar.image),e.firstName=this.userData.firstName,e.lastName=this.userData.lastName,e.contactNumber=this.userData.contactNumber,e.nameplate=this.selectedCar.model,e.model=this.selectedCar.series,e.color=this.selectedCar.color,e.dealer=this.selectedCar.dealer,e.deliveryDate=this.selectedCar.DeliveryDate.replace("/",".").replace("/","."),this.carImg&&(e.carImg=this.carImg),e.pdfVO={},e.pdfVO),n=(t.personalList=[],t.personalList),o=this,a=($(".summary-section .review-personalize-details .predelivery-details > li").each(function(e,t){var a={};if(a.title=o.capitalizeFirstLetter($(t).find(".details-title").text().trim().toString()),1<$(t).find(".details-data").length){a.value="";for(var i=$(t).find(".details-data:not(:empty) .details-data"),e=0;e<i.length;e++)a.value=0==e?i.eq(e).text().trim().toString():a.value+" "+i.eq(e).text().trim().toString()}else a.value=$(t).find(".details-data").text().trim();n.push(a)}),this.staticQns.length&&(t.staticQuestions=JSON.parse(this.staticQns)),[]);if("first"==this.personalizePositon?Array.prototype.push.apply(a,this.questionaireNavPersonalizeTabs):Array.prototype.push.apply(a,this.questionaireNavTabs),a.length&&(this.featuresShowMeFlag||this.featuresShowMeLaterFlag)){t.categoriesList=[];for(var i=t.categoriesList,r=this.featuresHeaderArr,l=0;l<a.length-1;l++){var s=[],c=[],d=!0;$(a[l].target).find(".subcatcategoryConfig").each(function(e,t){c=[],$(t).find(".accordianMain-content .featureList").each(function(e,t){var a=$(t).find(".details-content-left > span").text();2!=(t=Number($(t).find('input[type="radio"]:checked').val()))&&(d=!1,c.push({subcategoriesFeatureName:a.toString(),subcategoriesFeatureValue:r[t].toString()}))}),!d&&c.length&&s.push({subcategoriesTitle:$(t).find(".accordianMain-tab .title1").text().trim().toString(),subcategorydescription:$(t).find(".accordianMain-tab .title2").text().trim().toString(),subcategoriesFeatureList:c})}),!d&&s.length&&i.push({categoriesTitle:a[l].title.toString(),subCategory:s})}t.atDeliveryWalkThroughTime=this.featureTotalWalkThroughTime}this._PDFData=e},s.prototype._downloadPDF=async function(){this._GetDataPDFXML(),$("#downloadpdf input[name=Nameplate]").val(this.xmlpdfData.Nameplate),$("#downloadpdf input[name=firstName]").val(this.xmlpdfData.firstName),$("#downloadpdf input[name=middleName]").val(this.xmlpdfData.middleName),$("#downloadpdf input[name=lastName]").val(this.xmlpdfData.lastName),$("#downloadpdf input[name=model]").val(this.xmlpdfData.model),$("#downloadpdf input[name=color]").val(this.xmlpdfData.color),$("#downloadpdf input[name=dealer]").val(this.xmlpdfData.dealer),$("#downloadpdf input[name=deliveryDate]").val(this.xmlpdfData.deliveryDate),this.xmlpdfData.hasOwnProperty("carImg")&&$("#downloadpdf input[name=carImg]").val(this.xmlpdfData.carImg),$("#downloadpdf input[name=GUID]").val(this.xmlpdfData.GUID),$("#downloadpdf input[name=countryCodeISO3]").val(this.xmlpdfData.countryCodeISO3),$("#downloadpdf input[name=templateURL]").val(this.xmlpdfData.templateURL),$("#downloadpdf input[name=emailAddress]").val(this.xmlpdfData.emailAddress),$("#downloadpdf input[name=pdfVO]").val(this.isImgSLEnabled?JSON.stringify(this.xmlpdfData.pdfVO):this.xmlpdfData.pdfVO),$("#downloadpdf input[name=dealerProvince]").val(this.selectedCar.Province),$("#downloadpdf input[name=dealerKhet]").val(this.selectedCar.KhetAmphoe),$("#downloadpdf input[name=dealerName]").val(this.selectedCar.DealerName),$("#downloadpdf input[name=dealerLocation]").val(this.selectedCar.DealerLocation),$("#downloadpdf input[name=dealerAddress]").val(this.selectedCar.DealerAddress),$("#downloadpdf input[name=dealerCity]").val(this.selectedCar.DealerCity),$("#downloadpdf input[name=title]").val(this.userData.title),$("#downloadpdf input[name=contactNumber]").val(this.userData.contactNumber),$("#downloadpdf input[name=headerText]").val(this.xmlpdfData.headerText),this.isImgSLEnabled?await this.downloadIMGSLpdf():($("#downloadpdf").submit(),this._showPreloader()),this._hidePreloader(),r.getPredeliveryRefreshEvents().downloadPDFClick(this._formatNameplate(this.selectedCar.model),this._toLowercase(this.selectedCar.series))},s.prototype.downloadIMGSLpdf=async function(){this._showPreloader();var e=$("#downloadpdf").serializeArray(),a={},e=($.each(e,function(e,t){""!=t.value&&("pdfVO"==t.name?a[t.name]=JSON.parse(t.value):a[t.name]=t.value)}),a.dealerEmail=this.userData.dealerEmail,await this.prepareLinks(this.downloadPdf));try{await fetch(e.apiLink,{method:"POST",headers:{...e.header,"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(a)}).then(e=>e.blob()).then(e=>{e=new Blob([e],{type:"application/pdf"}),e=URL.createObjectURL(e);let t=document.createElement("a");t.href=e,t.download=`Ford_Personalised_Delivery_Checklist_${(e=>{var t=""+((e=new Date(e)).getMonth()+1),a=""+e.getDate(),e=e.getFullYear();return t.length<2&&(t="0"+t),a.length<2&&(a="0"+a),[e,t,a].join("")})(new Date)}.pdf`,document.body.appendChild(t),t.click(),setTimeout(function(){t.remove()},10)}).catch(e=>console.log(e))}catch(e){console.error(e)}},s.prototype._getXMLData=function(){var a={};a.customer={bpId:this.bpid,toDoCode:this.todono,pdf:"Ford_Personalised_Delivery_Checklist_"+this._userGUID.split("-")[2]+"_"+this._userGUID.split("-")[1]+"_"+this._userGUID.split("-")[0]+".pdf"},a.widgets=[],$("#personalize .radioButton .hightlighted-section").each(function(e,t){var i={};i.name=$(t).attr("name"),i.name||(i.name=$(t).find("div.radio-stations").attr("data-frequency-id")),i.fields=[],$(t).find("input:text,select,textarea,input:radio:checked").each(function(e,t){var a={};$(t).val()&&(a.name=$(t).attr("name"),a.textContent=$(t).val(),i.fields.push(a))}),a.widgets.push(i)}),a.preferences=[],$("div.hightlighted-section.col").each(function(e,t){var i={};i.type=$(t).attr("name"),i.categorys=[{id:$(t).find("h4.heading.sub-heading").eq(0).attr("id"),name:$(t).find("h4.heading.sub-heading").eq(0).text(),items:[]},{id:$(t).find("h4.heading.sub-heading").eq(1).attr("id"),name:$(t).find("h4.heading.sub-heading").eq(1).text(),items:[]}],$(t).find(".form.section.operations-section ul.predelivery-details li.item").each(function(e,t){var a={};$(t).find("span.details-title.keyfeature").attr("id")?(a.id=$(t).find("span.details-title.keyfeature").attr("id"),a.name=$(t).find("span.details-title.keyfeature").attr("name"),i.categorys[0].items.push(a)):$(t).find("span.details-title.otherfeature").attr("id")&&(a.id=$(t).find("span.details-title.otherfeature").attr("id"),a.name=$(t).find("span.details-title.otherfeature").attr("name"),i.categorys[1].items.push(a))}),a.preferences.push(i)}),this.xmldata=a},s.prototype.newSubmitHandler=function(){var t=this,a=$("#confirmPopup"),e=$(window).width()<768?"80%":"640px";this.isdatepast&&this.isSubmit||(this.showConfirmPopupCountryList.includes(this._countryCode.value)?layer.open({type:1,title:!1,scrollbar:!1,closeBtn:0,area:[e,""],btn:[t.confirmPopupYesText,t.confirmPopupCancelText],success:function(e){e.find(".layui-layer-btn > a").addClass("fds-primary-button small-fds-button"),e.find(".layui-layer-btn > a:not(:first-child)").addClass("fds-Outline")},yes:function(e){a.hide(),$(".layui-layer-btn").hide(),layer.close(e),t._onNewFormSubmit()},btn2:function(e){a.hide(),$(".layui-layer-btn").hide(),layer.close(e)},shadeClose:!1,content:a}):this._onNewFormSubmit())},s.prototype._onNewFormSubmit=function(){this._showPreloading(),this._GetDataPDFXML();var e=this.xmlpdfData;if(e.formData=void 0,null==this.userData.dealerEmail||""==this.userData.dealerEmail){var t,a=$(".dealeraddress-section").data("dealercodeemail"),i=$("#select-Dealername").val()?$("#select-Dealername").val():this.selectedCar.dealerID;for(t in a)if(a[t].dealercode==i){this.userData.dealerEmail=a[t].dealeremail;break}}e.dealerProvince=this.selectedCar.Province,e.dealerKhet=this.selectedCar.KhetAmphoe,e.dealerName=this.selectedCar.DealerName,e.contactNumber=this.userData.contactNumber,e.dealerLocation=this.selectedCar.DealerLocation,e.dealerCity=this.selectedCar.DealerCity,e.title=this.userData.title,e.dealerEmail=this.userData.dealerEmail,""!==this.dealerGroupMail&&""!==this.additionalDealerEmail?e.additionalDealerEmails=this.dealerGroupMail+";"+this.additionalDealerEmail:""!==this.dealerGroupMail?e.additionalDealerEmails=this.dealerGroupMail:""!==this.additionalDealerEmail?e.additionalDealerEmails=this.additionalDealerEmail:e.additionalDealerEmails=void 0,e.submitStatus=1,e.API=this._API,e&&setTimeout(function(){this._emailNewPDF(!0,e),this._$scope.$apply()}.bind(this),10)},s.prototype._GetDataPDFXML=function(){this.getAllFieldValues(),this._getXMLData(),this._getPDFData();var e=this.formSubmitData,t=this.formSubmitData,a=JSON.parse(t.formData);t.step=void 0,t.color=this._PDFData.color,t.dealer=this._PDFData.dealer,t.deliveryDate=this._PDFData.deliveryDate,this._PDFData.hasOwnProperty("carImg")&&(t.carImg=this._PDFData.carImg),t.pdfVO=this.isImgSLEnabled?this._PDFData.pdfVO:JSON.stringify(this._PDFData.pdfVO),t.model=this._PDFData.model,t.dealerProvince=this._PDFData.dealerProvince,t.dealerLocation=this._PDFData.dealerLocation,t.dealerName=this._PDFData.dealerName,t.dealerKhetAmphoe=this._PDFData.dealerKhetAmphoe,t.headerText=this.headerText,a.isSubmit=!0,a.XmlData=this.xmldata,t.formData=JSON.stringify(a),e.formData=JSON.stringify(a),t.GUID=1==this.isExistData?this._userGUID:this.dummyGUID,t.bpID=this.bpid,t[this._countryCode.name]=this._countryCode.value,t.Nameplate=this.selectedCar.model,t.templateURL=this.righttemplateURL,this.xmlpdfData=e},s.prototype._showThankyouSection=function(){this._scrollTo("body",1e3),this.sections.welcome.active=!1,this.sections.steps.active=!1,this.sections.thankyou.active=!0,this.sections.summary.active=!1,this.stepsHeader.addClass("deactivate"),r.getPredeliveryRefreshEvents().loadThankyouPage(this._formatNameplate(this.selectedCar.model),this._toLowercase(this.selectedCar.series),this.selectedCar.color,this.dealerIDModel,this.selectedCar.DealerName)},s.prototype._formatNameplate=function(e){return"ford "+e.toLowerCase()},s.prototype._toLowercase=function(e){return e.toLowerCase()},s}),define("pre-delivery-manual-data-refresh/directives/preDeliveryManualForm.directive.compile",[],function(){return function(n){return function(t,a,i){t.$watch(function(e){return e.$eval(i.compile)},function(e){a.html(e),n(a.contents())(t)})}}}),define("pre-delivery-manual-data-refresh/services/preDeliveryManualForm.service.predeliverydata",[],function(){return function(){var a={},e=$(".your-ford-section"),t=$(".market-config-data");return a.isGUIDReceivedSuccessfully=!1,a.isGUIDReceivedUnsuccessfully=!1,a.GUIDData="",a.getSessionExpiryTime=function(){return t.data("session-expiry-time")||0},a.getModelsData=function(){return e.data("nameplatadata")},a.getDealerCodeEmailData=function(){return 0<$(".dealership-section").length?$(".dealership-section").data("dealercodeemail"):0<$(".dealeraddress-section").length?$(".dealeraddress-section").data("dealercodeemail"):null},a.getDealersData=function(){return $(".dealership-section").data("dealershipdata")},a.getDealersEmails=function(){return $(".dealership-section").data("dealership-email-data")},a.getDealerMailTemplate=function(){return $(".your-ford-section").data("dealer-mail-template-url-variable-id")},a.getFordMailTemplate=function(){return $(".your-ford-section").data("ford-mail-template-url-variable-id")},a.getAPIURL=function(){return $("#serviceLayerUrl").val()},a.getEmailTemplateId=function(){return e.data("mail-template-url-variable-id")},a.getGUID=function(e){a.GUIDData="";var t=a.getAPIURL()+"/fordleads/leads/PreDelivery/loadingInformation";""!=$("#publicDomainEnabled").val()&&(t="/fordleads/leads/PreDelivery/loadingInformation"),$.ajax({type:"POST",url:t,data:{GUID:e},dataType:"json",async:!1,success:function(e){200===e.returnCode?(a.GUIDData=e,a.isGUIDReceivedSuccessfully=!0,a.isGUIDReceivedUnsuccessfully=!1):(a.isGUIDReceivedSuccessfully=!1,a.isGUIDReceivedUnsuccessfully=!0,a.GUIDData="")},error:function(){a.isGUIDReceivedSuccessfully=!1,a.isGUIDReceivedUnsuccessfully=!0,a.GUIDData=""}})},a.getStates=function(){var e=$(".user-postcode"),t="regions-config-json";return e.length&&e.data(t)?e.data(t):""},a}}),define("refactored-model-details-compare/component.refactoredModelDetailsCompare.app",["angular"],function(e){return e.module("refactoredModelDetailsCompare",[])}),define("refactored-model-details-compare/component.refactoredModelDetailsCompare.controllers",["refactored-model-details-compare/component.refactoredModelDetailsCompare.app","refactored-model-details-compare/controllers/refactoredModelDetailsCompare.controller.main"],function(e,t){e.controller("MainCtrl",["$scope","workFlowData",t])}),define("refactored-model-details-compare/component.refactoredModelDetailsCompare.directives",["refactored-model-details-compare/component.refactoredModelDetailsCompare.app","refactored-model-details-compare/directives/refactoredModelDetailsCompare.directive.slider","refactored-model-details-compare/directives/refactoredModelDetailsCompare.directive.fixedHeader","refactored-model-details-compare/directives/refactoredModelDetailsCompare.directive.mobileCompare","refactored-model-details-compare/directives/refactoredModelDetailsCompare.directive.locationOverlay"],function(e,t,a,i,n){e.directive("slider",["workFlowData",t]),e.directive("fixedHeader",[a]),e.directive("mobileCompare",[i]),e.directive("locationOverlay",["workFlowData",n])}),define("refactored-model-details-compare/component.refactoredModelDetailsCompare.filters",["refactored-model-details-compare/component.refactoredModelDetailsCompare.app","refactored-model-details-compare/filters/refactoredModelDetailsCompare.filter.encodeUriComponent","refactored-model-details-compare/filters/refactoredModelDetailsCompare.filter.pasteHTML"],function(e,t,a){e.filter("filterEncodeUriComponent",[t]),e.filter("pasteHTML",["$sce",a])}),define("refactored-model-details-compare/component.refactoredModelDetailsCompare",["jquery","angular","jquery-flexslider","ui-sortable","analytics/analyticsEventLayer","refactored-model-details-compare/component.refactoredModelDetailsCompare.app","refactored-model-details-compare/component.refactoredModelDetailsCompare.services","refactored-model-details-compare/component.refactoredModelDetailsCompare.directives","refactored-model-details-compare/component.refactoredModelDetailsCompare.controllers","refactored-model-details-compare/component.refactoredModelDetailsCompare.filters"],function(r,l,e,t,a,i,n,o,s,c){var d={},u=r(".refactoredModelDetailsCompare");var p,m=function(){var e,t;return p||((e=document.createElement("div")).className="scrollbar-measure",document.body.appendChild(e),t=e.offsetWidth-e.clientWidth,document.body.removeChild(e),p=t),p};return d.init=function(){var t,e,a,i,n,o;e=r(window).width()+m()<768,u.attr("data-is-mobile",e),t=new Date,u.find(".location-link-wrap .prices-label").each(function(){var e=r(this);e.html(e.html().replace("[@date]",t.toDateString()))}),e=r.cookie("common.location.LOC"),a=r.cookie("common.location.type"),i=r(".refactored-model-details-compare-inner .location-overlay").attr("data-commercial-label"),o=r(".refactored-model-details-compare-inner .location-overlay").attr("data-personal-label"),n=r("#isDynamicPriceBasedLocation").val(),r(".refactored-model-details-compare-inner .location-overlay .prices-shown").css("display","none"),"false"!==n&&r(".refactored-model-details-compare-inner .location-overlay").css("display","block"),e&&"false"!==n&&(r(".refactored-model-details-compare-inner .location-overlay .firstTime").css("display","none"),r(".refactored-model-details-compare-inner .location-overlay .prices-shown").css("display","inline"),r(".refactored-model-details-compare-inner .location-overlay .notFirstTime").css("display","inline"),r(".refactored-model-details-compare-inner .location-overlay .notFirstTime").css("clear","both"),"P"===a?r(".refactored-model-details-compare-inner  .location-overlay .auPostaTypeOverlay").html(o||""):"B"===a&&r(".refactored-model-details-compare-inner  .location-overlay .auPostaTypeOverlay").html(i||""),r(".refactored-model-details-compare-inner .location-overlay .auPostaCodeOverlay").text(e)),n=r("#namePlates"),o=u.find(".refactored-model-details-compare-wrapper").data("nameplate-key"),n.length?n.val(n.val()+","+o):u.append(r('<input type="hidden" id="namePlates" value='+o+">")),u.length&&u.each(function(e,t){l.bootstrap(t,["refactoredModelDetailsCompare"])})},d}),define("refactored-model-details-compare/component.refactoredModelDetailsCompare.services",["refactored-model-details-compare/component.refactoredModelDetailsCompare.app","refactored-model-details-compare/services/refactoredModelDetailsCompare.service.main"],function(e,t){e.service("workFlowData",["$rootScope",t])}),define("refactored-model-details-compare/controllers/refactoredModelDetailsCompare.controller.main",["jquery"],function(s){return function(a,i){var n=this,o=s(".refactoredModelDetailsCompare"),e=1e3;n.serviceData=i.getWorkFlowData(),n.accordions=n.serviceData.accordionsModelsDetails,n.accordionClass=[];for(var t=0;t<n.accordions.length;t++)n.accordionClass[t]=!1;n.selectedCategoryToFilter="",n.showDifferenciesOnly=!1,n.openedAccordionIndex=0,n.featuresSeparator=o.find('[name="separatorStyle"]').val()||":",n.isDynamicPriceBasedLocation=s("#isDynamicPriceBasedLocation").val(),n.selectModelsOverlayOpened=!1,n.removingModelKey,n.placingModelKey;var r="";function l(){(e=o.find(".fixed-models-compare")?e:0)&&s("html, body").animate({scrollTop:0},e)}n.toggleAccordion=function(e){if(!_.isNumber(e))return!1;var t=n.accordionClass[e];n.accordionClass=_.map(n.accordionClass,function(e){return!1}),n.accordionClass[e]=!t,n.openedAccordionIndex=n.accordionClass[e]?e:null,_.isNumber(n.openedAccordionIndex)&&a.$broadcast("rebuildModelsCompareAccordionOpened",{accordionId:e})},n.changeDifferenciesVisible=function(){if(!_.isNumber(n.openedAccordionIndex))return!1;setTimeout(function(){a.$broadcast("changeAccordions"),a.$broadcast("rebuildModelsCompareSliders")},0)},n.changeCategoryVisible=function(){setTimeout(function(){a.$broadcast("changeAccordions")},0)},n.openSelectModelsOverlay=function(e,t){l(),r=e,n.removingModelKey=t,n.selectModelsOverlayOpened=!0},n.closeSelectModelsOverlay=function(){n.selectModelsOverlayOpened=!1,n.removingModelKey=null,n.placingModelKey=null,r=""},n.checkModelForReplacing=function(e){n.placingModelKey=e},n.confirmSelectModels=function(){var e,t;e=n.removingModelKey,t=n.placingModelKey,console.log(e,t),o.find(".loader").addClass("shown"),i.prepareNewSelectedModels(r,e,t),a.$broadcast("rebuildModelsCompareSliders"),n.closeSelectModelsOverlay()},a.$on("removeItemModelsCompareSliders",function(){l(),a.$apply(),a.$broadcast("rebuildModelsCompareSliders")})}}),define("refactored-model-details-compare/services/refactoredModelDetailsCompare.service.main",["jquery"],function(g,e){return function(i){var a,e={},o={},t=g(".refactoredModelDetailsCompare"),n=t.find(".refactored-model-details-compare-wrapper"),r=t.find(".back-to-overview a"),l=n.data("all-models-in-nameplate")?n.data("all-models-in-nameplate").split(","):[],s=n.data("attributes-json")||[],c=h("modelCompare"),d=[],u=(g("#isDynamicPriceBasedLocation").val(),g("#isDynamicPrice").val(),t.find(".location-link-wrap").data("commercial-label")),p=t.find(".location-link-wrap").data("personal-label");function m(){if(s.length)if(c.length){o.accordionsModelsDetails=[],o.modelsMainDetails=[],e=g(window).width()<767?3e3:2e3,_.each(o.modelsFullMainDetails,function(e){e.isSelected=!1}),_.each(c,function(e){var t,a,i=_.find(s,{key:e})||{};"{}"!=JSON.stringify(i)&&(i=i.featuresList,f(e),_.each(i,function(e,t){var a=_.find(o.accordionsModelsDetails,{accordionTitle:e.categoryName})||{};"{}"==JSON.stringify(a)&&o.accordionsModelsDetails.push({accordionTitle:e.categoryName})}),t=i,a=e,_.map(o.accordionsModelsDetails,function(i){i.hasOwnProperty("features")||(i.features=[]);var n=[];_.each(t,function(e,t){var a;i.accordionTitle==e.categoryName&&((a={}).desc=e.desc,a.value=e.value,a.difference=!1,n.push(a))}),i.features.push({key:a,info:n})}))}),setTimeout(function(){g(document).ready(function(){var t,i="data-minheight",n=g.find(".equal-height"),a=[],o={};for(t in _.each(n,function(e){e=g(e).attr(i);a.indexOf(e)<0&&a.push(e)}),_.each(a,function(t,e){var a=0;_.each(n,function(e){g(e).css("min-height","auto"),g(e).attr(i)==t&&(e=g(e).outerHeight(),a<e)&&(a=e,o[t]=a)})}),o)_.each(n,function(e){t==g(e).attr(i)&&g(e).css("min-height",o[t])})})},e),(()=>{if(!o.accordionsModelsDetails.length||!o.accordionsModelsDetails[0].features.length)return;_.each(o.accordionsModelsDetails,function(e){t=[],_.each(e.features,function(e){t.push(e.info.length)});for(var t,a=Math.max.apply(null,t),i=[],n=[],o=0,r=0;r<a;r++)i=[],n=[],_.each(e.features,function(e){i.push(e.info[r]?e.info[r].value:null),n.push(e.info[r]?e.info[r].desc:""),e.info[r].empty=!1}),1<_.uniq(i).length&&_.each(e.features,function(e){e.info[r]&&(e.info[r].difference=!0,o++)}),(e=>{var a=!0;return g.each(e,function(e,t){""!=t&&(a=!1)}),a})(n)&&_.each(e.features,function(e){e.info[r]&&(e.info[r].empty=!0)});o||(e.empty=!0)})})();var e,t=JSON.parse(g("input[name=categoriesJson]").val());if(t&&0!=t.length){for(var a=[],i=0;i<o.accordionsModelsDetails.length;i++)o.accordionsModelsDetails[i].accordionTitle&&(a[o.accordionsModelsDetails[i].accordionTitle]=o.accordionsModelsDetails[i]);for(var n=[],i=0;i<t.length;i++)a[t[i].categoryName]&&(n.push(a[t[i].categoryName]),delete a[t[i].categoryName]);if(n&&0!=n.length){for(var i in a)a[i].accordionTitle&&n.push(a[i]);o.accordionsModelsDetails=n}}}else window.location.href=r.prop("href")}function h(e){for(var t=e+"=",a=document.cookie.split(";"),i=0;i<a.length;i++){for(var n=a[i];" "==n.charAt(0);)n=n.substring(1,n.length);if(0==n.indexOf(t))return n.substring(t.length,n.length)}return null}function f(e){e=_.find(o.modelsFullMainDetails,{key:e})||{};"{}"!=JSON.stringify(e)&&(e.isSelected=!0,o.modelsMainDetails.push(e))}return c=c?(a=decodeURIComponent(c).split(":"),_.filter(a,function(e,t){return a.indexOf(e)==t})):[],d=c.length&&l.length?_.difference(l,c):[],o.dataNameplateKey=n.data("nameplate-key"),o.modelsRemainingCount=d.length,o.accordionsModelsDetails=[],o.modelsFullMainDetails=[],o.modelsMainDetails=[],o.location=h("common.location.LOC")||"",o.usageType="B"===h("common.location.type")?u:p,(()=>{if(!s.length)return;_.each(s,function(e){var a,t;_.find(o.modelsFullMainDetails,{key:e.key})||(a=[],t={},_.each(e.vehicleAttributes,function(e,t){a.push({key:e.attribute,label:e.attributeName,value:e.attributeValue,prefix:e.prefix,suffix:e.suffix,disclosure:e.attributeDisclosure})}),t.imgURL=e.imgUrl,t.key=e.key,t.isSelected=!1,t.vehicleName=e.vehicleName,t.mainAttributesList=a,o.modelsFullMainDetails.push(t))})})(),m(),e.getWorkFlowData=function(){return o},e.updatePrices=function(a){_.each(o.modelsFullMainDetails,function(e){var t=_.find(a,{id:e.key});_.each(e.mainAttributesList,function(e){e.key=="startingPrice"+t.id&&(e.value=t.startingPrice),e.key=="maxPrice"+t.id&&(e.value=t.maxPrice),e.key=="priceRange"+t.id&&(e.value=t.priceRange)})}),o.modelsMainDetails=[],_.each(c,function(e){var t=_.find(s,{key:e})||{};"{}"!=JSON.stringify(t)&&f(e)}),i.$apply()},e.updateLocation=function(e,t){o.location=e,o.usageType="B"===t?u:p,i.$apply()},e.prepareNewSelectedModels=function(e,t,a){var i,n;switch(e){case"add":i=_.indexOf(d,a),c.push(d[i]),d.splice(i,1);break;case"replace":console.log("modelsSelected",c),console.log("modelsRemaining",d),n=_.indexOf(c,t),i=_.indexOf(d,a),c[n]=d[i],d.splice(i,1),d.push(t),console.log("modelsSelected",c),console.log("modelsRemaining",d);break;case"remove":n=_.indexOf(c,t.toString()),c.splice(n,1),d.push(t.toString())}o.modelsRemainingCount=d.length,g.cookie("modelCompare",c.join(":"),{path:"/"}),m()},e}}),define("refactored-model-details-compare/filters/refactoredModelDetailsCompare.filter.encodeUriComponent",[],function(){return function(){return window.encodeURIComponent}}),define("refactored-model-details-compare/filters/refactoredModelDetailsCompare.filter.pasteHTML",[],function(){return function(e){return e.trustAsHtml}}),define("refactored-model-details-compare/directives/refactoredModelDetailsCompare.directive.fixedHeader",[],function(){return function(){return{link:function(e,t,a){var i,n,o,r,l,s,c,d,u,p,m,h,f=$(".refactoredModelDetailsCompare"),g=$(document),v=$(window),y=$("body"),b=v.height(),w=!1,C=!1;if(f.data("is-mobile"))return!1;function k(){var e,t,a;n&&(s=f.find(".select-another-model"),s=s.length?s.outerHeight():0,e=n,t=".car-main-info-wrap",a=[],_.each(e.find(t),function(e){a.push($(e).height())}),r=Math.max.apply(null,a)+s,l=r+p+s+15,s=f.find(".compare-head").outerHeight()-b,d=f.find(".compare-head").offset().top,c=f.find(".compare-head").outerHeight()>b?(u=d+s,l+s):(u=d,l))}function S(){w||(n.find(".slides").height(r),n.find(".item").each(function(){$(this).height(r)}),o.outerHeight(l),i.addClass("fixed-models-compare"),y.css("padding-top",c),w=!0)}function x(){!C&&w&&(y.css("padding-top",0),i.removeClass("fixed-models-compare"),n.find(".slides").height("auto"),n.find(".item").each(function(){$(this).height("auto")}),o.outerHeight("auto"),w=!1)}setTimeout(function(){i=f.find(".refactored-model-details-compare-wrapper"),n=f.find(".compare-head-slider"),o=f.find(".compare-head-inner"),p=parseInt(f.find(".compare-head-inner").css("padding-top"),10),m=f.find(".accordion-content").length?1e3*f.find(".accordion-content").css("transition-duration").slice(0,-1):0,g.on("scroll",function(){(g.scrollTop()>=u?S:x)()})},0),e.$on("settedCarouselHeight",function(){k(),g.scrollTop()>=u&&S()}),e.$on("compareSlidersInited",function(){x(),k(),g.scrollTop()>=u&&S()}),e.$on("rebuildModelsCompareAccordionOpened",function(e,t){w||(C=!0,$("html, body").animate({scrollTop:u+10},0),S()),clearTimeout(h),h=setTimeout(function(){$("html, body").animate({scrollTop:f.find('.accordion-wrap[data-id="'+t.accordionId+'"]').offset().top-l},1e3,function(){C=!1})},1.1*m)})}}}}),define("refactored-model-details-compare/directives/refactoredModelDetailsCompare.directive.locationOverlay",[],function(){return function(l){return{link:function(e,t,a){var i,n,o=$(".refactoredModelDetailsCompare"),r=$(document);$(window).on("onoverlayload",function(){var a=$(".overlay-content .selectZipCity");a.find("form").addClass("location-form"),r.on("submit",".location-form",function(e){e.stopPropagation()}),a.find(".location-form").on("submit",function(e){e.stopPropagation();var e=a.find('input[name="l"]').val(),t=a.find('input[name="u"]:checked').data("attr-value");return 0==a.find(".error").length&&($(".overlay-content .overlay-close").trigger("click"),((e,t)=>{if(!n.toString())return;l.updateLocation(e,t),$.cookie("common.location.LOC",e,{path:"/"}),$.cookie("common.location.type",t,{path:"/"}),updateLocationPriceAjax()})(e,t)),!1})}),setTimeout(function(){i=o.find(".refactored-model-details-compare-wrapper").data("all-models-in-nameplate"),updatePriceAjax($("#isDynamicPrice").val(),i,"",[".refactoredModelDetailsCompare .vehicleAttr"])},0),r.on("pricesUpdatedNoLocation",function(e){var t=[];_.each(o.find(".vehicleAttr"),function(e){var a={};$(e).find("span.hidden").each(function(){var e=$(this),t=e.closest(".item").data("modelkey").toString();a[e.attr("id").replace(t,"")]=e.text(),a.id=t}),t.push(a)}),l.updatePrices(t)}),r.on("pricesUpdated",function(e){if(!e.message)return!1;n=o.find(".refactored-model-details-compare-wrapper").data("nameplate-key"),l.updatePrices(e.localData[n].derivatives)})}}}}),define("refactored-model-details-compare/directives/refactoredModelDetailsCompare.directive.mobileCompare",["analytics/analyticsEventLayer","disclosure/component.disclosure"],function(e,t){return function(e){return{link:function(e,t,a){$(".refactoredModelDetailsCompare"),$(document)}}}}),define("refactored-model-details-compare/directives/refactoredModelDetailsCompare.directive.slider",["analytics/analyticsEventLayer","disclosure/component.disclosure"],function(e,w){return function(b){return{link:function(i,e,t){var l,s,c,d,u,n=$(".refactoredModelDetailsCompare"),a=$(document),p=!1,m=300,h=!1,o=1e3;function r(){setTimeout(function(){l=n.find("#main-slider"),s=n.find(".accordion-slider"),c=n.find(".compare-models-filter"),d=n.find("#sortable"),$(window).width()<768?(h=!1,m=$(window).width()/2-20):(m=l.find(".item").outerWidth(),h=!0),u=n.find(".loader"),y();var e=n.find("sup[data-disclosure]"),a=[];$.each(e,function(e,t){a.push($(t).attr("data-disclosure"))}),a=_.uniq(a),$.each(a,function(e,a){var t=n.find('sup[data-disclosure="'+a+'"]');$.each(t,function(e,t){w.initOne($(t),a)})}),l.removeClass("compare-head-slider-on-load")},0)}function f(e,t){var a=[];return _.each(e.find(t),function(e){a.push($(e).height())}),Math.max.apply(null,a)}function g(){s.length&&s.each(function(){var e=$(this);e.find(".item").height(f(e,".features-list"))})}function v(){l.length&&(l.find(".item .general-info").height("auto"),l.find(".item .img-wrap").height("auto"),l.find(".item").height("auto"),l.find(".slides").height("auto"),l.find(".item .general-info").height(f(l,".general-info")),l.find(".item .img-wrap").height(f(l,".img-wrap")),l.find(".item").height(f(l,".item")))}r(),a.on("pricesUpdated",function(e){setTimeout(function(){v()},0)}),$(window).load(function(){v(),i.$broadcast("settedCarouselHeight")}),i.$on("rebuildModelsCompareSliders",function(){(o=n.find(".fixed-models-compare")?o:0)&&$("html, body").animate({scrollTop:0},o),setTimeout(function(){d.css("style","").unwrap(),l.find(".flex-control-nav").remove(),l.find(".flex-direction-nav").remove(),l.removeData("flexslider"),r()},o)}),i.$on("changeAccordions",function(){g()});var y=function(){try{c.select2({minimumResultsForSearch:1/0,dropdownCssClass:"model-compare-filter-dropdown"})}catch(e){}var t={},t=l.flexslider({animation:"slide",controlNav:!1,slideshow:!1,animationLoop:!1,directionNav:h,itemWidth:m,start:function(){u.removeClass("shown"),v(),i.$broadcast("compareSlidersInited")},before:function(e){if(!p)for(var t=e.animatingTo,a=n,i=0;i<a.length;i++)$(a[i]).data("flexslider").flexAnimate(t),a[i].flexAnimate(t)}}).data("flexslider"),n=[],o=(s.each(function(){var e=$(this).flexslider({animation:"slide",slideshow:!1,controlNav:!1,directionNav:!1,animationLoop:!1,itemWidth:m}).data("flexslider");n.push(e)}),{}),r=0;d.sortable({appendTo:document.body,revert:!0,placeholder:"ui-state-highlight",start:function(e){o=$(e.originalEvent.target).hasClass("item")?$(e.originalEvent.target):$(e.originalEvent.target).closest(".item"),r=o.index()},stop:function(e,t){var a,i;a=r,i=o.index(),s.each(function(){var e=$(this),t=e.find(".item").eq(a).detach();e.length>=i?0==a&&1==i?t.insertAfter(e.find(".item").eq(0)):t.insertBefore(e.find(".item").eq(i)):t.insertAfter(e.find(".item").eq(i-1))})}}),setTimeout(function(){g(),v()},2e3),l.find(".remove-icon").one("click",function(){p=!0,u.addClass("shown");var e=$(this).closest(".item"),a=e.index();0<=a&&(b.prepareNewSelectedModels("remove",e.data("modelkey")),t.removeSlide(e),n.forEach(function(e,t){e.removeSlide(a)}),i.$emit("removeItemModelsCompareSliders"))}),p=!1}}}}}),define("tagging-framework/analyticsDirectCall",["tagging-framework/analyticsUtilities","common"],function(n,e){var t={},a="global-onclick",o="global-overlay";return t.onclick=function(e,t){digitaldata.onclick.onclickLinkName=e,digitaldata.onclick.onclick=t,n.trackAndReset(a)},t.genericOverlay=function(e,t,a,i){digitaldata.page.pageName=e,digitaldata.page.siteSection=t,digitaldata.page.hierarchy=a,digitaldata.page.pageNameNoVehicle=i,n.trackAndReset(o)},t}),define("tagging-framework/analyticsUtilities",["common"],function(e){var t={notify:function(e,t){"undefined"!=typeof _satellite&&_satellite.notify(e,t=t||1)},track:function(e){t.notify("datalayer for "+e+": "+JSON.stringify(digitaldata),1),digitaldata.onclick.contentType&&digitaldata.onclick.contentType.includes(":impress")&&(digitaldata.onclick.contentType=""),"undefined"!=typeof _satellite&&_satellite.track(e)},resetDatalayer:function(){window.setTimeout(function(){digitaldata=JSON.parse(JSON.stringify(prevDigitaldata))},2e3)},updateDatalayer:function(){prevDigitaldata=JSON.parse(JSON.stringify(digitaldata))},trackAndReset:function(e){t.track(e),t.resetDatalayer()},trackAndUpdate:function(e){t.track(e),t.updateDatalayer()}};return t}),define("tagging-framework/analyticsVariables",["tagging-framework/analyticsUtilities","common"],function(e,t){var a={},i=t.localeStorage(),n="guxfoap.previousSiteSection",o="guxfoap.previousHierarchy",r="guxfoap.previousPagenameNoVehicle",l="guxfoap.previousPageName";return a.getContentSubType=function(){return digitaldata.onclick.contentSubType||""},a.getCurrentCountry=function(){return fordAnalytics.country?fordAnalytics.country.trim():"nocountry"},a.getLincolnSites=function(){return fordAnalytics.dictionary.lincolnSites||[]},a.getPage=function(){return fordAnalytics.pg?fordAnalytics.pg.trim():""},a.getPageCategory=function(){return fordAnalytics.category?fordAnalytics.category.trim():""},a.getPageModelYear=function(){return digitaldata.page&&digitaldata.page.modelYear?digitaldata.page.modelYear:""},a.getPageTitle=function(){return fordAnalytics.pageTitle||""},a.getPageName=function(){return digitaldata&&digitaldata.page&&digitaldata.page.pageName||""},a.getPageNameNoVehicle=function(){return digitaldata.page.pageNameNoVehicle||""},a.getPageNameplate=function(){return digitaldata&&digitaldata.page&&digitaldata.page.nameplate||""},a.getPageNamePrefix=function(){return fordAnalytics.prefix||""},a.getPageSubcategory=function(){return fordAnalytics.subcategory||""},a.getPreviousSiteSection=function(){return"undefined"!=typeof Modernizr&&void 0!==Modernizr.localstorage?localStorage.getItem(n)||"site entry":(e.notify("No Web Storage support. Returning current site section.",1),digitaldata.page.siteSection)},a.setPreviousSiteSection=function(){"undefined"!=typeof Modernizr&&void 0!==Modernizr.localstorage&&i?digitaldata.page.siteSection&&localStorage.setItem(n,digitaldata.page.siteSection):e.notify("No Web Storage support.",1)},a.getPreviousPageName=function(){return"undefined"!=typeof Modernizr&&void 0!==Modernizr.localstorage?localStorage.getItem(l)||"site entry":(e.notify("No Web Storage support. Returning current site section.",1),digitaldata.page.pageName)},a.setPreviousPageName=function(){"undefined"!=typeof Modernizr&&void 0!==Modernizr.localstorage&&i?digitaldata.page.pageName&&localStorage.setItem(l,digitaldata.page.pageName):e.notify("No Web Storage support.",1)},a.getPreviousPagenameNoVehicle=function(){return"undefined"!=typeof Modernizr&&void 0!==Modernizr.localstorage?localStorage.getItem(r)||"site entry":(e.notify("No Web Storage support. Returning current pageNameNoVehicle.",1),digitaldata.page.pageNameNoVehicle)},a.setPreviousPagenameNoVehicle=function(){"undefined"!=typeof Modernizr&&void 0!==Modernizr.localstorage&&i?digitaldata.page.pageNameNoVehicle&&localStorage.setItem(r,digitaldata.page.pageNameNoVehicle):e.notify("No Web Storage support.",1)},a.getPreviousHeirarchy=function(){return"undefined"!=typeof Modernizr&&void 0!==Modernizr.localstorage?localStorage.getItem(o)||"site entry":(e.notify("No Web Storage support. Returning current heirarchy.",1),digitaldata.page.heirarchy)},a.setPreviousHeirarchy=function(){"undefined"!=typeof Modernizr&&void 0!==Modernizr.localstorage&&i?digitaldata.page.siteSection&&localStorage.setItem(o,digitaldata.page.heirarchy):e.notify("No Web Storage support.",1)},a.getSite=function(){return fordAnalytics.dictionary.sites||{}},a.getSiteBusinessUnit=function(){return fordAnalytics.siteBusinessUnit||""},a.getTemplate=function(){return fordAnalytics.template||"unknown"},a.getTool=function(){return digitaldata.page.tool||""},a.setTool=function(e){digitaldata.page.tool=e},a.getToolDescriptor=function(){return digitaldata.page.toolDescriptor||""},a.setToolDescriptor=function(e){digitaldata.page.toolDescriptor=e},a.getVariantName=function(){return digitaldata&&digitaldata.page&&digitaldata.page.variantName||""},a.getVehicleCategory=function(){return fordAnalytics.vehicleCategory||""},a.getVehicleCategoryMappingByMarket=function(e){return fordAnalytics.dictionary.vehicleCategoryMappingByMarket[e]||{}},a.getVehicleNavCategory=function(){return"vehicleNavCategory"},a.getVehicleModel=function(){return digitaldata.vehicle.bodyModelTrim||""},a.getVehicleModelYear=function(){return digitaldata&&digitaldata.vehicle&&digitaldata.vehicle.modelYear||""},a.getVehicleNameplate=function(){return digitaldata&&digitaldata.vehicle&&digitaldata.vehicle.nameplate||""},a.getSiteSection=function(){return digitaldata.page&&digitaldata.page.siteSection?digitaldata.page.siteSection:""},a}),define("vehicledisplay/component.vehicledisplay.app",["angular"],function(e){return e.module("vehicledisplay",[])}),define("vehicledisplay/component.vehicledisplay.controllers",["vehicledisplay/component.vehicledisplay.app","vehicledisplay/controllers/vehicledisplay.controller.main"],function(e,t){e.controller("MainCtrl",["$scope","$window","$compile","$timeout","workFlowData",t])}),define("vehicledisplay/component.vehicledisplay.directives",["vehicledisplay/component.vehicledisplay.app","vehicledisplay/directives/vehicledisplay.directive.slider","vehicledisplay/directives/vehicledisplay.directive.eventPropogation"],function(e,t,a){e.directive("slider",[t]),e.directive("propogation",["$timeout","$filter",a])}),define("vehicledisplay/component.vehicledisplay",["jquery","angular","vehicledisplay/component.vehicledisplay.app","vehicledisplay/component.vehicledisplay.services","vehicledisplay/component.vehicledisplay.controllers","vehicledisplay/component.vehicledisplay.directives","analytics/analyticsEventLayer"],function(n,a,e,t,i,o,r){var l={},s=(n(".vehicledisplay"),n(document.body));function c(){var e,i;i=".filter-radio-holder",(e=n(e=".radio-filter-section")).length&&n.each(e,function(){var t=0,e=n(this),a=e.find(i);a.length&&(n.each(a,function(){var e=n(this);e.removeAttr("style"),e.outerHeight()>t&&(t=e.outerHeight())}),0<t)&&(a=t,e.find(i).height(a))})}return l.init=function(){var t;setTimeout(function(){c()},500),t=n(".mobile-filters-popup"),s.on("click",".latestOffers .dropdown-vehicle-sort ul li a",function(e){e.preventDefault()}),s.on("click",".local-vehicles .local-vehicles-holder .btn-holder .cancel",function(e){e.preventDefault(),n(".local-vehicles .local-vehicles-holder .local-vehicles-form .input-field").removeClass("error"),n(".local-vehicles .local-vehicles-holder .local-vehicles-form .input-field input").removeClass("error"),n(".local-vehicles .local-vehicles-holder .local-vehicles-form small.error").remove()}),n(".filter-btn.show-mob-only").on("click",function(e){e.preventDefault(),t.show()}),n(".mobile-filters-popup .cancel-btn, .mobile-filters-popup .apply-btn").on("click",function(e){e.preventDefault(),t.hide()}),s.on("keyup",function(e){27===e.keyCode&&(e.preventDefault(),t.hide(),setTimeout(function(){n(".local-vehicles .local-vehicles-holder .local-vehicles-form .input-field").removeClass("error"),n(".local-vehicles .local-vehicles-holder .local-vehicles-form .input-field input").removeClass("error"),n(".local-vehicles .local-vehicles-holder .local-vehicles-form small.error").remove()},500))}),r&&(s.on("click",".vehicles-filter-section label",function(){r.getLatestOffersEvents().offersClick()}),s.on("click",".bodytypes-filter-section label",function(){r.getLatestOffersEvents().bodyTypesClick()}),s.on("click",".models-filter-section label",function(){r.getLatestOffersEvents().modelClick()})),n(".vehicledisplay").length&&n(".vehicledisplay.section").each(function(e,t){a.bootstrap(t,["vehicledisplay"])})},l}),define("vehicledisplay/component.vehicledisplay.services",["vehicledisplay/component.vehicledisplay.app","vehicledisplay/services/vehicledisplay.services.workflowdata"],function(e,t){e.service("workFlowData",[t])}),define("vehicledisplay/controllers/vehicledisplay.controller.main",["jquery"],function(u){return function(a,e,t,i,n){var o=this,r=(o.serviceData=n.getWorkFlowData(),o.filteredJson=[],_.each(o.serviceData.itemsData,function(e){o.filteredJson.push(e)}),!!u(".author-only-placeholder").length);function l(e){_.each(e,function(e){e.selected=!1})}function s(e,t,a,i){return!i||_.some(e,function(e){return"model"==e.type?e.selected&&e.type==a&&t==e.modelKey:e.selected&&e.type==a&&t==e.text})}function c(){localStorage.setItem("modelFilterData",JSON.stringify(o.modelFilterData)),localStorage.setItem("filterData",JSON.stringify(o.filterData)),localStorage.setItem("selectedPrice",JSON.stringify(o.rangeFilter.selectedRange)),localStorage.setItem("selectedOffersFlag",o.selectedOffersFlag),localStorage.setItem("selectedBodytypesFlag",o.selectedBodytypesFlag),localStorage.setItem("selectedModelsFlag",o.selectedModelsFlag),localStorage.setItem("selectedPriceFlag",o.selectedPriceFlag)}o.currentLocation=o.serviceData.location,o.currentLocationVal=o.serviceData.location,o.openedOverlay=!1,o.alreadyOpened=!1,o.openedDesclaimerOverlay=!1,o.alreadyDesclaimerOpened=!1,o.errorLocation=!1,o.rangeFilter=o.serviceData.price,o.rangeFilter.formattedRange={min:updatePriceFormat(+o.serviceData.price.sliderMinVal,o.serviceData.currencyFormatPattern,!1),max:updatePriceFormat(+o.serviceData.price.sliderMaxVal,o.serviceData.currencyFormatPattern,!1)},o.offers=o.serviceData.offers,o.models=o.serviceData.models,o.bodyTypes=o.serviceData.bodyTypes,o.filtersListItems=o.serviceData.filtersListItems,o.filterData=o.serviceData.filterData,o.modelFilterData=o.serviceData.modelFilterData,o.selectedOffersFlag=o.serviceData.selectedOffersFlag||!1,o.selectedBodytypesFlag=o.serviceData.selectedBodytypesFlag||!1,o.selectedPriceFlag=o.serviceData.selectedPriceFlag||!1,o.selectedModelsFlag=o.serviceData.selectedModelsFlag||!1,o.sortByOpen=!1,o.setSortBy=function(e,t){switch(o.sortBy=t,e){case"bodyStyle":n.sortPriceDefault(),o.hideHeader=!1;break;case"priceDown":n.sortPriceHighToLow(),o.hideHeader=!0;break;case"priceUp":n.sortPriceLowToHigh(),o.hideHeader=!0;break;case"fuelefficiency":n.sortFuelefficiency(),o.hideHeader=!0}},o.hideEmpty=function(t){return!!o.hideHeader||!_.filter(o.serviceData.itemsData,function(e){return e.catId==t&&!o.hideItem(e.id)}).length},o.resetFilter=function(){(o.selectedOffersFlag||o.selectedBodytypesFlag)&&(l(o.filterData),o.filterByOffersTypes()),o.selectedModelsFlag&&(l(o.modelFilterData),o.filterByModels()),a.$emit("resetVehicleDisplayPrice")},o.removeFilterItem=function(e){(o.selectedOffersFlag||o.selectedBodytypesFlag)&&(o.filterData[e].selected=!1,o.filterByOffersTypes()),o.selectedModelsFlag&&(o.modelFilterData[e].selected=!1,o.filterByModels())},o.checkIfFilterData=function(e){return _.some(e,function(e){return 1==e.selected})?o.selectedFiltersFlag=!0:o.selectedFiltersFlag=!1},a.$on("changeVehicleDisplayPrice",function(e,t){o.rangeFilter.selectedRange=t.values,o.rangeFilter.formattedRange.min=updatePriceFormat(+t.values.min,o.serviceData.currencyFormatPattern,!1),o.rangeFilter.formattedRange.max=updatePriceFormat(+t.values.max,o.serviceData.currencyFormatPattern,!1),o.filterByOffersTypes(t.resetFlag),o.selectedPriceFlag=!(Math.round(+t.values.min)==Math.round(o.serviceData.price.sliderMinVal)&&Math.round(+t.values.max)==Math.round(o.serviceData.price.sliderMaxVal)),localStorage.setItem("selectedPriceFlag",o.selectedPriceFlag),t.resetFlag||a.$apply()}),o.filterByOffersTypes=function(e){o.selectedModelsFlag=!1,e||l(o.modelFilterData),_.some(o.filterData,function(e){return o.selectedOffersFlag=e.selected&&"offers"==e.type}),_.some(o.filterData,function(e){return o.selectedBodytypesFlag=e.selected&&"body_type"==e.type}),c();e=_.filter(o.serviceData.itemsData,function(e){return s(o.filterData,e.offer,"offers",o.selectedOffersFlag)}),e=_.filter(e,function(e){return s(o.filterData,e.bodytype,"body_type",o.selectedBodytypesFlag)});o.filteredJson=_.filter(e,function(e){return e.price>=o.rangeFilter.selectedRange.min&&e.price<=o.rangeFilter.selectedRange.max})},o.filterByModels=function(){o.selectedOffersFlag=!1,o.selectedBodytypesFlag=!1,l(o.filterData),a.$emit("resetVehicleDisplayPrice"),_.some(o.modelFilterData,function(e){return o.selectedModelsFlag=e.selected&&"model"==e.type}),c(),o.filteredJson=_.filter(o.serviceData.itemsData,function(e){return s(o.modelFilterData,e.model,"model",o.selectedModelsFlag)})},o.serviceData.validUrl?((o.selectedOffersFlag||o.selectedBodytypesFlag||o.selectedPriceFlag)&&o.filterByOffersTypes(),o.selectedModelsFlag&&o.filterByModels()):(o.selectedOffersFlag=JSON.parse(localStorage.getItem("selectedOffersFlag")),o.selectedBodytypesFlag=JSON.parse(localStorage.getItem("selectedBodytypesFlag")),o.selectedModelsFlag=JSON.parse(localStorage.getItem("selectedModelsFlag")),o.selectedPriceFlag=JSON.parse(localStorage.getItem("selectedPriceFlag")),(o.selectedOffersFlag||o.selectedBodytypesFlag||o.selectedModelsFlag||o.selectedPriceFlag)&&(o.filterData=JSON.parse(localStorage.getItem("filterData")),o.modelFilterData=JSON.parse(localStorage.getItem("modelFilterData")),o.rangeFilter.selectedRange=JSON.parse(localStorage.getItem("selectedPrice")),(o.selectedOffersFlag||o.selectedBodytypesFlag)&&o.filterByOffersTypes(),o.selectedModelsFlag)&&o.filterByModels()),a.$on("priceSliderIsInited",function(){o.selectedPriceFlag&&a.$emit("setNewVehicleDisplayPrice",{values:[o.rangeFilter.selectedRange.min,o.rangeFilter.selectedRange.max]})}),o.storeMobFilters=function(){localStorage.setItem("MobmodelFilterData",JSON.stringify(o.modelFilterData)),localStorage.setItem("MobfilterData",JSON.stringify(o.filterData)),localStorage.setItem("MobselectedPrice",JSON.stringify(o.rangeFilter.selectedRange)),localStorage.setItem("MobselectedOffersFlag",o.selectedOffersFlag),localStorage.setItem("MobselectedBodytypesFlag",o.selectedBodytypesFlag),localStorage.setItem("MobselectedModelsFlag",o.selectedModelsFlag),localStorage.setItem("MobselectedPriceFlag",o.selectedPriceFlag)},o.restoreMobFilters=function(){o.filterData=JSON.parse(localStorage.getItem("MobfilterData")),o.modelFilterData=JSON.parse(localStorage.getItem("MobmodelFilterData")),o.selectedOffersFlag=JSON.parse(localStorage.getItem("MobselectedOffersFlag")),o.selectedBodytypesFlag=JSON.parse(localStorage.getItem("MobselectedBodytypesFlag")),o.selectedModelsFlag=JSON.parse(localStorage.getItem("MobselectedModelsFlag")),o.selectedPriceFlag=JSON.parse(localStorage.getItem("MobselectedPriceFlag")),o.rangeFilter.selectedRange=JSON.parse(localStorage.getItem("MobselectedPrice")),a.$emit("setNewVehicleDisplayPrice",{values:[o.rangeFilter.selectedRange.min,o.rangeFilter.selectedRange.max]}),(o.selectedOffersFlag||o.selectedBodytypesFlag||o.selectedPriceFlag)&&o.filterByOffersTypes(),o.selectedModelsFlag&&o.filterByModels()},o.hideItem=function(t){return!_.some(o.filteredJson,function(e){return e.id==t})},u(document).on("keyup",function(e){27!=e.keyCode&&27!=e.which||(e.preventDefault(),o.closeLocationOverlay(),a.$apply())});var d=u("html");o.openLocationOverlay=function(){o.openedOverlay=!0,d.addClass("is-overlay-open"),o.alreadyOpened=!0},o.currentLocation.length||r||o.serviceData.flagNotRequiredPostcodes||o.openLocationOverlay(),o.closeLocationOverlay=function(){o.openedOverlay=!1,d.removeClass("is-overlay-open")},o.checkCurrentLocation=function(){if(new RegExp(/^[0-9]{4}$/g).test(o.currentLocationVal))return n.checkLocation(o.currentLocationVal)?!(o.errorLocation=!1):!(o.errorLocation=!0)},o.setCurrentLocation=function(e){o.checkCurrentLocation()&&(u.cookie("common.location.LOC",o.currentLocationVal,{path:"/"}),o.currentLocation=o.currentLocationVal,o.closeLocationOverlay(),n.setWorkFlowData("location",o.currentLocation))},o.openDisclaimerOverlay=function(){o.openedDisclaimerOverlay=!0,d.addClass("is-overlay-open"),o.alreadyDesclaimerOpened=!0},o.closeDisclaimerOverlay=function(){o.openedDisclaimerOverlay=!1,d.removeClass("is-overlay-open")}}}),define("vehicledisplay/directives/vehicledisplay.directive.eventPropogation",[],function(){return function(){return{link:function(e,t,a,i){t.on("focus blur keyup change input click",function(e){e.preventDefault()})}}}}),define("vehicledisplay/directives/vehicledisplay.directive.slider",["analytics/analyticsEventLayer"],function(r){return function(){return{link:function(a,i,t){a.$parent.$on("resetVehicleDisplayPrice",function(){i.slider("values",[o.min,o.max])}),a.$parent.$on("setNewVehicleDisplayPrice",function(e,t){i.slider("values",[t.values[0],t.values[1]])});var n=function(e,t){a.$parent.$broadcast("changeVehicleDisplayPrice",{values:{min:e.values[0],max:e.values[1]},resetFlag:t})},e=["min","max","step"],o={};angular.forEach(e,function(e){angular.isDefined(t[e])&&(o[e]=parseInt(t[e],10))}),o.range=!0,o.values=[o.min,o.max],o.slide=function(e,t){n(t,!1)},o.change=function(e,t){n(t,!0)},o.stop=function(e,t){r&&r.getLatestOffersEvents().changePrice()},o.create=function(e){a.$parent.$broadcast("priceSliderIsInited")},i.slider(o)}}}}),define("vehicledisplay/services/vehicledisplay.services.workflowdata",["jquery","_"],function(T,N){return function(){var e={},t=T("#json-api"),i=T(".latest-vehicles-results"),a=t.attr("data-base-url"),o=i.find(".item"),n=i.find(".vehicles-holder.sorted"),r={},l=JSON.parse(t.attr("data-filters-json"))||"[]",s=JSON.parse(t.attr("data-prices-json"))||"{}",c=(r.currencyFormatPattern=T("#currencyFormatPattern").val(),r.modelFilterData={},r.filterData={},r.itemPrices={},r.itemsData={},r.paramsUrl={},r.validUrl=!1,r.location="",r.flagNotRequiredPostcodes=T(".overlay-container .local-vehicles-holder").data("postcode-feature-not-required"),{}),d=i.attr("data-national-postcode"),u="",p={},m=[],h=[],f=[],g=!0,v=!(0<(t=window.location.pathname.slice(1).split("/"))[t.length-1].indexOf(".html"));function y(){var e;function n(e,t){var a=t[0].split("="),i=decodeURIComponent(a[0]),a=decodeURIComponent(a.slice(1).join("="));return void 0===e[i]?e[i]=a:e[i]=[].concat(e[i],a),1==t.length?e:n(e,t.slice(1))}g&&(u=b(k()),r.paramsUrl=0==(e=window.location.search).length?{}:n({},e.substr(1).split("&")),N.each(o,function(e,t){e=T(e);e.attr("data-id",t),r.itemsData[e.attr("id")]={id:e.attr("id"),catId:e.attr("data-category"),offer:e.attr("data-modelOffer"),bodytype:e.attr("data-modelBodyType"),model:e.attr("data-modelNameplate"),price:e.attr("data-price")}}),T.each(l,function(e,i){var t=i;switch(t.listName){case"body_type":r.bodyTypes=t,(m=N.cloneDeep(t)).listItems=N.map(m.listItems,function(e){return{key:t.listName+e.key,value:b(e.value)}});break;case"model":r.models=t,(f=N.cloneDeep(t)).listItems=N.map(f.listItems,function(e){return{key:t.listName+e.key,value:b(e.value),modelKey:e.key}});break;case"offers":r.offers=t,(h=N.cloneDeep(t)).listItems=N.map(h.listItems,function(e){return{key:t.listName+e.key,value:b(e.value)}})}var a=i.listItems;void 0!==a&&Object.keys(a).length&&T.each(a,function(e,t){var a;t.key=i.listName+t.key,t=t,"model"==(a=i.listName)?r.modelFilterData[t.key]={type:a,selected:!1,text:t.value,modelKey:t.key.replace("model","")}:r.filterData[t.key]={type:a,selected:!1,text:t.value,modelKey:t.key}})}),e=(e=>!!(e=N.find(p,{regionTitle:e}))&&(0<=e.regionPostcode.indexOf("-")?e.regionPostcode.split("-")[0]:e.regionPostcode))(u),r.validUrl=(()=>{var e,t,a,i;return!!(r.paramsUrl.model||r.paramsUrl.campaign||r.paramsUrl.category||r.paramsUrl.startingPrice||r.paramsUrl.endingPrice)&&(e=!(r.paramsUrl.model&&r.paramsUrl.campaign||r.paramsUrl.model&&r.paramsUrl.category||r.paramsUrl.model&&r.paramsUrl.startingPrice||r.paramsUrl.model&&r.paramsUrl.endingPrice||"object"==typeof r.paramsUrl.model||"object"==typeof r.paramsUrl.campaign||"object"==typeof r.paramsUrl.category),a=!r.paramsUrl.model||N.some(f.listItems,{value:b(r.paramsUrl.model)}),i=!r.paramsUrl.campaign||N.some(h.listItems,{value:b(r.paramsUrl.campaign)}),t=!r.paramsUrl.category||N.some(m.listItems,{value:b(r.paramsUrl.category)}),a=a&&i&&t,i=!0,(r.paramsUrl.startingPrice||r.paramsUrl.endingPrice)&&(i=+r.paramsUrl.startingPrice>=+s.sliderMinVal&&+r.paramsUrl.endingPrice<=+s.sliderMaxVal&&+r.paramsUrl.startingPrice<+s.sliderMaxVal&&+r.paramsUrl.endingPrice>+s.sliderMinVal||+r.paramsUrl.startingPrice>=+s.sliderMinVal&&+r.paramsUrl.startingPrice<+s.sliderMaxVal&&!+r.paramsUrl.endingPrice||+r.paramsUrl.endingPrice<=+s.sliderMaxVal&&+r.paramsUrl.endingPrice>+s.sliderMinVal&&!+r.paramsUrl.startingPrice),e)&&a&&i})(),r.location=(e=>{var t;if(g)return t=(e=>{for(var t=e+"=",a=document.cookie.split(";"),i=0;i<a.length;i++){for(var n=a[i];" "==n.charAt(0);)n=n.substring(1,n.length);if(0==n.indexOf(t))return n.substring(t.length,n.length)}return null})("common.location.LOC")||"",u&&e?t&&D(t).regionTitle===u?t:(T.cookie("common.location.LOC",e,{path:"/"}),e):c.hasOwnProperty(t)||w(c,t)?(P(t),t):(P(d),"")})(e)),r.shownRegion=r.location||d,r.price=s,r.validUrl?(r.price.selectedRange={min:+r.paramsUrl.startingPrice||+s.sliderMinVal,max:+r.paramsUrl.endingPrice||+s.sliderMaxVal},r.selectedPriceFlag=!0):r.price.selectedRange={min:+s.sliderMinVal,max:+s.sliderMaxVal},r.validUrl&&g&&(r.paramsUrl.model&&(S(f.listItems,b(r.paramsUrl.model),r.modelFilterData),r.selectedModelsFlag=!0,r.selectedPriceFlag=!1),r.paramsUrl.campaign&&(S(h.listItems,b(r.paramsUrl.campaign),r.filterData),r.selectedOffersFlag=!0),r.paramsUrl.category)&&(S(m.listItems,b(r.paramsUrl.category),r.filterData),r.selectedBodytypesFlag=!0)}function b(e){return decodeURIComponent(e).trim().toLowerCase().replace(/\s+/g,"-")}function w(e,a){return N.find(e,function(e,t){if(0<=t.indexOf("-"))return+(t=t.split("-"))[0]<=+a&&+a<=+t[1]})}function C(){v&&i.find(".item-holder").each(function(){var e=T(this);e.attr("href",window.location.pathname+"?offer="+decodeURIComponent(e.data("model-name")))})}function k(){var e,t;return v?(t=decodeURIComponent(window.location.pathname).slice(1).split("/"),0<=(e=N.findLastIndex(t,function(e){return e==a}))?t[e+1]:""):(t=window.location.href.split("#"))[t.length-1]}function S(e,t,a){e=N.find(e,{value:t});e&&(a[e.key].selected=!0)}function x(a,i){return o.sort(function(e,t){e=+e.getAttribute(i),t=+t.getAttribute(i);if(t<e){if("up"==a)return 1;if("down"==a)return-1}if(e<t){if("up"==a)return-1;if("down"==a)return 1}return 0})}function D(t){return N.find(p,function(e){return+e.regionPostcode==+t||(0<=e.regionPostcode.indexOf("-")?(e=e.regionPostcode.split("-"),+t>=+e[0]&&+t<=e[1]):void 0)})}function P(e){var t,e=D(e);e&&(t=k(),v?(t=t?window.location.origin+window.location.pathname.replace(encodeURIComponent(t),encodeURIComponent(e.regionTitle)):window.location.origin+window.location.pathname+encodeURIComponent(e.regionTitle),"{}"!==JSON.stringify(r.paramsUrl)&&(t=t+"?"+T.param(r.paramsUrl)),history.replaceState(null,null,t),C()):window.location.hash="#"+encodeURIComponent(e.regionTitle))}return r.isLive=v,o.length?c={}:r.emptyData=!0,N.each(l,function(t){var a=[];N.each(t.listItems,function(e,t){0==o.filter('[data-modeloffer="'+e.value+'"]').length&&0==o.filter('[data-modelbodytype="'+e.value+'"]').length&&0==o.filter('[data-modelnameplate="'+e.key+'"]').length&&a.push(t)}),N.each(a,function(e){t.listItems.splice(e,1)})}),N.map(p,function(e){return{regionPostcode:e.regionPostcode,regionTitle:b(e.regionTitle)}}),C(),y(),e.sortPriceLowToHigh=function(){x("up","data-price").detach().appendTo(n)},e.sortFuelefficiency=function(){x("down","data-fueal").detach().appendTo(n)},e.sortPriceHighToLow=function(){x("down","data-price").detach().appendTo(n)},e.sortPriceDefault=function(){x("up","data-id").each(function(e,t){var t=T(t),a=t.data("category");t.detach().appendTo(i.find(".vehicles-holder[data-category="+a+"]"))})},e.checkLocation=function(e){return g=!1,!(!c.hasOwnProperty(e)&&!w(c,e)||(P(e),r.location=e,0))},e.setWorkFlowData=function(e,t){r[e]=t,y()},e.getWorkFlowData=function(){return r},e}}),define("smart-redirect/component.smartRedirect",["jquery","marketConfigGlobal"],function(p,m){var e={};function t(){var e,t,a,i,n,o,r,l=p("body").find("#global-market-configuration span").attr("data-isredirect"),s={AF:"AFG",BH:"BHR",IQ:"IRQ",JO:"JOR",KW:"KWT",LB:"LBN",OM:"OMN",QA:"QAT",SA:"SAU",AE:"ARE",YE:"YEM"},c=(e=>{for(var t=e+"=",a=document.cookie.split(";"),i=0;i<a.length;i++){for(var n=a[i];" "==n.charAt(0);)n=n.substring(1,n.length);if(0==n.indexOf(t))return n.substring(t.length,n.length)}return null})("userInfo"),d=localStorage.getItem("thisPageUrl")||"undefined",u=window.location.href;c&&u!=d&&"true"==l&&"undefined"!==(d=c.split(",")[0].split("=")[1])&&""!=d&&"undefined"!==m.GLOBAL_MARKET_CONF.marketCode&&(l=m.GLOBAL_MARKET_CONF.marketCode.toLowerCase(),c=m.GLOBAL_MARKET_CONF.iso3MarketCode.toLowerCase(),e=m.GLOBAL_MARKET_CONF.locale.toLowerCase(),t=m.GLOBAL_MARKET_CONF.languageCode.toLowerCase(),a=location.href,o=location.host,n=location.pathname,r=0<document.getElementsByClassName("language-landing-page").length,i="en"==t?"en":{AF:"AR",BH:"AR",IQ:"AR",JO:"AR",KW:"AR",LB:"AR",OM:"AR",QA:"AR",SA:"AR",AE:"AR",YE:"AR"}[d],"www.me.ford.com"==location.host)&&["AF","BH","IQ","JO","KW","LB","OM","QA","SA","AE","YE"].includes(d)&&!new RegExp("^/([a-z]{2})+/([a-z]{3}?)+/?$").test(location.pathname)&&r&&(r=location.protocol+"//"+o+"/"+i+"/"+s[d],d!=l)&&("undefined"!==n&&""!=n&&(r+=n=n.replace("/"+t+"/"+c+"/","/")),-1!=location.href.indexOf("#")&&(o=a.split("#"),r=r+"#"+(hasedpart=n=o[1].replace("/"+c+"/"+e+"/","/"+s[d]+"/"+i+"_"+d+"/"))),r=r.toLowerCase(),localStorage.setItem("thisPageUrl",u),window.location.href=r)}return e.init=function(){t()},e}),define("home-popup/component.homePopup",["jquery","marketConfigGlobal","cookie","isAuthor","analytics/analyticsEventLayer"],function(n,e,o,t,r){var a={},l=800,i=n("body").find("#homePagePopup").attr("data-homepopupurl");function s(){n(document).on("click",".popup-next-btn",function(){r.getOwnerMyVehicleEvents().expertConciergeOverlayCtaClick("Speak with our experts"),n(window).width()<600&&n("body").find(".overlay-content").removeClass("custom-popup-container"),n("body").find(".overlay-content").addClass("custom-popup-action-container"),n("body").find(".btn-action").show(),n("body").find(".expert-advise").hide()}),n(document).on("click",".action-card",function(){var e;e=n(this).find("p").text(),r.getOwnerMyVehicleEvents().expertConciergeOverlayCtaClick(e),n(window).width()<600&&n("body").find(".overlay-content").addClass("custom-popup-container"),n("body").find(".overlay-content").removeClass("custom-popup-action-container"),n("body").find(".popup-tq").show(),n("body").find(".btn-action").hide(),setTimeout(()=>{n(".overlay-close").click()},5e3)})}function c(){window.location.href.indexOf("overlay")<=-1&&setTimeout(function(){n(".homepopup-content").trigger("click"),-1<i.indexOf("expert-overlay")&&s()},+l)}return a.init=function(){var e,t,a,i;e=window.location.pathname,t=""!=(!CQ||!CQ.WCM||!(CQ.WCM.isEditMode(!0)||CQ.WCM.isDesignMode(!0))),a=n("body").find("#homePagePopup").attr("data-ishomepopup"),i=n("body").find("#homePagePopup").attr("data-homepopupurl"),l=n("body").find("#homePagePopup").attr("data-popupdelay")?n("body").find("#homePagePopup").attr("data-popupdelay"):800,void 0!==a&&void 0!==i&&"true"==a&&""!=i&&(a=window.location.href,t&&(-1<a.indexOf("?wcmmode=disabled")||-1<a.indexOf("&wcmmode=disabled"))&&(i+="?wcmmode=disabled"),e=' <a class="homepopup-content link-overlay cl-white base-url popup-link-initialized" _link_action="link-overlay" href="'+(a=e+"#overlay"+i)+'" style="display:none">Overlay</a>',-1<i.indexOf("expert-overlay")&&!o.getCookie("EXPERT_POPUP_FIRED")&&(r.getOwnerMyVehicleEvents().expertConciergeOverlayLoad(),e=' <a class="homepopup-content link-overlay fds-popup-link-overlay cl-white base-url popup-link-initialized" _link_action="link-overlay" href="'+a+'" style="display:none">Overlay</a>'),n(e).insertBefore(".footer"),t)&&(-1<i.indexOf("expert-overlay")?o.getCookie("EXPERT_POPUP_FIRED")||(c(),o.setCookie("EXPERT_POPUP_FIRED","popupDisplayed",365)):c())},a}),define("destinations-popularity/destinationsPopularity",["jquery"],function(n){var e={};return e.init=function(){var e,t,a,i;n(".destinationsPopularity").find(".cta-button").addClass("accordion-indicator"),t=n(".destinationsPopularity").find(".accordion-body"),(a=n(".destinationsPopularity").find(".accordion-item")).find(".accordion-indicator").on("click",function(e){e.preventDefault(),a.hasClass("active")?t.css("height",0):t.css("height","auto"),a.toggleClass("active")}),n(".destinationsPopularity"),(i=n(".destinationsPopularity").find(".desktopAndMobile")).hasClass("meatballs-inside"),i.hasClass("meatballs-outside"),i&&n(window).width()<480&&(e=n(".destinationsPopularity").height(),i.find("article").css("height",e)),"true"===a.attr("data-chevron-down-icon")&&a.addClass("down-icon")},e}),define("destinations-popularity-items-config/destinationsPopularityItemsConfig",["jquery","_"],function(n,o){var e={},t=n(".destinationsPopularity"),a=n(".destinationsPopularity article .gux-variable span"),i=t.find(".accordion-carousel").attr("data-alldestinationidsincarousel"),r=t.find(".destinations-popularity-holder"),l=o.filter(a,function(e){return"[@bookingsCount]"===n(e).html()});return e.init=function(){var e;e=n("#serviceLayerUrl").val()+"/fordleads/leads/u375/countByDestination",n.ajax({url:e,type:"GET",data:{destinations:i},success:function(i){200==i.returnCode?o.each(r,function(e){var t,a=n(e).find(".gux-variable span");a.length&&(t=n(e).attr("data-destination-id"),o.each(i.destinations,function(e){e.destination===t&&a.html(e.count)}))}):o.each(l,function(e){n(e).html("")})},error:function(){o.each(l,function(e){n(e).html("")})}}),n(".configuration").each(function(){"zoom"===this.getAttribute("data-imageEffect")&&n(this).addClass("zoom")})},e}),define("common-carousel/commonCarousel",["jquery","jquery-flexslider","configurationProvider"],function(c,e,d){var t={};return t.init=function(){function e(){return window.innerWidth<600?o:t}var t,a,i,n,o,r,l,s;c("span.configuration").each(function(){var e;c(this).attr("data-itemsforframe")&&(e=c(this),t=e.attr("data-itemsforframe"),a=e.attr("data-animation-speed"),i=e.attr("data-slideshow-speed"),o=e.attr("data-itemsforframe-mobile"),n="true"===e.attr("data-slideshow"))}),r=(s=c(".common-carousel")).find(".carousel"),l=d.get(s),s={controlsContainer:r.find("> .carousel-controls"),selector:".slide-container > .carousel-slide",animation:"slide",animationLoop:!0,directionNav:!1,pauseOnHover:!0,slideshow:n,keyboard:!1,minItems:e(),maxItems:e(),itemWidth:400,animationSpeed:1e3*a,slideshowSpeed:1e3*i},r.find(".carousel-previous").on(touchOrClick,function(e){c(e.target).closest(".carousel").flexslider("prev")}),r.find(".carousel-next").on(touchOrClick,function(e){c(e.target).closest(".carousel").flexslider("next")}),r.on("keydown",function(e){var t=e.keyCode||e.which,a=r.data("flexslider");function i(){a.currentSlide===a.slides.length-1&&!0!==l.keyEventLoop||(r.flexslider("next"),e.preventDefault())}function n(){0===a.currentSlide&&!0!==l.keyEventLoop||(r.flexslider("prev"),e.preventDefault())}9===t&&(r.flexslider("stop"),(e.shiftKey?n:i)()),39===t&&(r.flexslider("stop"),i()),37===t&&(r.flexslider("stop"),n())}),r.flexslider(c.extend(s,l))},t}),define("u375/header/header",["jquery"],function(o){var e={};function t(){var e,t,a=o(".u375Header").find(".toggle-button"),i=o(".u375Header").find(".social-links .icon-share-weibo a"),n=o(".u375Header .wechat-bar .wechat-close");setTimeout(function(){o(".icon-share-weibo a").attr("href","#")},700),a.length&&(document.documentElement.clientHeight,e=document.documentElement.clientWidth,t=o("body").height(),o(".nav-mob-content").height(t),o(".nav-mob-content").width(e),o(".u375Header .wechat-bar").height(t),o(".u375Header .wechat-bar").width(e),o(".u375Header .actionsPanel").hide(),a.on(touchOrClick,function(){o(".toggle-button").toggleClass("cross"),o(".nav-mob-inner").toggle2classes("transform","transform1"),setTimeout(function(){o(".header-nav-mob").toggleClass("mobNav")},700)}),i.on(touchOrClick,function(){o(".u375Header .wechat-bar").removeClass("dontShow")}),n.on(touchOrClick,function(){o(".u375Header .wechat-bar").addClass("dontShow")}))}return o.fn.toggle2classes=function(t,a){return t&&a?this.each(function(){var e=o(this);e.hasClass(t)?e.removeClass(t).addClass(a):e.removeClass(a).addClass(t)}):this},window.onresize(function(){t()}),e.init=function(){t(),o(".icon-share-weibo a").attr("href",o("a.icon-share-weibo").attr("href")),o(".icon-share-qzone a").attr("href",o("a.icon-share-qzone").attr("href")),o(".icon-share-kaixin a").attr("href",o("a.icon-share-kaixin").attr("href"))},e}),define("u375/form/u375form",["jquery","utils/getParamValue"],function(y,r){var e={};return e.init=function(){var h,f,g,v,e,t,a,i,n,o;h=y(".form-popup-375 form"),f=y("#serviceLayerUrl").val()+"/fordleads/leads/u375/save?",g=y(".form-popup-375-holder").attr("data-sl-exception-message"),v=y(".form-popup-375-holder").attr("data-invalid-captcha-message"),h.on("submit",function(e){e.preventDefault();document.location.origin,document.location.pathname;var e=y("form .section select[name='TITLE']").val()||"",t=y("form .section input[name='NAME']").val()||"",a=y("form .section input[name='EMAIL']").val()||"",i=y("form .section input[name='PHONE']").val()||"",n=y("form .section select[name='PROVINCE']").val()||"",o=y("form .section select[name='WECHAT']").val()||"",r=y("form .section select[name='MICROBLOG']").val()||"",l=y("form .section select[name='QQFRIEND']").val()||"",s=y("form .section select[name='destinationID']").val()||"",c=y("form .section textarea[name='travelExpirience']").val()||"",d=y("form .radio-holder fieldset input[name='authorizeCheckBox']").is(":checked")||!1,u=y("form .radio-holder fieldset input[name='latestNewsErrorMessages']").is(":checked")||!1,p=h.find(".captcha-wrap img").attr("src").split(".jpg/")[1],m="title="+e+"&name="+t+"&email="+a+"&mobile="+i+"&province="+n+"&weChatFriends="+o+"&microblogFriends="+r+"&qqFriends="+l+"&destinationName="+s+"&travelExperience="+c+"&emailPhoneNumberShare="+d+"&getLatestNews="+u+"&recaptcha="+y(".form-recaptcha label span input").val()+"&captchaKey="+p;setTimeout(function(){h.find(".error").length||y.ajax({type:"GET",url:f,data:m,dataType:"json",success:function(e){"500"==e.returnCode&&"001"==e.status?(y(".form-popup-375 .form-recaptcha label small.error").remove(),y(".form-popup-375 .form-recaptcha label").append('<small class="error">'+v+"</small>"),y(".form-submit button").prop("disabled",!1)):"500"==e.returnCode&&"003"==e.status?(y(".form-submit label small.error").remove(),y(".form-submit").append('<label><small class="error">'+g+"</small></label>"),y(".form-submit button").prop("disabled",!1)):(y(".form-popup-375").toggleClass("hidden"),y(".thankyou-block").toggleClass("hidden"),setTimeout(function(){y(".overlay-container .overlay-content .overlay-msg-content-inner ").remove(),y(".overlay-container .overlay-content-inner").addClass("is-active")},700))},error:function(){y(".form-submit small.error").remove(),y(".form-submit").append('<label><small class="error">'+g+"</small></label>"),y(".form-submit button").prop("disabled",!1)}})},1e3)}),y(".overlay-image").removeClass("overlay-image"),y(".icon-share-weibo a").attr("href",y("a.icon-share-weibo").attr("href")),y(".icon-share-qzone a").attr("href",y("a.icon-share-qzone").attr("href")),y(".icon-share-kaixin a").attr("href",y("a.icon-share-kaixin").attr("href")),a=y(".form-popup-375 .375tbox, .form-popup-375 .375tarea"),i=y(".form-popup-375 .375cbox"),n=y(".form-popup-375 .375select"),o=y(".u375"),e=y.fn.addClass,y.fn.addClass=function(){return e.apply(this,arguments),this.trigger("errorAdded"),this},t=y.fn.removeClass,y.fn.removeClass=function(){return t.apply(this,arguments),this.trigger("errorRemoved"),this},a.on("errorAdded",function(){y(this).css("border","red 1px solid")}),a.on("errorRemoved",function(){y(this).css("border","green 1px solid")}),i.click(function(){y(this).is(":checked")?y(this).next().find("p").css("color","green"):y(this).next().find("p").css("color","red")}),n.one("click",function(){y(this).trigger("change")}),n.change(function(){var e=y(this).attr("data-validation-msg");e&&("default"!=y(this).val()?(y(this).parent().find("label.dropmsg").remove(),y(this).css("border","green 1px solid")):(y(this).css("border","red 1px solid"),y(this).parent().find("label.dropmsg").remove(),y(this).parent().append('<label class="dropmsg" > <small class="error">'+e+"</small> </label")))}),o.click(function(){n.trigger("change")}),function(){var e;null!=typeof r&&null!=r&&""!=r&&null!=typeof(e=r.byName("destinationId"))&&null!=e&&""!=e&&null!=y(this)&&null!=y(this)&&""!=y(this)&&y("#select6 option").each(function(){y(this).val()==e&&y(this).prop("selected",!0)})}()},e}),define("maintenanceService/component.maintenanceService",["jquery"],function(e){var t={};return angular.module("maintenanceService",[]).controller("maintenanceservice",["$scope",function(t){t.modalCarData=e(".maintencaceContainer").data("maintenanceservicejson"),console.log(t.modalCarData),t.chooseIsShow=!1,t.chooseCar=function(){e(".maintenanceModal").show(),t.chooseCarData=this.modalCar,t.maintenanceServiceList=t.chooseCarData.maintenanceServiceList,console.log(t.chooseCarData),console.log(88),e("#mileage").prop("disabled",!0),t.isShowButton=!0},t.engineChange=function(){t.engineType=e("#engineType").val(),angular.forEach(t.maintenanceServiceList,function(e){t.engineType===e.Engine&&(t.maintenanceServiceDetailList=e.maintenanceServiceDetailList)}),e("#mileage").prop("disabled",!1),console.log(t.maintenanceServiceDetailList)},t.mileageChange=function(){t.isShowButton=!1},t.calculator=function(){t.mileage=e("#mileage").val(),t.checked="",t.repaired="",t.chooseEngineType=t.engineType,t.chooseMilleage=t.mileage,angular.forEach(t.maintenanceServiceDetailList,function(e){t.mileage===e.useMonthAndMileage&&(""!==e.checked&&void 0!==e.checked&&(t.checked=e.checked.split("|")),""!==e.repaired)&&void 0!==e.repaired&&(t.repaired=e.repaired.split("|"))}),t.chooseIsShow=!0,console.log(t.checked),console.log(t.repaired)},t.closeModal=function(){e(".maintenanceModal").hide(),e("#mileage").select2("val",""),e("#engineType").select2("val",""),t.chooseIsShow=!1,t.isShowButton=!1,console.log(t),t.mileage="",t.engineType=""},e(".modal-body").click(function(e){e.stopPropagation()}),e(".maintenanceModal").click(function(e){e.stopPropagation(),t.closeModal()})}]),t.init=function(){console.log("maintenanceService start"),angular.bootstrap(document,["maintenanceService"])},t}),define("vehiclemodel/component.vehiclemodel.app",["angular"],function(e){return e.module("vehiclemodel",[])}),define("vehiclemodel/component.vehiclemodel.controllers",["vehiclemodel/component.vehiclemodel.app","vehiclemodel/controllers/vehiclemodel.controller.main"],function(e,t){e.controller("MainCtrl",["$scope","$window","$compile","$timeout","workFlowData",t])}),define("vehiclemodel/component.vehiclemodel",["jquery","angular","vehiclemodel/component.vehiclemodel.app","vehiclemodel/component.vehiclemodel.services","vehiclemodel/component.vehiclemodel.controllers","analytics/analyticsEventLayer"],function(e,a,t,i,n,o){var r={},l=(e(".vehiclemodel"),e(document.body));return r.init=function(){setTimeout(function(){},500),o&&(l.on("click",".vehicles-filter-section label",function(){o.getLatestOffersEvents().offersClick()}),l.on("click",".bodytypes-filter-section label",function(){o.getLatestOffersEvents().bodyTypesClick()}),l.on("click",".models-filter-section label",function(){o.getLatestOffersEvents().modelClick()})),e(".vehiclemodel").length&&e(".vehiclemodel.section").each(function(e,t){a.bootstrap(t,["vehiclemodel"])})},r}),define("vehiclemodel/component.vehiclemodel.services",["vehiclemodel/component.vehiclemodel.app","vehiclemodel/services/vehiclemodel.services.workflowdata"],function(e,t){e.service("workFlowData",[t])}),define("vehiclemodel/controllers/vehiclemodel.controller.main",["jquery"],function(r){return function(e,t,a,i,n){var o=this;o.serviceData=n.getWorkFlowData(),r(".author-only-placeholder").length,o.sortByOpen=!1,o.hideEmpty=function(t){return!!o.hideHeader||!_.filter(o.serviceData.itemsData,function(e){return e.catId==t&&!o.hideItem(e.id)}).length}}}),define("vehiclemodel/services/vehiclemodel.services.workflowdata",["jquery","_"],function(t,e){return function(){var e={},a=(t(".latest-vehicles-results").find(".item"),{});return a.currencyFormatPattern=t("#currencyFormatPattern").val(),a.itemsData={},e.setWorkFlowData=function(e,t){a[e]=t},e.getWorkFlowData=function(){return a},e}}),define("countdown/component.countdown",["jquery"],function(o){function t(e){var t=o(e).data("time"),e=o(e).data("timezone"),t=new Date(t),a=new Date,a=a.getTime()+6e4*a.getTimezoneOffset(),e=new Date(a+36e5*(e=(a=(a=e).substr(3,a.length)).split(":")[0],a=a.split(":")[1],a=parseInt(100*a/60),a=parseInt(e.substr(1,e.length))+a/100,e.substr(0,1)+a)),a=t.getTime()-e.getTime(),t=0,e=0,i=0,n=0;0<=a&&(t=Math.floor(a/1e3/60/60/24),e=Math.floor(a/1e3/60/60%24),i=Math.floor(a/1e3/60%60),n=Math.floor(a/1e3%60)),document.getElementById("t_d").innerHTML=t,document.getElementById("t_h").innerHTML=e,document.getElementById("t_m").innerHTML=i,document.getElementById("t_s").innerHTML=n}return{init:function(e){setInterval(function(){t(e)},1e3)}}}),define("panoramic/component.panoramic",["jquery","draggable"],function(a,e){var t={};return t.init=function(){var i,t=!1;a("body").on("click",".panaromaImage .image-guide",function(){a(this).parent().hide(),a(this).parent().siblings(".panorama-guide-light").show()}),/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0,4))?window.addEventListener("resize",()=>function(e){0==t&&(t=!0,a("[data-gyroscope]").each(function(){var e,t;0==a(this).data("gyroscope")?(a("[data-paver]",this).paver({tilt:!1}),e=a("[data-paver] img",this).width()-a("[data-paver]",this).parent().width(),a("[data-paver]",this).scrollLeft(e/2)):(t=this,setTimeout(function(){a("[data-paver]",t).paver({tiltSensitivity:0,tiltThresholdPortrait:50,tiltThresholdLandscape:50})},1e3))}))}):(i=a(".panorama img")).draggable({cursor:"move",axis:"x",scrollSpeed:100,scrollSensitivity:100,scroll:!1,drag:function(e,t){0<t.position.left&&(t.position.left=1);var a=i.parent().width()-i.width();t.position.left<a&&(t.position.left=a)},create:function(){var e=i.parent().width()-i.width();i.css("left",e/2+"px")}})},t}),define("pannellum/component.pannellum",["jquery","isAuthor","cookie"],function(l,e,s){var c={isAuthorMode:e.getAuthorStatus(),checkWGL:function(){var e=document.createElement("canvas"),e=e.getContext("webgl")||e.getContext("experimental-webgl");return!!(e&&e instanceof WebGLRenderingContext)},renderPanaroma:function(e){var t=l(e).data("image"),i=(l(e).data("loading-text"),l(e).data("hotspot")),a=(l(e).data("fallback"),!1),n=l(e).data("gyroscope-enable"),o=0,r=l(e).data("enable-multiple-interiors");l(e).data("track")&&c.isAuthorMode&&(a=!0),""==i&&(i=null),"true"==r?t=interiorData[0][0]:768<l("body").width()?t=l(e).data("image"):null!=l(e).data("mobimage")&&""!=l(e).data("mobimage")&&(t=l(e).data("mobimage")),document.getElementsByClassName("autoplayconfiguration").length&&"true"==document.getElementsByClassName("autoplayconfiguration")[0].dataset.autoplay&&(o=-2,document.getElementById("play360ie").classList.add("autoplayTrue")),c.initiatePano(e,t,a,i,o),document.getElementById("viewUp360ie")&&document.getElementById("viewUp360ie").addEventListener("click",function(){c.panaromaView.setPitch(c.panaromaView.getPitch()+10)}),document.getElementById("viewDown360ie")&&document.getElementById("viewDown360ie").addEventListener("click",function(e){c.panaromaView.setPitch(c.panaromaView.getPitch()-10)}),document.getElementById("viewLeft360ie")&&document.getElementById("viewLeft360ie").addEventListener("click",function(e){c.panaromaView.setYaw(c.panaromaView.getYaw()-10)}),document.getElementById("viewRight360ie")&&document.getElementById("viewRight360ie").addEventListener("click",function(e){c.panaromaView.setYaw(c.panaromaView.getYaw()+10)}),document.getElementById("viewIn360ie")&&document.getElementById("viewIn360ie").addEventListener("click",function(e){c.panaromaView.setHfov(c.panaromaView.getHfov()-10)}),document.getElementById("viewOut360ie")&&document.getElementById("viewOut360ie").addEventListener("click",function(e){c.panaromaView.setHfov(c.panaromaView.getHfov()+10)}),document.getElementById("play360ie")&&document.getElementById("play360ie").addEventListener("click",function(e){e.currentTarget.classList.contains("autoplayTrue")?(c.panaromaView.stopAutoRotate(),e.currentTarget.classList.remove("autoplayTrue")):(c.panaromaView.startAutoRotate(),e.currentTarget.classList.add("autoplayTrue"))}),n&&l(".pnlm-orientation-button").show(),c.panaromaView.on("load",function(){n&&l(".pnlm-orientation-button").show();var a=""!=s.getCookie("cq-authoring-mode");l(".pnlm-render-container > a").each(function(){if(l(this).removeAttr("target"),i&&0<i.length)for(var e,t=0;t<i.length;t++)l(this).attr("href")==i[t].URL&&(e=l(this).attr("href"),a&&-1==e.indexOf("?wcmmode=disabled")&&-1==e.indexOf("&wcmmode=disabled")&&(-1!=e.indexOf("?")?e+="&wcmmode=disabled":e+="?wcmmode=disabled"),e=window.location.pathname+"#overlay"+e,l(this).attr("href",e),l(this).addClass(""==i[t].overlay?"link-overlay not-loggedin base-url popup-link-initialized":i[t].overlay))})})},initiatePano:function(e,t,a,i,n){c.panaromaView=pannellum.viewer(e,{type:"equirectangular",panorama:t,keyboardZoom:!1,mouseZoom:!1,showFullscreenCtrl:!1,autoLoad:!0,hotSpotDebug:a,hotSpots:i,showControls:!1,autoRotate:n})},reinitiatePano:function(e){var t=l(e).data("interior"),a=(l(e).data("enable-multiple-interiors"),c.colorIndex),i="",n=l(e).data("hotspot"),o=!1,r=0;l(e).data("track")&&c.isAuthorMode&&(o=!0),document.getElementsByClassName("autoplayconfiguration").length&&"true"==document.getElementsByClassName("autoplayconfiguration")[0].dataset.autoplay&&(r=-2,document.getElementById("play360ie").classList.add("autoplayTrue")),l.each(t[a],function(e,t){i=t}),c.panaromaView.destroy(),c.initiatePano(e,i,o,n,r)},stateResize:function(){var e=l("body").width()/2.4;l(".panorama").height(e),l(".panorama").width("100%")},init:function(){c.checkWGL()?l(".component-panaromaview .panorama").each(function(){var e=this;l("body").find(".color-items-int .item").on("click",function(){l("#intColorizerBtn").find(".colorOption").each(function(){l(this).removeClass("active")}),l(this).addClass("active").siblings().removeClass("active"),c.colorIndex=l(this).data("items"),c.reinitiatePano(l(e)[0])}),c.renderPanaroma(l(this)[0]),l(".component-panaromaview .panorama")[0].dataset.enableMultipleInteriors&&setTimeout(()=>{l("body").find(".color-items-int .item")[0].click()},0)}):l(".fallback-msg").show()}};return{init:function(){c.init()}}}),define("iframe-component/component.iframe",["jquery","mediaQuery"],function(e,i){return{init:function(){e(".component-iframe").each(function(){var t=e(e(".iframe-content",this)[0]),a="mobile"===i.getMediaType()?t.data("mobile-height")?t.data("mobile-height"):"500":t.data("height")?t.data("height"):"500";e(".loader-holder",this);window.addEventListener("message",function(e){e.origin&&e.origin==window.location.origin&&(a=parseInt(a),a=e.data.height||a,t.height(a+"px"))})})}}}),define("qrredirect/component.qrredirect",["jquery"],function(t){return{init:function(){var e;1!=t("#iOSAppURL").length&&1!=t("#weChatAppURL").length||(-1!==(e=navigator.userAgent.toLowerCase()).indexOf("micromessenger")?window.location.href=t("#weChatAppURL").text():-1===e.indexOf("iphone")&&-1===e.indexOf("ipad")||(window.location.href=t("#iOSAppURL").text()))}}}),define("proactive-chat/component.proactivechat",["jquery","marketConfigGlobal"],function(m,h){var e={};return e.init=function(){var e=m("body"),i=localStorage.getItem("vnameplates"),t=m(e).find("#global-market-configuration span").attr("data-pachat-counter"),e=m(e).find("#proactive-chat").attr("data-proactive-chat"),t=t?parseInt(t):null,e=e?e.replace(/^"|"$/g,""):null,a=localStorage.getItem("pageUrl")||"undefined",n=window.location.href,o=localStorage.proactiveChat;function r(e,t){var a=[],a=i?i+","+t.replace(/['"]+/g,""):t.replace(/['"]+/g,"");localStorage.setItem("vnameplates",a)}a!=n&&o!=t&&(localStorage.pageUrl=window.location.href,t)&&e&&(sessionStorage.isNewSession?(a=localStorage.pageCount?JSON.parse(localStorage.pageCount):1,r(localStorage.pageCount=JSON.stringify(parseInt(a)+1),e)):(console.log("new session"),localStorage.removeItem("vnameplates"),localStorage.removeItem("pageCount"),localStorage.removeItem("proactiveChat"),sessionStorage.isNewSession=!0,localStorage.setItem("vnameplates",e),localStorage.pageCount=JSON.stringify(1),JSON.parse(localStorage.pageCount),r(0,e)));for(var l=JSON.stringify(localStorage.getItem("vnameplates")),s=(l=l.split(","),console.log(l),l.sort(),null),c=0,d=0;d<l.length;d++)l[d]!=s&&(c==t-1&&(m("#proactive-chat").text(s),console.log("proactive chat trigged for "+s+" on "+t+"Visit"),localStorage.setItem("proactiveChat",t),localStorage.removeItem("vnameplates"),localStorage.removeItem("pageCount")),s=l[d],c++);function u(e){if(e.currentDateTime){var t,a,i=e.currentDateTime.date,n=p(i,e.currentDateTime.time),o=e.currentDateTime.dayOfWeek,r=(e.currentDateTime.timeZone,!1);if(e.businessHours&&(t=p(i,e.businessHours.startWorkingHour),a=p(i,e.businessHours.endWorkingHour),t<n)&&n<a&&(r=!0),e.publicHolidays)for(var l=0;l<e.publicHolidays.length;l++)p(e.publicHolidays[l].date)===p(i)&&(r=!1);if((1==o||7==o)&&(r=!1,e.weekendsSupport))for(l=0;l<e.weekendsSupport.length;l++){var s=p(d=e.weekendsSupport[l].date,e.weekendsSupport[l].startWorkingHour),c=p(d,e.weekendsSupport[l].endWorkingHour);p(d)===p(i)&&s<n&&n<c&&(r=!0)}if(e.businessHours&&e.businessHours.exclusiveDates)for(l=0;l<e.businessHours.exclusiveDates.length;l++){var d,s=p(d=e.businessHours.exclusiveDates[l].date,e.businessHours.exclusiveDates[l].startWorkingHour),c=p(d,e.businessHours.exclusiveDates[l].endWorkingHour);if(p(d)===p(i)){if(s<n&&n<c){r=!0;break}r=!1}}r?0===m("#proactive-chat-show").length?m("body").append('<div id="proactive-chat-show" style="display:none" data-proactive-chat="Chat">chat</div>'):(m("#proactive-chat-show").text("chat"),m("#proactive-chat-show").attr("data-proactive-chat","Chat")):0===m("#proactive-chat-noshow").length?m("body").append('<div id="proactive-chat-noshow" style="display:none" data-proactive-chat="No_Chat">No_Chat</div>'):(m("#proactive-chat-noshow").text("No_Chat"),m("#proactive-chat-noshow").attr("data-proactive-chat","No_Chat"))}}function p(e,t){return t?Date.parse(e+" "+t):Date.parse(e)}"au"===h.getCurrentMarketCode()&&(n=getLanguageRoot()+"/.enablechatconfig.data?p="+h.getChatDateConfigPath(),m.ajax({url:n,method:"GET"}).success(function(t){if(null!=t&&0!==t.length)try{u(JSON.parse(t))}catch(e){u(t)}}).error(function(e){}))},e}),null===document.querySelector(".recall-main-container")&&null===document.querySelector(".recall-status-main-container")||recallPagesInit(),define("recall/component.recall",["jquery","marketConfigGlobal"],function(o){var r=document.getElementById("countryCodeISO")&&document.getElementById("countryCodeISO").value,l={isUpdateProfile:!1,vinData:{},signInVinData:{},isDebugMode:!1,dataLoader:document.querySelector("[data-loader]"),pageContent:document.querySelector(".recall-main-container"),init:function(){0!=o(".au-recall-billboard").length&&o("body").addClass("off-autocomplete"),sessionStorage.getItem("UPDATEPROFILE")&&sessionStorage.removeItem("UPDATEPROFILE")},myVinList:function(e){o(".tabs-nav-list li:first-child").removeClass("is-active").removeClass("active"),o(".tabs-nav-list li:last-child").addClass("is-active").addClass("active"),o("#tabs-0").removeClass("active").addClass("hide"),o("#tabs-1").removeClass("hide").addClass("active"),o(".au-recall-signin").addClass("hide"),o(".my-vin-list").removeClass("hide");var t=o("[data-redirectionpath]").data("redirectionpath"),a=o(".my-vin-list table tbody").data("button-label");if(o(".my-vin-list table tbody").html(""),o(".my-vin-list").length){var i="";sessionStorage.setItem("vin",e[0].vincode),recallUtils.vin=e[0].vincode;for(var n=0;n<e.length;n++)i=i+"<tr><td>"+e[n].yourVehicle+"</td><td>"+e[n].vincode+'</td><td><button data-vin="'+encodeURIComponent(e[n].vincode?.trim())+'" class="cta-button statue-page-btn">'+a+"</button></td></tr>";o(".my-vin-list table tbody").append(i),o(".my-vin-list .statue-page-btn").on("click",function(){o.cookie("VIN",o(this).data("vin")),sessionStorage.setItem("vin",o(this).data("vin")),t=recallUtils.authoredURL(t),window.location=recallUtils.getOrigin()+t})}},checkOtherVehicle:function(){o("#tabs-1 .my-vin-list-footer .check-other-vehicle").on("click",function(e){e.preventDefault(),o("#tabs-1 .my-vin-list").addClass("hide"),o("#tabs-1 .other-vehicle").removeClass("hide")}),o("#tabs-1 .other-vehicle .other-vehicle-no").on("click",function(e){e.preventDefault(),o("#tabs-1 .my-vin-list").removeClass("hide"),o("#tabs-1 .other-vehicle").addClass("hide")}),o("#tabs-1 .other-vehicle .other-vehicle-yes").on("click",function(e){e.preventDefault(),o("#tabs-1 .my-vin-list").removeClass("hide"),o("#tabs-1 .other-vehicle").addClass("hide"),o("#tabs-0").removeClass("hide").addClass("active"),o("#tabs-1").removeClass("active").addClass("hide"),o(".tabs-nav-list li:first-child").addClass("is-active").addClass("active"),o(".tabs-nav-list li:last-child").removeClass("is-active").removeClass("active"),o("#tabs-1 .my-vin-list").addClass("hide"),o("#tabs-1 .au-recall-signin").removeClass("hide"),sessionStorage.removeItem("SESSIONTOKEN"),o(".tabs-nav-list .tabs-nav-item.first").removeClass("disabled")})},checkVinTab:function(){o(".au-recall-tabpanel .tabs-nav-item.first a").on("click",function(){o("#tabs-1 .my-vin-list").hasClass("hide")||(o("#tabs-0 .au-recall-vin").addClass("hide"),o("#tabs-0 .other-vehicle").removeClass("hide"),o("#tabs-0 .other-vehicle .other-vehicle-no").on("click",function(){o("#tabs-1 .my-vin-list").removeClass("hide"),o(".au-recall-tabpanel .tabs-nav-item:nth-child(2) a").trigger("click"),o("#tabs-0 .other-vehicle").addClass("hide"),o("#tabs-0 .au-recall-vin").removeClass("hide")}),o("#tabs-0 .other-vehicle .other-vehicle-yes").on("click",function(){o("#tabs-1 .au-recall-signin").removeClass("hide"),o("#tabs-1 .my-vin-list").addClass("hide"),o("#tabs-0 .au-recall-vin").removeClass("hide"),o("#tabs-0 .other-vehicle").addClass("hide"),sessionStorage.removeItem("SESSIONTOKEN"),o(".tabs-nav-list .tabs-nav-item.first").removeClass("disabled")}))})},tooltip:function(){var e,t;o(".au-recall-vin .vin-tooltip-content").html()&&""!=o(".au-recall-vin .vin-tooltip-content").html()&&(e=o(".au-recall-vin .vin-tooltip-content").html(),o(".au-recall-vin .form-textfield label span.title").html(o(".au-recall-vin .form-textfield label span.title").html()+'<span class="gux-tooltip" data-gux-tooltip-text="'+(e=e.toString(),t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},String(e).replace(/[&<>"'`=\/]/g,function(e){return t[e]}))+'" tabindex="0"></span>'))},onUpdateProfile:function(){var e;0!=o(".secondaryNavigation .link-overlay.update-profile-overlay").length&&(e='<a class="update-profile-check-email" href="">'+o(".navigation-horizontal .desktop .link-overlay").html()+"</a>",o(".navigation-horizontal .desktop .link-overlay").addClass("hide").addClass("update-profile-overlay"),o(".navigation-horizontal .desktop .link-overlay").clone().appendTo("body"),o(".navigation-horizontal .desktop li").html(e),o(".navigation-horizontal .mobile li").html(e),o(".update-profile-check-email").on("click",function(e){recallUtils.toggleLoader(!0),e.preventDefault();e=document.querySelector(".au-recall-vin form .input-field input");e&&""===e.value?(recallUtils.toggleLoader(!1),e.parentElement.classList.add("error")):(recallUtils.isSignin||(o('#tabs-0 [name="vincode"] ').focus(),o('#tabs-0 [name="vincode"] ').blur()),l.isUpdateProfile=!0,l.checkFleetCustomer())}))},updateProfileOverlay:function(){o(window).on("onoverlayload",function(){var e,t=o(".recall-verify-update-profile");0!=t.length&&(t.parents(".overlay-content").addClass("recall-update-profile-overlay-form"),o(".profile-update-email").show(),o(".profile-update-code").show(),o('.textfield-vincode [name="vincode"]',t).attr("readonly","readonly"),o('.profile-update-code [name="gcamp-verification-code"]').attr("disabled","disabled"),o(".profile-update-code .cta-button").attr("disabled","disabled"),recallUtils.isSignin?o('.textfield-vincode [name="vincode"]',t).val(l.signInVinData.userVo.vehicle[0].vincode):o('.textfield-vincode [name="vincode"]',t).val(document.querySelector('.textfield-vincode [name="vincode"]').value||recallUtils.vin),recallUtils.enableVerificationCodeCta(!1),e=document.querySelector(".profile-update-email .email-field .input-field input"),setTimeout(function(){e.addEventListener("blur",function(){e.classList.contains("error")?recallUtils.enableVerificationCodeCta(!1):recallUtils.enableVerificationCodeCta(!0,0)})},1e3),o(".profile-update-email .email-field .input-field input").focus(),o(".profile-update-email .get-verification-code .cta-button").unbind("click"),o(".profile-update-email .get-verification-code .cta-button").on("click",recallUtils.getCode))})},vinCheckHandler:function(){o(".au-recall-vin form button.cta-button").length&&o(".au-recall-vin form button.cta-button").on("click",function(){l.recallStatusAnalytics(this.innerText),l.isUpdateProfile=!1,l.checkVinCode()})},recallStatusAnalytics:function(e){"undefined"!=typeof _satellite&&(digitaldata.onclick.onclickLinkName="flmo:portal:service:recalls:takata airbag:cta",digitaldata.onclick.onclick="portal:service:recalls:takata airbag:cta:"+e,_satellite.track("global-onclick"))},checkFleetCustomer:function(){var e=o('#tabs-0 [name="vincode"]').val()||recallUtils.vin,t=l.errorContainer(),a=o("#serviceLayerUrl").val()+"/fordowner/vehicle/users/gcamprecall/type?vin="+e;setTimeout(function(){0==o(".au-recall-vin .textfield-vincode small.error").length&&(recallUtils.toggleLoader(!0),o.ajax({url:a,dataType:"json",method:"GET"}).success(function(e){e.result?l.isUpdateProfile?"Fleet"===e.customerType||"Special Fleet"==e.customerType?(recallUtils.toggleLoader(!1),o(".fleet-customer-overlay.link-overlay").trigger("click")):recallUtils.isSignin?(sessionStorage.setItem("showForm",!0),window.location=recallUtils.getOrigin()+document.querySelector("[data-redirectionpath]").getAttribute("data-redirectionpath")+"?wcmmode=disabled"):l.checkVinCode():l.checkVinCode():(recallUtils.toggleLoader(!1),recallUtils.displayError(getErrorMessageByCode(e.errorCode),!0,t))}).error(function(e){recallUtils.toggleLoader(!1),recallUtils.displayError(getErrorMessageByCode(e.errorCode),!0,t)}))},1e3)},checkVinCode:function(e){var t=(o('#tabs-0 [name="vincode"]').val()||recallUtils.vin).toUpperCase().replace(/\s/g,""),a=o(".au-recall-vin [data-success]").data("success"),i=l.errorContainer(),n=o("#serviceLayerUrl").val()+"/fordowner/vehicle/users/gcamprecall?vin="+t+"&country="+r;setTimeout(function(){0==o(".au-recall-vin .textfield-vincode small.error").length&&(recallUtils.toggleLoader(!0),o.ajax({url:n,method:"GET",dataType:"json"}).success(function(e){e.result?(sessionStorage.setItem("vin",e.recallVO.vin),"96"==e.recallVO.statusCode||"422"==e.recallVO.statusCode?recallUtils.displayError(getErrorMessageByCode(e.errorCode),!0,i):l.isUpdateProfile?(o.cookie("VINDATA",JSON.stringify(e)),l.vinData=e,l.isUpdateProfile=!1,recallUtils.toggleLoader(!1),l.isUpdateProfile=!1,o(".update-profile-overlay.link-overlay").trigger("click")):(("17S32"==e.recallVO.recallNo&&"A2"==e.recallVO.vlc||"NG"==e.recallVO.vlc)&&(e.recallVO.praNumber="2018/17077"),recallUtils.displayError("",!1,i),o.cookie("VIN",""),sessionStorage.removeItem("SESSIONTOKEN"),o.cookie("VINDATA",JSON.stringify(e)),a=recallUtils.authoredURL(a),window.location=recallUtils.getOrigin()+a)):(l.isUpdateProfile=!1,recallUtils.displayError(getErrorMessageByCode(e.errorCode),!0,i))}).error(function(e){l.isUpdateProfile=!1,recallUtils.displayError(getErrorMessageByCode(e.errorCode),!0,i)}))},1e3)},errorContainer:function(){return 0==o(".au-recall-vin .textfield-vincode small.error-oncall").length&&o(".au-recall-vin .textfield-vincode label").append('<small class="error-oncall"></small>'),o(".au-recall-vin .textfield-vincode small.error-oncall")},getUrlParams:function(e){function n(e,t){var a=t[0].split("="),i=decodeURIComponent(a[0]).toLowerCase(),a=decodeURIComponent(a.slice(1).join("="));return void 0===e[i]?e[i]=a:e[i]=[].concat(e[i],a),1==t.length?e:n(e,t.slice(1))}var t=window.location.search;return 0==e.length?{}:n({},t.substr(1).split("&"))[e]},fillVinInput:function(){l.getUrlParams("vin")&&o('#tabs-0 [name="vincode"]').val(l.getUrlParams("vin")),l.getUrlParams("bpid")&&(sessionStorage.setItem("bpid",l.getUrlParams("bpid")),o.cookie("bpid",l.getUrlParams("bpid")))},loginClickHandler:function(){o(".au-recall-signin .cta-button").on("click",function(){0===o(".au-recall-signin .error").length&&(l.recallStatusAnalytics(this.innerText),l.login())})},login:function(){var e=o("#serviceLayerUrl").val()+"/fordowner/vehicle/users/login",t={},a=(t.userName=o('.au-recall-signin [name="userName"]').val(),t.password=o('.au-recall-signin [name="password"]').val(),0==o(".au-recall-signin .form-group-input .login-message").length&&o(".au-recall-signin .form-group-input .submit.section").before('<div class="login-message columns"><span class="fail"></span></div>'),o(".login-message").find("span"));recallUtils.toggleLoader(!0),o.ajax({url:e,method:"POST",dataType:"json",data:t}).success(function(e){e.result?(recallUtils.displayError("",!1,a),recallUtils.isSignin=!0,l.signInVinData=e,sessionStorage.setItem("SESSIONTOKEN",e.userVo.sessionToken),l.myVinList(e.userVo.vehicle),recallUtils.toggleLoader(!1),o(".tabs-nav-list .tabs-nav-item.first").addClass("disabled")):(recallUtils.displayError(getErrorMessageByCode(e.errorCode),!0,a),recallUtils.toggleLoader(!1))}).error(function(e){recallUtils.displayError(getErrorMessageByCode(e.errorCode),!0,a),recallUtils.toggleLoader(!1)})},logout:function(){o(".other-vehicle .other-vehicle-yes").on("click",function(e){e.preventDefault()})},checkSession:function(){var e=o("#serviceLayerUrl").val(),t=sessionStorage.getItem("SESSIONTOKEN"),e=e+"/fordowner/vehicle/users/profiles/accountinfo?sessionToken="+t;t&&(recallUtils.toggleLoader(!0),o.ajax({url:e,methor:"GET"}).success(function(e){e.result?(l.myVinList(e.vehicle),recallUtils.toggleLoader(!1),o(".tabs-nav-list .tabs-nav-item.first").addClass("disabled")):(sessionStorage.removeItem("SESSIONTOKEN"),recallUtils.toggleLoader(!1))}).error(function(e){sessionStorage.removeItem("SESSIONTOKEN"),recallUtils.toggleLoader(!1)})),recallUtils.clearVariables()}};return{init:function(){digitaldata.page.pageName=window.fordAnalytics?window.fordAnalytics.pageName:"",l.init(),l.checkSession(),l.tooltip(),l.logout(),l.vinCheckHandler(),l.fillVinInput(),l.loginClickHandler(),l.onUpdateProfile(),l.checkOtherVehicle(),l.checkVinTab(),l.updateProfileOverlay()}}}),define("recall-status/component.recallStatus",["jquery","recall-xtime/component.recallXtime"],function(i,e){var n={vinCode:"",bpid:"",isUpdateProfile:"",updateProfileDate:{},updateProfileCTANavBar:document.querySelector(".update-profile-check-email"),checkStatus:function(){var e=i.cookie("VINDATA");n.vinCode=i.cookie("VIN"),""!=n.vinCode&&n.vinCode||recallUtils.isSignin?n.checkAccountInfo():""!=e&&e?n.currentStatus(JSON.parse(e)):n.isAuthorMode()||n.redirectToLanding(),n.isAuthorMode()&&(i(".recall-response-error").show(),i(".au-recall-status").show())},isAuthorMode:function(){return i("[data-iseditmode]").data("iseditmode")},redirectToLanding:function(){i.cookie("VINDATA",""),i.cookie("VIN",""),sessionStorage.removeItem("SESSIONTOKEN"),recallUtils.clearVariables(),window.location=recallUtils.getOrigin()+recallUtils.authoredURL(i("[data-redirect-landing]").data("redirect-landing"))},checkAccountInfo:function(){var e=i("#serviceLayerUrl").val(),t=sessionStorage.getItem("SESSIONTOKEN");i.ajax({url:e+"/fordowner/vehicle/users/profiles/accountinfo?sessionToken="+t,methor:"GET"}).success(function(e){e.result?(recallUtils.isSignin=!0,n.checkVinCode()):(recallUtils.isSignin=!1,n.redirectToLanding())}).error(function(e){recallUtils.isSignin=!1,n.redirectToLanding()})},currentStatus:function(e){var t=i(".recall-status-main-container .au-recall-status"),a=(i(".au-recall-container.bottom-container").hide(),(e.recallVO.recallNo&&"N/A"!==e.recallVO.recallNo&&i(".au-recall-container.bottom-container").hasClass(e.recallVO.recallNo)?i(".au-recall-container.bottom-container."+e.recallVO.recallNo):i(".au-recall-container.bottom-container.17S32")).show(),t.removeClass("takata-active").removeClass("takata-complete").removeClass("takata-future").removeClass("takata-na"),i("#global-ux .accordion").addClass("section-5"),i(".recallstatus ~.richtext").addClass("section-5"),("17S32"==e.recallVO.recallNo&&"A2"==e.recallVO.vlc||"NG"==e.recallVO.vlc)&&(e.recallVO.praNumber="2018/17077"),e.recallVO.status);if(a){switch(a.toLowerCase()){case"active":t.addClass("takata-active"),t.find(".section-2").show(),t.find(".section-4").show();break;case"future":t.addClass("takata-future");break;case"complete":t.addClass("takata-complete");break;case"n/a":t.addClass("takata-na"),t.find(".section-5").hide()}n.showList(e),document.querySelector("[data-loader]").classList.add("hide"),i(".au-recall-status").show(),n.isAuthorMode()&&(t.addClass("takata-active").addClass("takata-future").addClass("takata-complete").addClass("takata-na"),i(".au-recall-container.bottom-container").show())}},showList:function(e){var t=i(".vin-status");n.vinCode=e.recallVO.vin,n.bpid=e.recallVO.bpid||"",("17S32"==e.recallVO.recallNo&&"A2"==e.recallVO.vlc||"NG"==e.recallVO.vlc)&&(e.recallVO.praNumber="2018/17077"),""!=e.recallVO.vlc&&null!=e.recallVO.vlc&&(e.recallVO.model=n.checkVlcCode(e.recallVO.vlc)),sessionStorage.setItem("vehicle-model",e.recallVO.model),sessionStorage.setItem("vehicle-year",e.recallVO.year),sessionStorage.setItem("vehicle-pra",e.recallVO.praNumber),sessionStorage.setItem("vin",e.recallVO.vin),sessionStorage.setItem("vehicle-status",e.recallVO.status),sessionStorage.setItem("vehicle-recallNo",e.recallVO.recallNo),t.find(".vehicle-model").html(e.recallVO.model),t.find(".vehicle-date").html(e.recallVO.year),t.find(".vehicle-pra").html(e.recallVO.praNumber),t.find(".vehicle-vin").html(e.recallVO.vin),t.find(".vehicle-status").html(e.recallVO.status)},checkVlcCode:function(e){return i("[data-vehicle-line-model-json]").data("vehicle-line-model-json")[e]},updateProfileSection:function(){i(".recall-cta-buttons p:nth-child(3) .cta-button-primary").on("click",function(e){e.preventDefault(),n.disableUpdateProfileCTANavBar(!0),n.checkFleetCustomer()}),null!=sessionStorage.getItem("UPDATEPROFILE")&&"show"==sessionStorage.getItem("UPDATEPROFILE")&&recallUtils.checkCRMAPI()},onUpdateProfile:function(){var e;0!=i(".secondaryNavigation .link-overlay.update-profile-overlay").length&&(e='<a class="update-profile-check-email">'+i(".navigation-horizontal .desktop .link-overlay").html()+"</a>",i(".navigation-horizontal .desktop .link-overlay").addClass("hide").addClass("update-profile-overlay"),i(".navigation-horizontal .desktop .link-overlay").clone().appendTo("body"),i(".navigation-horizontal .desktop li").html(e),i(".navigation-horizontal .mobile li").html(e),i(".update-profile-check-email").on("click",function(e){e.preventDefault(),n.disableUpdateProfileCTANavBar(!0),recallUtils.isSignin||(i('#tabs-0 [name="vincode"] ').focus(),i('#tabs-0 [name="vincode"] ').blur()),n.checkFleetCustomer()}))},checkFleetCustomer:function(e){var t=i("#serviceLayerUrl").val()+"/fordowner/vehicle/users/gcamprecall/type?vin="+n.vinCode;n.isUpdateProfile=!0,recallUtils.toggleLoader(!0),i.ajax({url:t,dataType:"json",method:"GET"}).success(function(e){e.result?"Fleet"===e.customerType||"Special Fleet"==e.customerType?(recallUtils.toggleLoader(!1),n.disableUpdateProfileCTANavBar(!1),i(".fleet-customer-overlay.link-overlay").trigger("click"),n.recallStatusPopupAnalytics()):n.checkVinCode():recallUtils.showErrorPage()}).error(function(e){recallUtils.showErrorPage()})},recallStatusPopupAnalytics:function(){"undefined"!=typeof _satellite&&(digitaldata.page.pageName="flmo:portal:service:recalls:book online:locate dealer",digitaldata.page.pageNameNoVehicle="flmo:portal:service:recalls:book online:locate dealer",digitaldata.page.variantName="bp-vrfq-complete",_satellite.track("global-overlay"))},checkVinCode:function(e){var t=recallUtils.vin.toUpperCase().replace(/\s/g,""),t=i("#serviceLayerUrl").val()+"/fordowner/vehicle/users/gcamprecall?vin="+t;i.ajax({url:t,method:"GET",dataType:"json"}).success(function(e){var t;!e.result||(recallUtils.toggleLoader(!1),"96"==e.recallVO.statusCode)||"422"==e.recallVO.statusCode?recallUtils.showErrorPage():(n.disableUpdateProfileCTANavBar(!1),recallUtils.isSignin?n.isUpdateProfile?(recallUtils.toggleLoader(!0),recallUtils.checkCRMAPI(),n.isUpdateProfile=!1):(t=sessionStorage.getItem("showForm"),n.currentStatus(e),t&&recallUtils.checkCRMAPI()):i(".update-profile-overlay.link-overlay").trigger("click"))}).error(function(e){recallUtils.showErrorPage()})},updateProfileOverlay:function(){i(window).on("onoverlayload",function(){var e;i(".recall-verify-update-profile").length&&(i(".recall-verify-update-profile").parents(".overlay-content").addClass("recall-update-profile-overlay-form"),i(".profile-update-email").show(),i(".profile-update-code").show(),i('.textfield-vincode [name="vincode"]').attr("readonly","readonly"),i('.profile-update-code [name="gcamp-verification-code"]').attr("disabled","disabled"),i(".profile-update-code .cta-button").attr("disabled","disabled"),i('.textfield-vincode [name="vincode"]').val(n.vinCode),recallUtils.enableVerificationCodeCta(!1),e=document.querySelector(".profile-update-email .email-field .input-field input"),setTimeout(function(){e.addEventListener("blur",function(){e.classList.contains("error")?recallUtils.enableVerificationCodeCta(!1):recallUtils.enableVerificationCodeCta(!0,0)})},1e3),i(".profile-update-email .get-verification-code .cta-button").unbind("click"),i(".profile-update-email .get-verification-code .cta-button").on("click",recallUtils.getCode))})},checkOtherVehicle:function(){i(".recall-cta-buttons p:nth-child(2) .cta-button-primary").on("click",function(e){e.preventDefault(),document.querySelector("[data-check-other-vehicle]").classList.remove("overlay-hide"),document.querySelector("[data-check-other-vehicle]").classList.add("visible"),i(".check-other-vehicle").removeClass("hide")}),i(".check-other-vehicle .other-vehicle-yes").on("click",function(e){e.preventDefault();e=i(".check-other-vehicle").data("redirect-landing"),e=recallUtils.authoredURL(e);window.location=recallUtils.getOrigin()+e}),i(".check-other-vehicle .other-vehicle-no").on("click",function(e){e.preventDefault(),i(".check-other-vehicle").addClass("hide")})},xtimeOverlayLoad:function(){i(window).on("onoverlayload",function(){i(".xtime-main-wrapper").length&&i(".xtime-main-wrapper").parents(".overlay-content").addClass("au-recall-xtime-overlay"),e.init()})},disableUpdateProfileCTANavBar:function(e){n.updateProfileCTANavBar=document.querySelector(".update-profile-check-email"),e?n.updateProfileCTANavBar.classList.add("disabled"):n.updateProfileCTANavBar.classList.remove("disabled")}};return{init:function(){digitaldata.page.pageName=window.fordAnalytics?window.fordAnalytics.pageName:"",n.checkOtherVehicle(),n.updateProfileOverlay(),n.onUpdateProfile(),n.checkStatus(),n.updateProfileSection(),n.xtimeOverlayLoad()}}}),document.addEventListener("DOMContentLoaded",function(){function e(){var o=$("[data-recall-update-profile]"),r=document.getElementById("serviceLayerUrl").value,l=sessionStorage.getItem("vin");document.querySelector("[data-recall-pdf]");l&&$("[data-vin]").append(l),$("[data-book-service]").on("click",function(e){e.preventDefault();e=$("#recall-contact-bar").offset().top-$(".navigation.row.fixed").height();$("html, body").animate({scrollTop:e},800)}),document.querySelector("[data-recall-update-profile]").addEventListener("submit",function(e){e.preventDefault();var t,a,i,e=sessionStorage.getItem("bpid")||"",n=sessionStorage.getItem("email")||"";l=sessionStorage.getItem("vin"),0===document.getElementsByClassName("input-field error").length&&document.getElementById("PHONE_OPT_OUT").checked&&""!==document.querySelector('[name="recaptcha"]').value&&(recallUtils.toggleLoader(!0),document.querySelector(".recall-update-profile-form-include").classList.add("hide"),t=sessionStorage.getItem("secretKey"),a=o.serializeObject(),(i={}).secretKey=t,i.captcha=a.recaptcha,i.bpid=e,i.email=n,i.vin=l,i.firstName=a.INDIVIDUAL_CUST_FIRST_NAME,i.lastName=a.INDIVIDUAL_CUST_LAST_NAME,i.mobileNo=a.MOBILE_PHONE_NUMBER,i.street=a.CUSTOMER_ADDRESS_LINE_2,i.city=a.CUSTOMER_ADDRESS_DIVISION_1,i.state=a.CUSTOMER_ADDRESS_DIVISION_2,i.postcode=a.CUSTOMER_POSTAL_CODE,$.ajax({type:"POST",url:r+"/fordowner/vehicle/users/gcampcrmupdate/",dataType:"json",data:i,async:!1,success:function(e){!0===e.result?(digitaldata.page.pageName="flmo:portal:service:recalls:profile submit",digitaldata.page.pageNameNoVehicle="flmo:portal:service:recalls:profile submit",_satellite.track("global-overlay"),recallUtils.toggleLoader(!1),document.querySelector(".recall-update-profile-form-include").classList.add("hide"),document.querySelector(".update-profile-success-overlay.link-overlay").click(),setTimeout(function(){$(".overlay-content-inner .cta-button").on("click",function(){$(".overlay-close").trigger("click")})},1e3)):s()},error:function(e){s()}}),setTimeout(function(){document.querySelector("[data-recall-update-profile] button").removeAttribute("disabled")},2e3))}),$("[data-recall-pdf]").on("click",function(e){e.preventDefault();e=document.querySelector("[data-recall-pdf-href]").href+"?vehicleModel="+sessionStorage.getItem("vehicle-model")+"&mdlyr="+sessionStorage.getItem("vehicle-year")+"&pd="+sessionStorage.getItem("vehicle-pra")+"&modelid="+l+"&sy="+sessionStorage.getItem("vehicle-status")+"&recallNo="+sessionStorage.getItem("vehicle-recallNo");"undefined"!=typeof _satellite&&(digitaldata.onclick.onclickLinkName="flmo:portal:service:recalls:takata airbag:details:download",digitaldata.onclick.onclick="flmo:portal:service:recalls:takata airbag:details:download",_satellite.track("global-onclick")),window.open(e,"_blank")}),sessionStorage.getItem("vin")&&(digitaldata.onclick.onclick="flmo:portal:service:recalls:takata airbag:details:"+sessionStorage.getItem("vehicle-status"),digitaldata.vehicle={vin:sessionStorage.getItem("vin"),modelYear:sessionStorage.getItem("vehicle-year"),nameplate:"ford "+sessionStorage.getItem("vehicle-model")})}function s(){document.querySelector(".au-recall-container").classList.remove("hide"),recallUtils.showErrorPage()}document.querySelector(".recall-status-main-container")&&e()}),define("recall-lookup/component.recallLookup",["jquery","marketConfigGlobal"],function(o,e){var r=document.getElementsByTagName("html")[0],t=document.getElementById("countryCodeISO")&&document.getElementById("countryCodeISO").value,l={init:function(){o(".recallLookup .cta-button").on("click",function(e){e.preventDefault(),0!=o(".recallLookup .textfield-vincode small.error-oncall").length&&o(".recallLookup .textfield-vincode small.error-oncall").html(""),l.buttonDisabled(!0),setTimeout(function(){o(".recallLookup .my-vin-list").hide(),0!=o(".recallLookup .textfield-vincode small.error").length?l.buttonDisabled(!1):(o(".recallLookup .vin-loading").show(),0==o("[data-api-call]").data("api-call")?l.getVinData():l.checkVin())},1e3)}),l.pageAnalytics("flmo:portal:service:recalls")},pageAnalytics:function(e){digitaldata.page.pageName=e,_satellite.track("global-load")},checkVin:function(){var e=o("#serviceLayerUrl").val()+"/fordowner/vehicle/users/validateVIN?vincode="+o('.recallLookup [name="vincode"]').val(),t=l.errorContainer();o.ajax({url:e,method:"GET"}).success(function(e){o(".recallLookup .vin-loading").hide(),e.result?l.getVinData():l.displayError(getErrorMessageByCode(e.errorCode),!0,t),l.buttonDisabled(!1)}).error(function(e){l.buttonDisabled(!1),l.displayError(getErrorMessageByCode(e.errorCode),!0,t)})},getVinData:function(){var e=o("#serviceLayerUrl").val()+"/fordowner/vehicle/users/gcampopenrecall?vin="+o('.recallLookup [name="vincode"]').val().toUpperCase().replace(/\s/g,""),n=(l.checkMEAmarket()&&(e+="&country="+t),l.errorContainer());o(".recallLookup .my-vin-list").hide(),o.ajax({url:e,method:"GET"}).success(function(e){if(l.resetDom(),o(".recallLookup .vin-loading").hide(),e.result){if(500==e.returnCode?o(".recallLookup .recall-lookup-vin-tooltip").show():412==e.returnCode||0==e.returnCode?(o(".recallLookup .recall-lookup-vin-tooltip").show(),o(".recallLookup .vin-msg-no-result").show()):o(".recallLookup .recall-lookup-vin-tooltip").hide(),e.hasOwnProperty("recallOpenVO")&&0!==e.recallOpenVO.length){for(var t="",a=0;a<e.recallOpenVO.length;a++)t=l.checkMEAmarket()&&o(r).hasClass("rtl")&&e.recallOpenVO[a].hasOwnProperty("fsaDescLocal")?t+"<tr><td>"+e.recallOpenVO[a].localFsa+"</td><td>"+e.recallOpenVO[a].fsaDescLocal+"</td></tr>":t+"<tr><td>"+e.recallOpenVO[a].localFsa+"</td><td>"+e.recallOpenVO[a].fsaDescEnglish+"</td></tr>";o(".recallLookup .my-vin-list-holder tbody").html(t),o(".recallLookup .my-vin-list").show(),o(".recallLookup .contact-bar").show()}else o(".recallLookup .vin-msg-no-result").show();l.pageAnalytics("flmo:portal:service:recalls:search results")}else{var i=getErrorMessageByCode(e.errorCode);l.displayError(i,!0,n)}l.buttonDisabled(!1)}).error(function(e){l.resetDom(),l.buttonDisabled(!1),l.displayError(getErrorMessageByCode(e.errorCode),!0,n)})},buttonDisabled:function(e){e?o(".recallLookup .cta-button").attr("disabled","disabled"):o(".recallLookup .cta-button").removeAttr("disabled")},errorContainer:function(){return 0==o(".recallLookup .textfield-vincode small.error-oncall").length&&o(".recallLookup .textfield-vincode label").append('<small class="error-oncall"></small>'),o(".recallLookup .textfield-vincode small.error-oncall")},displayError:function(e,t,a){""===a&&(a=document.querySelector(".recallLookup .textfield-vincode small.error-oncall")?document.querySelector(".recallLookup .textfield-vincode small.error-oncall"):""),t?a.html(e):a.html(""),l.pageAnalytics("flmo:portal:service:recalls:search results")},resetDom:function(){o(".recallLookup .my-vin-list").hide(),o(".recallLookup .vin-msg-no-result").hide(),o(".recallLookup .recall-lookup-vin-tooltip").show(),o(".recallLookup .contact-bar").hide(),o(".recallLookup .vin-msg-no-result").hide()},checkMEAmarket:function(){return o(r).hasClass("market_mea")&&["af","bh","iq","jo","kw","lb","om","qa","sa","ae","ye"].includes(e.getCurrentMarketCode())}};return{init:function(){l.init()}}}),define("tabPanelNameplateExp/component.tabPanelNameplateExp",["jquery","mediaQuery","isAuthor"],function(s,a,i){var e={};return angular.module("tabPanelNameplateExp",[]).controller("renderTabPanel",["$scope",function(e){e.mediaType=a.getMediaType();var t=s(".component-content-exp");e.authorStatus=i.getAuthorStatus(),e.tabDatas=s(".tabpanel-nameplate-exp").data("tab-panel"),"mobile"==e.mediaType?t.attr("style",t.attr("data-style-mobile")):t.attr("style",t.attr("data-style-desktop"))}]).directive("stickyHeader",["$window",function(l){return{restrict:"A",link:function(n,o,e){var r=angular.element(o);n.authorStatus||"true"===e.tabSticky||angular.element(l).bind("scroll",function(){var e=l.pageYOffset,t=(angular.element(s(".tabs-nav-item-Exp.is-active"))[0].scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"}),o[0]),a=s(o).closest(".fds-tab-container-exp"),i=s(o).closest(".fds-tab-container-exp").find(".indicators-exp"),t=t.offsetTop+t.clientHeight;"mobile"===n.mediaType?t<=e?(angular.element(r[0]).addClass("fixed fixed-top"),i.addClass("fixed fixed-top"),a.addClass("fixed fixed-top")):(angular.element(r[0]).removeClass("fixed fixed-top"),i.removeClass("fixed fixed-top"),a.removeClass("fixed fixed-top")):t<=e?a.addClass("fixed fixed-top"):a.removeClass("fixed fixed-top")})}}}]).directive("isInViewport",["$window",function(o){return{restrict:"A",link:function(e,t,a){var i,n;"mobile"==e.mediaType?(i=angular.element(t),setTimeout(function(){var e,t;i[0].classList.contains("is-active")&&(e=i[0].getBoundingClientRect(),t=o.innerWidth||document.documentElement.clientWidth,e.right>t)&&i[0].scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})},0)):(i=angular.element(t),n=angular.element(".tabs-nav-list-exp"),setTimeout(function(){var e;i[0].classList.contains("is-active")&&(e=n[0].getBoundingClientRect(),i[0].getBoundingClientRect().right>e.right)&&i[0].scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})},0))}}}]),e.init=function(){s(".tabPanelNameplateExp").length&&s(".tabPanelNameplateExp").each(function(e,t){angular.bootstrap(t,["tabPanelNameplateExp"])}),s(".indicators-exp span.rightArrow").click(function(e){var t=document.getElementsByClassName("tabs-nav-list-exp")[0];t.scrollLeft=t.scrollLeft+200}),s(".indicators-exp span.leftArrow").click(function(e){var t=document.getElementsByClassName("tabs-nav-list-exp")[0];t.scrollLeft=t.scrollLeft-200})},e}),define("esbwarrantyInfo/component.esbwarrantyInfo",["jquery"],function(e){var t=e("#searchVIN"),i=e(".esbLookup .vin-loading"),n=e("#serviceLayerUrl").val(),o=e("#countryCodeISO").val(),r=e(".esbLookup .my-vin-list"),l=e(".esbLookup .my-vin-list-holder"),a=e(".esbLookup .esbLookup-search-result"),s=e(".esbLookup .vin-msg-no-result"),c=e(".esbLookup table").data("heading"),d=e(".esbLookup #recall-lookup-vin-tooltip"),u=e(".esbLookup"),p=u.find(".esb-search"),m=u.data("fds")||!1,h=u.find(".loader"),f=u.find(".esb-search__results"),g=f.find(".error-no-result"),v=f.find(".success-result"),y=f.find(".success-result__lists"),b=u.find(".esb-vin-tooltip"),w=f.find(".current-date"),C=u.data("startdate")||"Contract Start Date",k=u.data("enddate")||"Contract End Date",S=u.data("endodometer")||"End Odometer",x=u.data("claimremains")||"Remaining Claims",D={init:function(){t.on("click",function(){setTimeout(function(){if(e(".esbLookup .error").length)return a.hide(),!1;a.show(),i.show(),s.hide(),r.hide(),D.getVINData(e(".esbLookup .input-field input").val())},10)})},getVINData:function(a){e.ajax({method:"GET",url:n+"/fordowner/vehicle/users/getWarrantyDetails?vinCode="+a+"&country="+o}).success(function(e){var t;(m?(h.hide(),b.hide(),("SUCCESS_WARRANTY_OK"==e.errorCode&&"Success"==e.message?(D.addCurrentDate(),D.displayResults(e?.warrantyContractResponse?.contract||[]),g.hide(),v):(v.hide(),g)).show(),f):(i.hide(),d.hide(),"SUCCESS_WARRANTY_OK"==e.errorCode&&"Success"==e.message?(l.find("table").html(""),l.find("p > span").text(a),t="",t+="<tr><th>"+c+"</th></tr>",e.warrantyContractResponse.contract.forEach(function(e){t+="<tr><td>"+e+"</td></tr>"}),l.find("table").append(t),r):s)).show()}).error(function(e){(m?(h.hide(),b.hide(),v.hide(),g.show(),f):(i.hide(),d.hide(),r.hide(),s)).show()})},fdsInit:function(){h.hide(),f.hide(),p.find(".hint").appendTo(p.find(".title-info > p")),t.on("click",function(){f.hide(),setTimeout(function(){if(u.find(".error").length)return f.hide(),!1;h.show(),D.getVINData(u.find(".input-field input").val())})})},addCurrentDate:function(){var e=new Date,t=e.getFullYear(),a=e.getMonth(),e=e.getDate();w.html(e+` ${["January","February","March","April","May","June","July","August","September","October","November","December"][a]} `+t)},displayResults:function(e){var t="";e.length?e.forEach(function(e){t+=`<div class="list-item">
                      <h5>${e.customerDesc}</h5>
                      <ul>
                        <li>
                          <label>${C}</label>
                          <span>${e.startDate}</span>
                        </li>
                        <li>
                          <label>${k}</label>
                          <span>${e.endDate}</span>
                        </li>
                        <li>
                          <label>${S}</label>
                          <span>${e.endOdometer}</span>
                        </li>
                        <li>
                          <label>${x}</label>
                          <span>${null==e.claimRemains?"NA":e.claimRemains}</span>
                        </li>
                      </ul>
                    </div>`}):t="",y.html(t)}};return{init:function(){m?D.fdsInit():D.init()}}}),define("recall-xtime/component.recallXtime",["jquery","mediaQuery"],function(i,n){var o={deepslinksArr:[],deepslinkUrl:"",vinCode:sessionStorage.getItem("vin"),enableSubmit:!0,validateURI:function(){o.vinCode=sessionStorage.getItem("vin");var e="mobile"===n.getMediaType(),t=(o.deepslinkUrl="",i(".xtime-dealer-selector .select2-container").select2("val")),a=o.deepslinksArr.find(function(e){return e.code===t});a&&a.urls&&(o.deepslinkUrl=e?a.urls.find(function(e){return"MOBILE"===e.portal&&e.link&&""!==e.link}):a.urls.find(function(e){return"CONSUMER"===e.portal&&e.link&&""!==e.link||"MENU"===e.portal&&e.link&&""!==e.link})),""!==o.deepslinkUrl&&""!==o.deepslinkUrl.link&&o.vinCode&&""!==o.vinCode?i(".xtime-main-wrapper .form-submit .cta-button").removeAttr("disabled"):i(".xtime-main-wrapper .form-submit .cta-button").attr("disabled","disabled")},setURI:function(e){e.preventDefault(),digitaldata.onclick.onclickLinkName="flmo:portal:service:recalls:takata airbag:cta",digitaldata.onclick.onclick="portal:service:recalls:takata airbag:book online:cta:"+this.innerHTML,_satellite.track("global-onclick"),o.vinCode=sessionStorage.getItem("vin"),window.open(o.deepslinkUrl.link+"&keyword=Takata&VIN="+o.vinCode+"&variant=FORDAUSTRALIA&sab=TAKATA&DEST=APPT")}};return{init:function(){document.querySelector(".xtimedeeplink")&&(digitaldata.page.pageName="flmo:portal:service:book online:locate dealer",digitaldata.page.siteSection="owners",digitaldata.page.hierarchy="owners:flmo:service",digitaldata.page.pageNameNoVehicle="flmo:portal:service:book online:locate dealer",digitaldata.page.site="owner-australia",digitaldata.page.variantName="global-overlay",_satellite.track("global-overlay")),i(function(){i(".xtime-dealer-selector select").on("change",function(e){o.enableSubmit&&(o.validateURI(),i(".xtime-main-wrapper .form-submit .cta-button").on("click",o.setURI))}),i(".xtime-dealer-selector select").select2&&i(".xtime-dealer-selector select").select2({}),i(".xtime-main-wrapper .form-submit .cta-button").attr("disabled","disabled");var e=i(".xtime-dealer-url").data("resource-path"),e=(i.ajax({url:e,type:"get",success:function(e){e.data&&0<e.data.length?e.data.forEach(function(e){i(".xtime-dealer-selector select").append('<option value="'+e.dealerCode+'" >'+e.dealerName+" "+e.dealerStateCode+"</option>")}):o.enableSubmit=!1},error:function(e){o.enableSubmit=!1}}),i(".xtime-deeplinks-url").data("resource-path"));i.ajax({url:e,type:"get",success:function(e){e.dealers&&0<e.dealers.length?o.deepslinksArr=e.dealers:o.enableSubmit=!1},error:function(e){o.enableSubmit=!1}})})}}}),define("secondary-navigation-pass/component.secondaryNavigationPass",["jquery","_","mediaQuery","isAuthor"],function(e,t,a,i){var n,o,r;document.querySelector("#fordPassNav")&&(n=document.querySelector("#active_menu"),o=document.querySelector("#menu"),r=document.querySelector("body"),document.addEventListener("DOMContentLoaded",function(){for(var e=document.querySelectorAll("ul.menu__desktop--lists li a"),t=document.location.href,t=document.baseURI,a=0;a<e.length;a++){var i=new RegExp(e[a].attributes.href.value);t.match(i)&&(e[a].classList.remove("no__active"),e[a].classList.add("active"))}}),n.addEventListener("click",function(e){try{e.preventDefault(),o.classList.toggle("show--menu"),n.classList.toggle("active__menu"),r.classList.toggle("hidden-scroll-y")}catch(e){console.log(e)}}))}),define("iframePass/component.iframePass",["jquery","_","mediaQuery","isAuthor"],function(e,t,a,i){var n;document.querySelector("#iframeForFAQ")&&(n=window.addEventListener?"addEventListener":"attachEvent",(0,window[n])("attachEvent"==n?"onmessage":"message",function(e){document.querySelector("#iframeForFAQ").style.height=e.data.height+"px"},!1))}),define("special-offers/component.specialOffers.app",["angular"],function(e){return e.module("specialOffers",["ngSanitize"])}),define("special-offers/component.specialOffers.controllers",["special-offers/component.specialOffers.app","special-offers/controllers/specialOffers.controller.detail"],function(e,t){e.controller("SpecialOfferCtrl",["$scope","$window","$compile","$timeout","workFlowData",t])}),define("special-offers/component.specialOffers",["jquery","angular","special-offers/component.specialOffers.app","special-offers/component.specialOffers.services","special-offers/component.specialOffers.controllers"],function(e,a,t,i,n){var o={init:function(){e(".specialOffers").length&&e(".specialOffers.section").each(function(e,t){a.bootstrap(t,["specialOffers"])})}};return o}),define("special-offers/component.specialOffers.services",["special-offers/component.specialOffers.app","special-offers/services/specialOffers.services.sort"],function(e,t){e.service("workFlowData",[t])}),define("special-offers/services/specialOffers.services.sort",["jquery","_"],function(e,t){return function(){return{}}}),define("special-offers/controllers/specialOffers.controller.detail",["jquery","analytics/analyticsEventLayer","marketConfigGlobal","mediaQuery"],function(T,N,A,I){return function(c,e,t,d,a){var u=this,i=(u.layout="list",c.layout="list",c.shortlist=!1,{}),n="",o=-1<["au","nz","th","ph","vn","sk"].indexOf(A.getCurrentMarketCode())?"hot-deals":"special offers",r=A.getCurrentMarketCode(),l="",s=(u.isFilterFirstorSort="",c.minPrice={text:"",value:""},c.maxPrice={text:"",value:""},u.shortListedVehicle=[],u.offerFilters=[],u.isMobile="mobile"===I.getMediaType(),u.refreshFilterFromLandingPage=!1,[]);function p(){d(function(){T(".special-offer-flexslider").each(function(){var t,a,i,n=T(this).data("pagination");T(this).flexslider({animation:"slide",animationLoop:!1,slideshow:!1,itemWidth:210,itemMargin:20,maxItems:3,start:h,start:function(e){n&&(T(e).find(".flex-control-nav").hide(),T(e).find(".flex-direction-nav li:nth-child(1)").after(T("<li>").html('<span class="page-num"> </span>')),t=e.currentSlide,a=e.pagingCount,T(e).find(".flex-prev").css({"background-color":"#75787b","pointer-events":"none"}),T(e).find(".page-num").text(t+1+" / "+a))},nextText:'<div class="carousel-btn carousel-next"><span class="icon icon-chevron-thin-right"></span></div>  ',prevText:'<div class="carousel-btn carousel-previous"><span class="icon icon-chevron-thin-left"></span></div>',after:function(e){t=e.currentSlide,a=e.pagingCount,i=e.last,T(e).find(".flex-prev").css({"background-color":"#2d96cd","pointer-events":"visible"}),T(e).find(".flex-next").css({"background-color":"#2d96cd","pointer-events":"visible"}),0==t&&T(e).find(".flex-prev").css({"background-color":"#75787b","pointer-events":"none"}),t==i&&T(e).find(".flex-next").css({"background-color":"#75787b","pointer-events":"none"}),T(e).find(".page-num ").text(t+1+" / "+a)}}),T(this).find(".inner-slides").length<4&&T(this).find(".flex-direction-nav").hide(),T(window).trigger("resize")})})}u.retailPriceStartValue=T("input[name='retailPriceStartValue']").val(),u.retailPriceEndValue=T("input[name='retailPriceEndValue']").val(),u.retailPriceIncrementValue=T("input[name='retailPriceIncrementValue']").val(),u.monthlyInstallmentStartValue=T("input[name='monthlyInstallmentStartValue']").val(),u.monthlyInstallmentEndValue=T("input[name='monthlyInstallmentEndValue']").val(),u.monthlyInstallmentIncrementValue=T("input[name='monthlyInstallmentIncrementValue']").val(),u.fordOptionNgfvStartValue=T("input[name='fordOptionNgfvStartValue']").val(),u.fordOptionNgfvEndValue=T("input[name='fordOptionNgfvEndValue']").val(),u.fordOptionNgfvIncrementValue=T("input[name='fordOptionNgfvIncrementValue']").val(),null!==sessionStorage.getItem("shortList")&&T.each(JSON.parse("["+sessionStorage.getItem("shortList")+"]"),function(e,t){s.push(JSON.stringify(t)),u.shortListedVehicle.push(t)}),T("body").addClass("au-special-offer"),d(function(){T("select").select2(),T(".select2-search, .select2-focusser").remove(),T('[name="sortby"]').on("change",p),T("#filter-vehicle").on("change",function(){d(function(){var e=document.getElementById("filter-model");e&&(e.selectedIndex=0),T("#filter-model").trigger("change")})})});var m=function(){T.ajax({url:T(".special-offer").data("offerdata-url"),method:"GET",async:!1,dataType:"json"}).success(function(e){try{var i;e&&0<e.length&&(i=[],T.each(e,function(e,t){var a={};a.offerType=t.offerType,a.modelList=JSON.parse(t.modelList),i.push(a)}),c.filterOfferType=i[0],u.offerList=i,p())}catch(e){console.log("Error in JSON when rendering offers ",u.offerList)}}).error(function(e){console.log("Error while fetching all the offers",e)})};function h(){}function f(){d(function(){T(".specialOfferGrid").each(function(){var e=[];T(".grid-holder",this).each(function(){T(this).css("height",""),e.push(T(this).height())}),200<Math.max.apply(null,e)&&T(".grid-holder",this).each(function(){T(this).height(Math.max.apply(null,e)+"px")})})})}function g(e){for(var t=e?e.length:0;3<t;)e=e.slice(0,t-=3).concat(" ",e.slice(t,e.length));return e}var v,y=function(e){T(".feature-container").addClass("hidden"),("sort"===u.isFilterFirstorSort?T(".isSortFirst .feature-container"):T(".isFilterFirst .feature-container")).removeClass("hidden"),T.each(e,function(e,t){var a,i;t&&"sort"===t.offerType?(a=T.grep(t.modelList,function(e){return!0===e.isOfferPerMonth}),i=T.grep(t.modelList,function(e){return!0!==e.isOfferPerMonth}),T(".isSortFirst .feature-container").removeClass("hidden"),0===a.length&&T(".isSortFirst .feature-container:first").addClass("hidden"),0===i.length&&T(".isSortFirst .feature-container:last").addClass("hidden")):t&&0<t.modelList.length?T(".feature-container h3 span:contains('"+t.offerType+"')").parents(".feature-container").removeClass("hidden"):T(".feature-container h3 span:contains('"+t.offerType+"')").parents(".feature-container").addClass("hidden")});var a=!0;T.each(T(".feature-container"),function(e,t){T(t).hasClass("hidden")||(a=!1)}),a?T(".noResultsForFilters").removeClass("hidden"):T(".noResultsForFilters").addClass("hidden")},b=function(){var a,e,t=T("select[name='sortby']").val(),i=(k(),[]);"sort"===u.isFilterFirstorSort?(a=[],T.each(u.offerList,function(e,t){T.merge(a,t.modelList)}),(e={}).offerType="sort",e.modelList=a,i.push(e)):i=u.offerList,"high-to-low-label"===t?(T.each(i,function(e,t){var a,i;t.modelList.sort(function(e,t){return parseInt(t.offerPrice.replace(" ","").slice(1))-parseInt(e.offerPrice.replace(" ","").slice(1))}),"filter"===u.isFilterFirstorSort&&(a=T.grep(t.modelList,function(e){return!0===e.isOfferPerMonth}),i=T.grep(t.modelList,function(e){return!0!==e.isOfferPerMonth}),t.modelList=T.merge(a,i))}),u.offerList=i):"low-to-high-label"===t?(T.each(i,function(e,t){t.modelList.sort(function(e,t){return parseInt(e.offerPrice.replace(" ","").slice(1))-parseInt(t.offerPrice.replace(" ","").slice(1))})}),u.offerList=i):(m(),0!==u.offerFilters.length&&w())},w=function(){var a=u.offerList;a&&0<a.length&&(n="",T.each(u.offerFilters,function(e,t){0===e?n="?":n+="&",n=n+t.type+"="+t.value}),-1!==window.location.href.indexOf("wcmmode=disabled")&&0<u.offerFilters.length?n+="&wcmmode=disabled":-1!==window.location.href.indexOf("wcmmode=disabled")&&0===u.offerFilters.length&&(n+="?wcmmode=disabled"),-1!==window.location.href.indexOf("searchid")&&"za"===r&&(n+=-1!==n.indexOf("?")?"&"+l:"?"+l),window.history.pushState("","",window.location.pathname+n),T.each(a,function(e,t){var r=t.modelList;T.each(u.offerFilters,function(e,t){var a,i=r.length;if(T("#filter-vehicle").length&&"bodyType"===t.type&&"vehicles"!==t.value)for(;i--;){var n=r[i].bodyType;void 0!==n&&t.value!==n.toLowerCase()&&r.splice(i,1)}else if(T("#filter-model").length&&"vehicle"===t.type)for(;i--;){var o=r[i].modelName;void 0===o||-1<(o=o.toLowerCase()).indexOf(t.text.toLowerCase())||r.splice(i,1)}else if(T("#filter-payment")&&"paymentOption"===t.type)for(i=r.length;i--;)"gfv-option"===t.value&&!0===r[i].isFutureGuaranteed||"ford-option"===t.value&&!0===r[i].isFutureGuaranteed||"monthly-installment"===t.value&&!0===r[i].isOfferPerMonth||"retail-price"===t.value&&!0!==r[i].isOfferPerMonth||r.splice(i,1);else if(T("#filter-min")&&"minPrice"===t.type)for(i=r.length;i--;)void 0!==(a=r[i].offerPrice)&&parseInt(t.value)>=parseInt(a.replace(/[^0-9]+/g,""))&&r.splice(i,1);else if(T("#filter-max")&&"maxPrice"===t.type)for(i=r.length;i--;)void 0!==(a=r[i].offerPrice)&&parseInt(t.value)<=parseInt(a.replace(/[^0-9]+/g,""))&&r.splice(i,1)}),a[e].modelList=r}),u.offerList=a,p()),0<u.offerFilters.length?T(".special-offer-filter-option").removeClass("hidden"):T(".special-offer-filter-option").addClass("hidden")},C=function(e,t){var a,i;("sort"===e?b:(e=[],a={},(i=T("select[name='bodyType']").val())&&i!==T("select[name='bodyType'] option:first").val()&&(a.type="bodyType",a.value=T("select[name='bodyType']").val(),a.text=T("select[name='bodyType'] option:selected").text(),e.push(a)),(i=T("select[name='vehicle']").val())&&i!==T("select[name='vehicle'] option:first").val()&&((a={type:"vehicle"}).value=T("select[name='vehicle']").val(),a.text=T("select[name='vehicle'] option:selected").text(),e.push(a)),(i=T("select[name='paymentOption']").val())&&i!==T("select[name='paymentOption'] option:first").val()&&((a={type:"paymentOption"}).value=T("select[name='paymentOption']").val(),a.text=T("select[name='paymentOption'] option:selected").text(),e.push(a)),(i=T("select[name='minPrice']").val())&&i!==T("select[name='minPrice'] option:first").val()&&((a={type:"minPrice"}).value=T("select[name='minPrice']").val(),a.text=T("select[name='minPrice'] option:selected").text(),e.push(a)),(i=T("select[name='maxPrice']").val())&&i!==T("select[name='maxPrice'] option:first").val()&&((a={type:"maxPrice"}).value=T("select[name='maxPrice']").val(),a.text=T("select[name='maxPrice'] option:selected").text(),e.push(a)),u.refreshFilterFromLandingPage?(u.offerFilters=e,u.refreshFilterFromLandingPage=!1):T("select[name='paymentOption']").val()!==T("select[name='paymentOption'] option:first").val()&&T("select[name='minPrice']").val()===T("select[name='minPrice'] option:first").val()&&T("select[name='maxPrice']").val()===T("select[name='maxPrice'] option:first").val()?u.offerFilters=u.offerFilters:u.offerFilters=e,(0<e.length||1===t)&&m(),k(),T("select[name='sortby']").val()&&b(),w))(),c.$watch("offerList",function(){y(u.offerList)})},k=function(){var e=T("select[name='sortby']").val();""===e&&0===u.offerFilters.length?u.isFilterFirstorSort="":""===e&&0<u.offerFilters.length?u.isFilterFirstorSort="filter":""!==e&&0===u.offerFilters.length||""!==e&&""===u.isFilterFirstorSort?u.isFilterFirstorSort="sort":0<u.offerFilters.length&&""===u.isFilterFirstorSort&&(u.isFilterFirstorSort="filter")};function S(){var e=document.getElementById("filter-vehicle"),t=document.getElementById("filter-model"),a=document.getElementById("filter-payment"),i=document.getElementById("filter-min"),n=document.getElementById("filter-max");e&&(e.selectedIndex=0),a&&(a.selectedIndex=0),i&&(i.selectedIndex=0),n&&(n.selectedIndex=0),t&&(t.selectedIndex=0),x(!0),f()}function x(e){d(function(){e&&T("#filter-vehicle").trigger("change"),T("#filter-payment").trigger("change"),""===T("select[name='minPrice'] option:first").val()&&0!==T('[data-filter-type="maxPrice"]').length?(c.setMaxPrice(0),T("#filter-min").select2()):(T("#filter-min").trigger("change"),T("#filter-max").trigger("change")),T("#filter-model").trigger("change")})}function D(e,t,a){N.getSpecialOfferEvents().specialOfferEvents(e,t,a)}function P(e,t){N.getSpecialOfferEvents().trackGlobalOverlay(e,t)}v=getLanguageRoot()+"/.serverdateconfig.data?p="+A.getTimeStampConfigPath(),T.ajax({url:v,method:"GET",dataType:"json"}).success(function(e){T(".special-offer-container").attr("timeStamp",JSON.stringify(e))}).error(function(e){console.log("Error while fetching time stamp data",e)}),m(),T.ajax({url:T(".specialOfferFilterModel").data("offers-filter-data-url"),method:"GET",async:!1,dataType:"json"}).success(function(e){try{e&&0<e.length&&(e.splice(0,0,{name:"",title:""}),c.bodyType=e[0],u.filterParam=e,u.vehicleDataList=[{name:"",title:""}],c.vehicleDataListModel=u.vehicleDataList[0])}catch(e){console.log("Error in JSON when populating filter dropdown data.")}}).error(function(e){console.log("Error while fetching data of all vehicles type for dropdown",e)}),angular.element(document).ready(function(){y(u.offerList);for(var e="",t=new URL(window.location.href),a=t.slice(t.indexOf("?")+1,-1===t.indexOf("#")?t.length:t.indexOf("#")).split("&"),i=0;i<a.length;i++)e=a[i].split("="),T(".filter select[name='"+encodeURI(e[0])+"'] option[value='"+encodeURI(e[1])+"']").prop("selected",!0),e[0]&&"bodytype"===e[0].toLowerCase()?c.putVehicleLists(e[1],u.filterParam):e[0]&&"paymentoption"===e[0].toLowerCase()?c.setMinMaxPrice(e[1]):e[0]&&"minprice"===e[0].toLowerCase()?c.setMaxPrice({value:parseInt(e[1])}):e[0]&&"searchid"===e[0].toLowerCase()&&(l=a[i]),c.$apply();0<a.length&&C("filter",1),c.$apply()}),c.filterModel=function(){T(".filter.section").parents(".overlay-container-special-offer").addClass("visible"),T(".filter.section").parents(".overlay-container-special-offer").show(),P("filter")},c.putVehicleLists=function(a,e){var i=[];"bodyType"!==(a=""===a?T(T("select[name='bodyType'] option")[0]).val():a)&&("vehicles"===a?T.each(e,function(e,t){t.vehicleData&&0<t.vehicleData.length&&("select-a-vehicle"===t.vehicleData[0].name&&t.vehicleData.splice(0,1),i=i.concat(t.vehicleData))}):e&&(e=T(e).filter(function(e,t){return t.name===a}))[0].vehicleData&&"select-a-vehicle"===(i=e[0].vehicleData)[0].name&&i.splice(0,1)),T("#filter-model").prop("disabled",!1),i.splice(0,0,{name:"",title:""}),i.forEach(function(e,t){0<t&&""===e.name&&i.splice(t,1)}),c.vehicleDataListModel=i[0],u.vehicleDataList=i},c.quickView=function(e){u.modelView=JSON.parse(T(e.target).parents(".offerModelList").attr("data-offermodeldata")),T(".quick-view.section").parents(".overlay-container-special-offer").addClass("visible"),T(".quick-view.section").parents(".overlay-container-special-offer").show(),T.each(s,function(e,t){t=JSON.parse(t);if(u.modelView.modelID===t.modelID&&u.modelView.modelName===t.modelName&&u.modelView.offerPrice===t.offerPrice)return T(".addToShortList").addClass("hidden"),T(".removeFromShortList").removeClass("hidden"),!1;T(".addToShortList").removeClass("hidden"),T(".removeFromShortList").addClass("hidden")});e=T(e.target).parents(".offerModelList").data("offermodeldata"),delete e.features,sessionStorage.setItem("shortListedDataToAdd","["+JSON.stringify(e)+"]"),T("body").addClass("au-special-offer-overlay"),e=u.modelView.modelName;P("quickView",e=null!=typeof u.modelView.nameplateKey&&""!=u.modelView.nameplateKey?"ford "+u.modelView.nameplateKey:e)},c.clearFilters=function(e){var t=T(".filter select"),t=(T.each(t,function(e,t){T(t).find("option:first").prop("selected",!0)}),T(".filter"));0<t.length&&(t.find(".minMax").addClass("hidden"),t.find(".minMax").addClass("hidden")),c.putVehicleLists(T(T("select[name='bodyType'] option")[1]).val(),u.filterParam),C("filter",1),d(S,100),d(function(){T("#filter-model").prop("disabled",!0)},1e3),D(o+":home:cta",o+":home:clear filters","homeClearFilters")},c.resetFilters=function(){d(S,100),d(function(){T("#filter-model").prop("disabled",!0)},200)},c.refreshFilter=function(e){e=T(e.currentTarget).siblings(".filter-type").text().trim();T("select[name='"+e+"'] option:first").prop("selected",!0),e&&"bodytype"===e.toLowerCase()?(T("#filter-model option:first").prop("selected",!0),c.putVehicleLists(T("select[name='"+e+"']").val()),T("#filter-vehicle").select2(),d(function(){T("#filter-model").prop("disabled",!0)})):e&&"paymentoption"===e.toLowerCase()&&(T("select[name='minPrice'] option:first").prop("selected",!0),T("select[name='maxPrice'] option:first").prop("selected",!0),c.setMinMaxPrice(T("select[name='"+e+"']").val())),e&&"minprice"===e.toLowerCase()?0===T('[data-filter-type="maxPrice"]').length&&T("#filter-payment option:first").prop("selected",!0):e&&"maxprice"===e.toLowerCase()&&0===T('[data-filter-type="minPrice"]').length&&T("#filter-payment option:first").prop("selected",!0),u.refreshFilterFromLandingPage=!0,C("filter",1),x(!1),D(o+":home:cta",o+":home:remove filters:"+e,"refreshFilter")},c.closeMessageModel=function(e){e=T(e.target).parents(".overlay-container-special-offer");e.removeClass("visible"),e.hide(),e[0].classList.forEach(function(e){"removeAllFromShortList"==e?D(o+":shortlist:{remove vehicle | remove all vehicles}:cta",o+":shortlist:remove all vehicles:no","removeAllShortListNo"):D(o+":shortlist:{remove vehicle | remove all vehicles}:cta",o+":shortlist:remove vehicle:no","removeVehicleNo")})},c.setMinMaxPrice=function(e){var t=T(".minMax");if(e&&e!==T("select[name='paymentOption'] option:first").val()){var a=0,i=0,n=0,o=[],r=[],l=(c.minPrice={text:"",value:""},c.maxPrice={text:"",value:""},u.minPrice=[],u.maxPrice=[],"retail-price"===e?(a=parseInt(u.retailPriceIncrementValue),i=parseInt(u.retailPriceStartValue),n=parseInt(u.retailPriceEndValue)):"monthly-installment"===e?(a=parseInt(u.monthlyInstallmentIncrementValue),i=parseInt(u.monthlyInstallmentStartValue),n=parseInt(u.monthlyInstallmentEndValue)):"ford-option"!==e&&"gfv-option"!==e||(a=parseInt(u.fordOptionNgfvIncrementValue),i=parseInt(u.fordOptionNgfvStartValue),n=parseInt(u.fordOptionNgfvEndValue)),{});if(0!==a)for(var s=i;s<=n;s+=a)(l={}).text="R"+g(s.toString()),l.value=s,o.push(l),r.push(l);o.pop(),o.unshift({text:"",value:""}),r.unshift({text:"",value:""}),u.minPrice=o,u.maxPrice=r,t.removeClass("hidden")}else u.minPrice=[{text:"",value:"0"}],u.maxPrice=[{text:"",value:"0"}],t.addClass("hidden");d(function(){T("#filter-min").select2(),T("#filter-max").select2()})},c.setMaxPrice=function(e){var t=0,e=e?e.value:0,a=0,i=[],n=(u.maxPrice=[],T("select[name='paymentOption']").val()),o=("retail-price"===n?(t=parseInt(u.retailPriceIncrementValue),a=parseInt(u.retailPriceEndValue)):"monthly-installment"===n?(t=parseInt(u.monthlyInstallmentIncrementValue),a=parseInt(u.monthlyInstallmentEndValue)):"ford-option"!==n&&"gfv-option"!==n||(t=parseInt(u.fordOptionNgfvIncrementValue),a=parseInt(u.fordOptionNgfvEndValue)),{});if(0!==t)for(var r=e+t;r<=a;r+=t)(o={}).text="R"+g(r.toString()),o.value=r,i.push(o);0===i.length?((o={}).text="R"+g(e),o.value=e,u.maxPrice.push(o)):u.maxPrice=i,u.maxPrice.splice(0,0,{text:"",value:""}),d(function(){T("#filter-max").select2()},100)},c.submitFilters=function(){C("filter",0),u.offerFilters&&0<u.offerFilters.length?T("select[name='paymentOption']").val()!==T("select[name='paymentOption'] option:first").val()&&T("select[name='minPrice']").val()===T("select[name='minPrice'] option:first").val()&&T("select[name='maxPrice']").val()===T("select[name='maxPrice'] option:first").val()?((e=T(".message-model .overlay-container-special-offer.minMaxInvalid")).addClass("visible"),e.find(".cta-button").addClass("hidden"),e.find(".close-message-model").removeClass("hidden"),e.addClass("visible"),e.show()):((e=T(".offer-filter-submit button").parents(".overlay-container-special-offer")).removeClass("visible"),e.hide()):((e=T("select[name='paymentOption']").val()!==T("select[name='paymentOption'] option:first").val()&&T("select[name='minPrice']").val()===T("select[name='minPrice'] option:first").val()&&T("select[name='maxPrice']").val()===T("select[name='maxPrice'] option:first").val()?T(".message-model .overlay-container-special-offer.minMaxInvalid"):T(".message-model .overlay-container-special-offer.noFilterSelected")).addClass("visible"),e.find(".cta-button").addClass("hidden"),e.find(".close-message-model").removeClass("hidden"),e.addClass("visible"),e.show()),f();var e=T("#filter-vehicle option:selected").html(),t=T("#filter-model option:selected").html(),a=T("#filter-payment option:selected").html();D(o+":filter offers:cta",o+":filter offers:find my vehicle:"+t+":"+e+":"+a,"filter")},c.sortByPrice=function(e){C("sort",0),f();var t=T("#vehicle-sorting option:selected").html();D(o+":home:cta",o+":home:sort by price:"+t,"price")},c.offerViewLayout=function(e){u.layout=e.layout,p(),f(),T(".specialOfferList, .specialOfferGrid").css("opacity",0).css("opacity",1).delay(1e3),"list"===e.layout?D(o+":home:cta",o+":home:line view","offerView"):"grid"===e.layout&&D(o+":home:cta",o+":home:grid view","offerView")},c.addToShortList=function(e){var t,a=JSON.parse(T(".quick-view.section .buzz-feed").attr("data-quickveiw"));delete a.features,4<=u.shortListedVehicle.length?((t=T(".overlay-container-special-offer.extraShortListMessage")).addClass("visible"),t.find(".cta-button").addClass("hidden"),t.find(".close-message-model").removeClass("hidden"),t.show()):(s.push(JSON.stringify(a)),u.shortListedVehicle.push(a),sessionStorage.setItem("shortList",s),T(e.currentTarget).addClass("hidden"),T(e.currentTarget).siblings(".removeFromShortList").removeClass("hidden")),D(o+":quick view:cta",o+":quick view:add to shortlist","quickViewShortList")},c.removeFromShortList=function(e){T(e.currentTarget).hasClass("removeFromShortList")?(i=u.modelView,D(o+":quick view:cta",o+":quick view:remove from shortlist","quickViewShortList")):0<T(e.currentTarget).parents(".shortList").length?(t=(i=T(e.currentTarget).parents(".grid-holder").data("shortlisted")).modelName,P("removeSingleVehicleShortList",t=null!=typeof i.nameplateKey&&""!=i.nameplateKey?"ford "+i.nameplateKey:t)):i=T(e.currentTarget).parents(".offerModelList").data("offermodeldata");var t=T(".overlay-container-special-offer.removeFromShortList");t.find(".cta-button").addClass("hidden"),t.find(".remove-yes-confirmation").removeClass("hidden"),t.find(".remove-no-confirmation").removeClass("hidden"),t.addClass("visible"),t.show()},c.showShortListedVehicle=function(){T("input[name='shortList']");var e,t=T(".shortList.section");c.shortlist=!1,t.parents(".overlay-container-special-offer").addClass("visible"),t.parents(".overlay-container-special-offer").show(),0===s.length?(T(".noShortListMessage").removeClass("hidden"),T(".exploreAllShortlist").addClass("hidden"),T(".removeAll").addClass("hidden")):(T(".noShortListMessage").addClass("hidden"),T(".exploreAllShortlist").removeClass("hidden"),T(".removeAll").removeClass("hidden"),u.isMobile||(e=[],t.find(".shortlist-holder .columns .grid-holder").each(function(){e.push(T(this).height())}),t.find(".shortlist-holder .columns .grid-holder").each(function(){T(this).height(Math.max.apply(null,e)+"px")}))),T("input[name='shortList']").prop("checked",!1),sessionStorage.setItem("shortListedDataToAdd","["+sessionStorage.getItem("shortList")+"]"),P("shortList")},c.enquireAll=function(){P("enquire")},c.removeAllShortList=function(){var e=T(".overlay-container-special-offer.removeAllFromShortList");e.find(".cta-button").addClass("hidden"),e.find(".removeAll-yes-confirmation").removeClass("hidden"),e.find(".removeAll-no-confirmation").removeClass("hidden"),e.addClass("visible"),e.show(),P("removeAllVehicleShortList")},c.removeYesConfirmation=function(e){for(var t=u.shortListedVehicle.length;t--;)i.modelName===u.shortListedVehicle[t].modelName&&i.modelID===u.shortListedVehicle[t].modelID&&i.offerPrice===u.shortListedVehicle[t].offerPrice&&(s.splice(t,1),u.shortListedVehicle.splice(t,1),sessionStorage.setItem("shortList",s),sessionStorage.setItem("removeSingleVehicle",i.modelName),T(".addToShortList").removeClass("hidden"),T(".removeFromShortList").addClass("hidden"));0===s.length?(T(".noShortListMessage").removeClass("hidden"),T(".exploreAllShortlist").addClass("hidden"),T(".removeAll").addClass("hidden")):(T(".noShortListMessage").addClass("hidden"),T(".exploreAllShortlist").removeClass("hidden"),T(".removeAll").removeClass("hidden"));var a=T(".overlay-container-special-offer.removeFromShortList");a.removeClass("visible"),a.hide(),D(o+":shortlist:{remove vehicle | remove all vehicles}:cta",o+":shortlist:remove vehicle:yes","removeVehicleYes")},c.removeAllYesConfirmation=function(e){s=[],u.shortListedVehicle=[],sessionStorage.removeItem("shortList"),T(".addToShortList").removeClass("hidden"),T(".removeFromShortList").addClass("hidden"),T(".noShortListMessage").removeClass("hidden"),T(".exploreAllShortlist").addClass("hidden"),T(".removeAll").addClass("hidden");var t=T(".overlay-container-special-offer.removeAllFromShortList");t.removeClass("visible"),t.hide(),D(o+":shortlist:{remove vehicle | remove all vehicles}:cta",o+":shortlist:remove all vehicles:yes","removeAllVehiclesYes")},c.hideModel=function(e){var t=T(e.currentTarget).parents(".overlay-container-special-offer");t.scrollTop(0),t.removeClass("visible"),t.hide(),T("body").removeClass("au-special-offer-overlay"),"ENQUIRE"===T(e.currentTarget).text()&&P("enquire")},T(window).on("onoverlayload",function(){var e,t,i;void 0!==T('[name="redesignForms"]').val()&&"redesignForms"===T('[name="redesignForms"]').val()&&(N.getFormWizardEvents().init(),P("enquire")),e=T(".special-offer-container").siblings(".overlay-container"),t=JSON.parse(sessionStorage.getItem("shortListedDataToAdd")),i="",T.each(t,function(e,t){var a=t.modelName,e=(null!=typeof t.nameplateKey&&""!=t.nameplateKey&&(a="ford "+t.nameplateKey),i=(i=(i=(i=i+"<p style='margin:15px 0'> <strong>"+T("input[name='deal']").val()+" "+(e+1)+": </strong></p>")+"<p style='margin:0'> "+T("input[name='nameplate']").val()+": "+a+"</p>")+"<p style='margin:0'> "+T("input[name='model']").val()+": "+t.modelID+"</p>")+"<p style='margin:0'> "+T("input[name='fromOnly']").val()+": "+t.offerPrice+" ",T("input[name='perMonth']").val());t.isOfferPerMonth?i=i+e+"</p>":i+="</p>",t.depositAmt&&t.depositorFutureGuarntText&&(i=i+"<p style='margin:0'> "+t.depositorFutureGuarntText+": "+t.depositAmt+"</p>"),T.each(t.specifications,function(e,t){t.interestRate&&(i=i+"<p style='margin:0'> "+T("input[name='interestRate']").val()+": "+t.interestRate+"</p>"),t.deposit&&(i=i+"<p style='margin:0'> "+T("input[name='depositLabel']").val()+": "+t.deposit+"</p>"),t.retailPrice&&(i=i+"<p style='margin:0'> "+T("input[name='retailPrice']").val()+": "+t.retailPrice+"</p>"),t.vehiclePrice&&(i=i+"<p style='margin:0'> "+T("input[name='vehiclePrice']").val()+": "+t.vehiclePrice+"</p>"),t.pricePaid&&(i=i+"<p style='margin:0'> "+T("input[name='pricePaid']").val()+": "+t.pricePaid+"</p>"),t.extras&&(i=i+"<p style='margin:0'> "+T("input[name='extras']").val()+": "+t.extras+"</p>"),t.loanAmount&&(i=i+"<p style='margin:0'> "+T("input[name='loanAmount']").val()+": "+t.loanAmount+"</p>"),t.gfv&&(i=i+"<p style='margin:0'> "+T("input[name='guaranteedFutureValue']").val()+": "+t.gfv+"</p>"),t.residueValue&&(i=i+"<p style='margin:0'> "+T("input[name='residueValue']").val()+": "+t.residueValue+"</p>"),t.totalRepayment&&(i=i+"<p style='margin:0'> "+T("input[name='totalRepayment']").val()+": "+t.totalRepayment+"</p>"),t.term&&(i=i+"<p style='margin:0'> "+T("input[name='term']").val()+": "+t.term+"</p>"),t.annualMileage&&(i=i+"<p style='margin:0'> "+T("input[name='annualMileage']").val()+": "+t.annualMileage+"</p>")}),i+="<p style='margin:0'> </p>"}),0<e.length&&e.hasClass("visible")&&T("<input/>",{value:i,name:"ENQUIREDVEHICLESDETAILS",type:"hidden"}).appendTo(e.find("form"))})}}),define("help-me-choose/component.helpMeChoose.app",["angular"],function(e){return e.module("helpMeChoose",["ngSanitize"])}),define("help-me-choose/component.helpMeChoose.controllers",["help-me-choose/component.helpMeChoose.app","help-me-choose/controllers/helpMeChoose.controller.main","help-me-choose/controllers/helpMeChoose.controller.FDS","analytics/analyticsEventLayer","analytics/events/helpMeChooseEvents"],function(e,t,a,i,s){e.controller("HelpMeChooseCtrl",["$scope","$window","$compile","$timeout",t]),e.controller("HelpMeChooseFDSCtrl",["$scope","$window","$compile","$timeout",a]),e.controller("advHelpMeChoose",["$scope",function(r){let i=$(".adv-filter-data").data("advdatafilter")||{},l=window.matchMedia("(max-width: 767px)"),n=$(".adv-filter-data").data("price-symbol")||"",e=$.cookie("ADFS-credential")?$.cookie("ADFS-credential"):"",t=$(".adv-filter-data").data("bslcookie")?$(".adv-filter-data").data("bslcookie"):"",o=i.alldata?.filter((e,t)=>{let a=JSON.stringify(e);return t===i.alldata.findIndex(e=>JSON.stringify(e)===a)||[]})||{};var a=i.filterdata||{};r.totalProducts=0,r.ecomModel=[],r.modelKey="",r.headerParam={},r.helpMeChoosemainObj={modelArray:[],styleArray:[],styleObj:{},costArray:[],costObj:{},commonProdDisp:[],mulProdDisp:[],filteredProducts:[],ecomProd:[],selectedModel:"",selectedStyle:"",selectedCost:"",search:!1},r.helpMeChooseObj={},angular.copy(r.helpMeChoosemainObj,r.helpMeChooseObj),r.setHeaders=function(){r.headerParam={},t&&(r.headerParam={"Content-Type":"application/json",Authorizationtemp:"Bearer "+e})},r.reset=function(){angular.copy(r.helpMeChoosemainObj,r.helpMeChooseObj)},r.clearall=function(e){r.populateModel(),r.mppOnLoad(),$(".selection-advHelp").select2("val",""),$(".multi-prod-disp").hide(),setTimeout(()=>{r.flexSliderLoading(o.length)},300),s.trackAdvHelpMeChooseStep(e)},r.populateModel=function(){if(0!=Object.keys(a).length)for(var e in r.reset(),a)r.helpMeChooseObj.modelArray.push(e)},r.populateModel(),r.populateStyles=function(){for(var e in $(".selection-advHelp.style").select2("val",""),$(".selection-advHelp.cost").select2("val",""),r.helpMeChooseObj.search=!1,r.helpMeChooseObj.styleObj={},r.helpMeChooseObj.styleArray=[],r.helpMeChooseObj.costObj={},r.helpMeChooseObj.costArray=[],r.helpMeChooseObj.selectedStyle="",r.helpMeChooseObj.selectedCost="",a)if(e===r.helpMeChooseObj.selectedModel)for(var t in r.helpMeChooseObj.styleObj=a[e],r.helpMeChooseObj.styleObj)r.helpMeChooseObj.styleArray.push(t)},r.populateCost=function(){for(var e in $(".selection-advHelp.cost").select2("val",""),r.helpMeChooseObj.search=!1,r.helpMeChooseObj.selectedCost="",r.helpMeChooseObj.costObj={},r.helpMeChooseObj.costArray=[],r.helpMeChooseObj.styleObj)if(e===r.helpMeChooseObj.selectedStyle)for(var e in r.helpMeChooseObj.costObj=r.helpMeChooseObj.styleObj[e],r.helpMeChooseObj.costObj)r.helpMeChooseObj.costArray.push(e)},r.enableSearch=function(){""!==r.helpMeChooseObj.selectedCost?r.helpMeChooseObj.search=!0:r.helpMeChooseObj.search=!1},r.populateFilteredProd=function(e){for(var t in s.trackAdvHelpMeChooseStep(e),r.setHeaders(),r.helpMeChooseObj.mulProdDisp=[],r.helpMeChooseObj.filteredProducts=[],r.helpMeChooseObj.costObj)t===r.helpMeChooseObj.selectedCost&&angular.forEach(r.helpMeChooseObj.costObj[t],function(e,t){r.helpMeChooseObj.filteredProducts.push(e),r.buildEcomFilteredValue()});$(".multi-prod-disp").hide(),setTimeout(()=>{r.flexSliderLoading(r.helpMeChooseObj.mulProdDisp.length)},300),r.helpMeChooseObj.search=!1},r.buildEcomFilteredValue=function(){r.helpMeChooseObj.commonProdDisp=[],r.seprateEcomAndBsite(r.helpMeChooseObj.filteredProducts),0<r.helpMeChooseObj.ecomProd.length?(r.modelKeyForURL(r.helpMeChooseObj.ecomProd),r.eComDescribeCall(r.modelKey)):r.helpMeChooseObj.mulProdDisp=r.helpMeChooseObj.commonProdDisp},r.flexSlideNav=function(e){$(".multi-prod-disp.flex-slider .flex-viewport").each(function(e,t){$(".multi-prod-disp.flex-slider .flex-viewport:not(:last)").remove(),$(".multi-prod-disp.flex-slider .flex-control-nav.flex-control-paging:not(:first)").remove()}),$(".multi-prod-disp > ul.flex-direction-nav").each(function(e,t){$(".multi-prod-disp > ul.flex-direction-nav:not(:last)").remove()});var t=$(".multi-prod-disp .flex-viewport li.item-wrapper").length||0,t=(r.totalProducts=Math.ceil(t/e),"<li class='subtitle1-regular-gray adv-slide-paging'><span class='active-slides'>1</span><span> / </span><span>"+r.totalProducts+"</span></li>");$(".multi-prod-disp > ul.flex-direction-nav a.flex-prev").addClass("icon icon-chevron-thin-left disable-arrow").empty(),$(t).insertAfter(".multi-prod-disp > ul.flex-direction-nav li:first"),$(".multi-prod-disp > ul.flex-direction-nav a.flex-next").addClass("icon icon-chevron-thin-right").empty()},r.mppOnLoad=function(){r.helpMeChooseObj.mulProdDisp=[],r.setHeaders(),r.seprateEcomAndBsite(o),0<r.helpMeChooseObj.ecomProd.length?(r.modelKeyForURL(r.helpMeChooseObj.ecomProd),r.eComDescribeCall(r.modelKey)):r.helpMeChooseObj.mulProdDisp=r.helpMeChooseObj.commonProdDisp},r.seprateEcomAndBsite=function(e){r.helpMeChooseObj.commonProdDisp=[],r.helpMeChooseObj.ecomProd=[],e.forEach((e,t)=>{("Ecom"!==e.nameplatevdmkey?(e.ecomVehicle=!1,e.vdm_single_vehicel_currency=n,r.helpMeChooseObj.commonProdDisp):r.helpMeChooseObj.ecomProd).push(e)})},r.modelKeyForURL=function(e){r.modelKey="",e&&e.forEach(e=>{r.modelKey+="&config="+encodeURIComponent(e.modelvdmkey)})},r.eComDescribeCall=function(e){var t=$(".adv-filter-data").data("serviceurl");$.ajax({type:"GET",url:t+e,async:!1,contentType:"application/json; charset=utf-8",dataType:"json",headers:r.headerParam,success:function(e){e.data&&r.buildEcomProdArray(e.data)},error:function(e){console.log({errorResp:e})}})},r.buildEcomProdArray=function(t){for(let[e,i]of Object.entries(t)){let a={},e="";i.features?.selectedByMarketing[0]?.features?e=i?.features?.selectedByMarketing[0]?.features[0]?.name||"":i.features?.selectedByMarketing[0]?.children&&(e=i?.features?.selectedByMarketing[0]?.children[0].features[0]?.name||""),a={nameplatevdmkey:i.props&&i.features?i.props["nameplate-label"]+" "+e:"",url:"",vdm_single_vehicel_imgURL:i?.images?.showroom[0]?.urls?"https:"+i.images.showroom[0].urls[0]:"",vdm_single_vehicel_vehicleName_split1:i?.features?.selectedByMarketing[0]?.features[0]?.desc?.split("</br>")[0]||"",vdm_single_vehicel_vehicleName_split2:i?.features?.selectedByMarketing[0]?.features[0]?.desc?.split("</br>")[1]||"",ecomVehicle:!0,vdm_single_vehicel_startingPrice:i.price?i.price.basePrice?.grossRetail:"",vdm_single_vehicel_currency:n},o.forEach((e,t)=>{e.modelvdmkey===i.config&&(a.url=e.url,r.helpMeChooseObj.commonProdDisp.splice(t,0,a))}),r.helpMeChooseObj.mulProdDisp=r.helpMeChooseObj.commonProdDisp}},r.mppOnLoad(),r.paginationDisplay=function(){$(".multi-prod-disp > ul.flex-direction-nav li a").removeClass("disable-arrow");var e=$(".multi-prod-disp > ol.flex-control-nav li a.flex-active").text();1==e?$(".multi-prod-disp > ul.flex-direction-nav li a.flex-prev").addClass("disable-arrow"):e==r.totalProducts&&$(".multi-prod-disp > ul.flex-direction-nav a.flex-next").addClass("disable-arrow"),$(".multi-prod-disp > ul.flex-direction-nav span.active-slides").text(e)},angular.element(document).ready(function(){r.flexSliderLoading(o.length),$(document).bind("click tap touch touchstart touchend mousedown",".multi-prod-disp > ul.flex-direction-nav li a.flex-prev",function(){r.paginationDisplay()}),$(document).bind("click tap touch touchstart touchend mousedown",".multi-prod-disp > ul.flex-direction-nav li a.flex-next",function(){r.paginationDisplay()})}),r.flexSliderLoading=function(e){var t=".multi-prod-disp",a=($(t).removeData("flexslider"),$(t).flexslider("destroy"),$(".multi-prod-disp.flex-slider").width()),i=!1,n=0,o=a/2;l.matches?(n=2,o=a/2,2<e&&(i=!0)):(l.matches,n=4,o=a/4,4<e&&(i=!0)),$(t).find(".flex-control-nav").remove(),$(t).find(".flex-direction-nav").remove(),$(t).flexslider({animation:"slide",directionNav:!0,slideshow:!1,animationLoop:!1,minItems:n,maxItems:n,itemWidth:o}),$(".multi-prod-disp").show(),i?r.flexSlideNav(n):($(t).find(".flex-control-nav").remove(),$(t).find(".flex-direction-nav").remove())}}]).directive("onError",function(){return{restrict:"A",link:function(e,t,a){t.on("error",function(){t.attr("src",a.onError)})}}})}),define("help-me-choose/component.helpMeChoose",["jquery","angular","isAuthor","help-me-choose/component.helpMeChoose.app","help-me-choose/component.helpMeChoose.controllers"],function(e,a,t,i,n){var o={init:function(){isAuthorMode=t.getAuthorStatus(),e(".help-me-choose, .help-me-choose-fds, .advance-help-me-choose").length&&e(".help-me-choose, .help-me-choose-fds, .advance-help-me-choose").each(function(e,t){a.bootstrap(t,["helpMeChoose"])}),e(".advance-help-me-choose").length&&!isAuthorMode&&e(".selection-advHelp").select2({dropdownCssClass:"selection-advHelp-fds-dropdown"})}};return o}),define("help-me-choose/controllers/helpMeChoose.controller.FDS",["jquery","analytics/analyticsEventLayer","marketConfigGlobal","mediaQuery","analytics/events/helpMeChooseEvents"],function(P,e,t,a,T){return function(l,e,t,a){var s,c,d,u={},i=P(".help-me-choose-fds"),p=((n=P(".help-me-choose-fds span")).attr("data-bpBtn"),n.attr("data-bpLink"),0),m=P(".step.step-2"),h=P(".step.quesblock"),f=n.attr("data-ctaOneType"),g=n.attr("data-ctaOneLabel"),v=n.attr("data-ctaOneLink"),y=n.attr("data-ctaOneOverlay"),b=n.attr("data-ctaTwoType"),w=n.attr("data-ctaTwoLabel"),C=n.attr("data-ctaTwoLink"),k=n.attr("data-ctaTwoOverlay"),S=n.attr("data-currentpage"),o=(i.find(".help-me-result-mobile"),i.find(".help-me-result-desktop"),d=!(c=s=""),P(".help-me-choose-fds").find(".steps").each(function(e,t){var a=P(this).attr("data-stepper");if(1==(d=null==a?!1:d)){p++,s+='<button class="" data-step-num="'+a+'" data-stepper="'+a+'"><span class="lower">'+a+"</span></button>";var a="",i=e+1,n=P(this).attr("data-title"),o=JSON.parse(P(this).attr("data-ques"));c=c+('<div data-step-num="'+i+'" class="btnInnerBox btn-step-'+i+'" '+(a=0!=e?'style="display:none;"':a)+' data-btn-title="'+n+'">')+(' <div class="title secondaryHeadline1-bold-blue">'+i+"."+n+'</div><div class="card-helpmechooseHold">');for(var r=0;r<o.length;r++)c+='<div class="card-helpmechoose"><div class="btnjs" data-step-box = "'+i+'" data-step="'+i+"-"+(r+1)+'" data-step-question="'+o[r].question+'"> <div class="queimghold imgshow"><img src="'+o[r].primaryimage+'" /></div> <div class="queimghold imghide"><img src="'+o[r].hoverimage+'" /><i class="checkmark icon icon-checkmark"></i> </div> <div class="que-details"><div class="subtitle1-bold">'+o[r].question+"</div>",5<o[r].description.length&&(c+='<div class="caption-regular"> '+o[r].description+" </div>"),c=c+" </div></div>"+"</div>";c+="</div></div>"}}),P(".questionCont").append(c),P(".stepper").append(s),{}),n=(P(".btnjs").on("click",function(){var e=parseInt(P(this).data("step-box")),t=e+1,a=P(this).data("step-question"),i=P(this).parent().parent().parent(),n=i.next().data("btn-title"),i=(i.hide().next().show(),P(".help-me-container .header h4").html(n),u["question"+e]=a,P(".stepper button:nth-child("+e+")").removeClass("active").addClass("back"),P(".stepper button:nth-child("+t+")").addClass("active").removeClass("next"),e==p&&(angular.element("#mainDiv").scope().dipModel(),angular.element("#mainDiv").scope().$apply()),P(this).data("step-box")),n=P(this).data("step-question"),a=P(".questionCont .btnInnerBox").length;o["a"+i]=n,T.trackHelpMeChooseStep(i,n),i===a&&(P(".help-me-container .imgbox").off().on("click",function(){T.trackHelpMeChooseAll(o)}),P(".help-me-container .help-me-nameplate a").off().on("click",function(){T.trackHelpMeChooseAll(o)}))}),P(".help-me-configuration").attr("data-helpMeChooseData")),r=window.matchMedia("(max-width: 767px)"),x=JSON.parse(n);function D(e){var a=e,i=a-1;P(".questionCont .btnInnerBox").hide(),P(".questionCont .btnInnerBox:nth-child("+a+")").show(),P(this).addClass("active").removeClass("back"),P(".stepper button").each(function(e,t){i<e&&P(this).removeClass("active back").addClass("next"),1==a&&0==e&&P(this).removeClass("back").addClass("active")}),m.hide(),h.show()}n.filterdata,l.totalProducts=0,l.helpMeChoosemainObj={modelArray:[],modelDisply:[]},l.helpMeChooseObj={},angular.copy(l.helpMeChoosemainObj,l.helpMeChooseObj),l.reset=function(){angular.copy(l.helpMeChoosemainObj,l.helpMeChooseObj)},l.clearall=function(){m.hide(),h.show(),D(1)},l.dipModel=function(){l.helpMeChooseObj.modelDisply=[];for(var e=x,t=[],a=0;a<e.length;a++){for(var i,n=!0,o=1;o<=p;o++){var r="question"+o;if(u[r].toLowerCase().trim()!=e[a][r].toLowerCase().trim()){n=!1;break}}!0===n&&(t.push(e[a]),i={},i=l.creatLink(e[a]),e[a].linktype=i,l.helpMeChooseObj.modelDisply.push(e[a]))}setTimeout(function(){l.flexSliderLoading(l.helpMeChooseObj.modelDisply.length),m.show(),h.hide()},100)},l.creatLink=function(e){e.url;var t,a=e.modelvdmkey,i=e.nameplatevdmkey,e={linkOne:"",linkTwo:""},n="",o="",r="",l="";switch("newpage"===y&&(r=' target="blank" '),"newpage"===k&&(l=' target="blank" '),f){case"build_and_price":t=v+"?n="+i+"&m="+a;break;case"model_compare":t=v+"?m="+a;break;case"latest_offers":t=v+"?offer="+a;break;case"forms":t=v+".html?m="+a;break;case"other":t=S+".html#overlay"+v+"?wcmmode=disabled",n="true"==y?"link-overlay base-url popup-link-initialized":"",o='_link_action="link-overlay"';break;default:t=v}v&&f&&(e.linkOne="<a href='"+t+"' class='fds-primary-button fds-Secondary "+n+"' _link_style='cta-button cta-button-primary' "+o+r+"><span class='cta-text'>"+g+"</span><span class='icon-m-chevron-hover'></span></a>");var s,c="",d="";switch(b){case"build_and_price":s=C+"?n="+i+"&m="+a;break;case"model_compare":s=C+"?m="+a;break;case"latest_offers":s=C+"?offer="+a;break;case"forms":s=C+".html?m="+a;break;case"other":s=S+".html#overlay"+C+"?wcmmode=disabled",c="true"==k?"link-overlay base-url popup-link-initialized":"",d='_link_action="link-overlay"';break;default:s=C}return C&&b&&(e.linkTwo="<a href='"+s+"' class='fds-primary-button fds-Secondary "+c+"' _link_style='cta-button cta-button-primary' "+d+l+"><span class='cta-text'>"+w+"</span><span class='icon-m-chevron-hover'></span></a>"),e},l.flexSlideNav=function(){l.totalProducts=P(".filter-prod-disp > ol.flex-control-nav li").length;var e="<li class='subtitle1-regular-gray adv-slide-paging'><span class='active-slides'>1</span><span> / </span><span>"+l.totalProducts+"</span></li>";P(".filter-prod-disp > ul.flex-direction-nav a.flex-prev").addClass("icon icon-chevron-thin-left disable-arrow").empty(),P(e).insertAfter(".filter-prod-disp > ul.flex-direction-nav li:first"),P(".filter-prod-disp > ul.flex-direction-nav a.flex-next").addClass("icon icon-chevron-thin-right").empty()},l.mppOnLoad=function(){l.helpMeChooseObj.modelDisply=[],l.helpMeChooseObj.modelDisply=x},l.paginationDisplay=function(){P(".filter-prod-disp > ul.flex-direction-nav li a").removeClass("disable-arrow");var e=P(".filter-prod-disp > ol.flex-control-nav li a.flex-active").text();1==e?P(".filter-prod-disp > ul.flex-direction-nav li a.flex-prev").addClass("disable-arrow"):e==l.totalProducts&&P(".filter-prod-disp > ul.flex-direction-nav a.flex-next").addClass("disable-arrow"),P(".filter-prod-disp > ul.flex-direction-nav span.active-slides").text(e)},angular.element(document).ready(function(){l.flexSliderLoading(x.length),P(document).bind("click tap touch touchstart touchend mousedown",".filter-prod-disp > ul.flex-direction-nav li a.flex-prev",function(){l.paginationDisplay()}),P(document).bind("click tap touch touchstart touchend mousedown",".filter-prod-disp > ul.flex-direction-nav li a.flex-next",function(){l.paginationDisplay()})}),l.flexSliderLoading=function(e){var t=".filter-prod-disp",a=(P(t).find(".flex-control-nav").remove(),P(t).find(".flex-direction-nav").remove(),P(t).removeData("flexslider"),!1),i=0,n=window.outerWidth;r.matches?(i=1,n=window.outerWidth,1<e&&(a=!0)):(r.matches,i=2,n=.5*window.outerWidth,2<e&&(a=!0)),P(t).find(".slides > .item").length&&(P(t).flexslider({animation:"slide",directionNav:!0,slideshow:!1,minItems:i,maxItems:i,itemWidth:n,move:0}),a?l.flexSlideNav():(P(t).find(".flex-control-nav").remove(),P(t).find(".flex-direction-nav").remove()))},P(".stepper button").click(function(){P(this).hasClass("back")&&D(P(this).data("step-num"))})}}),define("help-me-choose/controllers/helpMeChoose.controller.main",["jquery","analytics/analyticsEventLayer","marketConfigGlobal","mediaQuery","analytics/events/helpMeChooseEvents"],function(A,e,t,a,I){return function(e,t,a,i){var l,s,c,p={},n=A(".help-me-choose"),o=A(".help-me-choose span"),m=(o.attr("data-bpBtn"),o.attr("data-bpLink"),o.attr("data-cmBtn"),o.attr("data-cmLink"),0),h=A(".step.step-2"),f=A(".step.quesblock"),v=o.attr("data-ctaOneType"),y=o.attr("data-ctaOneLabel"),b=o.attr("data-ctaOneLink"),w=o.attr("data-ctaOneOverlay"),C=o.attr("data-ctaTwoType"),k=o.attr("data-ctaTwoLabel"),S=o.attr("data-ctaTwoLink"),x=o.attr("data-ctaTwoOverlay"),D=o.attr("data-currentpage"),P=n.find(".help-me-result-mobile"),T=n.find(".help-me-result-desktop"),N=(c=!(s=l=""),A(".help-me-choose").find(".steps").each(function(e,t){var a=A(this).attr("data-stepper");if(1==(c=null==a?!1:c)){m++,l+='<button class="active" data-step-num="'+a+'" data-stepper="'+a+'">'+a+"</button>";var a="",i=e+1,n=A(this).attr("data-title"),o=JSON.parse(A(this).attr("data-ques"));s=s+('<div data-step-num="'+i+'" class="btnInnerBox btn-step-'+i+'" '+(a=0!=e?'style="display:none;"':a)+' data-btn-title="'+n+'">')+(" <h4>"+n+'</h4><div class="btns">');for(var r=0;r<o.length;r++)s+='<div class="btn"><button class="btnjs" data-step-box = "'+i+'" data-step="'+i+"-"+(r+1)+'" data-step-question="'+o[r].question+'"> '+o[r].question+" </button>",5<o[r].description.length&&(s+='<p class="desc"> '+o[r].description+" </p>"),s+="</div>";s+="</div></div>"}}),A(".btnsBox").append(s),A(".stepper").append(l),{});function r(e){var a=e-1;A(".btnsBox .btnInnerBox").hide(),A(".btnsBox .btnInnerBox:nth-child("+e+")").show(),A(this).addClass("active").removeClass("back icon-checkmark").text(e),A(".stepper button").each(function(e,t){a<e&&A(this).removeClass("active back icon-checkmark ").addClass("next").text(e+1)}),h.hide(),f.show()}A(".btnjs").on("click",function(){var e=parseInt(A(this).data("step-box")),t=e+1,a=A(this).data("step-question"),i=A(this).parent().parent().parent(),n=i.next().data("btn-title");if(i.hide().next().show(),A(".help-me-container .header h4").html(n),p["question"+e]=a,A(".stepper button:nth-child("+e+")").removeClass("active").addClass("back icon-checkmark").empty(),A(".stepper button:nth-child("+t+")").addClass("active").removeClass("next"),e==m){i=A(".help-me-configuration").attr("data-helpMeChooseData");if(T.empty(),T.removeData("flexslider"),P.empty(),P.removeData("flexslider"),i){for(var o=JSON.parse(i),r=[],l=0;l<o.length;l++){for(var s=!0,c=1;c<=m;c++){var d="question"+c,u=p[d].toLowerCase().trim(),d=o[l][d].toLowerCase().trim();if(u!=d){s=!1;break}}!0===s&&r.push(o[l])}var g="<ul class='slides'>";A.each(r,function(e,t){var a=t.url,i=t.vdm_single_vehicel_vehicleName,n=t.Vdm_single_vehicel_features,o=t.nameplateTitle,r=t.modelvdmkey,l=t.nameplatevdmkey;g=(g=(g=(g=(g=(g+="<li class='item item-wrapper'>")+"<div class='real-car-item'><a title='"+i+"' href='"+a+"' class='imgbox'>")+"<img src='"+t.vdm_single_vehicel_imgURL+"' alt='"+i+"'></a><h5>")+"<a title='"+o+"'>"+o+"</a></h5>")+"<h6 class='help-me-nameplate'><a title='"+i+"' href='"+a+"'  data-relocate='"+a+"'>"+i+"</a>")+"</h6><div class='bp-cm-button'>";var s,c="",d="",t="",o="";switch("newpage"===w&&(t=' target="blank" '),"newpage"===x&&(o=' target="blank" '),v){case"build_and_price":s=b+"?n="+l+"&m="+r;break;case"model_compare":s=b+"?m="+r;break;case"latest_offers":s=b+"?offer="+r;break;case"forms":s=b+".html?m="+r;break;case"other":s=D+".html#overlay"+b+"?wcmmode=disabled",c="true"==w?"link-overlay base-url popup-link-initialized":"",d='_link_action="link-overlay"';break;default:s=b}b&&v&&(g+="<a href='"+s+"' class='cta-button cta-button-primary "+c+"' _link_style='cta-button cta-button-primary' "+d+t+">"+y+"</a>");var u,p="",m="";switch(C){case"build_and_price":u=S+"?n="+l+"&m="+r;break;case"model_compare":u=S+"?m="+r;break;case"latest_offers":u=S+"?offer="+r;break;case"forms":u=S+".html?m="+r;break;case"other":u=D+".html#overlay"+S+"?wcmmode=disabled",p="true"==x?"link-overlay base-url popup-link-initialized":"",m='_link_action="link-overlay"';break;default:u=S}if(S&&C&&(g+="<a href='"+u+"' class='cta-button cta-button-primary "+p+"' _link_style='cta-button cta-button-primary' "+m+o+">"+k+"</a>"),g=g+"</div>"+"<div class='info'>",void 0!==n){g+="<ul>";for(var h=0;h<n.length;h++){var f=n[h].value?" : <b>"+n[h].value+"</b>":"";g+="<li><p>"+n[h].desc+f+"</p></li>"}g+="</ul>"}g+="</div></li>"}),""!==(g+="</ul>")&&void 0!==g&&(T.append(g),T.flexslider({animation:"slide",directionNav:!1,itemWidth:360,slideshow:!1,minItems:3,maxItems:3,move:0})),P.append(g),1<A(".help-me-result-mobile ul.slides > li").length&&P.flexslider({animation:"slide",directionNav:!1,slideshow:!1,move:0,start:function(){var e=[],t=A(".slides .help-me-nameplate"),a=(t.each(function(){e.push(A(this).height())}),e.sort(function(e,t){return e-t}).pop());t.height(a)}}),h.show(),(()=>{var e,t=A(".step-2 .helpme-breadcrumbs"),a=(t.empty(),""),i=(a+="<span class='links'>",1);for(e in p)a+="<a href='#' id='"+i+"'>"+p[e]+"</a> / ",i++;a+="</span>",t.append(a)})(),f.hide()}}n=A(this).data("step-box"),a=A(this).data("step-question"),t=A(".btnsBox .btnInnerBox").length;N["a"+n]=a,I.trackHelpMeChooseStep(n,a),n===t&&(A(".help-me-container .imgbox").off().on("click",function(){I.trackHelpMeChooseAll(N)}),A(".help-me-container .help-me-nameplate a").off().on("click",function(){I.trackHelpMeChooseAll(N)}))}),A(".stepper button").click(function(){A(this).hasClass("back")&&r(A(this).data("step-num"))}),n.on("click",".helpme-breadcrumbs .links a",function(e){e.preventDefault();e=A(this).attr("id");r(parseInt(e))})}}),define("dealer-locator-review/component.dealerLocatorReview.app",["angular"],function(e){return e.module("dealerLocatorReview",["ngSanitize"])}),define("dealer-locator-review/component.dealerLocatorReview.controllers",["dealer-locator-review/component.dealerLocatorReview.app","dealer-locator-review/controllers/dealerLocatorReview.controller.main"],function(e,t){e.controller("DealerLocatorReviewCtrl",["$scope","$http","$window","$compile","$timeout",t])}),define("dealer-locator-review/component.dealerLocatorReview",["jquery","angular","dealer-locator-review/component.dealerLocatorReview.app","dealer-locator-review/component.dealerLocatorReview.controllers"],function(e,a,t,i){var n={init:function(){e(".dealer-locator-review").length&&e(".dealer-locator-review").each(function(e,t){a.bootstrap(t,["dealerLocatorReview"])})}};return n}),define("dealer-locator-review/controllers/dealerLocatorReview.controller.main",["jquery","analytics/analyticsEventLayer","marketConfigGlobal","mediaQuery"],function(m,e,t,a){return function(i,n,e,t,a){var o=this,r=(o.showLoader=!0,m(".dealer-locator-review")),l=(i.countryCode=r.attr("data-country-code"),r.attr("data-reviews-api")),s=r.attr("data-ratings-api"),c=(i.reviewsDateFormat=r.attr("data-date-format")?r.attr("data-date-format"):"dd/MM/yyyy",o.selected={},o.selected.service="",o.selected.sales="",i.pageSize=r.attr("data-page-size"),i.pageNumberSales=1,i.pageNumberService=1,i.totalSalesReviews="",i.totalServiceReviews="",i.currentSalesPages=i.pageSize,i.currentServicePages=i.pageSize,i.totalNoOfSalesPages="",i.totalNoOfServicePages="",l),d=l,r=s;function u(e,t,a){e=e+i.countryCode+"/"+i.rating.dealerId+"?&pageSize="+t+"&pageNumber="+a+"&type=sales";n.get(e).then(function(e){var t=e.data.reviews;0<t.length?(angular.forEach(t,function(e,t){i.salesReviewList.reviews.push(e)}),i.totalSalesReviews=e.data.totalReviewsCount,i.totalNoOfSalesPages=e.data.totalNumberOfPages,parseInt(i.currentSalesPages)>=parseInt(i.totalSalesReviews)&&(i.currentSalesPages=i.totalSalesReviews,i.isSalesButtonVisible=!1),o.isSalesReviewList=!0):(o.isSalesReviewList=!1,o.noSalesReview=!0)},function(e){console.log(e),o.showLoader=!1})}function p(e,t,a){e=e+i.countryCode+"/"+i.rating.dealerId+"?&pageSize="+t+"&pageNumber="+a+"&type=service";n.get(e).then(function(e){var t=e.data.reviews;0<t.length?(angular.forEach(t,function(e,t){i.serviceReviewList.reviews.push(e)}),i.totalServiceReviews=e.data.totalReviewsCount,i.totalNoOfServicePages=e.data.totalNumberOfPages,parseInt(i.currentServicePages)>=parseInt(i.totalServiceReviews)&&(i.currentServicePages=i.totalServiceReviews,i.isServiceButtonVisible=!1),o.isServiceReviewList=!0):(o.isServiceReviewList=!1,o.noServiceReview=!0)},function(e){console.log(e),o.showLoader=!1})}o.tabName="sales",o.isSalesReviewList=!1,o.isServiceReviewList=!1,o.noSalesReview=!1,o.noServiceReview=!1,i.serviceReviewList={},i.serviceReviewList.reviews=[],i.salesReviewList={},i.salesReviewList.reviews=[],i.isSalesButtonVisible=!0,i.isServiceButtonVisible=!0,i.rating=JSON.parse(sessionStorage.getItem("curDealer")),i.dealerName=i.rating.dealerNameVal,i.dealerDistance=i.rating.dealerDistance||"","THE"==i.countryCode&&(i.countryCode="THA"),i.changeTab=function(e){"sales"===(o.tabName=e)&&0<i.salesReviewList.reviews.length?o.isSalesReviewList=!0:o.isSalesReviewList=!1,"service"===e&&0<i.serviceReviewList.reviews.length?o.isServiceReviewList=!0:o.isServiceReviewList=!1},i.loadMore=function(e){"sales"===e?(o.salesFilterValue="",o.selected.sales="",i.pageNumberSales++,i.currentSalesPages=parseInt(i.currentSalesPages)+parseInt(i.pageSize),parseInt(i.currentSalesPages)>=parseInt(i.totalSalesReviews)&&(i.currentSalesPages=i.totalSalesReviews,i.isSalesButtonVisible=!1),u(c,i.pageSize,i.pageNumberSales)):(o.serviceFilterValue="",o.selected.service="",i.pageNumberService++,i.currentServicePages=parseInt(i.currentServicePages)+parseInt(i.pageSize),parseInt(i.currentServicePages)>=parseInt(i.totalServiceReviews)&&(i.currentServicePages=i.totalServiceReviews,i.isServiceButtonVisible=!1),p(d,i.pageSize,i.pageNumberService))},o.filterByUser=function(e){"sales"===e?o.salesFilterValue=o.selected.sales:o.serviceFilterValue=o.selected.service},l=(l=r)+"/"+i.countryCode+"/"+i.rating.dealerId,n.get(l).then(function(e){e=e.data.dealers[0];i.salesrating=e.salesrating,i.salescount=e.salescount,i.servicerating=e.servicerating,i.servicecount=e.servicecount,o.showLoader=!1},function(e){console.log(e),o.showLoader=!1}),u(c,i.pageSize,i.pageNumberSales),p(d,i.pageSize,i.pageNumberService)}}),define("dealer-locator-review-page/component.dealerLocatorReviewPage.app",["angular"],function(e){return e.module("dealerLocatorReviewPage",["ngSanitize"])}),define("dealer-locator-review-page/component.dealerLocatorReviewPage.controllers",["dealer-locator-review-page/component.dealerLocatorReviewPage.app","dealer-locator-review-page/controllers/dealerLocatorReviewPage.controller.Main"],function(e,t){e.controller("DealerLocatorReviewPageCtrl",["$scope","serviceDealerLocatorReviewPage","mapService",t])}),define("dealer-locator-review-page/component.dealerLocatorReviewPage",["jquery","angular","dealer-locator-review-page/component.dealerLocatorReviewPage.app","dealer-locator-review-page/component.dealerLocatorReviewPage.controllers","dealer-locator-review-page/component.dealerLocatorReviewPage.services"],function(e,a,t,i,n){var o={init:function(){e(".dealer-locator-review-full-page").length&&e(".dealer-locator-review-full-page").each(function(e,t){a.bootstrap(t,["dealerLocatorReviewPage"])})}};return o}),define("dealer-locator-review-page/component.dealerLocatorReviewPage.services",["dealer-locator-review-page/component.dealerLocatorReviewPage.app","dealer-locator-review-page/services/dealerLocatorReviewPage.service","dealer-locator-review-page/services/dealerLocatorReviewPage.mapService"],function(e,t,a){e.service("serviceDealerLocatorReviewPage",["$http",t]),e.service("mapService",["$http",a])}),define("dealer-locator-review-page/controllers/dealerLocatorReviewPage.controller.Main",["jquery","configurationProvider"],function(e,t){return function(n,a,e){function t(){n.waitingSales=!0,a.getSalesReviews("sales",n.pageSize,n.pageNumberSales).then(function(e){n.waitingSales=!1,n.waitingSalesLoad=!1,0<e.reviews.length?(n.salesReviews=n.salesReviews.concat(e.reviews),n.isSalesReviewList=!0,n.totalSalesReviews=e.totalReviewsCount,n.totalNoOfSalesPages=e.totalNumberOfPages,parseInt(n.currentSalesPages)>=parseInt(n.totalSalesReviews)&&(n.currentSalesPages=n.totalSalesReviews,n.isSalesButtonVisible=!1)):(n.isSalesReviewList=!1,n.noSalesReview=!0)},function(e){console.warn(e)})}function i(){n.waitingService=!0,a.getSalesReviews("service",n.pageSize,n.pageNumberService).then(function(e){n.waitingService=!1,n.waitingServiceLoad=!1,0<e.reviews.length?(n.serviceReviews=n.serviceReviews.concat(e.reviews),n.isServiceReviewList=!0,n.totalServiceReviews=e.totalReviewsCount,n.totalNoOfServicePages=e.totalNumberOfPages,parseInt(n.currentServicePages)>=parseInt(n.totalServiceReviews)&&(n.currentServicePages=n.totalServiceReviews,n.isServiceButtonVisible=!1)):(n.isServiceReviewList=!1,n.noServiceReview=!0)},function(e){console.warn(e)})}n.pageSize=document.querySelector("[data-page-size]").getAttribute("data-page-size"),n.dateText,n.currentSalesPages=n.pageSize,n.currentServicePages=n.pageSize,n.isSalesReviewList=!1,n.isServiceReviewList=!1,n.noServiceReview=!1,n.noSalesReview=!1,n.pageNumberSales=1,n.pageNumberService=1,n.totalSalesReviews="",n.totalServiceReviews="",n.salesReviews=[],n.serviceReviews=[],n.totalNoOfSalesPages="",n.totalNoOfServicePages="",n.isSalesButtonVisible=!0,n.isServiceButtonVisible=!0,n.tabName="sales",n.googleApiReady=!1,n.allDealerInformationReady=!1,n.dealerRatingReady=!1;var o,r=(r=window.location.href).split("/"),l=(r=decodeURI(r[r.length-2]),this.changeTab=function(e){"sales"===(n.tabName=e)&&0<n.salesReviews.length?n.isSalesReviewList=!0:n.isSalesReviewList=!1,"service"===e&&0<n.serviceReviews.length?n.isServiceReviewList=!0:n.isServiceReviewList=!1},this.getNumberOffDays=function(e){var e=new Date(e),t=new Date,t=Math.abs(t-e),e=Math.floor(t/864e5),a=Math.floor(t/36e5),i=Math.floor(t/1e3/60),t=Math.floor(t/1e3);return 0!=e&&48<a?(n.dateText=document.querySelector("[data-days-text]").getAttribute("data-days-text"),e):a<=48&&0!=a?(n.dateText=document.querySelector("[data-hours-text]").getAttribute("data-hours-text"),a):a<=0&&0!=i?(n.dateText=document.querySelector("[data-min-text]").getAttribute("data-hours-text"),i):i<=0&&0!=t?(n.dateText=document.querySelector("[data-sec-text]").getAttribute("data-hours-text"),t):void 0},this.checkIfHasName=function(e,t,a){return-1!==t.indexOf(a)?"<b>"+t+"<b>":"<b>"+e+a+"</b>  - "+t},function(e){return-1===e.indexOf("://")?"http://"+e:e}),s=function(e,t,a){t={location:{lat:t.Latitude,lng:t.Longitude},infoWindowMarkup:"",callback:null};e.setBounds(a),e.displayDealers([t]),e.setCenter(t.location),e.setZoom(14)};this.loadMore=function(e){("sales"===e?(n.waitingSalesLoad=!0,n.pageNumberSales++,n.currentSalesPages=parseInt(n.currentSalesPages)+parseInt(n.pageSize),parseInt(n.currentSalesPages)>=parseInt(n.totalSalesReviews)&&(n.currentSalesPages=n.totalSalesReviews,n.isSalesButtonVisible=!1),t):(n.waitingServiceLoad=!0,n.pageNumberService++,n.currentServicePages=parseInt(n.currentServicePages)+parseInt(n.pageSize),parseInt(n.currentServicePages)>=parseInt(n.totalServiceReviews)&&(n.currentServicePages=n.totalServiceReviews,n.isServiceButtonVisible=!1),i))()},a.getDealerRating().then(function(e){n.salesrating=e.salesrating,n.salescount=e.salescount,n.servicerating=e.servicerating,n.servicecount=e.servicecount,n.dealerRatingReady=!0},function(e){console.warn(e)}),t(),i(),e.initMap(),(o=e.getMap()).geocodeLocation(r,function(t){1<=t.length&&a.getUserInformation(t[0].lat,t[0].lng).then(function(e){s(o,e[0],t),n.dealerName=e[0].DealerName,n.dealerAddress=[e[0].AddressLine1,e[0].AddressLine2,e[0].AddressLine3],n.dealerPhone=e[0].PrimaryPhone,n.dealerWebsite=l(e[0].PrimaryURL),n.dealerServiceWebsite=l(e[0].ServiceURL),n.dealerInventoryWebsite=l(e[0].InventoryURL),n.urlDirection=a.getURLDirection([e[0].AddressLine1,e[0].AddressLine2,e[0].AddressLine3],t[0].lat,t[0].lng),n.allDealerInformationReady=!0},function(e){console.warn(e)})})}}),define("dealer-locator-review-page/services/dealerLocatorReviewPage.mapService",["dealerlocator/google-maps"],function(r){return function(e){var t,a=document.querySelector("[data-market-code]").getAttribute("data-market-code"),i=document.querySelector("[data-key-code]").getAttribute("data-key-code"),n=document.querySelector("[data-locale]").getAttribute("data-locale"),o=new r({language:n,countryCode:a,countryCodes:a,imagePath:"/etc/designs/guxfoap/clientlibs/guxfoap-dealerlocator/img/dealerlocator/",countryBounds:"",autocompleteCallbackURL:"",autocompleteCallbackName:"",keyCode:i});this.initMap=function(){o?t=new o.map(document.getElementById("map-container"),{disableBusinessPOI:!0}):$log.debug("Failed to initalized maps API")},this.getMap=function(){return t}}}),define("dealer-locator-review-page/services/dealerLocatorReviewPage.service",[],function(){return function(i){var n=(n=window.location.href).split("/"),o=document.querySelector("[data-iso3-market-code]").getAttribute("data-iso3-market-code"),a=document.querySelector("[data-language-code]").getAttribute("data-language-code"),r=document.querySelector("[data-key-code]").getAttribute("data-key-code"),l=decodeURI(n[n.length-2]),e=(n=n[n.length-1],document.querySelector("[data-ratings-api]").getAttribute("data-ratings-api")),s=document.querySelector("[data-reviews-api]").getAttribute("data-reviews-api"),t=e+o+"/"+n;this.getURLDirection=function(e,t,a){for(var i="",n=0;n<e.length;n++)0<e[n].length&&(i+=e[n]+"/");return"https://www.google.com/maps/dir/"+l+"/"+i+"@"+t+","+a},this.getUserInformation=function(e,t){return i({url:"https://spatial.virtualearth.net/REST/v1/data/1652026ff3b247cd9d1f4cc12b9a080b/FordEuropeDealers_Transition/Dealer?spatialFilter=nearby("+e+","+t+",100)&$select=*,__Distance&$filter=CountryCode%20Eq%20%27"+o+"%27%20And%20Language%20Eq%20%27"+a+"%27%20And%20Brand%20Eq%20%27Ford%27&$top=100&$format=json&key="+r+"&$skip=0",method:"GET"}).then(function(e){return e.data.d.results.filter(function(e){return e.DealerID===n})},function(e){return e})},this.getDealerRating=function(){return i({url:t,method:"GET"}).then(function(e){return e.data.dealers[0]},function(e){return e})},this.getSalesReviews=function(e,t,a){return i({url:s+o+"/"+n+"?&pageSize="+t+"&pageNumber="+a+"&type="+e,method:"GET"}).then(function(e){return e.data},function(e){return e})}}}),define("help-me-choose-latam/component.helpMeChooseLatam.app",["angular"],function(e){return e.module("helpMeChooseLatam",["ngSanitize"])}),define("help-me-choose-latam/component.helpMeChooseLatam.controllers",["help-me-choose-latam/component.helpMeChooseLatam.app","help-me-choose-latam/controllers/helpMeChooseLatam.controller.main"],function(e,t){e.controller("HelpMeChooseLatamCtrl",["$scope","$window","$compile","$timeout",t])}),define("help-me-choose-latam/component.helpMeChooseLatam",["jquery","angular","help-me-choose-latam/component.helpMeChooseLatam.app","help-me-choose-latam/component.helpMeChooseLatam.controllers"],function(e,a,t,i){var n={init:function(){e(".help-me-choose-latam").length&&e(".help-me-choose-latam").each(function(e,t){a.bootstrap(t,["helpMeChooseLatam"])})}};return n});var Toogle={manageFields:function(e){for(var t=e.findParentByType("panel").findByType("dialogfieldset"),a=t.length,i=e.getValue(),n=0;n<a;n++){var o=t[n];i===o.getItemId()?o.show():o.hide()}}};define("help-me-choose-latam/controllers/helpMeChooseLatam.controller.main",["jquery","analytics/analyticsEventLayer","marketConfigGlobal","mediaQuery"],function(v,e,t,a){return function(e,t,a,i){var n=v(".help-me-choose-latam"),o=(f(n,"data-helpMeChooseData","help-me-configuration"),f(n,"data-helpmechoosedata","help-me-configuration-recomendations")),r=v(".step.step-0"),l=v(".step.step-1"),s=v(".step.step-2"),c=v(".step.step-3"),d=v(".step.step-0 button"),u=v(".step.step-1 button"),p=v(".step.step-2 button"),m=n.find(".help-me-result-desktop"),h="";function f(e,t,a,i){var e=v(e).find("."+a);if(e.length){a=e.attr(t);if(void 0!==(e=a)&&!1!==e&&""!==e){if(void 0!==i&&!1!==i)return a;t=JSON.parse(a);if(!v.isEmptyObject(t))return t}}return!1}function g(e){e=e.closest(".step").next();v(".stepper>button").eq(v(".help-me-container .step").index(e)-1).removeClass("active").addClass("back icon-checkmark").empty(),v(".stepper>button").eq(v(".help-me-container .step").index(e)).addClass("active").removeClass("next")}e.init=function(){},d.click(function(e){e.preventDefault(),h+=v(this)[0].getAttribute("data-question"),r.hide(),l.show(),g(v(this))}),u.click(function(e){e.preventDefault(),h+=v(this)[0].getAttribute("data-question"),l.hide(),s.show(),g(v(this))}),p.click(function(e){e.preventDefault(),h+=v(this)[0].getAttribute("data-question"),s.hide(),c.show(),g(v(this))}),n.on("click",".step.step-2 button",function(e){e.preventDefault(),m.empty();var a="";0!==o.length&&(a+="<ul class='slides'>",v.each(o,function(e,t){t.answerId==h&&(a=(a=(a=(a=(a=(a+="<li class='item item-wrapper'><div class='real-car-item'><div class='spliter-image'>")+"<a title='"+t.result_link+"' href="+t.result_link+"'>")+"<img src="+t.result_image+" alt='"+t.result_text+"'></a></div><div class='spliter-text'><h5>")+t.result_text+"</h5>")+"<p>"+t.result_product+"</p>")+"<a class='cta-button cta-button-primary' href="+t.result_link+" tabindex='0'>"+t.result_text_link+"</a></div></div></li>")}),""!==(a+="</ul>"))&&void 0!==a&&m.append(a)}),n.on("click",".header .stepper .back",function(e){e.preventDefault(),currBtn=v(this),indx=v(this).index(".back"),e=indx,v(".stepper>button").eq(e).removeClass("back icon-checkmark").addClass("active").text(e+1),v(".stepper>button").eq(e+1).hasClass("active")?v(".stepper>button").eq(e+1).removeClass("active").addClass("next"):(v(".stepper>button").eq(e+1).removeClass("back icon-checkmark").addClass("next").text(e+2),v(".stepper>button").eq(e+2).removeClass("back icon-checkmark").addClass("next").text(e+2),v(".stepper>button").eq(e+2).removeClass("active").addClass("next").text(e+3)),0===e&&(h="",r.show(),l.hide(),s.hide(),c.hide()),1===e&&(h=2==h.length?h.slice(0,-1):h.slice(0,-2),r.hide(),l.show(),s.hide(),c.hide()),2===e&&(h=h.slice(0,-1),r.hide(),l.hide(),s.show(),c.hide())})}}),define("redesign-forms/component.bookTestDrive",["jquery","form/component.form.validation","form/component.form.recaptcha","form/component.form.dropdowncustomize","form/component.form.dropdowncustomizemap","form/component.form.radiobuttonsbrochure","form/component.form.radiobuttons","marketConfigGlobal","analytics/analyticsEventLayer","utils/getParamValue","cookie","mediaQuery"],function(q,i,n,o,r,l,s,j,H,K,z,d){var e={};function t(){var S,t,x,D,e,P=q(".multi-step-form"),a=P.attr("data-summaryjson"),T=jQuery.parseJSON(a),a=q(".multi-step-form .form-splitter .back.section"),i=q(".multi-step-form .form-splitter .next.section"),n=q(".multi-step-form .form-splitter .cancel .form-cancel button[type='reset']"),N={step2:[],step3:[],step4:[]},A=P.find('[name="INDIVIDUAL_CUST_TITLE"]'),I=P.find('[name="INDIVIDUAL_CUST_FIRST_NAME"]'),$=P.find('[name="INDIVIDUAL_CUST_LAST_NAME"]'),L=P.find('[name="MOBILE_PHONE_NUMBER"]'),M=P.find('[name="PRIMARY_EMAIL"]'),O=P.find('[name="validatedEmail"]'),E=P.find('[name="VOI_MODEL_DESCRIPTION"]')||P.find('[name="nameplateName"]')||"",F=P.find('[name="VOI_SERIES_DERIVATIVE_DESCRIPTION"]'),_=P.find('[name="IN_MARKET_DATE"]'),R=P.find("#mini-lad-input"),V=P.find('[name="OTHER_DEALER_CODE"]'),o="mobile"===d.getMediaType(),r=q(o?".multi-step-form .form-splitter .mobile .next.section":".multi-step-form .form-splitter .desktop .next.section"),o=K.byName("step"),l=""!=z.getCookie("tdformdata")&&JSON.parse(z.getCookie("tdformdata")),B=c("did"),U=c("add");"true"===_.attr("data-enable-custom-months")&&q("select[name='IN_MARKET_DATE'] option").each(function(){q(this).attr("data-match",this.text)}),null!=o&&0!=o&&l&&l.step2.length&&(o=l.step2[0],A.val(o.title).trigger("change"),I.val(o.fname).trigger("change"),$.val(o.lname).trigger("change"),L.val(o.mobile).trigger("change"),M.val(o.email).trigger("change"),O.val(o.confirmemail).trigger("change"),setTimeout(function(){r.eq(0).click()},10),setTimeout(function(){var e;l&&l.step3.length&&(e=l.step3[0],E.val(e.model).trigger("change"),F.val(e.series).trigger("change"),_.val(e.marketdate).trigger("change"),R.val(e.dealer.address).trigger("change"),e=document.getElementById("initMap"))&&e.click(),l&&l.step4.length&&(e=l.step4[0],V&&V.val(e.preferredDealer).trigger("change"),r.eq(1).click())},1100)),q(".test-drive-complete",P).hide(),q("#bookingDetails",P).hide(),q("#dealerDetails",P).hide(),q("#contactInformation",P).hide(),"OB"==q('[name="FORM_TYPE"]').val()&&(q(".multi-step-form").addClass("redesign-forms-online-booking"),o=q(".multi-step-form").find(".summary"),e=q(".multi-step-form").find(".bt-drop-in-wrapper"),o&&(q(o).next().addClass("summary-sub-sec"),q(o).parents(".form-splitter").addClass("form_splitter_summary")),e)&&q(e).parents(".form-splitter").addClass("form_splitter_payment");P.find("[data-customform]").length<=1&&q("#showStepper",P).hide();var s=q(".online-booking-model-details-wrapper").data("enable-auto-fill-online-booking-form");function c(e,t){t=t||window.location.href,e=e.replace(/[\[\]]/g,"\\$&");e=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return e?e[2]?decodeURIComponent(e[2].replace(/\+/g," ")):"":null}D=1,inMarktFlg=!0,i.on("click",function(e){e.preventDefault(),(S=q(this).closest(".form-splitter")).find("input").blur(),S.find("select").each(function(){""==q(this).val()&&q(this).trigger("change")});var t=S.find(".form-mini-dealer-locator");if(0!==q(".form-mini-dealer-locator").length&&0<t.length&&!1===q(".form-mini-dealer-locator .search-block .input-field").hasClass("error")&&0==q(".seldeltitle").length)q(".form-mini-dealer-locator .search-button").trigger("click"),"za"===j.getCurrentMarketCode()||"au"===j.getCurrentMarketCode()?q(".error-msg-sa").show():q(".form-mini-dealer-locator .search-block .input-field").addClass("error"),q("#selected-dealer-info p").show();else{if(q(".error").is(":visible"))return!1;x=S.next(),q(".multi-stepper ul>li").eq(q(".multi-step-form .form-splitter").index(x)-1).removeClass("active").addClass("done"),q(".multi-stepper ul>li").eq(q(".multi-step-form .form-splitter").index(x)).addClass("active").removeClass("next"),q(".multi-stepper ul>li").eq(q(".multi-step-form .form-splitter").index(x)+1).addClass("next"),D++;var a,t=q(".multi-stepper ul>li.active").data("stepdescription"),t=(H.getFormWizardEvents().formMultiStepNext(t,D),x.show(),S.hide(),x.find(".form-mini-dealer-locator").length),i=q("body").find("#enableHomePageComponent").attr("data-homepageenabled");switch(0!==q(".form-mini-dealer-locator").length&&0<t&&R&&B&&B.length&&setTimeout(function(){R.val(U).trigger("change"),document.getElementById("initMap").click()},600),"true"===_.attr("data-enable-custom-months")&&"true"==i&&inMarktFlg&&(q("select[name='IN_MARKET_DATE'] option").length<1&&(t=(n=_).data("months"),i=[],o=["January","February","March","April","May","June","July","August","September","October","November","December"],i=(e=>{var t,a,i,n,o,r=[];t=new Date,a=t.getFullYear(),i=t.getMonth(),n=t.getDate();for(var l=0;l<=e;l++)o=new Date(a,i,n),diff=o.getDate(),o.setMonth(o.getMonth()+ +l),o.getDate()!==diff&&o.setDate(0),r.push(o);return r})(t-1),q.each(i,function(e,t){var a=t.getMonth(),t=t.getFullYear(),i=a+1;n.append(q('<option value="01'+(i=i<10?"0"+i:i)+t+'">'+o[a]+" "+t+"</option>"))})),q("select[name='IN_MARKET_DATE']").select2(),q("select[name='IN_MARKET_DATE'] option").each(function(){q(this).attr("data-match",this.text)}),inMarktFlg=!1),q(".form-dropdown-v2 select").length&&q(".form-dropdown-v2 select").select2(),q("html, body").animate({scrollTop:0},"slow"),D){case 2:N.step2.length?((a=N.step2[0]).title=A.val(),a.fname=I.val(),a.lname=$.val(),a.mobile=L.val(),a.email=M.val(),a.confirmemail=O.val()):N.step2.push({title:A.val(),fname:I.val(),lname:$.val(),mobile:L.val(),email:M.val(),confirmemail:O.val()});break;case 3:N.step3.length?((a=N.step3[0]).model=E.val(),a.series=F.val(),a.marketdate=_.val(),a.dealer.address=R.val(),a.dealer.index=q(document).find('#map-container .map-marker[data-marker="active"]').index()):N.step3.push({model:E.val(),series:F.val(),marketdate:_.val(),dealer:{address:R.val(),index:q(document).find('#map-container .map-marker[data-marker="active"]').index()}});break;case 4:N.step4.length?(a=N.step4[0]).preferredDealer=V.val()||"":N.step4.push({preferredDealer:V.val()||""})}var n,o,t=K.byName("VOI_MODEL_DESCRIPTION")||K.byName("nameplateName")||"",i=E.val();if(""!=(t=""!=i?i:t)){i=window.location.href,i=encodeURIComponent(i.includes("?")?i+"&step="+D:i+"?step="+D);try{FPS.set([FPS.lib.ActionNameplate("","Ford",t,FPS.actions.ScheduleTestDrive,i)],{success:function(){z.setCookie("tdformdata",JSON.stringify(N),1)},error:function(e){console.warn(e)}})}catch(e){console.warn(e)}}if(x.hasClass("form_splitter_summary")){var r='<div class="test-drive-complete"><div class="form-test-drive"><div class="test-drive-details"><div class="redesign-form-details">',l=q.parseJSON(sessionStorage.getItem("BNP.MODELDATA.OBJ")),s="";if(l){var c,s=s+'<div class="booking-details com-mar">'+("<h5>"+q(".test-drive-bnp-details").data("vehicle-info-title")+"</h5>");for(c in l)if(("modelName"==c||"engine"==c||"color"==c||"accessories"==c||"options"==c)&&1<l[c].length){var d="";switch(c){case"modelName":d=q(".test-drive-bnp-details").data("bnp-modelname");break;case"engine":d=q(".test-drive-bnp-details").data("bnp-engine");break;case"color":d=q(".test-drive-bnp-details").data("bnp-color");break;case"accessories":d=q(".test-drive-bnp-details").data("bnp-accessories");break;case"options":d=q(".test-drive-bnp-details").data("bnp-options")}s=(s=s+"<div>"+("<span>"+d+"</span>"))+('<span class="model">'+l[c]+"</span>")+"</div>"}r+=s+="</div>"}if(0<T.length)for(var u=0;u<T.length;u++){if(r+='<div class="booking-details com-mar">',T[u].summaryname&&(r+="<h5>"+T[u].summaryname+"</h5>"),0<T[u].summaryjson.length)for(var p=0;p<T[u].summaryjson.length;p++){var m=T[u].summaryjson[p].variableValue,h="",h=T[u].summaryjson[p].variableKey?q('[name="'+T[u].summaryjson[p].variableKey+'"]').val():"";""!=m&&""!=h&&(r+='<div><span class="">'+m+'</span><span class="model">'+h+"</span></div>")}r+="</div>"}else for(var f=P.find("[data-customform]"),g=0;g<f.length-1;g++){r+='<div class="booking-details com-mar">';var v=q(f[g]).find(".section");r+="<h5>"+q(v).find("h3:first").text()+"</h5>";for(var y=0;y<=v.length;y++)if(q(v[y]).hasClass("formMiniDealerLocator"))r+='<div><span class="">Dealer Name</span><span class="model">'+q("input[name='dealerName']").val()+'</span></div><div><span class="">Dealer Email</span><span class="model">'+q("span.dealerEmail").text()+"</span></div>";else for(var b=q(q(v[y])).find("label"),w=0;w<=b.length-1;w++){var C=q(b[w]).find("span.title").text();C&&""!==C||(C=q(b[w]).find("input").attr("placeholder"))&&""!==C||0<(k=q(b[w]).find("select")).length&&(C=q(k).find("option:first-child").text());var k=(k=q(b[w]).find("input").not('input[name="recaptcha"]').val())||q(b[w]).find("select").val();C&&k&&(r+='<div><span class="">'+C+'</span><span class="model">'+k+"</span></div>")}r+="</div>"}r+="</div></div></div>",x.find(".summary").html(r)}"OB"==q('[name="FORM_TYPE"]').val()&&H.getFormWizardEvents().onlineBookingFormNext(D)}}),a.on("click",function(e){e.preventDefault(),S=q(this).closest(".form-splitter"),t=S.prev(),q(".multi-stepper ul>li").eq(q(".multi-step-form .form-splitter").index(S)).removeClass("active").addClass("next"),q(".multi-stepper ul>li").eq(q(".multi-step-form .form-splitter").index(S)+1).removeClass("next"),q(".multi-stepper ul>li").eq(q(".multi-step-form .form-splitter").index(S)-1).removeClass("done").addClass("active"),t.show(),S.hide(),D--}),n.on("click",function(e){P.find("select.select2-offscreen").val(null).trigger("change")}),q(document).ready(function(){if(s){var e=q.parseJSON(sessionStorage.getItem("BNP.MODELDATA.OBJ")),t=q(".online-booking-model-details-wrapper").data("voidata");if(e?(q(".online-booking-model-details-wrapper").show(),q(".onlineBooking-modelImage").attr("src",decodeURIComponent(e.modelImage)),q(".onlineBooking-ModelName strong").html(e.nameplate),q(".onlineBooking-ModelName span").html(e.modelName),q(".driveAwayPrice").html(e.netPrice),q(".bookingPrice").html(e.bookingPrice),q(".balancePrice").html(e.balancePrice),q("input[name='Driveaway_Price']").val(e.netPrice),q("input[name='Booking_Price']").val(e.bookingPrice),q("input[name='Balance_Price']").val(e.balancePrice),q("input[name='Driveaway_Price_Number']").val(e.netPrice_Number),q("input[name='Booking_Price_Number']").val(e.bookingPrice_Number),q("input[name='Balance_Price_Number']").val(e.balancePrice_Number),q("input[name='ENQUIRERAQDETAILS']").val(decodeURIComponent(e.bnpURL)),q("input[name='variantVDMKey']").val(e.modelKey),q("input[name='VOI_ENGINE/TRANSMISSION_DESCRIPTION_BP']").val(e.engine),q("input[name='VOI_EXTERIOR_COLOUR_DESCRIPTION_BP']").val(e.color),q("input[name='VOI_ACCESSORIES_BP']").val(e.accessories),q("input[name='VOI_OPTIONS_BP']").val(e.options)):q(".online-booking-model-details-wrapper").empty(),t){for(var a=(e=>{var t,a,i=window.location.search.substring(1).split("&");for(a=0;a<i.length;a++)if((t=i[a].split("="))[0]===e)return void 0===t[1]||decodeURIComponent(t[1])})("m"),i=-1,n=0;n<t.length;n++)if(t[n].vdmkey==a){i=n;break}-1!=i?(e=t[i],q.each(e,function(e,t){q("input[name='"+e+"']").val(t)})):console.log("INVALID VDMKEY PASSED IN PARAMS")}}q(".onlineBooking-modelImage").on("error",function(){q(this).attr("src","/etc/designs/guxfoap/clientlibs/guxfoap/img/car-grayscale.png")})})}return e.init=function(){q(".multi-step-form").each(function(e,t){var a=q(".multi-step-form");q("form:first",a).waitUntilExists(function(){q("form",a).each(function(){i.init(q(this))}),q(".form-recaptcha",a).length&&n.init(),q(".form-first-dropdown").length&&o.init(),q(".first-dropdown").length&&r.init(),q(".form-radioButtons").length&&s.init(),q("input[name=downloadBrochurePath]").length&&l.init()})}),t()},e}),define("quick-build-and-price/component.quickBuildAndPrice",["jquery","angular","jquery-flexslider","marketConfigGlobal","analytics/analyticsEventLayer"],function(c,d,e,t,u){var a={},i=d.module("quickBuildAndPrice",["ngSanitize"]);return i.controller("quickBnp",["$scope","$http","$location","$window","$timeout",function(o,a,i,n,r){o.colorArray=[],o.transmissionArray=[],o.transmission={},o.activeColorCost=0,o.activeTransmissionCost=0;var l=c(".quickBnpContent").data("current-page")+".minibuildandprice.",s=window.matchMedia("(max-width: 767px)");o.serviceLayerUrl=c("#serviceLayerUrl").val(),o.ccISO=c("#countryCodeISO").attr("value"),o.currencyFormatPattern=c("#currencyFormatPattern").val(),o.stockCount=0,o.showStockMessage=!1,o.showFewStockMessage=!1,o.showOutOfMessage=!1,o.showStockCount=!1,o.disableButton=!1,o.preloader=!0,o.transmissionActive=!1,o.selectedTransmission="",o.defaultColorPrice=0,o.bookingEnabled=!1,o.isSelectShowLocation="true"==c("#driveAwayPriceFromPOLK").val(),o.optional_Id,o.transmissionFeatureKey="",o.selected_accessories_Ids=[],o.envType="P",o.hideBuildPrice=!1,o.isMarketMea=!1,o.getUrlParameter=function(e){for(var t,a=(c(".overlay-container").length?window.location.hash:window.location.search.substring(1)).split("&"),i=0;i<a.length;i++)if((t=a[i].split("="))[0]===e)return void 0===t[1]||decodeURIComponent(t[1])},o.getUrlParameter("l")&&o.getUrlParameter("u")?(o.locationCookieValue=o.getUrlParameter("l"),o.locationCookieType=o.getUrlParameter("u")):(o.locationCookieValue=c.cookie("common.location.LOC"),o.locationCookieType=c.cookie("common.location.type")),o.isMobileDevice=function(){return!!s.matches},o.gettingPolkPrice=function(e){o.hideBuildPrice=!0;var t=o.serviceLayerUrl+"/fordowner/vehicle/buildandprice/calcBPDriveAwayPriceForAUS",a=new JSEncrypt,i=[],n=[],e=(i.push(o.vehicleData.models[0].key),n.push(e),{modelKey:i,accessoryIds:o.selected_accessories_Ids,optionIds:n,transmissionFeatureKey:o.transmissionFeatureKey,location:o.locationCookieValue,usageType:o.locationCookieType,env:o.envType,offerPrice:null,isCommercialVehicle:c(document).find(".quickBnpContent").data("iscommercialvehicle")||!1}),i=(a.setPublicKey("MIICIjANBgkqhkiG9w0BAQEFAAOCAg8AMIICCgKCAgEAhEwiQb6EOja2uwwOzfGnppb3fzYzMIV6qJCiKNQkIHvBJle5x3px1+scLLJKBvRewKG55+0Czo99SwqA6juAik0jXXCOIpFGOO7dK4DRFcTU+VCHFXaMinGI3RLkM1QGPieNM2koPqKgnMPP0NsI8DjmKn+xoSX8JboX3sQwEdmiMEfouV6mLttik66K8Ms2ni5uYwAavNhPQncOmLqh8Pfbbe7kjRYdb0BkndTh04qPrPq/S+iREeCbAjleH+vpZv8teqawzdCGpc2uymiijZgqzBmL4hKMMSTCd+7JvbvXEtmmRk+wFIFArMcb/kOXYkAxFF6OSlKBYUhBmyHI7pr9wtXSvTH+GRpOSN4o+I0RKEJFbOzqNkVSsjBq7Hvx5jRiN4ucE69UruavId7eXxcDWo7LWw1VHIC/7pfR/y9QxOib4jCeMcHi4zAB6GSNP13n9kmVoIXqCo6/KqIGpBZLFX2oD47Vux07YTicFsAW6akOuz+YejCIocA35k9YTyMzdU5JnNjXZmeAsRBgwhZ9Re6q/s8Ix7Adz39ruKUoj0iaZhfCo/kjdLGxix/8UwVb0yUb+Il5daYotHNOSfo+0TQKZdAVzbbLm9E51pIOMw5PkRzac0HhD+27koHqvyCCwCRN4lJm5txwOhIVeSBakXqROctRuLvoPYNJCLECAwEAAQ=="),a.encrypt(JSON.stringify(e)));c.ajax({type:"POST",url:t,data:i,success:function(e){200===e.returnCode&&(o.netPrice=parseInt(Math.round(e.vehicle[0].driveAwayPrice)),o.officialPrice=updatePriceFormat(o.netPrice,o.currencyFormatPattern,!0),o.hideBuildPrice=!1,o.$apply())},contentType:"application/json",dataType:"json"})},o.colourChange=function(e){0<e&&u.getQuickBnpEvents().quickBnPContentAction(o.nameplateVDMKey,"colorizer"),o.activeColor=e,o.colorArray&&0<o.colorArray.length?(o.activeColorCost=o.colorArray[e].cost,o.activeColorTitle=o.colorArray[e].featureName,o.isSelectShowLocation?(o.optional_Id=o.colorArray[e].id,o.gettingPolkPrice(o.optional_Id)):(o.netPrice=Number(o.basePrice)+Number(o.colorArray[e].cost)+Number(o.activeTransmissionCost),o.officialPrice=updatePriceFormat(o.netPrice,o.currencyFormatPattern,!0)),o.colorKey=o.colorArray[e].featureKey,o.activeCarouselImage=[],o.activeCarouselImage=[{image:o.colorArray[e].billboardImage}]):o.activeCarouselImage=[{image:o.vehicleData.models[0].imgUrl}],o.activeCarouselImageURL=o.activeCarouselImage[0].image,1==o.bookingEnabled&&(o.bookingAmount=o.vehicleData.models[0].bookingAmount,o.balanceAmount=Number(o.netPrice)-Number(o.bookingAmount),o.formatedBalanceAmount=updatePriceFormat(o.balanceAmount,o.currencyFormatPattern,!0)),1<o.activeCarouselImage.length?(c(".activeCarouselImage .flex-control-nav").remove(),r(function(){c(".activeCarouselImage").each(function(){var e=($targetObj=c(this)).find(".picture-container").length,t=c("body .container").width();s.matches&&(t=360),1<e&&(c(".activeCarouselImage").removeData("flexslider"),$targetObj.flexslider({selector:".slides > .picture-container",animation:"slide",directionNav:!1,slideshow:!1,animationLoop:!1,minItems:1,maxItems:1,move:1,itemWidth:t}))})})):(c(".activeCarouselImage").removeData("flexslider"),c(".activeCarouselImage .flex-control-nav").remove())},o.buttonClick=function(e,t,a){e.preventDefault(),c("body").find(".transmissionError").removeClass("showError");e=c("#transmission :selected").text(),t=c(t).data("configctabutton");if("other"!=t){if("build_and_price"==t)a=a+".html?m="+o.key+"&n="+o.namePlateKey+"&e="+o.colorKey,n.location.href=a;else if("model_compare"==t)a=a+".html?m="+o.key,n.location.href=a;else if("latest_offer"==t)a=a+".html?offer="+o.key,n.location.href=a;else if("online_booking"==t){if(o.transmissionActive&&!e)return c("body").find(".transmissionError").addClass("showError"),!1;a=a+".html?n="+o.namePlateKey+"&m="+o.key;t=i.absUrl(),e={netPrice:o.officialPrice,netPrice_Number:o.netPrice,bookingPrice:updatePriceFormat(o.bookingAmount,o.currencyFormatPattern,!0),bookingPrice_Number:o.bookingAmount,balancePrice:updatePriceFormat(o.balanceAmount,o.currencyFormatPattern,!0),balancePrice_Number:Number(o.balanceAmount),nameplate:o.vehicleData.label,modelName:o.vehicleData.models[0].label,modelKey:o.vehicleData.models[0].key,modelImage:encodeURIComponent(o.activeCarouselImageURL),bnpURL:encodeURIComponent(t),color:o.activeColorTitle,engine:o.selectedTransmission},t=c(".quickBnpOnlineBooking").data("open-in-newtab");n.sessionStorage.setItem("BNP.MODELDATA.OBJ",JSON.stringify(e)),"_self"==t?n.location.href=a:n.open(a,"_blank")}}else n.location.href=a+=".html"},o.calculateTransmissionCost=function(e){u.getQuickBnpEvents().quickBnPContentAction(o.nameplateVDMKey,"engine & transmission"),o.selectedTransmission=c("#transmission :selected").text(),c("body").find(".transmissionError").removeClass("showError"),d.forEach(o.vehicleData.models[0].drive.items,function(e,t){o.selectedTransmission==e.featureName&&(o.activeTransmissionCost=e.cost,o.isSelectShowLocation?(o.transmissionFeatureKey=e.id,o.gettingPolkPrice(o.optional_Id)):(o.netPrice=Number(o.basePrice)+Number(o.activeColorCost)+Number(e.cost),o.officialPrice=updatePriceFormat(o.netPrice,o.currencyFormatPattern,!0)))}),1==o.bookingEnabled&&(o.bookingAmount=o.vehicleData.models[0].bookingAmount,o.balanceAmount=Number(o.netPrice)-Number(o.bookingAmount),o.formatedBalanceAmount=updatePriceFormat(o.balanceAmount,o.currencyFormatPattern,!0))},o.checkMEAmarket=function(){"sa"==t.getCurrentMarketCode()&&c("html").hasClass("market_mea")&&(o.isMarketMea=!0)},c(document).ready(function(){o.checkMEAmarket(),o.getColorData(),0!=!!c.cookie("common.location.LOC")||!o.isSelectShowLocation||o.getUrlParameter("l")||o.getUrlParameter("u")||c(".quickBnpDesktop .location-box a").click()}),c("body").on("click","a.link-overlay",function(e){u.getQuickBnpEvents().trackLocationPopup()}),o.showPage=function(){o.modelDetail=c(".quickBnpContent").data("modeldetail")[0],o.feature=o.getFeatureData(o.modelDetail.features),o.preloader=!1},o.getFeatureData=function(e){var a=[];return e.filter(function(e,t){e.isKeyFeature&&(e={featureDesc:e.desc,featureValue:e.value},a.push(e))}),a},o.getColorData=function(){var e=c(".quickBnpContent").data("modeldetail")[0],t=c(".configNamePlateKey").val(),t=(o.key=c(".quickBnpContent").data("modeldetail")[0].key,o.basePrice=Number(e.startingPrice),1<t.length&&""!==t&&void 0!==t?o.namePlateKey=t:o.namePlateKey=e.namePlateKey,""),t=o.isSelectShowLocation?l+o.namePlateKey+"."+e.key+"."+o.locationCookieValue+"."+o.locationCookieType+".data":l+o.namePlateKey+"."+e.key+".false.data";a({method:"get",url:t}).then(function(e){o.vehicleData=e.data,o.modelAltTxt=e.data.label,o.nameplateVDMKey=e.data.key,e.data.models[0].modelSeries?u.getQuickBnpEvents().quickBnPOnLoad(e.data.categoryName,e.data.key,e.data.models[0].label,e.data.models[0].modelSeries,e.data.year):u.getQuickBnpEvents().quickBnPOnLoad(e.data.categoryName,e.data.key,e.data.models[0].label,"noSeries",e.data.year),o.transmissionActive=c(".quickBnpOnlineBooking").data("enable-transmission"),e.data.models[0]&&e.data.models[0].drive&&e.data.models[0].drive.items&&(o.transmissionArray=e.data.models[0].drive.items,1===o.transmissionArray.length&&(o.transmission=o.transmissionArray[0].featureName,o.selectedTransmission=o.transmissionArray[0].featureName,o.activeTransmissionCost=Number(o.transmissionArray[0].cost),o.transmissionFeatureKey=o.transmissionArray[0].featureKey),o.transmissionActive)&&r(function(){(s.matches?c(".transmission-selection-mobile"):c(".transmission-selection")).select2({dropdownCssClass:"fds-select2 no-search",placeholder:function(){c(this).data("placeholder")}})}),e.data.models[0]&&e.data.models[0].colortrim&&e.data.models[0].colortrim.color&&e.data.models[0].colortrim.color.items&&(o.colorArray=e.data.models[0].colortrim.color.items,o.defaultColorPrice=o.colorArray[0].cost,o.optional_Id=o.colorArray[0].id),o.transmissionActive&&(o.netPrice=Number(o.netPrice)+Number(o.activeTransmissionCost)),o.netPrice=Number(o.defaultColorPrice)+Number(o.basePrice),e.data.models[0]&&e.data.models[0].isOnlineBookingEnabled&&(o.bookingEnabled=o.vehicleData.models[0].isOnlineBookingEnabled),1==o.bookingEnabled&&(o.bookingAmount=o.vehicleData.models[0].bookingAmount,o.balanceAmount=Number(o.netPrice)-Number(o.bookingAmount),o.formatedBalanceAmount=updatePriceFormat(o.balanceAmount,o.currencyFormatPattern,!0),o.getAvailableStock()),o.colourChange(0),c(".quick-button").css("display","block"),c(".initShow").css("display","block")},function(e){console.log(e)}).then(o.showPage)},o.isOnlineBooking=function(){var e=!1;return e=1==o.bookingEnabled?!0:e},o.getStockCount=function(){return o.stockCount},o.getAvailableStock=function(){c.ajax({url:o.serviceLayerUrl+"/fordleads/leads/onlineBooking/stockAvailable",type:"GET",async:!0,data:{modelKey:o.namePlateKey,marketName:o.ccISO},dataType:"json",success:function(e){var t,a,i=c(".quickBnpOnlineBooking").data("show-stockcount");"024"===e.status?o.showStockMessage=!0:"023"===e.status&&(o.stockCount=e.stock,Number(e.stock)<=0?(o.disableButton=!0,o.showOutOfMessage=!0):Number(e.stock)<Number(e.hideAfter)&&0!=Number(e.stock)?o.showFewStockMessage=!0:Number(e.hideAfter)<=Number(e.stock)&&Number(e.stock)<=Number(e.thrashold)&&(o.showStockMessage=!0),1==i)&&(Number(e.stock)<Number(e.thrashold)&&Number(e.hideAfter)<Number(e.stock)?o.showStockCount=!0:o.showStockCount=!1),o.$apply(),c(".quickBnpDesktop .ctaOne .noOverlay").length&&0<c(".quickBnpDesktop .ctaOne .noOverlay").outerWidth()?(t=c(".quickBnpDesktop .ctaOne .noOverlay").outerWidth(),c(".quickBnpDesktop .ctaOne .stockInfo").css("width",t)):c(".quickBnpDesktop .ctaOne .kmiButton").length&&0<c(".quickBnpDesktop .ctaOne .kmiButton").outerWidth()?(t=c(".quickBnpDesktop .ctaOne .kmiButton").outerWidth(),c(".quickBnpDesktop .ctaOne .stockInfo").css("width",t)):c(".quickBnpDesktop .ctaTwo .noOverlay").length&&0<c(".quickBnpDesktop .ctaTwo .noOverlay").outerWidth()?(a=c(".quickBnpDesktop .ctaTwo .noOverlay").outerWidth(),c(".quickBnpDesktop .ctaTwo .stockInfo").css("width",a)):c(".quickBnpDesktop .ctaTwo .kmiButton").length&&0<c(".quickBnpDesktop .ctaTwo .kmiButton").outerWidth()&&(a=c(".quickBnpDesktop .ctaTwo .kmiButton").outerWidth(),c(".quickBnpDesktop .ctaTwo .stockInfo").css("width",a))},error:function(e){console.log(e)}})},o.priceFormat=function(e){return updatePriceFormat(e,o.currencyFormatPattern,!0)},o.backBtnClick=function(){var e=c(".quickHeader .backBtn").data("backurl");window.location.href=e},c("body").on("submit",".selectZipCity form",function(e){e.preventDefault();e=c(this).serializeArray();c.cookie("common.location.LOC",e[1].value),c.cookie("common.location.type",e[0].value),o.getColorData()})}]),i.directive("onError",function(){return{restrict:"A",link:function(e,t,a){t.on("error",function(){t.attr("src",a.onError)})}}}),a.init=function(){c(".quickBnpContent").length&&c(".quickBnpContent").each(function(e,t){d.bootstrap(t,["quickBuildAndPrice"])})},a}),define("custom-redirect-hotlead/customRedirect",["jquery"],function(i){var e={},n=i("#serviceLayerUrl").val(),o=".overlay-content-inner .form ",r="",l=!0,s=!1,c={vehicle:"NULL",version:"NULL",color:"NULL",bonus:"NULL",customerRate:"NULL",term:"NULL",downPayment:"NULL",typeOfTransaction:"NULL"};function d(e){r=document.getElementById("hotlead-endpoint").getAttribute("href");var t,a;switch(e){case"scenario-2":c.vehicle=document.getElementById("nameplateName").textContent;break;case"scenario-3":c.vehicle=document.getElementById("vehicleNameplatePage").getAttribute("data-pagename");break;case"scenario-4":c.vehicle=document.getElementById("nameplateName").textContent,c.version=document.getElementById("versionNamplate").textContent,c.color=document.getElementById("color-name").textContent;break;case"scenario-5":c.vehicle=document.getElementById("nameplateName").getAttribute("data-anpname"),c.version=document.getElementById("select2-chosen-5").textContent,c.customerRate=document.querySelector(".payment-customer-rate").textContent,c.term=document.getElementById("select2-chosen-3").textContent.replace(/\D+/g,""),c.downPayment=document.getElementById("downPayment").getAttribute("data-down-payment")}c.typeOfTransaction=i(o+"input:radio[name=typeOfTransaction]:checked").val(),(e=>{for(value in l=!0,e)if(""===e[value]||null==e[value])return l=!1,i(".form.section").hide(),i("#badAnswerHotLead").show()})(c),l&&(e={},t=document.querySelector("#global-market-configuration .configuration").getAttribute("data-vdmmarket-code"),a=document.querySelector("#global-market-configuration .configuration"),e.marketName=t,e.FORM_TYPE="F_HLD_MX",e.ACTIVITY_TYPE="F_HLD_MX",e.COUNTRY=a.getAttribute("data-market-code"),e.LANGUAGE=a.getAttribute("data-language-code"),e.Vehicle=c.vehicle,e.Version=c.version,e.Color=c.color,e.Bonus=c.bonus,e.CustomerRate=c.customerRate,e.Term=c.term,e.Downpayment=c.downPayment,e.TypeTransaction=c.typeOfTransaction,i.ajax({url:n+"/fordleads/leads/leadInfo/saveLead",type:"GET",dataType:"json",data:{marketName:t,information:JSON.stringify(e),type:"F_HLD_MX",captchaKey:i(o+"input[name='captchaKey']").val(),recaptcha:i(o+"input[name='recaptcha']").val()},success:function(e){switch(e.status){case"001":u(s=!1);break;case"002":s=!0;var t=(e=>{var t,a="";for(t in e)""!=a&&(a+="&"),a+=t+"="+encodeURIComponent(e[t].trim());return a})(c),t=(e=>window.btoa(unescape(encodeURIComponent(e))))(t=t),a=r+"?d="+t;s&&setTimeout(function(){window.open(a,"_blank")},1500),window.focus(),u(!0)}},error:function(e){u(!1)}}))}function u(e){e&&s?(i(".form.section").hide(),i("#goodAnswerHotlead").show()):(i(o+".form-recaptcha label .reCapErr").remove(),i(o+".form-recaptcha label").append('<small class="error reCapErr">'+i(".errRecaptcha").html()+"</small>"),i(o+"#imgRecaptcha").click())}return e.init=function(e){var a;a=e,i(".sendScenarioHotLead").on("click",function(e){e.preventDefault();var e=JSON.parse(i("input[name='typeOfTransaction']").attr("data-validation")),t=JSON.parse(i("input[name='recaptcha']").attr("data-validation"));void 0===i("input:radio[name=typeOfTransaction]:checked").val()?(i(o+".form-radioButtons div .radioErr").remove(),i(o+".form-radioButtons div").append('<small class="error radioErr">'+e.rules[0].message+"</small>")):i(o+".form-radioButtons div .radioErr").remove(),""===i(o+"input[name='recaptcha']").val()?(i(o+".form-recaptcha label .reCapErr").remove(),i(o+".form-recaptcha label").append('<small class="error reCapErr">'+t.rules[0].message+"</small>")):i(o+".form-recaptcha label .reCapErr").remove(),void 0!==i(o+"input:radio[name=typeOfTransaction]:checked").val()&&""!==i(o+"input[name='recaptcha']").val()&&(i(o+".form-radioButtons div .radioErr").remove(),i(o+".form-recaptcha label .reCapErr").remove(),d(a))})},e}),define("tableHistory/component.tableHistory.app",["angular"],function(e){return e.module("tableHistory",[])}),define("tableHistory/component.tableHistory.controllers",["tableHistory/component.tableHistory.app","tableHistory/controllers/tableHistory.controller.Main"],function(e,t){e.controller("MainController",["$scope","serviceTableHistory",t])}),define("tableHistory/component.tableHistory",["jquery","angular","tableHistory/component.tableHistory.app","tableHistory/component.tableHistory.services","tableHistory/component.tableHistory.controllers"],function(e,a,t,i,n){return{init:function(){e("#tableHistory").each(function(e,t){a.bootstrap(t,["tableHistory"])})}}}),define("tableHistory/component.tableHistory.services",["tableHistory/component.tableHistory.app","tableHistory/services/tableHistory.service"],function(e,t){e.service("serviceTableHistory",["$http",t])}),define("tableHistory/services/tableHistory.service",[],function(){return function(t){var a=document.getElementById("serviceLayerUrl").value,i=this;function n(e){e=e.split("/");return e[1]+"/"+e[0]+"/"+e[2]}i.get=function(e){return t({url:a+"/fordowner/vehicle/unauthenticated/udb/vehicle/requestServiceHistory?vin="+e,method:"GET"}).then(function(e){return"SUCCESS"===e.data.status&&(e.data.response.roDetailsList=i.sortByDateAsc(e.data.response.roDetailsList),this.example),e.data},function(e){return e})},i.sortByDateAsc=function(e){return e.sort(function(e,t){return new Date(n(t.repairOrderCloseDate))-new Date(n(e.repairOrderCloseDate))}),e}}}),define("tableHistory/controllers/tableHistory.controller.Main",["angular","jquery"],function(e,r){return function(t,a){function i(e){"SUCCESS"===e.status?t.ServiceHistoryData=e.response.roDetailsList:"FAILURE"!==e.status&&"500"!==e.status||(t.notfound=!0),document.getElementById("accordion-load-container").classList.remove("show")}function n(e){console.warn(e)}t.vinNumber;var o=document.getElementById("vin-number");this.checkIfEmpty=function(){o&&""===o.value?(t.vinform.$invalid=!0,o.classList.add("error"),document.getElementById("vin-input-container").classList.add("error"),r(".form-textfield input").blur(function(e){var t,a=r(this);a.hasClass("error")&&0==a.parent().children(".closeIcon").length&&((t=r("<div></div>")).addClass("closeIcon"),a.parent().append(t),t.click(function(e){a.val("").change(),e.stopPropagation()})),e.stopPropagation()})):(document.getElementById("vin-input-container").classList.remove("error"),o.classList.remove("error"),r(".form-textfield .closeIcon").remove())},this.getServiceHistory=function(e){t.notfound=null,t.ServiceHistoryData=null,o&&""===o.value?this.checkIfEmpty():(document.getElementById("accordion-load-container").classList.add("show"),a.get(e).then(i,n))},this.sortByOrder=function(i){return function(e,t){var a;return e.hasOwnProperty(i)&&t.hasOwnProperty(i)?(e="string"==typeof e[i]?e[i].toUpperCase():e[i],a=0,(t="string"==typeof t[i]?t[i].toUpperCase():t[i])<e?a=1:e<t&&(a=-1),a):0}},this.rearrangeData=function(e){switch(e){case 1:t.ServiceHistoryData=a.sortByDateAsc(t.ServiceHistoryData);break;case 2:t.ServiceHistoryData=t.ServiceHistoryData.sort(this.sortByOrder("repairOrderNumber"));break;case 3:t.ServiceHistoryData=t.ServiceHistoryData.sort(this.sortByOrder("dealerName"))}}}}),define("aaEnhancement/component.aaEnhancement",[],function(){var c=0;this.tabIndexConstructor=function(e,t,a){var i=document.querySelectorAll(e),n=0,o=1;if(i.length)if(t)for(;n<i.length;n++){var r=i[n];"none"!==window.getComputedStyle(r).display&&r.setAttribute("tabindex",-1)}else if(i.length)for(;n<i.length;n++){r=i[n];"none"!=window.getComputedStyle(r).display&&(r.setAttribute("tabindex",a?o:c),a?o+=1:c+=1)}},this.simpleTabIndexConstructor=function(e,t,a){var i=document.querySelectorAll(t),n=0;if(e=parseInt(e),i.length)for(;n<i.length;n++){var o=i[n];"none"!==window.getComputedStyle(o).display&&(a&&(e+=1),o.setAttribute("tabindex",e))}},this.tabIndexGeneralConstructor=function(e){if((t=document.querySelectorAll(e)).length)for(var t=t[0].children,a=0;a<t.length;a++)for(var i=t[a].children,n=0;n<i.length;n++){hasSomeParentTheClass(i[n],"disclosureBox")||i[n].classList.contains("overlay-content")||i[n].classList.contains("configuration")||i[n].classList.contains("modelDetailsCompare")||(i[n].setAttribute("tabindex",c),c+=1);var o=i[n];if(!o.classList.contains("secondaryNavigation"))for(var r=o.querySelectorAll("*"),l=0;l<r.length;l++){var s=r[l];hasSomeParentTheClass(s,"slider-model-detail")||hasSomeParentTheClass(s,"show-mob-only")||"SCRIPT"===s.tagName.toUpperCase()||s.classList.contains("flex-play")||s.classList.contains("offscreen-filters")||hasSomeParentTheClass(s,"map-container")||hasSomeParentTheClass(s,"overlay-container")||!(!hasSomeParentTheClass(s,"media-carousel-video")||hasSomeParentTheClass(s,"media-carousel-video")&&hasSomeParentTheClass(s,"common-mediaCarouselItem"))||!(null!==s.getAttribute("data-ng-click")||null!==s.onkeydown||null!==s.onkeyup||"SUP"===s.tagName.toUpperCase()&&s.getAttribute("data-disclosure")||hasSomeParentTheClass(s,"carousel-controls")&&"A"===s.tagName.toUpperCase()||"INPUT"===s.tagName.toUpperCase()||null!==s.getAttribute("href")&&(0<s.innerHTML.trim().replace(/&nbsp;/g,"").length||s.classList.contains("hotspot-trigger"))||hasSomeParentTheClass(s,"dl-results-list")&&null!==s.getAttribute("href")&&!hasSomeParentTheClass(s,"offscreen-filters")||hasSomeParentTheClass(s,"accordion-title")&&s.classList.contains("accordion-text-content")||s.classList.contains("disclosure-heading")||hasSomeParentTheClass(s,"color-items")&&"LI"===s.tagName.toUpperCase()||hasSomeParentTheClass(s,"flex-control-nav")&&"A"===s.tagName.toUpperCase()||hasSomeParentTheClass(s,"modelDetailsCompare")&&s.classList.contains("compare-grid"))||(s.setAttribute("tabindex",c),c+=1)}}},this.hasSomeParentTheClass=function(e,t){return 0<=e.className.split(" ").indexOf(t)||"none"===window.getComputedStyle(e).display||e.parentElement&&hasSomeParentTheClass(e.parentNode,t)},this.checkElement=function(e){return null===document.querySelector(e)||"none"===window.getComputedStyle(document.querySelector(e)).display?new Promise(e=>{requestAnimationFrame(e)}).then(()=>checkElement(e)):Promise.resolve(!0)},this.cleanTabIndex=function(){for(var e=document.querySelectorAll("a"),t=0;t<e.length;t++){var a=e[t];hasSomeParentTheClass(a,"dealer-autocomplete-list")||a.removeAttribute("tabindex")}};var r={};function o(t,e){t.getElementsByClassName("overlay-content").length&&t.getElementsByClassName("overlay-content")[0].setAttribute("tabIndex",-1),t.removeEventListener("keydown",r);var a=t.querySelectorAll(e=e||'button, [href], input:not([type="hidden"]), select, textarea, li, a,[tabindex]:not([tabindex="-1"])'),i=null,n=null;if(a.length){i=a[0],n=1<a.length?a[a.length-1]:a[0],r=function(e){"Tab"===e.key?(e.shiftKey&&e.target===i&&(e.preventDefault(),n.focus()),e.shiftKey||e.target!==n||(e.preventDefault(),i.focus())):"Enter"===e.key&&(e.target.classList.contains("cancel-btn")||e.target.classList.contains("overlay-close"))&&(t.removeEventListener("keydown",r),e.target.classList.contains("cancel-btn"))&&e.target.click()},t.addEventListener("keydown",r);for(var o=0;o<a.length;o++)a[o].setAttribute("tabindex",0)}return{first:i,last:n}}return this.initOverlayWatch=function(){var e=document.getElementById("global-ux");new MutationObserver(function(e){for(var t of e){var a,i,n;"childList"===t.type&&0<t.addedNodes.length?(a=t.addedNodes[0]).classList&&a.classList.contains("overlay-container")&&a.classList.contains("has-form")&&!a.getElementsByClassName("checkboxcarousel").length?(i=o(a,!1)).last&&i.last.focus():a.classList&&a.classList.contains("overlay-msg-content-inner")&&a.classList.contains("is-active")&&(n=a.parentNode.getElementsByClassName("overlay-content-inner")).length&&!n[0].classList.contains("is-active")&&(i=o(a.parentNode,".overlay-close")).first.focus():"attributes"===t.type&&"class"===t.attributeName&&t.target&&t.target.classList.contains("overlay-container")&&t.target.classList.contains("visible")&&!t.target.getElementsByClassName("checkboxcarousel").length?(i=o(t.target,!1)).last&&i.last.focus():"attributes"===t.type&&"class"===t.attributeName&&t.target&&t.target.classList.contains("popup-select-other-model")&&t.target.classList.contains("active")&&!t.target.getElementsByClassName("checkboxcarousel").length&&(i=o(t.target,!1)).last&&i.last.focus()}}).observe(e,{childList:!0,subtree:!0,attributes:!0})},this.roleAllocator=function(e,t){e=document.querySelectorAll(e);Array.prototype.forEach.call(e,function(e){1<e.textContent.replace(/\s/g,"").length&&"A"!=e.firstChild.tagName&&e.setAttribute("role",t)})},this.altAllocator=function(e,t){e=document.querySelectorAll(e);Array.prototype.forEach.call(e,function(e){1<e.textContent.replace(/\s/g,"").length&&"A"!=e.firstChild.tagName&&e.setAttribute("alt",t)})},{init:function(){cleanTabIndex(),tabIndexConstructor("nav .nav-header-center a,nav .site-links .site-link-chevron a",!1,!1),document.getElementsByClassName("logo")[0].setAttribute("tabindex",2),tabIndexConstructor("nav .utility-links .site-link-chevron a",!1,!1),tabIndexConstructor("nav .nav-content .lang-links a",!1,!1),tabIndexConstructor("nav .category-links-column a",!0,!1),tabIndexConstructor(".secondaryNavigation .navigation .navigation-vertical h2, .secondaryNavigation .navigation .navigation-horizontal a, .secondaryNavigation .navigation .navigation-vertical  .sub-navigation-vertical h2, .stickyNavAPO .sticky-sidebar-component  li a",!1,!1),document.querySelector(".secondaryNavigation .navigation .navigation-vertical h2")&&simpleTabIndexConstructor(document.querySelector(".secondaryNavigation .navigation .navigation-vertical h2").getAttribute("tabindex"),".secondaryNavigation .navigation .navigation-vertical a",!1),window.addEventListener("load",function(){var t,e,a;0<document.getElementsByClassName("modelCompare").length?(t=document.querySelector(".active-compare-btn"),e=document.querySelector(".cancel-compare-btn"),t.addEventListener("focus",a=function(e){simpleTabIndexConstructor(t.getAttribute("tabIndex"),".modelCompare a, .modelCompare input[type=checkbox]",!1)}),t.addEventListener("click",a),e.addEventListener("click",a)):document.querySelector(".map-container")&&(tabIndexConstructor(".map-container #map button, .dl-results-list a",!1,!1),tabIndexConstructor(".dl-results  .offscreen-filters .accordian a, .dl-results  .offscreen-filters .accordian input, .dl-results  .offscreen-filters .dl-button",!0,!1),document.getElementsByClassName("info-window")[0])&&document.getElementsByClassName("info-window")[0].addEventListener("load",function(){tabIndexConstructor(".map-container .info-window-content a,  .map-container .info-window-content  span",!1,!1)}),tabIndexGeneralConstructor("#global-ux .show-content"),tabIndexConstructor(".disclosure-accordion h3",!1,!1),tabIndexGeneralConstructor(".footer")}),roleAllocator(".cardCarousel.section","contentinfo"),roleAllocator(".fds-card-carousel","list"),roleAllocator(".splitter.section","contentinfo"),roleAllocator(".splitter-box","list"),roleAllocator(".billboard.section","banner"),roleAllocator(".billboardCarousel.section","banner"),roleAllocator(".billboardCarousel .slide-container","list"),tabIndexConstructor(".common-billboardCarousel .carousel .carousel-controls li a",!1,!1),document.addEventListener("click",function(e){var t,a;e.target.classList.contains("site-link-title")||e.target.classList.contains("site-link-chevron")&&document.querySelectorAll(".categories .category-open").length?(simpleTabIndexConstructor(e.target.parentElement.getAttribute("tabindex"),"nav .vehicle-menu .vehicle-menu-item  .vehicle-menu-item-title",!0),tabIndexConstructor("nav .vehicle-menu .vehicle-menu-item  .vehicle-menu-content .vehicle-tiles a",!0,!1),tabIndexConstructor("nav .vehicle-menu .vehicle-menu-item  .vehicle-menu-content .vehicle-menu-buttons a",!0,!1)):e.target.classList.contains("vehicle-menu-item-title")?tabIndexConstructor("nav .vehicle-menu .vehicle-menu-item  .vehicle-menu-content .vehicle-tiles a",!0,!1):hasSomeParentTheClass(e.target,"dl-dealer-name")||hasSomeParentTheClass(e.target,"dl-details")?(tabIndexConstructor(".dl-results  .offscreen-filters .accordian a, .dl-results  .offscreen-filters .accordian input, .dl-results  .offscreen-filters .dl-button",!0,!1),simpleTabIndexConstructor(e.target.getAttribute("tabIndex"),".dl-results  .dl-results-header .dl-count a",!1),simpleTabIndexConstructor(e.target.getAttribute("tabIndex"),".dl-results  .dl-results-container .dl-results-list a",!1),simpleTabIndexConstructor(e.target.getAttribute("tabIndex"),".dl-results  .dl-results-container .dl-results-list .dealer-details .dl-dealer-info .accordian, .map-container .info-window-content a,  .map-container .info-window-content   span",!1)):hasSomeParentTheClass(e.target,"dl-count")?(tabIndexConstructor(".dl-results  .offscreen-filters .accordian a, .dl-results  .offscreen-filters .accordian input, .dl-results  .offscreen-filters .dl-button",!0,!1),simpleTabIndexConstructor(e.target.getAttribute("tabIndex"),".dl-results  .dl-results-header .dl-count a",!1),simpleTabIndexConstructor(e.target.getAttribute("tabIndex"),".dl-results  .dl-results-container .dl-results-list a",!1)):e.target.classList.contains("accordian")||hasSomeParentTheClass(e.target,"more-dealers")?(simpleTabIndexConstructor(document.getElementsByClassName("search-submit")[0].getAttribute("tabIndex"),".map-container #map button",!1),simpleTabIndexConstructor(document.getElementsByClassName("search-submit")[0].getAttribute("tabIndex"),".dl-results  .dl-results-header .dl-count a, .more-dealers button",!1),simpleTabIndexConstructor(document.getElementsByClassName("search-submit")[0].getAttribute("tabIndex"),".dl-results  .dl-results-container .dl-results-list a",!1),tabIndexConstructor(".dl-results  .offscreen-filters .accordian a, .dl-results  .offscreen-filters .accordian input, .dl-results  .offscreen-filters .dl-button",!0,!1)):hasSomeParentTheClass(e.target,"carousel-controls")?(t=document.querySelectorAll(".billboardCarousel .carousel .flex-viewport .slide-container .carousel-slide:not(.clone)")[e.target.id].classList,a="",t.forEach(function(e){a+="."+e}),simpleTabIndexConstructor(e.target.getAttribute("tabIndex"),a+" a.cta-button",!1)):"#header-language-selector"===e.target.getAttribute("data-target-category")&&(simpleTabIndexConstructor(parseInt(e.target.getAttribute("tabIndex"))+1,"#header-language-selector, #header-language-selector .language-block a",!1),document.querySelector("#header-language-selector").focus())}),document.addEventListener("keyup",function(e){var t,a=document.querySelector(".search-input .input-text .search-submit"),i=document.querySelector(".miniDealerLocator .search-completed .first-result .dl-first-info .search-info a");function n(e){simpleTabIndexConstructor(e,".dl-results  .dl-results-header a, .more-dealers button",!1),simpleTabIndexConstructor(e,".dl-results  .dl-results-container .dl-results-list a",!1),tabIndexConstructor(".dl-results-header .dl-count,.dl-results .filters a, .dl-results .filters input[type=checkbox], .dl-results .filters button, .dl-results .filters select",!0,!1)}"Tab"===e.key&&e.target.scrollIntoView({block:"center",behavior:"smooth"}),i&&simpleTabIndexConstructor(a.getAttribute("tabIndex"),".miniDealerLocator .search-completed .first-result a, .miniDealerLocator .search-completed .dealer-info-section a",!1),(hasSomeParentTheClass(e.target,"dl-count")||hasSomeParentTheClass(e.target,"dl-search-info")||hasSomeParentTheClass(e.target,"dl-direction")||hasSomeParentTheClass(e.target,"dl-directions")||hasSomeParentTheClass(e.target,"dl-dealer-name")||hasSomeParentTheClass(e.target,"dl-details")||hasSomeParentTheClass(e.target,"dl-telephone")||hasSomeParentTheClass(e.target,"more-dealers")||e.target.classList.contains("search-submit")||hasSomeParentTheClass(e.target,"input-field")||e.target.classList.contains("accordion-title")||"#header-language-selector"===e.target.getAttribute("data-target-category")||hasSomeParentTheClass(e.target,"popup-select-other-model")&&(e.target.classList.contains("input-checkbox")||e.target.classList.contains("cancel")||e.target.classList.contains("close")))&&"Enter"===e.key?(e.preventDefault(),e.target.click()):e.target.classList.contains("accordian")&&"Enter"===e.key?e.target.classList.contains("accordian-open")?e.target.classList.remove("accordian-open"):e.target.classList.add("accordian-open"):(e.target.classList.contains("accordian")||hasSomeParentTheClass(e.target,"more-dealers"))&&"Tab"===e.key?tabIndexConstructor(".dl-results  .offscreen-filters .accordian a, .dl-results  .offscreen-filters .accordian input, .dl-results  .offscreen-filters .dl-button",!0,!1):hasSomeParentTheClass(e.target,"dl-dealer-name")&&"Tab"===e.key?(simpleTabIndexConstructor(document.getElementsByClassName("search-submit")[0].getAttribute("tabIndex"),".dl-results  .dl-results-header .dl-count a, .more-dealers button",!1),simpleTabIndexConstructor(document.getElementsByClassName("search-submit")[0].getAttribute("tabIndex"),".dl-results  .dl-results-container .dl-results-list a",!1)):e.target.classList.contains("search-submit")||hasSomeParentTheClass(e.target,"input-field")&&"Enter"===e.key?(checkElement(".dl-results").then(function(){simpleTabIndexConstructor(e.target.getAttribute("tabIndex"),".dl-results  .dl-results-header .dl-count a, .more-dealers button",!0),simpleTabIndexConstructor(e.target.getAttribute("tabIndex"),".dl-results  .dl-results-container .dl-results-list a",!0),tabIndexConstructor(".dl-results  .offscreen-filters .accordian a, .dl-results  .offscreen-filters .accordian input, .dl-results  .offscreen-filters .dl-button",!0,!1)}),checkElement("#map button").then(function(){simpleTabIndexConstructor(e.target.getAttribute("tabIndex"),".map-container #map button",!1)})):hasSomeParentTheClass(e.target,"common-mediaCarousel")&&hasSomeParentTheClass(e.target,"media-carousel-video")&&"A"===e.target.tagName.toUpperCase()?(i=e.target.closest(".carousel"))&&$(i).find(".flex-control-nav li a").attr("tabIndex",-1):hasSomeParentTheClass(e.target,"main-menu")&&"A"===e.target.tagName.toUpperCase()&&"Enter"===e.key?(simpleTabIndexConstructor(e.target.getAttribute("tabIndex"),".submenu.active a",!1),document.querySelectorAll(".submenu.active a")[0].focus()):hasSomeParentTheClass(e.target,"compare-container")&&(e.target.classList.contains("select-to-compare")||e.target.classList.contains("addto-compare"))&&"Enter"===e.key?(e.preventDefault(),e.target.click(),simpleTabIndexConstructor(e.target.getAttribute("tabIndex"),".store-popuphtml .popup-select-other-model .input-checkbox, .store-popuphtml .popup-wrapper a",!1),document.querySelectorAll(".input-checkbox")[0].focus()):hasSomeParentTheClass(e.target,"popup-select-other-model")&&e.target.classList.contains("confirm")&&"Enter"===e.key?(e.preventDefault(),e.target.click(),simpleTabIndexConstructor(document.getElementsByClassName("back-to-overview")[0].getAttribute("tabIndex"),".compare-container a, .compare-container .compare-grid",!1)):hasSomeParentTheClass(e.target,"modelDetailsCompare")&&e.target.classList.contains("enter-with-event")&&"A"===e.target.tagName.toUpperCase()&&"Enter"===e.key?(e.preventDefault(),e.target.classList.remove("enter-with-event")):hasSomeParentTheClass(e.target,"modelDetailsCompare")&&e.target.classList.contains("popup-link-initialized")&&"A"===e.target.tagName.toUpperCase()&&"Enter"===e.key?(e.preventDefault(),e.target.click(),e.target.classList.add("enter-with-event")):hasSomeParentTheClass(e.target,"galleryCategory")&&e.target.closest(".view-more-button-container")&&e.target.classList.contains("cta-button")&&"Tab"===e.key&&(t=parseInt(e.target.getAttribute("tabIndex"))+1,Array.from(e.target.closest(".galleryCategory").querySelectorAll(".images-container .image a:not([tabindex])")).forEach(function(e){e.setAttribute("tabIndex",t)})),document.querySelector(".dl-results-header .dl-filter-toggle")&&(hasSomeParentTheClass(e.target,"dl-filter-toggle")&&"A"===e.target.tagName.toUpperCase()&&"Enter"===e.key?(e.target.click(),a=document.querySelector(".dl-results-container.results-hidden"),i=e.target.getAttribute("tabIndex"),a?(console.log("adding tabindex to filter options"),tabIndexConstructor(".dl-results  .dl-results-container .dl-results-list a",!0,!1),simpleTabIndexConstructor(i,".dl-results-header .dl-count a, .dl-results .filters a, .dl-results .filters input[type=checkbox], .dl-results .filters button, .dl-results .filters select",!1)):(console.log("adding tabindex to results"),n(i))):hasSomeParentTheClass(e.target,"dl-count")&&"A"===e.target.tagName.toUpperCase()&&"Tab"===e.key?n(e.target.getAttribute("tabIndex")):(e.target.classList.contains("search-submit")||hasSomeParentTheClass(e.target,"input-field"))&&"Enter"===e.key&&(checkElement(".dl-results .dl-results-list .dl-dealer-name").then(function(){n(e.target.getAttribute("tabIndex"))}),checkElement("#map button").then(function(){simpleTabIndexConstructor(e.target.getAttribute("tabIndex"),".map-container #map button",!1)})))}),document.querySelector(".splitter .common-splitter .splitter-box .hover-tile")&&document.addEventListener("focusin",function(e){simpleTabIndexConstructor(e.target.getAttribute("tabIndex"),".splitter .common-splitter .splitter-box .hover-tile .action a",!1)}),initOverlayWatch()}}}),define("brand-card/component.brandCard",["jquery","angular","jquery-flexslider"],function(n,e,t){var a={},i=window.matchMedia("(max-width: 767px)"),o=n(".brandcard").width();function r(){(i.matches?(n(".brandCardDesktop").addClass("hide"),n(".brandCardMobile")):(n(".brandCardMobile").addClass("hide"),n(".brandCardDesktop"))).removeClass("hide")}function l(){function i(e){n(this).css("height","auto");var t=e.map(function(){return n(this).css("min-height","inherit"),n(this).height()}).get(),t=Math.max.apply(null,t);e.css("height",t)}n(".brandCardItem").on("click",function(e){var t;n(this).hasClass("clickable")&&(t=n(this).find(".brandCardContent p a:first")?.attr("href"))&&(window.location.href=t.includes("http")?t:document.location.protocol+"//"+document.location.hostname+":"+document.location.port+t)}),n(".brandCardContent p a").on("click",function(e){e.stopImmediatePropagation()}),n(".brandCardContainer.brandCardDesktop").each(function(){var e=($targetObj=n(this)).data("card-size"),t=($targetObj.data("total-card"),$targetObj.find(".brandCardItem").length),a=$targetObj.data("card-view");e<t&&"slider"==a?s($targetObj,e):($targetObj.find(".brandCardWrapper").css("min-width","auto"),$targetObj.find(".brandCardWrapper > .brandCardItem").css("width","calc(100% / "+e+" - 5px)"),i($targetObj.find(".brandCardItemContainer > .brandCardItemWrapper")),i($targetObj.find(".brandCardContent > .brandCardContentdesktop-title")),i($targetObj.find(".brandCardContent > .brandCardContentdesktop-body")),i($targetObj.find(".brandCardContent > .brandCardContentdesktop-utility"))),2===e?$targetObj.find(".brandCardItemWrapper").addClass("two-col"):3===e?$targetObj.find(".brandCardItemWrapper").addClass("three-col"):$targetObj.find(".brandCardItemWrapper").addClass("four-col")}),n(".brandCardContainer.brandCardMobile").each(function(){var e=($targetObj=n(this)).data("total-card"),t=$targetObj.data("card-size"),a=$targetObj.data("card-view");t<=e&&"slider"==a?(e%2!=0&&$targetObj.find(".brandCardWrapper > .brandCardItem:last-child").css({"padding-right":"1rem"}),s($targetObj,t)):($targetObj.find(".brandCardWrapper").css("min-width","auto"),$targetObj.find(".brandCardWrapper > .brandCardItem").css("width","calc(100% / "+t+" - 5px)"),i($targetObj.find(".brandCardItemContainer > .brandCardItemWrapper"))),1===t?$targetObj.find(".brandCardItemWrapper").addClass("one-col"):$targetObj.find(".brandCardItemWrapper").addClass("two-col")})}function s(e,t){e.find(".brandCardContentWrapper").flexslider({selector:".brandCardWrapper > .brandCardItem",animation:"slide",directionNav:!0,slideshow:!1,animationLoop:!1,minItems:t,itemWidth:o/t,nextText:'<div class="carousel-btn carousel-next"><span class="icon icon-chevron-thin-right"></span></div>  ',prevText:'<div class="carousel-btn carousel-previous"><span class="icon icon-chevron-thin-left"></span></div>',start:function(e){n(e).resize(),n(e).find(".flex-control-nav").hide(),n(e).find(".flex-direction-nav li:nth-child(1)").after(n("<li>").html('<span class="page-num"> </span>')),curSlide=e.currentSlide,totSlide=e.pagingCount,n(e).find(".flex-prev").css({"background-color":"#75787b","pointer-events":"none"}),n(e).find(".page-num").text(curSlide+1+" / "+totSlide)},after:function(e){curSlide=e.currentSlide,totSlide=e.pagingCount,lastSlide=e.last,n(e).find(".flex-prev").css({"background-color":"#00095B","pointer-events":"visible"}),n(e).find(".flex-next").css({"background-color":"#00095B","pointer-events":"visible"}),0==curSlide&&n(e).find(".flex-prev").css({"background-color":"#75787b","pointer-events":"none"}),curSlide==lastSlide&&n(e).find(".flex-next").css({"background-color":"#75787b","pointer-events":"none"}),n(e).find(".page-num ").text(curSlide+1+" / "+totSlide)}})}return n(window).resize(function(){r()}),a.init=function(){r(),l()},a}),define("fds-dropdown/component.fdsDropdown",["jquery"],function(e){var t={init:function(){e(document).find("select.fds-dropdown__select").length&&!e("body").hasClass("fds-dropdown__select__wrapper")&&e("body").addClass("fds-dropdown__select__wrapper")}};return t}),define("youtube-player/component.youtubePlayer",["jquery","_","youtube-player/component.youtubePlayerService"],function(i,n,o){var e={},r=[],l=[];return e.init=function(e){var t,a;document.getElementById("youtubeApiLoader")||((a=document.createElement("script")).setAttribute("type","text/javascript"),a.setAttribute("id","youtubeApiLoader"),a.setAttribute("src","//www.youtube.com/iframe_api"),i("body").append(a)),player=new o(e),l.push(player),t=player,(a=n.find(r,function(e){return e.$element.is(t.$element)}))&&a.isInitialized()&&n.remove(r,function(e){return e.$element.is(t.$element)}),player.hasPoster()&&!player.isAutoplayEnabled()||r.push(player)},window.onYouTubeIframeAPIReady=function(){n.forEach(r,function(e){e.initPlayer(),l.push(e)})},e}),define("youtube-player/component.youtubePlayerService",["jquery","_","analytics/analyticsEventLayer"],function(e,a,t){function i(e){this.$element=e,this.$wrapper=e.find(".brand-youtube-player-wrapper"),this.$startImage=e.find(".start-image"),this.$playerElement=e.find(".brand-youtube-player"),this.config=e.find(".configuration"),this.videoStarted=!1,this.playStarted=!1,this.analyticsEvents=t.getYoutubePlayerEvents(),this.ytPlayer=null,this._bindEvents(),this.intervalHandler=null,this.playingVideoId=null,this.reached00=!1,this.reached25=!1,this.reached50=!1,this.reached75=!1,this.reached100=!1}var n=[],o=null;return i.prototype.initPlayer=function(){var e,t;(o=a.isUndefined(YT)||a.isUndefined(YT.Player)?"":YT.Player)&&(t=this.$wrapper.width(),e=this.$startImage.length?this.$startImage.height():t*(9/16),this.$wrapper.height(e),this.$startImage.length&&this.$startImage.hide(),t=this._getPlayerVars(this.config,t,e),this.ytPlayer||(this.ytPlayer=new o(this.$playerElement[0],t),n.push(this.ytPlayer),n=a.uniq(n)))},i.prototype._getPlayerVars=function(e,t,a){var i=this,n={},o={},r=!1,l=e.data("is-playlist"),s=e.data("loop-enabled"),c=e.data("video-id"),d=e.data("loop-times")?parseInt(e.data("loop-times")):0,u=!!e.data("mute-play"),p=0,m=parseFloat(e.data("play-back-rate")),h=parseFloat(e.data("volume-level"));return o.iv_load_policy=e.data("annotations-enabled")?1:3,o.cc_load_policy=e.data("captions-enabled")?1:0,o.cc_lang_pref=e.data("captions-enabled")?e.data("player-language"):"",o.hl=e.data("player-language"),o.autoplay=e.data("autoplay-enabled")?1:0,o.loop=s?1:0,o.listType=l?"playlist":"",o.color=e.data("light-theme-enabled")?e.data("light-theme-enabled"):0,o.rel=0,o.showinfo=0,o.playsinline=1,o.modestbranding=e.data("remove-yt-logo")?e.data("remove-yt-logo"):0,o.controls=e.data("enable-controls")?e.data("enable-controls"):0,o.origin=window.location.origin,o.enablejsapi=1,o.fs=e.data("full-screen")?1:0,l?o.list=c:o.loop&&(o.playlist=c),n.playerVars=o,n.height=a,n.width=t,l||(n.videoId=c),n.events={onReady:function(e){1!=m&&e.target.setPlaybackRate(m),100==h||u?u&&e.target.mute():e.target.setVolume(h),i.isAutoplayEnabled()||(d+=1),i._onReady()},onStateChange:function(e){var t;i.whilePlaying(e),e.data===YT.PlayerState.ENDED?(i.reached100||(void 0!==i.video&&(fordAnalytics.videoName=i.video.video_title),analyticsEvents.trackVideoEnd(e.target.getCurrentTime())),e.target.stopVideo()):e.data===YT.PlayerState.PLAYING?(r=!1,i.video=i.getVideoData(i.ytPlayer)):e.data===YT.PlayerState.UNSTARTED&&(t=!r&&!l&&s,0!=d&&p<d-1&&t?p++:0!=d&&d-1<=p&&t&&(r=!(p=0),e.target.stopVideo()))}},n},i.prototype.whilePlaying=function(e){var t=this;e.data!==YT.PlayerState.PLAYING||t.intervalHandler?(clearInterval(t.intervalHandler),t.intervalHandler=null):t.intervalHandler=setInterval(function(){t.trackMilestone()},100)},i.prototype.trackMilestone=function(e){var t,a=this.ytPlayer;e||(e=a.getCurrentTime(),0!=Math.floor(e)&&this.playStarted?t=(e/a.getDuration()*100).toFixed(2):0!==Math.floor(e)||this.playStarted||(t=Math.floor(e),this.playStarted=!0),this.fireAnalytics(t))},i.prototype.fireAnalytics=function(e){var t=this.video,a=this.ytPlayer,i=this.analyticsEvents;0<=Math.floor(e)&&Math.floor(e)<25&&!this.reached00&&("undefined"!=typeof digitaldata&&(void 0!==t&&(fordAnalytics.videoName=t.video_title),i.trackVideoStart(a.getCurrentTime())),this.reached00=!0,"1"==t.loop&&"playlist"!==t.listType||(this.reached25=!1)),25<=Math.floor(e)&&Math.floor(e)<50&&!this.reached25&&("undefined"!=typeof digitaldata&&(void 0!==t&&(fordAnalytics.videoName=t.video_title),i.trackVideoProgress(a.getCurrentTime(),a.getDuration())),this.reached25=!0,"1"==t.loop&&"playlist"!==t.listType||(this.reached50=!1)),50<=Math.floor(e)&&Math.floor(e)<75&&!this.reached50&&("undefined"!=typeof digitaldata&&(void 0!==t&&(fordAnalytics.videoName=t.video_title),i.trackVideoProgress(a.getCurrentTime(),a.getDuration())),this.reached50=!0,"1"==t.loop&&"playlist"!==t.listType||(this.reached75=!1)),75<=Math.floor(e)&&Math.floor(e)<99&&!this.reached75&&("undefined"!=typeof digitaldata&&(void 0!==t&&(fordAnalytics.videoName=t.video_title),i.trackVideoProgress(a.getCurrentTime(),a.getDuration())),this.reached75=!0,"1"==t.loop&&"playlist"!==t.listType||(this.reached100=!1)),99<=Math.floor(e)&&!this.reached100&&("undefined"!=typeof digitaldata&&(void 0!==t&&(fordAnalytics.videoName=t.video_title),i.trackVideoEnd(a.getCurrentTime())),this.reached100=!0,"1"==t.loop&&"playlist"!==t.listType||(this.reached00=!1))},i.prototype.hasPoster=function(){return 0<this.$startImage.length},i.prototype.videoPlay=function(){this.videoStarted=!0,this.ytPlayer&&a.isFunction(this.ytPlayer.playVideo)?this.ytPlayer.playVideo():(this.initPlayer(),this.$startImage.length&&this.$startImage.hide())},i.prototype.videoMute=function(){this.ytPlayer&&a.isFunction(this.ytPlayer.mute)&&this.ytPlayer.mute()},i.prototype.isInitialized=function(){return!a.isUndefined(this.ytPlayer)},i.prototype.isAutoplayEnabled=function(){return!!this.config.data("autoplay-enabled")},i.prototype._onReady=function(){this.isAutoplayEnabled()&&this.videoMute(),(this.isAutoplayEnabled()||this.videoStarted)&&this.videoPlay()},i.prototype._bindEvents=function(){var t=this;t.$startImage.length&&t.$startImage.on("click keydown",function(e){if("click"===e.type||"keydown"===e.type&&13===e.which){if(!t.isInitialized())return t.initPlayer(),t.videoPlay(),!1;t.videoPlay()}})},i.prototype.getVideoData=function(e){(function e(t,a){for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var n=i;if("function"==typeof(i=t[i]))return;"object"==typeof i?e(i,a):a[n]=i}})(e,t={});var t;if(t.video_id&&t.title)return{video_id:t.video_id,video_title:t.title,playlist_id:e.getPlaylistId(),listType:t.listType,loop:t.loop};console.warn("Cannot find video_title or video_id in Youtube iframe API")},i}),define("geolocation-validation/component.geolocationValidation.app",["angular","geolocation-validation/geolocationValidation.service","geolocation-validation/geolocationValidation.controller"],function(e,t,a){e=e.module("geolocationValidation",["ngSanitize"]);return e.service("geolocationValidationService",["$q",t]),e.controller("geolocationValidationCtrl",["$scope","geolocationValidationService",a]),e}),define("geolocation-validation/component.geolocationValidation",["jquery","angular","geolocation-validation/component.geolocationValidation.app"],function(i,n){var e={init:function(){var e=document.querySelector("[data-market-code]").getAttribute("data-market-code"),t=document.querySelector("[data-locale]").getAttribute("data-locale"),a=(window.initMapForGeoLocatedPrice=function(){var e=i(".geolocation-validation");e.length&&e.each(function(e,t){n.bootstrap(t,["geolocationValidation"])})},document.createElement("script"));a.setAttribute("type","text/javascript"),a.setAttribute("src","https://maps.googleapis.com/maps/api/js?client=gme-fordmotorcompany2&language="+t+"&region="+e+"&libraries=places&channel="+e+"&callback=initMapForGeoLocatedPrice"),document.body.appendChild(a)}};return e}),define("geolocation-validation/geolocationValidation.controller",["jquery"],function(i){return function(e,t){var a=i('input[name="priceGeolocalizationEnable"]').val();t.daysForLocationToBeCached=i('input[name="priceGeolocalizationTimeCache"]').val(),t.country=i('input[name="priceGeolocalizationCountry"]').val(),t.zones=i('input[name="priceGeolocalizationZone[]"]').map(function(){return i(this).val()}).get(),t.devMode=JSON.parse(i('input[name="priceGeolocalizationDevMode"]').val()),a&&t.getClientCoordinates(!1).then(function(e){e.latitude&&e.longitude&&t.getAndStoreReverseGeocodeFullResponse(e).then(function(e){t.executeValidationWithGeocode(e)},function(e){console.log(e)})},function(e){console.log(e)})}}),define("geolocation-validation/geolocationValidation.service",["jquery"],function(s){return function(n){let i="locationValidationWithExpiry",l="geolocationValidationService",o=(this.daysForLocationToBeCached=1,this.country="Brazil",this.zones=["ZONE1"],this.devMode=!1,e=>e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toUpperCase()),r=(e,t)=>o(e)===o(t);this.getZones=()=>{for(let e=0;e<this.zones.length;e++)this.zones[e]=o(this.zones[e]);return this.zones},this.setLocationWithExpiry=(e,t)=>{var a=new Date,t=864e5*t,e={value:e,granted:a.getTime(),expiry:a.getTime()+t};localStorage.setItem(i,JSON.stringify(e))},this.getLocationWithExpiry=()=>{var e=localStorage.getItem(i);return e?(e=JSON.parse(e),(new Date).getTime()>e.expiry?(localStorage.removeItem(i),null):e.value):null},this.getAndStoreReverseGeocodeFullResponse=o=>{let r=n.defer();return o.geocode?(console.log("coordinates already has geocode, just return ",o),r.resolve(o)):(new google.maps.Geocoder).geocode({latLng:new google.maps.LatLng(o.latitude,o.longitude)},(e,t)=>{var a,i,n;e[0]?(n=this.findGeocodeElementByType(e[0],"country"),a=this.findGeocodeElementByType(e[0],"administrative_area_level_1"),i=this.findGeocodeElementByType(e[0],"administrative_area_level_2"),n={latitude:o.latitude,longitude:o.longitude,geocode:{address_components:[n,i,a]}},o.dev_mode&&this.devMode?console.warn(l,"geocode",n):this.setLocationWithExpiry(n,this.daysForLocationToBeCached),r.resolve(n)):r.reject("Error getReverseGeocodeFullResponse: "+e)}),r.promise},this.getClientCoordinates=e=>{let t=n.defer(),a=this.getLocationWithExpiry();var i=e=>{e=e.coords;e&&null!=e.latitude&&null!=e.longitude?null!=a&&(a.latitude===e.latitude&&a.longitude===e.longitude||a.dev_mode===this.devMode)?(a.dev_mode===this.devMode&&console.warn(l,"dev mode enabled",a.longitude,a.latitude),t.resolve(a)):t.resolve(e):t.reject("Error getting client coordinates: "+e)};return void 0!==e&&e?(console.warn(l,"using override object to define location"),t.resolve(e)):"geolocation"in navigator?navigator.geolocation.getCurrentPosition(i,e=>{t.reject("Location denied: "+e)},{enableHighAccuracy:!0,maximumAge:0,timeout:52e4}):t.reject(l+" Your browser doesn't support geolocation functionality"),t.promise},this.findGeocodeElementByType=(e,t)=>e.address_components.find(e=>e&&e.types[0]===t),this.executeValidationWithGeocode=e=>{var t,a,i,n;e.geocode&&(i=s("input[name='priceAccessoryState']").val(),t=s("input[name='priceGeolocalizationEnable']").val(),e=e.geocode,n=this.findGeocodeElementByType(e,"country"),a=this.findGeocodeElementByType(e,"administrative_area_level_1"),e=this.findGeocodeElementByType(e,"administrative_area_level_2"),"true"===i&&(s("input[name='shortNameGeo']").val(o(a.short_name)),s("input[name='countryAccessories']").val(o(this.country))),i=s('.geolocation-validation input[name="validationZone"]'),n=(r(this.country,n.long_name)||r(this.country,n.short_name))&&(a&&this.getZones().includes(o(a.long_name))||this.getZones().includes(o(a.short_name))||e&&this.getZones().includes(o(e.long_name))||this.getZones().includes(o(e.short_name))),i.val(n),!0===n&&"true"===t?(console.log("active Geolocation Prices"),s('input[name="validationZone"]').val("true").trigger("change")):i.val("false"))}}}),define("commonVehicleAtribute/commonVehicle",["jquery"],function(t){var e={init:function(){var e;"true"===t('input[name="validationZone"]').val()&&""!=(e=t('input[name="zonePrice"]').val())&&null!=e&&(t(".changePrice").text(""),t(".changePrice").text(e)),t(document).ready(function(){t('input[name="validationZone"]').on("change",function(){var e;"true"===t('input[name="validationZone"]').val()&&""!=(e=t('input[name="zonePrice"]').val())&&null!=e&&(t(".changePrice").text(""),t(".changePrice").text(e))})})}};return e}),window.libpannellum=((t,K,z)=>{function n(y){var D,P,b,w,T,N,A,I,$,L,M,C,O,E,k,S,F=K.createElement("canvas");function _(e,t){return 1==e.level&&1!=t.level?-1:1==t.level&&1!=e.level?1:t.timestamp-e.timestamp}function R(e,t){return e.level!=t.level?e.level-t.level:e.diff-t.diff}function V(e,t,a,i,n,o){this.vertices=e,this.side=t,this.level=a,this.x=i,this.y=n,this.path=o.replace("%s",t).replace("%l",a).replace("%x",i).replace("%y",n)}function x(){return[-1,1,-1,1,1,-1,1,-1,-1,-1,-1,-1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,-1,1,1,1,1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,-1,-1,-1,1,1,1,-1,1,1,1,1,-1,1,1,-1,-1]}function B(e,t,a){var i=Math.sin(t),t=Math.cos(t);return"x"==a?[e[0],t*e[1]+i*e[2],t*e[2]-i*e[1],e[3],t*e[4]+i*e[5],t*e[5]-i*e[4],e[6],t*e[7]+i*e[8],t*e[8]-i*e[7]]:"y"==a?[t*e[0]-i*e[2],e[1],t*e[2]+i*e[0],t*e[3]-i*e[5],e[4],t*e[5]+i*e[3],t*e[6]-i*e[8],e[7],t*e[8]+i*e[6]]:"z"==a?[t*e[0]+i*e[1],t*e[1]-i*e[0],e[2],t*e[3]+i*e[4],t*e[4]-i*e[3],e[5],t*e[6]+i*e[7],t*e[7]-i*e[6],e[8]]:void 0}function U(e){return[e[0],e[4],e[8],e[12],e[1],e[5],e[9],e[13],e[2],e[6],e[10],e[14],e[3],e[7],e[11],e[15]]}F.style.width=F.style.height="100%",y.appendChild(F),this.init=function(e,t,a,i,n,o,r,l){if("equirectangular"!=(t=t===z?"equirectangular":t)&&"cubemap"!=t&&"multires"!=t)throw console.log("Error: invalid image type specified!"),{type:"config error"};if(L=t,$=e,M=a,S=l||{},D){if(b&&(P.detachShader(D,b),P.deleteShader(b)),w&&(P.detachShader(D,w),P.deleteShader(w)),P.bindBuffer(P.ARRAY_BUFFER,null),P.bindBuffer(P.ELEMENT_ARRAY_BUFFER,null),D.texture&&P.deleteTexture(D.texture),D.nodeCache)for(var s=0;s<D.nodeCache.length;s++)P.deleteTexture(D.nodeCache[s].texture);P.deleteProgram(D),D=z}if(I=z,"cubemap"==L&&0!=($[0].width&$[0].width-1)&&(navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 8_/)||navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 9_/)||navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 10_/)||navigator.userAgent.match(/Trident.*rv[ :]*11\./))||(P=P||F.getContext("experimental-webgl",{alpha:!1,depth:!1}))&&1286==P.getError()&&H(),!P&&("multires"==L&&$.hasOwnProperty("fallbackPath")||"cubemap"==L)&&("WebkitAppearance"in K.documentElement.style||navigator.userAgent.match(/Trident.*rv[ :]*11\./)||-1!==navigator.appVersion.indexOf("MSIE 10"))){N&&y.removeChild(N),(N=K.createElement("div")).className="pnlm-world",c=$.basePath?$.basePath+$.fallbackPath:$.fallbackPath;for(var c,d=["f","r","b","l","u","d"],u=0,p=function(){for(var e,t=K.createElement("canvas"),a=(t.className="pnlm-face pnlm-"+d[this.side]+"face",N.appendChild(t),t.getContext("2d")),i=(t.style.width=this.width+4+"px",t.style.height=this.height+4+"px",t.width=this.width+4,t.height=this.height+4,a.drawImage(this,2,2),a.getImageData(0,0,t.width,t.height)),n=i.data,o=2;o<t.width-2;o++)for(e=0;e<4;e++)n[4*(o+t.width)+e]=n[4*(o+2*t.width)+e],n[4*(o+t.width*(t.height-2))+e]=n[4*(o+t.width*(t.height-3))+e];for(o=2;o<t.height-2;o++)for(e=0;e<4;e++)n[4*(o*t.width+1)+e]=n[4*(o*t.width+2)+e],n[4*((o+1)*t.width-2)+e]=n[4*((o+1)*t.width-3)+e];for(e=0;e<4;e++)n[4*(t.width+1)+e]=n[4*(2*t.width+2)+e],n[4*(2*t.width-2)+e]=n[4*(3*t.width-3)+e],n[4*(t.width*(t.height-2)+1)+e]=n[4*(t.width*(t.height-3)+2)+e],n[4*(t.width*(t.height-1)-2)+e]=n[4*(t.width*(t.height-2)-3)+e];for(o=1;o<t.width-1;o++)for(e=0;e<4;e++)n[4*o+e]=n[4*(o+t.width)+e],n[4*(o+t.width*(t.height-1))+e]=n[4*(o+t.width*(t.height-2))+e];for(o=1;o<t.height-1;o++)for(e=0;e<4;e++)n[o*t.width*4+e]=n[4*(o*t.width+1)+e],n[4*((o+1)*t.width-1)+e]=n[4*((o+1)*t.width-2)+e];for(e=0;e<4;e++)n[e]=n[4*(t.width+1)+e],n[4*(t.width-1)+e]=n[4*(2*t.width-2)+e],n[t.width*(t.height-1)*4+e]=n[4*(t.width*(t.height-2)+1)+e],n[4*(t.width*t.height-1)+e]=n[4*(t.width*(t.height-1)-2)+e];a.putImageData(i,0,0),6==++u&&(T=this.width,y.appendChild(N),r())},m=0;m<6;m++){var h=new Image;h.crossOrigin=S.crossOrigin||"anonymous",h.side=m,h.onload=p,h.src="multires"==L?encodeURI(c.replace("%s",d[m])+"."+$.extension):encodeURI($[m].src)}}else{if(!P)throw console.log("Error: no WebGL support detected!"),{type:"no webgl"};$.basePath?$.fullpath=$.basePath+$.path:$.fullpath=$.path,$.invTileResolution=1/$.tileResolution;var f=x();for(A=[],m=0;m<6;m++)A[m]=f.slice(12*m,12*m+12),f=x();if("equirectangular"==L){if(g=Math.max($.width,$.height),(v=P.getParameter(P.MAX_TEXTURE_SIZE))<g)throw console.log("Error: The image is too big; it's "+g+"px wide, but this device's maximum supported width is "+v+"px."),{type:"webgl size error",width:g,maxWidth:v}}else if("cubemap"==L&&(g=$[0].width,(v=P.getParameter(P.MAX_CUBE_MAP_TEXTURE_SIZE))<g))throw console.log("Error: The cube face image is too big; it's "+g+"px wide, but this device's maximum supported width is "+v+"px."),{type:"webgl size error",width:g,maxWidth:v};l===z||l.horizonPitch===z&&l.horizonRoll===z||(I=[l.horizonPitch==z?0:l.horizonPitch,l.horizonRoll==z?0:l.horizonRoll]);var g,t=P.TEXTURE_2D,e=(P.viewport(0,0,P.drawingBufferWidth,P.drawingBufferHeight),b=P.createShader(P.VERTEX_SHADER),G),a=("multires"==L&&(e=W),P.shaderSource(b,e),P.compileShader(b),w=P.createShader(P.FRAGMENT_SHADER),J),v=("cubemap"==L?(t=P.TEXTURE_CUBE_MAP,a=Y):"multires"==L&&(a=Q),P.shaderSource(w,a),P.compileShader(w),D=P.createProgram(),P.attachShader(D,b),P.attachShader(D,w),P.linkProgram(D),P.getShaderParameter(b,P.COMPILE_STATUS)||console.log(P.getShaderInfoLog(b)),P.getShaderParameter(w,P.COMPILE_STATUS)||console.log(P.getShaderInfoLog(w)),P.getProgramParameter(D,P.LINK_STATUS)||console.log(P.getProgramInfoLog(D)),P.useProgram(D),D.drawInProgress=!1,D.texCoordLocation=P.getAttribLocation(D,"a_texCoord"),P.enableVertexAttribArray(D.texCoordLocation),"multires"!=L?(C=C||P.createBuffer(),P.bindBuffer(P.ARRAY_BUFFER,C),P.bufferData(P.ARRAY_BUFFER,new Float32Array([-1,1,1,1,1,-1,-1,1,1,-1,-1,-1]),P.STATIC_DRAW),P.vertexAttribPointer(D.texCoordLocation,2,P.FLOAT,!1,0,0),D.aspectRatio=P.getUniformLocation(D,"u_aspectRatio"),P.uniform1f(D.aspectRatio,P.drawingBufferWidth/P.drawingBufferHeight),D.psi=P.getUniformLocation(D,"u_psi"),D.theta=P.getUniformLocation(D,"u_theta"),D.f=P.getUniformLocation(D,"u_f"),D.h=P.getUniformLocation(D,"u_h"),D.v=P.getUniformLocation(D,"u_v"),D.vo=P.getUniformLocation(D,"u_vo"),D.rot=P.getUniformLocation(D,"u_rot"),P.uniform1f(D.h,i/(2*Math.PI)),P.uniform1f(D.v,n/Math.PI),P.uniform1f(D.vo,o/Math.PI*2),"equirectangular"==L&&(D.backgroundColor=P.getUniformLocation(D,"u_backgroundColor"),g=l.backgroundColor||[0,0,0],P.uniform4fv(D.backgroundColor,g.concat([1]))),D.texture=P.createTexture(),P.bindTexture(t,D.texture),"cubemap"==L?(P.texImage2D(P.TEXTURE_CUBE_MAP_POSITIVE_X,0,P.RGB,P.RGB,P.UNSIGNED_BYTE,$[1]),P.texImage2D(P.TEXTURE_CUBE_MAP_NEGATIVE_X,0,P.RGB,P.RGB,P.UNSIGNED_BYTE,$[3]),P.texImage2D(P.TEXTURE_CUBE_MAP_POSITIVE_Y,0,P.RGB,P.RGB,P.UNSIGNED_BYTE,$[4]),P.texImage2D(P.TEXTURE_CUBE_MAP_NEGATIVE_Y,0,P.RGB,P.RGB,P.UNSIGNED_BYTE,$[5]),P.texImage2D(P.TEXTURE_CUBE_MAP_POSITIVE_Z,0,P.RGB,P.RGB,P.UNSIGNED_BYTE,$[0]),P.texImage2D(P.TEXTURE_CUBE_MAP_NEGATIVE_Z,0,P.RGB,P.RGB,P.UNSIGNED_BYTE,$[2])):P.texImage2D(t,0,P.RGB,P.RGB,P.UNSIGNED_BYTE,$),P.texParameteri(t,P.TEXTURE_WRAP_S,P.CLAMP_TO_EDGE),P.texParameteri(t,P.TEXTURE_WRAP_T,P.CLAMP_TO_EDGE),P.texParameteri(t,P.TEXTURE_MIN_FILTER,P.LINEAR),P.texParameteri(t,P.TEXTURE_MAG_FILTER,P.LINEAR)):(D.vertPosLocation=P.getAttribLocation(D,"a_vertCoord"),P.enableVertexAttribArray(D.vertPosLocation),O=O||P.createBuffer(),E=E||P.createBuffer(),k=k||P.createBuffer(),P.bindBuffer(P.ARRAY_BUFFER,E),P.bufferData(P.ARRAY_BUFFER,new Float32Array([0,0,1,0,1,1,0,1]),P.STATIC_DRAW),P.bindBuffer(P.ELEMENT_ARRAY_BUFFER,k),P.bufferData(P.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,0,2,3]),P.STATIC_DRAW),D.perspUniform=P.getUniformLocation(D,"u_perspMatrix"),D.cubeUniform=P.getUniformLocation(D,"u_cubeMatrix"),D.level=-1,D.currentNodes=[],D.nodeCache=[],D.nodeCacheTimestamp=0),P.getError());if(0!==v)throw console.log("Error: Something went wrong with WebGL!",v),{type:"webgl error"};r()}},this.destroy=function(){var e;y!==z&&(F!==z&&y.contains(F)&&y.removeChild(F),N!==z)&&y.contains(N)&&y.removeChild(N),P&&(e=P.getExtension("WEBGL_lose_context"))&&e.loseContext()},this.resize=function(){var e=t.devicePixelRatio||1;F.width=F.clientWidth*e,F.height=F.clientHeight*e,P&&(1286==P.getError()&&H(),P.viewport(0,0,P.drawingBufferWidth,P.drawingBufferHeight),"multires"!=L)&&P.uniform1f(D.aspectRatio,F.clientWidth/F.clientHeight)},this.resize(),this.setPose=function(e,t){I=[e,t]},this.render=function(e,t,a,i){var n,o,r,l=0;if((i=i===z?{}:i).roll&&(l=i.roll),I!==z&&(C=I[0],c=I[1],s=e,p=t,r=Math.cos(c)*Math.sin(e)*Math.sin(C)+Math.cos(e)*(Math.cos(C)*Math.cos(t)+Math.sin(c)*Math.sin(C)*Math.sin(t)),o=-Math.sin(e)*Math.sin(c)+Math.cos(e)*Math.cos(c)*Math.sin(t),n=Math.cos(c)*Math.cos(C)*Math.sin(e)+Math.cos(e)*(-Math.cos(t)*Math.sin(C)+Math.cos(C)*Math.sin(c)*Math.sin(t)),e=Math.asin(Math.max(Math.min(n,1),-1)),t=Math.atan2(o,r),n=[Math.cos(s)*(Math.sin(c)*Math.sin(C)*Math.cos(p)-Math.cos(C)*Math.sin(p)),Math.cos(s)*Math.cos(c)*Math.cos(p),Math.cos(s)*(Math.cos(C)*Math.sin(c)*Math.cos(p)+Math.sin(p)*Math.sin(C))],o=[-Math.cos(e)*Math.sin(t),Math.cos(e)*Math.cos(t)],r=Math.acos(Math.max(Math.min((n[0]*o[0]+n[1]*o[1])/(Math.sqrt(n[0]*n[0]+n[1]*n[1]+n[2]*n[2])*Math.sqrt(o[0]*o[0]+o[1]*o[1])),1),-1)),l+=r=n[2]<0?2*Math.PI-r:r),P||"multires"!=L&&"cubemap"!=L){if("multires"!=L){var s=2*Math.atan(Math.tan(.5*a)/(P.drawingBufferWidth/P.drawingBufferHeight));b=1/Math.tan(.5*s),P.uniform1f(D.psi,t),P.uniform1f(D.theta,e),P.uniform1f(D.rot,l),P.uniform1f(D.f,b),!0===M&&"equirectangular"==L&&(P.bindTexture(P.TEXTURE_2D,D.texture),P.texImage2D(P.TEXTURE_2D,0,P.RGB,P.RGB,P.UNSIGNED_BYTE,$)),P.drawArrays(P.TRIANGLES,0,6)}else{for(var c=((e,t,a,i)=>(e=2*Math.atan(Math.tan(e/2)*P.drawingBufferHeight/P.drawingBufferWidth),[(e=1/Math.tan(e/2))/t,0,0,0,0,e,0,0,0,0,(i+a)/(a-i),2*i*a/(a-i),0,0,-1,0]))(a,P.drawingBufferWidth/P.drawingBufferHeight,.1,100),d=a,u=1;u<$.maxLevel&&P.drawingBufferWidth>$.tileResolution*Math.pow(2,u-1)*Math.tan(d/2)*.707;)u++;D.level=u;var p=B(p=[1,0,0,0,1,0,0,0,1],-l,"z"),m=(p=B(p,-e,"x"),p=[(p=B(p,t,"y"))[0],p[1],p[2],0,p[3],p[4],p[5],0,p[6],p[7],p[8],0,0,0,0,1],P.uniformMatrix4fv(D.perspUniform,!1,new Float32Array(U(c))),P.uniformMatrix4fv(D.cubeUniform,!1,new Float32Array(U(p))),[c[0]*p[0],c[0]*p[1],c[0]*p[2],0,c[5]*p[4],c[5]*p[5],c[5]*p[6],0,c[10]*p[8],c[10]*p[9],c[10]*p[10],c[11],-p[8],-p[9],-p[10],0]);if(D.nodeCache.sort(_),200<D.nodeCache.length&&D.nodeCache.length>D.currentNodes.length+50)for(var h=D.nodeCache.splice(200,D.nodeCache.length-200),f=0;f<h.length;f++)P.deleteTexture(h[f].texture);D.currentNodes=[];var g=["f","b","u","d","l","r"];for(y=0;y<6;y++)!function e(t,a,i,n,o){if(j(t,a.vertices)){for(var r=a.vertices,l=r[0]+r[3]+r[6]+r[9],s=r[1]+r[4]+r[7]+r[10],c=r[2]+r[5]+r[8]+r[11],d=Math.sqrt(l*l+s*s+c*c),c=Math.asin(c/d),d=Math.atan2(s,l),s=d-n,u=(s+=s>Math.PI?-2*Math.PI:s<-Math.PI?2*Math.PI:0,s=Math.abs(s),a.diff=Math.acos(Math.sin(i)*Math.sin(c)+Math.cos(i)*Math.cos(c)*Math.cos(s)),!1),p=0;p<D.nodeCache.length;p++)if(D.nodeCache[p].path==a.path){u=!0,D.nodeCache[p].timestamp=D.nodeCacheTimestamp++,D.nodeCache[p].diff=a.diff,D.currentNodes.push(D.nodeCache[p]);break}if(u||(a.timestamp=D.nodeCacheTimestamp++,D.currentNodes.push(a),D.nodeCache.push(a)),a.level<D.level){var m,l=$.cubeResolution*Math.pow(2,a.level-$.maxLevel),d=Math.ceil(l*$.invTileResolution)-1,c=l%$.tileResolution*2,s=2*l%$.tileResolution,l=(0===s&&(s=$.tileResolution),0===c&&(c=2*$.tileResolution),.5),h=1-(l=a.x!=d&&a.y!=d?l:1-$.tileResolution/($.tileResolution+s)),f=[],g=l,v=l,y=l,b=h,w=h,C=h;s<$.tileResolution&&(a.x==d&&a.y!=d?(w=v=.5,"d"!=a.side&&"u"!=a.side||(C=y=.5)):a.x!=d&&a.y==d&&(b=g=.5,"l"!=a.side&&"r"!=a.side||(C=y=.5))),c<=$.tileResolution&&(a.x==d&&(g=0,b=1,"l"!=a.side&&"r"!=a.side||(y=0,C=1)),a.y==d)&&(v=0,w=1,"d"!=a.side&&"u"!=a.side||(y=0,C=1)),s=[r[0],r[1],r[2],r[0]*g+r[3]*b,r[1]*l+r[4]*h,r[2]*y+r[5]*C,r[0]*g+r[6]*b,r[1]*v+r[7]*w,r[2]*y+r[8]*C,r[0]*l+r[9]*h,r[1]*v+r[10]*w,r[2]*y+r[11]*C],m=new V(s,a.side,a.level+1,2*a.x,2*a.y,$.fullpath),f.push(m),a.x==d&&c<=$.tileResolution||(s=[r[0]*g+r[3]*b,r[1]*l+r[4]*h,r[2]*y+r[5]*C,r[3],r[4],r[5],r[3]*l+r[6]*h,r[4]*v+r[7]*w,r[5]*y+r[8]*C,r[0]*g+r[6]*b,r[1]*v+r[7]*w,r[2]*y+r[8]*C],m=new V(s,a.side,a.level+1,2*a.x+1,2*a.y,$.fullpath),f.push(m)),a.x==d&&c<=$.tileResolution||a.y==d&&c<=$.tileResolution||(s=[r[0]*g+r[6]*b,r[1]*v+r[7]*w,r[2]*y+r[8]*C,r[3]*l+r[6]*h,r[4]*v+r[7]*w,r[5]*y+r[8]*C,r[6],r[7],r[8],r[9]*g+r[6]*b,r[10]*l+r[7]*h,r[11]*y+r[8]*C],m=new V(s,a.side,a.level+1,2*a.x+1,2*a.y+1,$.fullpath),f.push(m)),a.y==d&&c<=$.tileResolution||(s=[r[0]*l+r[9]*h,r[1]*v+r[10]*w,r[2]*y+r[11]*C,r[0]*g+r[6]*b,r[1]*v+r[7]*w,r[2]*y+r[8]*C,r[9]*g+r[6]*b,r[10]*l+r[7]*h,r[11]*y+r[8]*C,r[9],r[10],r[11]],m=new V(s,a.side,a.level+1,2*a.x,2*a.y+1,$.fullpath),f.push(m));for(var k=0;k<f.length;k++)e(t,f[k],i,n,o)}}}(m,new V(A[y],g[y],1,0,0,$.fullpath),e,t,a);for(D.currentNodes.sort(R),f=0;f<D.currentNodes.length;f++)if(!D.currentNodes[f].texture){setTimeout(q,0,D.currentNodes[f]);break}if(!D.drawInProgress){D.drawInProgress=!0;for(var v=0;v<D.currentNodes.length;v++)D.currentNodes[v].textureLoaded&&(P.bindBuffer(P.ARRAY_BUFFER,O),P.bufferData(P.ARRAY_BUFFER,new Float32Array(D.currentNodes[v].vertices),P.STATIC_DRAW),P.vertexAttribPointer(D.vertPosLocation,3,P.FLOAT,!1,0,0),P.bindBuffer(P.ARRAY_BUFFER,E),P.vertexAttribPointer(D.texCoordLocation,2,P.FLOAT,!1,0,0),P.bindTexture(P.TEXTURE_2D,D.currentNodes[v].texture),P.drawElements(P.TRIANGLES,6,P.UNSIGNED_SHORT,0));D.drawInProgress=!1}}if(i.returnImage!==z)return F.toDataURL("image/png")}else{var y,b,w={f:"translate3d(-"+((y=T/2)+2)+"px, -"+(y+2)+"px, -"+y+"px)",b:"translate3d("+(y+2)+"px, -"+(y+2)+"px, "+y+"px) rotateX(180deg) rotateZ(180deg)",u:"translate3d(-"+(y+2)+"px, -"+y+"px, "+(y+2)+"px) rotateX(270deg)",d:"translate3d(-"+(y+2)+"px, "+y+"px, -"+(y+2)+"px) rotateX(90deg)",l:"translate3d(-"+y+"px, -"+(y+2)+"px, "+(y+2)+"px) rotateX(180deg) rotateY(90deg) rotateZ(180deg)",r:"translate3d("+y+"px, -"+(y+2)+"px, -"+(y+2)+"px) rotateY(270deg)"},C=(b=1/Math.tan(a/2))*P.drawingBufferWidth/2+"px",k="perspective("+C+") translateZ("+C+") rotateX("+e+"rad) rotateY("+t+"rad) ",S=Object.keys(w);for(f=0;f<6;f++){var x=N.querySelector(".pnlm-"+S[f]+"face").style;x.webkitTransform=k+w[S[f]],x.transform=k+w[S[f]]}}},this.isLoading=function(){if(P&&"multires"==L)for(var e=0;e<D.currentNodes.length;e++)if(!D.currentNodes[e].textureLoaded)return!0;return!1},this.getCanvas=function(){return F};var e=(()=>{var i,n=4,o={},r=[];function e(){var a=this;this.texture=this.callback=null,this.image=new Image,this.image.crossOrigin=i||"anonymous",this.image.addEventListener("load",function(){e=a.image,t=a.texture,P.bindTexture(P.TEXTURE_2D,t),P.texImage2D(P.TEXTURE_2D,0,P.RGB,P.RGB,P.UNSIGNED_BYTE,e),P.texParameteri(P.TEXTURE_2D,P.TEXTURE_MAG_FILTER,P.LINEAR),P.texParameteri(P.TEXTURE_2D,P.TEXTURE_MIN_FILTER,P.LINEAR),P.texParameteri(P.TEXTURE_2D,P.TEXTURE_WRAP_S,P.CLAMP_TO_EDGE),P.texParameteri(P.TEXTURE_2D,P.TEXTURE_WRAP_T,P.CLAMP_TO_EDGE),P.bindTexture(P.TEXTURE_2D,null),a.callback(a.texture);var e,t=a;r.length?(e=r.shift(),t.loadTexture(e.src,e.texture,e.callback)):o[n++]=t})}function l(e,t,a){this.src=e,this.texture=t,this.callback=a}e.prototype.loadTexture=function(e,t,a){this.texture=t,this.callback=a,this.image.src=e};for(var t=0;t<n;t++)o[t]=new e;return function(e,t,a){i=a;a=P.createTexture();return n?o[--n].loadTexture(e,a,t):r.push(new l(e,a,t)),a}})();function q(t){t.textureLoad||(t.textureLoad=!0,e(encodeURI(t.path+"."+$.extension),function(e){t.texture=e,t.textureLoaded=!0},S.crossOrigin))}function o(e,t){var e=[e[0]*t[0]+e[1]*t[1]+e[2]*t[2],e[4]*t[0]+e[5]*t[1]+e[6]*t[2],e[11]+e[8]*t[0]+e[9]*t[1]+e[10]*t[2],1/(e[12]*t[0]+e[13]*t[1]+e[14]*t[2])],t=e[0]*e[3],a=e[1]*e[3],e=e[2]*e[3],i=[0,0,0];return t<-1&&(i[0]=-1),1<t&&(i[0]=1),a<-1&&(i[1]=-1),1<a&&(i[1]=1),(e<-1||1<e)&&(i[2]=1),i}function j(e,t){var a=o(e,t.slice(0,3)),i=o(e,t.slice(3,6)),n=o(e,t.slice(6,9)),e=o(e,t.slice(9,12)),t=a[0]+i[0]+n[0]+e[0];return-4!=t&&4!=t&&-4!=(t=a[1]+i[1]+n[1]+e[1])&&4!=t&&4!=a[2]+i[2]+n[2]+e[2]}function H(){console.log("Reducing canvas size due to error 1286!"),F.width=Math.round(F.width/2),F.height=Math.round(F.height/2)}}var G=["attribute vec2 a_texCoord;","varying vec2 v_texCoord;","void main() {","gl_Position = vec4(a_texCoord, 0.0, 1.0);","v_texCoord = a_texCoord;","}"].join(""),W=["attribute vec3 a_vertCoord;","attribute vec2 a_texCoord;","uniform mat4 u_cubeMatrix;","uniform mat4 u_perspMatrix;","varying mediump vec2 v_texCoord;","void main(void) {","gl_Position = u_perspMatrix * u_cubeMatrix * vec4(a_vertCoord, 1.0);","v_texCoord = a_texCoord;","}"].join(""),e=["precision mediump float;","uniform float u_aspectRatio;","uniform float u_psi;","uniform float u_theta;","uniform float u_f;","uniform float u_h;","uniform float u_v;","uniform float u_vo;","uniform float u_rot;","const float PI = 3.14159265358979323846264;","uniform sampler2D u_image;","uniform samplerCube u_imageCube;","varying vec2 v_texCoord;","uniform vec4 u_backgroundColor;","void main() {","float x = v_texCoord.x * u_aspectRatio;","float y = v_texCoord.y;","float sinrot = sin(u_rot);","float cosrot = cos(u_rot);","float rot_x = x * cosrot - y * sinrot;","float rot_y = x * sinrot + y * cosrot;","float sintheta = sin(u_theta);","float costheta = cos(u_theta);","float a = u_f * costheta - rot_y * sintheta;","float root = sqrt(rot_x * rot_x + a * a);","float lambda = atan(rot_x / root, a / root) + u_psi;","float phi = atan((rot_y * costheta + u_f * sintheta) / root);"].join("\n"),Y=e+["float cosphi = cos(phi);","gl_FragColor = textureCube(u_imageCube, vec3(cosphi*sin(lambda), sin(phi), cosphi*cos(lambda)));","}"].join("\n"),J=e+["lambda = mod(lambda + PI, PI * 2.0) - PI;","vec2 coord = vec2(lambda / PI, phi / (PI / 2.0));","if(coord.x < -u_h || coord.x > u_h || coord.y < -u_v + u_vo || coord.y > u_v + u_vo)","gl_FragColor = u_backgroundColor;","else","gl_FragColor = texture2D(u_image, vec2((coord.x + u_h) / (u_h * 2.0), (-coord.y + u_v + u_vo) / (u_v * 2.0)));","}"].join("\n"),Q=["varying mediump vec2 v_texCoord;","uniform sampler2D u_sampler;","void main(void) {","gl_FragColor = texture2D(u_sampler, v_texCoord);","}"].join("");return{renderer:function(e,t,a,i){return new n(e)}}})(window,document),define("pwyl-nudge-popup-js/pwyl-nudge-popup",["jquery","_","analytics/analyticsEventLayer"],function(g,e,v){var t={},a=!1,i=g(".nudgeRepeatUserPopUp .nudgeRepeatUserPopUpConfig").data(),y=(g("#global-market-configuration .configuration").data("locale"),i&&i.ngcctalabel?i.ngcctalabel:"Build"),b=i&&i.reservectalabel?i.reservectalabel:"Reserve",w=i&&i.slidingdelay?i.slidingdelay:500,n=i&&i.priorityorder?i.priorityorder:"",o=i&&i.servicelayerendpoint?i.servicelayerendpoint:"",r=g.cookie("ADFS-credential")?g.cookie("ADFS-credential"):"",C=i&&i.brochuredownloadlabel||"Explore More",k=i&&i.testdrivelabel||"Continue Test Drive",l=i&&i.isnameplatepage||!1,s=i&&i.brandsitenameplatecode||"",c=i&&i.includereservecompletejourney,d=3,u=[],p=[],m=[];function h(){var e;g(".close-icon").bind("click",()=>{g(".puwyl-overlay").removeClass("puwyl-overlay-enabled")}),a||(a=!0,e=["SVVConfigInProgressEcom","SVVConfigCompleteEcom"],"true"===c&&e.push("SVVStartResvEcom"),window.FPS&&FPS.get([{SpecificVehicleView:{suffixFilter:e}},{ActionNameplate:{suffixFilter:["RequestBrochure","ScheduleTestDrive"]}}],{success:function(e){var a,t=e[0].SpecificVehicleView,e=e[1].ActionNameplate;if(!l&&0<t.length&&(t.forEach(function(e){e._nameplate||(e._nameplate=e._UID.split(":")[0]),e._UID.endsWith(":true")&&(e._UID=e._UID.replace(":true","")),e._trim?e.uniqID=e._nameplate.concat("_").concat(e._trim):e.uniqID=e._nameplate.concat("_").concat(e.suffix)}),t=t.reduce((e,t)=>e.find(e=>e.uniqID===t.uniqID)?e:e.concat([t]),[]),u.push(t)),e.length&&(a=[],e.forEach(function(e){var t;"ScheduleTestDrive"==e.suffix?"true"==(t=x(e.returnURL,"isSubmit"))&&null!=t||a.push(e):"RequestBrochure"==e.suffix&&a.push(e)}),l?(t=a.filter(function(e){return"ScheduleTestDrive"==e.suffix&&e._nameplate==s}),u.push(t)):u.push(a)),(p=[].concat.apply([],u)).length){if(m=p.sort(function(e,t){return new Date(t.on)-new Date(e.on)}),0<n.length){let a=[];n.forEach(t=>{m.forEach(e=>{e.suffix===t.journeyID&&a.push(e)})}),m=a}(async e=>{for(var t,a,i,n,o,r,l,s,c=0;c<e.length;c++){var d,u,p=e[c],m={ctaURL:p.returnURL,count:p.count,modelTitle:p._nameplate},h=p.hasOwnProperty("_UID")&&p._UID.replaceAll("#","%23").replaceAll(":",",").replace(",","~"),f=p.suffix;"RequestBrochure"==f?(d=decodeURIComponent(p.returnURL),m.cTAlabel=C,m.imageURL=x(d,"imgsrc"),m.ctaURL=d.split("?")[0]):"ScheduleTestDrive"==f?(m.cTAlabel=k,m.ctaURL=decodeURIComponent(p.returnURL),await(e=>{var i=window.location.pathname;return-1!=i.indexOf(".html")&&(i=i.substring(0,i.indexOf(".html"))),new Promise(function(t,a){g.ajax({type:"GET",url:i+".nameplateimage."+e+".data",success:function(e){t(e)},error:function(e){a(e)}})})})(p._nameplate).then(function(e){m.imageURL=e.nameplateImage}).catch(function(e){console.error(e)})):"SVVConfigInProgressEcom"!=f&&"SVVConfigCompleteEcom"!=f&&"SVVStartResvEcom"!=f||(m.cTAlabel="SVVConfigInProgressEcom"==f?y:b,m.uID=h,m.ctaURL.includes("paint")&&p.hasOwnProperty("_UID")&&4<(d=p._UID.split(":")).length&&(u=((e,t)=>(e=e.replace(/[\[\]]/g,"\\$&"),(e=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t))?e[2]?decodeURIComponent(e[2].replace(/\+/g," ")):"":null))("paint",p=m.ctaURL),d="paint="+d[4],m.ctaURL=p.replace(u="paint="+u,d)),"SVVConfigCompleteEcom"!=f&&"SVVStartResvEcom"!=f||(m.ctaURL=m.ctaURL.replace("extras","summary")),await S(h).then(e=>{m.modelTitle=e.modelTitle,m.imageURL=e.imageURL}).catch(function(e){console.error(e)})),m.modelTitle&&finalFPSData.push(m)}0<finalFPSData.length&&(t=finalFPSData,a=g(".puwyl-overlay-content"),i=g(".puwyl-hidden-content"),s=l=r=o=n="",t.forEach(function(e,t){r=`<div class="puwyl-image"><img src="${e.imageURL}" /></div>`,n+=`<div class="puwyl-model-wrapper">${r+(l=`<div class="puwyl-title body2-regular-gray-ttNone-ls1">${e.modelTitle}</div>`)+(s=`<div class="puwyl-cta"><a href="${e.ctaURL}" class="cta-button">${e.cTAlabel}</a></div>`)}</div>`,o+=`<div class="puwyl-model-wrapper">${l} <div class="img-cta-wrapper"> ${r+s}</div></div>`}),a.append(n),i.append(o),setTimeout(function(){g(".puwyl-overlay").addClass("puwyl-overlay-enabled"),3===finalFPSData.length&&g(".puwyl-overlay").addClass("scroll-overlay"),v.getNudgePopupEvents().trackNudgePopupLoad("global-overlay")},w))})(m.length>d?m.splice(0,d):m)}},error:function(e){console.error(e)}}))}finalFPSData=[];var S=async e=>{let t="";e=((t=r?await fetch(o+`&config=${e}&namedConfig=default`,{headers:{"Content-Type":"application/json",Authorizationtemp:"Bearer "+r}}).then(e=>e.json()):await fetch(o+`&config=${e}&namedConfig=default`).then(e=>e.json()))?.data?.features?.selectedByMarketing[0]?.features?t?.data?.features?.selectedByMarketing:t?.data?.features?.selectedByMarketing[0]?.children)[0]?.features[0].name;return t?.data?.images?.showroom?{imageURL:"https:"+t?.data?.images?.showroom[0]?.urls[0],modelTitle:t?.data?.props["nameplate-label"]+" "+e}:{imageURL:"",modelTitle:t?.data?.props["nameplate-label"]+" "+e}};function x(e,t){e=decodeURIComponent(e).split("?")[1];return new URLSearchParams(e).get(t)}return t.init=function(){h()},t});